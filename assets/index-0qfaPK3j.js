var QX=Object.defineProperty;var JX=(i,e,n)=>e in i?QX(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n;var jb=(i,e,n)=>JX(i,typeof e!="symbol"?e+"":e,n);function tY(i,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in i)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(i,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function fm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var jR={exports:{}},qb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uk;function eY(){if(Uk)return qb;Uk=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var o=null;if(a!==void 0&&(o=""+a),s.key!==void 0&&(o=""+s.key),"key"in s){a={};for(var l in s)l!=="key"&&(a[l]=s[l])}else a=s;return s=a.ref,{$$typeof:i,type:r,key:o,ref:s!==void 0?s:null,props:a}}return qb.Fragment=e,qb.jsx=n,qb.jsxs=n,qb}var kk;function nY(){return kk||(kk=1,jR.exports=eY()),jR.exports}var st=nY(),qR={exports:{}},$b={},$R={exports:{}},WR={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zk;function iY(){return zk||(zk=1,function(i){function e(q,W){var K=q.length;q.push(W);t:for(;0<K;){var et=K-1>>>1,Q=q[et];if(0<s(Q,W))q[et]=W,q[K]=Q,K=et;else break t}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var W=q[0],K=q.pop();if(K!==W){q[0]=K;t:for(var et=0,Q=q.length,dt=Q>>>1;et<dt;){var yt=2*(et+1)-1,xt=q[yt],nt=yt+1,ht=q[nt];if(0>s(xt,K))nt<Q&&0>s(ht,xt)?(q[et]=ht,q[nt]=K,et=nt):(q[et]=xt,q[yt]=K,et=yt);else if(nt<Q&&0>s(ht,K))q[et]=ht,q[nt]=K,et=nt;else break t}}return W}function s(q,W){var K=q.sortIndex-W.sortIndex;return K!==0?K:q.id-W.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();i.unstable_now=function(){return o.now()-l}}var u=[],f=[],d=1,m=null,y=3,_=!1,x=!1,S=!1,T=!1,b=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function A(q){for(var W=n(f);W!==null;){if(W.callback===null)r(f);else if(W.startTime<=q)r(f),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(f)}}function I(q){if(S=!1,A(q),!x)if(n(u)!==null)x=!0,k||(k=!0,H());else{var W=n(f);W!==null&&J(I,W.startTime-q)}}var k=!1,N=-1,L=5,U=-1;function O(){return T?!0:!(i.unstable_now()-U<L)}function F(){if(T=!1,k){var q=i.unstable_now();U=q;var W=!0;try{t:{x=!1,S&&(S=!1,M(N),N=-1),_=!0;var K=y;try{e:{for(A(q),m=n(u);m!==null&&!(m.expirationTime>q&&O());){var et=m.callback;if(typeof et=="function"){m.callback=null,y=m.priorityLevel;var Q=et(m.expirationTime<=q);if(q=i.unstable_now(),typeof Q=="function"){m.callback=Q,A(q),W=!0;break e}m===n(u)&&r(u),A(q)}else r(u);m=n(u)}if(m!==null)W=!0;else{var dt=n(f);dt!==null&&J(I,dt.startTime-q),W=!1}}break t}finally{m=null,y=K,_=!1}W=void 0}}finally{W?H():k=!1}}}var H;if(typeof R=="function")H=function(){R(F)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,X=V.port2;V.port1.onmessage=F,H=function(){X.postMessage(null)}}else H=function(){b(F,0)};function J(q,W){N=b(function(){q(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(q){q.callback=null},i.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<q?Math.floor(1e3/q):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_next=function(q){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var K=y;y=W;try{return q()}finally{y=K}},i.unstable_requestPaint=function(){T=!0},i.unstable_runWithPriority=function(q,W){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var K=y;y=q;try{return W()}finally{y=K}},i.unstable_scheduleCallback=function(q,W,K){var et=i.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?et+K:et):K=et,q){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=K+Q,q={id:d++,callback:W,priorityLevel:q,startTime:K,expirationTime:Q,sortIndex:-1},K>et?(q.sortIndex=K,e(f,q),n(u)===null&&q===n(f)&&(S?(M(N),N=-1):S=!0,J(I,K-et))):(q.sortIndex=Q,e(u,q),x||_||(x=!0,k||(k=!0,H()))),q},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(q){var W=y;return function(){var K=y;y=W;try{return q.apply(this,arguments)}finally{y=K}}}}(WR)),WR}var Bk;function rY(){return Bk||(Bk=1,$R.exports=iY()),$R.exports}var XR={exports:{}},Bn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fk;function sY(){if(Fk)return Bn;Fk=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.iterator;function y(Q){return Q===null||typeof Q!="object"?null:(Q=m&&Q[m]||Q["@@iterator"],typeof Q=="function"?Q:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function T(Q,dt,yt){this.props=Q,this.context=dt,this.refs=S,this.updater=yt||_}T.prototype.isReactComponent={},T.prototype.setState=function(Q,dt){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,dt,"setState")},T.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function b(){}b.prototype=T.prototype;function M(Q,dt,yt){this.props=Q,this.context=dt,this.refs=S,this.updater=yt||_}var R=M.prototype=new b;R.constructor=M,x(R,T.prototype),R.isPureReactComponent=!0;var A=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function N(Q,dt,yt,xt,nt,ht){return yt=ht.ref,{$$typeof:i,type:Q,key:dt,ref:yt!==void 0?yt:null,props:ht}}function L(Q,dt){return N(Q.type,dt,void 0,void 0,void 0,Q.props)}function U(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===i}function O(Q){var dt={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(yt){return dt[yt]})}var F=/\/+/g;function H(Q,dt){return typeof Q=="object"&&Q!==null&&Q.key!=null?O(""+Q.key):dt.toString(36)}function V(){}function X(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(V,V):(Q.status="pending",Q.then(function(dt){Q.status==="pending"&&(Q.status="fulfilled",Q.value=dt)},function(dt){Q.status==="pending"&&(Q.status="rejected",Q.reason=dt)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function J(Q,dt,yt,xt,nt){var ht=typeof Q;(ht==="undefined"||ht==="boolean")&&(Q=null);var ft=!1;if(Q===null)ft=!0;else switch(ht){case"bigint":case"string":case"number":ft=!0;break;case"object":switch(Q.$$typeof){case i:case e:ft=!0;break;case d:return ft=Q._init,J(ft(Q._payload),dt,yt,xt,nt)}}if(ft)return nt=nt(Q),ft=xt===""?"."+H(Q,0):xt,A(nt)?(yt="",ft!=null&&(yt=ft.replace(F,"$&/")+"/"),J(nt,dt,yt,"",function(Kt){return Kt})):nt!=null&&(U(nt)&&(nt=L(nt,yt+(nt.key==null||Q&&Q.key===nt.key?"":(""+nt.key).replace(F,"$&/")+"/")+ft)),dt.push(nt)),1;ft=0;var gt=xt===""?".":xt+":";if(A(Q))for(var wt=0;wt<Q.length;wt++)xt=Q[wt],ht=gt+H(xt,wt),ft+=J(xt,dt,yt,ht,nt);else if(wt=y(Q),typeof wt=="function")for(Q=wt.call(Q),wt=0;!(xt=Q.next()).done;)xt=xt.value,ht=gt+H(xt,wt++),ft+=J(xt,dt,yt,ht,nt);else if(ht==="object"){if(typeof Q.then=="function")return J(X(Q),dt,yt,xt,nt);throw dt=String(Q),Error("Objects are not valid as a React child (found: "+(dt==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":dt)+"). If you meant to render a collection of children, use an array instead.")}return ft}function q(Q,dt,yt){if(Q==null)return Q;var xt=[],nt=0;return J(Q,xt,"","",function(ht){return dt.call(yt,ht,nt++)}),xt}function W(Q){if(Q._status===-1){var dt=Q._result;dt=dt(),dt.then(function(yt){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=yt)},function(yt){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=yt)}),Q._status===-1&&(Q._status=0,Q._result=dt)}if(Q._status===1)return Q._result.default;throw Q._result}var K=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var dt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(dt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)};function et(){}return Bn.Children={map:q,forEach:function(Q,dt,yt){q(Q,function(){dt.apply(this,arguments)},yt)},count:function(Q){var dt=0;return q(Q,function(){dt++}),dt},toArray:function(Q){return q(Q,function(dt){return dt})||[]},only:function(Q){if(!U(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},Bn.Component=T,Bn.Fragment=n,Bn.Profiler=s,Bn.PureComponent=M,Bn.StrictMode=r,Bn.Suspense=u,Bn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Bn.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return I.H.useMemoCache(Q)}},Bn.cache=function(Q){return function(){return Q.apply(null,arguments)}},Bn.cloneElement=function(Q,dt,yt){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var xt=x({},Q.props),nt=Q.key,ht=void 0;if(dt!=null)for(ft in dt.ref!==void 0&&(ht=void 0),dt.key!==void 0&&(nt=""+dt.key),dt)!k.call(dt,ft)||ft==="key"||ft==="__self"||ft==="__source"||ft==="ref"&&dt.ref===void 0||(xt[ft]=dt[ft]);var ft=arguments.length-2;if(ft===1)xt.children=yt;else if(1<ft){for(var gt=Array(ft),wt=0;wt<ft;wt++)gt[wt]=arguments[wt+2];xt.children=gt}return N(Q.type,nt,void 0,void 0,ht,xt)},Bn.createContext=function(Q){return Q={$$typeof:o,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:a,_context:Q},Q},Bn.createElement=function(Q,dt,yt){var xt,nt={},ht=null;if(dt!=null)for(xt in dt.key!==void 0&&(ht=""+dt.key),dt)k.call(dt,xt)&&xt!=="key"&&xt!=="__self"&&xt!=="__source"&&(nt[xt]=dt[xt]);var ft=arguments.length-2;if(ft===1)nt.children=yt;else if(1<ft){for(var gt=Array(ft),wt=0;wt<ft;wt++)gt[wt]=arguments[wt+2];nt.children=gt}if(Q&&Q.defaultProps)for(xt in ft=Q.defaultProps,ft)nt[xt]===void 0&&(nt[xt]=ft[xt]);return N(Q,ht,void 0,void 0,null,nt)},Bn.createRef=function(){return{current:null}},Bn.forwardRef=function(Q){return{$$typeof:l,render:Q}},Bn.isValidElement=U,Bn.lazy=function(Q){return{$$typeof:d,_payload:{_status:-1,_result:Q},_init:W}},Bn.memo=function(Q,dt){return{$$typeof:f,type:Q,compare:dt===void 0?null:dt}},Bn.startTransition=function(Q){var dt=I.T,yt={};I.T=yt;try{var xt=Q(),nt=I.S;nt!==null&&nt(yt,xt),typeof xt=="object"&&xt!==null&&typeof xt.then=="function"&&xt.then(et,K)}catch(ht){K(ht)}finally{I.T=dt}},Bn.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Bn.use=function(Q){return I.H.use(Q)},Bn.useActionState=function(Q,dt,yt){return I.H.useActionState(Q,dt,yt)},Bn.useCallback=function(Q,dt){return I.H.useCallback(Q,dt)},Bn.useContext=function(Q){return I.H.useContext(Q)},Bn.useDebugValue=function(){},Bn.useDeferredValue=function(Q,dt){return I.H.useDeferredValue(Q,dt)},Bn.useEffect=function(Q,dt,yt){var xt=I.H;if(typeof yt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return xt.useEffect(Q,dt)},Bn.useId=function(){return I.H.useId()},Bn.useImperativeHandle=function(Q,dt,yt){return I.H.useImperativeHandle(Q,dt,yt)},Bn.useInsertionEffect=function(Q,dt){return I.H.useInsertionEffect(Q,dt)},Bn.useLayoutEffect=function(Q,dt){return I.H.useLayoutEffect(Q,dt)},Bn.useMemo=function(Q,dt){return I.H.useMemo(Q,dt)},Bn.useOptimistic=function(Q,dt){return I.H.useOptimistic(Q,dt)},Bn.useReducer=function(Q,dt,yt){return I.H.useReducer(Q,dt,yt)},Bn.useRef=function(Q){return I.H.useRef(Q)},Bn.useState=function(Q){return I.H.useState(Q)},Bn.useSyncExternalStore=function(Q,dt,yt){return I.H.useSyncExternalStore(Q,dt,yt)},Bn.useTransition=function(){return I.H.useTransition()},Bn.version="19.1.0",Bn}var Vk;function w_(){return Vk||(Vk=1,XR.exports=sY()),XR.exports}var YR={exports:{}},Ca={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hk;function aY(){if(Hk)return Ca;Hk=1;var i=w_();function e(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(u,f,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:u,containerInfo:f,implementation:d}}var o=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ca.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ca.createPortal=function(u,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(u,f,null,d)},Ca.flushSync=function(u){var f=o.T,d=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=f,r.p=d,r.d.f()}},Ca.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(u,f))},Ca.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Ca.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var d=f.as,m=l(d,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?r.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:_}):d==="script"&&r.d.X(u,{crossOrigin:m,integrity:y,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ca.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=l(f.as,f.crossOrigin);r.d.M(u,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(u)},Ca.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,m=l(d,f.crossOrigin);r.d.L(u,d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ca.preloadModule=function(u,f){if(typeof u=="string")if(f){var d=l(f.as,f.crossOrigin);r.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(u)},Ca.requestFormReset=function(u){r.d.r(u)},Ca.unstable_batchedUpdates=function(u,f){return u(f)},Ca.useFormState=function(u,f,d){return o.H.useFormState(u,f,d)},Ca.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ca.version="19.1.0",Ca}var Gk;function oH(){if(Gk)return YR.exports;Gk=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),YR.exports=aY(),YR.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jk;function oY(){if(jk)return $b;jk=1;var i=rY(),e=w_(),n=oH();function r(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function a(c){var h=c,v=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(v=h.return),c=h.return;while(c)}return h.tag===3?v:null}function o(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function l(c){if(a(c)!==c)throw Error(r(188))}function u(c){var h=c.alternate;if(!h){if(h=a(c),h===null)throw Error(r(188));return h!==c?null:c}for(var v=c,E=h;;){var D=v.return;if(D===null)break;var z=D.alternate;if(z===null){if(E=D.return,E!==null){v=E;continue}break}if(D.child===z.child){for(z=D.child;z;){if(z===v)return l(D),c;if(z===E)return l(D),h;z=z.sibling}throw Error(r(188))}if(v.return!==E.return)v=D,E=z;else{for(var Z=!1,rt=D.child;rt;){if(rt===v){Z=!0,v=D,E=z;break}if(rt===E){Z=!0,E=D,v=z;break}rt=rt.sibling}if(!Z){for(rt=z.child;rt;){if(rt===v){Z=!0,v=z,E=D;break}if(rt===E){Z=!0,E=z,v=D;break}rt=rt.sibling}if(!Z)throw Error(r(189))}}if(v.alternate!==E)throw Error(r(190))}if(v.tag!==3)throw Error(r(188));return v.stateNode.current===v?c:h}function f(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c;for(c=c.child;c!==null;){if(h=f(c),h!==null)return h;c=c.sibling}return null}var d=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),R=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function H(c){return c===null||typeof c!="object"?null:(c=F&&c[F]||c["@@iterator"],typeof c=="function"?c:null)}var V=Symbol.for("react.client.reference");function X(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===V?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case x:return"Fragment";case T:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case k:return"SuspenseList";case U:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case _:return"Portal";case R:return(c.displayName||"Context")+".Provider";case M:return(c._context.displayName||"Context")+".Consumer";case A:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case N:return h=c.displayName||null,h!==null?h:X(c.type)||"Memo";case L:h=c._payload,c=c._init;try{return X(c(h))}catch{}}return null}var J=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},et=[],Q=-1;function dt(c){return{current:c}}function yt(c){0>Q||(c.current=et[Q],et[Q]=null,Q--)}function xt(c,h){Q++,et[Q]=c.current,c.current=h}var nt=dt(null),ht=dt(null),ft=dt(null),gt=dt(null);function wt(c,h){switch(xt(ft,h),xt(ht,c),xt(nt,null),h.nodeType){case 9:case 11:c=(c=h.documentElement)&&(c=c.namespaceURI)?ck(c):0;break;default:if(c=h.tagName,h=h.namespaceURI)h=ck(h),c=fk(h,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}yt(nt),xt(nt,c)}function Kt(){yt(nt),yt(ht),yt(ft)}function zt(c){c.memoizedState!==null&&xt(gt,c);var h=nt.current,v=fk(h,c.type);h!==v&&(xt(ht,c),xt(nt,v))}function te(c){ht.current===c&&(yt(nt),yt(ht)),gt.current===c&&(yt(gt),Bb._currentValue=K)}var Pt=Object.prototype.hasOwnProperty,Ht=i.unstable_scheduleCallback,at=i.unstable_cancelCallback,ue=i.unstable_shouldYield,Jt=i.unstable_requestPaint,se=i.unstable_now,ae=i.unstable_getCurrentPriorityLevel,Ce=i.unstable_ImmediatePriority,le=i.unstable_UserBlockingPriority,ct=i.unstable_NormalPriority,G=i.unstable_LowPriority,lt=i.unstable_IdlePriority,mt=i.log,Ct=i.unstable_setDisableYieldValue,bt=null,Mt=null;function Lt(c){if(typeof mt=="function"&&Ct(c),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(bt,c)}catch{}}var Qt=Math.clz32?Math.clz32:ve,Oe=Math.log,jt=Math.LN2;function ve(c){return c>>>=0,c===0?32:31-(Oe(c)/jt|0)|0}var we=256,Me=4194304;function Zt(c){var h=c&42;if(h!==0)return h;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function Re(c,h,v){var E=c.pendingLanes;if(E===0)return 0;var D=0,z=c.suspendedLanes,Z=c.pingedLanes;c=c.warmLanes;var rt=E&134217727;return rt!==0?(E=rt&~z,E!==0?D=Zt(E):(Z&=rt,Z!==0?D=Zt(Z):v||(v=rt&~c,v!==0&&(D=Zt(v))))):(rt=E&~z,rt!==0?D=Zt(rt):Z!==0?D=Zt(Z):v||(v=E&~c,v!==0&&(D=Zt(v)))),D===0?0:h!==0&&h!==D&&(h&z)===0&&(z=D&-D,v=h&-h,z>=v||z===32&&(v&4194048)!==0)?h:D}function Ie(c,h){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&h)===0}function en(c,h){switch(c){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function At(){var c=we;return we<<=1,(we&4194048)===0&&(we=256),c}function Te(){var c=Me;return Me<<=1,(Me&62914560)===0&&(Me=4194304),c}function Xt(c){for(var h=[],v=0;31>v;v++)h.push(c);return h}function re(c,h){c.pendingLanes|=h,h!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function Ae(c,h,v,E,D,z){var Z=c.pendingLanes;c.pendingLanes=v,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=v,c.entangledLanes&=v,c.errorRecoveryDisabledLanes&=v,c.shellSuspendCounter=0;var rt=c.entanglements,vt=c.expirationTimes,kt=c.hiddenUpdates;for(v=Z&~v;0<v;){var ie=31-Qt(v),ce=1<<ie;rt[ie]=0,vt[ie]=-1;var Gt=kt[ie];if(Gt!==null)for(kt[ie]=null,ie=0;ie<Gt.length;ie++){var $t=Gt[ie];$t!==null&&($t.lane&=-536870913)}v&=~ce}E!==0&&Ee(c,E,0),z!==0&&D===0&&c.tag!==0&&(c.suspendedLanes|=z&~(Z&~h))}function Ee(c,h,v){c.pendingLanes|=h,c.suspendedLanes&=~h;var E=31-Qt(h);c.entangledLanes|=h,c.entanglements[E]=c.entanglements[E]|1073741824|v&4194090}function sn(c,h){var v=c.entangledLanes|=h;for(c=c.entanglements;v;){var E=31-Qt(v),D=1<<E;D&h|c[E]&h&&(c[E]|=h),v&=~D}}function Wn(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function ze(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function Qe(){var c=W.p;return c!==0?c:(c=window.event,c===void 0?32:Ok(c.type))}function Lr(c,h){var v=W.p;try{return W.p=c,h()}finally{W.p=v}}var Qn=Math.random().toString(36).slice(2),er="__reactFiber$"+Qn,qi="__reactProps$"+Qn,fr="__reactContainer$"+Qn,ks="__reactEvents$"+Qn,Qf="__reactListeners$"+Qn,os="__reactHandles$"+Qn,Ss="__reactResources$"+Qn,qa="__reactMarker$"+Qn;function ri(c){delete c[er],delete c[qi],delete c[ks],delete c[Qf],delete c[os]}function va(c){var h=c[er];if(h)return h;for(var v=c.parentNode;v;){if(h=v[fr]||v[er]){if(v=h.alternate,h.child!==null||v!==null&&v.child!==null)for(c=mk(c);c!==null;){if(v=c[er])return v;c=mk(c)}return h}c=v,v=c.parentNode}return null}function Ks(c){if(c=c[er]||c[fr]){var h=c.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return c}return null}function $a(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c.stateNode;throw Error(r(33))}function ls(c){var h=c[Ss];return h||(h=c[Ss]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function nr(c){c[qa]=!0}var Iu=new Set,ql={};function Zs(c,h){it(c,h),it(c+"Capture",h)}function it(c,h){for(ql[c]=h,c=0;c<h.length;c++)Iu.add(h[c])}var St=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bt={},Vt={};function Ot(c){return Pt.call(Vt,c)?!0:Pt.call(Bt,c)?!1:St.test(c)?Vt[c]=!0:(Bt[c]=!0,!1)}function he(c,h,v){if(Ot(h))if(v===null)c.removeAttribute(h);else{switch(typeof v){case"undefined":case"function":case"symbol":c.removeAttribute(h);return;case"boolean":var E=h.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){c.removeAttribute(h);return}}c.setAttribute(h,""+v)}}function be(c,h,v){if(v===null)c.removeAttribute(h);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(h);return}c.setAttribute(h,""+v)}}function xe(c,h,v,E){if(E===null)c.removeAttribute(v);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(v);return}c.setAttributeNS(h,v,""+E)}}var Le,nn;function Ye(c){if(Le===void 0)try{throw Error()}catch(v){var h=v.stack.trim().match(/\n( *(at )?)/);Le=h&&h[1]||"",nn=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Le+c+nn}var Ge=!1;function On(c,h){if(!c||Ge)return"";Ge=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(h){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch($t){var Gt=$t}Reflect.construct(c,[],ce)}else{try{ce.call()}catch($t){Gt=$t}c.call(ce.prototype)}}else{try{throw Error()}catch($t){Gt=$t}(ce=c())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch($t){if($t&&Gt&&typeof $t.stack=="string")return[$t.stack,Gt.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var z=E.DetermineComponentFrameRoot(),Z=z[0],rt=z[1];if(Z&&rt){var vt=Z.split(`
`),kt=rt.split(`
`);for(D=E=0;E<vt.length&&!vt[E].includes("DetermineComponentFrameRoot");)E++;for(;D<kt.length&&!kt[D].includes("DetermineComponentFrameRoot");)D++;if(E===vt.length||D===kt.length)for(E=vt.length-1,D=kt.length-1;1<=E&&0<=D&&vt[E]!==kt[D];)D--;for(;1<=E&&0<=D;E--,D--)if(vt[E]!==kt[D]){if(E!==1||D!==1)do if(E--,D--,0>D||vt[E]!==kt[D]){var ie=`
`+vt[E].replace(" at new "," at ");return c.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",c.displayName)),ie}while(1<=E&&0<=D);break}}}finally{Ge=!1,Error.prepareStackTrace=v}return(v=c?c.displayName||c.name:"")?Ye(v):""}function Gn(c){switch(c.tag){case 26:case 27:case 5:return Ye(c.type);case 16:return Ye("Lazy");case 13:return Ye("Suspense");case 19:return Ye("SuspenseList");case 0:case 15:return On(c.type,!1);case 11:return On(c.type.render,!1);case 1:return On(c.type,!0);case 31:return Ye("Activity");default:return""}}function Mi(c){try{var h="";do h+=Gn(c),c=c.return;while(c);return h}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function Pn(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function zn(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Ke(c){var h=zn(c)?"checked":"value",v=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),E=""+c[h];if(!c.hasOwnProperty(h)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var D=v.get,z=v.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return D.call(this)},set:function(Z){E=""+Z,z.call(this,Z)}}),Object.defineProperty(c,h,{enumerable:v.enumerable}),{getValue:function(){return E},setValue:function(Z){E=""+Z},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function $i(c){c._valueTracker||(c._valueTracker=Ke(c))}function jn(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var v=h.getValue(),E="";return c&&(E=zn(c)?c.checked?"true":"false":c.value),c=E,c!==v?(h.setValue(c),!0):!1}function Ur(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Eo=/[\n"\\]/g;function Jn(c){return c.replace(Eo,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function kr(c,h,v,E,D,z,Z,rt){c.name="",Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?c.type=Z:c.removeAttribute("type"),h!=null?Z==="number"?(h===0&&c.value===""||c.value!=h)&&(c.value=""+Pn(h)):c.value!==""+Pn(h)&&(c.value=""+Pn(h)):Z!=="submit"&&Z!=="reset"||c.removeAttribute("value"),h!=null?hr(c,Z,Pn(h)):v!=null?hr(c,Z,Pn(v)):E!=null&&c.removeAttribute("value"),D==null&&z!=null&&(c.defaultChecked=!!z),D!=null&&(c.checked=D&&typeof D!="function"&&typeof D!="symbol"),rt!=null&&typeof rt!="function"&&typeof rt!="symbol"&&typeof rt!="boolean"?c.name=""+Pn(rt):c.removeAttribute("name")}function si(c,h,v,E,D,z,Z,rt){if(z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(c.type=z),h!=null||v!=null){if(!(z!=="submit"&&z!=="reset"||h!=null))return;v=v!=null?""+Pn(v):"",h=h!=null?""+Pn(h):v,rt||h===c.value||(c.value=h),c.defaultValue=h}E=E??D,E=typeof E!="function"&&typeof E!="symbol"&&!!E,c.checked=rt?c.checked:!!E,c.defaultChecked=!!E,Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(c.name=Z)}function hr(c,h,v){h==="number"&&Ur(c.ownerDocument)===c||c.defaultValue===""+v||(c.defaultValue=""+v)}function ir(c,h,v,E){if(c=c.options,h){h={};for(var D=0;D<v.length;D++)h["$"+v[D]]=!0;for(v=0;v<c.length;v++)D=h.hasOwnProperty("$"+c[v].value),c[v].selected!==D&&(c[v].selected=D),D&&E&&(c[v].defaultSelected=!0)}else{for(v=""+Pn(v),h=null,D=0;D<c.length;D++){if(c[D].value===v){c[D].selected=!0,E&&(c[D].defaultSelected=!0);return}h!==null||c[D].disabled||(h=c[D])}h!==null&&(h.selected=!0)}}function vn(c,h,v){if(h!=null&&(h=""+Pn(h),h!==c.value&&(c.value=h),v==null)){c.defaultValue!==h&&(c.defaultValue=h);return}c.defaultValue=v!=null?""+Pn(v):""}function rr(c,h,v,E){if(h==null){if(E!=null){if(v!=null)throw Error(r(92));if(J(E)){if(1<E.length)throw Error(r(93));E=E[0]}v=E}v==null&&(v=""),h=v}v=Pn(h),c.defaultValue=v,E=c.textContent,E===v&&E!==""&&E!==null&&(c.value=E)}function xr(c,h){if(h){var v=c.firstChild;if(v&&v===c.lastChild&&v.nodeType===3){v.nodeValue=h;return}}c.textContent=h}var zs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jf(c,h,v){var E=h.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?E?c.setProperty(h,""):h==="float"?c.cssFloat="":c[h]="":E?c.setProperty(h,v):typeof v!="number"||v===0||zs.has(h)?h==="float"?c.cssFloat=v:c[h]=(""+v).trim():c[h]=v+"px"}function Cc(c,h,v){if(h!=null&&typeof h!="object")throw Error(r(62));if(c=c.style,v!=null){for(var E in v)!v.hasOwnProperty(E)||h!=null&&h.hasOwnProperty(E)||(E.indexOf("--")===0?c.setProperty(E,""):E==="float"?c.cssFloat="":c[E]="");for(var D in h)E=h[D],h.hasOwnProperty(D)&&v[D]!==E&&Jf(c,D,E)}else for(var z in h)h.hasOwnProperty(z)&&Jf(c,z,h[z])}function wd(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ny=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function th(c){return Ny.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var $l=null;function Wa(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var hl=null,Wl=null;function Ad(c){var h=Ks(c);if(h&&(c=h.stateNode)){var v=c[qi]||null;t:switch(c=h.stateNode,h.type){case"input":if(kr(c,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),h=v.name,v.type==="radio"&&h!=null){for(v=c;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+Jn(""+h)+'"][type="radio"]'),h=0;h<v.length;h++){var E=v[h];if(E!==c&&E.form===c.form){var D=E[qi]||null;if(!D)throw Error(r(90));kr(E,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name)}}for(h=0;h<v.length;h++)E=v[h],E.form===c.form&&jn(E)}break t;case"textarea":vn(c,v.value,v.defaultValue);break t;case"select":h=v.value,h!=null&&ir(c,!!v.multiple,h,!1)}}}var To=!1;function xm(c,h,v){if(To)return c(h,v);To=!0;try{var E=c(h);return E}finally{if(To=!1,(hl!==null||Wl!==null)&&(uu(),hl&&(h=hl,c=Wl,Wl=hl=null,Ad(h),c)))for(h=0;h<c.length;h++)Ad(c[h])}}function Rc(c,h){var v=c.stateNode;if(v===null)return null;var E=v[qi]||null;if(E===null)return null;v=E[h];t:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(c=c.type,E=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!E;break t;default:c=!1}if(c)return null;if(v&&typeof v!="function")throw Error(r(231,h,typeof v));return v}var wo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_a=!1;if(wo)try{var Oc={};Object.defineProperty(Oc,"passive",{get:function(){_a=!0}}),window.addEventListener("test",Oc,Oc),window.removeEventListener("test",Oc,Oc)}catch{_a=!1}var dl=null,Ic=null,Du=null;function Md(){if(Du)return Du;var c,h=Ic,v=h.length,E,D="value"in dl?dl.value:dl.textContent,z=D.length;for(c=0;c<v&&h[c]===D[c];c++);var Z=v-c;for(E=1;E<=Z&&h[v-E]===D[z-E];E++);return Du=D.slice(c,1<E?1-E:void 0)}function ba(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function Ao(){return!0}function Dc(){return!1}function Yr(c){function h(v,E,D,z,Z){this._reactName=v,this._targetInst=D,this.type=E,this.nativeEvent=z,this.target=Z,this.currentTarget=null;for(var rt in c)c.hasOwnProperty(rt)&&(v=c[rt],this[rt]=v?v(z):z[rt]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?Ao:Dc,this.isPropagationStopped=Dc,this}return d(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Ao)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Ao)},persist:function(){},isPersistent:Ao}),h}var pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pc=Yr(pi),Nc=d({},pi,{view:0,detail:0}),Sm=Yr(Nc),Mo,Pu,pl,Nu=d({},Nc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lu,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==pl&&(pl&&c.type==="mousemove"?(Mo=c.screenX-pl.screenX,Pu=c.screenY-pl.screenY):Pu=Mo=0,pl=c),Mo)},movementY:function(c){return"movementY"in c?c.movementY:Pu}}),Xa=Yr(Nu),Em=d({},Nu,{dataTransfer:0}),j_=Yr(Em),sr=d({},Nc,{relatedTarget:0}),eh=Yr(sr),Cd=d({},pi,{animationName:0,elapsedTime:0,pseudoElement:0}),nh=Yr(Cd),Tm=d({},pi,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),ih=Yr(Tm),rh=d({},pi,{data:0}),sh=Yr(rh),Lc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Am={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ah(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=Am[c])?!!h[c]:!1}function Lu(){return ah}var Mm=d({},Nc,{key:function(c){if(c.key){var h=Lc[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=ba(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?wm[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lu,charCode:function(c){return c.type==="keypress"?ba(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?ba(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Uc=Yr(Mm),Rd=d({},Nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oh=Yr(Rd),Xl=d({},Nc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lu}),Od=Yr(Xl),Cm=d({},pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Co=Yr(Cm),Id=d({},Nu,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Dd=Yr(Id),Bs=d({},pi,{newState:0,oldState:0}),ml=Yr(Bs),Ro=[9,13,27,32],Oo=wo&&"CompositionEvent"in window,C=null;wo&&"documentMode"in document&&(C=document.documentMode);var j=wo&&"TextEvent"in window&&!C,Y=wo&&(!Oo||C&&8<C&&11>=C),ut=" ",Rt=!1;function Yt(c,h){switch(c){case"keyup":return Ro.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Se(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Xn=!1;function ar(c,h){switch(c){case"compositionend":return Se(h);case"keypress":return h.which!==32?null:(Rt=!0,ut);case"textInput":return c=h.data,c===ut&&Rt?null:c;default:return null}}function Yn(c,h){if(Xn)return c==="compositionend"||!Oo&&Yt(c,h)?(c=Md(),Du=Ic=dl=null,Xn=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Y&&h.locale!=="ko"?null:h.data;default:return null}}var Sr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zr(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!Sr[c.type]:h==="textarea"}function Er(c,h,v,E){hl?Wl?Wl.push(E):Wl=[E]:hl=E,h=rT(h,"onChange"),0<h.length&&(v=new Pc("onChange","change",null,v,E),c.push({event:v,listeners:h}))}var us=null,Io=null;function Pd(c){sk(c,0)}function Rm(c){var h=$a(c);if(jn(h))return c}function Ly(c,h){if(c==="change")return h}var Uy=!1;if(wo){var ky;if(wo){var Nd="oninput"in document;if(!Nd){var Ld=document.createElement("div");Ld.setAttribute("oninput","return;"),Nd=typeof Ld.oninput=="function"}ky=Nd}else ky=!1;Uy=ky&&(!document.documentMode||9<document.documentMode)}function Ji(){us&&(us.detachEvent("onpropertychange",oE),Io=us=null)}function oE(c){if(c.propertyName==="value"&&Rm(Io)){var h=[];Er(h,Io,c,Wa(c)),xm(Pd,h)}}function cR(c,h,v){c==="focusin"?(Ji(),us=h,Io=v,us.attachEvent("onpropertychange",oE)):c==="focusout"&&Ji()}function lE(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Rm(Io)}function Om(c,h){if(c==="click")return Rm(h)}function kc(c,h){if(c==="input"||c==="change")return Rm(h)}function uE(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var xa=typeof Object.is=="function"?Object.is:uE;function gl(c,h){if(xa(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var v=Object.keys(c),E=Object.keys(h);if(v.length!==E.length)return!1;for(E=0;E<v.length;E++){var D=v[E];if(!Pt.call(h,D)||!xa(c[D],h[D]))return!1}return!0}function Sa(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function q_(c,h){var v=Sa(c);c=0;for(var E;v;){if(v.nodeType===3){if(E=c+v.textContent.length,c<=h&&E>=h)return{node:v,offset:h-c};c=E}t:{for(;v;){if(v.nextSibling){v=v.nextSibling;break t}v=v.parentNode}v=void 0}v=Sa(v)}}function $_(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?$_(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function W_(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var h=Ur(c.document);h instanceof c.HTMLIFrameElement;){try{var v=typeof h.contentWindow.location.href=="string"}catch{v=!1}if(v)c=h.contentWindow;else break;h=Ur(c.document)}return h}function Im(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}var X_=wo&&"documentMode"in document&&11>=document.documentMode,Uu=null,zy=null,Dm=null,By=!1;function Y_(c,h,v){var E=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;By||Uu==null||Uu!==Ur(E)||(E=Uu,"selectionStart"in E&&Im(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Dm&&gl(Dm,E)||(Dm=E,E=rT(zy,"onSelect"),0<E.length&&(h=new Pc("onSelect","select",null,h,v),c.push({event:h,listeners:E}),h.target=Uu)))}function Es(c,h){var v={};return v[c.toLowerCase()]=h.toLowerCase(),v["Webkit"+c]="webkit"+h,v["Moz"+c]="moz"+h,v}var zc={animationend:Es("Animation","AnimationEnd"),animationiteration:Es("Animation","AnimationIteration"),animationstart:Es("Animation","AnimationStart"),transitionrun:Es("Transition","TransitionRun"),transitionstart:Es("Transition","TransitionStart"),transitioncancel:Es("Transition","TransitionCancel"),transitionend:Es("Transition","TransitionEnd")},Fy={},cE={};wo&&(cE=document.createElement("div").style,"AnimationEvent"in window||(delete zc.animationend.animation,delete zc.animationiteration.animation,delete zc.animationstart.animation),"TransitionEvent"in window||delete zc.transitionend.transition);function ku(c){if(Fy[c])return Fy[c];if(!zc[c])return c;var h=zc[c],v;for(v in h)if(h.hasOwnProperty(v)&&v in cE)return Fy[c]=h[v];return c}var Qs=ku("animationend"),K_=ku("animationiteration"),Ea=ku("animationstart"),fE=ku("transitionrun"),zu=ku("transitionstart"),Ud=ku("transitioncancel"),Bu=ku("transitionend"),Vy=new Map,Pm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pm.push("scrollEnd");function cs(c,h){Vy.set(c,h),Zs(h,[c])}var Z_=new WeakMap;function Ts(c,h){if(typeof c=="object"&&c!==null){var v=Z_.get(c);return v!==void 0?v:(h={value:c,source:h,stack:Mi(h)},Z_.set(c,h),h)}return{value:c,source:h,stack:Mi(h)}}var Fs=[],Do=0,Hy=0;function Nm(){for(var c=Do,h=Hy=Do=0;h<c;){var v=Fs[h];Fs[h++]=null;var E=Fs[h];Fs[h++]=null;var D=Fs[h];Fs[h++]=null;var z=Fs[h];if(Fs[h++]=null,E!==null&&D!==null){var Z=E.pending;Z===null?D.next=D:(D.next=Z.next,Z.next=D),E.pending=D}z!==0&&Q_(v,D,z)}}function Bc(c,h,v,E){Fs[Do++]=c,Fs[Do++]=h,Fs[Do++]=v,Fs[Do++]=E,Hy|=E,c.lanes|=E,c=c.alternate,c!==null&&(c.lanes|=E)}function Gy(c,h,v,E){return Bc(c,h,v,E),kd(c)}function Fu(c,h){return Bc(c,null,null,h),kd(c)}function Q_(c,h,v){c.lanes|=v;var E=c.alternate;E!==null&&(E.lanes|=v);for(var D=!1,z=c.return;z!==null;)z.childLanes|=v,E=z.alternate,E!==null&&(E.childLanes|=v),z.tag===22&&(c=z.stateNode,c===null||c._visibility&1||(D=!0)),c=z,z=z.return;return c.tag===3?(z=c.stateNode,D&&h!==null&&(D=31-Qt(v),c=z.hiddenUpdates,E=c[D],E===null?c[D]=[h]:E.push(h),h.lane=v|536870912),z):null}function kd(c){if(50<lu)throw lu=0,wh=null,Error(r(185));for(var h=c.return;h!==null;)c=h,h=c.return;return c.tag===3?c.stateNode:null}var Fc={};function J_(c,h,v,E){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ta(c,h,v,E){return new J_(c,h,v,E)}function Lm(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Tr(c,h){var v=c.alternate;return v===null?(v=Ta(c.tag,h,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=h,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&65011712,v.childLanes=c.childLanes,v.lanes=c.lanes,v.child=c.child,v.memoizedProps=c.memoizedProps,v.memoizedState=c.memoizedState,v.updateQueue=c.updateQueue,h=c.dependencies,v.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},v.sibling=c.sibling,v.index=c.index,v.ref=c.ref,v.refCleanup=c.refCleanup,v}function tb(c,h){c.flags&=65011714;var v=c.alternate;return v===null?(c.childLanes=0,c.lanes=h,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=v.childLanes,c.lanes=v.lanes,c.child=v.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=v.memoizedProps,c.memoizedState=v.memoizedState,c.updateQueue=v.updateQueue,c.type=v.type,h=v.dependencies,c.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),c}function fs(c,h,v,E,D,z){var Z=0;if(E=c,typeof c=="function")Lm(c)&&(Z=1);else if(typeof c=="string")Z=BX(c,v,nt.current)?26:c==="html"||c==="head"||c==="body"?27:5;else t:switch(c){case U:return c=Ta(31,v,h,D),c.elementType=U,c.lanes=z,c;case x:return Vc(v.children,D,z,h);case S:Z=8,D|=24;break;case T:return c=Ta(12,v,h,D|2),c.elementType=T,c.lanes=z,c;case I:return c=Ta(13,v,h,D),c.elementType=I,c.lanes=z,c;case k:return c=Ta(19,v,h,D),c.elementType=k,c.lanes=z,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case b:case R:Z=10;break t;case M:Z=9;break t;case A:Z=11;break t;case N:Z=14;break t;case L:Z=16,E=null;break t}Z=29,v=Error(r(130,c===null?"null":typeof c,"")),E=null}return h=Ta(Z,v,h,D),h.elementType=c,h.type=E,h.lanes=z,h}function Vc(c,h,v,E){return c=Ta(7,c,E,h),c.lanes=v,c}function Um(c,h,v){return c=Ta(6,c,null,h),c.lanes=v,c}function jy(c,h,v){return h=Ta(4,c.children!==null?c.children:[],c.key,h),h.lanes=v,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}var zd=[],wa=0,km=null,Bd=0,ws=[],Ya=0,Hc=null,Yl=1,Kl="";function Vu(c,h){zd[wa++]=Bd,zd[wa++]=km,km=c,Bd=h}function qy(c,h,v){ws[Ya++]=Yl,ws[Ya++]=Kl,ws[Ya++]=Hc,Hc=c;var E=Yl;c=Kl;var D=32-Qt(E)-1;E&=~(1<<D),v+=1;var z=32-Qt(h)+D;if(30<z){var Z=D-D%5;z=(E&(1<<Z)-1).toString(32),E>>=Z,D-=Z,Yl=1<<32-Qt(h)+D|v<<D|E,Kl=z+c}else Yl=1<<z|v<<D|E,Kl=c}function eb(c){c.return!==null&&(Vu(c,1),qy(c,1,0))}function nb(c){for(;c===km;)km=zd[--wa],zd[wa]=null,Bd=zd[--wa],zd[wa]=null;for(;c===Hc;)Hc=ws[--Ya],ws[Ya]=null,Kl=ws[--Ya],ws[Ya]=null,Yl=ws[--Ya],ws[Ya]=null}var Js=null,or=null,ci=!1,Po=null,Ka=!1,$y=Error(r(519));function Gc(c){var h=Error(r(418,""));throw lh(Ts(h,c)),$y}function hE(c){var h=c.stateNode,v=c.type,E=c.memoizedProps;switch(h[er]=c,h[qi]=E,v){case"dialog":ti("cancel",h),ti("close",h);break;case"iframe":case"object":case"embed":ti("load",h);break;case"video":case"audio":for(v=0;v<Pb.length;v++)ti(Pb[v],h);break;case"source":ti("error",h);break;case"img":case"image":case"link":ti("error",h),ti("load",h);break;case"details":ti("toggle",h);break;case"input":ti("invalid",h),si(h,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0),$i(h);break;case"select":ti("invalid",h);break;case"textarea":ti("invalid",h),rr(h,E.value,E.defaultValue,E.children),$i(h)}v=E.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||h.textContent===""+v||E.suppressHydrationWarning===!0||uk(h.textContent,v)?(E.popover!=null&&(ti("beforetoggle",h),ti("toggle",h)),E.onScroll!=null&&ti("scroll",h),E.onScrollEnd!=null&&ti("scrollend",h),E.onClick!=null&&(h.onclick=sT),h=!0):h=!1,h||Gc(c)}function ib(c){for(Js=c.return;Js;)switch(Js.tag){case 5:case 13:Ka=!1;return;case 27:case 3:Ka=!0;return;default:Js=Js.return}}function yl(c){if(c!==Js)return!1;if(!ci)return ib(c),ci=!0,!1;var h=c.tag,v;if((v=h!==3&&h!==27)&&((v=h===5)&&(v=c.type,v=!(v!=="form"&&v!=="button")||OR(c.type,c.memoizedProps)),v=!v),v&&or&&Gc(c),ib(c),h===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));t:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8)if(v=c.data,v==="/$"){if(h===0){or=ec(c.nextSibling);break t}h--}else v!=="$"&&v!=="$!"&&v!=="$?"||h++;c=c.nextSibling}or=null}}else h===27?(h=or,cp(c.type)?(c=NR,NR=null,or=c):or=h):or=Js?ec(c.stateNode.nextSibling):null;return!0}function Fd(){or=Js=null,ci=!1}function _i(){var c=Po;return c!==null&&(an===null?an=c:an.push.apply(an,c),Po=null),c}function lh(c){Po===null?Po=[c]:Po.push(c)}var rb=dt(null),jc=null,Hu=null;function qc(c,h,v){xt(rb,h._currentValue),h._currentValue=v}function Gu(c){c._currentValue=rb.current,yt(rb)}function sb(c,h,v){for(;c!==null;){var E=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,E!==null&&(E.childLanes|=h)):E!==null&&(E.childLanes&h)!==h&&(E.childLanes|=h),c===v)break;c=c.return}}function zm(c,h,v,E){var D=c.child;for(D!==null&&(D.return=c);D!==null;){var z=D.dependencies;if(z!==null){var Z=D.child;z=z.firstContext;t:for(;z!==null;){var rt=z;z=D;for(var vt=0;vt<h.length;vt++)if(rt.context===h[vt]){z.lanes|=v,rt=z.alternate,rt!==null&&(rt.lanes|=v),sb(z.return,v,c),E||(Z=null);break t}z=rt.next}}else if(D.tag===18){if(Z=D.return,Z===null)throw Error(r(341));Z.lanes|=v,z=Z.alternate,z!==null&&(z.lanes|=v),sb(Z,v,c),Z=null}else Z=D.child;if(Z!==null)Z.return=D;else for(Z=D;Z!==null;){if(Z===c){Z=null;break}if(D=Z.sibling,D!==null){D.return=Z.return,Z=D;break}Z=Z.return}D=Z}}function No(c,h,v,E){c=null;for(var D=h,z=!1;D!==null;){if(!z){if((D.flags&524288)!==0)z=!0;else if((D.flags&262144)!==0)break}if(D.tag===10){var Z=D.alternate;if(Z===null)throw Error(r(387));if(Z=Z.memoizedProps,Z!==null){var rt=D.type;xa(D.pendingProps.value,Z.value)||(c!==null?c.push(rt):c=[rt])}}else if(D===gt.current){if(Z=D.alternate,Z===null)throw Error(r(387));Z.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(c!==null?c.push(Bb):c=[Bb])}D=D.return}c!==null&&zm(h,c,v,E),h.flags|=262144}function Bm(c){for(c=c.firstContext;c!==null;){if(!xa(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function Zl(c){jc=c,Hu=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function dr(c){return Wy(jc,c)}function Fm(c,h){return jc===null&&Zl(c),Wy(c,h)}function Wy(c,h){var v=h._currentValue;if(h={context:h,memoizedValue:v,next:null},Hu===null){if(c===null)throw Error(r(308));Hu=h,c.dependencies={lanes:0,firstContext:h},c.flags|=524288}else Hu=Hu.next=h;return v}var ab=typeof AbortController<"u"?AbortController:function(){var c=[],h=this.signal={aborted:!1,addEventListener:function(v,E){c.push(E)}};this.abort=function(){h.aborted=!0,c.forEach(function(v){return v()})}},fR=i.unstable_scheduleCallback,dE=i.unstable_NormalPriority,Br={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xy(){return{controller:new ab,data:new Map,refCount:0}}function Vd(c){c.refCount--,c.refCount===0&&fR(dE,function(){c.controller.abort()})}var Hd=null,Vm=0,An=0,Gd=null;function Za(c,h){if(Hd===null){var v=Hd=[];Vm=0,An=xR(),Gd={status:"pending",value:void 0,then:function(E){v.push(E)}}}return Vm++,h.then(Yy,Yy),h}function Yy(){if(--Vm===0&&Hd!==null){Gd!==null&&(Gd.status="fulfilled");var c=Hd;Hd=null,An=0,Gd=null;for(var h=0;h<c.length;h++)(0,c[h])()}}function hR(c,h){var v=[],E={status:"pending",value:null,reason:null,then:function(D){v.push(D)}};return c.then(function(){E.status="fulfilled",E.value=h;for(var D=0;D<v.length;D++)(0,v[D])(h)},function(D){for(E.status="rejected",E.reason=D,D=0;D<v.length;D++)(0,v[D])(void 0)}),E}var Hm=q.S;q.S=function(c,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&Za(c,h),Hm!==null&&Hm(c,h)};var Lo=dt(null);function $c(){var c=Lo.current;return c!==null?c:bn.pooledCache}function Gm(c,h){h===null?xt(Lo,Lo.current):xt(Lo,h.pool)}function Ky(){var c=$c();return c===null?null:{parent:Br._currentValue,pool:c}}var jm=Error(r(460)),ob=Error(r(474)),vl=Error(r(542)),qm={then:function(){}};function Zy(c){return c=c.status,c==="fulfilled"||c==="rejected"}function jd(){}function Qy(c,h,v){switch(v=c[v],v===void 0?c.push(h):v!==h&&(h.then(jd,jd),h=v),h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,pE(c),c;default:if(typeof h.status=="string")h.then(jd,jd);else{if(c=bn,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=h,c.status="pending",c.then(function(E){if(h.status==="pending"){var D=h;D.status="fulfilled",D.value=E}},function(E){if(h.status==="pending"){var D=h;D.status="rejected",D.reason=E}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,pE(c),c}throw Uo=h,jm}}var Uo=null;function lb(){if(Uo===null)throw Error(r(459));var c=Uo;return Uo=null,c}function pE(c){if(c===jm||c===vl)throw Error(r(483))}var ju=!1;function ub(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fn(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Ql(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function qu(c,h,v){var E=c.updateQueue;if(E===null)return null;if(E=E.shared,(bi&2)!==0){var D=E.pending;return D===null?h.next=h:(h.next=D.next,D.next=h),E.pending=h,h=kd(c),Q_(c,null,v),h}return Bc(c,E,h,v),kd(c)}function uh(c,h,v){if(h=h.updateQueue,h!==null&&(h=h.shared,(v&4194048)!==0)){var E=h.lanes;E&=c.pendingLanes,v|=E,h.lanes=v,sn(c,v)}}function qd(c,h){var v=c.updateQueue,E=c.alternate;if(E!==null&&(E=E.updateQueue,v===E)){var D=null,z=null;if(v=v.firstBaseUpdate,v!==null){do{var Z={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};z===null?D=z=Z:z=z.next=Z,v=v.next}while(v!==null);z===null?D=z=h:z=z.next=h}else D=z=h;v={baseState:E.baseState,firstBaseUpdate:D,lastBaseUpdate:z,shared:E.shared,callbacks:E.callbacks},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=h:c.next=h,v.lastBaseUpdate=h}var cb=!1;function $m(){if(cb){var c=Gd;if(c!==null)throw c}}function $d(c,h,v,E){cb=!1;var D=c.updateQueue;ju=!1;var z=D.firstBaseUpdate,Z=D.lastBaseUpdate,rt=D.shared.pending;if(rt!==null){D.shared.pending=null;var vt=rt,kt=vt.next;vt.next=null,Z===null?z=kt:Z.next=kt,Z=vt;var ie=c.alternate;ie!==null&&(ie=ie.updateQueue,rt=ie.lastBaseUpdate,rt!==Z&&(rt===null?ie.firstBaseUpdate=kt:rt.next=kt,ie.lastBaseUpdate=vt))}if(z!==null){var ce=D.baseState;Z=0,ie=kt=vt=null,rt=z;do{var Gt=rt.lane&-536870913,$t=Gt!==rt.lane;if($t?(Je&Gt)===Gt:(E&Gt)===Gt){Gt!==0&&Gt===An&&(cb=!0),ie!==null&&(ie=ie.next={lane:0,tag:rt.tag,payload:rt.payload,callback:null,next:null});t:{var dn=c,on=rt;Gt=h;var Gi=v;switch(on.tag){case 1:if(dn=on.payload,typeof dn=="function"){ce=dn.call(Gi,ce,Gt);break t}ce=dn;break t;case 3:dn.flags=dn.flags&-65537|128;case 0:if(dn=on.payload,Gt=typeof dn=="function"?dn.call(Gi,ce,Gt):dn,Gt==null)break t;ce=d({},ce,Gt);break t;case 2:ju=!0}}Gt=rt.callback,Gt!==null&&(c.flags|=64,$t&&(c.flags|=8192),$t=D.callbacks,$t===null?D.callbacks=[Gt]:$t.push(Gt))}else $t={lane:Gt,tag:rt.tag,payload:rt.payload,callback:rt.callback,next:null},ie===null?(kt=ie=$t,vt=ce):ie=ie.next=$t,Z|=Gt;if(rt=rt.next,rt===null){if(rt=D.shared.pending,rt===null)break;$t=rt,rt=$t.next,$t.next=null,D.lastBaseUpdate=$t,D.shared.pending=null}}while(!0);ie===null&&(vt=ce),D.baseState=vt,D.firstBaseUpdate=kt,D.lastBaseUpdate=ie,z===null&&(D.shared.lanes=0),Al|=Z,c.lanes=Z,c.memoizedState=ce}}function Wd(c,h){if(typeof c!="function")throw Error(r(191,c));c.call(h)}function mE(c,h){var v=c.callbacks;if(v!==null)for(c.callbacks=null,c=0;c<v.length;c++)Wd(v[c],h)}var Xd=dt(null),Jy=dt(0);function gE(c,h){c=Ho,xt(Jy,c),xt(Xd,h),Ho=c|h.baseLanes}function fb(){xt(Jy,Ho),xt(Xd,Xd.current)}function Wm(){Ho=Jy.current,yt(Xd),yt(Jy)}var $u=0,Mn=null,Ti=null,Fr=null,tv=!1,Wc=!1,ta=!1,Kr=0,ko=0,As=null,yE=0;function wr(){throw Error(r(321))}function Vs(c,h){if(h===null)return!1;for(var v=0;v<h.length&&v<c.length;v++)if(!xa(c[v],h[v]))return!1;return!0}function Wu(c,h,v,E,D,z){return $u=z,Mn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,q.H=c===null||c.memoizedState===null?uv:Mb,ta=!1,z=v(E,D),ta=!1,Wc&&(z=_E(h,v,E,D)),vE(c),z}function vE(c){q.H=Km;var h=Ti!==null&&Ti.next!==null;if($u=0,Fr=Ti=Mn=null,tv=!1,ko=0,As=null,h)throw Error(r(300));c===null||hs||(c=c.dependencies,c!==null&&Bm(c)&&(hs=!0))}function _E(c,h,v,E){Mn=c;var D=0;do{if(Wc&&(As=null),ko=0,Wc=!1,25<=D)throw Error(r(301));if(D+=1,Fr=Ti=null,c.updateQueue!=null){var z=c.updateQueue;z.lastEffect=null,z.events=null,z.stores=null,z.memoCache!=null&&(z.memoCache.index=0)}q.H=qE,z=h(v,E)}while(Wc);return z}function dR(){var c=q.H,h=c.useState()[0];return h=typeof h.then=="function"?_l(h):h,c=c.useState()[0],(Ti!==null?Ti.memoizedState:null)!==c&&(Mn.flags|=1024),h}function hb(){var c=Kr!==0;return Kr=0,c}function ev(c,h,v){h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~v}function db(c){if(tv){for(c=c.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}tv=!1}$u=0,Fr=Ti=Mn=null,Wc=!1,ko=Kr=0,As=null}function ea(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?Mn.memoizedState=Fr=c:Fr=Fr.next=c,Fr}function Vr(){if(Ti===null){var c=Mn.alternate;c=c!==null?c.memoizedState:null}else c=Ti.next;var h=Fr===null?Mn.memoizedState:Fr.next;if(h!==null)Fr=h,Ti=c;else{if(c===null)throw Mn.alternate===null?Error(r(467)):Error(r(310));Ti=c,c={memoizedState:Ti.memoizedState,baseState:Ti.baseState,baseQueue:Ti.baseQueue,queue:Ti.queue,next:null},Fr===null?Mn.memoizedState=Fr=c:Fr=Fr.next=c}return Fr}function Xc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _l(c){var h=ko;return ko+=1,As===null&&(As=[]),c=Qy(As,c,h),h=Mn,(Fr===null?h.memoizedState:Fr.next)===null&&(h=h.alternate,q.H=h===null||h.memoizedState===null?uv:Mb),c}function nv(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return _l(c);if(c.$$typeof===R)return dr(c)}throw Error(r(438,String(c)))}function pb(c){var h=null,v=Mn.updateQueue;if(v!==null&&(h=v.memoCache),h==null){var E=Mn.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(h={data:E.data.map(function(D){return D.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),v===null&&(v=Xc(),Mn.updateQueue=v),v.memoCache=h,v=h.data[h.index],v===void 0)for(v=h.data[h.index]=Array(c),E=0;E<c;E++)v[E]=O;return h.index++,v}function Xu(c,h){return typeof h=="function"?h(c):h}function Yc(c){var h=Vr();return mb(h,Ti,c)}function mb(c,h,v){var E=c.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=v;var D=c.baseQueue,z=E.pending;if(z!==null){if(D!==null){var Z=D.next;D.next=z.next,z.next=Z}h.baseQueue=D=z,E.pending=null}if(z=c.baseState,D===null)c.memoizedState=z;else{h=D.next;var rt=Z=null,vt=null,kt=h,ie=!1;do{var ce=kt.lane&-536870913;if(ce!==kt.lane?(Je&ce)===ce:($u&ce)===ce){var Gt=kt.revertLane;if(Gt===0)vt!==null&&(vt=vt.next={lane:0,revertLane:0,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null}),ce===An&&(ie=!0);else if(($u&Gt)===Gt){kt=kt.next,Gt===An&&(ie=!0);continue}else ce={lane:0,revertLane:kt.revertLane,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null},vt===null?(rt=vt=ce,Z=z):vt=vt.next=ce,Mn.lanes|=Gt,Al|=Gt;ce=kt.action,ta&&v(z,ce),z=kt.hasEagerState?kt.eagerState:v(z,ce)}else Gt={lane:ce,revertLane:kt.revertLane,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null},vt===null?(rt=vt=Gt,Z=z):vt=vt.next=Gt,Mn.lanes|=ce,Al|=ce;kt=kt.next}while(kt!==null&&kt!==h);if(vt===null?Z=z:vt.next=rt,!xa(z,c.memoizedState)&&(hs=!0,ie&&(v=Gd,v!==null)))throw v;c.memoizedState=z,c.baseState=Z,c.baseQueue=vt,E.lastRenderedState=z}return D===null&&(E.lanes=0),[c.memoizedState,E.dispatch]}function gb(c){var h=Vr(),v=h.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=c;var E=v.dispatch,D=v.pending,z=h.memoizedState;if(D!==null){v.pending=null;var Z=D=D.next;do z=c(z,Z.action),Z=Z.next;while(Z!==D);xa(z,h.memoizedState)||(hs=!0),h.memoizedState=z,h.baseQueue===null&&(h.baseState=z),v.lastRenderedState=z}return[z,E]}function bE(c,h,v){var E=Mn,D=Vr(),z=ci;if(z){if(v===void 0)throw Error(r(407));v=v()}else v=h();var Z=!xa((Ti||D).memoizedState,v);Z&&(D.memoizedState=v,hs=!0),D=D.queue;var rt=SE.bind(null,E,D,c);if(Zd(2048,8,rt,[c]),D.getSnapshot!==h||Z||Fr!==null&&Fr.memoizedState.tag&1){if(E.flags|=2048,Kd(9,Xm(),xE.bind(null,E,D,v,h),null),bn===null)throw Error(r(349));z||($u&124)!==0||Yd(E,h,v)}return v}function Yd(c,h,v){c.flags|=16384,c={getSnapshot:h,value:v},h=Mn.updateQueue,h===null?(h=Xc(),Mn.updateQueue=h,h.stores=[c]):(v=h.stores,v===null?h.stores=[c]:v.push(c))}function xE(c,h,v,E){h.value=v,h.getSnapshot=E,EE(h)&&TE(c)}function SE(c,h,v){return v(function(){EE(h)&&TE(c)})}function EE(c){var h=c.getSnapshot;c=c.value;try{var v=h();return!xa(c,v)}catch{return!0}}function TE(c){var h=Fu(c,2);h!==null&&ra(h,c,2)}function yb(c){var h=ea();if(typeof c=="function"){var v=c;if(c=v(),ta){Lt(!0);try{v()}finally{Lt(!1)}}}return h.memoizedState=h.baseState=c,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xu,lastRenderedState:c},h}function wE(c,h,v,E){return c.baseState=v,mb(c,Ti,typeof E=="function"?E:Xu)}function pR(c,h,v,E,D){if(lv(c))throw Error(r(485));if(c=h.action,c!==null){var z={payload:D,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Z){z.listeners.push(Z)}};q.T!==null?v(!0):z.isTransition=!1,E(z),v=h.pending,v===null?(z.next=h.pending=z,AE(h,z)):(z.next=v.next,h.pending=v.next=z)}}function AE(c,h){var v=h.action,E=h.payload,D=c.state;if(h.isTransition){var z=q.T,Z={};q.T=Z;try{var rt=v(D,E),vt=q.S;vt!==null&&vt(Z,rt),ME(c,h,rt)}catch(kt){vb(c,h,kt)}finally{q.T=z}}else try{z=v(D,E),ME(c,h,z)}catch(kt){vb(c,h,kt)}}function ME(c,h,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(E){CE(c,h,E)},function(E){return vb(c,h,E)}):CE(c,h,v)}function CE(c,h,v){h.status="fulfilled",h.value=v,RE(h),c.state=v,h=c.pending,h!==null&&(v=h.next,v===h?c.pending=null:(v=v.next,h.next=v,AE(c,v)))}function vb(c,h,v){var E=c.pending;if(c.pending=null,E!==null){E=E.next;do h.status="rejected",h.reason=v,RE(h),h=h.next;while(h!==E)}c.action=null}function RE(c){c=c.listeners;for(var h=0;h<c.length;h++)(0,c[h])()}function _b(c,h){return h}function OE(c,h){if(ci){var v=bn.formState;if(v!==null){t:{var E=Mn;if(ci){if(or){e:{for(var D=or,z=Ka;D.nodeType!==8;){if(!z){D=null;break e}if(D=ec(D.nextSibling),D===null){D=null;break e}}z=D.data,D=z==="F!"||z==="F"?D:null}if(D){or=ec(D.nextSibling),E=D.data==="F!";break t}}Gc(E)}E=!1}E&&(h=v[0])}}return v=ea(),v.memoizedState=v.baseState=h,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_b,lastRenderedState:h},v.queue=E,v=GE.bind(null,Mn,E),E.dispatch=v,E=yb(!1),z=ov.bind(null,Mn,!1,E.queue),E=ea(),D={state:h,dispatch:null,action:c,pending:null},E.queue=D,v=pR.bind(null,Mn,D,z,v),D.dispatch=v,E.memoizedState=c,[h,v,!1]}function IE(c){var h=Vr();return DE(h,Ti,c)}function DE(c,h,v){if(h=mb(c,h,_b)[0],c=Yc(Xu)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var E=_l(h)}catch(Z){throw Z===jm?vl:Z}else E=h;h=Vr();var D=h.queue,z=D.dispatch;return v!==h.memoizedState&&(Mn.flags|=2048,Kd(9,Xm(),mR.bind(null,D,v),null)),[E,z,c]}function mR(c,h){c.action=h}function PE(c){var h=Vr(),v=Ti;if(v!==null)return DE(h,v,c);Vr(),h=h.memoizedState,v=Vr();var E=v.queue.dispatch;return v.memoizedState=c,[h,E,!1]}function Kd(c,h,v,E){return c={tag:c,create:v,deps:E,inst:h,next:null},h=Mn.updateQueue,h===null&&(h=Xc(),Mn.updateQueue=h),v=h.lastEffect,v===null?h.lastEffect=c.next=c:(E=v.next,v.next=c,c.next=E,h.lastEffect=c),c}function Xm(){return{destroy:void 0,resource:void 0}}function bb(){return Vr().memoizedState}function iv(c,h,v,E){var D=ea();E=E===void 0?null:E,Mn.flags|=c,D.memoizedState=Kd(1|h,Xm(),v,E)}function Zd(c,h,v,E){var D=Vr();E=E===void 0?null:E;var z=D.memoizedState.inst;Ti!==null&&E!==null&&Vs(E,Ti.memoizedState.deps)?D.memoizedState=Kd(h,z,v,E):(Mn.flags|=c,D.memoizedState=Kd(1|h,z,v,E))}function xb(c,h){iv(8390656,8,c,h)}function Sb(c,h){Zd(2048,8,c,h)}function rv(c,h){return Zd(4,2,c,h)}function sv(c,h){return Zd(4,4,c,h)}function NE(c,h){if(typeof h=="function"){c=c();var v=h(c);return function(){typeof v=="function"?v():h(null)}}if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function LE(c,h,v){v=v!=null?v.concat([c]):null,Zd(4,4,NE.bind(null,h,c),v)}function Eb(){}function UE(c,h){var v=Vr();h=h===void 0?null:h;var E=v.memoizedState;return h!==null&&Vs(h,E[1])?E[0]:(v.memoizedState=[c,h],c)}function Tb(c,h){var v=Vr();h=h===void 0?null:h;var E=v.memoizedState;if(h!==null&&Vs(h,E[1]))return E[0];if(E=c(),ta){Lt(!0);try{c()}finally{Lt(!1)}}return v.memoizedState=[E,h],E}function av(c,h,v){return v===void 0||($u&1073741824)!==0?c.memoizedState=h:(c.memoizedState=v,c=bv(),Mn.lanes|=c,Al|=c,v)}function kE(c,h,v,E){return xa(v,h)?v:Xd.current!==null?(c=av(c,v,E),xa(c,h)||(hs=!0),c):($u&42)===0?(hs=!0,c.memoizedState=v):(c=bv(),Mn.lanes|=c,Al|=c,h)}function zE(c,h,v,E,D){var z=W.p;W.p=z!==0&&8>z?z:8;var Z=q.T,rt={};q.T=rt,ov(c,!1,h,v);try{var vt=D(),kt=q.S;if(kt!==null&&kt(rt,vt),vt!==null&&typeof vt=="object"&&typeof vt.then=="function"){var ie=hR(vt,E);Ym(c,h,ie,gr(c))}else Ym(c,h,E,gr(c))}catch(ce){Ym(c,h,{then:function(){},status:"rejected",reason:ce},gr())}finally{W.p=z,q.T=Z}}function gR(){}function wb(c,h,v,E){if(c.tag!==5)throw Error(r(476));var D=BE(c).queue;zE(c,D,h,K,v===null?gR:function(){return FE(c),v(E)})}function BE(c){var h=c.memoizedState;if(h!==null)return h;h={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xu,lastRenderedState:K},next:null};var v={};return h.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xu,lastRenderedState:v},next:null},c.memoizedState=h,c=c.alternate,c!==null&&(c.memoizedState=h),h}function FE(c){var h=BE(c).next.queue;Ym(c,h,{},gr())}function Ab(){return dr(Bb)}function VE(){return Vr().memoizedState}function HE(){return Vr().memoizedState}function yR(c){for(var h=c.return;h!==null;){switch(h.tag){case 24:case 3:var v=gr();c=Ql(v);var E=qu(h,c,v);E!==null&&(ra(E,h,v),uh(E,h,v)),h={cache:Xy()},c.payload=h;return}h=h.return}}function vR(c,h,v){var E=gr();v={lane:E,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},lv(c)?jE(h,v):(v=Gy(c,h,v,E),v!==null&&(ra(v,c,E),Qa(v,h,E)))}function GE(c,h,v){var E=gr();Ym(c,h,v,E)}function Ym(c,h,v,E){var D={lane:E,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(lv(c))jE(h,D);else{var z=c.alternate;if(c.lanes===0&&(z===null||z.lanes===0)&&(z=h.lastRenderedReducer,z!==null))try{var Z=h.lastRenderedState,rt=z(Z,v);if(D.hasEagerState=!0,D.eagerState=rt,xa(rt,Z))return Bc(c,h,D,0),bn===null&&Nm(),!1}catch{}finally{}if(v=Gy(c,h,D,E),v!==null)return ra(v,c,E),Qa(v,h,E),!0}return!1}function ov(c,h,v,E){if(E={lane:2,revertLane:xR(),action:E,hasEagerState:!1,eagerState:null,next:null},lv(c)){if(h)throw Error(r(479))}else h=Gy(c,v,E,2),h!==null&&ra(h,c,2)}function lv(c){var h=c.alternate;return c===Mn||h!==null&&h===Mn}function jE(c,h){Wc=tv=!0;var v=c.pending;v===null?h.next=h:(h.next=v.next,v.next=h),c.pending=h}function Qa(c,h,v){if((v&4194048)!==0){var E=h.lanes;E&=c.pendingLanes,v|=E,h.lanes=v,sn(c,v)}}var Km={readContext:dr,use:nv,useCallback:wr,useContext:wr,useEffect:wr,useImperativeHandle:wr,useLayoutEffect:wr,useInsertionEffect:wr,useMemo:wr,useReducer:wr,useRef:wr,useState:wr,useDebugValue:wr,useDeferredValue:wr,useTransition:wr,useSyncExternalStore:wr,useId:wr,useHostTransitionStatus:wr,useFormState:wr,useActionState:wr,useOptimistic:wr,useMemoCache:wr,useCacheRefresh:wr},uv={readContext:dr,use:nv,useCallback:function(c,h){return ea().memoizedState=[c,h===void 0?null:h],c},useContext:dr,useEffect:xb,useImperativeHandle:function(c,h,v){v=v!=null?v.concat([c]):null,iv(4194308,4,NE.bind(null,h,c),v)},useLayoutEffect:function(c,h){return iv(4194308,4,c,h)},useInsertionEffect:function(c,h){iv(4,2,c,h)},useMemo:function(c,h){var v=ea();h=h===void 0?null:h;var E=c();if(ta){Lt(!0);try{c()}finally{Lt(!1)}}return v.memoizedState=[E,h],E},useReducer:function(c,h,v){var E=ea();if(v!==void 0){var D=v(h);if(ta){Lt(!0);try{v(h)}finally{Lt(!1)}}}else D=h;return E.memoizedState=E.baseState=D,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:D},E.queue=c,c=c.dispatch=vR.bind(null,Mn,c),[E.memoizedState,c]},useRef:function(c){var h=ea();return c={current:c},h.memoizedState=c},useState:function(c){c=yb(c);var h=c.queue,v=GE.bind(null,Mn,h);return h.dispatch=v,[c.memoizedState,v]},useDebugValue:Eb,useDeferredValue:function(c,h){var v=ea();return av(v,c,h)},useTransition:function(){var c=yb(!1);return c=zE.bind(null,Mn,c.queue,!0,!1),ea().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,h,v){var E=Mn,D=ea();if(ci){if(v===void 0)throw Error(r(407));v=v()}else{if(v=h(),bn===null)throw Error(r(349));(Je&124)!==0||Yd(E,h,v)}D.memoizedState=v;var z={value:v,getSnapshot:h};return D.queue=z,xb(SE.bind(null,E,z,c),[c]),E.flags|=2048,Kd(9,Xm(),xE.bind(null,E,z,v,h),null),v},useId:function(){var c=ea(),h=bn.identifierPrefix;if(ci){var v=Kl,E=Yl;v=(E&~(1<<32-Qt(E)-1)).toString(32)+v,h=""+h+"R"+v,v=Kr++,0<v&&(h+="H"+v.toString(32)),h+=""}else v=yE++,h=""+h+"r"+v.toString(32)+"";return c.memoizedState=h},useHostTransitionStatus:Ab,useFormState:OE,useActionState:OE,useOptimistic:function(c){var h=ea();h.memoizedState=h.baseState=c;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=v,h=ov.bind(null,Mn,!0,v),v.dispatch=h,[c,h]},useMemoCache:pb,useCacheRefresh:function(){return ea().memoizedState=yR.bind(null,Mn)}},Mb={readContext:dr,use:nv,useCallback:UE,useContext:dr,useEffect:Sb,useImperativeHandle:LE,useInsertionEffect:rv,useLayoutEffect:sv,useMemo:Tb,useReducer:Yc,useRef:bb,useState:function(){return Yc(Xu)},useDebugValue:Eb,useDeferredValue:function(c,h){var v=Vr();return kE(v,Ti.memoizedState,c,h)},useTransition:function(){var c=Yc(Xu)[0],h=Vr().memoizedState;return[typeof c=="boolean"?c:_l(c),h]},useSyncExternalStore:bE,useId:VE,useHostTransitionStatus:Ab,useFormState:IE,useActionState:IE,useOptimistic:function(c,h){var v=Vr();return wE(v,Ti,c,h)},useMemoCache:pb,useCacheRefresh:HE},qE={readContext:dr,use:nv,useCallback:UE,useContext:dr,useEffect:Sb,useImperativeHandle:LE,useInsertionEffect:rv,useLayoutEffect:sv,useMemo:Tb,useReducer:gb,useRef:bb,useState:function(){return gb(Xu)},useDebugValue:Eb,useDeferredValue:function(c,h){var v=Vr();return Ti===null?av(v,c,h):kE(v,Ti.memoizedState,c,h)},useTransition:function(){var c=gb(Xu)[0],h=Vr().memoizedState;return[typeof c=="boolean"?c:_l(c),h]},useSyncExternalStore:bE,useId:VE,useHostTransitionStatus:Ab,useFormState:PE,useActionState:PE,useOptimistic:function(c,h){var v=Vr();return Ti!==null?wE(v,Ti,c,h):(v.baseState=c,[c,v.queue.dispatch])},useMemoCache:pb,useCacheRefresh:HE},ch=null,Zm=0;function Qm(c){var h=Zm;return Zm+=1,ch===null&&(ch=[]),Qy(ch,c,h)}function Qd(c,h){h=h.props.ref,c.ref=h!==void 0?h:null}function cv(c,h){throw h.$$typeof===m?Error(r(525)):(c=Object.prototype.toString.call(h),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c)))}function $E(c){var h=c._init;return h(c._payload)}function WE(c){function h(Dt,Tt){if(c){var Ut=Dt.deletions;Ut===null?(Dt.deletions=[Tt],Dt.flags|=16):Ut.push(Tt)}}function v(Dt,Tt){if(!c)return null;for(;Tt!==null;)h(Dt,Tt),Tt=Tt.sibling;return null}function E(Dt){for(var Tt=new Map;Dt!==null;)Dt.key!==null?Tt.set(Dt.key,Dt):Tt.set(Dt.index,Dt),Dt=Dt.sibling;return Tt}function D(Dt,Tt){return Dt=Tr(Dt,Tt),Dt.index=0,Dt.sibling=null,Dt}function z(Dt,Tt,Ut){return Dt.index=Ut,c?(Ut=Dt.alternate,Ut!==null?(Ut=Ut.index,Ut<Tt?(Dt.flags|=67108866,Tt):Ut):(Dt.flags|=67108866,Tt)):(Dt.flags|=1048576,Tt)}function Z(Dt){return c&&Dt.alternate===null&&(Dt.flags|=67108866),Dt}function rt(Dt,Tt,Ut,oe){return Tt===null||Tt.tag!==6?(Tt=Um(Ut,Dt.mode,oe),Tt.return=Dt,Tt):(Tt=D(Tt,Ut),Tt.return=Dt,Tt)}function vt(Dt,Tt,Ut,oe){var Ve=Ut.type;return Ve===x?ie(Dt,Tt,Ut.props.children,oe,Ut.key):Tt!==null&&(Tt.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===L&&$E(Ve)===Tt.type)?(Tt=D(Tt,Ut.props),Qd(Tt,Ut),Tt.return=Dt,Tt):(Tt=fs(Ut.type,Ut.key,Ut.props,null,Dt.mode,oe),Qd(Tt,Ut),Tt.return=Dt,Tt)}function kt(Dt,Tt,Ut,oe){return Tt===null||Tt.tag!==4||Tt.stateNode.containerInfo!==Ut.containerInfo||Tt.stateNode.implementation!==Ut.implementation?(Tt=jy(Ut,Dt.mode,oe),Tt.return=Dt,Tt):(Tt=D(Tt,Ut.children||[]),Tt.return=Dt,Tt)}function ie(Dt,Tt,Ut,oe,Ve){return Tt===null||Tt.tag!==7?(Tt=Vc(Ut,Dt.mode,oe,Ve),Tt.return=Dt,Tt):(Tt=D(Tt,Ut),Tt.return=Dt,Tt)}function ce(Dt,Tt,Ut){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number"||typeof Tt=="bigint")return Tt=Um(""+Tt,Dt.mode,Ut),Tt.return=Dt,Tt;if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case y:return Ut=fs(Tt.type,Tt.key,Tt.props,null,Dt.mode,Ut),Qd(Ut,Tt),Ut.return=Dt,Ut;case _:return Tt=jy(Tt,Dt.mode,Ut),Tt.return=Dt,Tt;case L:var oe=Tt._init;return Tt=oe(Tt._payload),ce(Dt,Tt,Ut)}if(J(Tt)||H(Tt))return Tt=Vc(Tt,Dt.mode,Ut,null),Tt.return=Dt,Tt;if(typeof Tt.then=="function")return ce(Dt,Qm(Tt),Ut);if(Tt.$$typeof===R)return ce(Dt,Fm(Dt,Tt),Ut);cv(Dt,Tt)}return null}function Gt(Dt,Tt,Ut,oe){var Ve=Tt!==null?Tt.key:null;if(typeof Ut=="string"&&Ut!==""||typeof Ut=="number"||typeof Ut=="bigint")return Ve!==null?null:rt(Dt,Tt,""+Ut,oe);if(typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case y:return Ut.key===Ve?vt(Dt,Tt,Ut,oe):null;case _:return Ut.key===Ve?kt(Dt,Tt,Ut,oe):null;case L:return Ve=Ut._init,Ut=Ve(Ut._payload),Gt(Dt,Tt,Ut,oe)}if(J(Ut)||H(Ut))return Ve!==null?null:ie(Dt,Tt,Ut,oe,null);if(typeof Ut.then=="function")return Gt(Dt,Tt,Qm(Ut),oe);if(Ut.$$typeof===R)return Gt(Dt,Tt,Fm(Dt,Ut),oe);cv(Dt,Ut)}return null}function $t(Dt,Tt,Ut,oe,Ve){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Dt=Dt.get(Ut)||null,rt(Tt,Dt,""+oe,Ve);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case y:return Dt=Dt.get(oe.key===null?Ut:oe.key)||null,vt(Tt,Dt,oe,Ve);case _:return Dt=Dt.get(oe.key===null?Ut:oe.key)||null,kt(Tt,Dt,oe,Ve);case L:var Zn=oe._init;return oe=Zn(oe._payload),$t(Dt,Tt,Ut,oe,Ve)}if(J(oe)||H(oe))return Dt=Dt.get(Ut)||null,ie(Tt,Dt,oe,Ve,null);if(typeof oe.then=="function")return $t(Dt,Tt,Ut,Qm(oe),Ve);if(oe.$$typeof===R)return $t(Dt,Tt,Ut,Fm(Tt,oe),Ve);cv(Tt,oe)}return null}function dn(Dt,Tt,Ut,oe){for(var Ve=null,Zn=null,Ze=Tt,ln=Tt=0,js=null;Ze!==null&&ln<Ut.length;ln++){Ze.index>ln?(js=Ze,Ze=null):js=Ze.sibling;var Si=Gt(Dt,Ze,Ut[ln],oe);if(Si===null){Ze===null&&(Ze=js);break}c&&Ze&&Si.alternate===null&&h(Dt,Ze),Tt=z(Si,Tt,ln),Zn===null?Ve=Si:Zn.sibling=Si,Zn=Si,Ze=js}if(ln===Ut.length)return v(Dt,Ze),ci&&Vu(Dt,ln),Ve;if(Ze===null){for(;ln<Ut.length;ln++)Ze=ce(Dt,Ut[ln],oe),Ze!==null&&(Tt=z(Ze,Tt,ln),Zn===null?Ve=Ze:Zn.sibling=Ze,Zn=Ze);return ci&&Vu(Dt,ln),Ve}for(Ze=E(Ze);ln<Ut.length;ln++)js=$t(Ze,Dt,ln,Ut[ln],oe),js!==null&&(c&&js.alternate!==null&&Ze.delete(js.key===null?ln:js.key),Tt=z(js,Tt,ln),Zn===null?Ve=js:Zn.sibling=js,Zn=js);return c&&Ze.forEach(function(mp){return h(Dt,mp)}),ci&&Vu(Dt,ln),Ve}function on(Dt,Tt,Ut,oe){if(Ut==null)throw Error(r(151));for(var Ve=null,Zn=null,Ze=Tt,ln=Tt=0,js=null,Si=Ut.next();Ze!==null&&!Si.done;ln++,Si=Ut.next()){Ze.index>ln?(js=Ze,Ze=null):js=Ze.sibling;var mp=Gt(Dt,Ze,Si.value,oe);if(mp===null){Ze===null&&(Ze=js);break}c&&Ze&&mp.alternate===null&&h(Dt,Ze),Tt=z(mp,Tt,ln),Zn===null?Ve=mp:Zn.sibling=mp,Zn=mp,Ze=js}if(Si.done)return v(Dt,Ze),ci&&Vu(Dt,ln),Ve;if(Ze===null){for(;!Si.done;ln++,Si=Ut.next())Si=ce(Dt,Si.value,oe),Si!==null&&(Tt=z(Si,Tt,ln),Zn===null?Ve=Si:Zn.sibling=Si,Zn=Si);return ci&&Vu(Dt,ln),Ve}for(Ze=E(Ze);!Si.done;ln++,Si=Ut.next())Si=$t(Ze,Dt,ln,Si.value,oe),Si!==null&&(c&&Si.alternate!==null&&Ze.delete(Si.key===null?ln:Si.key),Tt=z(Si,Tt,ln),Zn===null?Ve=Si:Zn.sibling=Si,Zn=Si);return c&&Ze.forEach(function(ZX){return h(Dt,ZX)}),ci&&Vu(Dt,ln),Ve}function Gi(Dt,Tt,Ut,oe){if(typeof Ut=="object"&&Ut!==null&&Ut.type===x&&Ut.key===null&&(Ut=Ut.props.children),typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case y:t:{for(var Ve=Ut.key;Tt!==null;){if(Tt.key===Ve){if(Ve=Ut.type,Ve===x){if(Tt.tag===7){v(Dt,Tt.sibling),oe=D(Tt,Ut.props.children),oe.return=Dt,Dt=oe;break t}}else if(Tt.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===L&&$E(Ve)===Tt.type){v(Dt,Tt.sibling),oe=D(Tt,Ut.props),Qd(oe,Ut),oe.return=Dt,Dt=oe;break t}v(Dt,Tt);break}else h(Dt,Tt);Tt=Tt.sibling}Ut.type===x?(oe=Vc(Ut.props.children,Dt.mode,oe,Ut.key),oe.return=Dt,Dt=oe):(oe=fs(Ut.type,Ut.key,Ut.props,null,Dt.mode,oe),Qd(oe,Ut),oe.return=Dt,Dt=oe)}return Z(Dt);case _:t:{for(Ve=Ut.key;Tt!==null;){if(Tt.key===Ve)if(Tt.tag===4&&Tt.stateNode.containerInfo===Ut.containerInfo&&Tt.stateNode.implementation===Ut.implementation){v(Dt,Tt.sibling),oe=D(Tt,Ut.children||[]),oe.return=Dt,Dt=oe;break t}else{v(Dt,Tt);break}else h(Dt,Tt);Tt=Tt.sibling}oe=jy(Ut,Dt.mode,oe),oe.return=Dt,Dt=oe}return Z(Dt);case L:return Ve=Ut._init,Ut=Ve(Ut._payload),Gi(Dt,Tt,Ut,oe)}if(J(Ut))return dn(Dt,Tt,Ut,oe);if(H(Ut)){if(Ve=H(Ut),typeof Ve!="function")throw Error(r(150));return Ut=Ve.call(Ut),on(Dt,Tt,Ut,oe)}if(typeof Ut.then=="function")return Gi(Dt,Tt,Qm(Ut),oe);if(Ut.$$typeof===R)return Gi(Dt,Tt,Fm(Dt,Ut),oe);cv(Dt,Ut)}return typeof Ut=="string"&&Ut!==""||typeof Ut=="number"||typeof Ut=="bigint"?(Ut=""+Ut,Tt!==null&&Tt.tag===6?(v(Dt,Tt.sibling),oe=D(Tt,Ut),oe.return=Dt,Dt=oe):(v(Dt,Tt),oe=Um(Ut,Dt.mode,oe),oe.return=Dt,Dt=oe),Z(Dt)):v(Dt,Tt)}return function(Dt,Tt,Ut,oe){try{Zm=0;var Ve=Gi(Dt,Tt,Ut,oe);return ch=null,Ve}catch(Ze){if(Ze===jm||Ze===vl)throw Ze;var Zn=Ta(29,Ze,null,Dt.mode);return Zn.lanes=oe,Zn.return=Dt,Zn}finally{}}}var fh=WE(!0),XE=WE(!1),Pi=dt(null),bl=null;function Kc(c){var h=c.alternate;xt(Ar,Ar.current&1),xt(Pi,c),bl===null&&(h===null||Xd.current!==null||h.memoizedState!==null)&&(bl=c)}function YE(c){if(c.tag===22){if(xt(Ar,Ar.current),xt(Pi,c),bl===null){var h=c.alternate;h!==null&&h.memoizedState!==null&&(bl=c)}}else Zc()}function Zc(){xt(Ar,Ar.current),xt(Pi,Pi.current)}function Jl(c){yt(Pi),bl===c&&(bl=null),yt(Ar)}var Ar=dt(0);function Yu(c){for(var h=c;h!==null;){if(h.tag===13){var v=h.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||PR(v)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function Qc(c,h,v,E){h=c.memoizedState,v=v(E,h),v=v==null?h:d({},h,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}var na={enqueueSetState:function(c,h,v){c=c._reactInternals;var E=gr(),D=Ql(E);D.payload=h,v!=null&&(D.callback=v),h=qu(c,D,E),h!==null&&(ra(h,c,E),uh(h,c,E))},enqueueReplaceState:function(c,h,v){c=c._reactInternals;var E=gr(),D=Ql(E);D.tag=1,D.payload=h,v!=null&&(D.callback=v),h=qu(c,D,E),h!==null&&(ra(h,c,E),uh(h,c,E))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var v=gr(),E=Ql(v);E.tag=2,h!=null&&(E.callback=h),h=qu(c,E,v),h!==null&&(ra(h,c,v),uh(h,c,v))}};function KE(c,h,v,E,D,z,Z){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(E,z,Z):h.prototype&&h.prototype.isPureReactComponent?!gl(v,E)||!gl(D,z):!0}function ZE(c,h,v,E){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(v,E),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(v,E),h.state!==c&&na.enqueueReplaceState(h,h.state,null)}function tu(c,h){var v=h;if("ref"in h){v={};for(var E in h)E!=="ref"&&(v[E]=h[E])}if(c=c.defaultProps){v===h&&(v=d({},v));for(var D in c)v[D]===void 0&&(v[D]=c[D])}return v}var hh=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function Jm(c){hh(c)}function fv(c){console.error(c)}function QE(c){hh(c)}function hv(c,h){try{var v=c.onUncaughtError;v(h.value,{componentStack:h.stack})}catch(E){setTimeout(function(){throw E})}}function zo(c,h,v){try{var E=c.onCaughtError;E(v.value,{componentStack:v.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function dv(c,h,v){return v=Ql(v),v.tag=3,v.payload={element:null},v.callback=function(){hv(c,h)},v}function JE(c){return c=Ql(c),c.tag=3,c}function pv(c,h,v,E){var D=v.type.getDerivedStateFromError;if(typeof D=="function"){var z=E.value;c.payload=function(){return D(z)},c.callback=function(){zo(h,v,E)}}var Z=v.stateNode;Z!==null&&typeof Z.componentDidCatch=="function"&&(c.callback=function(){zo(h,v,E),typeof D!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var rt=E.stack;this.componentDidCatch(E.value,{componentStack:rt!==null?rt:""})})}function _R(c,h,v,E,D){if(v.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(h=v.alternate,h!==null&&No(h,v,D,!0),v=Pi.current,v!==null){switch(v.tag){case 13:return bl===null?p():v.alternate===null&&Wi===0&&(Wi=3),v.flags&=-257,v.flags|=65536,v.lanes=D,E===qm?v.flags|=16384:(h=v.updateQueue,h===null?v.updateQueue=new Set([E]):h.add(E),Wt(c,E,D)),!1;case 22:return v.flags|=65536,E===qm?v.flags|=16384:(h=v.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([E])},v.updateQueue=h):(v=h.retryQueue,v===null?h.retryQueue=new Set([E]):v.add(E)),Wt(c,E,D)),!1}throw Error(r(435,v.tag))}return Wt(c,E,D),p(),!1}if(ci)return h=Pi.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=D,E!==$y&&(c=Error(r(422),{cause:E}),lh(Ts(c,v)))):(E!==$y&&(h=Error(r(423),{cause:E}),lh(Ts(h,v))),c=c.current.alternate,c.flags|=65536,D&=-D,c.lanes|=D,E=Ts(E,v),D=dv(c.stateNode,E,D),qd(c,D),Wi!==4&&(Wi=2)),!1;var z=Error(r(520),{cause:E});if(z=Ts(z,v),xi===null?xi=[z]:xi.push(z),Wi!==4&&(Wi=2),h===null)return!0;E=Ts(E,v),v=h;do{switch(v.tag){case 3:return v.flags|=65536,c=D&-D,v.lanes|=c,c=dv(v.stateNode,E,c),qd(v,c),!1;case 1:if(h=v.type,z=v.stateNode,(v.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(ao===null||!ao.has(z))))return v.flags|=65536,D&=-D,v.lanes|=D,D=JE(D),pv(D,c,v,E),qd(v,D),!1}v=v.return}while(v!==null);return!1}var tT=Error(r(461)),hs=!1;function Mr(c,h,v,E){h.child=c===null?XE(h,null,v,E):fh(h,c.child,v,E)}function Aa(c,h,v,E,D){v=v.render;var z=h.ref;if("ref"in E){var Z={};for(var rt in E)rt!=="ref"&&(Z[rt]=E[rt])}else Z=E;return Zl(h),E=Wu(c,h,v,Z,z,D),rt=hb(),c!==null&&!hs?(ev(c,h,D),ds(c,h,D)):(ci&&rt&&eb(h),h.flags|=1,Mr(c,h,E,D),h.child)}function Ma(c,h,v,E,D){if(c===null){var z=v.type;return typeof z=="function"&&!Lm(z)&&z.defaultProps===void 0&&v.compare===null?(h.tag=15,h.type=z,Cb(c,h,z,E,D)):(c=fs(v.type,null,E,h,h.mode,D),c.ref=h.ref,c.return=h,h.child=c)}if(z=c.child,!tg(c,D)){var Z=z.memoizedProps;if(v=v.compare,v=v!==null?v:gl,v(Z,E)&&c.ref===h.ref)return ds(c,h,D)}return h.flags|=1,c=Tr(z,E),c.ref=h.ref,c.return=h,h.child=c}function Cb(c,h,v,E,D){if(c!==null){var z=c.memoizedProps;if(gl(z,E)&&c.ref===h.ref)if(hs=!1,h.pendingProps=E=z,tg(c,D))(c.flags&131072)!==0&&(hs=!0);else return h.lanes=c.lanes,ds(c,h,D)}return Jd(c,h,v,E,D)}function dh(c,h,v){var E=h.pendingProps,D=E.children,z=c!==null?c.memoizedState:null;if(E.mode==="hidden"){if((h.flags&128)!==0){if(E=z!==null?z.baseLanes|v:v,c!==null){for(D=h.child=c.child,z=0;D!==null;)z=z|D.lanes|D.childLanes,D=D.sibling;h.childLanes=z&~E}else h.childLanes=0,h.child=null;return ph(c,h,E,v)}if((v&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},c!==null&&Gm(h,z!==null?z.cachePool:null),z!==null?gE(h,z):fb(),YE(h);else return h.lanes=h.childLanes=536870912,ph(c,h,z!==null?z.baseLanes|v:v,v)}else z!==null?(Gm(h,z.cachePool),gE(h,z),Zc(),h.memoizedState=null):(c!==null&&Gm(h,null),fb(),Zc());return Mr(c,h,D,v),h.child}function ph(c,h,v,E){var D=$c();return D=D===null?null:{parent:Br._currentValue,pool:D},h.memoizedState={baseLanes:v,cachePool:D},c!==null&&Gm(h,null),fb(),YE(h),c!==null&&No(c,h,E,!0),null}function mh(c,h){var v=h.ref;if(v===null)c!==null&&c.ref!==null&&(h.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(r(284));(c===null||c.ref!==v)&&(h.flags|=4194816)}}function Jd(c,h,v,E,D){return Zl(h),v=Wu(c,h,v,E,void 0,D),E=hb(),c!==null&&!hs?(ev(c,h,D),ds(c,h,D)):(ci&&E&&eb(h),h.flags|=1,Mr(c,h,v,D),h.child)}function Ja(c,h,v,E,D,z){return Zl(h),h.updateQueue=null,v=_E(h,E,v,D),vE(c),E=hb(),c!==null&&!hs?(ev(c,h,z),ds(c,h,z)):(ci&&E&&eb(h),h.flags|=1,Mr(c,h,v,z),h.child)}function to(c,h,v,E,D){if(Zl(h),h.stateNode===null){var z=Fc,Z=v.contextType;typeof Z=="object"&&Z!==null&&(z=dr(Z)),z=new v(E,z),h.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,z.updater=na,h.stateNode=z,z._reactInternals=h,z=h.stateNode,z.props=E,z.state=h.memoizedState,z.refs={},ub(h),Z=v.contextType,z.context=typeof Z=="object"&&Z!==null?dr(Z):Fc,z.state=h.memoizedState,Z=v.getDerivedStateFromProps,typeof Z=="function"&&(Qc(h,v,Z,E),z.state=h.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(Z=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),Z!==z.state&&na.enqueueReplaceState(z,z.state,null),$d(h,E,z,D),$m(),z.state=h.memoizedState),typeof z.componentDidMount=="function"&&(h.flags|=4194308),E=!0}else if(c===null){z=h.stateNode;var rt=h.memoizedProps,vt=tu(v,rt);z.props=vt;var kt=z.context,ie=v.contextType;Z=Fc,typeof ie=="object"&&ie!==null&&(Z=dr(ie));var ce=v.getDerivedStateFromProps;ie=typeof ce=="function"||typeof z.getSnapshotBeforeUpdate=="function",rt=h.pendingProps!==rt,ie||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(rt||kt!==Z)&&ZE(h,z,E,Z),ju=!1;var Gt=h.memoizedState;z.state=Gt,$d(h,E,z,D),$m(),kt=h.memoizedState,rt||Gt!==kt||ju?(typeof ce=="function"&&(Qc(h,v,ce,E),kt=h.memoizedState),(vt=ju||KE(h,v,vt,E,Gt,kt,Z))?(ie||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(h.flags|=4194308)):(typeof z.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=E,h.memoizedState=kt),z.props=E,z.state=kt,z.context=Z,E=vt):(typeof z.componentDidMount=="function"&&(h.flags|=4194308),E=!1)}else{z=h.stateNode,fn(c,h),Z=h.memoizedProps,ie=tu(v,Z),z.props=ie,ce=h.pendingProps,Gt=z.context,kt=v.contextType,vt=Fc,typeof kt=="object"&&kt!==null&&(vt=dr(kt)),rt=v.getDerivedStateFromProps,(kt=typeof rt=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Z!==ce||Gt!==vt)&&ZE(h,z,E,vt),ju=!1,Gt=h.memoizedState,z.state=Gt,$d(h,E,z,D),$m();var $t=h.memoizedState;Z!==ce||Gt!==$t||ju||c!==null&&c.dependencies!==null&&Bm(c.dependencies)?(typeof rt=="function"&&(Qc(h,v,rt,E),$t=h.memoizedState),(ie=ju||KE(h,v,ie,E,Gt,$t,vt)||c!==null&&c.dependencies!==null&&Bm(c.dependencies))?(kt||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(E,$t,vt),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(E,$t,vt)),typeof z.componentDidUpdate=="function"&&(h.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof z.componentDidUpdate!="function"||Z===c.memoizedProps&&Gt===c.memoizedState||(h.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Z===c.memoizedProps&&Gt===c.memoizedState||(h.flags|=1024),h.memoizedProps=E,h.memoizedState=$t),z.props=E,z.state=$t,z.context=vt,E=ie):(typeof z.componentDidUpdate!="function"||Z===c.memoizedProps&&Gt===c.memoizedState||(h.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Z===c.memoizedProps&&Gt===c.memoizedState||(h.flags|=1024),E=!1)}return z=E,mh(c,h),E=(h.flags&128)!==0,z||E?(z=h.stateNode,v=E&&typeof v.getDerivedStateFromError!="function"?null:z.render(),h.flags|=1,c!==null&&E?(h.child=fh(h,c.child,null,D),h.child=fh(h,null,v,D)):Mr(c,h,v,D),h.memoizedState=z.state,c=h.child):c=ds(c,h,D),c}function Jc(c,h,v,E){return Fd(),h.flags|=256,Mr(c,h,v,E),h.child}var xl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sl(c){return{baseLanes:c,cachePool:Ky()}}function Zr(c,h,v){return c=c!==null?c.childLanes&~v:0,h&&(c|=Go),c}function tp(c,h,v){var E=h.pendingProps,D=!1,z=(h.flags&128)!==0,Z;if((Z=z)||(Z=c!==null&&c.memoizedState===null?!1:(Ar.current&2)!==0),Z&&(D=!0,h.flags&=-129),Z=(h.flags&32)!==0,h.flags&=-33,c===null){if(ci){if(D?Kc(h):Zc(),ci){var rt=or,vt;if(vt=rt){t:{for(vt=rt,rt=Ka;vt.nodeType!==8;){if(!rt){rt=null;break t}if(vt=ec(vt.nextSibling),vt===null){rt=null;break t}}rt=vt}rt!==null?(h.memoizedState={dehydrated:rt,treeContext:Hc!==null?{id:Yl,overflow:Kl}:null,retryLane:536870912,hydrationErrors:null},vt=Ta(18,null,null,0),vt.stateNode=rt,vt.return=h,h.child=vt,Js=h,or=null,vt=!0):vt=!1}vt||Gc(h)}if(rt=h.memoizedState,rt!==null&&(rt=rt.dehydrated,rt!==null))return PR(rt)?h.lanes=32:h.lanes=536870912,null;Jl(h)}return rt=E.children,E=E.fallback,D?(Zc(),D=h.mode,rt=gh({mode:"hidden",children:rt},D),E=Vc(E,D,v,null),rt.return=h,E.return=h,rt.sibling=E,h.child=rt,D=h.child,D.memoizedState=Sl(v),D.childLanes=Zr(c,Z,v),h.memoizedState=xl,E):(Kc(h),eu(h,rt))}if(vt=c.memoizedState,vt!==null&&(rt=vt.dehydrated,rt!==null)){if(z)h.flags&256?(Kc(h),h.flags&=-257,h=Ms(c,h,v)):h.memoizedState!==null?(Zc(),h.child=c.child,h.flags|=128,h=null):(Zc(),D=E.fallback,rt=h.mode,E=gh({mode:"visible",children:E.children},rt),D=Vc(D,rt,v,null),D.flags|=2,E.return=h,D.return=h,E.sibling=D,h.child=E,fh(h,c.child,null,v),E=h.child,E.memoizedState=Sl(v),E.childLanes=Zr(c,Z,v),h.memoizedState=xl,h=D);else if(Kc(h),PR(rt)){if(Z=rt.nextSibling&&rt.nextSibling.dataset,Z)var kt=Z.dgst;Z=kt,E=Error(r(419)),E.stack="",E.digest=Z,lh({value:E,source:null,stack:null}),h=Ms(c,h,v)}else if(hs||No(c,h,v,!1),Z=(v&c.childLanes)!==0,hs||Z){if(Z=bn,Z!==null&&(E=v&-v,E=(E&42)!==0?1:Wn(E),E=(E&(Z.suspendedLanes|v))!==0?0:E,E!==0&&E!==vt.retryLane))throw vt.retryLane=E,Fu(c,E),ra(Z,c,E),tT;rt.data==="$?"||p(),h=Ms(c,h,v)}else rt.data==="$?"?(h.flags|=192,h.child=c.child,h=null):(c=vt.treeContext,or=ec(rt.nextSibling),Js=h,ci=!0,Po=null,Ka=!1,c!==null&&(ws[Ya++]=Yl,ws[Ya++]=Kl,ws[Ya++]=Hc,Yl=c.id,Kl=c.overflow,Hc=h),h=eu(h,E.children),h.flags|=4096);return h}return D?(Zc(),D=E.fallback,rt=h.mode,vt=c.child,kt=vt.sibling,E=Tr(vt,{mode:"hidden",children:E.children}),E.subtreeFlags=vt.subtreeFlags&65011712,kt!==null?D=Tr(kt,D):(D=Vc(D,rt,v,null),D.flags|=2),D.return=h,E.return=h,E.sibling=D,h.child=E,E=D,D=h.child,rt=c.child.memoizedState,rt===null?rt=Sl(v):(vt=rt.cachePool,vt!==null?(kt=Br._currentValue,vt=vt.parent!==kt?{parent:kt,pool:kt}:vt):vt=Ky(),rt={baseLanes:rt.baseLanes|v,cachePool:vt}),D.memoizedState=rt,D.childLanes=Zr(c,Z,v),h.memoizedState=xl,E):(Kc(h),v=c.child,c=v.sibling,v=Tr(v,{mode:"visible",children:E.children}),v.return=h,v.sibling=null,c!==null&&(Z=h.deletions,Z===null?(h.deletions=[c],h.flags|=16):Z.push(c)),h.child=v,h.memoizedState=null,v)}function eu(c,h){return h=gh({mode:"visible",children:h},c.mode),h.return=c,c.child=h}function gh(c,h){return c=Ta(22,c,null,h),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function Ms(c,h,v){return fh(h,c.child,null,v),c=eu(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function Cs(c,h,v){c.lanes|=h;var E=c.alternate;E!==null&&(E.lanes|=h),sb(c.return,h,v)}function ei(c,h,v,E,D){var z=c.memoizedState;z===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:E,tail:v,tailMode:D}:(z.isBackwards=h,z.rendering=null,z.renderingStartTime=0,z.last=E,z.tail=v,z.tailMode=D)}function Bo(c,h,v){var E=h.pendingProps,D=E.revealOrder,z=E.tail;if(Mr(c,h,E.children,v),E=Ar.current,(E&2)!==0)E=E&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)t:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Cs(c,v,h);else if(c.tag===19)Cs(c,v,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break t;for(;c.sibling===null;){if(c.return===null||c.return===h)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}E&=1}switch(xt(Ar,E),D){case"forwards":for(v=h.child,D=null;v!==null;)c=v.alternate,c!==null&&Yu(c)===null&&(D=v),v=v.sibling;v=D,v===null?(D=h.child,h.child=null):(D=v.sibling,v.sibling=null),ei(h,!1,D,v,z);break;case"backwards":for(v=null,D=h.child,h.child=null;D!==null;){if(c=D.alternate,c!==null&&Yu(c)===null){h.child=D;break}c=D.sibling,D.sibling=v,v=D,D=c}ei(h,!0,v,null,z);break;case"together":ei(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function ds(c,h,v){if(c!==null&&(h.dependencies=c.dependencies),Al|=h.lanes,(v&h.childLanes)===0)if(c!==null){if(No(c,h,v,!1),(v&h.childLanes)===0)return null}else return null;if(c!==null&&h.child!==c.child)throw Error(r(153));if(h.child!==null){for(c=h.child,v=Tr(c,c.pendingProps),h.child=v,v.return=h;c.sibling!==null;)c=c.sibling,v=v.sibling=Tr(c,c.pendingProps),v.return=h;v.sibling=null}return h.child}function tg(c,h){return(c.lanes&h)!==0?!0:(c=c.dependencies,!!(c!==null&&Bm(c)))}function Fo(c,h,v){switch(h.tag){case 3:wt(h,h.stateNode.containerInfo),qc(h,Br,c.memoizedState.cache),Fd();break;case 27:case 5:zt(h);break;case 4:wt(h,h.stateNode.containerInfo);break;case 10:qc(h,h.type,h.memoizedProps.value);break;case 13:var E=h.memoizedState;if(E!==null)return E.dehydrated!==null?(Kc(h),h.flags|=128,null):(v&h.child.childLanes)!==0?tp(c,h,v):(Kc(h),c=ds(c,h,v),c!==null?c.sibling:null);Kc(h);break;case 19:var D=(c.flags&128)!==0;if(E=(v&h.childLanes)!==0,E||(No(c,h,v,!1),E=(v&h.childLanes)!==0),D){if(E)return Bo(c,h,v);h.flags|=128}if(D=h.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),xt(Ar,Ar.current),E)break;return null;case 22:case 23:return h.lanes=0,dh(c,h,v);case 24:qc(h,Br,c.memoizedState.cache)}return ds(c,h,v)}function yh(c,h,v){if(c!==null)if(c.memoizedProps!==h.pendingProps)hs=!0;else{if(!tg(c,v)&&(h.flags&128)===0)return hs=!1,Fo(c,h,v);hs=(c.flags&131072)!==0}else hs=!1,ci&&(h.flags&1048576)!==0&&qy(h,Bd,h.index);switch(h.lanes=0,h.tag){case 16:t:{c=h.pendingProps;var E=h.elementType,D=E._init;if(E=D(E._payload),h.type=E,typeof E=="function")Lm(E)?(c=tu(E,c),h.tag=1,h=to(null,h,E,c,v)):(h.tag=0,h=Jd(null,h,E,c,v));else{if(E!=null){if(D=E.$$typeof,D===A){h.tag=11,h=Aa(null,h,E,c,v);break t}else if(D===N){h.tag=14,h=Ma(null,h,E,c,v);break t}}throw h=X(E)||E,Error(r(306,h,""))}}return h;case 0:return Jd(c,h,h.type,h.pendingProps,v);case 1:return E=h.type,D=tu(E,h.pendingProps),to(c,h,E,D,v);case 3:t:{if(wt(h,h.stateNode.containerInfo),c===null)throw Error(r(387));E=h.pendingProps;var z=h.memoizedState;D=z.element,fn(c,h),$d(h,E,null,v);var Z=h.memoizedState;if(E=Z.cache,qc(h,Br,E),E!==z.cache&&zm(h,[Br],v,!0),$m(),E=Z.element,z.isDehydrated)if(z={element:E,isDehydrated:!1,cache:Z.cache},h.updateQueue.baseState=z,h.memoizedState=z,h.flags&256){h=Jc(c,h,E,v);break t}else if(E!==D){D=Ts(Error(r(424)),h),lh(D),h=Jc(c,h,E,v);break t}else{switch(c=h.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(or=ec(c.firstChild),Js=h,ci=!0,Po=null,Ka=!0,v=XE(h,null,E,v),h.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling}else{if(Fd(),E===D){h=ds(c,h,v);break t}Mr(c,h,E,v)}h=h.child}return h;case 26:return mh(c,h),c===null?(v=_k(h.type,null,h.pendingProps,null))?h.memoizedState=v:ci||(v=h.type,c=h.pendingProps,E=aT(ft.current).createElement(v),E[er]=h,E[qi]=c,sa(E,v,c),nr(E),h.stateNode=E):h.memoizedState=_k(h.type,c.memoizedProps,h.pendingProps,c.memoizedState),null;case 27:return zt(h),c===null&&ci&&(E=h.stateNode=gk(h.type,h.pendingProps,ft.current),Js=h,Ka=!0,D=or,cp(h.type)?(NR=D,or=ec(E.firstChild)):or=D),Mr(c,h,h.pendingProps.children,v),mh(c,h),c===null&&(h.flags|=4194304),h.child;case 5:return c===null&&ci&&((D=E=or)&&(E=AX(E,h.type,h.pendingProps,Ka),E!==null?(h.stateNode=E,Js=h,or=ec(E.firstChild),Ka=!1,D=!0):D=!1),D||Gc(h)),zt(h),D=h.type,z=h.pendingProps,Z=c!==null?c.memoizedProps:null,E=z.children,OR(D,z)?E=null:Z!==null&&OR(D,Z)&&(h.flags|=32),h.memoizedState!==null&&(D=Wu(c,h,dR,null,null,v),Bb._currentValue=D),mh(c,h),Mr(c,h,E,v),h.child;case 6:return c===null&&ci&&((c=v=or)&&(v=MX(v,h.pendingProps,Ka),v!==null?(h.stateNode=v,Js=h,or=null,c=!0):c=!1),c||Gc(h)),null;case 13:return tp(c,h,v);case 4:return wt(h,h.stateNode.containerInfo),E=h.pendingProps,c===null?h.child=fh(h,null,E,v):Mr(c,h,E,v),h.child;case 11:return Aa(c,h,h.type,h.pendingProps,v);case 7:return Mr(c,h,h.pendingProps,v),h.child;case 8:return Mr(c,h,h.pendingProps.children,v),h.child;case 12:return Mr(c,h,h.pendingProps.children,v),h.child;case 10:return E=h.pendingProps,qc(h,h.type,E.value),Mr(c,h,E.children,v),h.child;case 9:return D=h.type._context,E=h.pendingProps.children,Zl(h),D=dr(D),E=E(D),h.flags|=1,Mr(c,h,E,v),h.child;case 14:return Ma(c,h,h.type,h.pendingProps,v);case 15:return Cb(c,h,h.type,h.pendingProps,v);case 19:return Bo(c,h,v);case 31:return E=h.pendingProps,v=h.mode,E={mode:E.mode,children:E.children},c===null?(v=gh(E,v),v.ref=h.ref,h.child=v,v.return=h,h=v):(v=Tr(c.child,E),v.ref=h.ref,h.child=v,v.return=h,h=v),h;case 22:return dh(c,h,v);case 24:return Zl(h),E=dr(Br),c===null?(D=$c(),D===null&&(D=bn,z=Xy(),D.pooledCache=z,z.refCount++,z!==null&&(D.pooledCacheLanes|=v),D=z),h.memoizedState={parent:E,cache:D},ub(h),qc(h,Br,D)):((c.lanes&v)!==0&&(fn(c,h),$d(h,null,null,v),$m()),D=c.memoizedState,z=h.memoizedState,D.parent!==E?(D={parent:E,cache:E},h.memoizedState=D,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=D),qc(h,Br,E)):(E=z.cache,qc(h,Br,E),E!==D.cache&&zm(h,[Br],v,!0))),Mr(c,h,h.pendingProps.children,v),h.child;case 29:throw h.pendingProps}throw Error(r(156,h.tag))}function El(c){c.flags|=4}function eg(c,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!Tk(h)){if(h=Pi.current,h!==null&&((Je&4194048)===Je?bl!==null:(Je&62914560)!==Je&&(Je&536870912)===0||h!==bl))throw Uo=qm,ob;c.flags|=8192}}function Ku(c,h){h!==null&&(c.flags|=4),c.flags&16384&&(h=c.tag!==22?Te():536870912,c.lanes|=h,oi|=h)}function vh(c,h){if(!ci)switch(c.tailMode){case"hidden":h=c.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var E=null;v!==null;)v.alternate!==null&&(E=v),v=v.sibling;E===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:E.sibling=null}}function Bi(c){var h=c.alternate!==null&&c.alternate.child===c.child,v=0,E=0;if(h)for(var D=c.child;D!==null;)v|=D.lanes|D.childLanes,E|=D.subtreeFlags&65011712,E|=D.flags&65011712,D.return=c,D=D.sibling;else for(D=c.child;D!==null;)v|=D.lanes|D.childLanes,E|=D.subtreeFlags,E|=D.flags,D.return=c,D=D.sibling;return c.subtreeFlags|=E,c.childLanes=v,h}function Rb(c,h,v){var E=h.pendingProps;switch(nb(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bi(h),null;case 1:return Bi(h),null;case 3:return v=h.stateNode,E=null,c!==null&&(E=c.memoizedState.cache),h.memoizedState.cache!==E&&(h.flags|=2048),Gu(Br),Kt(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(c===null||c.child===null)&&(yl(h)?El(h):c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,_i())),Bi(h),null;case 26:return v=h.memoizedState,c===null?(El(h),v!==null?(Bi(h),eg(h,v)):(Bi(h),h.flags&=-16777217)):v?v!==c.memoizedState?(El(h),Bi(h),eg(h,v)):(Bi(h),h.flags&=-16777217):(c.memoizedProps!==E&&El(h),Bi(h),h.flags&=-16777217),null;case 27:te(h),v=ft.current;var D=h.type;if(c!==null&&h.stateNode!=null)c.memoizedProps!==E&&El(h);else{if(!E){if(h.stateNode===null)throw Error(r(166));return Bi(h),null}c=nt.current,yl(h)?hE(h):(c=gk(D,E,v),h.stateNode=c,El(h))}return Bi(h),null;case 5:if(te(h),v=h.type,c!==null&&h.stateNode!=null)c.memoizedProps!==E&&El(h);else{if(!E){if(h.stateNode===null)throw Error(r(166));return Bi(h),null}if(c=nt.current,yl(h))hE(h);else{switch(D=aT(ft.current),c){case 1:c=D.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:c=D.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":c=D.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":c=D.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":c=D.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof E.is=="string"?D.createElement("select",{is:E.is}):D.createElement("select"),E.multiple?c.multiple=!0:E.size&&(c.size=E.size);break;default:c=typeof E.is=="string"?D.createElement(v,{is:E.is}):D.createElement(v)}}c[er]=h,c[qi]=E;t:for(D=h.child;D!==null;){if(D.tag===5||D.tag===6)c.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===h)break t;for(;D.sibling===null;){if(D.return===null||D.return===h)break t;D=D.return}D.sibling.return=D.return,D=D.sibling}h.stateNode=c;t:switch(sa(c,v,E),v){case"button":case"input":case"select":case"textarea":c=!!E.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&El(h)}}return Bi(h),h.flags&=-16777217,null;case 6:if(c&&h.stateNode!=null)c.memoizedProps!==E&&El(h);else{if(typeof E!="string"&&h.stateNode===null)throw Error(r(166));if(c=ft.current,yl(h)){if(c=h.stateNode,v=h.memoizedProps,E=null,D=Js,D!==null)switch(D.tag){case 27:case 5:E=D.memoizedProps}c[er]=h,c=!!(c.nodeValue===v||E!==null&&E.suppressHydrationWarning===!0||uk(c.nodeValue,v)),c||Gc(h)}else c=aT(c).createTextNode(E),c[er]=h,h.stateNode=c}return Bi(h),null;case 13:if(E=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(D=yl(h),E!==null&&E.dehydrated!==null){if(c===null){if(!D)throw Error(r(318));if(D=h.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(r(317));D[er]=h}else Fd(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Bi(h),D=!1}else D=_i(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=D),D=!0;if(!D)return h.flags&256?(Jl(h),h):(Jl(h),null)}if(Jl(h),(h.flags&128)!==0)return h.lanes=v,h;if(v=E!==null,c=c!==null&&c.memoizedState!==null,v){E=h.child,D=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(D=E.alternate.memoizedState.cachePool.pool);var z=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(z=E.memoizedState.cachePool.pool),z!==D&&(E.flags|=2048)}return v!==c&&v&&(h.child.flags|=8192),Ku(h,h.updateQueue),Bi(h),null;case 4:return Kt(),c===null&&wR(h.stateNode.containerInfo),Bi(h),null;case 10:return Gu(h.type),Bi(h),null;case 19:if(yt(Ar),D=h.memoizedState,D===null)return Bi(h),null;if(E=(h.flags&128)!==0,z=D.rendering,z===null)if(E)vh(D,!1);else{if(Wi!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(z=Yu(c),z!==null){for(h.flags|=128,vh(D,!1),c=z.updateQueue,h.updateQueue=c,Ku(h,c),h.subtreeFlags=0,c=v,v=h.child;v!==null;)tb(v,c),v=v.sibling;return xt(Ar,Ar.current&1|2),h.child}c=c.sibling}D.tail!==null&&se()>Hs&&(h.flags|=128,E=!0,vh(D,!1),h.lanes=4194304)}else{if(!E)if(c=Yu(z),c!==null){if(h.flags|=128,E=!0,c=c.updateQueue,h.updateQueue=c,Ku(h,c),vh(D,!0),D.tail===null&&D.tailMode==="hidden"&&!z.alternate&&!ci)return Bi(h),null}else 2*se()-D.renderingStartTime>Hs&&v!==536870912&&(h.flags|=128,E=!0,vh(D,!1),h.lanes=4194304);D.isBackwards?(z.sibling=h.child,h.child=z):(c=D.last,c!==null?c.sibling=z:h.child=z,D.last=z)}return D.tail!==null?(h=D.tail,D.rendering=h,D.tail=h.sibling,D.renderingStartTime=se(),h.sibling=null,c=Ar.current,xt(Ar,E?c&1|2:c&1),h):(Bi(h),null);case 22:case 23:return Jl(h),Wm(),E=h.memoizedState!==null,c!==null?c.memoizedState!==null!==E&&(h.flags|=8192):E&&(h.flags|=8192),E?(v&536870912)!==0&&(h.flags&128)===0&&(Bi(h),h.subtreeFlags&6&&(h.flags|=8192)):Bi(h),v=h.updateQueue,v!==null&&Ku(h,v.retryQueue),v=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),E=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==v&&(h.flags|=2048),c!==null&&yt(Lo),null;case 24:return v=null,c!==null&&(v=c.memoizedState.cache),h.memoizedState.cache!==v&&(h.flags|=2048),Gu(Br),Bi(h),null;case 25:return null;case 30:return null}throw Error(r(156,h.tag))}function ep(c,h){switch(nb(h),h.tag){case 1:return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return Gu(Br),Kt(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 26:case 27:case 5:return te(h),null;case 13:if(Jl(h),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(r(340));Fd()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return yt(Ar),null;case 4:return Kt(),null;case 10:return Gu(h.type),null;case 22:case 23:return Jl(h),Wm(),c!==null&&yt(Lo),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 24:return Gu(Br),null;case 25:return null;default:return null}}function np(c,h){switch(nb(h),h.tag){case 3:Gu(Br),Kt();break;case 26:case 27:case 5:te(h);break;case 4:Kt();break;case 13:Jl(h);break;case 19:yt(Ar);break;case 10:Gu(h.type);break;case 22:case 23:Jl(h),Wm(),c!==null&&yt(Lo);break;case 24:Gu(Br)}}function _h(c,h){try{var v=h.updateQueue,E=v!==null?v.lastEffect:null;if(E!==null){var D=E.next;v=D;do{if((v.tag&c)===c){E=void 0;var z=v.create,Z=v.inst;E=z(),Z.destroy=E}v=v.next}while(v!==D)}}catch(rt){Et(h,h.return,rt)}}function eo(c,h,v){try{var E=h.updateQueue,D=E!==null?E.lastEffect:null;if(D!==null){var z=D.next;E=z;do{if((E.tag&c)===c){var Z=E.inst,rt=Z.destroy;if(rt!==void 0){Z.destroy=void 0,D=h;var vt=v,kt=rt;try{kt()}catch(ie){Et(D,vt,ie)}}}E=E.next}while(E!==z)}}catch(ie){Et(h,h.return,ie)}}function bh(c){var h=c.updateQueue;if(h!==null){var v=c.stateNode;try{mE(h,v)}catch(E){Et(c,c.return,E)}}}function Zu(c,h,v){v.props=tu(c.type,c.memoizedProps),v.state=c.memoizedState;try{v.componentWillUnmount()}catch(E){Et(c,h,E)}}function xh(c,h){try{var v=c.ref;if(v!==null){switch(c.tag){case 26:case 27:case 5:var E=c.stateNode;break;case 30:E=c.stateNode;break;default:E=c.stateNode}typeof v=="function"?c.refCleanup=v(E):v.current=E}}catch(D){Et(c,h,D)}}function nu(c,h){var v=c.ref,E=c.refCleanup;if(v!==null)if(typeof E=="function")try{E()}catch(D){Et(c,h,D)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(D){Et(c,h,D)}else v.current=null}function ip(c){var h=c.type,v=c.memoizedProps,E=c.stateNode;try{t:switch(h){case"button":case"input":case"select":case"textarea":v.autoFocus&&E.focus();break t;case"img":v.src?E.src=v.src:v.srcSet&&(E.srcset=v.srcSet)}}catch(D){Et(c,c.return,D)}}function ng(c,h,v){try{var E=c.stateNode;xX(E,c.type,v,h),E[qi]=h}catch(D){Et(c,c.return,D)}}function ig(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&cp(c.type)||c.tag===4}function tf(c){t:for(;;){for(;c.sibling===null;){if(c.return===null||ig(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&cp(c.type)||c.flags&2||c.child===null||c.tag===4)continue t;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function ef(c,h,v){var E=c.tag;if(E===5||E===6)c=c.stateNode,h?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(c,h):(h=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,h.appendChild(c),v=v._reactRootContainer,v!=null||h.onclick!==null||(h.onclick=sT));else if(E!==4&&(E===27&&cp(c.type)&&(v=c.stateNode,h=null),c=c.child,c!==null))for(ef(c,h,v),c=c.sibling;c!==null;)ef(c,h,v),c=c.sibling}function nf(c,h,v){var E=c.tag;if(E===5||E===6)c=c.stateNode,h?v.insertBefore(c,h):v.appendChild(c);else if(E!==4&&(E===27&&cp(c.type)&&(v=c.stateNode),c=c.child,c!==null))for(nf(c,h,v),c=c.sibling;c!==null;)nf(c,h,v),c=c.sibling}function rf(c){var h=c.stateNode,v=c.memoizedProps;try{for(var E=c.type,D=h.attributes;D.length;)h.removeAttributeNode(D[0]);sa(h,E,v),h[er]=c,h[qi]=v}catch(z){Et(c,c.return,z)}}var iu=!1,Fi=!1,rp=!1,no=typeof WeakSet=="function"?WeakSet:Set,Ni=null;function Qr(c,h){if(c=c.containerInfo,CR=hT,c=W_(c),Im(c)){if("selectionStart"in c)var v={start:c.selectionStart,end:c.selectionEnd};else t:{v=(v=c.ownerDocument)&&v.defaultView||window;var E=v.getSelection&&v.getSelection();if(E&&E.rangeCount!==0){v=E.anchorNode;var D=E.anchorOffset,z=E.focusNode;E=E.focusOffset;try{v.nodeType,z.nodeType}catch{v=null;break t}var Z=0,rt=-1,vt=-1,kt=0,ie=0,ce=c,Gt=null;e:for(;;){for(var $t;ce!==v||D!==0&&ce.nodeType!==3||(rt=Z+D),ce!==z||E!==0&&ce.nodeType!==3||(vt=Z+E),ce.nodeType===3&&(Z+=ce.nodeValue.length),($t=ce.firstChild)!==null;)Gt=ce,ce=$t;for(;;){if(ce===c)break e;if(Gt===v&&++kt===D&&(rt=Z),Gt===z&&++ie===E&&(vt=Z),($t=ce.nextSibling)!==null)break;ce=Gt,Gt=ce.parentNode}ce=$t}v=rt===-1||vt===-1?null:{start:rt,end:vt}}else v=null}v=v||{start:0,end:0}}else v=null;for(RR={focusedElem:c,selectionRange:v},hT=!1,Ni=h;Ni!==null;)if(h=Ni,c=h.child,(h.subtreeFlags&1024)!==0&&c!==null)c.return=h,Ni=c;else for(;Ni!==null;){switch(h=Ni,z=h.alternate,c=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&z!==null){c=void 0,v=h,D=z.memoizedProps,z=z.memoizedState,E=v.stateNode;try{var dn=tu(v.type,D,v.elementType===v.type);c=E.getSnapshotBeforeUpdate(dn,z),E.__reactInternalSnapshotBeforeUpdate=c}catch(on){Et(v,v.return,on)}}break;case 3:if((c&1024)!==0){if(c=h.stateNode.containerInfo,v=c.nodeType,v===9)DR(c);else if(v===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":DR(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=h.sibling,c!==null){c.return=h.return,Ni=c;break}Ni=h.return}}function Qu(c,h,v){var E=v.flags;switch(v.tag){case 0:case 11:case 15:ia(c,v),E&4&&_h(5,v);break;case 1:if(ia(c,v),E&4)if(c=v.stateNode,h===null)try{c.componentDidMount()}catch(Z){Et(v,v.return,Z)}else{var D=tu(v.type,h.memoizedProps);h=h.memoizedState;try{c.componentDidUpdate(D,h,c.__reactInternalSnapshotBeforeUpdate)}catch(Z){Et(v,v.return,Z)}}E&64&&bh(v),E&512&&xh(v,v.return);break;case 3:if(ia(c,v),E&64&&(c=v.updateQueue,c!==null)){if(h=null,v.child!==null)switch(v.child.tag){case 27:case 5:h=v.child.stateNode;break;case 1:h=v.child.stateNode}try{mE(c,h)}catch(Z){Et(v,v.return,Z)}}break;case 27:h===null&&E&4&&rf(v);case 26:case 5:ia(c,v),h===null&&E&4&&ip(v),E&512&&xh(v,v.return);break;case 12:ia(c,v);break;case 13:ia(c,v),E&4&&sf(c,v),E&64&&(c=v.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(v=Xi.bind(null,v),CX(c,v))));break;case 22:if(E=v.memoizedState!==null||iu,!E){h=h!==null&&h.memoizedState!==null||Fi,D=iu;var z=Fi;iu=E,(Fi=h)&&!z?ru(c,v,(v.subtreeFlags&8772)!==0):ia(c,v),iu=D,Fi=z}break;case 30:break;default:ia(c,v)}}function Nn(c){var h=c.alternate;h!==null&&(c.alternate=null,Nn(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&ri(h)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var rn=null,ai=!1;function Vo(c,h,v){for(v=v.child;v!==null;)Sh(c,h,v),v=v.sibling}function Sh(c,h,v){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(bt,v)}catch{}switch(v.tag){case 26:Fi||nu(v,h),Vo(c,h,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:Fi||nu(v,h);var E=rn,D=ai;cp(v.type)&&(rn=v.stateNode,ai=!1),Vo(c,h,v),Lb(v.stateNode),rn=E,ai=D;break;case 5:Fi||nu(v,h);case 6:if(E=rn,D=ai,rn=null,Vo(c,h,v),rn=E,ai=D,rn!==null)if(ai)try{(rn.nodeType===9?rn.body:rn.nodeName==="HTML"?rn.ownerDocument.body:rn).removeChild(v.stateNode)}catch(z){Et(v,h,z)}else try{rn.removeChild(v.stateNode)}catch(z){Et(v,h,z)}break;case 18:rn!==null&&(ai?(c=rn,pk(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,v.stateNode),Gb(c)):pk(rn,v.stateNode));break;case 4:E=rn,D=ai,rn=v.stateNode.containerInfo,ai=!0,Vo(c,h,v),rn=E,ai=D;break;case 0:case 11:case 14:case 15:Fi||eo(2,v,h),Fi||eo(4,v,h),Vo(c,h,v);break;case 1:Fi||(nu(v,h),E=v.stateNode,typeof E.componentWillUnmount=="function"&&Zu(v,h,E)),Vo(c,h,v);break;case 21:Vo(c,h,v);break;case 22:Fi=(E=Fi)||v.memoizedState!==null,Vo(c,h,v),Fi=E;break;default:Vo(c,h,v)}}function sf(c,h){if(h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Gb(c)}catch(v){Et(h,h.return,v)}}function mv(c){switch(c.tag){case 13:case 19:var h=c.stateNode;return h===null&&(h=c.stateNode=new no),h;case 22:return c=c.stateNode,h=c._retryCache,h===null&&(h=c._retryCache=new no),h;default:throw Error(r(435,c.tag))}}function Eh(c,h){var v=mv(c);h.forEach(function(E){var D=hn.bind(null,c,E);v.has(E)||(v.add(E),E.then(D,D))})}function ps(c,h){var v=h.deletions;if(v!==null)for(var E=0;E<v.length;E++){var D=v[E],z=c,Z=h,rt=Z;t:for(;rt!==null;){switch(rt.tag){case 27:if(cp(rt.type)){rn=rt.stateNode,ai=!1;break t}break;case 5:rn=rt.stateNode,ai=!1;break t;case 3:case 4:rn=rt.stateNode.containerInfo,ai=!0;break t}rt=rt.return}if(rn===null)throw Error(r(160));Sh(z,Z,D),rn=null,ai=!1,z=D.alternate,z!==null&&(z.return=null),D.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)gv(h,c),h=h.sibling}var Tl=null;function gv(c,h){var v=c.alternate,E=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:ps(h,c),pr(c),E&4&&(eo(3,c,c.return),_h(3,c),eo(5,c,c.return));break;case 1:ps(h,c),pr(c),E&512&&(Fi||v===null||nu(v,v.return)),E&64&&iu&&(c=c.updateQueue,c!==null&&(E=c.callbacks,E!==null&&(v=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=v===null?E:v.concat(E))));break;case 26:var D=Tl;if(ps(h,c),pr(c),E&512&&(Fi||v===null||nu(v,v.return)),E&4){var z=v!==null?v.memoizedState:null;if(E=c.memoizedState,v===null)if(E===null)if(c.stateNode===null){t:{E=c.type,v=c.memoizedProps,D=D.ownerDocument||D;e:switch(E){case"title":z=D.getElementsByTagName("title")[0],(!z||z[qa]||z[er]||z.namespaceURI==="http://www.w3.org/2000/svg"||z.hasAttribute("itemprop"))&&(z=D.createElement(E),D.head.insertBefore(z,D.querySelector("head > title"))),sa(z,E,v),z[er]=c,nr(z),E=z;break t;case"link":var Z=Sk("link","href",D).get(E+(v.href||""));if(Z){for(var rt=0;rt<Z.length;rt++)if(z=Z[rt],z.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&z.getAttribute("rel")===(v.rel==null?null:v.rel)&&z.getAttribute("title")===(v.title==null?null:v.title)&&z.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){Z.splice(rt,1);break e}}z=D.createElement(E),sa(z,E,v),D.head.appendChild(z);break;case"meta":if(Z=Sk("meta","content",D).get(E+(v.content||""))){for(rt=0;rt<Z.length;rt++)if(z=Z[rt],z.getAttribute("content")===(v.content==null?null:""+v.content)&&z.getAttribute("name")===(v.name==null?null:v.name)&&z.getAttribute("property")===(v.property==null?null:v.property)&&z.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&z.getAttribute("charset")===(v.charSet==null?null:v.charSet)){Z.splice(rt,1);break e}}z=D.createElement(E),sa(z,E,v),D.head.appendChild(z);break;default:throw Error(r(468,E))}z[er]=c,nr(z),E=z}c.stateNode=E}else Ek(D,c.type,c.stateNode);else c.stateNode=xk(D,E,c.memoizedProps);else z!==E?(z===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):z.count--,E===null?Ek(D,c.type,c.stateNode):xk(D,E,c.memoizedProps)):E===null&&c.stateNode!==null&&ng(c,c.memoizedProps,v.memoizedProps)}break;case 27:ps(h,c),pr(c),E&512&&(Fi||v===null||nu(v,v.return)),v!==null&&E&4&&ng(c,c.memoizedProps,v.memoizedProps);break;case 5:if(ps(h,c),pr(c),E&512&&(Fi||v===null||nu(v,v.return)),c.flags&32){D=c.stateNode;try{xr(D,"")}catch($t){Et(c,c.return,$t)}}E&4&&c.stateNode!=null&&(D=c.memoizedProps,ng(c,D,v!==null?v.memoizedProps:D)),E&1024&&(rp=!0);break;case 6:if(ps(h,c),pr(c),E&4){if(c.stateNode===null)throw Error(r(162));E=c.memoizedProps,v=c.stateNode;try{v.nodeValue=E}catch($t){Et(c,c.return,$t)}}break;case 3:if(uT=null,D=Tl,Tl=oT(h.containerInfo),ps(h,c),Tl=D,pr(c),E&4&&v!==null&&v.memoizedState.isDehydrated)try{Gb(h.containerInfo)}catch($t){Et(c,c.return,$t)}rp&&(rp=!1,af(c));break;case 4:E=Tl,Tl=oT(c.stateNode.containerInfo),ps(h,c),pr(c),Tl=E;break;case 12:ps(h,c),pr(c);break;case 13:ps(h,c),pr(c),c.child.flags&8192&&c.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(Ci=se()),E&4&&(E=c.updateQueue,E!==null&&(c.updateQueue=null,Eh(c,E)));break;case 22:D=c.memoizedState!==null;var vt=v!==null&&v.memoizedState!==null,kt=iu,ie=Fi;if(iu=kt||D,Fi=ie||vt,ps(h,c),Fi=ie,iu=kt,pr(c),E&8192)t:for(h=c.stateNode,h._visibility=D?h._visibility&-2:h._visibility|1,D&&(v===null||vt||iu||Fi||io(c)),v=null,h=c;;){if(h.tag===5||h.tag===26){if(v===null){vt=v=h;try{if(z=vt.stateNode,D)Z=z.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none";else{rt=vt.stateNode;var ce=vt.memoizedProps.style,Gt=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;rt.style.display=Gt==null||typeof Gt=="boolean"?"":(""+Gt).trim()}}catch($t){Et(vt,vt.return,$t)}}}else if(h.tag===6){if(v===null){vt=h;try{vt.stateNode.nodeValue=D?"":vt.memoizedProps}catch($t){Et(vt,vt.return,$t)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===c)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break t;for(;h.sibling===null;){if(h.return===null||h.return===c)break t;v===h&&(v=null),h=h.return}v===h&&(v=null),h.sibling.return=h.return,h=h.sibling}E&4&&(E=c.updateQueue,E!==null&&(v=E.retryQueue,v!==null&&(E.retryQueue=null,Eh(c,v))));break;case 19:ps(h,c),pr(c),E&4&&(E=c.updateQueue,E!==null&&(c.updateQueue=null,Eh(c,E)));break;case 30:break;case 21:break;default:ps(h,c),pr(c)}}function pr(c){var h=c.flags;if(h&2){try{for(var v,E=c.return;E!==null;){if(ig(E)){v=E;break}E=E.return}if(v==null)throw Error(r(160));switch(v.tag){case 27:var D=v.stateNode,z=tf(c);nf(c,z,D);break;case 5:var Z=v.stateNode;v.flags&32&&(xr(Z,""),v.flags&=-33);var rt=tf(c);nf(c,rt,Z);break;case 3:case 4:var vt=v.stateNode.containerInfo,kt=tf(c);ef(c,kt,vt);break;default:throw Error(r(161))}}catch(ie){Et(c,c.return,ie)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function af(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var h=c;af(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),c=c.sibling}}function ia(c,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)Qu(c,h.alternate,h),h=h.sibling}function io(c){for(c=c.child;c!==null;){var h=c;switch(h.tag){case 0:case 11:case 14:case 15:eo(4,h,h.return),io(h);break;case 1:nu(h,h.return);var v=h.stateNode;typeof v.componentWillUnmount=="function"&&Zu(h,h.return,v),io(h);break;case 27:Lb(h.stateNode);case 26:case 5:nu(h,h.return),io(h);break;case 22:h.memoizedState===null&&io(h);break;case 30:io(h);break;default:io(h)}c=c.sibling}}function ru(c,h,v){for(v=v&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var E=h.alternate,D=c,z=h,Z=z.flags;switch(z.tag){case 0:case 11:case 15:ru(D,z,v),_h(4,z);break;case 1:if(ru(D,z,v),E=z,D=E.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(kt){Et(E,E.return,kt)}if(E=z,D=E.updateQueue,D!==null){var rt=E.stateNode;try{var vt=D.shared.hiddenCallbacks;if(vt!==null)for(D.shared.hiddenCallbacks=null,D=0;D<vt.length;D++)Wd(vt[D],rt)}catch(kt){Et(E,E.return,kt)}}v&&Z&64&&bh(z),xh(z,z.return);break;case 27:rf(z);case 26:case 5:ru(D,z,v),v&&E===null&&Z&4&&ip(z),xh(z,z.return);break;case 12:ru(D,z,v);break;case 13:ru(D,z,v),v&&Z&4&&sf(D,z);break;case 22:z.memoizedState===null&&ru(D,z,v),xh(z,z.return);break;case 30:break;default:ru(D,z,v)}h=h.sibling}}function yv(c,h){var v=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),c=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(c=h.memoizedState.cachePool.pool),c!==v&&(c!=null&&c.refCount++,v!=null&&Vd(v))}function vv(c,h){c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&Vd(c))}function Li(c,h,v,E){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)_v(c,h,v,E),h=h.sibling}function _v(c,h,v,E){var D=h.flags;switch(h.tag){case 0:case 11:case 15:Li(c,h,v,E),D&2048&&_h(9,h);break;case 1:Li(c,h,v,E);break;case 3:Li(c,h,v,E),D&2048&&(c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&Vd(c)));break;case 12:if(D&2048){Li(c,h,v,E),c=h.stateNode;try{var z=h.memoizedProps,Z=z.id,rt=z.onPostCommit;typeof rt=="function"&&rt(Z,h.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(vt){Et(h,h.return,vt)}}else Li(c,h,v,E);break;case 13:Li(c,h,v,E);break;case 23:break;case 22:z=h.stateNode,Z=h.alternate,h.memoizedState!==null?z._visibility&2?Li(c,h,v,E):wl(c,h):z._visibility&2?Li(c,h,v,E):(z._visibility|=2,Ju(c,h,v,E,(h.subtreeFlags&10256)!==0)),D&2048&&yv(Z,h);break;case 24:Li(c,h,v,E),D&2048&&vv(h.alternate,h);break;default:Li(c,h,v,E)}}function Ju(c,h,v,E,D){for(D=D&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var z=c,Z=h,rt=v,vt=E,kt=Z.flags;switch(Z.tag){case 0:case 11:case 15:Ju(z,Z,rt,vt,D),_h(8,Z);break;case 23:break;case 22:var ie=Z.stateNode;Z.memoizedState!==null?ie._visibility&2?Ju(z,Z,rt,vt,D):wl(z,Z):(ie._visibility|=2,Ju(z,Z,rt,vt,D)),D&&kt&2048&&yv(Z.alternate,Z);break;case 24:Ju(z,Z,rt,vt,D),D&&kt&2048&&vv(Z.alternate,Z);break;default:Ju(z,Z,rt,vt,D)}h=h.sibling}}function wl(c,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var v=c,E=h,D=E.flags;switch(E.tag){case 22:wl(v,E),D&2048&&yv(E.alternate,E);break;case 24:wl(v,E),D&2048&&vv(E.alternate,E);break;default:wl(v,E)}h=h.sibling}}var ro=8192;function sp(c){if(c.subtreeFlags&ro)for(c=c.child;c!==null;)eT(c),c=c.sibling}function eT(c){switch(c.tag){case 26:sp(c),c.flags&ro&&c.memoizedState!==null&&VX(Tl,c.memoizedState,c.memoizedProps);break;case 5:sp(c);break;case 3:case 4:var h=Tl;Tl=oT(c.stateNode.containerInfo),sp(c),Tl=h;break;case 22:c.memoizedState===null&&(h=c.alternate,h!==null&&h.memoizedState!==null?(h=ro,ro=16777216,sp(c),ro=h):sp(c));break;default:sp(c)}}function nT(c){var h=c.alternate;if(h!==null&&(c=h.child,c!==null)){h.child=null;do h=c.sibling,c.sibling=null,c=h;while(c!==null)}}function Vi(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var v=0;v<h.length;v++){var E=h[v];Ni=E,au(E,c)}nT(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Ob(c),c=c.sibling}function Ob(c){switch(c.tag){case 0:case 11:case 15:Vi(c),c.flags&2048&&eo(9,c,c.return);break;case 3:Vi(c);break;case 12:Vi(c);break;case 22:var h=c.stateNode;c.memoizedState!==null&&h._visibility&2&&(c.return===null||c.return.tag!==13)?(h._visibility&=-3,su(c)):Vi(c);break;default:Vi(c)}}function su(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var v=0;v<h.length;v++){var E=h[v];Ni=E,au(E,c)}nT(c)}for(c=c.child;c!==null;){switch(h=c,h.tag){case 0:case 11:case 15:eo(8,h,h.return),su(h);break;case 22:v=h.stateNode,v._visibility&2&&(v._visibility&=-3,su(h));break;default:su(h)}c=c.sibling}}function au(c,h){for(;Ni!==null;){var v=Ni;switch(v.tag){case 0:case 11:case 15:eo(8,v,h);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var E=v.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Vd(v.memoizedState.cache)}if(E=v.child,E!==null)E.return=v,Ni=E;else t:for(v=c;Ni!==null;){E=Ni;var D=E.sibling,z=E.return;if(Nn(E),E===v){Ni=null;break t}if(D!==null){D.return=z,Ni=D;break t}Ni=z}}}var mr={getCacheForType:function(c){var h=dr(Br),v=h.data.get(c);return v===void 0&&(v=c(),h.data.set(c,v)),v}},Ib=typeof WeakMap=="function"?WeakMap:Map,bi=0,bn=null,Hn=null,Je=0,In=0,lr=null,so=!1,ap=!1,op=!1,Ho=0,Wi=0,Al=0,ou=0,Th=0,Go=0,oi=0,xi=null,an=null,Kn=!1,Ci=0,Hs=1/0,jo=null,ao=null,Jr=0,Gs=null,Ui=null,oo=0,tc=0,rg=null,lo=null,lu=0,wh=null;function gr(){if((bi&2)!==0&&Je!==0)return Je&-Je;if(q.T!==null){var c=An;return c!==0?c:xR()}return Qe()}function bv(){Go===0&&(Go=(Je&536870912)===0||ci?At():536870912);var c=Pi.current;return c!==null&&(c.flags|=32),Go}function ra(c,h,v){(c===bn&&(In===2||In===9)||c.cancelPendingCommit!==null)&&(lf(c,0),Ml(c,Je,Go,!1)),re(c,v),((bi&2)===0||c!==bn)&&(c===bn&&((bi&2)===0&&(ou|=v),Wi===4&&Ml(c,Je,Go,!1)),ff(c))}function lp(c,h,v){if((bi&6)!==0)throw Error(r(327));var E=!v&&(h&124)===0&&(h&c.expiredLanes)===0||Ie(c,h),D=E?P(c,h):g(c,h,!0),z=E;do{if(D===0){ap&&!E&&Ml(c,h,0,!1);break}else{if(v=c.current.alternate,z&&!of(v)){D=g(c,h,!1),z=!1;continue}if(D===2){if(z=h,c.errorRecoveryDisabledLanes&z)var Z=0;else Z=c.pendingLanes&-536870913,Z=Z!==0?Z:Z&536870912?536870912:0;if(Z!==0){h=Z;t:{var rt=c;D=xi;var vt=rt.current.memoizedState.isDehydrated;if(vt&&(lf(rt,Z).flags|=256),Z=g(rt,Z,!1),Z!==2){if(op&&!vt){rt.errorRecoveryDisabledLanes|=z,ou|=z,D=4;break t}z=an,an=D,z!==null&&(an===null?an=z:an.push.apply(an,z))}D=Z}if(z=!1,D!==2)continue}}if(D===1){lf(c,0),Ml(c,h,0,!0);break}t:{switch(E=c,z=D,z){case 0:case 1:throw Error(r(345));case 4:if((h&4194048)!==h)break;case 6:Ml(E,h,Go,!so);break t;case 2:an=null;break;case 3:case 5:break;default:throw Error(r(329))}if((h&62914560)===h&&(D=Ci+300-se(),10<D)){if(Ml(E,h,Go,!so),Re(E,0,!0)!==0)break t;E.timeoutHandle=hk(sg.bind(null,E,v,an,jo,Kn,h,Go,ou,oi,so,z,2,-0,0),D);break t}sg(E,v,an,jo,Kn,h,Go,ou,oi,so,z,0,-0,0)}}break}while(!0);ff(c)}function sg(c,h,v,E,D,z,Z,rt,vt,kt,ie,ce,Gt,$t){if(c.timeoutHandle=-1,ce=h.subtreeFlags,(ce&8192||(ce&16785408)===16785408)&&(zb={stylesheets:null,count:0,unsuspend:FX},eT(h),ce=HX(),ce!==null)){c.cancelPendingCommit=ce(ye.bind(null,c,h,z,v,E,D,Z,rt,vt,ie,1,Gt,$t)),Ml(c,z,Z,!kt);return}ye(c,h,z,v,E,D,Z,rt,vt)}function of(c){for(var h=c;;){var v=h.tag;if((v===0||v===11||v===15)&&h.flags&16384&&(v=h.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var E=0;E<v.length;E++){var D=v[E],z=D.getSnapshot;D=D.value;try{if(!xa(z(),D))return!1}catch{return!1}}if(v=h.child,h.subtreeFlags&16384&&v!==null)v.return=h,h=v;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Ml(c,h,v,E){h&=~Th,h&=~ou,c.suspendedLanes|=h,c.pingedLanes&=~h,E&&(c.warmLanes|=h),E=c.expirationTimes;for(var D=h;0<D;){var z=31-Qt(D),Z=1<<z;E[z]=-1,D&=~Z}v!==0&&Ee(c,v,h)}function uu(){return(bi&6)===0?(Db(0),!1):!0}function Ah(){if(Hn!==null){if(In===0)var c=Hn.return;else c=Hn,Hu=jc=null,db(c),ch=null,Zm=0,c=Hn;for(;c!==null;)np(c.alternate,c),c=c.return;Hn=null}}function lf(c,h){var v=c.timeoutHandle;v!==-1&&(c.timeoutHandle=-1,EX(v)),v=c.cancelPendingCommit,v!==null&&(c.cancelPendingCommit=null,v()),Ah(),bn=c,Hn=v=Tr(c.current,null),Je=h,In=0,lr=null,so=!1,ap=Ie(c,h),op=!1,oi=Go=Th=ou=Al=Wi=0,an=xi=null,Kn=!1,(h&8)!==0&&(h|=h&32);var E=c.entangledLanes;if(E!==0)for(c=c.entanglements,E&=h;0<E;){var D=31-Qt(E),z=1<<D;h|=c[D],E&=~z}return Ho=h,Nm(),v}function xv(c,h){Mn=null,q.H=Km,h===jm||h===vl?(h=lb(),In=3):h===ob?(h=lb(),In=4):In=h===tT?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,lr=h,Hn===null&&(Wi=1,hv(c,Ts(h,c.current)))}function up(){var c=q.H;return q.H=Km,c===null?Km:c}function Sv(){var c=q.A;return q.A=mr,c}function p(){Wi=4,so||(Je&4194048)!==Je&&Pi.current!==null||(ap=!0),(Al&134217727)===0&&(ou&134217727)===0||bn===null||Ml(bn,Je,Go,!1)}function g(c,h,v){var E=bi;bi|=2;var D=up(),z=Sv();(bn!==c||Je!==h)&&(jo=null,lf(c,h)),h=!1;var Z=Wi;t:do try{if(In!==0&&Hn!==null){var rt=Hn,vt=lr;switch(In){case 8:Ah(),Z=6;break t;case 3:case 2:case 9:case 6:Pi.current===null&&(h=!0);var kt=In;if(In=0,lr=null,_t(c,rt,vt,kt),v&&ap){Z=0;break t}break;default:kt=In,In=0,lr=null,_t(c,rt,vt,kt)}}w(),Z=Wi;break}catch(ie){xv(c,ie)}while(!0);return h&&c.shellSuspendCounter++,Hu=jc=null,bi=E,q.H=D,q.A=z,Hn===null&&(bn=null,Je=0,Nm()),Z}function w(){for(;Hn!==null;)$(Hn)}function P(c,h){var v=bi;bi|=2;var E=up(),D=Sv();bn!==c||Je!==h?(jo=null,Hs=se()+500,lf(c,h)):ap=Ie(c,h);t:do try{if(In!==0&&Hn!==null){h=Hn;var z=lr;e:switch(In){case 1:In=0,lr=null,_t(c,h,z,1);break;case 2:case 9:if(Zy(z)){In=0,lr=null,ot(h);break}h=function(){In!==2&&In!==9||bn!==c||(In=7),ff(c)},z.then(h,h);break t;case 3:In=7;break t;case 4:In=5;break t;case 7:Zy(z)?(In=0,lr=null,ot(h)):(In=0,lr=null,_t(c,h,z,7));break;case 5:var Z=null;switch(Hn.tag){case 26:Z=Hn.memoizedState;case 5:case 27:var rt=Hn;if(!Z||Tk(Z)){In=0,lr=null;var vt=rt.sibling;if(vt!==null)Hn=vt;else{var kt=rt.return;kt!==null?(Hn=kt,Nt(kt)):Hn=null}break e}}In=0,lr=null,_t(c,h,z,5);break;case 6:In=0,lr=null,_t(c,h,z,6);break;case 8:Ah(),Wi=6;break t;default:throw Error(r(462))}}B();break}catch(ie){xv(c,ie)}while(!0);return Hu=jc=null,q.H=E,q.A=D,bi=v,Hn!==null?0:(bn=null,Je=0,Nm(),Wi)}function B(){for(;Hn!==null&&!ue();)$(Hn)}function $(c){var h=yh(c.alternate,c,Ho);c.memoizedProps=c.pendingProps,h===null?Nt(c):Hn=h}function ot(c){var h=c,v=h.alternate;switch(h.tag){case 15:case 0:h=Ja(v,h,h.pendingProps,h.type,void 0,Je);break;case 11:h=Ja(v,h,h.pendingProps,h.type.render,h.ref,Je);break;case 5:db(h);default:np(v,h),h=Hn=tb(h,Ho),h=yh(v,h,Ho)}c.memoizedProps=c.pendingProps,h===null?Nt(c):Hn=h}function _t(c,h,v,E){Hu=jc=null,db(h),ch=null,Zm=0;var D=h.return;try{if(_R(c,D,h,v,Je)){Wi=1,hv(c,Ts(v,c.current)),Hn=null;return}}catch(z){if(D!==null)throw Hn=D,z;Wi=1,hv(c,Ts(v,c.current)),Hn=null;return}h.flags&32768?(ci||E===1?c=!0:ap||(Je&536870912)!==0?c=!1:(so=c=!0,(E===2||E===9||E===3||E===6)&&(E=Pi.current,E!==null&&E.tag===13&&(E.flags|=16384))),ne(h,c)):Nt(h)}function Nt(c){var h=c;do{if((h.flags&32768)!==0){ne(h,so);return}c=h.return;var v=Rb(h.alternate,h,Ho);if(v!==null){Hn=v;return}if(h=h.sibling,h!==null){Hn=h;return}Hn=h=c}while(h!==null);Wi===0&&(Wi=5)}function ne(c,h){do{var v=ep(c.alternate,c);if(v!==null){v.flags&=32767,Hn=v;return}if(v=c.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!h&&(c=c.sibling,c!==null)){Hn=c;return}Hn=c=v}while(c!==null);Wi=6,Hn=null}function ye(c,h,v,E,D,z,Z,rt,vt){c.cancelPendingCommit=null;do uf();while(Jr!==0);if((bi&6)!==0)throw Error(r(327));if(h!==null){if(h===c.current)throw Error(r(177));if(z=h.lanes|h.childLanes,z|=Hy,Ae(c,v,z,Z,rt,vt),c===bn&&(Hn=bn=null,Je=0),Ui=h,Gs=c,oo=v,tc=z,rg=D,lo=E,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,fi(ct,function(){return cf(),null})):(c.callbackNode=null,c.callbackPriority=0),E=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||E){E=q.T,q.T=null,D=W.p,W.p=2,Z=bi,bi|=4;try{Qr(c,h,v)}finally{bi=Z,W.p=D,q.T=E}}Jr=1,De(),Ue(),xn()}}function De(){if(Jr===1){Jr=0;var c=Gs,h=Ui,v=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||v){v=q.T,q.T=null;var E=W.p;W.p=2;var D=bi;bi|=4;try{gv(h,c);var z=RR,Z=W_(c.containerInfo),rt=z.focusedElem,vt=z.selectionRange;if(Z!==rt&&rt&&rt.ownerDocument&&$_(rt.ownerDocument.documentElement,rt)){if(vt!==null&&Im(rt)){var kt=vt.start,ie=vt.end;if(ie===void 0&&(ie=kt),"selectionStart"in rt)rt.selectionStart=kt,rt.selectionEnd=Math.min(ie,rt.value.length);else{var ce=rt.ownerDocument||document,Gt=ce&&ce.defaultView||window;if(Gt.getSelection){var $t=Gt.getSelection(),dn=rt.textContent.length,on=Math.min(vt.start,dn),Gi=vt.end===void 0?on:Math.min(vt.end,dn);!$t.extend&&on>Gi&&(Z=Gi,Gi=on,on=Z);var Dt=q_(rt,on),Tt=q_(rt,Gi);if(Dt&&Tt&&($t.rangeCount!==1||$t.anchorNode!==Dt.node||$t.anchorOffset!==Dt.offset||$t.focusNode!==Tt.node||$t.focusOffset!==Tt.offset)){var Ut=ce.createRange();Ut.setStart(Dt.node,Dt.offset),$t.removeAllRanges(),on>Gi?($t.addRange(Ut),$t.extend(Tt.node,Tt.offset)):(Ut.setEnd(Tt.node,Tt.offset),$t.addRange(Ut))}}}}for(ce=[],$t=rt;$t=$t.parentNode;)$t.nodeType===1&&ce.push({element:$t,left:$t.scrollLeft,top:$t.scrollTop});for(typeof rt.focus=="function"&&rt.focus(),rt=0;rt<ce.length;rt++){var oe=ce[rt];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}hT=!!CR,RR=CR=null}finally{bi=D,W.p=E,q.T=v}}c.current=h,Jr=2}}function Ue(){if(Jr===2){Jr=0;var c=Gs,h=Ui,v=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||v){v=q.T,q.T=null;var E=W.p;W.p=2;var D=bi;bi|=4;try{Qu(c,h.alternate,h)}finally{bi=D,W.p=E,q.T=v}}Jr=3}}function xn(){if(Jr===4||Jr===3){Jr=0,Jt();var c=Gs,h=Ui,v=oo,E=lo;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Jr=5:(Jr=0,Ui=Gs=null,uo(c,c.pendingLanes));var D=c.pendingLanes;if(D===0&&(ao=null),ze(v),h=h.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(bt,h,void 0,(h.current.flags&128)===128)}catch{}if(E!==null){h=q.T,D=W.p,W.p=2,q.T=null;try{for(var z=c.onRecoverableError,Z=0;Z<E.length;Z++){var rt=E[Z];z(rt.value,{componentStack:rt.stack})}}finally{q.T=h,W.p=D}}(oo&3)!==0&&uf(),ff(c),D=c.pendingLanes,(v&4194090)!==0&&(D&42)!==0?c===wh?lu++:(lu=0,wh=c):lu=0,Db(0)}}function uo(c,h){(c.pooledCacheLanes&=h)===0&&(h=c.pooledCache,h!=null&&(c.pooledCache=null,Vd(h)))}function uf(c){return De(),Ue(),xn(),cf()}function cf(){if(Jr!==5)return!1;var c=Gs,h=tc;tc=0;var v=ze(oo),E=q.T,D=W.p;try{W.p=32>v?32:v,q.T=null,v=rg,rg=null;var z=Gs,Z=oo;if(Jr=0,Ui=Gs=null,oo=0,(bi&6)!==0)throw Error(r(331));var rt=bi;if(bi|=4,Ob(z.current),_v(z,z.current,Z,v),bi=rt,Db(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(bt,z)}catch{}return!0}finally{W.p=D,q.T=E,uo(c,h)}}function Ft(c,h,v){h=Ts(v,h),h=dv(c.stateNode,h,2),c=qu(c,h,2),c!==null&&(re(c,2),ff(c))}function Et(c,h,v){if(c.tag===3)Ft(c,c,v);else for(;h!==null;){if(h.tag===3){Ft(h,c,v);break}else if(h.tag===1){var E=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(ao===null||!ao.has(E))){c=Ts(v,c),v=JE(2),E=qu(h,v,2),E!==null&&(pv(v,E,h,c),re(E,2),ff(E));break}}h=h.return}}function Wt(c,h,v){var E=c.pingCache;if(E===null){E=c.pingCache=new Ib;var D=new Set;E.set(h,D)}else D=E.get(h),D===void 0&&(D=new Set,E.set(h,D));D.has(v)||(op=!0,D.add(v),c=ge.bind(null,c,h,v),h.then(c,c))}function ge(c,h,v){var E=c.pingCache;E!==null&&E.delete(h),c.pingedLanes|=c.suspendedLanes&v,c.warmLanes&=~v,bn===c&&(Je&v)===v&&(Wi===4||Wi===3&&(Je&62914560)===Je&&300>se()-Ci?(bi&2)===0&&lf(c,0):Th|=v,oi===Je&&(oi=0)),ff(c)}function Xe(c,h){h===0&&(h=Te()),c=Fu(c,h),c!==null&&(re(c,h),ff(c))}function Xi(c){var h=c.memoizedState,v=0;h!==null&&(v=h.retryLane),Xe(c,v)}function hn(c,h){var v=0;switch(c.tag){case 13:var E=c.stateNode,D=c.memoizedState;D!==null&&(v=D.retryLane);break;case 19:E=c.stateNode;break;case 22:E=c.stateNode._retryCache;break;default:throw Error(r(314))}E!==null&&E.delete(h),Xe(c,v)}function fi(c,h){return Ht(c,h)}var Cr=null,qn=null,cu=!1,Ev=!1,bR=!1,ag=0;function ff(c){c!==qn&&c.next===null&&(qn===null?Cr=qn=c:qn=qn.next=c),Ev=!0,cu||(cu=!0,pX())}function Db(c,h){if(!bR&&Ev){bR=!0;do for(var v=!1,E=Cr;E!==null;){if(c!==0){var D=E.pendingLanes;if(D===0)var z=0;else{var Z=E.suspendedLanes,rt=E.pingedLanes;z=(1<<31-Qt(42|c)+1)-1,z&=D&~(Z&~rt),z=z&201326741?z&201326741|1:z?z|2:0}z!==0&&(v=!0,nk(E,z))}else z=Je,z=Re(E,E===bn?z:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(z&3)===0||Ie(E,z)||(v=!0,nk(E,z));E=E.next}while(v);bR=!1}}function dX(){JU()}function JU(){Ev=cu=!1;var c=0;ag!==0&&(SX()&&(c=ag),ag=0);for(var h=se(),v=null,E=Cr;E!==null;){var D=E.next,z=tk(E,h);z===0?(E.next=null,v===null?Cr=D:v.next=D,D===null&&(qn=v)):(v=E,(c!==0||(z&3)!==0)&&(Ev=!0)),E=D}Db(c)}function tk(c,h){for(var v=c.suspendedLanes,E=c.pingedLanes,D=c.expirationTimes,z=c.pendingLanes&-62914561;0<z;){var Z=31-Qt(z),rt=1<<Z,vt=D[Z];vt===-1?((rt&v)===0||(rt&E)!==0)&&(D[Z]=en(rt,h)):vt<=h&&(c.expiredLanes|=rt),z&=~rt}if(h=bn,v=Je,v=Re(c,c===h?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),E=c.callbackNode,v===0||c===h&&(In===2||In===9)||c.cancelPendingCommit!==null)return E!==null&&E!==null&&at(E),c.callbackNode=null,c.callbackPriority=0;if((v&3)===0||Ie(c,v)){if(h=v&-v,h===c.callbackPriority)return h;switch(E!==null&&at(E),ze(v)){case 2:case 8:v=le;break;case 32:v=ct;break;case 268435456:v=lt;break;default:v=ct}return E=ek.bind(null,c),v=Ht(v,E),c.callbackPriority=h,c.callbackNode=v,h}return E!==null&&E!==null&&at(E),c.callbackPriority=2,c.callbackNode=null,2}function ek(c,h){if(Jr!==0&&Jr!==5)return c.callbackNode=null,c.callbackPriority=0,null;var v=c.callbackNode;if(uf()&&c.callbackNode!==v)return null;var E=Je;return E=Re(c,c===bn?E:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),E===0?null:(lp(c,E,h),tk(c,se()),c.callbackNode!=null&&c.callbackNode===v?ek.bind(null,c):null)}function nk(c,h){if(uf())return null;lp(c,h,!0)}function pX(){TX(function(){(bi&6)!==0?Ht(Ce,dX):JU()})}function xR(){return ag===0&&(ag=At()),ag}function ik(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:th(""+c)}function rk(c,h){var v=h.ownerDocument.createElement("input");return v.name=h.name,v.value=h.value,c.id&&v.setAttribute("form",c.id),h.parentNode.insertBefore(v,h),c=new FormData(c),v.parentNode.removeChild(v),c}function mX(c,h,v,E,D){if(h==="submit"&&v&&v.stateNode===D){var z=ik((D[qi]||null).action),Z=E.submitter;Z&&(h=(h=Z[qi]||null)?ik(h.formAction):Z.getAttribute("formAction"),h!==null&&(z=h,Z=null));var rt=new Pc("action","action",null,E,D);c.push({event:rt,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(ag!==0){var vt=Z?rk(D,Z):new FormData(D);wb(v,{pending:!0,data:vt,method:D.method,action:z},null,vt)}}else typeof z=="function"&&(rt.preventDefault(),vt=Z?rk(D,Z):new FormData(D),wb(v,{pending:!0,data:vt,method:D.method,action:z},z,vt))},currentTarget:D}]})}}for(var SR=0;SR<Pm.length;SR++){var ER=Pm[SR],gX=ER.toLowerCase(),yX=ER[0].toUpperCase()+ER.slice(1);cs(gX,"on"+yX)}cs(Qs,"onAnimationEnd"),cs(K_,"onAnimationIteration"),cs(Ea,"onAnimationStart"),cs("dblclick","onDoubleClick"),cs("focusin","onFocus"),cs("focusout","onBlur"),cs(fE,"onTransitionRun"),cs(zu,"onTransitionStart"),cs(Ud,"onTransitionCancel"),cs(Bu,"onTransitionEnd"),it("onMouseEnter",["mouseout","mouseover"]),it("onMouseLeave",["mouseout","mouseover"]),it("onPointerEnter",["pointerout","pointerover"]),it("onPointerLeave",["pointerout","pointerover"]),Zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vX=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pb));function sk(c,h){h=(h&4)!==0;for(var v=0;v<c.length;v++){var E=c[v],D=E.event;E=E.listeners;t:{var z=void 0;if(h)for(var Z=E.length-1;0<=Z;Z--){var rt=E[Z],vt=rt.instance,kt=rt.currentTarget;if(rt=rt.listener,vt!==z&&D.isPropagationStopped())break t;z=rt,D.currentTarget=kt;try{z(D)}catch(ie){hh(ie)}D.currentTarget=null,z=vt}else for(Z=0;Z<E.length;Z++){if(rt=E[Z],vt=rt.instance,kt=rt.currentTarget,rt=rt.listener,vt!==z&&D.isPropagationStopped())break t;z=rt,D.currentTarget=kt;try{z(D)}catch(ie){hh(ie)}D.currentTarget=null,z=vt}}}}function ti(c,h){var v=h[ks];v===void 0&&(v=h[ks]=new Set);var E=c+"__bubble";v.has(E)||(ak(h,c,2,!1),v.add(E))}function TR(c,h,v){var E=0;h&&(E|=4),ak(v,c,E,h)}var iT="_reactListening"+Math.random().toString(36).slice(2);function wR(c){if(!c[iT]){c[iT]=!0,Iu.forEach(function(v){v!=="selectionchange"&&(vX.has(v)||TR(v,!1,c),TR(v,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[iT]||(h[iT]=!0,TR("selectionchange",!1,h))}}function ak(c,h,v,E){switch(Ok(h)){case 2:var D=qX;break;case 8:D=$X;break;default:D=BR}v=D.bind(null,h,v,c),D=void 0,!_a||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(D=!0),E?D!==void 0?c.addEventListener(h,v,{capture:!0,passive:D}):c.addEventListener(h,v,!0):D!==void 0?c.addEventListener(h,v,{passive:D}):c.addEventListener(h,v,!1)}function AR(c,h,v,E,D){var z=E;if((h&1)===0&&(h&2)===0&&E!==null)t:for(;;){if(E===null)return;var Z=E.tag;if(Z===3||Z===4){var rt=E.stateNode.containerInfo;if(rt===D)break;if(Z===4)for(Z=E.return;Z!==null;){var vt=Z.tag;if((vt===3||vt===4)&&Z.stateNode.containerInfo===D)return;Z=Z.return}for(;rt!==null;){if(Z=va(rt),Z===null)return;if(vt=Z.tag,vt===5||vt===6||vt===26||vt===27){E=z=Z;continue t}rt=rt.parentNode}}E=E.return}xm(function(){var kt=z,ie=Wa(v),ce=[];t:{var Gt=Vy.get(c);if(Gt!==void 0){var $t=Pc,dn=c;switch(c){case"keypress":if(ba(v)===0)break t;case"keydown":case"keyup":$t=Uc;break;case"focusin":dn="focus",$t=eh;break;case"focusout":dn="blur",$t=eh;break;case"beforeblur":case"afterblur":$t=eh;break;case"click":if(v.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$t=Xa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$t=j_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$t=Od;break;case Qs:case K_:case Ea:$t=nh;break;case Bu:$t=Co;break;case"scroll":case"scrollend":$t=Sm;break;case"wheel":$t=Dd;break;case"copy":case"cut":case"paste":$t=ih;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$t=oh;break;case"toggle":case"beforetoggle":$t=ml}var on=(h&4)!==0,Gi=!on&&(c==="scroll"||c==="scrollend"),Dt=on?Gt!==null?Gt+"Capture":null:Gt;on=[];for(var Tt=kt,Ut;Tt!==null;){var oe=Tt;if(Ut=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Ut===null||Dt===null||(oe=Rc(Tt,Dt),oe!=null&&on.push(Nb(Tt,oe,Ut))),Gi)break;Tt=Tt.return}0<on.length&&(Gt=new $t(Gt,dn,null,v,ie),ce.push({event:Gt,listeners:on}))}}if((h&7)===0){t:{if(Gt=c==="mouseover"||c==="pointerover",$t=c==="mouseout"||c==="pointerout",Gt&&v!==$l&&(dn=v.relatedTarget||v.fromElement)&&(va(dn)||dn[fr]))break t;if(($t||Gt)&&(Gt=ie.window===ie?ie:(Gt=ie.ownerDocument)?Gt.defaultView||Gt.parentWindow:window,$t?(dn=v.relatedTarget||v.toElement,$t=kt,dn=dn?va(dn):null,dn!==null&&(Gi=a(dn),on=dn.tag,dn!==Gi||on!==5&&on!==27&&on!==6)&&(dn=null)):($t=null,dn=kt),$t!==dn)){if(on=Xa,oe="onMouseLeave",Dt="onMouseEnter",Tt="mouse",(c==="pointerout"||c==="pointerover")&&(on=oh,oe="onPointerLeave",Dt="onPointerEnter",Tt="pointer"),Gi=$t==null?Gt:$a($t),Ut=dn==null?Gt:$a(dn),Gt=new on(oe,Tt+"leave",$t,v,ie),Gt.target=Gi,Gt.relatedTarget=Ut,oe=null,va(ie)===kt&&(on=new on(Dt,Tt+"enter",dn,v,ie),on.target=Ut,on.relatedTarget=Gi,oe=on),Gi=oe,$t&&dn)e:{for(on=$t,Dt=dn,Tt=0,Ut=on;Ut;Ut=Tv(Ut))Tt++;for(Ut=0,oe=Dt;oe;oe=Tv(oe))Ut++;for(;0<Tt-Ut;)on=Tv(on),Tt--;for(;0<Ut-Tt;)Dt=Tv(Dt),Ut--;for(;Tt--;){if(on===Dt||Dt!==null&&on===Dt.alternate)break e;on=Tv(on),Dt=Tv(Dt)}on=null}else on=null;$t!==null&&ok(ce,Gt,$t,on,!1),dn!==null&&Gi!==null&&ok(ce,Gi,dn,on,!0)}}t:{if(Gt=kt?$a(kt):window,$t=Gt.nodeName&&Gt.nodeName.toLowerCase(),$t==="select"||$t==="input"&&Gt.type==="file")var Ve=Ly;else if(zr(Gt))if(Uy)Ve=kc;else{Ve=lE;var Zn=cR}else $t=Gt.nodeName,!$t||$t.toLowerCase()!=="input"||Gt.type!=="checkbox"&&Gt.type!=="radio"?kt&&wd(kt.elementType)&&(Ve=Ly):Ve=Om;if(Ve&&(Ve=Ve(c,kt))){Er(ce,Ve,v,ie);break t}Zn&&Zn(c,Gt,kt),c==="focusout"&&kt&&Gt.type==="number"&&kt.memoizedProps.value!=null&&hr(Gt,"number",Gt.value)}switch(Zn=kt?$a(kt):window,c){case"focusin":(zr(Zn)||Zn.contentEditable==="true")&&(Uu=Zn,zy=kt,Dm=null);break;case"focusout":Dm=zy=Uu=null;break;case"mousedown":By=!0;break;case"contextmenu":case"mouseup":case"dragend":By=!1,Y_(ce,v,ie);break;case"selectionchange":if(X_)break;case"keydown":case"keyup":Y_(ce,v,ie)}var Ze;if(Oo)t:{switch(c){case"compositionstart":var ln="onCompositionStart";break t;case"compositionend":ln="onCompositionEnd";break t;case"compositionupdate":ln="onCompositionUpdate";break t}ln=void 0}else Xn?Yt(c,v)&&(ln="onCompositionEnd"):c==="keydown"&&v.keyCode===229&&(ln="onCompositionStart");ln&&(Y&&v.locale!=="ko"&&(Xn||ln!=="onCompositionStart"?ln==="onCompositionEnd"&&Xn&&(Ze=Md()):(dl=ie,Ic="value"in dl?dl.value:dl.textContent,Xn=!0)),Zn=rT(kt,ln),0<Zn.length&&(ln=new sh(ln,c,null,v,ie),ce.push({event:ln,listeners:Zn}),Ze?ln.data=Ze:(Ze=Se(v),Ze!==null&&(ln.data=Ze)))),(Ze=j?ar(c,v):Yn(c,v))&&(ln=rT(kt,"onBeforeInput"),0<ln.length&&(Zn=new sh("onBeforeInput","beforeinput",null,v,ie),ce.push({event:Zn,listeners:ln}),Zn.data=Ze)),mX(ce,c,kt,v,ie)}sk(ce,h)})}function Nb(c,h,v){return{instance:c,listener:h,currentTarget:v}}function rT(c,h){for(var v=h+"Capture",E=[];c!==null;){var D=c,z=D.stateNode;if(D=D.tag,D!==5&&D!==26&&D!==27||z===null||(D=Rc(c,v),D!=null&&E.unshift(Nb(c,D,z)),D=Rc(c,h),D!=null&&E.push(Nb(c,D,z))),c.tag===3)return E;c=c.return}return[]}function Tv(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function ok(c,h,v,E,D){for(var z=h._reactName,Z=[];v!==null&&v!==E;){var rt=v,vt=rt.alternate,kt=rt.stateNode;if(rt=rt.tag,vt!==null&&vt===E)break;rt!==5&&rt!==26&&rt!==27||kt===null||(vt=kt,D?(kt=Rc(v,z),kt!=null&&Z.unshift(Nb(v,kt,vt))):D||(kt=Rc(v,z),kt!=null&&Z.push(Nb(v,kt,vt)))),v=v.return}Z.length!==0&&c.push({event:h,listeners:Z})}var _X=/\r\n?/g,bX=/\u0000|\uFFFD/g;function lk(c){return(typeof c=="string"?c:""+c).replace(_X,`
`).replace(bX,"")}function uk(c,h){return h=lk(h),lk(c)===h}function sT(){}function Hi(c,h,v,E,D,z){switch(v){case"children":typeof E=="string"?h==="body"||h==="textarea"&&E===""||xr(c,E):(typeof E=="number"||typeof E=="bigint")&&h!=="body"&&xr(c,""+E);break;case"className":be(c,"class",E);break;case"tabIndex":be(c,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":be(c,v,E);break;case"style":Cc(c,E,z);break;case"data":if(h!=="object"){be(c,"data",E);break}case"src":case"href":if(E===""&&(h!=="a"||v!=="href")){c.removeAttribute(v);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){c.removeAttribute(v);break}E=th(""+E),c.setAttribute(v,E);break;case"action":case"formAction":if(typeof E=="function"){c.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof z=="function"&&(v==="formAction"?(h!=="input"&&Hi(c,h,"name",D.name,D,null),Hi(c,h,"formEncType",D.formEncType,D,null),Hi(c,h,"formMethod",D.formMethod,D,null),Hi(c,h,"formTarget",D.formTarget,D,null)):(Hi(c,h,"encType",D.encType,D,null),Hi(c,h,"method",D.method,D,null),Hi(c,h,"target",D.target,D,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){c.removeAttribute(v);break}E=th(""+E),c.setAttribute(v,E);break;case"onClick":E!=null&&(c.onclick=sT);break;case"onScroll":E!=null&&ti("scroll",c);break;case"onScrollEnd":E!=null&&ti("scrollend",c);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(v=E.__html,v!=null){if(D.children!=null)throw Error(r(60));c.innerHTML=v}}break;case"multiple":c.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":c.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){c.removeAttribute("xlink:href");break}v=th(""+E),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?c.setAttribute(v,""+E):c.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?c.setAttribute(v,""):c.removeAttribute(v);break;case"capture":case"download":E===!0?c.setAttribute(v,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?c.setAttribute(v,E):c.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?c.setAttribute(v,E):c.removeAttribute(v);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?c.removeAttribute(v):c.setAttribute(v,E);break;case"popover":ti("beforetoggle",c),ti("toggle",c),he(c,"popover",E);break;case"xlinkActuate":xe(c,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":xe(c,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":xe(c,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":xe(c,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":xe(c,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":xe(c,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":xe(c,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":xe(c,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":xe(c,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":he(c,"is",E);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=bm.get(v)||v,he(c,v,E))}}function MR(c,h,v,E,D,z){switch(v){case"style":Cc(c,E,z);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(v=E.__html,v!=null){if(D.children!=null)throw Error(r(60));c.innerHTML=v}}break;case"children":typeof E=="string"?xr(c,E):(typeof E=="number"||typeof E=="bigint")&&xr(c,""+E);break;case"onScroll":E!=null&&ti("scroll",c);break;case"onScrollEnd":E!=null&&ti("scrollend",c);break;case"onClick":E!=null&&(c.onclick=sT);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ql.hasOwnProperty(v))t:{if(v[0]==="o"&&v[1]==="n"&&(D=v.endsWith("Capture"),h=v.slice(2,D?v.length-7:void 0),z=c[qi]||null,z=z!=null?z[v]:null,typeof z=="function"&&c.removeEventListener(h,z,D),typeof E=="function")){typeof z!="function"&&z!==null&&(v in c?c[v]=null:c.hasAttribute(v)&&c.removeAttribute(v)),c.addEventListener(h,E,D);break t}v in c?c[v]=E:E===!0?c.setAttribute(v,""):he(c,v,E)}}}function sa(c,h,v){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ti("error",c),ti("load",c);var E=!1,D=!1,z;for(z in v)if(v.hasOwnProperty(z)){var Z=v[z];if(Z!=null)switch(z){case"src":E=!0;break;case"srcSet":D=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:Hi(c,h,z,Z,v,null)}}D&&Hi(c,h,"srcSet",v.srcSet,v,null),E&&Hi(c,h,"src",v.src,v,null);return;case"input":ti("invalid",c);var rt=z=Z=D=null,vt=null,kt=null;for(E in v)if(v.hasOwnProperty(E)){var ie=v[E];if(ie!=null)switch(E){case"name":D=ie;break;case"type":Z=ie;break;case"checked":vt=ie;break;case"defaultChecked":kt=ie;break;case"value":z=ie;break;case"defaultValue":rt=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,h));break;default:Hi(c,h,E,ie,v,null)}}si(c,z,rt,vt,kt,Z,D,!1),$i(c);return;case"select":ti("invalid",c),E=Z=z=null;for(D in v)if(v.hasOwnProperty(D)&&(rt=v[D],rt!=null))switch(D){case"value":z=rt;break;case"defaultValue":Z=rt;break;case"multiple":E=rt;default:Hi(c,h,D,rt,v,null)}h=z,v=Z,c.multiple=!!E,h!=null?ir(c,!!E,h,!1):v!=null&&ir(c,!!E,v,!0);return;case"textarea":ti("invalid",c),z=D=E=null;for(Z in v)if(v.hasOwnProperty(Z)&&(rt=v[Z],rt!=null))switch(Z){case"value":E=rt;break;case"defaultValue":D=rt;break;case"children":z=rt;break;case"dangerouslySetInnerHTML":if(rt!=null)throw Error(r(91));break;default:Hi(c,h,Z,rt,v,null)}rr(c,E,D,z),$i(c);return;case"option":for(vt in v)if(v.hasOwnProperty(vt)&&(E=v[vt],E!=null))switch(vt){case"selected":c.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:Hi(c,h,vt,E,v,null)}return;case"dialog":ti("beforetoggle",c),ti("toggle",c),ti("cancel",c),ti("close",c);break;case"iframe":case"object":ti("load",c);break;case"video":case"audio":for(E=0;E<Pb.length;E++)ti(Pb[E],c);break;case"image":ti("error",c),ti("load",c);break;case"details":ti("toggle",c);break;case"embed":case"source":case"link":ti("error",c),ti("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(kt in v)if(v.hasOwnProperty(kt)&&(E=v[kt],E!=null))switch(kt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:Hi(c,h,kt,E,v,null)}return;default:if(wd(h)){for(ie in v)v.hasOwnProperty(ie)&&(E=v[ie],E!==void 0&&MR(c,h,ie,E,v,void 0));return}}for(rt in v)v.hasOwnProperty(rt)&&(E=v[rt],E!=null&&Hi(c,h,rt,E,v,null))}function xX(c,h,v,E){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var D=null,z=null,Z=null,rt=null,vt=null,kt=null,ie=null;for($t in v){var ce=v[$t];if(v.hasOwnProperty($t)&&ce!=null)switch($t){case"checked":break;case"value":break;case"defaultValue":vt=ce;default:E.hasOwnProperty($t)||Hi(c,h,$t,null,E,ce)}}for(var Gt in E){var $t=E[Gt];if(ce=v[Gt],E.hasOwnProperty(Gt)&&($t!=null||ce!=null))switch(Gt){case"type":z=$t;break;case"name":D=$t;break;case"checked":kt=$t;break;case"defaultChecked":ie=$t;break;case"value":Z=$t;break;case"defaultValue":rt=$t;break;case"children":case"dangerouslySetInnerHTML":if($t!=null)throw Error(r(137,h));break;default:$t!==ce&&Hi(c,h,Gt,$t,E,ce)}}kr(c,Z,rt,vt,kt,ie,z,D);return;case"select":$t=Z=rt=Gt=null;for(z in v)if(vt=v[z],v.hasOwnProperty(z)&&vt!=null)switch(z){case"value":break;case"multiple":$t=vt;default:E.hasOwnProperty(z)||Hi(c,h,z,null,E,vt)}for(D in E)if(z=E[D],vt=v[D],E.hasOwnProperty(D)&&(z!=null||vt!=null))switch(D){case"value":Gt=z;break;case"defaultValue":rt=z;break;case"multiple":Z=z;default:z!==vt&&Hi(c,h,D,z,E,vt)}h=rt,v=Z,E=$t,Gt!=null?ir(c,!!v,Gt,!1):!!E!=!!v&&(h!=null?ir(c,!!v,h,!0):ir(c,!!v,v?[]:"",!1));return;case"textarea":$t=Gt=null;for(rt in v)if(D=v[rt],v.hasOwnProperty(rt)&&D!=null&&!E.hasOwnProperty(rt))switch(rt){case"value":break;case"children":break;default:Hi(c,h,rt,null,E,D)}for(Z in E)if(D=E[Z],z=v[Z],E.hasOwnProperty(Z)&&(D!=null||z!=null))switch(Z){case"value":Gt=D;break;case"defaultValue":$t=D;break;case"children":break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:D!==z&&Hi(c,h,Z,D,E,z)}vn(c,Gt,$t);return;case"option":for(var dn in v)if(Gt=v[dn],v.hasOwnProperty(dn)&&Gt!=null&&!E.hasOwnProperty(dn))switch(dn){case"selected":c.selected=!1;break;default:Hi(c,h,dn,null,E,Gt)}for(vt in E)if(Gt=E[vt],$t=v[vt],E.hasOwnProperty(vt)&&Gt!==$t&&(Gt!=null||$t!=null))switch(vt){case"selected":c.selected=Gt&&typeof Gt!="function"&&typeof Gt!="symbol";break;default:Hi(c,h,vt,Gt,E,$t)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var on in v)Gt=v[on],v.hasOwnProperty(on)&&Gt!=null&&!E.hasOwnProperty(on)&&Hi(c,h,on,null,E,Gt);for(kt in E)if(Gt=E[kt],$t=v[kt],E.hasOwnProperty(kt)&&Gt!==$t&&(Gt!=null||$t!=null))switch(kt){case"children":case"dangerouslySetInnerHTML":if(Gt!=null)throw Error(r(137,h));break;default:Hi(c,h,kt,Gt,E,$t)}return;default:if(wd(h)){for(var Gi in v)Gt=v[Gi],v.hasOwnProperty(Gi)&&Gt!==void 0&&!E.hasOwnProperty(Gi)&&MR(c,h,Gi,void 0,E,Gt);for(ie in E)Gt=E[ie],$t=v[ie],!E.hasOwnProperty(ie)||Gt===$t||Gt===void 0&&$t===void 0||MR(c,h,ie,Gt,E,$t);return}}for(var Dt in v)Gt=v[Dt],v.hasOwnProperty(Dt)&&Gt!=null&&!E.hasOwnProperty(Dt)&&Hi(c,h,Dt,null,E,Gt);for(ce in E)Gt=E[ce],$t=v[ce],!E.hasOwnProperty(ce)||Gt===$t||Gt==null&&$t==null||Hi(c,h,ce,Gt,E,$t)}var CR=null,RR=null;function aT(c){return c.nodeType===9?c:c.ownerDocument}function ck(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fk(c,h){if(c===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&h==="foreignObject"?0:c}function OR(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var IR=null;function SX(){var c=window.event;return c&&c.type==="popstate"?c===IR?!1:(IR=c,!0):(IR=null,!1)}var hk=typeof setTimeout=="function"?setTimeout:void 0,EX=typeof clearTimeout=="function"?clearTimeout:void 0,dk=typeof Promise=="function"?Promise:void 0,TX=typeof queueMicrotask=="function"?queueMicrotask:typeof dk<"u"?function(c){return dk.resolve(null).then(c).catch(wX)}:hk;function wX(c){setTimeout(function(){throw c})}function cp(c){return c==="head"}function pk(c,h){var v=h,E=0,D=0;do{var z=v.nextSibling;if(c.removeChild(v),z&&z.nodeType===8)if(v=z.data,v==="/$"){if(0<E&&8>E){v=E;var Z=c.ownerDocument;if(v&1&&Lb(Z.documentElement),v&2&&Lb(Z.body),v&4)for(v=Z.head,Lb(v),Z=v.firstChild;Z;){var rt=Z.nextSibling,vt=Z.nodeName;Z[qa]||vt==="SCRIPT"||vt==="STYLE"||vt==="LINK"&&Z.rel.toLowerCase()==="stylesheet"||v.removeChild(Z),Z=rt}}if(D===0){c.removeChild(z),Gb(h);return}D--}else v==="$"||v==="$?"||v==="$!"?D++:E=v.charCodeAt(0)-48;else E=0;v=z}while(v);Gb(h)}function DR(c){var h=c.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var v=h;switch(h=h.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":DR(v),ri(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}c.removeChild(v)}}function AX(c,h,v,E){for(;c.nodeType===1;){var D=v;if(c.nodeName.toLowerCase()!==h.toLowerCase()){if(!E&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(E){if(!c[qa])switch(h){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(z=c.getAttribute("rel"),z==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(z!==D.rel||c.getAttribute("href")!==(D.href==null||D.href===""?null:D.href)||c.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin)||c.getAttribute("title")!==(D.title==null?null:D.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(z=c.getAttribute("src"),(z!==(D.src==null?null:D.src)||c.getAttribute("type")!==(D.type==null?null:D.type)||c.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin))&&z&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(h==="input"&&c.type==="hidden"){var z=D.name==null?null:""+D.name;if(D.type==="hidden"&&c.getAttribute("name")===z)return c}else return c;if(c=ec(c.nextSibling),c===null)break}return null}function MX(c,h,v){if(h==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!v||(c=ec(c.nextSibling),c===null))return null;return c}function PR(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function CX(c,h){var v=c.ownerDocument;if(c.data!=="$?"||v.readyState==="complete")h();else{var E=function(){h(),v.removeEventListener("DOMContentLoaded",E)};v.addEventListener("DOMContentLoaded",E),c._reactRetry=E}}function ec(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return c}var NR=null;function mk(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var v=c.data;if(v==="$"||v==="$!"||v==="$?"){if(h===0)return c;h--}else v==="/$"&&h++}c=c.previousSibling}return null}function gk(c,h,v){switch(h=aT(v),c){case"html":if(c=h.documentElement,!c)throw Error(r(452));return c;case"head":if(c=h.head,!c)throw Error(r(453));return c;case"body":if(c=h.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function Lb(c){for(var h=c.attributes;h.length;)c.removeAttributeNode(h[0]);ri(c)}var fu=new Map,yk=new Set;function oT(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var Mh=W.d;W.d={f:RX,r:OX,D:IX,C:DX,L:PX,m:NX,X:UX,S:LX,M:kX};function RX(){var c=Mh.f(),h=uu();return c||h}function OX(c){var h=Ks(c);h!==null&&h.tag===5&&h.type==="form"?FE(h):Mh.r(c)}var wv=typeof document>"u"?null:document;function vk(c,h,v){var E=wv;if(E&&typeof h=="string"&&h){var D=Jn(h);D='link[rel="'+c+'"][href="'+D+'"]',typeof v=="string"&&(D+='[crossorigin="'+v+'"]'),yk.has(D)||(yk.add(D),c={rel:c,crossOrigin:v,href:h},E.querySelector(D)===null&&(h=E.createElement("link"),sa(h,"link",c),nr(h),E.head.appendChild(h)))}}function IX(c){Mh.D(c),vk("dns-prefetch",c,null)}function DX(c,h){Mh.C(c,h),vk("preconnect",c,h)}function PX(c,h,v){Mh.L(c,h,v);var E=wv;if(E&&c&&h){var D='link[rel="preload"][as="'+Jn(h)+'"]';h==="image"&&v&&v.imageSrcSet?(D+='[imagesrcset="'+Jn(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(D+='[imagesizes="'+Jn(v.imageSizes)+'"]')):D+='[href="'+Jn(c)+'"]';var z=D;switch(h){case"style":z=Av(c);break;case"script":z=Mv(c)}fu.has(z)||(c=d({rel:"preload",href:h==="image"&&v&&v.imageSrcSet?void 0:c,as:h},v),fu.set(z,c),E.querySelector(D)!==null||h==="style"&&E.querySelector(Ub(z))||h==="script"&&E.querySelector(kb(z))||(h=E.createElement("link"),sa(h,"link",c),nr(h),E.head.appendChild(h)))}}function NX(c,h){Mh.m(c,h);var v=wv;if(v&&c){var E=h&&typeof h.as=="string"?h.as:"script",D='link[rel="modulepreload"][as="'+Jn(E)+'"][href="'+Jn(c)+'"]',z=D;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":z=Mv(c)}if(!fu.has(z)&&(c=d({rel:"modulepreload",href:c},h),fu.set(z,c),v.querySelector(D)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(kb(z)))return}E=v.createElement("link"),sa(E,"link",c),nr(E),v.head.appendChild(E)}}}function LX(c,h,v){Mh.S(c,h,v);var E=wv;if(E&&c){var D=ls(E).hoistableStyles,z=Av(c);h=h||"default";var Z=D.get(z);if(!Z){var rt={loading:0,preload:null};if(Z=E.querySelector(Ub(z)))rt.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":h},v),(v=fu.get(z))&&LR(c,v);var vt=Z=E.createElement("link");nr(vt),sa(vt,"link",c),vt._p=new Promise(function(kt,ie){vt.onload=kt,vt.onerror=ie}),vt.addEventListener("load",function(){rt.loading|=1}),vt.addEventListener("error",function(){rt.loading|=2}),rt.loading|=4,lT(Z,h,E)}Z={type:"stylesheet",instance:Z,count:1,state:rt},D.set(z,Z)}}}function UX(c,h){Mh.X(c,h);var v=wv;if(v&&c){var E=ls(v).hoistableScripts,D=Mv(c),z=E.get(D);z||(z=v.querySelector(kb(D)),z||(c=d({src:c,async:!0},h),(h=fu.get(D))&&UR(c,h),z=v.createElement("script"),nr(z),sa(z,"link",c),v.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},E.set(D,z))}}function kX(c,h){Mh.M(c,h);var v=wv;if(v&&c){var E=ls(v).hoistableScripts,D=Mv(c),z=E.get(D);z||(z=v.querySelector(kb(D)),z||(c=d({src:c,async:!0,type:"module"},h),(h=fu.get(D))&&UR(c,h),z=v.createElement("script"),nr(z),sa(z,"link",c),v.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},E.set(D,z))}}function _k(c,h,v,E){var D=(D=ft.current)?oT(D):null;if(!D)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(h=Av(v.href),v=ls(D).hoistableStyles,E=v.get(h),E||(E={type:"style",instance:null,count:0,state:null},v.set(h,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){c=Av(v.href);var z=ls(D).hoistableStyles,Z=z.get(c);if(Z||(D=D.ownerDocument||D,Z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},z.set(c,Z),(z=D.querySelector(Ub(c)))&&!z._p&&(Z.instance=z,Z.state.loading=5),fu.has(c)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},fu.set(c,v),z||zX(D,c,v,Z.state))),h&&E===null)throw Error(r(528,""));return Z}if(h&&E!==null)throw Error(r(529,""));return null;case"script":return h=v.async,v=v.src,typeof v=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Mv(v),v=ls(D).hoistableScripts,E=v.get(h),E||(E={type:"script",instance:null,count:0,state:null},v.set(h,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function Av(c){return'href="'+Jn(c)+'"'}function Ub(c){return'link[rel="stylesheet"]['+c+"]"}function bk(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function zX(c,h,v,E){c.querySelector('link[rel="preload"][as="style"]['+h+"]")?E.loading=1:(h=c.createElement("link"),E.preload=h,h.addEventListener("load",function(){return E.loading|=1}),h.addEventListener("error",function(){return E.loading|=2}),sa(h,"link",v),nr(h),c.head.appendChild(h))}function Mv(c){return'[src="'+Jn(c)+'"]'}function kb(c){return"script[async]"+c}function xk(c,h,v){if(h.count++,h.instance===null)switch(h.type){case"style":var E=c.querySelector('style[data-href~="'+Jn(v.href)+'"]');if(E)return h.instance=E,nr(E),E;var D=d({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return E=(c.ownerDocument||c).createElement("style"),nr(E),sa(E,"style",D),lT(E,v.precedence,c),h.instance=E;case"stylesheet":D=Av(v.href);var z=c.querySelector(Ub(D));if(z)return h.state.loading|=4,h.instance=z,nr(z),z;E=bk(v),(D=fu.get(D))&&LR(E,D),z=(c.ownerDocument||c).createElement("link"),nr(z);var Z=z;return Z._p=new Promise(function(rt,vt){Z.onload=rt,Z.onerror=vt}),sa(z,"link",E),h.state.loading|=4,lT(z,v.precedence,c),h.instance=z;case"script":return z=Mv(v.src),(D=c.querySelector(kb(z)))?(h.instance=D,nr(D),D):(E=v,(D=fu.get(z))&&(E=d({},v),UR(E,D)),c=c.ownerDocument||c,D=c.createElement("script"),nr(D),sa(D,"link",E),c.head.appendChild(D),h.instance=D);case"void":return null;default:throw Error(r(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(E=h.instance,h.state.loading|=4,lT(E,v.precedence,c));return h.instance}function lT(c,h,v){for(var E=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),D=E.length?E[E.length-1]:null,z=D,Z=0;Z<E.length;Z++){var rt=E[Z];if(rt.dataset.precedence===h)z=rt;else if(z!==D)break}z?z.parentNode.insertBefore(c,z.nextSibling):(h=v.nodeType===9?v.head:v,h.insertBefore(c,h.firstChild))}function LR(c,h){c.crossOrigin==null&&(c.crossOrigin=h.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=h.referrerPolicy),c.title==null&&(c.title=h.title)}function UR(c,h){c.crossOrigin==null&&(c.crossOrigin=h.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=h.referrerPolicy),c.integrity==null&&(c.integrity=h.integrity)}var uT=null;function Sk(c,h,v){if(uT===null){var E=new Map,D=uT=new Map;D.set(v,E)}else D=uT,E=D.get(v),E||(E=new Map,D.set(v,E));if(E.has(c))return E;for(E.set(c,null),v=v.getElementsByTagName(c),D=0;D<v.length;D++){var z=v[D];if(!(z[qa]||z[er]||c==="link"&&z.getAttribute("rel")==="stylesheet")&&z.namespaceURI!=="http://www.w3.org/2000/svg"){var Z=z.getAttribute(h)||"";Z=c+Z;var rt=E.get(Z);rt?rt.push(z):E.set(Z,[z])}}return E}function Ek(c,h,v){c=c.ownerDocument||c,c.head.insertBefore(v,h==="title"?c.querySelector("head > title"):null)}function BX(c,h,v){if(v===1||h.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return c=h.disabled,typeof h.precedence=="string"&&c==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function Tk(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var zb=null;function FX(){}function VX(c,h,v){if(zb===null)throw Error(r(475));var E=zb;if(h.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var D=Av(v.href),z=c.querySelector(Ub(D));if(z){c=z._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(E.count++,E=cT.bind(E),c.then(E,E)),h.state.loading|=4,h.instance=z,nr(z);return}z=c.ownerDocument||c,v=bk(v),(D=fu.get(D))&&LR(v,D),z=z.createElement("link"),nr(z);var Z=z;Z._p=new Promise(function(rt,vt){Z.onload=rt,Z.onerror=vt}),sa(z,"link",v),h.instance=z}E.stylesheets===null&&(E.stylesheets=new Map),E.stylesheets.set(h,c),(c=h.state.preload)&&(h.state.loading&3)===0&&(E.count++,h=cT.bind(E),c.addEventListener("load",h),c.addEventListener("error",h))}}function HX(){if(zb===null)throw Error(r(475));var c=zb;return c.stylesheets&&c.count===0&&kR(c,c.stylesheets),0<c.count?function(h){var v=setTimeout(function(){if(c.stylesheets&&kR(c,c.stylesheets),c.unsuspend){var E=c.unsuspend;c.unsuspend=null,E()}},6e4);return c.unsuspend=h,function(){c.unsuspend=null,clearTimeout(v)}}:null}function cT(){if(this.count--,this.count===0){if(this.stylesheets)kR(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var fT=null;function kR(c,h){c.stylesheets=null,c.unsuspend!==null&&(c.count++,fT=new Map,h.forEach(GX,c),fT=null,cT.call(c))}function GX(c,h){if(!(h.state.loading&4)){var v=fT.get(c);if(v)var E=v.get(null);else{v=new Map,fT.set(c,v);for(var D=c.querySelectorAll("link[data-precedence],style[data-precedence]"),z=0;z<D.length;z++){var Z=D[z];(Z.nodeName==="LINK"||Z.getAttribute("media")!=="not all")&&(v.set(Z.dataset.precedence,Z),E=Z)}E&&v.set(null,E)}D=h.instance,Z=D.getAttribute("data-precedence"),z=v.get(Z)||E,z===E&&v.set(null,D),v.set(Z,D),this.count++,E=cT.bind(this),D.addEventListener("load",E),D.addEventListener("error",E),z?z.parentNode.insertBefore(D,z.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(D,c.firstChild)),h.state.loading|=4}}var Bb={$$typeof:R,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function jX(c,h,v,E,D,z,Z,rt){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xt(0),this.hiddenUpdates=Xt(null),this.identifierPrefix=E,this.onUncaughtError=D,this.onCaughtError=z,this.onRecoverableError=Z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=rt,this.incompleteTransitions=new Map}function wk(c,h,v,E,D,z,Z,rt,vt,kt,ie,ce){return c=new jX(c,h,v,Z,rt,vt,kt,ce),h=1,z===!0&&(h|=24),z=Ta(3,null,null,h),c.current=z,z.stateNode=c,h=Xy(),h.refCount++,c.pooledCache=h,h.refCount++,z.memoizedState={element:E,isDehydrated:v,cache:h},ub(z),c}function Ak(c){return c?(c=Fc,c):Fc}function Mk(c,h,v,E,D,z){D=Ak(D),E.context===null?E.context=D:E.pendingContext=D,E=Ql(h),E.payload={element:v},z=z===void 0?null:z,z!==null&&(E.callback=z),v=qu(c,E,h),v!==null&&(ra(v,c,h),uh(v,c,h))}function Ck(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<h?v:h}}function zR(c,h){Ck(c,h),(c=c.alternate)&&Ck(c,h)}function Rk(c){if(c.tag===13){var h=Fu(c,67108864);h!==null&&ra(h,c,67108864),zR(c,67108864)}}var hT=!0;function qX(c,h,v,E){var D=q.T;q.T=null;var z=W.p;try{W.p=2,BR(c,h,v,E)}finally{W.p=z,q.T=D}}function $X(c,h,v,E){var D=q.T;q.T=null;var z=W.p;try{W.p=8,BR(c,h,v,E)}finally{W.p=z,q.T=D}}function BR(c,h,v,E){if(hT){var D=FR(E);if(D===null)AR(c,h,E,dT,v),Ik(c,E);else if(XX(D,c,h,v,E))E.stopPropagation();else if(Ik(c,E),h&4&&-1<WX.indexOf(c)){for(;D!==null;){var z=Ks(D);if(z!==null)switch(z.tag){case 3:if(z=z.stateNode,z.current.memoizedState.isDehydrated){var Z=Zt(z.pendingLanes);if(Z!==0){var rt=z;for(rt.pendingLanes|=2,rt.entangledLanes|=2;Z;){var vt=1<<31-Qt(Z);rt.entanglements[1]|=vt,Z&=~vt}ff(z),(bi&6)===0&&(Hs=se()+500,Db(0))}}break;case 13:rt=Fu(z,2),rt!==null&&ra(rt,z,2),uu(),zR(z,2)}if(z=FR(E),z===null&&AR(c,h,E,dT,v),z===D)break;D=z}D!==null&&E.stopPropagation()}else AR(c,h,E,null,v)}}function FR(c){return c=Wa(c),VR(c)}var dT=null;function VR(c){if(dT=null,c=va(c),c!==null){var h=a(c);if(h===null)c=null;else{var v=h.tag;if(v===13){if(c=o(h),c!==null)return c;c=null}else if(v===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null)}}return dT=c,null}function Ok(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ae()){case Ce:return 2;case le:return 8;case ct:case G:return 32;case lt:return 268435456;default:return 32}default:return 32}}var HR=!1,fp=null,hp=null,dp=null,Fb=new Map,Vb=new Map,pp=[],WX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ik(c,h){switch(c){case"focusin":case"focusout":fp=null;break;case"dragenter":case"dragleave":hp=null;break;case"mouseover":case"mouseout":dp=null;break;case"pointerover":case"pointerout":Fb.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vb.delete(h.pointerId)}}function Hb(c,h,v,E,D,z){return c===null||c.nativeEvent!==z?(c={blockedOn:h,domEventName:v,eventSystemFlags:E,nativeEvent:z,targetContainers:[D]},h!==null&&(h=Ks(h),h!==null&&Rk(h)),c):(c.eventSystemFlags|=E,h=c.targetContainers,D!==null&&h.indexOf(D)===-1&&h.push(D),c)}function XX(c,h,v,E,D){switch(h){case"focusin":return fp=Hb(fp,c,h,v,E,D),!0;case"dragenter":return hp=Hb(hp,c,h,v,E,D),!0;case"mouseover":return dp=Hb(dp,c,h,v,E,D),!0;case"pointerover":var z=D.pointerId;return Fb.set(z,Hb(Fb.get(z)||null,c,h,v,E,D)),!0;case"gotpointercapture":return z=D.pointerId,Vb.set(z,Hb(Vb.get(z)||null,c,h,v,E,D)),!0}return!1}function Dk(c){var h=va(c.target);if(h!==null){var v=a(h);if(v!==null){if(h=v.tag,h===13){if(h=o(v),h!==null){c.blockedOn=h,Lr(c.priority,function(){if(v.tag===13){var E=gr();E=Wn(E);var D=Fu(v,E);D!==null&&ra(D,v,E),zR(v,E)}});return}}else if(h===3&&v.stateNode.current.memoizedState.isDehydrated){c.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}c.blockedOn=null}function pT(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var v=FR(c.nativeEvent);if(v===null){v=c.nativeEvent;var E=new v.constructor(v.type,v);$l=E,v.target.dispatchEvent(E),$l=null}else return h=Ks(v),h!==null&&Rk(h),c.blockedOn=v,!1;h.shift()}return!0}function Pk(c,h,v){pT(c)&&v.delete(h)}function YX(){HR=!1,fp!==null&&pT(fp)&&(fp=null),hp!==null&&pT(hp)&&(hp=null),dp!==null&&pT(dp)&&(dp=null),Fb.forEach(Pk),Vb.forEach(Pk)}function mT(c,h){c.blockedOn===h&&(c.blockedOn=null,HR||(HR=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,YX)))}var gT=null;function Nk(c){gT!==c&&(gT=c,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){gT===c&&(gT=null);for(var h=0;h<c.length;h+=3){var v=c[h],E=c[h+1],D=c[h+2];if(typeof E!="function"){if(VR(E||v)===null)continue;break}var z=Ks(v);z!==null&&(c.splice(h,3),h-=3,wb(z,{pending:!0,data:D,method:v.method,action:E},E,D))}}))}function Gb(c){function h(vt){return mT(vt,c)}fp!==null&&mT(fp,c),hp!==null&&mT(hp,c),dp!==null&&mT(dp,c),Fb.forEach(h),Vb.forEach(h);for(var v=0;v<pp.length;v++){var E=pp[v];E.blockedOn===c&&(E.blockedOn=null)}for(;0<pp.length&&(v=pp[0],v.blockedOn===null);)Dk(v),v.blockedOn===null&&pp.shift();if(v=(c.ownerDocument||c).$$reactFormReplay,v!=null)for(E=0;E<v.length;E+=3){var D=v[E],z=v[E+1],Z=D[qi]||null;if(typeof z=="function")Z||Nk(v);else if(Z){var rt=null;if(z&&z.hasAttribute("formAction")){if(D=z,Z=z[qi]||null)rt=Z.formAction;else if(VR(D)!==null)continue}else rt=Z.action;typeof rt=="function"?v[E+1]=rt:(v.splice(E,3),E-=3),Nk(v)}}}function GR(c){this._internalRoot=c}yT.prototype.render=GR.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(r(409));var v=h.current,E=gr();Mk(v,E,c,h,null,null)},yT.prototype.unmount=GR.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;Mk(c.current,2,null,c,null,null),uu(),h[fr]=null}};function yT(c){this._internalRoot=c}yT.prototype.unstable_scheduleHydration=function(c){if(c){var h=Qe();c={blockedOn:null,target:c,priority:h};for(var v=0;v<pp.length&&h!==0&&h<pp[v].priority;v++);pp.splice(v,0,c),v===0&&Dk(c)}};var Lk=e.version;if(Lk!=="19.1.0")throw Error(r(527,Lk,"19.1.0"));W.findDOMNode=function(c){var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=u(h),c=c!==null?f(c):null,c=c===null?null:c.stateNode,c};var KX={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vT=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vT.isDisabled&&vT.supportsFiber)try{bt=vT.inject(KX),Mt=vT}catch{}}return $b.createRoot=function(c,h){if(!s(c))throw Error(r(299));var v=!1,E="",D=Jm,z=fv,Z=QE,rt=null;return h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(E=h.identifierPrefix),h.onUncaughtError!==void 0&&(D=h.onUncaughtError),h.onCaughtError!==void 0&&(z=h.onCaughtError),h.onRecoverableError!==void 0&&(Z=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(rt=h.unstable_transitionCallbacks)),h=wk(c,1,!1,null,null,v,E,D,z,Z,rt,null),c[fr]=h.current,wR(c),new GR(h)},$b.hydrateRoot=function(c,h,v){if(!s(c))throw Error(r(299));var E=!1,D="",z=Jm,Z=fv,rt=QE,vt=null,kt=null;return v!=null&&(v.unstable_strictMode===!0&&(E=!0),v.identifierPrefix!==void 0&&(D=v.identifierPrefix),v.onUncaughtError!==void 0&&(z=v.onUncaughtError),v.onCaughtError!==void 0&&(Z=v.onCaughtError),v.onRecoverableError!==void 0&&(rt=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(vt=v.unstable_transitionCallbacks),v.formState!==void 0&&(kt=v.formState)),h=wk(c,1,!0,h,v??null,E,D,z,Z,rt,vt,kt),h.context=Ak(null),v=h.current,E=gr(),E=Wn(E),D=Ql(E),D.callback=null,qu(v,D,E),v=E,h.current.lanes=v,re(h,v),ff(h),c[fr]=h.current,wR(c),new yT(h)},$b.version="19.1.0",$b}var qk;function lY(){if(qk)return qR.exports;qk=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),qR.exports=oY(),qR.exports}var uY=lY(),tt=w_();const pn=fm(tt),_D=tY({__proto__:null,default:pn},[tt]);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const TS="174",cY={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},fY={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},lH=0,bD=1,uH=2,hY=3,cH=0,wC=1,Zx=2,oc=3,ud=0,_o=1,Ef=2,rd=0,Wg=1,IA=2,xD=3,SD=4,fH=5,Dp=100,hH=101,dH=102,pH=103,mH=104,gH=200,yH=201,vH=202,_H=203,DA=204,PA=205,bH=206,xH=207,SH=208,EH=209,TH=210,wH=211,AH=212,MH=213,CH=214,NA=0,LA=1,UA=2,ay=3,kA=4,zA=5,BA=6,FA=7,wS=0,RH=1,OH=2,Of=0,IH=1,DH=2,PH=3,LN=4,NH=5,LH=6,UH=7,ED="attached",kH="detached",AC=300,cd=301,Jp=302,M1=303,C1=304,A_=306,R1=1e3,Su=1001,O1=1002,fa=1003,UN=1004,dY=1004,T0=1005,pY=1005,Is=1006,Qx=1007,mY=1007,Af=1008,gY=1008,bc=1009,kN=1010,zN=1011,$0=1012,MC=1013,fd=1014,Jo=1015,M_=1016,CC=1017,RC=1018,oy=1020,BN=35902,FN=1021,VN=1022,Ba=1023,HN=1024,GN=1025,Xg=1026,ly=1027,OC=1028,AS=1029,jN=1030,IC=1031,yY=1032,DC=1033,Jx=33776,t1=33777,e1=33778,n1=33779,VA=35840,HA=35841,GA=35842,jA=35843,qA=36196,$A=37492,WA=37496,XA=37808,YA=37809,KA=37810,ZA=37811,QA=37812,JA=37813,tM=37814,eM=37815,nM=37816,iM=37817,rM=37818,sM=37819,aM=37820,oM=37821,i1=36492,lM=36494,uM=36495,qN=36283,cM=36284,fM=36285,hM=36286,zH=2200,BH=2201,FH=2202,I1=2300,dM=2301,tA=2302,kg=2400,zg=2401,D1=2402,PC=2500,$N=2501,vY=0,_Y=1,bY=2,VH=3200,HH=3201,xY=3202,SY=3203,hm=0,GH=1,Wh="",la="srgb",tm="srgb-linear",P1="linear",ki="srgb",EY=0,Cg=7680,TY=7681,wY=7682,AY=7683,MY=34055,CY=34056,RY=5386,OY=512,IY=513,DY=514,PY=515,NY=516,LY=517,UY=518,TD=519,jH=512,qH=513,$H=514,WN=515,WH=516,XH=517,YH=518,KH=519,N1=35044,kY=35048,zY=35040,BY=35045,FY=35049,VY=35041,HY=35046,GY=35050,jY=35042,qY="100",wD="300 es",pc=2e3,L1=2001,$Y={COMPUTE:"compute",RENDER:"render"};let Xf=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){const r=this._listeners;if(r===void 0)return;const s=r[e];if(s!==void 0){const a=s.indexOf(n);a!==-1&&s.splice(a,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const r=n[e.type];if(r!==void 0){e.target=this;const s=r.slice(0);for(let a=0,o=s.length;a<o;a++)s[a].call(this,e);e.target=null}}};const Ra=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let $k=1234567;const Yg=Math.PI/180,W0=180/Math.PI;function Ul(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Ra[i&255]+Ra[i>>8&255]+Ra[i>>16&255]+Ra[i>>24&255]+"-"+Ra[e&255]+Ra[e>>8&255]+"-"+Ra[e>>16&15|64]+Ra[e>>24&255]+"-"+Ra[n&63|128]+Ra[n>>8&255]+"-"+Ra[n>>16&255]+Ra[n>>24&255]+Ra[r&255]+Ra[r>>8&255]+Ra[r>>16&255]+Ra[r>>24&255]).toLowerCase()}function Cn(i,e,n){return Math.max(e,Math.min(n,i))}function XN(i,e){return(i%e+e)%e}function WY(i,e,n,r,s){return r+(i-e)*(s-r)/(n-e)}function XY(i,e,n){return i!==e?(n-i)/(e-i):0}function r1(i,e,n){return(1-n)*i+n*e}function YY(i,e,n,r){return r1(i,e,1-Math.exp(-n*r))}function KY(i,e=1){return e-Math.abs(XN(i,e*2)-e)}function ZY(i,e,n){return i<=e?0:i>=n?1:(i=(i-e)/(n-e),i*i*(3-2*i))}function QY(i,e,n){return i<=e?0:i>=n?1:(i=(i-e)/(n-e),i*i*i*(i*(i*6-15)+10))}function JY(i,e){return i+Math.floor(Math.random()*(e-i+1))}function tK(i,e){return i+Math.random()*(e-i)}function eK(i){return i*(.5-Math.random())}function nK(i){i!==void 0&&($k=i);let e=$k+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function iK(i){return i*Yg}function rK(i){return i*W0}function sK(i){return(i&i-1)===0&&i!==0}function aK(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function oK(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function lK(i,e,n,r,s){const a=Math.cos,o=Math.sin,l=a(n/2),u=o(n/2),f=a((e+r)/2),d=o((e+r)/2),m=a((e-r)/2),y=o((e-r)/2),_=a((r-e)/2),x=o((r-e)/2);switch(s){case"XYX":i.set(l*d,u*m,u*y,l*f);break;case"YZY":i.set(u*y,l*d,u*m,l*f);break;case"ZXZ":i.set(u*m,u*y,l*d,l*f);break;case"XZX":i.set(l*d,u*x,u*_,l*f);break;case"YXY":i.set(u*_,l*d,u*x,l*f);break;case"ZYZ":i.set(u*x,u*_,l*d,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function mo(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Ln(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const ZH={DEG2RAD:Yg,RAD2DEG:W0,generateUUID:Ul,clamp:Cn,euclideanModulo:XN,mapLinear:WY,inverseLerp:XY,lerp:r1,damp:YY,pingpong:KY,smoothstep:ZY,smootherstep:QY,randInt:JY,randFloat:tK,randFloatSpread:eK,seededRandom:nK,degToRad:iK,radToDeg:rK,isPowerOfTwo:sK,ceilPowerOfTwo:aK,floorPowerOfTwo:oK,setQuaternionFromProperEuler:lK,normalize:Ln,denormalize:mo};class de{constructor(e=0,n=0){de.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6],this.y=s[1]*n+s[4]*r+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Cn(this.x,e.x,n.x),this.y=Cn(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=Cn(this.x,e,n),this.y=Cn(this.y,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Cn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Cn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),s=Math.sin(n),a=this.x-e.x,o=this.y-e.y;return this.x=a*r-o*s+e.x,this.y=a*s+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Dn{constructor(e,n,r,s,a,o,l,u,f){Dn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,s,a,o,l,u,f)}set(e,n,r,s,a,o,l,u,f){const d=this.elements;return d[0]=e,d[1]=s,d[2]=l,d[3]=n,d[4]=a,d[5]=u,d[6]=r,d[7]=o,d[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,s=n.elements,a=this.elements,o=r[0],l=r[3],u=r[6],f=r[1],d=r[4],m=r[7],y=r[2],_=r[5],x=r[8],S=s[0],T=s[3],b=s[6],M=s[1],R=s[4],A=s[7],I=s[2],k=s[5],N=s[8];return a[0]=o*S+l*M+u*I,a[3]=o*T+l*R+u*k,a[6]=o*b+l*A+u*N,a[1]=f*S+d*M+m*I,a[4]=f*T+d*R+m*k,a[7]=f*b+d*A+m*N,a[2]=y*S+_*M+x*I,a[5]=y*T+_*R+x*k,a[8]=y*b+_*A+x*N,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],s=e[2],a=e[3],o=e[4],l=e[5],u=e[6],f=e[7],d=e[8];return n*o*d-n*l*f-r*a*d+r*l*u+s*a*f-s*o*u}invert(){const e=this.elements,n=e[0],r=e[1],s=e[2],a=e[3],o=e[4],l=e[5],u=e[6],f=e[7],d=e[8],m=d*o-l*f,y=l*u-d*a,_=f*a-o*u,x=n*m+r*y+s*_;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/x;return e[0]=m*S,e[1]=(s*f-d*r)*S,e[2]=(l*r-s*o)*S,e[3]=y*S,e[4]=(d*n-s*u)*S,e[5]=(s*a-l*n)*S,e[6]=_*S,e[7]=(r*u-f*n)*S,e[8]=(o*n-r*a)*S,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,s,a,o,l){const u=Math.cos(a),f=Math.sin(a);return this.set(r*u,r*f,-r*(u*o+f*l)+o+e,-s*f,s*u,-s*(-f*o+u*l)+l+n,0,0,1),this}scale(e,n){return this.premultiply(KR.makeScale(e,n)),this}rotate(e){return this.premultiply(KR.makeRotation(-e)),this}translate(e,n){return this.premultiply(KR.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let s=0;s<9;s++)if(n[s]!==r[s])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const KR=new Dn;function QH(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const uK={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function w0(i,e){return new uK[i](e)}function U1(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function JH(){const i=U1("canvas");return i.style.display="block",i}const Wk={};function Rg(i){i in Wk||(Wk[i]=!0,console.warn(i))}function cK(i,e,n){return new Promise(function(r,s){function a(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(a,n);break;default:r()}}setTimeout(a,n)})}function fK(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function hK(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const Xk=new Dn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Yk=new Dn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function dK(){const i={enabled:!0,workingColorSpace:tm,spaces:{},convert:function(s,a,o){return this.enabled===!1||a===o||!a||!o||(this.spaces[a].transfer===ki&&(s.r=sd(s.r),s.g=sd(s.g),s.b=sd(s.b)),this.spaces[a].primaries!==this.spaces[o].primaries&&(s.applyMatrix3(this.spaces[a].toXYZ),s.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===ki&&(s.r=D0(s.r),s.g=D0(s.g),s.b=D0(s.b))),s},fromWorkingColorSpace:function(s,a){return this.convert(s,this.workingColorSpace,a)},toWorkingColorSpace:function(s,a){return this.convert(s,a,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Wh?P1:this.spaces[s].transfer},getLuminanceCoefficients:function(s,a=this.workingColorSpace){return s.fromArray(this.spaces[a].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,a,o){return s.copy(this.spaces[a].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return i.define({[tm]:{primaries:e,whitePoint:r,transfer:P1,toXYZ:Xk,fromXYZ:Yk,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:la},outputColorSpaceConfig:{drawingBufferColorSpace:la}},[la]:{primaries:e,whitePoint:r,transfer:ki,toXYZ:Xk,fromXYZ:Yk,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:la}}}),i}const li=dK();function sd(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function D0(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let Cv;class t8{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Cv===void 0&&(Cv=U1("canvas")),Cv.width=e.width,Cv.height=e.height;const r=Cv.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Cv}return n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=U1("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const s=r.getImageData(0,0,e.width,e.height),a=s.data;for(let o=0;o<a.length;o++)a[o]=sd(a[o]/255)*255;return r.putImageData(s,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(sd(n[r]/255)*255):n[r]=sd(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let pK=0;class zp{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:pK++}),this.uuid=Ul(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},s=this.data;if(s!==null){let a;if(Array.isArray(s)){a=[];for(let o=0,l=s.length;o<l;o++)s[o].isDataTexture?a.push(ZR(s[o].image)):a.push(ZR(s[o]))}else a=ZR(s);r.url=a}return n||(e.images[this.uuid]=r),r}}function ZR(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?t8.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let mK=0;class Xr extends Xf{constructor(e=Xr.DEFAULT_IMAGE,n=Xr.DEFAULT_MAPPING,r=Su,s=Su,a=Is,o=Af,l=Ba,u=bc,f=Xr.DEFAULT_ANISOTROPY,d=Wh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:mK++}),this.uuid=Ul(),this.name="",this.source=new zp(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=a,this.minFilter=o,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=u,this.offset=new de(0,0),this.repeat=new de(1,1),this.center=new de(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Dn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==AC)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case R1:e.x=e.x-Math.floor(e.x);break;case Su:e.x=e.x<0?0:1;break;case O1:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case R1:e.y=e.y-Math.floor(e.y);break;case Su:e.y=e.y<0?0:1;break;case O1:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Xr.DEFAULT_IMAGE=null;Xr.DEFAULT_MAPPING=AC;Xr.DEFAULT_ANISOTROPY=1;class di{constructor(e=0,n=0,r=0,s=1){di.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,s){return this.x=e,this.y=n,this.z=r,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,s=this.z,a=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*s+o[12]*a,this.y=o[1]*n+o[5]*r+o[9]*s+o[13]*a,this.z=o[2]*n+o[6]*r+o[10]*s+o[14]*a,this.w=o[3]*n+o[7]*r+o[11]*s+o[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,s,a;const u=e.elements,f=u[0],d=u[4],m=u[8],y=u[1],_=u[5],x=u[9],S=u[2],T=u[6],b=u[10];if(Math.abs(d-y)<.01&&Math.abs(m-S)<.01&&Math.abs(x-T)<.01){if(Math.abs(d+y)<.1&&Math.abs(m+S)<.1&&Math.abs(x+T)<.1&&Math.abs(f+_+b-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const R=(f+1)/2,A=(_+1)/2,I=(b+1)/2,k=(d+y)/4,N=(m+S)/4,L=(x+T)/4;return R>A&&R>I?R<.01?(r=0,s=.707106781,a=.707106781):(r=Math.sqrt(R),s=k/r,a=N/r):A>I?A<.01?(r=.707106781,s=0,a=.707106781):(s=Math.sqrt(A),r=k/s,a=L/s):I<.01?(r=.707106781,s=.707106781,a=0):(a=Math.sqrt(I),r=N/a,s=L/a),this.set(r,s,a,n),this}let M=Math.sqrt((T-x)*(T-x)+(m-S)*(m-S)+(y-d)*(y-d));return Math.abs(M)<.001&&(M=1),this.x=(T-x)/M,this.y=(m-S)/M,this.z=(y-d)/M,this.w=Math.acos((f+_+b-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Cn(this.x,e.x,n.x),this.y=Cn(this.y,e.y,n.y),this.z=Cn(this.z,e.z,n.z),this.w=Cn(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=Cn(this.x,e,n),this.y=Cn(this.y,e,n),this.z=Cn(this.z,e,n),this.w=Cn(this.w,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Cn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class NC extends Xf{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new di(0,0,e,n),this.scissorTest=!1,this.viewport=new di(0,0,e,n);const s={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Is,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const a=new Xr(s,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);a.flipY=!1,a.generateMipmaps=r.generateMipmaps,a.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let l=0;l<o;l++)this.textures[l]=a.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let s=0,a=this.textures.length;s<a;s++)this.textures[s].image.width=e,this.textures[s].image.height=n,this.textures[s].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const s=Object.assign({},e.textures[n].image);this.textures[n].source=new zp(s)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Vf extends NC{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class MS extends Xr{constructor(e=null,n=1,r=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:s},this.magFilter=fa,this.minFilter=fa,this.wrapR=Su,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class gK extends Vf{constructor(e=1,n=1,r=1,s={}){super(e,n,s),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new MS(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class LC extends Xr{constructor(e=null,n=1,r=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:s},this.magFilter=fa,this.minFilter=fa,this.wrapR=Su,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class yK extends Vf{constructor(e=1,n=1,r=1,s={}){super(e,n,s),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new LC(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class bo{constructor(e=0,n=0,r=0,s=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=s}static slerpFlat(e,n,r,s,a,o,l){let u=r[s+0],f=r[s+1],d=r[s+2],m=r[s+3];const y=a[o+0],_=a[o+1],x=a[o+2],S=a[o+3];if(l===0){e[n+0]=u,e[n+1]=f,e[n+2]=d,e[n+3]=m;return}if(l===1){e[n+0]=y,e[n+1]=_,e[n+2]=x,e[n+3]=S;return}if(m!==S||u!==y||f!==_||d!==x){let T=1-l;const b=u*y+f*_+d*x+m*S,M=b>=0?1:-1,R=1-b*b;if(R>Number.EPSILON){const I=Math.sqrt(R),k=Math.atan2(I,b*M);T=Math.sin(T*k)/I,l=Math.sin(l*k)/I}const A=l*M;if(u=u*T+y*A,f=f*T+_*A,d=d*T+x*A,m=m*T+S*A,T===1-l){const I=1/Math.sqrt(u*u+f*f+d*d+m*m);u*=I,f*=I,d*=I,m*=I}}e[n]=u,e[n+1]=f,e[n+2]=d,e[n+3]=m}static multiplyQuaternionsFlat(e,n,r,s,a,o){const l=r[s],u=r[s+1],f=r[s+2],d=r[s+3],m=a[o],y=a[o+1],_=a[o+2],x=a[o+3];return e[n]=l*x+d*m+u*_-f*y,e[n+1]=u*x+d*y+f*m-l*_,e[n+2]=f*x+d*_+l*y-u*m,e[n+3]=d*x-l*m-u*y-f*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,s){return this._x=e,this._y=n,this._z=r,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,s=e._y,a=e._z,o=e._order,l=Math.cos,u=Math.sin,f=l(r/2),d=l(s/2),m=l(a/2),y=u(r/2),_=u(s/2),x=u(a/2);switch(o){case"XYZ":this._x=y*d*m+f*_*x,this._y=f*_*m-y*d*x,this._z=f*d*x+y*_*m,this._w=f*d*m-y*_*x;break;case"YXZ":this._x=y*d*m+f*_*x,this._y=f*_*m-y*d*x,this._z=f*d*x-y*_*m,this._w=f*d*m+y*_*x;break;case"ZXY":this._x=y*d*m-f*_*x,this._y=f*_*m+y*d*x,this._z=f*d*x+y*_*m,this._w=f*d*m-y*_*x;break;case"ZYX":this._x=y*d*m-f*_*x,this._y=f*_*m+y*d*x,this._z=f*d*x-y*_*m,this._w=f*d*m+y*_*x;break;case"YZX":this._x=y*d*m+f*_*x,this._y=f*_*m+y*d*x,this._z=f*d*x-y*_*m,this._w=f*d*m-y*_*x;break;case"XZY":this._x=y*d*m-f*_*x,this._y=f*_*m-y*d*x,this._z=f*d*x+y*_*m,this._w=f*d*m+y*_*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,s=Math.sin(r);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],s=n[4],a=n[8],o=n[1],l=n[5],u=n[9],f=n[2],d=n[6],m=n[10],y=r+l+m;if(y>0){const _=.5/Math.sqrt(y+1);this._w=.25/_,this._x=(d-u)*_,this._y=(a-f)*_,this._z=(o-s)*_}else if(r>l&&r>m){const _=2*Math.sqrt(1+r-l-m);this._w=(d-u)/_,this._x=.25*_,this._y=(s+o)/_,this._z=(a+f)/_}else if(l>m){const _=2*Math.sqrt(1+l-r-m);this._w=(a-f)/_,this._x=(s+o)/_,this._y=.25*_,this._z=(u+d)/_}else{const _=2*Math.sqrt(1+m-r-l);this._w=(o-s)/_,this._x=(a+f)/_,this._y=(u+d)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Cn(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const s=Math.min(1,n/r);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,s=e._y,a=e._z,o=e._w,l=n._x,u=n._y,f=n._z,d=n._w;return this._x=r*d+o*l+s*f-a*u,this._y=s*d+o*u+a*l-r*f,this._z=a*d+o*f+r*u-s*l,this._w=o*d-r*l-s*u-a*f,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,s=this._y,a=this._z,o=this._w;let l=o*e._w+r*e._x+s*e._y+a*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=r,this._y=s,this._z=a,this;const u=1-l*l;if(u<=Number.EPSILON){const _=1-n;return this._w=_*o+n*this._w,this._x=_*r+n*this._x,this._y=_*s+n*this._y,this._z=_*a+n*this._z,this.normalize(),this}const f=Math.sqrt(u),d=Math.atan2(f,l),m=Math.sin((1-n)*d)/f,y=Math.sin(n*d)/f;return this._w=o*m+this._w*y,this._x=r*m+this._x*y,this._y=s*m+this._y*y,this._z=a*m+this._z*y,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),s=Math.sqrt(1-r),a=Math.sqrt(r);return this.set(s*Math.sin(e),s*Math.cos(e),a*Math.sin(n),a*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class pt{constructor(e=0,n=0,r=0){pt.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(Kk.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(Kk.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,s=this.z,a=e.elements;return this.x=a[0]*n+a[3]*r+a[6]*s,this.y=a[1]*n+a[4]*r+a[7]*s,this.z=a[2]*n+a[5]*r+a[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,s=this.z,a=e.elements,o=1/(a[3]*n+a[7]*r+a[11]*s+a[15]);return this.x=(a[0]*n+a[4]*r+a[8]*s+a[12])*o,this.y=(a[1]*n+a[5]*r+a[9]*s+a[13])*o,this.z=(a[2]*n+a[6]*r+a[10]*s+a[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,s=this.z,a=e.x,o=e.y,l=e.z,u=e.w,f=2*(o*s-l*r),d=2*(l*n-a*s),m=2*(a*r-o*n);return this.x=n+u*f+o*m-l*d,this.y=r+u*d+l*f-a*m,this.z=s+u*m+a*d-o*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,s=this.z,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*s,this.y=a[1]*n+a[5]*r+a[9]*s,this.z=a[2]*n+a[6]*r+a[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Cn(this.x,e.x,n.x),this.y=Cn(this.y,e.y,n.y),this.z=Cn(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=Cn(this.x,e,n),this.y=Cn(this.y,e,n),this.z=Cn(this.z,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Cn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,s=e.y,a=e.z,o=n.x,l=n.y,u=n.z;return this.x=s*u-a*l,this.y=a*o-r*u,this.z=r*l-s*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return QR.copy(this).projectOnVector(e),this.sub(QR)}reflect(e){return this.sub(QR.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Cn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,s=this.z-e.z;return n*n+r*r+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const s=Math.sin(n)*e;return this.x=s*Math.sin(r),this.y=Math.cos(n)*e,this.z=s*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=s,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const QR=new pt,Kk=new bo;class ha{constructor(e=new pt(1/0,1/0,1/0),n=new pt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(nc.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(nc.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=nc.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const a=r.getAttribute("position");if(n===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=a.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,nc):nc.fromBufferAttribute(a,o),nc.applyMatrix4(e.matrixWorld),this.expandByPoint(nc);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),_T.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),_T.copy(r.boundingBox)),_T.applyMatrix4(e.matrixWorld),this.union(_T)}const s=e.children;for(let a=0,o=s.length;a<o;a++)this.expandByObject(s[a],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,nc),nc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Wb),bT.subVectors(this.max,Wb),Rv.subVectors(e.a,Wb),Ov.subVectors(e.b,Wb),Iv.subVectors(e.c,Wb),gp.subVectors(Ov,Rv),yp.subVectors(Iv,Ov),og.subVectors(Rv,Iv);let n=[0,-gp.z,gp.y,0,-yp.z,yp.y,0,-og.z,og.y,gp.z,0,-gp.x,yp.z,0,-yp.x,og.z,0,-og.x,-gp.y,gp.x,0,-yp.y,yp.x,0,-og.y,og.x,0];return!JR(n,Rv,Ov,Iv,bT)||(n=[1,0,0,0,1,0,0,0,1],!JR(n,Rv,Ov,Iv,bT))?!1:(xT.crossVectors(gp,yp),n=[xT.x,xT.y,xT.z],JR(n,Rv,Ov,Iv,bT))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,nc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(nc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ch[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ch[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ch[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ch[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ch[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ch[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ch[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ch[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ch),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ch=[new pt,new pt,new pt,new pt,new pt,new pt,new pt,new pt],nc=new pt,_T=new ha,Rv=new pt,Ov=new pt,Iv=new pt,gp=new pt,yp=new pt,og=new pt,Wb=new pt,bT=new pt,xT=new pt,lg=new pt;function JR(i,e,n,r,s){for(let a=0,o=i.length-3;a<=o;a+=3){lg.fromArray(i,a);const l=s.x*Math.abs(lg.x)+s.y*Math.abs(lg.y)+s.z*Math.abs(lg.z),u=e.dot(lg),f=n.dot(lg),d=r.dot(lg);if(Math.max(-Math.max(u,f,d),Math.min(u,f,d))>l)return!1}return!0}const vK=new ha,Xb=new pt,tO=new pt;class da{constructor(e=new pt,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):vK.setFromPoints(e).getCenter(r);let s=0;for(let a=0,o=e.length;a<o;a++)s=Math.max(s,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Xb.subVectors(e,this.center);const n=Xb.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),s=(r-this.radius)*.5;this.center.addScaledVector(Xb,s/r),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(tO.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Xb.copy(e.center).add(tO)),this.expandByPoint(Xb.copy(e.center).sub(tO))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Rh=new pt,eO=new pt,ST=new pt,vp=new pt,nO=new pt,ET=new pt,iO=new pt;class C_{constructor(e=new pt,n=new pt(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Rh)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Rh.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Rh.copy(this.origin).addScaledVector(this.direction,n),Rh.distanceToSquared(e))}distanceSqToSegment(e,n,r,s){eO.copy(e).add(n).multiplyScalar(.5),ST.copy(n).sub(e).normalize(),vp.copy(this.origin).sub(eO);const a=e.distanceTo(n)*.5,o=-this.direction.dot(ST),l=vp.dot(this.direction),u=-vp.dot(ST),f=vp.lengthSq(),d=Math.abs(1-o*o);let m,y,_,x;if(d>0)if(m=o*u-l,y=o*l-u,x=a*d,m>=0)if(y>=-x)if(y<=x){const S=1/d;m*=S,y*=S,_=m*(m+o*y+2*l)+y*(o*m+y+2*u)+f}else y=a,m=Math.max(0,-(o*y+l)),_=-m*m+y*(y+2*u)+f;else y=-a,m=Math.max(0,-(o*y+l)),_=-m*m+y*(y+2*u)+f;else y<=-x?(m=Math.max(0,-(-o*a+l)),y=m>0?-a:Math.min(Math.max(-a,-u),a),_=-m*m+y*(y+2*u)+f):y<=x?(m=0,y=Math.min(Math.max(-a,-u),a),_=y*(y+2*u)+f):(m=Math.max(0,-(o*a+l)),y=m>0?a:Math.min(Math.max(-a,-u),a),_=-m*m+y*(y+2*u)+f);else y=o>0?-a:a,m=Math.max(0,-(o*y+l)),_=-m*m+y*(y+2*u)+f;return r&&r.copy(this.origin).addScaledVector(this.direction,m),s&&s.copy(eO).addScaledVector(ST,y),_}intersectSphere(e,n){Rh.subVectors(e.center,this.origin);const r=Rh.dot(this.direction),s=Rh.dot(Rh)-r*r,a=e.radius*e.radius;if(s>a)return null;const o=Math.sqrt(a-s),l=r-o,u=r+o;return u<0?null:l<0?this.at(u,n):this.at(l,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,s,a,o,l,u;const f=1/this.direction.x,d=1/this.direction.y,m=1/this.direction.z,y=this.origin;return f>=0?(r=(e.min.x-y.x)*f,s=(e.max.x-y.x)*f):(r=(e.max.x-y.x)*f,s=(e.min.x-y.x)*f),d>=0?(a=(e.min.y-y.y)*d,o=(e.max.y-y.y)*d):(a=(e.max.y-y.y)*d,o=(e.min.y-y.y)*d),r>o||a>s||((a>r||isNaN(r))&&(r=a),(o<s||isNaN(s))&&(s=o),m>=0?(l=(e.min.z-y.z)*m,u=(e.max.z-y.z)*m):(l=(e.max.z-y.z)*m,u=(e.min.z-y.z)*m),r>u||l>s)||((l>r||r!==r)&&(r=l),(u<s||s!==s)&&(s=u),s<0)?null:this.at(r>=0?r:s,n)}intersectsBox(e){return this.intersectBox(e,Rh)!==null}intersectTriangle(e,n,r,s,a){nO.subVectors(n,e),ET.subVectors(r,e),iO.crossVectors(nO,ET);let o=this.direction.dot(iO),l;if(o>0){if(s)return null;l=1}else if(o<0)l=-1,o=-o;else return null;vp.subVectors(this.origin,e);const u=l*this.direction.dot(ET.crossVectors(vp,ET));if(u<0)return null;const f=l*this.direction.dot(nO.cross(vp));if(f<0||u+f>o)return null;const d=-l*vp.dot(iO);return d<0?null:this.at(d/o,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class cn{constructor(e,n,r,s,a,o,l,u,f,d,m,y,_,x,S,T){cn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,s,a,o,l,u,f,d,m,y,_,x,S,T)}set(e,n,r,s,a,o,l,u,f,d,m,y,_,x,S,T){const b=this.elements;return b[0]=e,b[4]=n,b[8]=r,b[12]=s,b[1]=a,b[5]=o,b[9]=l,b[13]=u,b[2]=f,b[6]=d,b[10]=m,b[14]=y,b[3]=_,b[7]=x,b[11]=S,b[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new cn().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,s=1/Dv.setFromMatrixColumn(e,0).length(),a=1/Dv.setFromMatrixColumn(e,1).length(),o=1/Dv.setFromMatrixColumn(e,2).length();return n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n[3]=0,n[4]=r[4]*a,n[5]=r[5]*a,n[6]=r[6]*a,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,s=e.y,a=e.z,o=Math.cos(r),l=Math.sin(r),u=Math.cos(s),f=Math.sin(s),d=Math.cos(a),m=Math.sin(a);if(e.order==="XYZ"){const y=o*d,_=o*m,x=l*d,S=l*m;n[0]=u*d,n[4]=-u*m,n[8]=f,n[1]=_+x*f,n[5]=y-S*f,n[9]=-l*u,n[2]=S-y*f,n[6]=x+_*f,n[10]=o*u}else if(e.order==="YXZ"){const y=u*d,_=u*m,x=f*d,S=f*m;n[0]=y+S*l,n[4]=x*l-_,n[8]=o*f,n[1]=o*m,n[5]=o*d,n[9]=-l,n[2]=_*l-x,n[6]=S+y*l,n[10]=o*u}else if(e.order==="ZXY"){const y=u*d,_=u*m,x=f*d,S=f*m;n[0]=y-S*l,n[4]=-o*m,n[8]=x+_*l,n[1]=_+x*l,n[5]=o*d,n[9]=S-y*l,n[2]=-o*f,n[6]=l,n[10]=o*u}else if(e.order==="ZYX"){const y=o*d,_=o*m,x=l*d,S=l*m;n[0]=u*d,n[4]=x*f-_,n[8]=y*f+S,n[1]=u*m,n[5]=S*f+y,n[9]=_*f-x,n[2]=-f,n[6]=l*u,n[10]=o*u}else if(e.order==="YZX"){const y=o*u,_=o*f,x=l*u,S=l*f;n[0]=u*d,n[4]=S-y*m,n[8]=x*m+_,n[1]=m,n[5]=o*d,n[9]=-l*d,n[2]=-f*d,n[6]=_*m+x,n[10]=y-S*m}else if(e.order==="XZY"){const y=o*u,_=o*f,x=l*u,S=l*f;n[0]=u*d,n[4]=-m,n[8]=f*d,n[1]=y*m+S,n[5]=o*d,n[9]=_*m-x,n[2]=x*m-_,n[6]=l*d,n[10]=S*m+y}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_K,e,bK)}lookAt(e,n,r){const s=this.elements;return Cl.subVectors(e,n),Cl.lengthSq()===0&&(Cl.z=1),Cl.normalize(),_p.crossVectors(r,Cl),_p.lengthSq()===0&&(Math.abs(r.z)===1?Cl.x+=1e-4:Cl.z+=1e-4,Cl.normalize(),_p.crossVectors(r,Cl)),_p.normalize(),TT.crossVectors(Cl,_p),s[0]=_p.x,s[4]=TT.x,s[8]=Cl.x,s[1]=_p.y,s[5]=TT.y,s[9]=Cl.y,s[2]=_p.z,s[6]=TT.z,s[10]=Cl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,s=n.elements,a=this.elements,o=r[0],l=r[4],u=r[8],f=r[12],d=r[1],m=r[5],y=r[9],_=r[13],x=r[2],S=r[6],T=r[10],b=r[14],M=r[3],R=r[7],A=r[11],I=r[15],k=s[0],N=s[4],L=s[8],U=s[12],O=s[1],F=s[5],H=s[9],V=s[13],X=s[2],J=s[6],q=s[10],W=s[14],K=s[3],et=s[7],Q=s[11],dt=s[15];return a[0]=o*k+l*O+u*X+f*K,a[4]=o*N+l*F+u*J+f*et,a[8]=o*L+l*H+u*q+f*Q,a[12]=o*U+l*V+u*W+f*dt,a[1]=d*k+m*O+y*X+_*K,a[5]=d*N+m*F+y*J+_*et,a[9]=d*L+m*H+y*q+_*Q,a[13]=d*U+m*V+y*W+_*dt,a[2]=x*k+S*O+T*X+b*K,a[6]=x*N+S*F+T*J+b*et,a[10]=x*L+S*H+T*q+b*Q,a[14]=x*U+S*V+T*W+b*dt,a[3]=M*k+R*O+A*X+I*K,a[7]=M*N+R*F+A*J+I*et,a[11]=M*L+R*H+A*q+I*Q,a[15]=M*U+R*V+A*W+I*dt,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],s=e[8],a=e[12],o=e[1],l=e[5],u=e[9],f=e[13],d=e[2],m=e[6],y=e[10],_=e[14],x=e[3],S=e[7],T=e[11],b=e[15];return x*(+a*u*m-s*f*m-a*l*y+r*f*y+s*l*_-r*u*_)+S*(+n*u*_-n*f*y+a*o*y-s*o*_+s*f*d-a*u*d)+T*(+n*f*m-n*l*_-a*o*m+r*o*_+a*l*d-r*f*d)+b*(-s*l*d-n*u*m+n*l*y+s*o*m-r*o*y+r*u*d)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=n,s[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],s=e[2],a=e[3],o=e[4],l=e[5],u=e[6],f=e[7],d=e[8],m=e[9],y=e[10],_=e[11],x=e[12],S=e[13],T=e[14],b=e[15],M=m*T*f-S*y*f+S*u*_-l*T*_-m*u*b+l*y*b,R=x*y*f-d*T*f-x*u*_+o*T*_+d*u*b-o*y*b,A=d*S*f-x*m*f+x*l*_-o*S*_-d*l*b+o*m*b,I=x*m*u-d*S*u-x*l*y+o*S*y+d*l*T-o*m*T,k=n*M+r*R+s*A+a*I;if(k===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/k;return e[0]=M*N,e[1]=(S*y*a-m*T*a-S*s*_+r*T*_+m*s*b-r*y*b)*N,e[2]=(l*T*a-S*u*a+S*s*f-r*T*f-l*s*b+r*u*b)*N,e[3]=(m*u*a-l*y*a-m*s*f+r*y*f+l*s*_-r*u*_)*N,e[4]=R*N,e[5]=(d*T*a-x*y*a+x*s*_-n*T*_-d*s*b+n*y*b)*N,e[6]=(x*u*a-o*T*a-x*s*f+n*T*f+o*s*b-n*u*b)*N,e[7]=(o*y*a-d*u*a+d*s*f-n*y*f-o*s*_+n*u*_)*N,e[8]=A*N,e[9]=(x*m*a-d*S*a-x*r*_+n*S*_+d*r*b-n*m*b)*N,e[10]=(o*S*a-x*l*a+x*r*f-n*S*f-o*r*b+n*l*b)*N,e[11]=(d*l*a-o*m*a-d*r*f+n*m*f+o*r*_-n*l*_)*N,e[12]=I*N,e[13]=(d*S*s-x*m*s+x*r*y-n*S*y-d*r*T+n*m*T)*N,e[14]=(x*l*s-o*S*s-x*r*u+n*S*u+o*r*T-n*l*T)*N,e[15]=(o*m*s-d*l*s+d*r*u-n*m*u-o*r*y+n*l*y)*N,this}scale(e){const n=this.elements,r=e.x,s=e.y,a=e.z;return n[0]*=r,n[4]*=s,n[8]*=a,n[1]*=r,n[5]*=s,n[9]*=a,n[2]*=r,n[6]*=s,n[10]*=a,n[3]*=r,n[7]*=s,n[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,s))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),s=Math.sin(n),a=1-r,o=e.x,l=e.y,u=e.z,f=a*o,d=a*l;return this.set(f*o+r,f*l-s*u,f*u+s*l,0,f*l+s*u,d*l+r,d*u-s*o,0,f*u-s*l,d*u+s*o,a*u*u+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,s,a,o){return this.set(1,r,a,0,e,1,o,0,n,s,1,0,0,0,0,1),this}compose(e,n,r){const s=this.elements,a=n._x,o=n._y,l=n._z,u=n._w,f=a+a,d=o+o,m=l+l,y=a*f,_=a*d,x=a*m,S=o*d,T=o*m,b=l*m,M=u*f,R=u*d,A=u*m,I=r.x,k=r.y,N=r.z;return s[0]=(1-(S+b))*I,s[1]=(_+A)*I,s[2]=(x-R)*I,s[3]=0,s[4]=(_-A)*k,s[5]=(1-(y+b))*k,s[6]=(T+M)*k,s[7]=0,s[8]=(x+R)*N,s[9]=(T-M)*N,s[10]=(1-(y+S))*N,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,n,r){const s=this.elements;let a=Dv.set(s[0],s[1],s[2]).length();const o=Dv.set(s[4],s[5],s[6]).length(),l=Dv.set(s[8],s[9],s[10]).length();this.determinant()<0&&(a=-a),e.x=s[12],e.y=s[13],e.z=s[14],ic.copy(this);const f=1/a,d=1/o,m=1/l;return ic.elements[0]*=f,ic.elements[1]*=f,ic.elements[2]*=f,ic.elements[4]*=d,ic.elements[5]*=d,ic.elements[6]*=d,ic.elements[8]*=m,ic.elements[9]*=m,ic.elements[10]*=m,n.setFromRotationMatrix(ic),r.x=a,r.y=o,r.z=l,this}makePerspective(e,n,r,s,a,o,l=pc){const u=this.elements,f=2*a/(n-e),d=2*a/(r-s),m=(n+e)/(n-e),y=(r+s)/(r-s);let _,x;if(l===pc)_=-(o+a)/(o-a),x=-2*o*a/(o-a);else if(l===L1)_=-o/(o-a),x=-o*a/(o-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return u[0]=f,u[4]=0,u[8]=m,u[12]=0,u[1]=0,u[5]=d,u[9]=y,u[13]=0,u[2]=0,u[6]=0,u[10]=_,u[14]=x,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,n,r,s,a,o,l=pc){const u=this.elements,f=1/(n-e),d=1/(r-s),m=1/(o-a),y=(n+e)*f,_=(r+s)*d;let x,S;if(l===pc)x=(o+a)*m,S=-2*m;else if(l===L1)x=a*m,S=-1*m;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return u[0]=2*f,u[4]=0,u[8]=0,u[12]=-y,u[1]=0,u[5]=2*d,u[9]=0,u[13]=-_,u[2]=0,u[6]=0,u[10]=S,u[14]=-x,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let s=0;s<16;s++)if(n[s]!==r[s])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Dv=new pt,ic=new cn,_K=new pt(0,0,0),bK=new pt(1,1,1),_p=new pt,TT=new pt,Cl=new pt,Zk=new cn,Qk=new bo;class Bl{constructor(e=0,n=0,r=0,s=Bl.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,s=this._order){return this._x=e,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const s=e.elements,a=s[0],o=s[4],l=s[8],u=s[1],f=s[5],d=s[9],m=s[2],y=s[6],_=s[10];switch(n){case"XYZ":this._y=Math.asin(Cn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,_),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(y,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Cn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,_),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-m,a),this._z=0);break;case"ZXY":this._x=Math.asin(Cn(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-m,_),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(u,a));break;case"ZYX":this._y=Math.asin(-Cn(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(y,_),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-o,f));break;case"YZX":this._z=Math.asin(Cn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-d,f),this._y=Math.atan2(-m,a)):(this._x=0,this._y=Math.atan2(l,_));break;case"XZY":this._z=Math.asin(-Cn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(y,f),this._y=Math.atan2(l,a)):(this._x=Math.atan2(-d,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return Zk.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Zk,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return Qk.setFromEuler(this),this.setFromQuaternion(Qk,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Bl.DEFAULT_ORDER="XYZ";class X0{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let xK=0;const Jk=new pt,Pv=new bo,Oh=new cn,wT=new pt,Yb=new pt,SK=new pt,EK=new bo,tz=new pt(1,0,0),ez=new pt(0,1,0),nz=new pt(0,0,1),iz={type:"added"},TK={type:"removed"},Nv={type:"childadded",child:null},rO={type:"childremoved",child:null};class vi extends Xf{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:xK++}),this.uuid=Ul(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=vi.DEFAULT_UP.clone();const e=new pt,n=new Bl,r=new bo,s=new pt(1,1,1);function a(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(a),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new cn},normalMatrix:{value:new Dn}}),this.matrix=new cn,this.matrixWorld=new cn,this.matrixAutoUpdate=vi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=vi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new X0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Pv.setFromAxisAngle(e,n),this.quaternion.multiply(Pv),this}rotateOnWorldAxis(e,n){return Pv.setFromAxisAngle(e,n),this.quaternion.premultiply(Pv),this}rotateX(e){return this.rotateOnAxis(tz,e)}rotateY(e){return this.rotateOnAxis(ez,e)}rotateZ(e){return this.rotateOnAxis(nz,e)}translateOnAxis(e,n){return Jk.copy(e).applyQuaternion(this.quaternion),this.position.add(Jk.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(tz,e)}translateY(e){return this.translateOnAxis(ez,e)}translateZ(e){return this.translateOnAxis(nz,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Oh.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?wT.copy(e):wT.set(e,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),Yb.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Oh.lookAt(Yb,wT,this.up):Oh.lookAt(wT,Yb,this.up),this.quaternion.setFromRotationMatrix(Oh),s&&(Oh.extractRotation(s.matrixWorld),Pv.setFromRotationMatrix(Oh),this.quaternion.premultiply(Pv.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(iz),Nv.child=e,this.dispatchEvent(Nv),Nv.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(TK),rO.child=e,this.dispatchEvent(rO),rO.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Oh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Oh.multiply(e.parent.matrixWorld)),e.applyMatrix4(Oh),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(iz),Nv.child=e,this.dispatchEvent(Nv),Nv.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const s=this.children;for(let a=0,o=s.length;a<o;a++)s[a].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Yb,e,SK),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Yb,EK,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const s=this.children;for(let a=0,o=s.length;a<o;a++)s[a].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function a(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=a(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let f=0,d=u.length;f<d;f++){const m=u[f];a(e.shapes,m)}else a(e.shapes,u)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,f=this.material.length;u<f;u++)l.push(a(e.materials,this.material[u]));s.material=l}else s.material=a(e.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];s.animations.push(a(e.animations,u))}}if(n){const l=o(e.geometries),u=o(e.materials),f=o(e.textures),d=o(e.images),m=o(e.shapes),y=o(e.skeletons),_=o(e.animations),x=o(e.nodes);l.length>0&&(r.geometries=l),u.length>0&&(r.materials=u),f.length>0&&(r.textures=f),d.length>0&&(r.images=d),m.length>0&&(r.shapes=m),y.length>0&&(r.skeletons=y),_.length>0&&(r.animations=_),x.length>0&&(r.nodes=x)}return r.object=s,r;function o(l){const u=[];for(const f in l){const d=l[f];delete d.metadata,u.push(d)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const s=e.children[r];this.add(s.clone())}return this}}vi.DEFAULT_UP=new pt(0,1,0);vi.DEFAULT_MATRIX_AUTO_UPDATE=!0;vi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const rc=new pt,Ih=new pt,sO=new pt,Dh=new pt,Lv=new pt,Uv=new pt,rz=new pt,aO=new pt,oO=new pt,lO=new pt,uO=new di,cO=new di,fO=new di;class Qo{constructor(e=new pt,n=new pt,r=new pt){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,s){s.subVectors(r,n),rc.subVectors(e,n),s.cross(rc);const a=s.lengthSq();return a>0?s.multiplyScalar(1/Math.sqrt(a)):s.set(0,0,0)}static getBarycoord(e,n,r,s,a){rc.subVectors(s,n),Ih.subVectors(r,n),sO.subVectors(e,n);const o=rc.dot(rc),l=rc.dot(Ih),u=rc.dot(sO),f=Ih.dot(Ih),d=Ih.dot(sO),m=o*f-l*l;if(m===0)return a.set(0,0,0),null;const y=1/m,_=(f*u-l*d)*y,x=(o*d-l*u)*y;return a.set(1-_-x,x,_)}static containsPoint(e,n,r,s){return this.getBarycoord(e,n,r,s,Dh)===null?!1:Dh.x>=0&&Dh.y>=0&&Dh.x+Dh.y<=1}static getInterpolation(e,n,r,s,a,o,l,u){return this.getBarycoord(e,n,r,s,Dh)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(a,Dh.x),u.addScaledVector(o,Dh.y),u.addScaledVector(l,Dh.z),u)}static getInterpolatedAttribute(e,n,r,s,a,o){return uO.setScalar(0),cO.setScalar(0),fO.setScalar(0),uO.fromBufferAttribute(e,n),cO.fromBufferAttribute(e,r),fO.fromBufferAttribute(e,s),o.setScalar(0),o.addScaledVector(uO,a.x),o.addScaledVector(cO,a.y),o.addScaledVector(fO,a.z),o}static isFrontFacing(e,n,r,s){return rc.subVectors(r,n),Ih.subVectors(e,n),rc.cross(Ih).dot(s)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,s){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,n,r,s){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return rc.subVectors(this.c,this.b),Ih.subVectors(this.a,this.b),rc.cross(Ih).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Qo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Qo.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,s,a){return Qo.getInterpolation(e,this.a,this.b,this.c,n,r,s,a)}containsPoint(e){return Qo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Qo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,s=this.b,a=this.c;let o,l;Lv.subVectors(s,r),Uv.subVectors(a,r),aO.subVectors(e,r);const u=Lv.dot(aO),f=Uv.dot(aO);if(u<=0&&f<=0)return n.copy(r);oO.subVectors(e,s);const d=Lv.dot(oO),m=Uv.dot(oO);if(d>=0&&m<=d)return n.copy(s);const y=u*m-d*f;if(y<=0&&u>=0&&d<=0)return o=u/(u-d),n.copy(r).addScaledVector(Lv,o);lO.subVectors(e,a);const _=Lv.dot(lO),x=Uv.dot(lO);if(x>=0&&_<=x)return n.copy(a);const S=_*f-u*x;if(S<=0&&f>=0&&x<=0)return l=f/(f-x),n.copy(r).addScaledVector(Uv,l);const T=d*x-_*m;if(T<=0&&m-d>=0&&_-x>=0)return rz.subVectors(a,s),l=(m-d)/(m-d+(_-x)),n.copy(s).addScaledVector(rz,l);const b=1/(T+S+y);return o=S*b,l=y*b,n.copy(r).addScaledVector(Lv,o).addScaledVector(Uv,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const e8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},bp={h:0,s:0,l:0},AT={h:0,s:0,l:0};function hO(i,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?i+(e-i)*6*n:n<1/2?e:n<2/3?i+(e-i)*6*(2/3-n):i}let ke=class{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=la){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,li.toWorkingColorSpace(this,n),this}setRGB(e,n,r,s=li.workingColorSpace){return this.r=e,this.g=n,this.b=r,li.toWorkingColorSpace(this,s),this}setHSL(e,n,r,s=li.workingColorSpace){if(e=XN(e,1),n=Cn(n,0,1),r=Cn(r,0,1),n===0)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+n):r+n-r*n,o=2*r-a;this.r=hO(o,a,e+1/3),this.g=hO(o,a,e),this.b=hO(o,a,e-1/3)}return li.toWorkingColorSpace(this,s),this}setStyle(e,n=la){function r(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const o=s[1],l=s[2];switch(o){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return r(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return r(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return r(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=s[1],o=a.length;if(o===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(a,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=la){const r=e8[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=sd(e.r),this.g=sd(e.g),this.b=sd(e.b),this}copyLinearToSRGB(e){return this.r=D0(e.r),this.g=D0(e.g),this.b=D0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=la){return li.fromWorkingColorSpace(Oa.copy(this),e),Math.round(Cn(Oa.r*255,0,255))*65536+Math.round(Cn(Oa.g*255,0,255))*256+Math.round(Cn(Oa.b*255,0,255))}getHexString(e=la){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=li.workingColorSpace){li.fromWorkingColorSpace(Oa.copy(this),n);const r=Oa.r,s=Oa.g,a=Oa.b,o=Math.max(r,s,a),l=Math.min(r,s,a);let u,f;const d=(l+o)/2;if(l===o)u=0,f=0;else{const m=o-l;switch(f=d<=.5?m/(o+l):m/(2-o-l),o){case r:u=(s-a)/m+(s<a?6:0);break;case s:u=(a-r)/m+2;break;case a:u=(r-s)/m+4;break}u/=6}return e.h=u,e.s=f,e.l=d,e}getRGB(e,n=li.workingColorSpace){return li.fromWorkingColorSpace(Oa.copy(this),n),e.r=Oa.r,e.g=Oa.g,e.b=Oa.b,e}getStyle(e=la){li.fromWorkingColorSpace(Oa.copy(this),e);const n=Oa.r,r=Oa.g,s=Oa.b;return e!==la?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(s*255)})`}offsetHSL(e,n,r){return this.getHSL(bp),this.setHSL(bp.h+e,bp.s+n,bp.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(bp),e.getHSL(AT);const r=r1(bp.h,AT.h,n),s=r1(bp.s,AT.s,n),a=r1(bp.l,AT.l,n);return this.setHSL(r,s,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,s=this.b,a=e.elements;return this.r=a[0]*n+a[3]*r+a[6]*s,this.g=a[1]*n+a[4]*r+a[7]*s,this.b=a[2]*n+a[5]*r+a[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Oa=new ke;ke.NAMES=e8;let wK=0;class Ga extends Xf{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:wK++}),this.uuid=Ul(),this.name="",this.type="Material",this.blending=Wg,this.side=ud,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=DA,this.blendDst=PA,this.blendEquation=Dp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ke(0,0,0),this.blendAlpha=0,this.depthFunc=ay,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=TD,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Cg,this.stencilZFail=Cg,this.stencilZPass=Cg,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const s=this[n];if(s===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(r):s&&s.isVector3&&r&&r.isVector3?s.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Wg&&(r.blending=this.blending),this.side!==ud&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==DA&&(r.blendSrc=this.blendSrc),this.blendDst!==PA&&(r.blendDst=this.blendDst),this.blendEquation!==Dp&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==ay&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==TD&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Cg&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Cg&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Cg&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function s(a){const o=[];for(const l in a){const u=a[l];delete u.metadata,o.push(u)}return o}if(n){const a=s(e.textures),o=s(e.images);a.length>0&&(r.textures=a),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const s=n.length;r=new Array(s);for(let a=0;a!==s;++a)r[a]=n[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class dm extends Ga{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Bl,this.combine=wS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Xh=AK();function AK(){const i=new ArrayBuffer(4),e=new Float32Array(i),n=new Uint32Array(i),r=new Uint32Array(512),s=new Uint32Array(512);for(let u=0;u<256;++u){const f=u-127;f<-27?(r[u]=0,r[u|256]=32768,s[u]=24,s[u|256]=24):f<-14?(r[u]=1024>>-f-14,r[u|256]=1024>>-f-14|32768,s[u]=-f-1,s[u|256]=-f-1):f<=15?(r[u]=f+15<<10,r[u|256]=f+15<<10|32768,s[u]=13,s[u|256]=13):f<128?(r[u]=31744,r[u|256]=64512,s[u]=24,s[u|256]=24):(r[u]=31744,r[u|256]=64512,s[u]=13,s[u|256]=13)}const a=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u<1024;++u){let f=u<<13,d=0;for(;(f&8388608)===0;)f<<=1,d-=8388608;f&=-8388609,d+=947912704,a[u]=f|d}for(let u=1024;u<2048;++u)a[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)o[u]=u<<23;o[31]=1199570944,o[32]=2147483648;for(let u=33;u<63;++u)o[u]=2147483648+(u-32<<23);o[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(l[u]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:s,mantissaTable:a,exponentTable:o,offsetTable:l}}function Wo(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=Cn(i,-65504,65504),Xh.floatView[0]=i;const e=Xh.uint32View[0],n=e>>23&511;return Xh.baseTable[n]+((e&8388607)>>Xh.shiftTable[n])}function Ux(i){const e=i>>10;return Xh.uint32View[0]=Xh.mantissaTable[Xh.offsetTable[e]+(i&1023)]+Xh.exponentTable[e],Xh.floatView[0]}class MK{static toHalfFloat(e){return Wo(e)}static fromHalfFloat(e){return Ux(e)}}const ms=new pt,MT=new de;let CK=0;class zi{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:CK++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=N1,this.updateRanges=[],this.gpuType=Jo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let s=0,a=this.itemSize;s<a;s++)this.array[e+s]=n.array[r+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)MT.fromBufferAttribute(this,n),MT.applyMatrix3(e),this.setXY(n,MT.x,MT.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)ms.fromBufferAttribute(this,n),ms.applyMatrix3(e),this.setXYZ(n,ms.x,ms.y,ms.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)ms.fromBufferAttribute(this,n),ms.applyMatrix4(e),this.setXYZ(n,ms.x,ms.y,ms.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)ms.fromBufferAttribute(this,n),ms.applyNormalMatrix(e),this.setXYZ(n,ms.x,ms.y,ms.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)ms.fromBufferAttribute(this,n),ms.transformDirection(e),this.setXYZ(n,ms.x,ms.y,ms.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=mo(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Ln(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=mo(n,this.array)),n}setX(e,n){return this.normalized&&(n=Ln(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=mo(n,this.array)),n}setY(e,n){return this.normalized&&(n=Ln(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=mo(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Ln(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=mo(n,this.array)),n}setW(e,n){return this.normalized&&(n=Ln(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Ln(n,this.array),r=Ln(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,s){return e*=this.itemSize,this.normalized&&(n=Ln(n,this.array),r=Ln(r,this.array),s=Ln(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=s,this}setXYZW(e,n,r,s,a){return e*=this.itemSize,this.normalized&&(n=Ln(n,this.array),r=Ln(r,this.array),s=Ln(s,this.array),a=Ln(a,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=s,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==N1&&(e.usage=this.usage),e}}class RK extends zi{constructor(e,n,r){super(new Int8Array(e),n,r)}}class OK extends zi{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class IK extends zi{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class DK extends zi{constructor(e,n,r){super(new Int16Array(e),n,r)}}class YN extends zi{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class PK extends zi{constructor(e,n,r){super(new Int32Array(e),n,r)}}class KN extends zi{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class NK extends zi{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=Ux(this.array[e*this.itemSize]);return this.normalized&&(n=mo(n,this.array)),n}setX(e,n){return this.normalized&&(n=Ln(n,this.array)),this.array[e*this.itemSize]=Wo(n),this}getY(e){let n=Ux(this.array[e*this.itemSize+1]);return this.normalized&&(n=mo(n,this.array)),n}setY(e,n){return this.normalized&&(n=Ln(n,this.array)),this.array[e*this.itemSize+1]=Wo(n),this}getZ(e){let n=Ux(this.array[e*this.itemSize+2]);return this.normalized&&(n=mo(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Ln(n,this.array)),this.array[e*this.itemSize+2]=Wo(n),this}getW(e){let n=Ux(this.array[e*this.itemSize+3]);return this.normalized&&(n=mo(n,this.array)),n}setW(e,n){return this.normalized&&(n=Ln(n,this.array)),this.array[e*this.itemSize+3]=Wo(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Ln(n,this.array),r=Ln(r,this.array)),this.array[e+0]=Wo(n),this.array[e+1]=Wo(r),this}setXYZ(e,n,r,s){return e*=this.itemSize,this.normalized&&(n=Ln(n,this.array),r=Ln(r,this.array),s=Ln(s,this.array)),this.array[e+0]=Wo(n),this.array[e+1]=Wo(r),this.array[e+2]=Wo(s),this}setXYZW(e,n,r,s,a){return e*=this.itemSize,this.normalized&&(n=Ln(n,this.array),r=Ln(r,this.array),s=Ln(s,this.array),a=Ln(a,this.array)),this.array[e+0]=Wo(n),this.array[e+1]=Wo(r),this.array[e+2]=Wo(s),this.array[e+3]=Wo(a),this}}class qe extends zi{constructor(e,n,r){super(new Float32Array(e),n,r)}}let LK=0;const hu=new cn,dO=new vi,kv=new pt,Rl=new ha,Kb=new ha,qs=new pt;class Un extends Xf{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:LK++}),this.uuid=Ul(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(QH(e)?KN:YN)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new Dn().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return hu.makeRotationFromQuaternion(e),this.applyMatrix4(hu),this}rotateX(e){return hu.makeRotationX(e),this.applyMatrix4(hu),this}rotateY(e){return hu.makeRotationY(e),this.applyMatrix4(hu),this}rotateZ(e){return hu.makeRotationZ(e),this.applyMatrix4(hu),this}translate(e,n,r){return hu.makeTranslation(e,n,r),this.applyMatrix4(hu),this}scale(e,n,r){return hu.makeScale(e,n,r),this.applyMatrix4(hu),this}lookAt(e){return dO.lookAt(e),dO.updateMatrix(),this.applyMatrix4(dO.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(kv).negate(),this.translate(kv.x,kv.y,kv.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let s=0,a=e.length;s<a;s++){const o=e[s];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new qe(r,3))}else{const r=Math.min(e.length,n.count);for(let s=0;s<r;s++){const a=e[s];n.setXYZ(s,a.x,a.y,a.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ha);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new pt(-1/0,-1/0,-1/0),new pt(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,s=n.length;r<s;r++){const a=n[r];Rl.setFromBufferAttribute(a),this.morphTargetsRelative?(qs.addVectors(this.boundingBox.min,Rl.min),this.boundingBox.expandByPoint(qs),qs.addVectors(this.boundingBox.max,Rl.max),this.boundingBox.expandByPoint(qs)):(this.boundingBox.expandByPoint(Rl.min),this.boundingBox.expandByPoint(Rl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new da);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new pt,1/0);return}if(e){const r=this.boundingSphere.center;if(Rl.setFromBufferAttribute(e),n)for(let a=0,o=n.length;a<o;a++){const l=n[a];Kb.setFromBufferAttribute(l),this.morphTargetsRelative?(qs.addVectors(Rl.min,Kb.min),Rl.expandByPoint(qs),qs.addVectors(Rl.max,Kb.max),Rl.expandByPoint(qs)):(Rl.expandByPoint(Kb.min),Rl.expandByPoint(Kb.max))}Rl.getCenter(r);let s=0;for(let a=0,o=e.count;a<o;a++)qs.fromBufferAttribute(e,a),s=Math.max(s,r.distanceToSquared(qs));if(n)for(let a=0,o=n.length;a<o;a++){const l=n[a],u=this.morphTargetsRelative;for(let f=0,d=l.count;f<d;f++)qs.fromBufferAttribute(l,f),u&&(kv.fromBufferAttribute(e,f),qs.add(kv)),s=Math.max(s,r.distanceToSquared(qs))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,s=n.normal,a=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new zi(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),l=[],u=[];for(let L=0;L<r.count;L++)l[L]=new pt,u[L]=new pt;const f=new pt,d=new pt,m=new pt,y=new de,_=new de,x=new de,S=new pt,T=new pt;function b(L,U,O){f.fromBufferAttribute(r,L),d.fromBufferAttribute(r,U),m.fromBufferAttribute(r,O),y.fromBufferAttribute(a,L),_.fromBufferAttribute(a,U),x.fromBufferAttribute(a,O),d.sub(f),m.sub(f),_.sub(y),x.sub(y);const F=1/(_.x*x.y-x.x*_.y);isFinite(F)&&(S.copy(d).multiplyScalar(x.y).addScaledVector(m,-_.y).multiplyScalar(F),T.copy(m).multiplyScalar(_.x).addScaledVector(d,-x.x).multiplyScalar(F),l[L].add(S),l[U].add(S),l[O].add(S),u[L].add(T),u[U].add(T),u[O].add(T))}let M=this.groups;M.length===0&&(M=[{start:0,count:e.count}]);for(let L=0,U=M.length;L<U;++L){const O=M[L],F=O.start,H=O.count;for(let V=F,X=F+H;V<X;V+=3)b(e.getX(V+0),e.getX(V+1),e.getX(V+2))}const R=new pt,A=new pt,I=new pt,k=new pt;function N(L){I.fromBufferAttribute(s,L),k.copy(I);const U=l[L];R.copy(U),R.sub(I.multiplyScalar(I.dot(U))).normalize(),A.crossVectors(k,U);const F=A.dot(u[L])<0?-1:1;o.setXYZW(L,R.x,R.y,R.z,F)}for(let L=0,U=M.length;L<U;++L){const O=M[L],F=O.start,H=O.count;for(let V=F,X=F+H;V<X;V+=3)N(e.getX(V+0)),N(e.getX(V+1)),N(e.getX(V+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new zi(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let y=0,_=r.count;y<_;y++)r.setXYZ(y,0,0,0);const s=new pt,a=new pt,o=new pt,l=new pt,u=new pt,f=new pt,d=new pt,m=new pt;if(e)for(let y=0,_=e.count;y<_;y+=3){const x=e.getX(y+0),S=e.getX(y+1),T=e.getX(y+2);s.fromBufferAttribute(n,x),a.fromBufferAttribute(n,S),o.fromBufferAttribute(n,T),d.subVectors(o,a),m.subVectors(s,a),d.cross(m),l.fromBufferAttribute(r,x),u.fromBufferAttribute(r,S),f.fromBufferAttribute(r,T),l.add(d),u.add(d),f.add(d),r.setXYZ(x,l.x,l.y,l.z),r.setXYZ(S,u.x,u.y,u.z),r.setXYZ(T,f.x,f.y,f.z)}else for(let y=0,_=n.count;y<_;y+=3)s.fromBufferAttribute(n,y+0),a.fromBufferAttribute(n,y+1),o.fromBufferAttribute(n,y+2),d.subVectors(o,a),m.subVectors(s,a),d.cross(m),r.setXYZ(y+0,d.x,d.y,d.z),r.setXYZ(y+1,d.x,d.y,d.z),r.setXYZ(y+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)qs.fromBufferAttribute(e,n),qs.normalize(),e.setXYZ(n,qs.x,qs.y,qs.z)}toNonIndexed(){function e(l,u){const f=l.array,d=l.itemSize,m=l.normalized,y=new f.constructor(u.length*d);let _=0,x=0;for(let S=0,T=u.length;S<T;S++){l.isInterleavedBufferAttribute?_=u[S]*l.data.stride+l.offset:_=u[S]*d;for(let b=0;b<d;b++)y[x++]=f[_++]}return new zi(y,d,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Un,r=this.index.array,s=this.attributes;for(const l in s){const u=s[l],f=e(u,r);n.setAttribute(l,f)}const a=this.morphAttributes;for(const l in a){const u=[],f=a[l];for(let d=0,m=f.length;d<m;d++){const y=f[d],_=e(y,r);u.push(_)}n.morphAttributes[l]=u}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,u=o.length;l<u;l++){const f=o[l];n.addGroup(f.start,f.count,f.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const f in u)u[f]!==void 0&&(e[f]=u[f]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const u in r){const f=r[u];e.data.attributes[u]=f.toJSON(e.data)}const s={};let a=!1;for(const u in this.morphAttributes){const f=this.morphAttributes[u],d=[];for(let m=0,y=f.length;m<y;m++){const _=f[m];d.push(_.toJSON(e.data))}d.length>0&&(s[u]=d,a=!0)}a&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const s=e.attributes;for(const f in s){const d=s[f];this.setAttribute(f,d.clone(n))}const a=e.morphAttributes;for(const f in a){const d=[],m=a[f];for(let y=0,_=m.length;y<_;y++)d.push(m[y].clone(n));this.morphAttributes[f]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let f=0,d=o.length;f<d;f++){const m=o[f];this.addGroup(m.start,m.count,m.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const sz=new cn,ug=new C_,CT=new da,az=new pt,RT=new pt,OT=new pt,IT=new pt,pO=new pt,DT=new pt,oz=new pt,PT=new pt;class $r extends vi{constructor(e=new Un,n=new dm){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const s=n[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=s.length;a<o;a++){const l=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}getVertexPosition(e,n){const r=this.geometry,s=r.attributes.position,a=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(s,e);const l=this.morphTargetInfluences;if(a&&l){DT.set(0,0,0);for(let u=0,f=a.length;u<f;u++){const d=l[u],m=a[u];d!==0&&(pO.fromBufferAttribute(m,e),o?DT.addScaledVector(pO,d):DT.addScaledVector(pO.sub(n),d))}n.add(DT)}return n}raycast(e,n){const r=this.geometry,s=this.material,a=this.matrixWorld;s!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),CT.copy(r.boundingSphere),CT.applyMatrix4(a),ug.copy(e.ray).recast(e.near),!(CT.containsPoint(ug.origin)===!1&&(ug.intersectSphere(CT,az)===null||ug.origin.distanceToSquared(az)>(e.far-e.near)**2))&&(sz.copy(a).invert(),ug.copy(e.ray).applyMatrix4(sz),!(r.boundingBox!==null&&ug.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,ug)))}_computeIntersections(e,n,r){let s;const a=this.geometry,o=this.material,l=a.index,u=a.attributes.position,f=a.attributes.uv,d=a.attributes.uv1,m=a.attributes.normal,y=a.groups,_=a.drawRange;if(l!==null)if(Array.isArray(o))for(let x=0,S=y.length;x<S;x++){const T=y[x],b=o[T.materialIndex],M=Math.max(T.start,_.start),R=Math.min(l.count,Math.min(T.start+T.count,_.start+_.count));for(let A=M,I=R;A<I;A+=3){const k=l.getX(A),N=l.getX(A+1),L=l.getX(A+2);s=NT(this,b,e,r,f,d,m,k,N,L),s&&(s.faceIndex=Math.floor(A/3),s.face.materialIndex=T.materialIndex,n.push(s))}}else{const x=Math.max(0,_.start),S=Math.min(l.count,_.start+_.count);for(let T=x,b=S;T<b;T+=3){const M=l.getX(T),R=l.getX(T+1),A=l.getX(T+2);s=NT(this,o,e,r,f,d,m,M,R,A),s&&(s.faceIndex=Math.floor(T/3),n.push(s))}}else if(u!==void 0)if(Array.isArray(o))for(let x=0,S=y.length;x<S;x++){const T=y[x],b=o[T.materialIndex],M=Math.max(T.start,_.start),R=Math.min(u.count,Math.min(T.start+T.count,_.start+_.count));for(let A=M,I=R;A<I;A+=3){const k=A,N=A+1,L=A+2;s=NT(this,b,e,r,f,d,m,k,N,L),s&&(s.faceIndex=Math.floor(A/3),s.face.materialIndex=T.materialIndex,n.push(s))}}else{const x=Math.max(0,_.start),S=Math.min(u.count,_.start+_.count);for(let T=x,b=S;T<b;T+=3){const M=T,R=T+1,A=T+2;s=NT(this,o,e,r,f,d,m,M,R,A),s&&(s.faceIndex=Math.floor(T/3),n.push(s))}}}}function UK(i,e,n,r,s,a,o,l){let u;if(e.side===_o?u=r.intersectTriangle(o,a,s,!0,l):u=r.intersectTriangle(s,a,o,e.side===ud,l),u===null)return null;PT.copy(l),PT.applyMatrix4(i.matrixWorld);const f=n.ray.origin.distanceTo(PT);return f<n.near||f>n.far?null:{distance:f,point:PT.clone(),object:i}}function NT(i,e,n,r,s,a,o,l,u,f){i.getVertexPosition(l,RT),i.getVertexPosition(u,OT),i.getVertexPosition(f,IT);const d=UK(i,e,n,r,RT,OT,IT,oz);if(d){const m=new pt;Qo.getBarycoord(oz,RT,OT,IT,m),s&&(d.uv=Qo.getInterpolatedAttribute(s,l,u,f,m,new de)),a&&(d.uv1=Qo.getInterpolatedAttribute(a,l,u,f,m,new de)),o&&(d.normal=Qo.getInterpolatedAttribute(o,l,u,f,m,new pt),d.normal.dot(r.direction)>0&&d.normal.multiplyScalar(-1));const y={a:l,b:u,c:f,normal:new pt,materialIndex:0};Qo.getNormal(RT,OT,IT,y.normal),d.face=y,d.barycoord=m}return d}class Sy extends Un{constructor(e=1,n=1,r=1,s=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:s,heightSegments:a,depthSegments:o};const l=this;s=Math.floor(s),a=Math.floor(a),o=Math.floor(o);const u=[],f=[],d=[],m=[];let y=0,_=0;x("z","y","x",-1,-1,r,n,e,o,a,0),x("z","y","x",1,-1,r,n,-e,o,a,1),x("x","z","y",1,1,e,r,n,s,o,2),x("x","z","y",1,-1,e,r,-n,s,o,3),x("x","y","z",1,-1,e,n,r,s,a,4),x("x","y","z",-1,-1,e,n,-r,s,a,5),this.setIndex(u),this.setAttribute("position",new qe(f,3)),this.setAttribute("normal",new qe(d,3)),this.setAttribute("uv",new qe(m,2));function x(S,T,b,M,R,A,I,k,N,L,U){const O=A/N,F=I/L,H=A/2,V=I/2,X=k/2,J=N+1,q=L+1;let W=0,K=0;const et=new pt;for(let Q=0;Q<q;Q++){const dt=Q*F-V;for(let yt=0;yt<J;yt++){const xt=yt*O-H;et[S]=xt*M,et[T]=dt*R,et[b]=X,f.push(et.x,et.y,et.z),et[S]=0,et[T]=0,et[b]=k>0?1:-1,d.push(et.x,et.y,et.z),m.push(yt/N),m.push(1-Q/L),W+=1}}for(let Q=0;Q<L;Q++)for(let dt=0;dt<N;dt++){const yt=y+dt+J*Q,xt=y+dt+J*(Q+1),nt=y+(dt+1)+J*(Q+1),ht=y+(dt+1)+J*Q;u.push(yt,xt,ht),u.push(xt,nt,ht),K+=6}l.addGroup(_,K,U),_+=K,y+=W}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sy(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Y0(i){const e={};for(const n in i){e[n]={};for(const r in i[n]){const s=i[n][r];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=s.clone():Array.isArray(s)?e[n][r]=s.slice():e[n][r]=s}}return e}function fo(i){const e={};for(let n=0;n<i.length;n++){const r=Y0(i[n]);for(const s in r)e[s]=r[s]}return e}function kK(i){const e=[];for(let n=0;n<i.length;n++)e.push(i[n].clone());return e}function n8(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:li.workingColorSpace}const i8={clone:Y0,merge:fo};var zK=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,BK=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Au extends Ga{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=zK,this.fragmentShader=BK,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Y0(e.uniforms),this.uniformsGroups=kK(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?n.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[s]={type:"m4",value:o.toArray()}:n.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const s in this.extensions)this.extensions[s]===!0&&(r[s]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class UC extends vi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new cn,this.projectionMatrix=new cn,this.projectionMatrixInverse=new cn,this.coordinateSystem=pc}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const xp=new pt,lz=new de,uz=new de;class Ws extends UC{constructor(e=50,n=1,r=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=s,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=W0*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Yg*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return W0*2*Math.atan(Math.tan(Yg*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){xp.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(xp.x,xp.y).multiplyScalar(-e/xp.z),xp.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(xp.x,xp.y).multiplyScalar(-e/xp.z)}getViewSize(e,n){return this.getViewBounds(e,lz,uz),n.subVectors(uz,lz)}setViewOffset(e,n,r,s,a,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=s,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Yg*.5*this.fov)/this.zoom,r=2*n,s=this.aspect*r,a=-.5*s;const o=this.view;if(this.view!==null&&this.view.enabled){const u=o.fullWidth,f=o.fullHeight;a+=o.offsetX*s/u,n-=o.offsetY*r/f,s*=o.width/u,r*=o.height/f}const l=this.filmOffset;l!==0&&(a+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+s,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const zv=-90,Bv=1;class r8 extends vi{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Ws(zv,Bv,e,n);s.layers=this.layers,this.add(s);const a=new Ws(zv,Bv,e,n);a.layers=this.layers,this.add(a);const o=new Ws(zv,Bv,e,n);o.layers=this.layers,this.add(o);const l=new Ws(zv,Bv,e,n);l.layers=this.layers,this.add(l);const u=new Ws(zv,Bv,e,n);u.layers=this.layers,this.add(u);const f=new Ws(zv,Bv,e,n);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,s,a,o,l,u]=n;for(const f of n)this.remove(f);if(e===pc)r.up.set(0,1,0),r.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===L1)r.up.set(0,-1,0),r.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of n)this.add(f),f.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,o,l,u,f,d]=this.children,m=e.getRenderTarget(),y=e.getActiveCubeFace(),_=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const S=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,s),e.render(n,a),e.setRenderTarget(r,1,s),e.render(n,o),e.setRenderTarget(r,2,s),e.render(n,l),e.setRenderTarget(r,3,s),e.render(n,u),e.setRenderTarget(r,4,s),e.render(n,f),r.texture.generateMipmaps=S,e.setRenderTarget(r,5,s),e.render(n,d),e.setRenderTarget(m,y,_),e.xr.enabled=x,r.texture.needsPMREMUpdate=!0}}class CS extends Xr{constructor(e,n,r,s,a,o,l,u,f,d){e=e!==void 0?e:[],n=n!==void 0?n:cd,super(e,n,r,s,a,o,l,u,f,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class s8 extends Vf{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},s=[r,r,r,r,r,r];this.texture=new CS(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Is}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Sy(5,5,5),a=new Au({name:"CubemapFromEquirect",uniforms:Y0(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:_o,blending:rd});a.uniforms.tEquirect.value=n;const o=new $r(s,a),l=n.minFilter;return n.minFilter===Af&&(n.minFilter=Is),new r8(1,10,this).update(e,o),n.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,r,s){const a=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,s);e.setRenderTarget(a)}}let Kh=class extends vi{constructor(){super(),this.isGroup=!0,this.type="Group"}};const FK={type:"move"};class eA{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Kh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Kh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new pt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new pt),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Kh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new pt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new pt),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let s=null,a=null,o=null;const l=this._targetRay,u=this._grip,f=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(f&&e.hand){o=!0;for(const S of e.hand.values()){const T=n.getJointPose(S,r),b=this._getHandJoint(f,S);T!==null&&(b.matrix.fromArray(T.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=T.radius),b.visible=T!==null}const d=f.joints["index-finger-tip"],m=f.joints["thumb-tip"],y=d.position.distanceTo(m.position),_=.02,x=.005;f.inputState.pinching&&y>_+x?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&y<=_-x&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(a=n.getPose(e.gripSpace,r),a!==null&&(u.matrix.fromArray(a.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,a.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(a.linearVelocity)):u.hasLinearVelocity=!1,a.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(a.angularVelocity)):u.hasAngularVelocity=!1));l!==null&&(s=n.getPose(e.targetRaySpace,r),s===null&&a!==null&&(s=a),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(FK)))}return l!==null&&(l.visible=s!==null),u!==null&&(u.visible=a!==null),f!==null&&(f.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Kh;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class kC{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new ke(e),this.density=n}clone(){return new kC(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class zC{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new ke(e),this.near=n,this.far=r}clone(){return new zC(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class ZN extends vi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Bl,this.environmentIntensity=1,this.environmentRotation=new Bl,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class BC{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=N1,this.updateRanges=[],this.version=0,this.uuid=Ul()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let s=0,a=this.stride;s<a;s++)this.array[e+s]=n.array[r+s];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ul()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ul()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const co=new pt;class uy{constructor(e,n,r,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)co.fromBufferAttribute(this,n),co.applyMatrix4(e),this.setXYZ(n,co.x,co.y,co.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)co.fromBufferAttribute(this,n),co.applyNormalMatrix(e),this.setXYZ(n,co.x,co.y,co.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)co.fromBufferAttribute(this,n),co.transformDirection(e),this.setXYZ(n,co.x,co.y,co.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=mo(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Ln(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=Ln(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Ln(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Ln(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Ln(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=mo(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=mo(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=mo(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=mo(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Ln(n,this.array),r=Ln(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Ln(n,this.array),r=Ln(r,this.array),s=Ln(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=s,this}setXYZW(e,n,r,s,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=Ln(n,this.array),r=Ln(r,this.array),s=Ln(s,this.array),a=Ln(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=s,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[s+a])}return new zi(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new uy(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[s+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class FC extends Ga{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ke(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Fv;const Zb=new pt,Vv=new pt,Hv=new pt,Gv=new de,Qb=new de,a8=new cn,LT=new pt,Jb=new pt,UT=new pt,cz=new de,mO=new de,fz=new de;class QN extends vi{constructor(e=new FC){if(super(),this.isSprite=!0,this.type="Sprite",Fv===void 0){Fv=new Un;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new BC(n,5);Fv.setIndex([0,1,2,0,2,3]),Fv.setAttribute("position",new uy(r,3,0,!1)),Fv.setAttribute("uv",new uy(r,2,3,!1))}this.geometry=Fv,this.material=e,this.center=new de(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Vv.setFromMatrixScale(this.matrixWorld),a8.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Hv.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Vv.multiplyScalar(-Hv.z);const r=this.material.rotation;let s,a;r!==0&&(a=Math.cos(r),s=Math.sin(r));const o=this.center;kT(LT.set(-.5,-.5,0),Hv,o,Vv,s,a),kT(Jb.set(.5,-.5,0),Hv,o,Vv,s,a),kT(UT.set(.5,.5,0),Hv,o,Vv,s,a),cz.set(0,0),mO.set(1,0),fz.set(1,1);let l=e.ray.intersectTriangle(LT,Jb,UT,!1,Zb);if(l===null&&(kT(Jb.set(-.5,.5,0),Hv,o,Vv,s,a),mO.set(0,1),l=e.ray.intersectTriangle(LT,UT,Jb,!1,Zb),l===null))return;const u=e.ray.origin.distanceTo(Zb);u<e.near||u>e.far||n.push({distance:u,point:Zb.clone(),uv:Qo.getInterpolation(Zb,LT,Jb,UT,cz,mO,fz,new de),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function kT(i,e,n,r,s,a){Gv.subVectors(i,n).addScalar(.5).multiply(r),s!==void 0?(Qb.x=a*Gv.x-s*Gv.y,Qb.y=s*Gv.x+a*Gv.y):Qb.copy(Gv),i.copy(e),i.x+=Qb.x,i.y+=Qb.y,i.applyMatrix4(a8)}const zT=new pt,hz=new pt;class o8 extends vi{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,s=n.length;r<s;r++){const a=n[r];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const s=this.levels;let a;for(a=0;a<s.length&&!(n<s[a].distance);a++);return s.splice(a,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const n=this.levels;for(let r=0;r<n.length;r++)if(n[r].distance===e){const s=n.splice(r,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,s;for(r=1,s=n.length;r<s;r++){let a=n[r].distance;if(n[r].object.visible&&(a-=a*n[r].hysteresis),e<a)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){zT.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(zT);this.getObjectForDistance(s).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){zT.setFromMatrixPosition(e.matrixWorld),hz.setFromMatrixPosition(this.matrixWorld);const r=zT.distanceTo(hz)/e.zoom;n[0].object.visible=!0;let s,a;for(s=1,a=n.length;s<a;s++){let o=n[s].distance;if(n[s].object.visible&&(o-=o*n[s].hysteresis),r>=o)n[s-1].object.visible=!1,n[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<a;s++)n[s].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let s=0,a=r.length;s<a;s++){const o=r[s];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const dz=new pt,pz=new di,mz=new di,VK=new pt,gz=new cn,BT=new pt,gO=new da,yz=new cn,yO=new C_;class l8 extends $r{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=ED,this.bindMatrix=new cn,this.bindMatrixInverse=new cn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ha),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,BT),this.boundingBox.expandByPoint(BT)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new da),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,BT),this.boundingSphere.expandByPoint(BT)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,s=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),gO.copy(this.boundingSphere),gO.applyMatrix4(s),e.ray.intersectsSphere(gO)!==!1&&(yz.copy(s).invert(),yO.copy(e.ray).applyMatrix4(yz),!(this.boundingBox!==null&&yO.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,yO)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new di,n=this.geometry.attributes.skinWeight;for(let r=0,s=n.count;r<s;r++){e.fromBufferAttribute(n,r);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===ED?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===kH?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,s=this.geometry;pz.fromBufferAttribute(s.attributes.skinIndex,e),mz.fromBufferAttribute(s.attributes.skinWeight,e),dz.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let a=0;a<4;a++){const o=mz.getComponent(a);if(o!==0){const l=pz.getComponent(a);gz.multiplyMatrices(r.bones[l].matrixWorld,r.boneInverses[l]),n.addScaledVector(VK.copy(dz).applyMatrix4(gz),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class JN extends vi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class If extends Xr{constructor(e=null,n=1,r=1,s,a,o,l,u,f=fa,d=fa,m,y){super(null,o,l,u,f,d,s,a,m,y),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const vz=new cn,HK=new cn;class VC{constructor(e=[],n=[]){this.uuid=Ul(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,s=this.bones.length;r<s;r++)this.boneInverses.push(new cn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new cn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,s=this.boneTexture;for(let a=0,o=e.length;a<o;a++){const l=e[a]?e[a].matrixWorld:HK;vz.multiplyMatrices(l,n[a]),vz.toArray(r,a*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new VC(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new If(n,e,e,Ba,Jo);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const s=this.bones[n];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,s=e.bones.length;r<s;r++){const a=e.bones[r];let o=n[a];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),o=new JN),this.bones.push(o),this.boneInverses.push(new cn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let s=0,a=n.length;s<a;s++){const o=n[s];e.bones.push(o.uuid);const l=r[s];e.boneInverses.push(l.toArray())}return e}}class K0 extends zi{constructor(e,n,r,s=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const jv=new cn,_z=new cn,FT=[],bz=new ha,GK=new cn,tx=new $r,ex=new da;class u8 extends $r{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new K0(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<r;s++)this.setMatrixAt(s,GK)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new ha),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,jv),bz.copy(e.boundingBox).applyMatrix4(jv),this.boundingBox.union(bz)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new da),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,jv),ex.copy(e.boundingSphere).applyMatrix4(jv),this.boundingSphere.union(ex)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const r=n.morphTargetInfluences,s=this.morphTexture.source.data.data,a=r.length+1,o=e*a+1;for(let l=0;l<r.length;l++)r[l]=s[o+l]}raycast(e,n){const r=this.matrixWorld,s=this.count;if(tx.geometry=this.geometry,tx.material=this.material,tx.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ex.copy(this.boundingSphere),ex.applyMatrix4(r),e.ray.intersectsSphere(ex)!==!1))for(let a=0;a<s;a++){this.getMatrixAt(a,jv),_z.multiplyMatrices(r,jv),tx.matrixWorld=_z,tx.raycast(e,FT);for(let o=0,l=FT.length;o<l;o++){const u=FT[o];u.instanceId=a,u.object=this,n.push(u)}FT.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new K0(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const r=n.morphTargetInfluences,s=r.length+1;this.morphTexture===null&&(this.morphTexture=new If(new Float32Array(s*this.count),s,this.count,OC,Jo));const a=this.morphTexture.source.data.data;let o=0;for(let f=0;f<r.length;f++)o+=r[f];const l=this.geometry.morphTargetsRelative?1:1-o,u=s*e;a[u]=l,a.set(r,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const vO=new pt,jK=new pt,qK=new Dn;class Op{constructor(e=new pt(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,s){return this.normal.set(e,n,r),this.constant=s,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const s=vO.subVectors(r,n).cross(jK.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(vO),s=this.normal.dot(r);if(s===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/s;return a<0||a>1?null:n.copy(e.start).addScaledVector(r,a)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||qK.getNormalMatrix(e),s=this.coplanarPoint(vO).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-s.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const cg=new da,VT=new pt;class RS{constructor(e=new Op,n=new Op,r=new Op,s=new Op,a=new Op,o=new Op){this.planes=[e,n,r,s,a,o]}set(e,n,r,s,a,o){const l=this.planes;return l[0].copy(e),l[1].copy(n),l[2].copy(r),l[3].copy(s),l[4].copy(a),l[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=pc){const r=this.planes,s=e.elements,a=s[0],o=s[1],l=s[2],u=s[3],f=s[4],d=s[5],m=s[6],y=s[7],_=s[8],x=s[9],S=s[10],T=s[11],b=s[12],M=s[13],R=s[14],A=s[15];if(r[0].setComponents(u-a,y-f,T-_,A-b).normalize(),r[1].setComponents(u+a,y+f,T+_,A+b).normalize(),r[2].setComponents(u+o,y+d,T+x,A+M).normalize(),r[3].setComponents(u-o,y-d,T-x,A-M).normalize(),r[4].setComponents(u-l,y-m,T-S,A-R).normalize(),n===pc)r[5].setComponents(u+l,y+m,T+S,A+R).normalize();else if(n===L1)r[5].setComponents(l,m,S,R).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),cg.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),cg.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(cg)}intersectsSprite(e){return cg.center.set(0,0,0),cg.radius=.7071067811865476,cg.applyMatrix4(e.matrixWorld),this.intersectsSphere(cg)}intersectsSphere(e){const n=this.planes,r=e.center,s=-e.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(r)<s)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const s=n[r];if(VT.x=s.normal.x>0?e.max.x:e.min.x,VT.y=s.normal.y>0?e.max.y:e.min.y,VT.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(VT)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function _O(i,e){return i-e}function $K(i,e){return i.z-e.z}function WK(i,e){return e.z-i.z}class XK{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n,r,s){const a=this.pool,o=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const l=a[this.index];o.push(l),this.index++,l.start=e,l.count=n,l.z=r,l.index=s}reset(){this.list.length=0,this.index=0}}const qo=new cn,YK=new ke(1,1,1),bO=new RS,HT=new ha,fg=new da,nx=new pt,xz=new pt,KK=new pt,xO=new XK,Ia=new $r,GT=[];function ZK(i,e,n=0){const r=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const s=i.count;for(let a=0;a<s;a++)for(let o=0;o<r;o++)e.setComponent(a+n,o,i.getComponent(a,o))}else e.array.set(i.array,n*r);e.needsUpdate=!0}function hg(i,e){if(i.constructor!==e.constructor){const n=Math.min(i.length,e.length);for(let r=0;r<n;r++)e[r]=i[r]}else{const n=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,n))}}class c8 extends $r{constructor(e,n,r=n*2,s){super(new Un,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new If(n,e,e,Ba,Jo);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Uint32Array(e*e),r=new If(n,e,e,AS,fd);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Float32Array(e*e*4).fill(1),r=new If(n,e,e,Ba,Jo);r.colorSpace=li.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const o=e.getAttribute(a),{array:l,itemSize:u,normalized:f}=o,d=new l.constructor(r*u),m=new zi(d,u,f);n.setAttribute(a,m)}if(e.getIndex()!==null){const a=r>65535?new Uint32Array(s):new Uint16Array(s);n.setIndex(new zi(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(!e.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const s=e.getAttribute(r),a=n.getAttribute(r);if(s.itemSize!==a.itemSize||s.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const n=this._instanceInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const n=this._geometryInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ha);const e=this.boundingBox,n=this._instanceInfo;e.makeEmpty();for(let r=0,s=n.length;r<s;r++){if(n[r].active===!1)continue;const a=n[r].geometryIndex;this.getMatrixAt(r,qo),this.getBoundingBoxAt(a,HT).applyMatrix4(qo),e.union(HT)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new da);const e=this.boundingSphere,n=this._instanceInfo;e.makeEmpty();for(let r=0,s=n.length;r<s;r++){if(n[r].active===!1)continue;const a=n[r].geometryIndex;this.getMatrixAt(r,qo),this.getBoundingSphereAt(a,fg).applyMatrix4(qo),e.union(fg)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(_O),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=r):(s=this._instanceInfo.length,this._instanceInfo.push(r));const a=this._matricesTexture;qo.identity().toArray(a.image.data,s*16),a.needsUpdate=!0;const o=this._colorsTexture;return o&&(YK.toArray(o.image.data,s*4),o.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(e,n=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=n===-1?e.getAttribute("position").count:n;const o=e.getIndex();if(o!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=r===-1?o.count:r),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(_O),u=this._availableGeometryIds.shift(),a[u]=s):(u=this._geometryCount,this._geometryCount++,a.push(s)),this.setGeometryAt(u,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,u}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,s=r.getIndex()!==null,a=r.getIndex(),o=n.getIndex(),l=this._geometryInfo[e];if(s&&o.count>l.reservedIndexCount||n.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const u=l.vertexStart,f=l.reservedVertexCount;l.vertexCount=n.getAttribute("position").count;for(const d in r.attributes){const m=n.getAttribute(d),y=r.getAttribute(d);ZK(m,y,u);const _=m.itemSize;for(let x=m.count,S=f;x<S;x++){const T=u+x;for(let b=0;b<_;b++)y.setComponent(T,b,0)}y.needsUpdate=!0,y.addUpdateRange(u*_,f*_)}if(s){const d=l.indexStart,m=l.reservedIndexCount;l.indexCount=n.getIndex().count;for(let y=0;y<o.count;y++)a.setX(d+y,u+o.getX(y));for(let y=o.count,_=m;y<_;y++)a.setX(d+y,u);a.needsUpdate=!0,a.addUpdateRange(d,l.reservedIndexCount)}return l.start=s?l.indexStart:l.vertexStart,l.count=s?l.indexCount:l.vertexCount,l.boundingBox=null,n.boundingBox!==null&&(l.boundingBox=n.boundingBox.clone()),l.boundingSphere=null,n.boundingSphere!==null&&(l.boundingSphere=n.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._geometryInfo;if(e>=n.length||n[e].active===!1)return this;const r=this._instanceInfo;for(let s=0,a=r.length;s<a;s++)r[s].active&&r[s].geometryIndex===e&&this.deleteInstance(s);return n[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,n=0;const r=this._geometryInfo,s=r.map((o,l)=>l).sort((o,l)=>r[o].vertexStart-r[l].vertexStart),a=this.geometry;for(let o=0,l=r.length;o<l;o++){const u=s[o],f=r[u];if(f.active!==!1){if(a.index!==null){if(f.indexStart!==n){const{indexStart:d,vertexStart:m,reservedIndexCount:y}=f,_=a.index,x=_.array,S=e-m;for(let T=d;T<d+y;T++)x[T]=x[T]+S;_.array.copyWithin(n,d,d+y),_.addUpdateRange(n,y),f.indexStart=n}n+=f.reservedIndexCount}if(f.vertexStart!==e){const{vertexStart:d,reservedVertexCount:m}=f,y=a.attributes;for(const _ in y){const x=y[_],{array:S,itemSize:T}=x;S.copyWithin(e*T,d*T,(d+m)*T),x.addUpdateRange(e*T,m*T)}f.vertexStart=e}e+=f.reservedVertexCount,f.start=a.index?f.indexStart:f.vertexStart,this._nextIndexStart=a.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const a=new ha,o=r.index,l=r.attributes.position;for(let u=s.start,f=s.start+s.count;u<f;u++){let d=u;o&&(d=o.getX(d)),a.expandByPoint(nx.fromBufferAttribute(l,d))}s.boundingBox=a}return n.copy(s.boundingBox),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const a=new da;this.getBoundingBoxAt(e,HT),HT.getCenter(a.center);const o=r.index,l=r.attributes.position;let u=0;for(let f=s.start,d=s.start+s.count;f<d;f++){let m=f;o&&(m=o.getX(m)),nx.fromBufferAttribute(l,m),u=Math.max(u,a.center.distanceToSquared(nx))}a.radius=Math.sqrt(u),s.boundingSphere=a}return n.copy(s.boundingSphere),n}setMatrixAt(e,n){this.validateInstanceId(e);const r=this._matricesTexture,s=this._matricesTexture.image.data;return n.toArray(s,e*16),r.needsUpdate=!0,this}getMatrixAt(e,n){return this.validateInstanceId(e),n.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,n){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),n.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,n){return this.validateInstanceId(e),n.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,n){return this.validateInstanceId(e),this._instanceInfo[e].visible===n?this:(this._instanceInfo[e].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,n){return this.validateInstanceId(e),this.validateGeometryId(n),this._instanceInfo[e].geometryIndex=n,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,n={}){this.validateGeometryId(e);const r=this._geometryInfo[e];return n.vertexStart=r.vertexStart,n.vertexCount=r.vertexCount,n.reservedVertexCount=r.reservedVertexCount,n.indexStart=r.indexStart,n.indexCount=r.indexCount,n.reservedIndexCount=r.reservedIndexCount,n.start=r.start,n.count=r.count,n}setInstanceCount(e){const n=this._availableInstanceIds,r=this._instanceInfo;for(n.sort(_O);n[n.length-1]===r.length;)r.pop(),n.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const s=new Int32Array(e),a=new Int32Array(e);hg(this._multiDrawCounts,s),hg(this._multiDrawStarts,a),this._multiDrawCounts=s,this._multiDrawStarts=a,this._maxInstanceCount=e;const o=this._indirectTexture,l=this._matricesTexture,u=this._colorsTexture;o.dispose(),this._initIndirectTexture(),hg(o.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),hg(l.image.data,this._matricesTexture.image.data),u&&(u.dispose(),this._initColorsTexture(),hg(u.image.data,this._colorsTexture.image.data))}setGeometrySize(e,n){const r=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...r.map(l=>l.vertexStart+l.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${n}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(u=>u.indexStart+u.reservedIndexCount))>n)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${n}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Un,this._initializeGeometry(a));const o=this.geometry;a.index&&hg(a.index.array,o.index.array);for(const l in a.attributes)hg(a.attributes[l].array,o.attributes[l].array)}raycast(e,n){const r=this._instanceInfo,s=this._geometryInfo,a=this.matrixWorld,o=this.geometry;Ia.material=this.material,Ia.geometry.index=o.index,Ia.geometry.attributes=o.attributes,Ia.geometry.boundingBox===null&&(Ia.geometry.boundingBox=new ha),Ia.geometry.boundingSphere===null&&(Ia.geometry.boundingSphere=new da);for(let l=0,u=r.length;l<u;l++){if(!r[l].visible||!r[l].active)continue;const f=r[l].geometryIndex,d=s[f];Ia.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(l,Ia.matrixWorld).premultiply(a),this.getBoundingBoxAt(f,Ia.geometry.boundingBox),this.getBoundingSphereAt(f,Ia.geometry.boundingSphere),Ia.raycast(e,GT);for(let m=0,y=GT.length;m<y;m++){const _=GT[m];_.object=this,_.batchId=l,n.push(_)}GT.length=0}Ia.material=null,Ia.geometry.index=null,Ia.geometry.attributes={},Ia.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(n=>({...n,boundingBox:n.boundingBox!==null?n.boundingBox.clone():null,boundingSphere:n.boundingSphere!==null?n.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(n=>({...n})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,n,r,s,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=s.getIndex(),l=o===null?1:o.array.BYTES_PER_ELEMENT,u=this._instanceInfo,f=this._multiDrawStarts,d=this._multiDrawCounts,m=this._geometryInfo,y=this.perObjectFrustumCulled,_=this._indirectTexture,x=_.image.data;y&&(qo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),bO.setFromProjectionMatrix(qo,e.coordinateSystem));let S=0;if(this.sortObjects){qo.copy(this.matrixWorld).invert(),nx.setFromMatrixPosition(r.matrixWorld).applyMatrix4(qo),xz.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(qo);for(let M=0,R=u.length;M<R;M++)if(u[M].visible&&u[M].active){const A=u[M].geometryIndex;this.getMatrixAt(M,qo),this.getBoundingSphereAt(A,fg).applyMatrix4(qo);let I=!1;if(y&&(I=!bO.intersectsSphere(fg)),!I){const k=m[A],N=KK.subVectors(fg.center,nx).dot(xz);xO.push(k.start,k.count,N,M)}}const T=xO.list,b=this.customSort;b===null?T.sort(a.transparent?WK:$K):b.call(this,T,r);for(let M=0,R=T.length;M<R;M++){const A=T[M];f[S]=A.start*l,d[S]=A.count,x[S]=A.index,S++}xO.reset()}else for(let T=0,b=u.length;T<b;T++)if(u[T].visible&&u[T].active){const M=u[T].geometryIndex;let R=!1;if(y&&(this.getMatrixAt(T,qo),this.getBoundingSphereAt(M,fg).applyMatrix4(qo),R=!bO.intersectsSphere(fg)),!R){const A=m[M];f[S]=A.start*l,d[S]=A.count,x[S]=T,S++}}_.needsUpdate=!0,this._multiDrawCount=S,this._visibilityChanged=!1}onBeforeShadow(e,n,r,s,a,o){this.onBeforeRender(e,null,s,a,o)}}class ja extends Ga{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ke(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const pM=new pt,mM=new pt,Sz=new cn,ix=new C_,jT=new da,SO=new pt,Ez=new pt;class hd extends vi{constructor(e=new Un,n=new ja){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let s=1,a=n.count;s<a;s++)pM.fromBufferAttribute(n,s-1),mM.fromBufferAttribute(n,s),r[s]=r[s-1],r[s]+=pM.distanceTo(mM);e.setAttribute("lineDistance",new qe(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,s=this.matrixWorld,a=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),jT.copy(r.boundingSphere),jT.applyMatrix4(s),jT.radius+=a,e.ray.intersectsSphere(jT)===!1)return;Sz.copy(s).invert(),ix.copy(e.ray).applyMatrix4(Sz);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=this.isLineSegments?2:1,d=r.index,y=r.attributes.position;if(d!==null){const _=Math.max(0,o.start),x=Math.min(d.count,o.start+o.count);for(let S=_,T=x-1;S<T;S+=f){const b=d.getX(S),M=d.getX(S+1),R=qT(this,e,ix,u,b,M,S);R&&n.push(R)}if(this.isLineLoop){const S=d.getX(x-1),T=d.getX(_),b=qT(this,e,ix,u,S,T,x-1);b&&n.push(b)}}else{const _=Math.max(0,o.start),x=Math.min(y.count,o.start+o.count);for(let S=_,T=x-1;S<T;S+=f){const b=qT(this,e,ix,u,S,S+1,S);b&&n.push(b)}if(this.isLineLoop){const S=qT(this,e,ix,u,x-1,_,x-1);S&&n.push(S)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const s=n[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=s.length;a<o;a++){const l=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}}function qT(i,e,n,r,s,a,o){const l=i.geometry.attributes.position;if(pM.fromBufferAttribute(l,s),mM.fromBufferAttribute(l,a),n.distanceSqToSegment(pM,mM,SO,Ez)>r)return;SO.applyMatrix4(i.matrixWorld);const f=e.ray.origin.distanceTo(SO);if(!(f<e.near||f>e.far))return{distance:f,point:Ez.clone().applyMatrix4(i.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:i}}const Tz=new pt,wz=new pt;class Yf extends hd{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let s=0,a=n.count;s<a;s+=2)Tz.fromBufferAttribute(n,s),wz.fromBufferAttribute(n,s+1),r[s]=s===0?0:r[s-1],r[s+1]=r[s]+Tz.distanceTo(wz);e.setAttribute("lineDistance",new qe(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class f8 extends hd{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class t3 extends Ga{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ke(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Az=new cn,AD=new C_,$T=new da,WT=new pt;class h8 extends vi{constructor(e=new Un,n=new t3){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,s=this.matrixWorld,a=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),$T.copy(r.boundingSphere),$T.applyMatrix4(s),$T.radius+=a,e.ray.intersectsSphere($T)===!1)return;Az.copy(s).invert(),AD.copy(e.ray).applyMatrix4(Az);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=r.index,m=r.attributes.position;if(f!==null){const y=Math.max(0,o.start),_=Math.min(f.count,o.start+o.count);for(let x=y,S=_;x<S;x++){const T=f.getX(x);WT.fromBufferAttribute(m,T),Mz(WT,T,u,s,e,n,this)}}else{const y=Math.max(0,o.start),_=Math.min(m.count,o.start+o.count);for(let x=y,S=_;x<S;x++)WT.fromBufferAttribute(m,x),Mz(WT,x,u,s,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const s=n[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=s.length;a<o;a++){const l=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}}function Mz(i,e,n,r,s,a,o){const l=AD.distanceSqToPoint(i);if(l<n){const u=new pt;AD.closestPointToPoint(i,u),u.applyMatrix4(r);const f=s.ray.origin.distanceTo(u);if(f<s.near||f>s.far)return;a.push({distance:f,distanceToRay:Math.sqrt(l),point:u,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class d8 extends Xr{constructor(e,n,r,s,a,o,l,u,f){super(e,n,r,s,a,o,l,u,f),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Is,this.magFilter=a!==void 0?a:Is,this.generateMipmaps=!1;const d=this;function m(){d.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class QK extends d8{constructor(e,n,r,s,a,o,l,u){super({},e,n,r,s,a,o,l,u),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class JK extends Xr{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=fa,this.minFilter=fa,this.generateMipmaps=!1,this.needsUpdate=!0}}class HC extends Xr{constructor(e,n,r,s,a,o,l,u,f,d,m,y){super(null,o,l,u,f,d,s,a,m,y),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class tZ extends HC{constructor(e,n,r,s,a,o){super(e,n,r,a,o),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=Su,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class eZ extends HC{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,cd),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class p8 extends Xr{constructor(e,n,r,s,a,o,l,u,f){super(e,n,r,s,a,o,l,u,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class e3 extends Xr{constructor(e,n,r,s,a,o,l,u,f,d=Xg){if(d!==Xg&&d!==ly)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&d===Xg&&(r=fd),r===void 0&&d===ly&&(r=oy),super(null,s,a,o,l,u,d,r,f),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=l!==void 0?l:fa,this.minFilter=u!==void 0?u:fa,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new zp(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class wc{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,s=this.getPoint(0),a=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),a+=r.distanceTo(s),n.push(a),s=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n=null){const r=this.getLengths();let s=0;const a=r.length;let o;n?o=n:o=e*r[a-1];let l=0,u=a-1,f;for(;l<=u;)if(s=Math.floor(l+(u-l)/2),f=r[s]-o,f<0)l=s+1;else if(f>0)u=s-1;else{u=s;break}if(s=u,r[s]===o)return s/(a-1);const d=r[s],y=r[s+1]-d,_=(o-d)/y;return(s+_)/(a-1)}getTangent(e,n){let s=e-1e-4,a=e+1e-4;s<0&&(s=0),a>1&&(a=1);const o=this.getPoint(s),l=this.getPoint(a),u=n||(o.isVector2?new de:new pt);return u.copy(l).sub(o).normalize(),u}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n=!1){const r=new pt,s=[],a=[],o=[],l=new pt,u=new cn;for(let _=0;_<=e;_++){const x=_/e;s[_]=this.getTangentAt(x,new pt)}a[0]=new pt,o[0]=new pt;let f=Number.MAX_VALUE;const d=Math.abs(s[0].x),m=Math.abs(s[0].y),y=Math.abs(s[0].z);d<=f&&(f=d,r.set(1,0,0)),m<=f&&(f=m,r.set(0,1,0)),y<=f&&r.set(0,0,1),l.crossVectors(s[0],r).normalize(),a[0].crossVectors(s[0],l),o[0].crossVectors(s[0],a[0]);for(let _=1;_<=e;_++){if(a[_]=a[_-1].clone(),o[_]=o[_-1].clone(),l.crossVectors(s[_-1],s[_]),l.length()>Number.EPSILON){l.normalize();const x=Math.acos(Cn(s[_-1].dot(s[_]),-1,1));a[_].applyMatrix4(u.makeRotationAxis(l,x))}o[_].crossVectors(s[_],a[_])}if(n===!0){let _=Math.acos(Cn(a[0].dot(a[e]),-1,1));_/=e,s[0].dot(l.crossVectors(a[0],a[e]))>0&&(_=-_);for(let x=1;x<=e;x++)a[x].applyMatrix4(u.makeRotationAxis(s[x],_*x)),o[x].crossVectors(s[x],a[x])}return{tangents:s,normals:a,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class GC extends wc{constructor(e=0,n=0,r=1,s=1,a=0,o=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=s,this.aStartAngle=a,this.aEndAngle=o,this.aClockwise=l,this.aRotation=u}getPoint(e,n=new de){const r=n,s=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const o=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=s;for(;a>s;)a-=s;a<Number.EPSILON&&(o?a=0:a=s),this.aClockwise===!0&&!o&&(a===s?a=-s:a=a-s);const l=this.aStartAngle+e*a;let u=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const d=Math.cos(this.aRotation),m=Math.sin(this.aRotation),y=u-this.aX,_=f-this.aY;u=y*d-_*m+this.aX,f=y*m+_*d+this.aY}return r.set(u,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class m8 extends GC{constructor(e,n,r,s,a,o){super(e,n,r,r,s,a,o),this.isArcCurve=!0,this.type="ArcCurve"}}function n3(){let i=0,e=0,n=0,r=0;function s(a,o,l,u){i=a,e=l,n=-3*a+3*o-2*l-u,r=2*a-2*o+l+u}return{initCatmullRom:function(a,o,l,u,f){s(o,l,f*(l-a),f*(u-o))},initNonuniformCatmullRom:function(a,o,l,u,f,d,m){let y=(o-a)/f-(l-a)/(f+d)+(l-o)/d,_=(l-o)/d-(u-o)/(d+m)+(u-l)/m;y*=d,_*=d,s(o,l,y,_)},calc:function(a){const o=a*a,l=o*a;return i+e*a+n*o+r*l}}}const XT=new pt,EO=new n3,TO=new n3,wO=new n3;class g8 extends wc{constructor(e=[],n=!1,r="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=s}getPoint(e,n=new pt){const r=n,s=this.points,a=s.length,o=(a-(this.closed?0:1))*e;let l=Math.floor(o),u=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/a)+1)*a:u===0&&l===a-1&&(l=a-2,u=1);let f,d;this.closed||l>0?f=s[(l-1)%a]:(XT.subVectors(s[0],s[1]).add(s[0]),f=XT);const m=s[l%a],y=s[(l+1)%a];if(this.closed||l+2<a?d=s[(l+2)%a]:(XT.subVectors(s[a-1],s[a-2]).add(s[a-1]),d=XT),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let x=Math.pow(f.distanceToSquared(m),_),S=Math.pow(m.distanceToSquared(y),_),T=Math.pow(y.distanceToSquared(d),_);S<1e-4&&(S=1),x<1e-4&&(x=S),T<1e-4&&(T=S),EO.initNonuniformCatmullRom(f.x,m.x,y.x,d.x,x,S,T),TO.initNonuniformCatmullRom(f.y,m.y,y.y,d.y,x,S,T),wO.initNonuniformCatmullRom(f.z,m.z,y.z,d.z,x,S,T)}else this.curveType==="catmullrom"&&(EO.initCatmullRom(f.x,m.x,y.x,d.x,this.tension),TO.initCatmullRom(f.y,m.y,y.y,d.y,this.tension),wO.initCatmullRom(f.z,m.z,y.z,d.z,this.tension));return r.set(EO.calc(u),TO.calc(u),wO.calc(u)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const s=e.points[n];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const s=this.points[n];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const s=e.points[n];this.points.push(new pt().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Cz(i,e,n,r,s){const a=(r-e)*.5,o=(s-n)*.5,l=i*i,u=i*l;return(2*n-2*r+a+o)*u+(-3*n+3*r-2*a-o)*l+a*i+n}function nZ(i,e){const n=1-i;return n*n*e}function iZ(i,e){return 2*(1-i)*i*e}function rZ(i,e){return i*i*e}function s1(i,e,n,r){return nZ(i,e)+iZ(i,n)+rZ(i,r)}function sZ(i,e){const n=1-i;return n*n*n*e}function aZ(i,e){const n=1-i;return 3*n*n*i*e}function oZ(i,e){return 3*(1-i)*i*i*e}function lZ(i,e){return i*i*i*e}function a1(i,e,n,r,s){return sZ(i,e)+aZ(i,n)+oZ(i,r)+lZ(i,s)}class i3 extends wc{constructor(e=new de,n=new de,r=new de,s=new de){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=s}getPoint(e,n=new de){const r=n,s=this.v0,a=this.v1,o=this.v2,l=this.v3;return r.set(a1(e,s.x,a.x,o.x,l.x),a1(e,s.y,a.y,o.y,l.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class r3 extends wc{constructor(e=new pt,n=new pt,r=new pt,s=new pt){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=s}getPoint(e,n=new pt){const r=n,s=this.v0,a=this.v1,o=this.v2,l=this.v3;return r.set(a1(e,s.x,a.x,o.x,l.x),a1(e,s.y,a.y,o.y,l.y),a1(e,s.z,a.z,o.z,l.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class s3 extends wc{constructor(e=new de,n=new de){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new de){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new de){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class y8 extends wc{constructor(e=new pt,n=new pt){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new pt){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new pt){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class a3 extends wc{constructor(e=new de,n=new de,r=new de){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new de){const r=n,s=this.v0,a=this.v1,o=this.v2;return r.set(s1(e,s.x,a.x,o.x),s1(e,s.y,a.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jC extends wc{constructor(e=new pt,n=new pt,r=new pt){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new pt){const r=n,s=this.v0,a=this.v1,o=this.v2;return r.set(s1(e,s.x,a.x,o.x),s1(e,s.y,a.y,o.y),s1(e,s.z,a.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class o3 extends wc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new de){const r=n,s=this.points,a=(s.length-1)*e,o=Math.floor(a),l=a-o,u=s[o===0?o:o-1],f=s[o],d=s[o>s.length-2?s.length-1:o+1],m=s[o>s.length-3?s.length-1:o+2];return r.set(Cz(l,u.x,f.x,d.x,m.x),Cz(l,u.y,f.y,d.y,m.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const s=e.points[n];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const s=this.points[n];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const s=e.points[n];this.points.push(new de().fromArray(s))}return this}}var gM=Object.freeze({__proto__:null,ArcCurve:m8,CatmullRomCurve3:g8,CubicBezierCurve:i3,CubicBezierCurve3:r3,EllipseCurve:GC,LineCurve:s3,LineCurve3:y8,QuadraticBezierCurve:a3,QuadraticBezierCurve3:jC,SplineCurve:o3});class v8 extends wc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new gM[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),s=this.getCurveLengths();let a=0;for(;a<s.length;){if(s[a]>=r){const o=s[a]-r,l=this.curves[a],u=l.getLength(),f=u===0?0:1-o/u;return l.getPointAt(f,n)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,s=this.curves.length;r<s;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let s=0,a=this.curves;s<a.length;s++){const o=a[s],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,u=o.getPoints(l);for(let f=0;f<u.length;f++){const d=u[f];r&&r.equals(d)||(n.push(d),r=d)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const s=e.curves[n];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const s=this.curves[n];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const s=e.curves[n];this.curves.push(new gM[s.type]().fromJSON(s))}return this}}class k1 extends v8{constructor(e){super(),this.type="Path",this.currentPoint=new de,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new s3(this.currentPoint.clone(),new de(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,s){const a=new a3(this.currentPoint.clone(),new de(e,n),new de(r,s));return this.curves.push(a),this.currentPoint.set(r,s),this}bezierCurveTo(e,n,r,s,a,o){const l=new i3(this.currentPoint.clone(),new de(e,n),new de(r,s),new de(a,o));return this.curves.push(l),this.currentPoint.set(a,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new o3(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,s,a,o){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+l,n+u,r,s,a,o),this}absarc(e,n,r,s,a,o){return this.absellipse(e,n,r,r,s,a,o),this}ellipse(e,n,r,s,a,o,l,u){const f=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+f,n+d,r,s,a,o,l,u),this}absellipse(e,n,r,s,a,o,l,u){const f=new GC(e,n,r,s,a,o,l,u);if(this.curves.length>0){const m=f.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(f);const d=f.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class OS extends Un{constructor(e=[new de(0,-.5),new de(.5,0),new de(0,.5)],n=12,r=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:s},n=Math.floor(n),s=Cn(s,0,Math.PI*2);const a=[],o=[],l=[],u=[],f=[],d=1/n,m=new pt,y=new de,_=new pt,x=new pt,S=new pt;let T=0,b=0;for(let M=0;M<=e.length-1;M++)switch(M){case 0:T=e[M+1].x-e[M].x,b=e[M+1].y-e[M].y,_.x=b*1,_.y=-T,_.z=b*0,S.copy(_),_.normalize(),u.push(_.x,_.y,_.z);break;case e.length-1:u.push(S.x,S.y,S.z);break;default:T=e[M+1].x-e[M].x,b=e[M+1].y-e[M].y,_.x=b*1,_.y=-T,_.z=b*0,x.copy(_),_.x+=S.x,_.y+=S.y,_.z+=S.z,_.normalize(),u.push(_.x,_.y,_.z),S.copy(x)}for(let M=0;M<=n;M++){const R=r+M*d*s,A=Math.sin(R),I=Math.cos(R);for(let k=0;k<=e.length-1;k++){m.x=e[k].x*A,m.y=e[k].y,m.z=e[k].x*I,o.push(m.x,m.y,m.z),y.x=M/n,y.y=k/(e.length-1),l.push(y.x,y.y);const N=u[3*k+0]*A,L=u[3*k+1],U=u[3*k+0]*I;f.push(N,L,U)}}for(let M=0;M<n;M++)for(let R=0;R<e.length-1;R++){const A=R+M*e.length,I=A,k=A+e.length,N=A+e.length+1,L=A+1;a.push(I,k,L),a.push(N,L,k)}this.setIndex(a),this.setAttribute("position",new qe(o,3)),this.setAttribute("uv",new qe(l,2)),this.setAttribute("normal",new qe(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new OS(e.points,e.segments,e.phiStart,e.phiLength)}}class qC extends OS{constructor(e=1,n=1,r=4,s=8){const a=new k1;a.absarc(0,-n/2,e,Math.PI*1.5,0),a.absarc(0,n/2,e,0,Math.PI*.5),super(a.getPoints(r),s),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:s}}static fromJSON(e){return new qC(e.radius,e.length,e.capSegments,e.radialSegments)}}class $C extends Un{constructor(e=1,n=32,r=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:s},n=Math.max(3,n);const a=[],o=[],l=[],u=[],f=new pt,d=new de;o.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let m=0,y=3;m<=n;m++,y+=3){const _=r+m/n*s;f.x=e*Math.cos(_),f.y=e*Math.sin(_),o.push(f.x,f.y,f.z),l.push(0,0,1),d.x=(o[y]/e+1)/2,d.y=(o[y+1]/e+1)/2,u.push(d.x,d.y)}for(let m=1;m<=n;m++)a.push(m,m+1,0);this.setIndex(a),this.setAttribute("position",new qe(o,3)),this.setAttribute("normal",new qe(l,3)),this.setAttribute("uv",new qe(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $C(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Ey extends Un{constructor(e=1,n=1,r=1,s=32,a=1,o=!1,l=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:s,heightSegments:a,openEnded:o,thetaStart:l,thetaLength:u};const f=this;s=Math.floor(s),a=Math.floor(a);const d=[],m=[],y=[],_=[];let x=0;const S=[],T=r/2;let b=0;M(),o===!1&&(e>0&&R(!0),n>0&&R(!1)),this.setIndex(d),this.setAttribute("position",new qe(m,3)),this.setAttribute("normal",new qe(y,3)),this.setAttribute("uv",new qe(_,2));function M(){const A=new pt,I=new pt;let k=0;const N=(n-e)/r;for(let L=0;L<=a;L++){const U=[],O=L/a,F=O*(n-e)+e;for(let H=0;H<=s;H++){const V=H/s,X=V*u+l,J=Math.sin(X),q=Math.cos(X);I.x=F*J,I.y=-O*r+T,I.z=F*q,m.push(I.x,I.y,I.z),A.set(J,N,q).normalize(),y.push(A.x,A.y,A.z),_.push(V,1-O),U.push(x++)}S.push(U)}for(let L=0;L<s;L++)for(let U=0;U<a;U++){const O=S[U][L],F=S[U+1][L],H=S[U+1][L+1],V=S[U][L+1];(e>0||U!==0)&&(d.push(O,F,V),k+=3),(n>0||U!==a-1)&&(d.push(F,H,V),k+=3)}f.addGroup(b,k,0),b+=k}function R(A){const I=x,k=new de,N=new pt;let L=0;const U=A===!0?e:n,O=A===!0?1:-1;for(let H=1;H<=s;H++)m.push(0,T*O,0),y.push(0,O,0),_.push(.5,.5),x++;const F=x;for(let H=0;H<=s;H++){const X=H/s*u+l,J=Math.cos(X),q=Math.sin(X);N.x=U*q,N.y=T*O,N.z=U*J,m.push(N.x,N.y,N.z),y.push(0,O,0),k.x=J*.5+.5,k.y=q*.5*O+.5,_.push(k.x,k.y),x++}for(let H=0;H<s;H++){const V=I+H,X=F+H;A===!0?d.push(X,X+1,V):d.push(X+1,X,V),L+=3}f.addGroup(b,L,A===!0?1:2),b+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ey(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class IS extends Ey{constructor(e=1,n=1,r=32,s=1,a=!1,o=0,l=Math.PI*2){super(0,e,n,r,s,a,o,l),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l}}static fromJSON(e){return new IS(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class pm extends Un{constructor(e=[],n=[],r=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:s};const a=[],o=[];l(s),f(r),d(),this.setAttribute("position",new qe(a,3)),this.setAttribute("normal",new qe(a.slice(),3)),this.setAttribute("uv",new qe(o,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function l(M){const R=new pt,A=new pt,I=new pt;for(let k=0;k<n.length;k+=3)_(n[k+0],R),_(n[k+1],A),_(n[k+2],I),u(R,A,I,M)}function u(M,R,A,I){const k=I+1,N=[];for(let L=0;L<=k;L++){N[L]=[];const U=M.clone().lerp(A,L/k),O=R.clone().lerp(A,L/k),F=k-L;for(let H=0;H<=F;H++)H===0&&L===k?N[L][H]=U:N[L][H]=U.clone().lerp(O,H/F)}for(let L=0;L<k;L++)for(let U=0;U<2*(k-L)-1;U++){const O=Math.floor(U/2);U%2===0?(y(N[L][O+1]),y(N[L+1][O]),y(N[L][O])):(y(N[L][O+1]),y(N[L+1][O+1]),y(N[L+1][O]))}}function f(M){const R=new pt;for(let A=0;A<a.length;A+=3)R.x=a[A+0],R.y=a[A+1],R.z=a[A+2],R.normalize().multiplyScalar(M),a[A+0]=R.x,a[A+1]=R.y,a[A+2]=R.z}function d(){const M=new pt;for(let R=0;R<a.length;R+=3){M.x=a[R+0],M.y=a[R+1],M.z=a[R+2];const A=T(M)/2/Math.PI+.5,I=b(M)/Math.PI+.5;o.push(A,1-I)}x(),m()}function m(){for(let M=0;M<o.length;M+=6){const R=o[M+0],A=o[M+2],I=o[M+4],k=Math.max(R,A,I),N=Math.min(R,A,I);k>.9&&N<.1&&(R<.2&&(o[M+0]+=1),A<.2&&(o[M+2]+=1),I<.2&&(o[M+4]+=1))}}function y(M){a.push(M.x,M.y,M.z)}function _(M,R){const A=M*3;R.x=e[A+0],R.y=e[A+1],R.z=e[A+2]}function x(){const M=new pt,R=new pt,A=new pt,I=new pt,k=new de,N=new de,L=new de;for(let U=0,O=0;U<a.length;U+=9,O+=6){M.set(a[U+0],a[U+1],a[U+2]),R.set(a[U+3],a[U+4],a[U+5]),A.set(a[U+6],a[U+7],a[U+8]),k.set(o[O+0],o[O+1]),N.set(o[O+2],o[O+3]),L.set(o[O+4],o[O+5]),I.copy(M).add(R).add(A).divideScalar(3);const F=T(I);S(k,O+0,M,F),S(N,O+2,R,F),S(L,O+4,A,F)}}function S(M,R,A,I){I<0&&M.x===1&&(o[R]=M.x-1),A.x===0&&A.z===0&&(o[R]=I/2/Math.PI+.5)}function T(M){return Math.atan2(M.z,-M.x)}function b(M){return Math.atan2(-M.y,Math.sqrt(M.x*M.x+M.z*M.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pm(e.vertices,e.indices,e.radius,e.details)}}class WC extends pm{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,s=1/r,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-r,0,-s,r,0,s,-r,0,s,r,-s,-r,0,-s,r,0,s,-r,0,s,r,0,-r,0,-s,r,0,-s,-r,0,s,r,0,s],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new WC(e.radius,e.detail)}}const YT=new pt,KT=new pt,AO=new pt,ZT=new Qo;class _8 extends Un{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const s=Math.pow(10,4),a=Math.cos(Yg*n),o=e.getIndex(),l=e.getAttribute("position"),u=o?o.count:l.count,f=[0,0,0],d=["a","b","c"],m=new Array(3),y={},_=[];for(let x=0;x<u;x+=3){o?(f[0]=o.getX(x),f[1]=o.getX(x+1),f[2]=o.getX(x+2)):(f[0]=x,f[1]=x+1,f[2]=x+2);const{a:S,b:T,c:b}=ZT;if(S.fromBufferAttribute(l,f[0]),T.fromBufferAttribute(l,f[1]),b.fromBufferAttribute(l,f[2]),ZT.getNormal(AO),m[0]=`${Math.round(S.x*s)},${Math.round(S.y*s)},${Math.round(S.z*s)}`,m[1]=`${Math.round(T.x*s)},${Math.round(T.y*s)},${Math.round(T.z*s)}`,m[2]=`${Math.round(b.x*s)},${Math.round(b.y*s)},${Math.round(b.z*s)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let M=0;M<3;M++){const R=(M+1)%3,A=m[M],I=m[R],k=ZT[d[M]],N=ZT[d[R]],L=`${A}_${I}`,U=`${I}_${A}`;U in y&&y[U]?(AO.dot(y[U].normal)<=a&&(_.push(k.x,k.y,k.z),_.push(N.x,N.y,N.z)),y[U]=null):L in y||(y[L]={index0:f[M],index1:f[R],normal:AO.clone()})}}for(const x in y)if(y[x]){const{index0:S,index1:T}=y[x];YT.fromBufferAttribute(l,S),KT.fromBufferAttribute(l,T),_.push(YT.x,YT.y,YT.z),_.push(KT.x,KT.y,KT.z)}this.setAttribute("position",new qe(_,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Kg extends k1{constructor(e){super(e),this.uuid=Ul(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,s=this.holes.length;r<s;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const s=e.holes[n];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const s=this.holes[n];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const s=e.holes[n];this.holes.push(new k1().fromJSON(s))}return this}}class uZ{static triangulate(e,n,r=2){const s=n&&n.length,a=s?n[0]*r:e.length;let o=b8(e,0,a,r,!0);const l=[];if(!o||o.next===o.prev)return l;let u,f,d,m,y,_,x;if(s&&(o=pZ(e,n,o,r)),e.length>80*r){u=d=e[0],f=m=e[1];for(let S=r;S<a;S+=r)y=e[S],_=e[S+1],y<u&&(u=y),_<f&&(f=_),y>d&&(d=y),_>m&&(m=_);x=Math.max(d-u,m-f),x=x!==0?32767/x:0}return z1(o,l,r,u,f,x,0),l}}function b8(i,e,n,r,s){let a,o;if(s===wZ(i,e,n,r)>0)for(a=e;a<n;a+=r)o=Rz(a,i[a],i[a+1],o);else for(a=n-r;a>=e;a-=r)o=Rz(a,i[a],i[a+1],o);return o&&XC(o,o.next)&&(F1(o),o=o.next),o}function cy(i,e){if(!i)return i;e||(e=i);let n=i,r;do if(r=!1,!n.steiner&&(XC(n,n.next)||Dr(n.prev,n,n.next)===0)){if(F1(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function z1(i,e,n,r,s,a,o){if(!i)return;!o&&a&&_Z(i,r,s,a);let l=i,u,f;for(;i.prev!==i.next;){if(u=i.prev,f=i.next,a?fZ(i,r,s,a):cZ(i)){e.push(u.i/n|0),e.push(i.i/n|0),e.push(f.i/n|0),F1(i),i=f.next,l=f.next;continue}if(i=f,i===l){o?o===1?(i=hZ(cy(i),e,n),z1(i,e,n,r,s,a,2)):o===2&&dZ(i,e,n,r,s,a):z1(cy(i),e,n,r,s,a,1);break}}}function cZ(i){const e=i.prev,n=i,r=i.next;if(Dr(e,n,r)>=0)return!1;const s=e.x,a=n.x,o=r.x,l=e.y,u=n.y,f=r.y,d=s<a?s<o?s:o:a<o?a:o,m=l<u?l<f?l:f:u<f?u:f,y=s>a?s>o?s:o:a>o?a:o,_=l>u?l>f?l:f:u>f?u:f;let x=r.next;for(;x!==e;){if(x.x>=d&&x.x<=y&&x.y>=m&&x.y<=_&&A0(s,l,a,u,o,f,x.x,x.y)&&Dr(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function fZ(i,e,n,r){const s=i.prev,a=i,o=i.next;if(Dr(s,a,o)>=0)return!1;const l=s.x,u=a.x,f=o.x,d=s.y,m=a.y,y=o.y,_=l<u?l<f?l:f:u<f?u:f,x=d<m?d<y?d:y:m<y?m:y,S=l>u?l>f?l:f:u>f?u:f,T=d>m?d>y?d:y:m>y?m:y,b=MD(_,x,e,n,r),M=MD(S,T,e,n,r);let R=i.prevZ,A=i.nextZ;for(;R&&R.z>=b&&A&&A.z<=M;){if(R.x>=_&&R.x<=S&&R.y>=x&&R.y<=T&&R!==s&&R!==o&&A0(l,d,u,m,f,y,R.x,R.y)&&Dr(R.prev,R,R.next)>=0||(R=R.prevZ,A.x>=_&&A.x<=S&&A.y>=x&&A.y<=T&&A!==s&&A!==o&&A0(l,d,u,m,f,y,A.x,A.y)&&Dr(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;R&&R.z>=b;){if(R.x>=_&&R.x<=S&&R.y>=x&&R.y<=T&&R!==s&&R!==o&&A0(l,d,u,m,f,y,R.x,R.y)&&Dr(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;A&&A.z<=M;){if(A.x>=_&&A.x<=S&&A.y>=x&&A.y<=T&&A!==s&&A!==o&&A0(l,d,u,m,f,y,A.x,A.y)&&Dr(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function hZ(i,e,n){let r=i;do{const s=r.prev,a=r.next.next;!XC(s,a)&&x8(s,r,r.next,a)&&B1(s,a)&&B1(a,s)&&(e.push(s.i/n|0),e.push(r.i/n|0),e.push(a.i/n|0),F1(r),F1(r.next),r=i=a),r=r.next}while(r!==i);return cy(r)}function dZ(i,e,n,r,s,a){let o=i;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&SZ(o,l)){let u=S8(o,l);o=cy(o,o.next),u=cy(u,u.next),z1(o,e,n,r,s,a,0),z1(u,e,n,r,s,a,0);return}l=l.next}o=o.next}while(o!==i)}function pZ(i,e,n,r){const s=[];let a,o,l,u,f;for(a=0,o=e.length;a<o;a++)l=e[a]*r,u=a<o-1?e[a+1]*r:i.length,f=b8(i,l,u,r,!1),f===f.next&&(f.steiner=!0),s.push(xZ(f));for(s.sort(mZ),a=0;a<s.length;a++)n=gZ(s[a],n);return n}function mZ(i,e){return i.x-e.x}function gZ(i,e){const n=yZ(i,e);if(!n)return e;const r=S8(n,i);return cy(r,r.next),cy(n,n.next)}function yZ(i,e){let n=e,r=-1/0,s;const a=i.x,o=i.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const y=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(y<=a&&y>r&&(r=y,s=n.x<n.next.x?n:n.next,y===a))return s}n=n.next}while(n!==e);if(!s)return null;const l=s,u=s.x,f=s.y;let d=1/0,m;n=s;do a>=n.x&&n.x>=u&&a!==n.x&&A0(o<f?a:r,o,u,f,o<f?r:a,o,n.x,n.y)&&(m=Math.abs(o-n.y)/(a-n.x),B1(n,i)&&(m<d||m===d&&(n.x>s.x||n.x===s.x&&vZ(s,n)))&&(s=n,d=m)),n=n.next;while(n!==l);return s}function vZ(i,e){return Dr(i.prev,i,e.prev)<0&&Dr(e.next,i,i.next)<0}function _Z(i,e,n,r){let s=i;do s.z===0&&(s.z=MD(s.x,s.y,e,n,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,bZ(s)}function bZ(i){let e,n,r,s,a,o,l,u,f=1;do{for(n=i,i=null,a=null,o=0;n;){for(o++,r=n,l=0,e=0;e<f&&(l++,r=r.nextZ,!!r);e++);for(u=f;l>0||u>0&&r;)l!==0&&(u===0||!r||n.z<=r.z)?(s=n,n=n.nextZ,l--):(s=r,r=r.nextZ,u--),a?a.nextZ=s:i=s,s.prevZ=a,a=s;n=r}a.nextZ=null,f*=2}while(o>1);return i}function MD(i,e,n,r,s){return i=(i-n)*s|0,e=(e-r)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function xZ(i){let e=i,n=i;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==i);return n}function A0(i,e,n,r,s,a,o,l){return(s-o)*(e-l)>=(i-o)*(a-l)&&(i-o)*(r-l)>=(n-o)*(e-l)&&(n-o)*(a-l)>=(s-o)*(r-l)}function SZ(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!EZ(i,e)&&(B1(i,e)&&B1(e,i)&&TZ(i,e)&&(Dr(i.prev,i,e.prev)||Dr(i,e.prev,e))||XC(i,e)&&Dr(i.prev,i,i.next)>0&&Dr(e.prev,e,e.next)>0)}function Dr(i,e,n){return(e.y-i.y)*(n.x-e.x)-(e.x-i.x)*(n.y-e.y)}function XC(i,e){return i.x===e.x&&i.y===e.y}function x8(i,e,n,r){const s=JT(Dr(i,e,n)),a=JT(Dr(i,e,r)),o=JT(Dr(n,r,i)),l=JT(Dr(n,r,e));return!!(s!==a&&o!==l||s===0&&QT(i,n,e)||a===0&&QT(i,r,e)||o===0&&QT(n,i,r)||l===0&&QT(n,e,r))}function QT(i,e,n){return e.x<=Math.max(i.x,n.x)&&e.x>=Math.min(i.x,n.x)&&e.y<=Math.max(i.y,n.y)&&e.y>=Math.min(i.y,n.y)}function JT(i){return i>0?1:i<0?-1:0}function EZ(i,e){let n=i;do{if(n.i!==i.i&&n.next.i!==i.i&&n.i!==e.i&&n.next.i!==e.i&&x8(n,n.next,i,e))return!0;n=n.next}while(n!==i);return!1}function B1(i,e){return Dr(i.prev,i,i.next)<0?Dr(i,e,i.next)>=0&&Dr(i,i.prev,e)>=0:Dr(i,e,i.prev)<0||Dr(i,i.next,e)<0}function TZ(i,e){let n=i,r=!1;const s=(i.x+e.x)/2,a=(i.y+e.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&s<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==i);return r}function S8(i,e){const n=new CD(i.i,i.x,i.y),r=new CD(e.i,e.x,e.y),s=i.next,a=e.prev;return i.next=e,e.prev=i,n.next=s,s.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function Rz(i,e,n,r){const s=new CD(i,e,n);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function F1(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function CD(i,e,n){this.i=i,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wZ(i,e,n,r){let s=0;for(let a=e,o=n-r;a<n;a+=r)s+=(i[o]-i[a])*(i[a+1]+i[o+1]),o=a;return s}class Df{static area(e){const n=e.length;let r=0;for(let s=n-1,a=0;a<n;s=a++)r+=e[s].x*e[a].y-e[a].x*e[s].y;return r*.5}static isClockWise(e){return Df.area(e)<0}static triangulateShape(e,n){const r=[],s=[],a=[];Oz(e),Iz(r,e);let o=e.length;n.forEach(Oz);for(let u=0;u<n.length;u++)s.push(o),o+=n[u].length,Iz(r,n[u]);const l=uZ.triangulate(r,s);for(let u=0;u<l.length;u+=3)a.push(l.slice(u,u+3));return a}}function Oz(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function Iz(i,e){for(let n=0;n<e.length;n++)i.push(e[n].x),i.push(e[n].y)}class YC extends Un{constructor(e=new Kg([new de(.5,.5),new de(-.5,.5),new de(-.5,-.5),new de(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,s=[],a=[];for(let l=0,u=e.length;l<u;l++){const f=e[l];o(f)}this.setAttribute("position",new qe(s,3)),this.setAttribute("uv",new qe(a,2)),this.computeVertexNormals();function o(l){const u=[],f=n.curveSegments!==void 0?n.curveSegments:12,d=n.steps!==void 0?n.steps:1,m=n.depth!==void 0?n.depth:1;let y=n.bevelEnabled!==void 0?n.bevelEnabled:!0,_=n.bevelThickness!==void 0?n.bevelThickness:.2,x=n.bevelSize!==void 0?n.bevelSize:_-.1,S=n.bevelOffset!==void 0?n.bevelOffset:0,T=n.bevelSegments!==void 0?n.bevelSegments:3;const b=n.extrudePath,M=n.UVGenerator!==void 0?n.UVGenerator:AZ;let R,A=!1,I,k,N,L;b&&(R=b.getSpacedPoints(d),A=!0,y=!1,I=b.computeFrenetFrames(d,!1),k=new pt,N=new pt,L=new pt),y||(T=0,_=0,x=0,S=0);const U=l.extractPoints(f);let O=U.shape;const F=U.holes;if(!Df.isClockWise(O)){O=O.reverse();for(let Pt=0,Ht=F.length;Pt<Ht;Pt++){const at=F[Pt];Df.isClockWise(at)&&(F[Pt]=at.reverse())}}const V=Df.triangulateShape(O,F),X=O;for(let Pt=0,Ht=F.length;Pt<Ht;Pt++){const at=F[Pt];O=O.concat(at)}function J(Pt,Ht,at){return Ht||console.error("THREE.ExtrudeGeometry: vec does not exist"),Pt.clone().addScaledVector(Ht,at)}const q=O.length,W=V.length;function K(Pt,Ht,at){let ue,Jt,se;const ae=Pt.x-Ht.x,Ce=Pt.y-Ht.y,le=at.x-Pt.x,ct=at.y-Pt.y,G=ae*ae+Ce*Ce,lt=ae*ct-Ce*le;if(Math.abs(lt)>Number.EPSILON){const mt=Math.sqrt(G),Ct=Math.sqrt(le*le+ct*ct),bt=Ht.x-Ce/mt,Mt=Ht.y+ae/mt,Lt=at.x-ct/Ct,Qt=at.y+le/Ct,Oe=((Lt-bt)*ct-(Qt-Mt)*le)/(ae*ct-Ce*le);ue=bt+ae*Oe-Pt.x,Jt=Mt+Ce*Oe-Pt.y;const jt=ue*ue+Jt*Jt;if(jt<=2)return new de(ue,Jt);se=Math.sqrt(jt/2)}else{let mt=!1;ae>Number.EPSILON?le>Number.EPSILON&&(mt=!0):ae<-Number.EPSILON?le<-Number.EPSILON&&(mt=!0):Math.sign(Ce)===Math.sign(ct)&&(mt=!0),mt?(ue=-Ce,Jt=ae,se=Math.sqrt(G)):(ue=ae,Jt=Ce,se=Math.sqrt(G/2))}return new de(ue/se,Jt/se)}const et=[];for(let Pt=0,Ht=X.length,at=Ht-1,ue=Pt+1;Pt<Ht;Pt++,at++,ue++)at===Ht&&(at=0),ue===Ht&&(ue=0),et[Pt]=K(X[Pt],X[at],X[ue]);const Q=[];let dt,yt=et.concat();for(let Pt=0,Ht=F.length;Pt<Ht;Pt++){const at=F[Pt];dt=[];for(let ue=0,Jt=at.length,se=Jt-1,ae=ue+1;ue<Jt;ue++,se++,ae++)se===Jt&&(se=0),ae===Jt&&(ae=0),dt[ue]=K(at[ue],at[se],at[ae]);Q.push(dt),yt=yt.concat(dt)}for(let Pt=0;Pt<T;Pt++){const Ht=Pt/T,at=_*Math.cos(Ht*Math.PI/2),ue=x*Math.sin(Ht*Math.PI/2)+S;for(let Jt=0,se=X.length;Jt<se;Jt++){const ae=J(X[Jt],et[Jt],ue);gt(ae.x,ae.y,-at)}for(let Jt=0,se=F.length;Jt<se;Jt++){const ae=F[Jt];dt=Q[Jt];for(let Ce=0,le=ae.length;Ce<le;Ce++){const ct=J(ae[Ce],dt[Ce],ue);gt(ct.x,ct.y,-at)}}}const xt=x+S;for(let Pt=0;Pt<q;Pt++){const Ht=y?J(O[Pt],yt[Pt],xt):O[Pt];A?(N.copy(I.normals[0]).multiplyScalar(Ht.x),k.copy(I.binormals[0]).multiplyScalar(Ht.y),L.copy(R[0]).add(N).add(k),gt(L.x,L.y,L.z)):gt(Ht.x,Ht.y,0)}for(let Pt=1;Pt<=d;Pt++)for(let Ht=0;Ht<q;Ht++){const at=y?J(O[Ht],yt[Ht],xt):O[Ht];A?(N.copy(I.normals[Pt]).multiplyScalar(at.x),k.copy(I.binormals[Pt]).multiplyScalar(at.y),L.copy(R[Pt]).add(N).add(k),gt(L.x,L.y,L.z)):gt(at.x,at.y,m/d*Pt)}for(let Pt=T-1;Pt>=0;Pt--){const Ht=Pt/T,at=_*Math.cos(Ht*Math.PI/2),ue=x*Math.sin(Ht*Math.PI/2)+S;for(let Jt=0,se=X.length;Jt<se;Jt++){const ae=J(X[Jt],et[Jt],ue);gt(ae.x,ae.y,m+at)}for(let Jt=0,se=F.length;Jt<se;Jt++){const ae=F[Jt];dt=Q[Jt];for(let Ce=0,le=ae.length;Ce<le;Ce++){const ct=J(ae[Ce],dt[Ce],ue);A?gt(ct.x,ct.y+R[d-1].y,R[d-1].x+at):gt(ct.x,ct.y,m+at)}}}nt(),ht();function nt(){const Pt=s.length/3;if(y){let Ht=0,at=q*Ht;for(let ue=0;ue<W;ue++){const Jt=V[ue];wt(Jt[2]+at,Jt[1]+at,Jt[0]+at)}Ht=d+T*2,at=q*Ht;for(let ue=0;ue<W;ue++){const Jt=V[ue];wt(Jt[0]+at,Jt[1]+at,Jt[2]+at)}}else{for(let Ht=0;Ht<W;Ht++){const at=V[Ht];wt(at[2],at[1],at[0])}for(let Ht=0;Ht<W;Ht++){const at=V[Ht];wt(at[0]+q*d,at[1]+q*d,at[2]+q*d)}}r.addGroup(Pt,s.length/3-Pt,0)}function ht(){const Pt=s.length/3;let Ht=0;ft(X,Ht),Ht+=X.length;for(let at=0,ue=F.length;at<ue;at++){const Jt=F[at];ft(Jt,Ht),Ht+=Jt.length}r.addGroup(Pt,s.length/3-Pt,1)}function ft(Pt,Ht){let at=Pt.length;for(;--at>=0;){const ue=at;let Jt=at-1;Jt<0&&(Jt=Pt.length-1);for(let se=0,ae=d+T*2;se<ae;se++){const Ce=q*se,le=q*(se+1),ct=Ht+ue+Ce,G=Ht+Jt+Ce,lt=Ht+Jt+le,mt=Ht+ue+le;Kt(ct,G,lt,mt)}}}function gt(Pt,Ht,at){u.push(Pt),u.push(Ht),u.push(at)}function wt(Pt,Ht,at){zt(Pt),zt(Ht),zt(at);const ue=s.length/3,Jt=M.generateTopUV(r,s,ue-3,ue-2,ue-1);te(Jt[0]),te(Jt[1]),te(Jt[2])}function Kt(Pt,Ht,at,ue){zt(Pt),zt(Ht),zt(ue),zt(Ht),zt(at),zt(ue);const Jt=s.length/3,se=M.generateSideWallUV(r,s,Jt-6,Jt-3,Jt-2,Jt-1);te(se[0]),te(se[1]),te(se[3]),te(se[1]),te(se[2]),te(se[3])}function zt(Pt){s.push(u[Pt*3+0]),s.push(u[Pt*3+1]),s.push(u[Pt*3+2])}function te(Pt){a.push(Pt.x),a.push(Pt.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return MZ(n,r,e)}static fromJSON(e,n){const r=[];for(let a=0,o=e.shapes.length;a<o;a++){const l=n[e.shapes[a]];r.push(l)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new gM[s.type]().fromJSON(s)),new YC(r,e.options)}}const AZ={generateTopUV:function(i,e,n,r,s){const a=e[n*3],o=e[n*3+1],l=e[r*3],u=e[r*3+1],f=e[s*3],d=e[s*3+1];return[new de(a,o),new de(l,u),new de(f,d)]},generateSideWallUV:function(i,e,n,r,s,a){const o=e[n*3],l=e[n*3+1],u=e[n*3+2],f=e[r*3],d=e[r*3+1],m=e[r*3+2],y=e[s*3],_=e[s*3+1],x=e[s*3+2],S=e[a*3],T=e[a*3+1],b=e[a*3+2];return Math.abs(l-d)<Math.abs(o-f)?[new de(o,1-u),new de(f,1-m),new de(y,1-x),new de(S,1-b)]:[new de(l,1-u),new de(d,1-m),new de(_,1-x),new de(T,1-b)]}};function MZ(i,e,n){if(n.shapes=[],Array.isArray(i))for(let r=0,s=i.length;r<s;r++){const a=i[r];n.shapes.push(a.uuid)}else n.shapes.push(i.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class KC extends pm{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,s=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,a,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new KC(e.radius,e.detail)}}class DS extends pm{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,s,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new DS(e.radius,e.detail)}}class R_ extends Un{constructor(e=1,n=1,r=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:s};const a=e/2,o=n/2,l=Math.floor(r),u=Math.floor(s),f=l+1,d=u+1,m=e/l,y=n/u,_=[],x=[],S=[],T=[];for(let b=0;b<d;b++){const M=b*y-o;for(let R=0;R<f;R++){const A=R*m-a;x.push(A,-M,0),S.push(0,0,1),T.push(R/l),T.push(1-b/u)}}for(let b=0;b<u;b++)for(let M=0;M<l;M++){const R=M+f*b,A=M+f*(b+1),I=M+1+f*(b+1),k=M+1+f*b;_.push(R,A,k),_.push(A,I,k)}this.setIndex(_),this.setAttribute("position",new qe(x,3)),this.setAttribute("normal",new qe(S,3)),this.setAttribute("uv",new qe(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new R_(e.width,e.height,e.widthSegments,e.heightSegments)}}class ZC extends Un{constructor(e=.5,n=1,r=32,s=1,a=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:s,thetaStart:a,thetaLength:o},r=Math.max(3,r),s=Math.max(1,s);const l=[],u=[],f=[],d=[];let m=e;const y=(n-e)/s,_=new pt,x=new de;for(let S=0;S<=s;S++){for(let T=0;T<=r;T++){const b=a+T/r*o;_.x=m*Math.cos(b),_.y=m*Math.sin(b),u.push(_.x,_.y,_.z),f.push(0,0,1),x.x=(_.x/n+1)/2,x.y=(_.y/n+1)/2,d.push(x.x,x.y)}m+=y}for(let S=0;S<s;S++){const T=S*(r+1);for(let b=0;b<r;b++){const M=b+T,R=M,A=M+r+1,I=M+r+2,k=M+1;l.push(R,A,k),l.push(A,I,k)}}this.setIndex(l),this.setAttribute("position",new qe(u,3)),this.setAttribute("normal",new qe(f,3)),this.setAttribute("uv",new qe(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ZC(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class QC extends Un{constructor(e=new Kg([new de(0,.5),new de(-.5,-.5),new de(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],s=[],a=[],o=[];let l=0,u=0;if(Array.isArray(e)===!1)f(e);else for(let d=0;d<e.length;d++)f(e[d]),this.addGroup(l,u,d),l+=u,u=0;this.setIndex(r),this.setAttribute("position",new qe(s,3)),this.setAttribute("normal",new qe(a,3)),this.setAttribute("uv",new qe(o,2));function f(d){const m=s.length/3,y=d.extractPoints(n);let _=y.shape;const x=y.holes;Df.isClockWise(_)===!1&&(_=_.reverse());for(let T=0,b=x.length;T<b;T++){const M=x[T];Df.isClockWise(M)===!0&&(x[T]=M.reverse())}const S=Df.triangulateShape(_,x);for(let T=0,b=x.length;T<b;T++){const M=x[T];_=_.concat(M)}for(let T=0,b=_.length;T<b;T++){const M=_[T];s.push(M.x,M.y,0),a.push(0,0,1),o.push(M.x,M.y)}for(let T=0,b=S.length;T<b;T++){const M=S[T],R=M[0]+m,A=M[1]+m,I=M[2]+m;r.push(R,A,I),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return CZ(n,e)}static fromJSON(e,n){const r=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=n[e.shapes[s]];r.push(o)}return new QC(r,e.curveSegments)}}function CZ(i,e){if(e.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];e.shapes.push(s.uuid)}else e.shapes.push(i.uuid);return e}class Ty extends Un{constructor(e=1,n=32,r=16,s=0,a=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:s,phiLength:a,thetaStart:o,thetaLength:l},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const u=Math.min(o+l,Math.PI);let f=0;const d=[],m=new pt,y=new pt,_=[],x=[],S=[],T=[];for(let b=0;b<=r;b++){const M=[],R=b/r;let A=0;b===0&&o===0?A=.5/n:b===r&&u===Math.PI&&(A=-.5/n);for(let I=0;I<=n;I++){const k=I/n;m.x=-e*Math.cos(s+k*a)*Math.sin(o+R*l),m.y=e*Math.cos(o+R*l),m.z=e*Math.sin(s+k*a)*Math.sin(o+R*l),x.push(m.x,m.y,m.z),y.copy(m).normalize(),S.push(y.x,y.y,y.z),T.push(k+A,1-R),M.push(f++)}d.push(M)}for(let b=0;b<r;b++)for(let M=0;M<n;M++){const R=d[b][M+1],A=d[b][M],I=d[b+1][M],k=d[b+1][M+1];(b!==0||o>0)&&_.push(R,A,k),(b!==r-1||u<Math.PI)&&_.push(A,I,k)}this.setIndex(_),this.setAttribute("position",new qe(x,3)),this.setAttribute("normal",new qe(S,3)),this.setAttribute("uv",new qe(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ty(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class JC extends pm{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,s,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new JC(e.radius,e.detail)}}class t2 extends Un{constructor(e=1,n=.4,r=12,s=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:s,arc:a},r=Math.floor(r),s=Math.floor(s);const o=[],l=[],u=[],f=[],d=new pt,m=new pt,y=new pt;for(let _=0;_<=r;_++)for(let x=0;x<=s;x++){const S=x/s*a,T=_/r*Math.PI*2;m.x=(e+n*Math.cos(T))*Math.cos(S),m.y=(e+n*Math.cos(T))*Math.sin(S),m.z=n*Math.sin(T),l.push(m.x,m.y,m.z),d.x=e*Math.cos(S),d.y=e*Math.sin(S),y.subVectors(m,d).normalize(),u.push(y.x,y.y,y.z),f.push(x/s),f.push(_/r)}for(let _=1;_<=r;_++)for(let x=1;x<=s;x++){const S=(s+1)*_+x-1,T=(s+1)*(_-1)+x-1,b=(s+1)*(_-1)+x,M=(s+1)*_+x;o.push(S,T,M),o.push(T,b,M)}this.setIndex(o),this.setAttribute("position",new qe(l,3)),this.setAttribute("normal",new qe(u,3)),this.setAttribute("uv",new qe(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t2(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class e2 extends Un{constructor(e=1,n=.4,r=64,s=8,a=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:s,p:a,q:o},r=Math.floor(r),s=Math.floor(s);const l=[],u=[],f=[],d=[],m=new pt,y=new pt,_=new pt,x=new pt,S=new pt,T=new pt,b=new pt;for(let R=0;R<=r;++R){const A=R/r*a*Math.PI*2;M(A,a,o,e,_),M(A+.01,a,o,e,x),T.subVectors(x,_),b.addVectors(x,_),S.crossVectors(T,b),b.crossVectors(S,T),S.normalize(),b.normalize();for(let I=0;I<=s;++I){const k=I/s*Math.PI*2,N=-n*Math.cos(k),L=n*Math.sin(k);m.x=_.x+(N*b.x+L*S.x),m.y=_.y+(N*b.y+L*S.y),m.z=_.z+(N*b.z+L*S.z),u.push(m.x,m.y,m.z),y.subVectors(m,_).normalize(),f.push(y.x,y.y,y.z),d.push(R/r),d.push(I/s)}}for(let R=1;R<=r;R++)for(let A=1;A<=s;A++){const I=(s+1)*(R-1)+(A-1),k=(s+1)*R+(A-1),N=(s+1)*R+A,L=(s+1)*(R-1)+A;l.push(I,k,L),l.push(k,N,L)}this.setIndex(l),this.setAttribute("position",new qe(u,3)),this.setAttribute("normal",new qe(f,3)),this.setAttribute("uv",new qe(d,2));function M(R,A,I,k,N){const L=Math.cos(R),U=Math.sin(R),O=I/A*R,F=Math.cos(O);N.x=k*(2+F)*.5*L,N.y=k*(2+F)*U*.5,N.z=k*Math.sin(O)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new e2(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class PS extends Un{constructor(e=new jC(new pt(-1,-1,0),new pt(-1,1,0),new pt(1,1,0)),n=64,r=1,s=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:s,closed:a};const o=e.computeFrenetFrames(n,a);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new pt,u=new pt,f=new de;let d=new pt;const m=[],y=[],_=[],x=[];S(),this.setIndex(x),this.setAttribute("position",new qe(m,3)),this.setAttribute("normal",new qe(y,3)),this.setAttribute("uv",new qe(_,2));function S(){for(let R=0;R<n;R++)T(R);T(a===!1?n:0),M(),b()}function T(R){d=e.getPointAt(R/n,d);const A=o.normals[R],I=o.binormals[R];for(let k=0;k<=s;k++){const N=k/s*Math.PI*2,L=Math.sin(N),U=-Math.cos(N);u.x=U*A.x+L*I.x,u.y=U*A.y+L*I.y,u.z=U*A.z+L*I.z,u.normalize(),y.push(u.x,u.y,u.z),l.x=d.x+r*u.x,l.y=d.y+r*u.y,l.z=d.z+r*u.z,m.push(l.x,l.y,l.z)}}function b(){for(let R=1;R<=n;R++)for(let A=1;A<=s;A++){const I=(s+1)*(R-1)+(A-1),k=(s+1)*R+(A-1),N=(s+1)*R+A,L=(s+1)*(R-1)+A;x.push(I,k,L),x.push(k,N,L)}}function M(){for(let R=0;R<=n;R++)for(let A=0;A<=s;A++)f.x=R/n,f.y=A/s,_.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new PS(new gM[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class E8 extends Un{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,s=new pt,a=new pt;if(e.index!==null){const o=e.attributes.position,l=e.index;let u=e.groups;u.length===0&&(u=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,d=u.length;f<d;++f){const m=u[f],y=m.start,_=m.count;for(let x=y,S=y+_;x<S;x+=3)for(let T=0;T<3;T++){const b=l.getX(x+T),M=l.getX(x+(T+1)%3);s.fromBufferAttribute(o,b),a.fromBufferAttribute(o,M),Dz(s,a,r)===!0&&(n.push(s.x,s.y,s.z),n.push(a.x,a.y,a.z))}}}else{const o=e.attributes.position;for(let l=0,u=o.count/3;l<u;l++)for(let f=0;f<3;f++){const d=3*l+f,m=3*l+(f+1)%3;s.fromBufferAttribute(o,d),a.fromBufferAttribute(o,m),Dz(s,a,r)===!0&&(n.push(s.x,s.y,s.z),n.push(a.x,a.y,a.z))}}this.setAttribute("position",new qe(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Dz(i,e,n){const r=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return n.has(r)===!0||n.has(s)===!0?!1:(n.add(r),n.add(s),!0)}var Pz=Object.freeze({__proto__:null,BoxGeometry:Sy,CapsuleGeometry:qC,CircleGeometry:$C,ConeGeometry:IS,CylinderGeometry:Ey,DodecahedronGeometry:WC,EdgesGeometry:_8,ExtrudeGeometry:YC,IcosahedronGeometry:KC,LatheGeometry:OS,OctahedronGeometry:DS,PlaneGeometry:R_,PolyhedronGeometry:pm,RingGeometry:ZC,ShapeGeometry:QC,SphereGeometry:Ty,TetrahedronGeometry:JC,TorusGeometry:t2,TorusKnotGeometry:e2,TubeGeometry:PS,WireframeGeometry:E8});class T8 extends Ga{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ke(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class w8 extends Au{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class n2 extends Ga{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ke(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hm,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Bl,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class A8 extends n2{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new de(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Cn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ke(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ke(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ke(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class M8 extends Ga{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ke(16777215),this.specular=new ke(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hm,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Bl,this.combine=wS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class C8 extends Ga{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ke(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hm,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class R8 extends Ga{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hm,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class l3 extends Ga{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hm,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Bl,this.combine=wS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class u3 extends Ga{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=VH,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class c3 extends Ga{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class O8 extends Ga{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ke(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hm,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class I8 extends ja{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Bg(i,e,n){return!i||!n&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function D8(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function P8(i){function e(s,a){return i[s]-i[a]}const n=i.length,r=new Array(n);for(let s=0;s!==n;++s)r[s]=s;return r.sort(e),r}function RD(i,e,n){const r=i.length,s=new i.constructor(r);for(let a=0,o=0;o!==r;++a){const l=n[a]*e;for(let u=0;u!==e;++u)s[o++]=i[l+u]}return s}function f3(i,e,n,r){let s=1,a=i[0];for(;a!==void 0&&a[r]===void 0;)a=i[s++];if(a===void 0)return;let o=a[r];if(o!==void 0)if(Array.isArray(o))do o=a[r],o!==void 0&&(e.push(a.time),n.push(...o)),a=i[s++];while(a!==void 0);else if(o.toArray!==void 0)do o=a[r],o!==void 0&&(e.push(a.time),o.toArray(n,n.length)),a=i[s++];while(a!==void 0);else do o=a[r],o!==void 0&&(e.push(a.time),n.push(o)),a=i[s++];while(a!==void 0)}function RZ(i,e,n,r,s=30){const a=i.clone();a.name=e;const o=[];for(let u=0;u<a.tracks.length;++u){const f=a.tracks[u],d=f.getValueSize(),m=[],y=[];for(let _=0;_<f.times.length;++_){const x=f.times[_]*s;if(!(x<n||x>=r)){m.push(f.times[_]);for(let S=0;S<d;++S)y.push(f.values[_*d+S])}}m.length!==0&&(f.times=Bg(m,f.times.constructor),f.values=Bg(y,f.values.constructor),o.push(f))}a.tracks=o;let l=1/0;for(let u=0;u<a.tracks.length;++u)l>a.tracks[u].times[0]&&(l=a.tracks[u].times[0]);for(let u=0;u<a.tracks.length;++u)a.tracks[u].shift(-1*l);return a.resetDuration(),a}function OZ(i,e=0,n=i,r=30){r<=0&&(r=30);const s=n.tracks.length,a=e/r;for(let o=0;o<s;++o){const l=n.tracks[o],u=l.ValueTypeName;if(u==="bool"||u==="string")continue;const f=i.tracks.find(function(b){return b.name===l.name&&b.ValueTypeName===u});if(f===void 0)continue;let d=0;const m=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=m/3);let y=0;const _=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=_/3);const x=l.times.length-1;let S;if(a<=l.times[0]){const b=d,M=m-d;S=l.values.slice(b,M)}else if(a>=l.times[x]){const b=x*m+d,M=b+m-d;S=l.values.slice(b,M)}else{const b=l.createInterpolant(),M=d,R=m-d;b.evaluate(a),S=b.resultBuffer.slice(M,R)}u==="quaternion"&&new bo().fromArray(S).normalize().conjugate().toArray(S);const T=f.times.length;for(let b=0;b<T;++b){const M=b*_+y;if(u==="quaternion")bo.multiplyQuaternionsFlat(f.values,M,S,0,f.values,M);else{const R=_-y*2;for(let A=0;A<R;++A)f.values[M+A]-=S[A]}}}return i.blendMode=$N,i}const IZ={convertArray:Bg,isTypedArray:D8,getKeyframeOrder:P8,sortedArray:RD,flattenJSON:f3,subclip:RZ,makeClipAdditive:OZ};class NS{constructor(e,n,r,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,s=n[r],a=n[r-1];t:{e:{let o;n:{i:if(!(e<s)){for(let l=r+2;;){if(s===void 0){if(e<a)break i;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===l)break;if(a=s,s=n[++r],e<s)break e}o=n.length;break n}if(!(e>=a)){const l=n[1];e<l&&(r=2,a=l);for(let u=r-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===u)break;if(s=a,a=n[--r-1],e>=a)break e}o=r,r=0;break n}break t}for(;r<o;){const l=r+o>>>1;e<n[l]?o=l:r=l+1}if(s=n[r],a=n[r-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,a,s)}return this.interpolate_(r,a,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,s=this.valueSize,a=e*s;for(let o=0;o!==s;++o)n[o]=r[a+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class N8 extends NS{constructor(e,n,r,s){super(e,n,r,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:kg,endingEnd:kg}}intervalChanged_(e,n,r){const s=this.parameterPositions;let a=e-2,o=e+1,l=s[a],u=s[o];if(l===void 0)switch(this.getSettings_().endingStart){case zg:a=e,l=2*n-r;break;case D1:a=s.length-2,l=n+s[a]-s[a+1];break;default:a=e,l=r}if(u===void 0)switch(this.getSettings_().endingEnd){case zg:o=e,u=2*r-n;break;case D1:o=1,u=r+s[1]-s[0];break;default:o=e-1,u=n}const f=(r-n)*.5,d=this.valueSize;this._weightPrev=f/(n-l),this._weightNext=f/(u-r),this._offsetPrev=a*d,this._offsetNext=o*d}interpolate_(e,n,r,s){const a=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,f=u-l,d=this._offsetPrev,m=this._offsetNext,y=this._weightPrev,_=this._weightNext,x=(r-n)/(s-n),S=x*x,T=S*x,b=-y*T+2*y*S-y*x,M=(1+y)*T+(-1.5-2*y)*S+(-.5+y)*x+1,R=(-1-_)*T+(1.5+_)*S+.5*x,A=_*T-_*S;for(let I=0;I!==l;++I)a[I]=b*o[d+I]+M*o[f+I]+R*o[u+I]+A*o[m+I];return a}}class h3 extends NS{constructor(e,n,r,s){super(e,n,r,s)}interpolate_(e,n,r,s){const a=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,f=u-l,d=(r-n)/(s-n),m=1-d;for(let y=0;y!==l;++y)a[y]=o[f+y]*m+o[u+y]*d;return a}}class L8 extends NS{constructor(e,n,r,s){super(e,n,r,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ac{constructor(e,n,r,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Bg(n,this.TimeBufferType),this.values=Bg(r,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:Bg(e.times,Array),values:Bg(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(r.interpolation=s)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new L8(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new h3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new N8(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case I1:n=this.InterpolantFactoryMethodDiscrete;break;case dM:n=this.InterpolantFactoryMethodLinear;break;case tA:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return I1;case this.InterpolantFactoryMethodLinear:return dM;case this.InterpolantFactoryMethodSmooth:return tA}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,s=n.length;r!==s;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,s=n.length;r!==s;++r)n[r]*=e}return this}trim(e,n){const r=this.times,s=r.length;let a=0,o=s-1;for(;a!==s&&r[a]<e;)++a;for(;o!==-1&&r[o]>n;)--o;if(++o,a!==0||o!==s){a>=o&&(o=Math.max(o,1),a=o-1);const l=this.getValueSize();this.times=r.slice(a,o),this.values=this.values.slice(a*l,o*l)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,s=this.values,a=r.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==a;l++){const u=r[l];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),e=!1;break}if(o!==null&&o>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,o),e=!1;break}o=u}if(s!==void 0&&D8(s))for(let l=0,u=s.length;l!==u;++l){const f=s[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),s=this.getInterpolation()===tA,a=e.length-1;let o=1;for(let l=1;l<a;++l){let u=!1;const f=e[l],d=e[l+1];if(f!==d&&(l!==1||f!==e[0]))if(s)u=!0;else{const m=l*r,y=m-r,_=m+r;for(let x=0;x!==r;++x){const S=n[m+x];if(S!==n[y+x]||S!==n[_+x]){u=!0;break}}}if(u){if(l!==o){e[o]=e[l];const m=l*r,y=o*r;for(let _=0;_!==r;++_)n[y+_]=n[m+_]}++o}}if(a>0){e[o]=e[a];for(let l=a*r,u=o*r,f=0;f!==r;++f)n[u+f]=n[l+f];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=n.slice(0,o*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,s=new r(this.name,e,n);return s.createInterpolant=this.createInterpolant,s}}Ac.prototype.TimeBufferType=Float32Array;Ac.prototype.ValueBufferType=Float32Array;Ac.prototype.DefaultInterpolation=dM;class wy extends Ac{constructor(e,n,r){super(e,n,r)}}wy.prototype.ValueTypeName="bool";wy.prototype.ValueBufferType=Array;wy.prototype.DefaultInterpolation=I1;wy.prototype.InterpolantFactoryMethodLinear=void 0;wy.prototype.InterpolantFactoryMethodSmooth=void 0;class d3 extends Ac{}d3.prototype.ValueTypeName="color";class V1 extends Ac{}V1.prototype.ValueTypeName="number";class U8 extends NS{constructor(e,n,r,s){super(e,n,r,s)}interpolate_(e,n,r,s){const a=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=(r-n)/(s-n);let f=e*l;for(let d=f+l;f!==d;f+=4)bo.slerpFlat(a,0,o,f-l,o,f,u);return a}}class LS extends Ac{InterpolantFactoryMethodLinear(e){return new U8(this.times,this.values,this.getValueSize(),e)}}LS.prototype.ValueTypeName="quaternion";LS.prototype.InterpolantFactoryMethodSmooth=void 0;class Ay extends Ac{constructor(e,n,r){super(e,n,r)}}Ay.prototype.ValueTypeName="string";Ay.prototype.ValueBufferType=Array;Ay.prototype.DefaultInterpolation=I1;Ay.prototype.InterpolantFactoryMethodLinear=void 0;Ay.prototype.InterpolantFactoryMethodSmooth=void 0;class H1 extends Ac{}H1.prototype.ValueTypeName="vector";class G1{constructor(e="",n=-1,r=[],s=PC){this.name=e,this.tracks=r,this.duration=n,this.blendMode=s,this.uuid=Ul(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,s=1/(e.fps||1);for(let o=0,l=r.length;o!==l;++o)n.push(PZ(r[o]).scale(s));const a=new this(e.name,e.duration,n,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const n=[],r=e.tracks,s={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,o=r.length;a!==o;++a)n.push(Ac.toJSON(r[a]));return s}static CreateFromMorphTargetSequence(e,n,r,s){const a=n.length,o=[];for(let l=0;l<a;l++){let u=[],f=[];u.push((l+a-1)%a,l,(l+1)%a),f.push(0,1,0);const d=P8(u);u=RD(u,1,d),f=RD(f,1,d),!s&&u[0]===0&&(u.push(a),f.push(f[0])),o.push(new V1(".morphTargetInfluences["+n[l].name+"]",u,f).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const s=e;r=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<r.length;s++)if(r[s].name===n)return r[s];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const s={},a=/^([\w-]*?)([\d]+)$/;for(let l=0,u=e.length;l<u;l++){const f=e[l],d=f.name.match(a);if(d&&d.length>1){const m=d[1];let y=s[m];y||(s[m]=y=[]),y.push(f)}}const o=[];for(const l in s)o.push(this.CreateFromMorphTargetSequence(l,s[l],n,r));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(m,y,_,x,S){if(_.length!==0){const T=[],b=[];f3(_,T,b,x),T.length!==0&&S.push(new m(y,T,b))}},s=[],a=e.name||"default",o=e.fps||30,l=e.blendMode;let u=e.length||-1;const f=e.hierarchy||[];for(let m=0;m<f.length;m++){const y=f[m].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const _={};let x;for(x=0;x<y.length;x++)if(y[x].morphTargets)for(let S=0;S<y[x].morphTargets.length;S++)_[y[x].morphTargets[S]]=-1;for(const S in _){const T=[],b=[];for(let M=0;M!==y[x].morphTargets.length;++M){const R=y[x];T.push(R.time),b.push(R.morphTarget===S?1:0)}s.push(new V1(".morphTargetInfluence["+S+"]",T,b))}u=_.length*o}else{const _=".bones["+n[m].name+"]";r(H1,_+".position",y,"pos",s),r(LS,_+".quaternion",y,"rot",s),r(H1,_+".scale",y,"scl",s)}}return s.length===0?null:new this(a,u,s,l)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,s=e.length;r!==s;++r){const a=this.tracks[r];n=Math.max(n,a.times[a.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function DZ(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return V1;case"vector":case"vector2":case"vector3":case"vector4":return H1;case"color":return d3;case"quaternion":return LS;case"bool":case"boolean":return wy;case"string":return Ay}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function PZ(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=DZ(i.type);if(i.times===void 0){const n=[],r=[];f3(i.keys,n,r,"value"),i.times=n,i.values=r}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Zh={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class p3{constructor(e,n,r){const s=this;let a=!1,o=0,l=0,u;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(d){l++,a===!1&&s.onStart!==void 0&&s.onStart(d,o,l),a=!0},this.itemEnd=function(d){o++,s.onProgress!==void 0&&s.onProgress(d,o,l),o===l&&(a=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(d){s.onError!==void 0&&s.onError(d)},this.resolveURL=function(d){return u?u(d):d},this.setURLModifier=function(d){return u=d,this},this.addHandler=function(d,m){return f.push(d,m),this},this.removeHandler=function(d){const m=f.indexOf(d);return m!==-1&&f.splice(m,2),this},this.getHandler=function(d){for(let m=0,y=f.length;m<y;m+=2){const _=f[m],x=f[m+1];if(_.global&&(_.lastIndex=0),_.test(d))return x}return null}}}const k8=new p3;class cl{constructor(e){this.manager=e!==void 0?e:k8,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(s,a){r.load(e,s,n,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}cl.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ph={};class NZ extends Error{constructor(e,n){super(e),this.response=n}}class dd extends cl{constructor(e){super(e)}load(e,n,r,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=Zh.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(a),this.manager.itemEnd(e)},0),a;if(Ph[e]!==void 0){Ph[e].push({onLoad:n,onProgress:r,onError:s});return}Ph[e]=[],Ph[e].push({onLoad:n,onProgress:r,onError:s});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(o).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const d=Ph[e],m=f.body.getReader(),y=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),_=y?parseInt(y):0,x=_!==0;let S=0;const T=new ReadableStream({start(b){M();function M(){m.read().then(({done:R,value:A})=>{if(R)b.close();else{S+=A.byteLength;const I=new ProgressEvent("progress",{lengthComputable:x,loaded:S,total:_});for(let k=0,N=d.length;k<N;k++){const L=d[k];L.onProgress&&L.onProgress(I)}b.enqueue(A),M()}},R=>{b.error(R)})}}});return new Response(T)}else throw new NZ(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(u){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(d=>new DOMParser().parseFromString(d,l));case"json":return f.json();default:if(l===void 0)return f.text();{const m=/charset="?([^;"\s]*)"?/i.exec(l),y=m&&m[1]?m[1].toLowerCase():void 0,_=new TextDecoder(y);return f.arrayBuffer().then(x=>_.decode(x))}}}).then(f=>{Zh.add(e,f);const d=Ph[e];delete Ph[e];for(let m=0,y=d.length;m<y;m++){const _=d[m];_.onLoad&&_.onLoad(f)}}).catch(f=>{const d=Ph[e];if(d===void 0)throw this.manager.itemError(e),f;delete Ph[e];for(let m=0,y=d.length;m<y;m++){const _=d[m];_.onError&&_.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class LZ extends cl{constructor(e){super(e)}load(e,n,r,s){const a=this,o=new dd(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{n(a.parse(JSON.parse(l)))}catch(u){s?s(u):console.error(u),a.manager.itemError(e)}},r,s)}parse(e){const n=[];for(let r=0;r<e.length;r++){const s=G1.parse(e[r]);n.push(s)}return n}}class UZ extends cl{constructor(e){super(e)}load(e,n,r,s){const a=this,o=[],l=new HC,u=new dd(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(a.withCredentials);let f=0;function d(m){u.load(e[m],function(y){const _=a.parse(y,!0);o[m]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},f+=1,f===6&&(_.mipmapCount===1&&(l.minFilter=Is),l.image=o,l.format=_.format,l.needsUpdate=!0,n&&n(l))},r,s)}if(Array.isArray(e))for(let m=0,y=e.length;m<y;++m)d(m);else u.load(e,function(m){const y=a.parse(m,!0);if(y.isCubemap){const _=y.mipmaps.length/y.mipmapCount;for(let x=0;x<_;x++){o[x]={mipmaps:[]};for(let S=0;S<y.mipmapCount;S++)o[x].mipmaps.push(y.mipmaps[x*y.mipmapCount+S]),o[x].format=y.format,o[x].width=y.width,o[x].height=y.height}l.image=o}else l.image.width=y.width,l.image.height=y.height,l.mipmaps=y.mipmaps;y.mipmapCount===1&&(l.minFilter=Is),l.format=y.format,l.needsUpdate=!0,n&&n(l)},r,s);return l}}class j1 extends cl{constructor(e){super(e)}load(e,n,r,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=Zh.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){n&&n(o),a.manager.itemEnd(e)},0),o;const l=U1("img");function u(){d(),Zh.add(e,this),n&&n(this),a.manager.itemEnd(e)}function f(m){d(),s&&s(m),a.manager.itemError(e),a.manager.itemEnd(e)}function d(){l.removeEventListener("load",u,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),a.manager.itemStart(e),l.src=e,l}}class kZ extends cl{constructor(e){super(e)}load(e,n,r,s){const a=new CS;a.colorSpace=la;const o=new j1(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function u(f){o.load(e[f],function(d){a.images[f]=d,l++,l===6&&(a.needsUpdate=!0,n&&n(a))},void 0,s)}for(let f=0;f<e.length;++f)u(f);return a}}class zZ extends cl{constructor(e){super(e)}load(e,n,r,s){const a=this,o=new If,l=new dd(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(a.withCredentials),l.load(e,function(u){let f;try{f=a.parse(u)}catch(d){if(s!==void 0)s(d);else{console.error(d);return}}f.image!==void 0?o.image=f.image:f.data!==void 0&&(o.image.width=f.width,o.image.height=f.height,o.image.data=f.data),o.wrapS=f.wrapS!==void 0?f.wrapS:Su,o.wrapT=f.wrapT!==void 0?f.wrapT:Su,o.magFilter=f.magFilter!==void 0?f.magFilter:Is,o.minFilter=f.minFilter!==void 0?f.minFilter:Is,o.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(o.colorSpace=f.colorSpace),f.flipY!==void 0&&(o.flipY=f.flipY),f.format!==void 0&&(o.format=f.format),f.type!==void 0&&(o.type=f.type),f.mipmaps!==void 0&&(o.mipmaps=f.mipmaps,o.minFilter=Af),f.mipmapCount===1&&(o.minFilter=Is),f.generateMipmaps!==void 0&&(o.generateMipmaps=f.generateMipmaps),o.needsUpdate=!0,n&&n(o,f)},r,s),o}}class BZ extends cl{constructor(e){super(e)}load(e,n,r,s){const a=new Xr,o=new j1(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){a.image=l,a.needsUpdate=!0,n!==void 0&&n(a)},r,s),a}}class mm extends vi{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new ke(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}class z8 extends mm{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(vi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ke(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const MO=new cn,Nz=new pt,Lz=new pt;class m3{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new de(512,512),this.map=null,this.mapPass=null,this.matrix=new cn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new RS,this._frameExtents=new de(1,1),this._viewportCount=1,this._viewports=[new di(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;Nz.setFromMatrixPosition(e.matrixWorld),n.position.copy(Nz),Lz.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(Lz),n.updateMatrixWorld(),MO.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(MO),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(MO)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class FZ extends m3{constructor(){super(new Ws(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=W0*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,a=e.distance||n.far;(r!==n.fov||s!==n.aspect||a!==n.far)&&(n.fov=r,n.aspect=s,n.far=a,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class B8 extends mm{constructor(e,n,r=0,s=Math.PI/3,a=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(vi.DEFAULT_UP),this.updateMatrix(),this.target=new vi,this.distance=r,this.angle=s,this.penumbra=a,this.decay=o,this.map=null,this.shadow=new FZ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Uz=new cn,rx=new pt,CO=new pt;class VZ extends m3{constructor(){super(new Ws(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new de(4,2),this._viewportCount=6,this._viewports=[new di(2,1,1,1),new di(0,1,1,1),new di(3,1,1,1),new di(1,1,1,1),new di(3,0,1,1),new di(1,0,1,1)],this._cubeDirections=[new pt(1,0,0),new pt(-1,0,0),new pt(0,0,1),new pt(0,0,-1),new pt(0,1,0),new pt(0,-1,0)],this._cubeUps=[new pt(0,1,0),new pt(0,1,0),new pt(0,1,0),new pt(0,1,0),new pt(0,0,1),new pt(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,s=this.matrix,a=e.distance||r.far;a!==r.far&&(r.far=a,r.updateProjectionMatrix()),rx.setFromMatrixPosition(e.matrixWorld),r.position.copy(rx),CO.copy(r.position),CO.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(CO),r.updateMatrixWorld(),s.makeTranslation(-rx.x,-rx.y,-rx.z),Uz.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Uz)}}class F8 extends mm{constructor(e,n,r=0,s=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=s,this.shadow=new VZ}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class US extends UC{constructor(e=-1,n=1,r=1,s=-1,a=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=s,this.near=a,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,s,a,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=s,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let a=r-e,o=r+e,l=s+n,u=s-n;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=f*this.view.offsetX,o=a+f*this.view.width,l-=d*this.view.offsetY,u=l-d*this.view.height}this.projectionMatrix.makeOrthographic(a,o,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class HZ extends m3{constructor(){super(new US(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class V8 extends mm{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(vi.DEFAULT_UP),this.updateMatrix(),this.target=new vi,this.shadow=new HZ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class H8 extends mm{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class G8 extends mm{constructor(e,n,r=10,s=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class j8{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new pt)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,s=e.y,a=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*s),n.addScaledVector(o[2],.488603*a),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*s)),n.addScaledVector(o[5],1.092548*(s*a)),n.addScaledVector(o[6],.315392*(3*a*a-1)),n.addScaledVector(o[7],1.092548*(r*a)),n.addScaledVector(o[8],.546274*(r*r-s*s)),n}getIrradianceAt(e,n){const r=e.x,s=e.y,a=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*s),n.addScaledVector(o[2],2*.511664*a),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*s),n.addScaledVector(o[5],2*.429043*s*a),n.addScaledVector(o[6],.743125*a*a-.247708),n.addScaledVector(o[7],2*.429043*r*a),n.addScaledVector(o[8],.429043*(r*r-s*s)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let s=0;s<9;s++)r[s].fromArray(e,n+s*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let s=0;s<9;s++)r[s].toArray(e,n+s*3);return e}static getBasisAt(e,n){const r=e.x,s=e.y,a=e.z;n[0]=.282095,n[1]=.488603*s,n[2]=.488603*a,n[3]=.488603*r,n[4]=1.092548*r*s,n[5]=1.092548*s*a,n[6]=.315392*(3*a*a-1),n[7]=1.092548*r*a,n[8]=.546274*(r*r-s*s)}}class q8 extends mm{constructor(e=new j8,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class i2 extends cl{constructor(e){super(e),this.textures={}}load(e,n,r,s){const a=this,o=new dd(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,function(l){try{n(a.parse(JSON.parse(l)))}catch(u){s?s(u):console.error(u),a.manager.itemError(e)}},r,s)}parse(e){const n=this.textures;function r(a){return n[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),n[a]}const s=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new ke().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const o=e.uniforms[a];switch(s.uniforms[a]={},o.type){case"t":s.uniforms[a].value=r(o.value);break;case"c":s.uniforms[a].value=new ke().setHex(o.value);break;case"v2":s.uniforms[a].value=new de().fromArray(o.value);break;case"v3":s.uniforms[a].value=new pt().fromArray(o.value);break;case"v4":s.uniforms[a].value=new di().fromArray(o.value);break;case"m3":s.uniforms[a].value=new Dn().fromArray(o.value);break;case"m4":s.uniforms[a].value=new cn().fromArray(o.value);break;default:s.uniforms[a].value=o.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)s.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=r(e.map)),e.matcap!==void 0&&(s.matcap=r(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),s.normalScale=new de().fromArray(a)}return e.displacementMap!==void 0&&(s.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=r(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new de().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=r(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return i2.createMaterialFromType(e)}static createMaterialFromType(e){const n={ShadowMaterial:T8,SpriteMaterial:FC,RawShaderMaterial:w8,ShaderMaterial:Au,PointsMaterial:t3,MeshPhysicalMaterial:A8,MeshStandardMaterial:n2,MeshPhongMaterial:M8,MeshToonMaterial:C8,MeshNormalMaterial:R8,MeshLambertMaterial:l3,MeshDepthMaterial:u3,MeshDistanceMaterial:c3,MeshBasicMaterial:dm,MeshMatcapMaterial:O8,LineDashedMaterial:I8,LineBasicMaterial:ja,Material:Ga};return new n[e]}}class OD{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class $8 extends Un{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class W8 extends cl{constructor(e){super(e)}load(e,n,r,s){const a=this,o=new dd(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,function(l){try{n(a.parse(JSON.parse(l)))}catch(u){s?s(u):console.error(u),a.manager.itemError(e)}},r,s)}parse(e){const n={},r={};function s(_,x){if(n[x]!==void 0)return n[x];const T=_.interleavedBuffers[x],b=a(_,T.buffer),M=w0(T.type,b),R=new BC(M,T.stride);return R.uuid=T.uuid,n[x]=R,R}function a(_,x){if(r[x]!==void 0)return r[x];const T=_.arrayBuffers[x],b=new Uint32Array(T).buffer;return r[x]=b,b}const o=e.isInstancedBufferGeometry?new $8:new Un,l=e.data.index;if(l!==void 0){const _=w0(l.type,l.array);o.setIndex(new zi(_,1))}const u=e.data.attributes;for(const _ in u){const x=u[_];let S;if(x.isInterleavedBufferAttribute){const T=s(e.data,x.data);S=new uy(T,x.itemSize,x.offset,x.normalized)}else{const T=w0(x.type,x.array),b=x.isInstancedBufferAttribute?K0:zi;S=new b(T,x.itemSize,x.normalized)}x.name!==void 0&&(S.name=x.name),x.usage!==void 0&&S.setUsage(x.usage),o.setAttribute(_,S)}const f=e.data.morphAttributes;if(f)for(const _ in f){const x=f[_],S=[];for(let T=0,b=x.length;T<b;T++){const M=x[T];let R;if(M.isInterleavedBufferAttribute){const A=s(e.data,M.data);R=new uy(A,M.itemSize,M.offset,M.normalized)}else{const A=w0(M.type,M.array);R=new zi(A,M.itemSize,M.normalized)}M.name!==void 0&&(R.name=M.name),S.push(R)}o.morphAttributes[_]=S}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let _=0,x=m.length;_!==x;++_){const S=m[_];o.addGroup(S.start,S.count,S.materialIndex)}const y=e.data.boundingSphere;if(y!==void 0){const _=new pt;y.center!==void 0&&_.fromArray(y.center),o.boundingSphere=new da(_,y.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class GZ extends cl{constructor(e){super(e)}load(e,n,r,s){const a=this,o=this.path===""?OD.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new dd(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){let f=null;try{f=JSON.parse(u)}catch(m){s!==void 0&&s(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const d=f.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(f,n)},r,s)}async loadAsync(e,n){const r=this,s=this.path===""?OD.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new dd(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const o=await a.loadAsync(e,n),l=JSON.parse(o),u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(l)}parse(e,n){const r=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,s),o=this.parseImages(e.images,function(){n!==void 0&&n(f)}),l=this.parseTextures(e.textures,o),u=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,a,u,l,r),d=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,d),this.bindLightTargets(f),n!==void 0){let m=!1;for(const y in o)if(o[y].data instanceof HTMLImageElement){m=!0;break}m===!1&&n(f)}return f}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,s,l,o,n),f=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,f),this.bindLightTargets(u),u}parseShapes(e){const n={};if(e!==void 0)for(let r=0,s=e.length;r<s;r++){const a=new Kg().fromJSON(e[r]);n[a.uuid]=a}return n}parseSkeletons(e,n){const r={},s={};if(n.traverse(function(a){a.isBone&&(s[a.uuid]=a)}),e!==void 0)for(let a=0,o=e.length;a<o;a++){const l=new VC().fromJSON(e[a],s);r[l.uuid]=l}return r}parseGeometries(e,n){const r={};if(e!==void 0){const s=new W8;for(let a=0,o=e.length;a<o;a++){let l;const u=e[a];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":l=s.parse(u);break;default:u.type in Pz?l=Pz[u.type].fromJSON(u,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}l.uuid=u.uuid,u.name!==void 0&&(l.name=u.name),u.userData!==void 0&&(l.userData=u.userData),r[u.uuid]=l}}return r}parseMaterials(e,n){const r={},s={};if(e!==void 0){const a=new i2;a.setTextures(n);for(let o=0,l=e.length;o<l;o++){const u=e[o];r[u.uuid]===void 0&&(r[u.uuid]=a.parse(u)),s[u.uuid]=r[u.uuid]}}return s}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const s=e[r],a=G1.parse(s);n[a.uuid]=a}return n}parseImages(e,n){const r=this,s={};let a;function o(u){return r.manager.itemStart(u),a.load(u,function(){r.manager.itemEnd(u)},void 0,function(){r.manager.itemError(u),r.manager.itemEnd(u)})}function l(u){if(typeof u=="string"){const f=u,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:r.resourcePath+f;return o(d)}else return u.data?{data:w0(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){const u=new p3(n);a=new j1(u),a.setCrossOrigin(this.crossOrigin);for(let f=0,d=e.length;f<d;f++){const m=e[f],y=m.url;if(Array.isArray(y)){const _=[];for(let x=0,S=y.length;x<S;x++){const T=y[x],b=l(T);b!==null&&(b instanceof HTMLImageElement?_.push(b):_.push(new If(b.data,b.width,b.height)))}s[m.uuid]=new zp(_)}else{const _=l(m.url);s[m.uuid]=new zp(_)}}}return s}async parseImagesAsync(e){const n=this,r={};let s;async function a(o){if(typeof o=="string"){const l=o,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:n.resourcePath+l;return await s.loadAsync(u)}else return o.data?{data:w0(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){s=new j1(this.manager),s.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o<l;o++){const u=e[o],f=u.url;if(Array.isArray(f)){const d=[];for(let m=0,y=f.length;m<y;m++){const _=f[m],x=await a(_);x!==null&&(x instanceof HTMLImageElement?d.push(x):d.push(new If(x.data,x.width,x.height)))}r[u.uuid]=new zp(d)}else{const d=await a(u.url);r[u.uuid]=new zp(d)}}}return r}parseTextures(e,n){function r(a,o){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),o[a])}const s={};if(e!==void 0)for(let a=0,o=e.length;a<o;a++){const l=e[a];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),n[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const u=n[l.image],f=u.data;let d;Array.isArray(f)?(d=new CS,f.length===6&&(d.needsUpdate=!0)):(f&&f.data?d=new If:d=new Xr,f&&(d.needsUpdate=!0)),d.source=u,d.uuid=l.uuid,l.name!==void 0&&(d.name=l.name),l.mapping!==void 0&&(d.mapping=r(l.mapping,jZ)),l.channel!==void 0&&(d.channel=l.channel),l.offset!==void 0&&d.offset.fromArray(l.offset),l.repeat!==void 0&&d.repeat.fromArray(l.repeat),l.center!==void 0&&d.center.fromArray(l.center),l.rotation!==void 0&&(d.rotation=l.rotation),l.wrap!==void 0&&(d.wrapS=r(l.wrap[0],kz),d.wrapT=r(l.wrap[1],kz)),l.format!==void 0&&(d.format=l.format),l.internalFormat!==void 0&&(d.internalFormat=l.internalFormat),l.type!==void 0&&(d.type=l.type),l.colorSpace!==void 0&&(d.colorSpace=l.colorSpace),l.minFilter!==void 0&&(d.minFilter=r(l.minFilter,zz)),l.magFilter!==void 0&&(d.magFilter=r(l.magFilter,zz)),l.anisotropy!==void 0&&(d.anisotropy=l.anisotropy),l.flipY!==void 0&&(d.flipY=l.flipY),l.generateMipmaps!==void 0&&(d.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(d.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(d.compareFunction=l.compareFunction),l.userData!==void 0&&(d.userData=l.userData),s[l.uuid]=d}return s}parseObject(e,n,r,s,a){let o;function l(y){return n[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",y),n[y]}function u(y){if(y!==void 0){if(Array.isArray(y)){const _=[];for(let x=0,S=y.length;x<S;x++){const T=y[x];r[T]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",T),_.push(r[T])}return _}return r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),r[y]}}function f(y){return s[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",y),s[y]}let d,m;switch(e.type){case"Scene":o=new ZN,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ke(e.background):o.background=f(e.background)),e.environment!==void 0&&(o.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new zC(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new kC(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Ws(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new US(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new H8(e.color,e.intensity);break;case"DirectionalLight":o=new V8(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new F8(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new G8(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new B8(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new z8(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new q8().fromJSON(e);break;case"SkinnedMesh":d=l(e.geometry),m=u(e.material),o=new l8(d,m),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=l(e.geometry),m=u(e.material),o=new $r(d,m);break;case"InstancedMesh":d=l(e.geometry),m=u(e.material);const y=e.count,_=e.instanceMatrix,x=e.instanceColor;o=new u8(d,m,y),o.instanceMatrix=new K0(new Float32Array(_.array),16),x!==void 0&&(o.instanceColor=new K0(new Float32Array(x.array),x.itemSize));break;case"BatchedMesh":d=l(e.geometry),m=u(e.material),o=new c8(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,m),o.geometry=d,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(S=>{const T=new ha;T.min.fromArray(S.boxMin),T.max.fromArray(S.boxMax);const b=new da;return b.radius=S.sphereRadius,b.center.fromArray(S.sphereCenter),{boxInitialized:S.boxInitialized,box:T,sphereInitialized:S.sphereInitialized,sphere:b}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=f(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=f(e.colorsTexture.uuid));break;case"LOD":o=new o8;break;case"Line":o=new hd(l(e.geometry),u(e.material));break;case"LineLoop":o=new f8(l(e.geometry),u(e.material));break;case"LineSegments":o=new Yf(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":o=new h8(l(e.geometry),u(e.material));break;case"Sprite":o=new QN(u(e.material));break;case"Group":o=new Kh;break;case"Bone":o=new JN;break;default:o=new vi}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const y=e.children;for(let _=0;_<y.length;_++)o.add(this.parseObject(y[_],n,r,s,a))}if(e.animations!==void 0){const y=e.animations;for(let _=0;_<y.length;_++){const x=y[_];o.animations.push(a[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const y=e.levels;for(let _=0;_<y.length;_++){const x=y[_],S=o.getObjectByProperty("uuid",x.object);S!==void 0&&o.addLevel(S,x.distance,x.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const s=n[r.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(s,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const r=n.target,s=e.getObjectByProperty("uuid",r);s!==void 0?n.target=s:n.target=new vi}})}}const jZ={UVMapping:AC,CubeReflectionMapping:cd,CubeRefractionMapping:Jp,EquirectangularReflectionMapping:M1,EquirectangularRefractionMapping:C1,CubeUVReflectionMapping:A_},kz={RepeatWrapping:R1,ClampToEdgeWrapping:Su,MirroredRepeatWrapping:O1},zz={NearestFilter:fa,NearestMipmapNearestFilter:UN,NearestMipmapLinearFilter:T0,LinearFilter:Is,LinearMipmapNearestFilter:Qx,LinearMipmapLinearFilter:Af};class qZ extends cl{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=Zh.get(e);if(o!==void 0){if(a.manager.itemStart(e),o.then){o.then(f=>{n&&n(f),a.manager.itemEnd(e)}).catch(f=>{s&&s(f)});return}return setTimeout(function(){n&&n(o),a.manager.itemEnd(e)},0),o}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const u=fetch(e,l).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(f){return Zh.add(e,f),n&&n(f),a.manager.itemEnd(e),f}).catch(function(f){s&&s(f),Zh.remove(e),a.manager.itemError(e),a.manager.itemEnd(e)});Zh.add(e,u),a.manager.itemStart(e)}}let tw;class g3{static getContext(){return tw===void 0&&(tw=new(window.AudioContext||window.webkitAudioContext)),tw}static setContext(e){tw=e}}class $Z extends cl{constructor(e){super(e)}load(e,n,r,s){const a=this,o=new dd(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(u){try{const f=u.slice(0);g3.getContext().decodeAudioData(f,function(m){n(m)}).catch(l)}catch(f){l(f)}},r,s);function l(u){s?s(u):console.error(u),a.manager.itemError(e)}}}const Bz=new cn,Fz=new cn,dg=new cn;class WZ{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ws,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ws,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,dg.copy(e.projectionMatrix);const s=n.eyeSep/2,a=s*n.near/n.focus,o=n.near*Math.tan(Yg*n.fov*.5)/n.zoom;let l,u;Fz.elements[12]=-s,Bz.elements[12]=s,l=-o*n.aspect+a,u=o*n.aspect+a,dg.elements[0]=2*n.near/(u-l),dg.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(dg),l=-o*n.aspect-a,u=o*n.aspect-a,dg.elements[0]=2*n.near/(u-l),dg.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(dg)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Fz),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Bz)}}class X8 extends Ws{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class y3{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Vz(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=Vz();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function Vz(){return performance.now()}const pg=new pt,Hz=new bo,XZ=new pt,mg=new pt;class YZ extends vi{constructor(){super(),this.type="AudioListener",this.context=g3.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new y3}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(pg,Hz,XZ),mg.set(0,0,-1).applyQuaternion(Hz),n.positionX){const s=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(pg.x,s),n.positionY.linearRampToValueAtTime(pg.y,s),n.positionZ.linearRampToValueAtTime(pg.z,s),n.forwardX.linearRampToValueAtTime(mg.x,s),n.forwardY.linearRampToValueAtTime(mg.y,s),n.forwardZ.linearRampToValueAtTime(mg.z,s),n.upX.linearRampToValueAtTime(r.x,s),n.upY.linearRampToValueAtTime(r.y,s),n.upZ.linearRampToValueAtTime(r.z,s)}else n.setPosition(pg.x,pg.y,pg.z),n.setOrientation(mg.x,mg.y,mg.z,r.x,r.y,r.z)}}class Y8 extends vi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,n){return super.copy(e,n),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const gg=new pt,Gz=new bo,KZ=new pt,yg=new pt;class ZZ extends Y8{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(gg,Gz,KZ),yg.set(0,0,1).applyQuaternion(Gz);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(gg.x,r),n.positionY.linearRampToValueAtTime(gg.y,r),n.positionZ.linearRampToValueAtTime(gg.z,r),n.orientationX.linearRampToValueAtTime(yg.x,r),n.orientationY.linearRampToValueAtTime(yg.y,r),n.orientationZ.linearRampToValueAtTime(yg.z,r)}else n.setPosition(gg.x,gg.y,gg.z),n.setOrientation(yg.x,yg.y,yg.z)}}class QZ{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class K8{constructor(e,n,r){this.binding=e,this.valueSize=r;let s,a,o;switch(n){case"quaternion":s=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":s=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:s=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,s=this.valueSize,a=e*s+s;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==s;++l)r[a+l]=r[l];o=n}else{o+=n;const l=n/o;this._mixBufferRegion(r,a,0,l,s)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,s=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,s,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,s=e*n+n,a=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const u=n*this._origIndex;this._mixBufferRegion(r,s,u,1-a,n)}o>0&&this._mixBufferRegionAdditive(r,s,this._addIndex*n,1,n);for(let u=n,f=n+n;u!==f;++u)if(r[u]!==r[u+n]){l.setValue(r,s);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,s=r*this._origIndex;e.getValue(n,s);for(let a=r,o=s;a!==o;++a)n[a]=n[s+a%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,s,a){if(s>=.5)for(let o=0;o!==a;++o)e[n+o]=e[r+o]}_slerp(e,n,r,s){bo.slerpFlat(e,n,e,n,e,r,s)}_slerpAdditive(e,n,r,s,a){const o=this._workIndex*a;bo.multiplyQuaternionsFlat(e,o,e,n,e,r),bo.slerpFlat(e,n,e,n,e,o,s)}_lerp(e,n,r,s,a){const o=1-s;for(let l=0;l!==a;++l){const u=n+l;e[u]=e[u]*o+e[r+l]*s}}_lerpAdditive(e,n,r,s,a){for(let o=0;o!==a;++o){const l=n+o;e[l]=e[l]+e[r+o]*s}}}const v3="\\[\\]\\.:\\/",JZ=new RegExp("["+v3+"]","g"),_3="[^"+v3+"]",tQ="[^"+v3.replace("\\.","")+"]",eQ=/((?:WC+[\/:])*)/.source.replace("WC",_3),nQ=/(WCOD+)?/.source.replace("WCOD",tQ),iQ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_3),rQ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_3),sQ=new RegExp("^"+eQ+nQ+iQ+rQ+"$"),aQ=["material","materials","bones","map"];class oQ{constructor(e,n,r){const s=r||mi.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,s)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,s=this._bindings[r];s!==void 0&&s.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let s=this._targetGroup.nCachedObjects_,a=r.length;s!==a;++s)r[s].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class mi{constructor(e,n,r){this.path=n,this.parsedPath=r||mi.parseTrackName(n),this.node=mi.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new mi.Composite(e,n,r):new mi(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(JZ,"")}static parseTrackName(e){const n=sQ.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const a=r.nodeName.substring(s+1);aQ.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(a){for(let o=0;o<a.length;o++){const l=a[o];if(l.name===n||l.uuid===n)return l;const u=r(l.children);if(u)return u}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)e[n++]=r[s]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)r[s]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)r[s]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)r[s]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let a=n.propertyIndex;if(e||(e=mi.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let f=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===f){f=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const o=e[s];if(o===void 0){const f=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+s+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(a!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}u=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=a}else o.fromArray!==void 0&&o.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(u=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=s;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}mi.Composite=oQ;mi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};mi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};mi.prototype.GetterByBindingType=[mi.prototype._getValue_direct,mi.prototype._getValue_array,mi.prototype._getValue_arrayElement,mi.prototype._getValue_toArray];mi.prototype.SetterByBindingTypeAndVersioning=[[mi.prototype._setValue_direct,mi.prototype._setValue_direct_setNeedsUpdate,mi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[mi.prototype._setValue_array,mi.prototype._setValue_array_setNeedsUpdate,mi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[mi.prototype._setValue_arrayElement,mi.prototype._setValue_arrayElement_setNeedsUpdate,mi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[mi.prototype._setValue_fromArray,mi.prototype._setValue_fromArray_setNeedsUpdate,mi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class lQ{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ul(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,s=arguments.length;r!==s;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length;let l,u=e.length,f=this.nCachedObjects_;for(let d=0,m=arguments.length;d!==m;++d){const y=arguments[d],_=y.uuid;let x=n[_];if(x===void 0){x=u++,n[_]=x,e.push(y);for(let S=0,T=o;S!==T;++S)a[S].push(new mi(y,r[S],s[S]))}else if(x<f){l=e[x];const S=--f,T=e[S];n[T.uuid]=x,e[x]=T,n[_]=S,e[S]=y;for(let b=0,M=o;b!==M;++b){const R=a[b],A=R[S];let I=R[x];R[x]=A,I===void 0&&(I=new mi(y,r[b],s[b])),R[S]=I}}else e[x]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,s=r.length;let a=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],f=u.uuid,d=n[f];if(d!==void 0&&d>=a){const m=a++,y=e[m];n[y.uuid]=d,e[d]=y,n[f]=m,e[m]=u;for(let _=0,x=s;_!==x;++_){const S=r[_],T=S[m],b=S[d];S[d]=T,S[m]=b}}}this.nCachedObjects_=a}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,s=r.length;let a=this.nCachedObjects_,o=e.length;for(let l=0,u=arguments.length;l!==u;++l){const f=arguments[l],d=f.uuid,m=n[d];if(m!==void 0)if(delete n[d],m<a){const y=--a,_=e[y],x=--o,S=e[x];n[_.uuid]=m,e[m]=_,n[S.uuid]=y,e[y]=S,e.pop();for(let T=0,b=s;T!==b;++T){const M=r[T],R=M[y],A=M[x];M[m]=R,M[y]=A,M.pop()}}else{const y=--o,_=e[y];y>0&&(n[_.uuid]=m),e[m]=_,e.pop();for(let x=0,S=s;x!==S;++x){const T=r[x];T[m]=T[y],T.pop()}}}this.nCachedObjects_=a}subscribe_(e,n){const r=this._bindingsIndicesByPath;let s=r[e];const a=this._bindings;if(s!==void 0)return a[s];const o=this._paths,l=this._parsedPaths,u=this._objects,f=u.length,d=this.nCachedObjects_,m=new Array(f);s=a.length,r[e]=s,o.push(e),l.push(n),a.push(m);for(let y=d,_=u.length;y!==_;++y){const x=u[y];m[y]=new mi(x,e,n)}return m}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const s=this._paths,a=this._parsedPaths,o=this._bindings,l=o.length-1,u=o[l],f=e[l];n[f]=r,o[r]=u,o.pop(),a[r]=a[l],a.pop(),s[r]=s[l],s.pop()}}}class Z8{constructor(e,n,r=null,s=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=s;const a=n.tracks,o=a.length,l=new Array(o),u={endingStart:kg,endingEnd:kg};for(let f=0;f!==o;++f){const d=a[f].createInterpolant(null);l[f]=d,d.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=BH,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const s=this._clip.duration,a=e._clip.duration,o=a/s,l=s/a;e.warp(1,o,n),this.warp(l,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const s=this._mixer,a=s.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=s._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,f=l.sampleValues;return u[0]=a,u[1]=a+r,f[0]=e/o,f[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,s){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const u=(e-a)*r;u<0||r===0?n=0:(this._startTime=null,n=r*u)}n*=this._updateTimeScale(e);const o=this._updateTime(n),l=this._updateWeight(e);if(l>0){const u=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case $N:for(let d=0,m=u.length;d!==m;++d)u[d].evaluate(o),f[d].accumulateAdditive(l);break;case PC:default:for(let d=0,m=u.length;d!==m;++d)u[d].evaluate(o),f[d].accumulate(s,l)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const s=r.evaluate(e)[0];n*=s,e>r.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const s=r.evaluate(e)[0];n*=s,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let s=this.time+e,a=this._loopCount;const o=r===FH;if(e===0)return a===-1?s:o&&(a&1)===1?n-s:s;if(r===zH){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(s>=n)s=n;else if(s<0)s=0;else{this.time=s;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),s>=n||s<0){const l=Math.floor(s/n);s-=n*l,a+=Math.abs(l);const u=this.repetitions-a;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?n:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const f=e<0;this._setEndings(f,!f,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=s;if(o&&(a&1)===1)return n-s}return s}_setEndings(e,n,r){const s=this._interpolantSettings;r?(s.endingStart=zg,s.endingEnd=zg):(e?s.endingStart=this.zeroSlopeAtStart?zg:kg:s.endingStart=D1,n?s.endingEnd=this.zeroSlopeAtEnd?zg:kg:s.endingEnd=D1)}_scheduleFading(e,n,r){const s=this._mixer,a=s.time;let o=this._weightInterpolant;o===null&&(o=s._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=a,u[0]=n,l[1]=a+e,u[1]=r,this}}const uQ=new Float32Array(1);class cQ extends Xf{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,s=e._clip.tracks,a=s.length,o=e._propertyBindings,l=e._interpolants,u=r.uuid,f=this._bindingsByRootAndName;let d=f[u];d===void 0&&(d={},f[u]=d);for(let m=0;m!==a;++m){const y=s[m],_=y.name;let x=d[_];if(x!==void 0)++x.referenceCount,o[m]=x;else{if(x=o[m],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,u,_));continue}const S=n&&n._propertyBindings[m].binding.parsedPath;x=new K8(mi.create(r,_,S),y.ValueTypeName,y.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,u,_),o[m]=x}l[m].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,s=e._clip.uuid,a=this._actionsByClip[s];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,s,r)}const n=e._propertyBindings;for(let r=0,s=n.length;r!==s;++r){const a=n[r];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,s=n.length;r!==s;++r){const a=n[r];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const s=this._actions,a=this._actionsByClip;let o=a[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[n]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=s.length,s.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],s=e._cacheIndex;r._cacheIndex=s,n[s]=r,n.pop(),e._cacheIndex=null;const a=e._clip.uuid,o=this._actionsByClip,l=o[a],u=l.knownActions,f=u[u.length-1],d=e._byClipCacheIndex;f._byClipCacheIndex=d,u[d]=f,u.pop(),e._byClipCacheIndex=null;const m=l.actionByRoot,y=(e._localRoot||this._root).uuid;delete m[y],u.length===0&&delete o[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,s=n.length;r!==s;++r){const a=n[r];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,s=this._nActiveActions++,a=n[s];e._cacheIndex=s,n[s]=e,a._cacheIndex=r,n[r]=a}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,s=--this._nActiveActions,a=n[s];e._cacheIndex=s,n[s]=e,a._cacheIndex=r,n[r]=a}_addInactiveBinding(e,n,r){const s=this._bindingsByRootAndName,a=this._bindings;let o=s[n];o===void 0&&(o={},s[n]=o),o[r]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,s=r.rootNode.uuid,a=r.path,o=this._bindingsByRootAndName,l=o[s],u=n[n.length-1],f=e._cacheIndex;u._cacheIndex=f,n[f]=u,n.pop(),delete l[a],Object.keys(l).length===0&&delete o[s]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,s=this._nActiveBindings++,a=n[s];e._cacheIndex=s,n[s]=e,a._cacheIndex=r,n[r]=a}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,s=--this._nActiveBindings,a=n[s];e._cacheIndex=s,n[s]=e,a._cacheIndex=r,n[r]=a}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new h3(new Float32Array(2),new Float32Array(2),1,uQ),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,s=--this._nActiveControlInterpolants,a=n[s];e.__cacheIndex=s,n[s]=e,a.__cacheIndex=r,n[r]=a}clipAction(e,n,r){const s=n||this._root,a=s.uuid;let o=typeof e=="string"?G1.findByName(s,e):e;const l=o!==null?o.uuid:e,u=this._actionsByClip[l];let f=null;if(r===void 0&&(o!==null?r=o.blendMode:r=PC),u!==void 0){const m=u.actionByRoot[a];if(m!==void 0&&m.blendMode===r)return m;f=u.knownActions[0],o===null&&(o=f._clip)}if(o===null)return null;const d=new Z8(this,o,n,r);return this._bindAction(d,f),this._addInactiveAction(d,l,a),d}existingAction(e,n){const r=n||this._root,s=r.uuid,a=typeof e=="string"?G1.findByName(r,e):e,o=a?a.uuid:e,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[s]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,s=this.time+=e,a=Math.sign(e),o=this._accuIndex^=1;for(let f=0;f!==r;++f)n[f]._update(s,e,a,o);const l=this._bindings,u=this._nActiveBindings;for(let f=0;f!==u;++f)l[f].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,s=this._actionsByClip,a=s[r];if(a!==void 0){const o=a.knownActions;for(let l=0,u=o.length;l!==u;++l){const f=o[l];this._deactivateAction(f);const d=f._cacheIndex,m=n[n.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,m._cacheIndex=d,n[d]=m,n.pop(),this._removeInactiveBindingsForAction(f)}delete s[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const l=r[o].actionByRoot,u=l[n];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const s=this._bindingsByRootAndName,a=s[n];if(a!==void 0)for(const o in a){const l=a[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class fQ extends NC{constructor(e=1,n=1,r=1,s={}){super(e,n,s),this.isRenderTarget3D=!0,this.depth=r,this.texture=new LC(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class hQ extends NC{constructor(e=1,n=1,r=1,s={}){super(e,n,s),this.isRenderTargetArray=!0,this.depth=r,this.texture=new MS(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class b3{constructor(e){this.value=e}clone(){return new b3(this.value.clone===void 0?this.value:this.value.clone())}}let dQ=0;class pQ extends Xf{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:dQ++}),this.name="",this.usage=N1,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,s=n.length;r<s;r++){const a=Array.isArray(n[r])?n[r]:[n[r]];for(let o=0;o<a.length;o++)this.uniforms.push(a[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class mQ extends BC{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class gQ{constructor(e,n,r,s,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=s,this.count=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const jz=new cn;class x3{constructor(e,n,r=0,s=1/0){this.ray=new C_(e,n),this.near=r,this.far=s,this.camera=null,this.layers=new X0,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return jz.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(jz),this}intersectObject(e,n=!0,r=[]){return ID(e,this,r,n),r.sort(qz),r}intersectObjects(e,n=!0,r=[]){for(let s=0,a=e.length;s<a;s++)ID(e[s],this,r,n);return r.sort(qz),r}}function qz(i,e){return i.distance-e.distance}function ID(i,e,n,r){let s=!0;if(i.layers.test(e.layers)&&i.raycast(e,n)===!1&&(s=!1),s===!0&&r===!0){const a=i.children;for(let o=0,l=a.length;o<l;o++)ID(a[o],e,n,!0)}}class S3{constructor(e=1,n=0,r=0){this.radius=e,this.phi=n,this.theta=r}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Cn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Cn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class yQ{constructor(e=1,n=0,r=0){this.radius=e,this.theta=n,this.y=r}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}class E3{constructor(e,n,r,s){E3.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,r,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let r=0;r<4;r++)this.elements[r]=e[r+n];return this}set(e,n,r,s){const a=this.elements;return a[0]=e,a[2]=n,a[1]=r,a[3]=s,this}}const $z=new de;class vQ{constructor(e=new de(1/0,1/0),n=new de(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=$z.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,$z).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Wz=new pt,ew=new pt;class _Q{constructor(e=new pt,n=new pt){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){Wz.subVectors(e,this.start),ew.subVectors(this.end,this.start);const r=ew.dot(ew);let a=ew.dot(Wz)/r;return n&&(a=Cn(a,0,1)),a}closestPointToPoint(e,n,r){const s=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Xz=new pt;class bQ extends vi{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new Un,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,u=32;o<u;o++,l++){const f=o/u*Math.PI*2,d=l/u*Math.PI*2;s.push(Math.cos(f),Math.sin(f),1,Math.cos(d),Math.sin(d),1)}r.setAttribute("position",new qe(s,3));const a=new ja({fog:!1,toneMapped:!1});this.cone=new Yf(r,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),Xz.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Xz),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Sp=new pt,nw=new cn,RO=new cn;class xQ extends Yf{constructor(e){const n=Q8(e),r=new Un,s=[],a=[],o=new ke(0,0,1),l=new ke(0,1,0);for(let f=0;f<n.length;f++){const d=n[f];d.parent&&d.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),a.push(o.r,o.g,o.b),a.push(l.r,l.g,l.b))}r.setAttribute("position",new qe(s,3)),r.setAttribute("color",new qe(a,3));const u=new ja({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,s=r.getAttribute("position");RO.copy(this.root.matrixWorld).invert();for(let a=0,o=0;a<n.length;a++){const l=n[a];l.parent&&l.parent.isBone&&(nw.multiplyMatrices(RO,l.matrixWorld),Sp.setFromMatrixPosition(nw),s.setXYZ(o,Sp.x,Sp.y,Sp.z),nw.multiplyMatrices(RO,l.parent.matrixWorld),Sp.setFromMatrixPosition(nw),s.setXYZ(o+1,Sp.x,Sp.y,Sp.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Q8(i){const e=[];i.isBone===!0&&e.push(i);for(let n=0;n<i.children.length;n++)e.push(...Q8(i.children[n]));return e}class SQ extends $r{constructor(e,n,r){const s=new Ty(n,4,2),a=new dm({wireframe:!0,fog:!1,toneMapped:!1});super(s,a),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const EQ=new pt,Yz=new ke,Kz=new ke;class TQ extends vi{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const s=new DS(n);s.rotateY(Math.PI*.5),this.material=new dm({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=s.getAttribute("position"),o=new Float32Array(a.count*3);s.setAttribute("color",new zi(o,3)),this.add(new $r(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");Yz.copy(this.light.color),Kz.copy(this.light.groundColor);for(let r=0,s=n.count;r<s;r++){const a=r<s/2?Yz:Kz;n.setXYZ(r,a.r,a.g,a.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(EQ.setFromMatrixPosition(this.light.matrixWorld).negate())}}class wQ extends Yf{constructor(e=10,n=10,r=4473924,s=8947848){r=new ke(r),s=new ke(s);const a=n/2,o=e/n,l=e/2,u=[],f=[];for(let y=0,_=0,x=-l;y<=n;y++,x+=o){u.push(-l,0,x,l,0,x),u.push(x,0,-l,x,0,l);const S=y===a?r:s;S.toArray(f,_),_+=3,S.toArray(f,_),_+=3,S.toArray(f,_),_+=3,S.toArray(f,_),_+=3}const d=new Un;d.setAttribute("position",new qe(u,3)),d.setAttribute("color",new qe(f,3));const m=new ja({vertexColors:!0,toneMapped:!1});super(d,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class AQ extends Yf{constructor(e=10,n=16,r=8,s=64,a=4473924,o=8947848){a=new ke(a),o=new ke(o);const l=[],u=[];if(n>1)for(let m=0;m<n;m++){const y=m/n*(Math.PI*2),_=Math.sin(y)*e,x=Math.cos(y)*e;l.push(0,0,0),l.push(_,0,x);const S=m&1?a:o;u.push(S.r,S.g,S.b),u.push(S.r,S.g,S.b)}for(let m=0;m<r;m++){const y=m&1?a:o,_=e-e/r*m;for(let x=0;x<s;x++){let S=x/s*(Math.PI*2),T=Math.sin(S)*_,b=Math.cos(S)*_;l.push(T,0,b),u.push(y.r,y.g,y.b),S=(x+1)/s*(Math.PI*2),T=Math.sin(S)*_,b=Math.cos(S)*_,l.push(T,0,b),u.push(y.r,y.g,y.b)}}const f=new Un;f.setAttribute("position",new qe(l,3)),f.setAttribute("color",new qe(u,3));const d=new ja({vertexColors:!0,toneMapped:!1});super(f,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Zz=new pt,iw=new pt,Qz=new pt;class MQ extends vi{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let s=new Un;s.setAttribute("position",new qe([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const a=new ja({fog:!1,toneMapped:!1});this.lightPlane=new hd(s,a),this.add(this.lightPlane),s=new Un,s.setAttribute("position",new qe([0,0,0,0,0,1],3)),this.targetLine=new hd(s,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Zz.setFromMatrixPosition(this.light.matrixWorld),iw.setFromMatrixPosition(this.light.target.matrixWorld),Qz.subVectors(iw,Zz),this.lightPlane.lookAt(iw),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(iw),this.targetLine.scale.z=Qz.length()}}const rw=new pt,Hr=new UC;class CQ extends Yf{constructor(e){const n=new Un,r=new ja({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],a=[],o={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(x,S){u(x),u(S)}function u(x){s.push(0,0,0),a.push(0,0,0),o[x]===void 0&&(o[x]=[]),o[x].push(s.length/3-1)}n.setAttribute("position",new qe(s,3)),n.setAttribute("color",new qe(a,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const f=new ke(16755200),d=new ke(16711680),m=new ke(43775),y=new ke(16777215),_=new ke(3355443);this.setColors(f,d,m,y,_)}setColors(e,n,r,s,a){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,n.r,n.g,n.b),l.setXYZ(25,n.r,n.g,n.b),l.setXYZ(26,n.r,n.g,n.b),l.setXYZ(27,n.r,n.g,n.b),l.setXYZ(28,n.r,n.g,n.b),l.setXYZ(29,n.r,n.g,n.b),l.setXYZ(30,n.r,n.g,n.b),l.setXYZ(31,n.r,n.g,n.b),l.setXYZ(32,r.r,r.g,r.b),l.setXYZ(33,r.r,r.g,r.b),l.setXYZ(34,r.r,r.g,r.b),l.setXYZ(35,r.r,r.g,r.b),l.setXYZ(36,r.r,r.g,r.b),l.setXYZ(37,r.r,r.g,r.b),l.setXYZ(38,s.r,s.g,s.b),l.setXYZ(39,s.r,s.g,s.b),l.setXYZ(40,a.r,a.g,a.b),l.setXYZ(41,a.r,a.g,a.b),l.setXYZ(42,a.r,a.g,a.b),l.setXYZ(43,a.r,a.g,a.b),l.setXYZ(44,a.r,a.g,a.b),l.setXYZ(45,a.r,a.g,a.b),l.setXYZ(46,a.r,a.g,a.b),l.setXYZ(47,a.r,a.g,a.b),l.setXYZ(48,a.r,a.g,a.b),l.setXYZ(49,a.r,a.g,a.b),l.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,s=1;Hr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const a=this.camera.coordinateSystem===pc?-1:0;ts("c",n,e,Hr,0,0,a),ts("t",n,e,Hr,0,0,1),ts("n1",n,e,Hr,-1,-1,a),ts("n2",n,e,Hr,r,-1,a),ts("n3",n,e,Hr,-1,s,a),ts("n4",n,e,Hr,r,s,a),ts("f1",n,e,Hr,-1,-1,1),ts("f2",n,e,Hr,r,-1,1),ts("f3",n,e,Hr,-1,s,1),ts("f4",n,e,Hr,r,s,1),ts("u1",n,e,Hr,r*.7,s*1.1,a),ts("u2",n,e,Hr,-1*.7,s*1.1,a),ts("u3",n,e,Hr,0,s*2,a),ts("cf1",n,e,Hr,-1,0,1),ts("cf2",n,e,Hr,r,0,1),ts("cf3",n,e,Hr,0,-1,1),ts("cf4",n,e,Hr,0,s,1),ts("cn1",n,e,Hr,-1,0,a),ts("cn2",n,e,Hr,r,0,a),ts("cn3",n,e,Hr,0,-1,a),ts("cn4",n,e,Hr,0,s,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ts(i,e,n,r,s,a,o){rw.set(s,a,o).unproject(r);const l=e[i];if(l!==void 0){const u=n.getAttribute("position");for(let f=0,d=l.length;f<d;f++)u.setXYZ(l[f],rw.x,rw.y,rw.z)}}const sw=new ha;class RQ extends Yf{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),a=new Un;a.setIndex(new zi(r,1)),a.setAttribute("position",new zi(s,3)),super(a,new ja({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&sw.setFromObject(this.object),sw.isEmpty())return;const e=sw.min,n=sw.max,r=this.geometry.attributes.position,s=r.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=e.x,s[4]=n.y,s[5]=n.z,s[6]=e.x,s[7]=e.y,s[8]=n.z,s[9]=n.x,s[10]=e.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=e.z,s[15]=e.x,s[16]=n.y,s[17]=e.z,s[18]=e.x,s[19]=e.y,s[20]=e.z,s[21]=n.x,s[22]=e.y,s[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class OQ extends Yf{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new Un;a.setIndex(new zi(r,1)),a.setAttribute("position",new qe(s,3)),super(a,new ja({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class IQ extends hd{constructor(e,n=1,r=16776960){const s=r,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Un;o.setAttribute("position",new qe(a,3)),o.computeBoundingSphere(),super(o,new ja({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new Un;u.setAttribute("position",new qe(l,3)),u.computeBoundingSphere(),this.add(new $r(u,new dm({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Jz=new pt;let aw,OO;class DQ extends vi{constructor(e=new pt(0,0,1),n=new pt(0,0,0),r=1,s=16776960,a=r*.2,o=a*.2){super(),this.type="ArrowHelper",aw===void 0&&(aw=new Un,aw.setAttribute("position",new qe([0,0,0,0,1,0],3)),OO=new Ey(0,.5,1,5,1),OO.translate(0,-.5,0)),this.position.copy(n),this.line=new hd(aw,new ja({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new $r(OO,new dm({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,a,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Jz.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(Jz,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class PQ extends Yf{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new Un;s.setAttribute("position",new qe(n,3)),s.setAttribute("color",new qe(r,3));const a=new ja({vertexColors:!0,toneMapped:!1});super(s,a),this.type="AxesHelper"}setColors(e,n,r){const s=new ke,a=this.geometry.attributes.color.array;return s.set(e),s.toArray(a,0),s.toArray(a,3),s.set(n),s.toArray(a,6),s.toArray(a,9),s.set(r),s.toArray(a,12),s.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class NQ{constructor(){this.type="ShapePath",this.color=new ke,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new k1,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,s){return this.currentPath.quadraticCurveTo(e,n,r,s),this}bezierCurveTo(e,n,r,s,a,o){return this.currentPath.bezierCurveTo(e,n,r,s,a,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(b){const M=[];for(let R=0,A=b.length;R<A;R++){const I=b[R],k=new Kg;k.curves=I.curves,M.push(k)}return M}function r(b,M){const R=M.length;let A=!1;for(let I=R-1,k=0;k<R;I=k++){let N=M[I],L=M[k],U=L.x-N.x,O=L.y-N.y;if(Math.abs(O)>Number.EPSILON){if(O<0&&(N=M[k],U=-U,L=M[I],O=-O),b.y<N.y||b.y>L.y)continue;if(b.y===N.y){if(b.x===N.x)return!0}else{const F=O*(b.x-N.x)-U*(b.y-N.y);if(F===0)return!0;if(F<0)continue;A=!A}}else{if(b.y!==N.y)continue;if(L.x<=b.x&&b.x<=N.x||N.x<=b.x&&b.x<=L.x)return!0}}return A}const s=Df.isClockWise,a=this.subPaths;if(a.length===0)return[];let o,l,u;const f=[];if(a.length===1)return l=a[0],u=new Kg,u.curves=l.curves,f.push(u),f;let d=!s(a[0].getPoints());d=e?!d:d;const m=[],y=[];let _=[],x=0,S;y[x]=void 0,_[x]=[];for(let b=0,M=a.length;b<M;b++)l=a[b],S=l.getPoints(),o=s(S),o=e?!o:o,o?(!d&&y[x]&&x++,y[x]={s:new Kg,p:S},y[x].s.curves=l.curves,d&&x++,_[x]=[]):_[x].push({h:l,p:S[0]});if(!y[0])return n(a);if(y.length>1){let b=!1,M=0;for(let R=0,A=y.length;R<A;R++)m[R]=[];for(let R=0,A=y.length;R<A;R++){const I=_[R];for(let k=0;k<I.length;k++){const N=I[k];let L=!0;for(let U=0;U<y.length;U++)r(N.p,y[U].p)&&(R!==U&&M++,L?(L=!1,m[U].push(N)):b=!0);L&&m[R].push(N)}}M>0&&b===!1&&(_=m)}let T;for(let b=0,M=y.length;b<M;b++){u=y[b].s,f.push(u),T=_[b];for(let R=0,A=T.length;R<A;R++)u.holes.push(T[R].h)}return f}}class LQ extends Xf{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function UQ(i,e){const n=i.image&&i.image.width?i.image.width/i.image.height:1;return n>e?(i.repeat.x=1,i.repeat.y=n/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/n,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function kQ(i,e){const n=i.image&&i.image.width?i.image.width/i.image.height:1;return n>e?(i.repeat.x=e/n,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=n/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function zQ(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function DD(i,e,n,r){const s=BQ(r);switch(n){case FN:return i*e;case HN:return i*e;case GN:return i*e*2;case OC:return i*e/s.components*s.byteLength;case AS:return i*e/s.components*s.byteLength;case jN:return i*e*2/s.components*s.byteLength;case IC:return i*e*2/s.components*s.byteLength;case VN:return i*e*3/s.components*s.byteLength;case Ba:return i*e*4/s.components*s.byteLength;case DC:return i*e*4/s.components*s.byteLength;case Jx:case t1:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case e1:case n1:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case HA:case jA:return Math.max(i,16)*Math.max(e,8)/4;case VA:case GA:return Math.max(i,8)*Math.max(e,8)/2;case qA:case $A:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case WA:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case XA:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case YA:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case KA:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case ZA:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case QA:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case JA:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case tM:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case eM:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case nM:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case iM:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case rM:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case sM:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case aM:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case oM:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case i1:case lM:case uM:return Math.ceil(i/4)*Math.ceil(e/4)*16;case qN:case cM:return Math.ceil(i/4)*Math.ceil(e/4)*8;case fM:case hM:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function BQ(i){switch(i){case bc:case kN:return{byteLength:1,components:1};case $0:case zN:case M_:return{byteLength:2,components:1};case CC:case RC:return{byteLength:2,components:4};case fd:case MC:case Jo:return{byteLength:4,components:1};case BN:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class FQ{static contain(e,n){return UQ(e,n)}static cover(e,n){return kQ(e,n)}static fill(e){return zQ(e)}static getByteLength(e,n,r,s){return DD(e,n,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:TS}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=TS);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function J8(){let i=null,e=!1,n=null,r=null;function s(a,o){n(a,o),r=i.requestAnimationFrame(s)}return{start:function(){e!==!0&&n!==null&&(r=i.requestAnimationFrame(s),e=!0)},stop:function(){i.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){n=a},setContext:function(a){i=a}}}function VQ(i){const e=new WeakMap;function n(l,u){const f=l.array,d=l.usage,m=f.byteLength,y=i.createBuffer();i.bindBuffer(u,y),i.bufferData(u,f,d),l.onUploadCallback();let _;if(f instanceof Float32Array)_=i.FLOAT;else if(f instanceof Uint16Array)l.isFloat16BufferAttribute?_=i.HALF_FLOAT:_=i.UNSIGNED_SHORT;else if(f instanceof Int16Array)_=i.SHORT;else if(f instanceof Uint32Array)_=i.UNSIGNED_INT;else if(f instanceof Int32Array)_=i.INT;else if(f instanceof Int8Array)_=i.BYTE;else if(f instanceof Uint8Array)_=i.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)_=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:y,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version,size:m}}function r(l,u,f){const d=u.array,m=u.updateRanges;if(i.bindBuffer(f,l),m.length===0)i.bufferSubData(f,0,d);else{m.sort((_,x)=>_.start-x.start);let y=0;for(let _=1;_<m.length;_++){const x=m[y],S=m[_];S.start<=x.start+x.count+1?x.count=Math.max(x.count,S.start+S.count-x.start):(++y,m[y]=S)}m.length=y+1;for(let _=0,x=m.length;_<x;_++){const S=m[_];i.bufferSubData(f,S.start*d.BYTES_PER_ELEMENT,d,S.start,S.count)}u.clearUpdateRanges()}u.onUploadCallback()}function s(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=e.get(l);u&&(i.deleteBuffer(u.buffer),e.delete(l))}function o(l,u){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const d=e.get(l);(!d||d.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const f=e.get(l);if(f===void 0)e.set(l,n(l,u));else if(f.version<l.version){if(f.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(f.buffer,l,u),f.version=l.version}}return{get:s,remove:a,update:o}}var HQ=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,GQ=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,jQ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,qQ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,$Q=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,WQ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,XQ=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,YQ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,KQ=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,ZQ=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,QQ=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,JQ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,tJ=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,eJ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,nJ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,iJ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,rJ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,sJ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,aJ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,oJ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,lJ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,uJ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,cJ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,fJ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,hJ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,dJ=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,pJ=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,mJ=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,gJ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,yJ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,vJ="gl_FragColor = linearToOutputTexel( gl_FragColor );",_J=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,bJ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,xJ=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,SJ=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,EJ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,TJ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,wJ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,AJ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,MJ=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,CJ=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,RJ=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,OJ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,IJ=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,DJ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,PJ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,NJ=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,LJ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,UJ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,kJ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,zJ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,BJ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,FJ=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,VJ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,HJ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,GJ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,jJ=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,qJ=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,$J=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,WJ=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,XJ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,YJ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,KJ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,ZJ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,QJ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,JJ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,ttt=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,ett=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,ntt=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,itt=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,rtt=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,stt=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,att=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ott=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ltt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,utt=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,ctt=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,ftt=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,htt=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,dtt=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,ptt=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,mtt=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,gtt=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,ytt=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,vtt=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,_tt=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,btt=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,xtt=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Stt=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Ett=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Ttt=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,wtt=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Att=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Mtt=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Ctt=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Rtt=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Ott=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Itt=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Dtt=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Ptt=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Ntt=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Ltt=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Utt=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,ktt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ztt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Btt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Ftt=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Vtt=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Htt=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Gtt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,jtt=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,qtt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,$tt=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Wtt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Xtt=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Ytt=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Ktt=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Ztt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Qtt=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Jtt=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tet=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,eet=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,net=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iet=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ret=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,set=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,aet=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oet=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,uet=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,cet=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fet=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,het=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,det=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pet=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,met=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,get=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,yet=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vet=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_et=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,bet=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,xet=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Vn={alphahash_fragment:HQ,alphahash_pars_fragment:GQ,alphamap_fragment:jQ,alphamap_pars_fragment:qQ,alphatest_fragment:$Q,alphatest_pars_fragment:WQ,aomap_fragment:XQ,aomap_pars_fragment:YQ,batching_pars_vertex:KQ,batching_vertex:ZQ,begin_vertex:QQ,beginnormal_vertex:JQ,bsdfs:tJ,iridescence_fragment:eJ,bumpmap_pars_fragment:nJ,clipping_planes_fragment:iJ,clipping_planes_pars_fragment:rJ,clipping_planes_pars_vertex:sJ,clipping_planes_vertex:aJ,color_fragment:oJ,color_pars_fragment:lJ,color_pars_vertex:uJ,color_vertex:cJ,common:fJ,cube_uv_reflection_fragment:hJ,defaultnormal_vertex:dJ,displacementmap_pars_vertex:pJ,displacementmap_vertex:mJ,emissivemap_fragment:gJ,emissivemap_pars_fragment:yJ,colorspace_fragment:vJ,colorspace_pars_fragment:_J,envmap_fragment:bJ,envmap_common_pars_fragment:xJ,envmap_pars_fragment:SJ,envmap_pars_vertex:EJ,envmap_physical_pars_fragment:NJ,envmap_vertex:TJ,fog_vertex:wJ,fog_pars_vertex:AJ,fog_fragment:MJ,fog_pars_fragment:CJ,gradientmap_pars_fragment:RJ,lightmap_pars_fragment:OJ,lights_lambert_fragment:IJ,lights_lambert_pars_fragment:DJ,lights_pars_begin:PJ,lights_toon_fragment:LJ,lights_toon_pars_fragment:UJ,lights_phong_fragment:kJ,lights_phong_pars_fragment:zJ,lights_physical_fragment:BJ,lights_physical_pars_fragment:FJ,lights_fragment_begin:VJ,lights_fragment_maps:HJ,lights_fragment_end:GJ,logdepthbuf_fragment:jJ,logdepthbuf_pars_fragment:qJ,logdepthbuf_pars_vertex:$J,logdepthbuf_vertex:WJ,map_fragment:XJ,map_pars_fragment:YJ,map_particle_fragment:KJ,map_particle_pars_fragment:ZJ,metalnessmap_fragment:QJ,metalnessmap_pars_fragment:JJ,morphinstance_vertex:ttt,morphcolor_vertex:ett,morphnormal_vertex:ntt,morphtarget_pars_vertex:itt,morphtarget_vertex:rtt,normal_fragment_begin:stt,normal_fragment_maps:att,normal_pars_fragment:ott,normal_pars_vertex:ltt,normal_vertex:utt,normalmap_pars_fragment:ctt,clearcoat_normal_fragment_begin:ftt,clearcoat_normal_fragment_maps:htt,clearcoat_pars_fragment:dtt,iridescence_pars_fragment:ptt,opaque_fragment:mtt,packing:gtt,premultiplied_alpha_fragment:ytt,project_vertex:vtt,dithering_fragment:_tt,dithering_pars_fragment:btt,roughnessmap_fragment:xtt,roughnessmap_pars_fragment:Stt,shadowmap_pars_fragment:Ett,shadowmap_pars_vertex:Ttt,shadowmap_vertex:wtt,shadowmask_pars_fragment:Att,skinbase_vertex:Mtt,skinning_pars_vertex:Ctt,skinning_vertex:Rtt,skinnormal_vertex:Ott,specularmap_fragment:Itt,specularmap_pars_fragment:Dtt,tonemapping_fragment:Ptt,tonemapping_pars_fragment:Ntt,transmission_fragment:Ltt,transmission_pars_fragment:Utt,uv_pars_fragment:ktt,uv_pars_vertex:ztt,uv_vertex:Btt,worldpos_vertex:Ftt,background_vert:Vtt,background_frag:Htt,backgroundCube_vert:Gtt,backgroundCube_frag:jtt,cube_vert:qtt,cube_frag:$tt,depth_vert:Wtt,depth_frag:Xtt,distanceRGBA_vert:Ytt,distanceRGBA_frag:Ktt,equirect_vert:Ztt,equirect_frag:Qtt,linedashed_vert:Jtt,linedashed_frag:tet,meshbasic_vert:eet,meshbasic_frag:net,meshlambert_vert:iet,meshlambert_frag:ret,meshmatcap_vert:set,meshmatcap_frag:aet,meshnormal_vert:oet,meshnormal_frag:uet,meshphong_vert:cet,meshphong_frag:fet,meshphysical_vert:het,meshphysical_frag:det,meshtoon_vert:pet,meshtoon_frag:met,points_vert:get,points_frag:yet,shadow_vert:vet,shadow_frag:_et,sprite_vert:bet,sprite_frag:xet},Pe={common:{diffuse:{value:new ke(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Dn},alphaMap:{value:null},alphaMapTransform:{value:new Dn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Dn}},envmap:{envMap:{value:null},envMapRotation:{value:new Dn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Dn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Dn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Dn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Dn},normalScale:{value:new de(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Dn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Dn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Dn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Dn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ke(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ke(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Dn},alphaTest:{value:0},uvTransform:{value:new Dn}},sprite:{diffuse:{value:new ke(16777215)},opacity:{value:1},center:{value:new de(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Dn},alphaMap:{value:null},alphaMapTransform:{value:new Dn},alphaTest:{value:0}}},uc={basic:{uniforms:fo([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.fog]),vertexShader:Vn.meshbasic_vert,fragmentShader:Vn.meshbasic_frag},lambert:{uniforms:fo([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,Pe.lights,{emissive:{value:new ke(0)}}]),vertexShader:Vn.meshlambert_vert,fragmentShader:Vn.meshlambert_frag},phong:{uniforms:fo([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,Pe.lights,{emissive:{value:new ke(0)},specular:{value:new ke(1118481)},shininess:{value:30}}]),vertexShader:Vn.meshphong_vert,fragmentShader:Vn.meshphong_frag},standard:{uniforms:fo([Pe.common,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.roughnessmap,Pe.metalnessmap,Pe.fog,Pe.lights,{emissive:{value:new ke(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Vn.meshphysical_vert,fragmentShader:Vn.meshphysical_frag},toon:{uniforms:fo([Pe.common,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.gradientmap,Pe.fog,Pe.lights,{emissive:{value:new ke(0)}}]),vertexShader:Vn.meshtoon_vert,fragmentShader:Vn.meshtoon_frag},matcap:{uniforms:fo([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,{matcap:{value:null}}]),vertexShader:Vn.meshmatcap_vert,fragmentShader:Vn.meshmatcap_frag},points:{uniforms:fo([Pe.points,Pe.fog]),vertexShader:Vn.points_vert,fragmentShader:Vn.points_frag},dashed:{uniforms:fo([Pe.common,Pe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Vn.linedashed_vert,fragmentShader:Vn.linedashed_frag},depth:{uniforms:fo([Pe.common,Pe.displacementmap]),vertexShader:Vn.depth_vert,fragmentShader:Vn.depth_frag},normal:{uniforms:fo([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,{opacity:{value:1}}]),vertexShader:Vn.meshnormal_vert,fragmentShader:Vn.meshnormal_frag},sprite:{uniforms:fo([Pe.sprite,Pe.fog]),vertexShader:Vn.sprite_vert,fragmentShader:Vn.sprite_frag},background:{uniforms:{uvTransform:{value:new Dn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Vn.background_vert,fragmentShader:Vn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Dn}},vertexShader:Vn.backgroundCube_vert,fragmentShader:Vn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Vn.cube_vert,fragmentShader:Vn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Vn.equirect_vert,fragmentShader:Vn.equirect_frag},distanceRGBA:{uniforms:fo([Pe.common,Pe.displacementmap,{referencePosition:{value:new pt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Vn.distanceRGBA_vert,fragmentShader:Vn.distanceRGBA_frag},shadow:{uniforms:fo([Pe.lights,Pe.fog,{color:{value:new ke(0)},opacity:{value:1}}]),vertexShader:Vn.shadow_vert,fragmentShader:Vn.shadow_frag}};uc.physical={uniforms:fo([uc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Dn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Dn},clearcoatNormalScale:{value:new de(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Dn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Dn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Dn},sheen:{value:0},sheenColor:{value:new ke(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Dn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Dn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Dn},transmissionSamplerSize:{value:new de},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Dn},attenuationDistance:{value:0},attenuationColor:{value:new ke(0)},specularColor:{value:new ke(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Dn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Dn},anisotropyVector:{value:new de},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Dn}}]),vertexShader:Vn.meshphysical_vert,fragmentShader:Vn.meshphysical_frag};const ow={r:0,b:0,g:0},vg=new Bl,Eet=new cn;function Tet(i,e,n,r,s,a,o){const l=new ke(0);let u=a===!0?0:1,f,d,m=null,y=0,_=null;function x(R){let A=R.isScene===!0?R.background:null;return A&&A.isTexture&&(A=(R.backgroundBlurriness>0?n:e).get(A)),A}function S(R){let A=!1;const I=x(R);I===null?b(l,u):I&&I.isColor&&(b(I,1),A=!0);const k=i.xr.getEnvironmentBlendMode();k==="additive"?r.buffers.color.setClear(0,0,0,1,o):k==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(i.autoClear||A)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function T(R,A){const I=x(A);I&&(I.isCubeTexture||I.mapping===A_)?(d===void 0&&(d=new $r(new Sy(1,1,1),new Au({name:"BackgroundCubeMaterial",uniforms:Y0(uc.backgroundCube.uniforms),vertexShader:uc.backgroundCube.vertexShader,fragmentShader:uc.backgroundCube.fragmentShader,side:_o,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(k,N,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(d)),vg.copy(A.backgroundRotation),vg.x*=-1,vg.y*=-1,vg.z*=-1,I.isCubeTexture&&I.isRenderTargetTexture===!1&&(vg.y*=-1,vg.z*=-1),d.material.uniforms.envMap.value=I,d.material.uniforms.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(Eet.makeRotationFromEuler(vg)),d.material.toneMapped=li.getTransfer(I.colorSpace)!==ki,(m!==I||y!==I.version||_!==i.toneMapping)&&(d.material.needsUpdate=!0,m=I,y=I.version,_=i.toneMapping),d.layers.enableAll(),R.unshift(d,d.geometry,d.material,0,0,null)):I&&I.isTexture&&(f===void 0&&(f=new $r(new R_(2,2),new Au({name:"BackgroundMaterial",uniforms:Y0(uc.background.uniforms),vertexShader:uc.background.vertexShader,fragmentShader:uc.background.fragmentShader,side:ud,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(f)),f.material.uniforms.t2D.value=I,f.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,f.material.toneMapped=li.getTransfer(I.colorSpace)!==ki,I.matrixAutoUpdate===!0&&I.updateMatrix(),f.material.uniforms.uvTransform.value.copy(I.matrix),(m!==I||y!==I.version||_!==i.toneMapping)&&(f.material.needsUpdate=!0,m=I,y=I.version,_=i.toneMapping),f.layers.enableAll(),R.unshift(f,f.geometry,f.material,0,0,null))}function b(R,A){R.getRGB(ow,n8(i)),r.buffers.color.setClear(ow.r,ow.g,ow.b,A,o)}function M(){d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return l},setClearColor:function(R,A=1){l.set(R),u=A,b(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(R){u=R,b(l,u)},render:S,addToRenderList:T,dispose:M}}function wet(i,e){const n=i.getParameter(i.MAX_VERTEX_ATTRIBS),r={},s=y(null);let a=s,o=!1;function l(O,F,H,V,X){let J=!1;const q=m(V,H,F);a!==q&&(a=q,f(a.object)),J=_(O,V,H,X),J&&x(O,V,H,X),X!==null&&e.update(X,i.ELEMENT_ARRAY_BUFFER),(J||o)&&(o=!1,A(O,F,H,V),X!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(X).buffer))}function u(){return i.createVertexArray()}function f(O){return i.bindVertexArray(O)}function d(O){return i.deleteVertexArray(O)}function m(O,F,H){const V=H.wireframe===!0;let X=r[O.id];X===void 0&&(X={},r[O.id]=X);let J=X[F.id];J===void 0&&(J={},X[F.id]=J);let q=J[V];return q===void 0&&(q=y(u()),J[V]=q),q}function y(O){const F=[],H=[],V=[];for(let X=0;X<n;X++)F[X]=0,H[X]=0,V[X]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:H,attributeDivisors:V,object:O,attributes:{},index:null}}function _(O,F,H,V){const X=a.attributes,J=F.attributes;let q=0;const W=H.getAttributes();for(const K in W)if(W[K].location>=0){const Q=X[K];let dt=J[K];if(dt===void 0&&(K==="instanceMatrix"&&O.instanceMatrix&&(dt=O.instanceMatrix),K==="instanceColor"&&O.instanceColor&&(dt=O.instanceColor)),Q===void 0||Q.attribute!==dt||dt&&Q.data!==dt.data)return!0;q++}return a.attributesNum!==q||a.index!==V}function x(O,F,H,V){const X={},J=F.attributes;let q=0;const W=H.getAttributes();for(const K in W)if(W[K].location>=0){let Q=J[K];Q===void 0&&(K==="instanceMatrix"&&O.instanceMatrix&&(Q=O.instanceMatrix),K==="instanceColor"&&O.instanceColor&&(Q=O.instanceColor));const dt={};dt.attribute=Q,Q&&Q.data&&(dt.data=Q.data),X[K]=dt,q++}a.attributes=X,a.attributesNum=q,a.index=V}function S(){const O=a.newAttributes;for(let F=0,H=O.length;F<H;F++)O[F]=0}function T(O){b(O,0)}function b(O,F){const H=a.newAttributes,V=a.enabledAttributes,X=a.attributeDivisors;H[O]=1,V[O]===0&&(i.enableVertexAttribArray(O),V[O]=1),X[O]!==F&&(i.vertexAttribDivisor(O,F),X[O]=F)}function M(){const O=a.newAttributes,F=a.enabledAttributes;for(let H=0,V=F.length;H<V;H++)F[H]!==O[H]&&(i.disableVertexAttribArray(H),F[H]=0)}function R(O,F,H,V,X,J,q){q===!0?i.vertexAttribIPointer(O,F,H,X,J):i.vertexAttribPointer(O,F,H,V,X,J)}function A(O,F,H,V){S();const X=V.attributes,J=H.getAttributes(),q=F.defaultAttributeValues;for(const W in J){const K=J[W];if(K.location>=0){let et=X[W];if(et===void 0&&(W==="instanceMatrix"&&O.instanceMatrix&&(et=O.instanceMatrix),W==="instanceColor"&&O.instanceColor&&(et=O.instanceColor)),et!==void 0){const Q=et.normalized,dt=et.itemSize,yt=e.get(et);if(yt===void 0)continue;const xt=yt.buffer,nt=yt.type,ht=yt.bytesPerElement,ft=nt===i.INT||nt===i.UNSIGNED_INT||et.gpuType===MC;if(et.isInterleavedBufferAttribute){const gt=et.data,wt=gt.stride,Kt=et.offset;if(gt.isInstancedInterleavedBuffer){for(let zt=0;zt<K.locationSize;zt++)b(K.location+zt,gt.meshPerAttribute);O.isInstancedMesh!==!0&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=gt.meshPerAttribute*gt.count)}else for(let zt=0;zt<K.locationSize;zt++)T(K.location+zt);i.bindBuffer(i.ARRAY_BUFFER,xt);for(let zt=0;zt<K.locationSize;zt++)R(K.location+zt,dt/K.locationSize,nt,Q,wt*ht,(Kt+dt/K.locationSize*zt)*ht,ft)}else{if(et.isInstancedBufferAttribute){for(let gt=0;gt<K.locationSize;gt++)b(K.location+gt,et.meshPerAttribute);O.isInstancedMesh!==!0&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=et.meshPerAttribute*et.count)}else for(let gt=0;gt<K.locationSize;gt++)T(K.location+gt);i.bindBuffer(i.ARRAY_BUFFER,xt);for(let gt=0;gt<K.locationSize;gt++)R(K.location+gt,dt/K.locationSize,nt,Q,dt*ht,dt/K.locationSize*gt*ht,ft)}}else if(q!==void 0){const Q=q[W];if(Q!==void 0)switch(Q.length){case 2:i.vertexAttrib2fv(K.location,Q);break;case 3:i.vertexAttrib3fv(K.location,Q);break;case 4:i.vertexAttrib4fv(K.location,Q);break;default:i.vertexAttrib1fv(K.location,Q)}}}}M()}function I(){L();for(const O in r){const F=r[O];for(const H in F){const V=F[H];for(const X in V)d(V[X].object),delete V[X];delete F[H]}delete r[O]}}function k(O){if(r[O.id]===void 0)return;const F=r[O.id];for(const H in F){const V=F[H];for(const X in V)d(V[X].object),delete V[X];delete F[H]}delete r[O.id]}function N(O){for(const F in r){const H=r[F];if(H[O.id]===void 0)continue;const V=H[O.id];for(const X in V)d(V[X].object),delete V[X];delete H[O.id]}}function L(){U(),o=!0,a!==s&&(a=s,f(a.object))}function U(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:l,reset:L,resetDefaultState:U,dispose:I,releaseStatesOfGeometry:k,releaseStatesOfProgram:N,initAttributes:S,enableAttribute:T,disableUnusedAttributes:M}}function Aet(i,e,n){let r;function s(f){r=f}function a(f,d){i.drawArrays(r,f,d),n.update(d,r,1)}function o(f,d,m){m!==0&&(i.drawArraysInstanced(r,f,d,m),n.update(d,r,m))}function l(f,d,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,f,0,d,0,m);let _=0;for(let x=0;x<m;x++)_+=d[x];n.update(_,r,1)}function u(f,d,m,y){if(m===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let x=0;x<f.length;x++)o(f[x],d[x],y[x]);else{_.multiDrawArraysInstancedWEBGL(r,f,0,d,0,y,0,m);let x=0;for(let S=0;S<m;S++)x+=d[S]*y[S];n.update(x,r,1)}}this.setMode=s,this.render=a,this.renderInstances=o,this.renderMultiDraw=l,this.renderMultiDrawInstances=u}function Met(i,e,n,r){let s;function a(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const N=e.get("EXT_texture_filter_anisotropic");s=i.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function o(N){return!(N!==Ba&&r.convert(N)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(N){const L=N===M_&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(N!==bc&&r.convert(N)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&N!==Jo&&!L)}function u(N){if(N==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";N="mediump"}return N==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=n.precision!==void 0?n.precision:"highp";const d=u(f);d!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",d,"instead."),f=d);const m=n.logarithmicDepthBuffer===!0,y=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),_=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),x=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),S=i.getParameter(i.MAX_TEXTURE_SIZE),T=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),b=i.getParameter(i.MAX_VERTEX_ATTRIBS),M=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),R=i.getParameter(i.MAX_VARYING_VECTORS),A=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),I=x>0,k=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:u,textureFormatReadable:o,textureTypeReadable:l,precision:f,logarithmicDepthBuffer:m,reverseDepthBuffer:y,maxTextures:_,maxVertexTextures:x,maxTextureSize:S,maxCubemapSize:T,maxAttributes:b,maxVertexUniforms:M,maxVaryings:R,maxFragmentUniforms:A,vertexTextures:I,maxSamples:k}}function Cet(i){const e=this;let n=null,r=0,s=!1,a=!1;const o=new Op,l=new Dn,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(m,y){const _=m.length!==0||y||r!==0||s;return s=y,r=m.length,_},this.beginShadows=function(){a=!0,d(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(m,y){n=d(m,y,0)},this.setState=function(m,y,_){const x=m.clippingPlanes,S=m.clipIntersection,T=m.clipShadows,b=i.get(m);if(!s||x===null||x.length===0||a&&!T)a?d(null):f();else{const M=a?0:r,R=M*4;let A=b.clippingState||null;u.value=A,A=d(x,y,R,_);for(let I=0;I!==R;++I)A[I]=n[I];b.clippingState=A,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=M}};function f(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function d(m,y,_,x){const S=m!==null?m.length:0;let T=null;if(S!==0){if(T=u.value,x!==!0||T===null){const b=_+S*4,M=y.matrixWorldInverse;l.getNormalMatrix(M),(T===null||T.length<b)&&(T=new Float32Array(b));for(let R=0,A=_;R!==S;++R,A+=4)o.copy(m[R]).applyMatrix4(M,l),o.normal.toArray(T,A),T[A+3]=o.constant}u.value=T,u.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,T}}function Ret(i){let e=new WeakMap;function n(o,l){return l===M1?o.mapping=cd:l===C1&&(o.mapping=Jp),o}function r(o){if(o&&o.isTexture){const l=o.mapping;if(l===M1||l===C1)if(e.has(o)){const u=e.get(o).texture;return n(u,o.mapping)}else{const u=o.image;if(u&&u.height>0){const f=new s8(u.height);return f.fromEquirectangularTexture(i,o),e.set(o,f),o.addEventListener("dispose",s),n(f.texture,o.mapping)}else return null}}return o}function s(o){const l=o.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}const M0=4,t4=[.125,.215,.35,.446,.526,.582],Lg=20,IO=new US,e4=new ke;let DO=null,PO=0,NO=0,LO=!1;const Og=(1+Math.sqrt(5))/2,qv=1/Og,n4=[new pt(-Og,qv,0),new pt(Og,qv,0),new pt(-qv,0,Og),new pt(qv,0,Og),new pt(0,Og,-qv),new pt(0,Og,qv),new pt(-1,1,-1),new pt(1,1,-1),new pt(-1,1,1),new pt(1,1,1)],Oet=new pt;class PD{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,s=100,a={}){const{size:o=256,position:l=Oet}=a;DO=this._renderer.getRenderTarget(),PO=this._renderer.getActiveCubeFace(),NO=this._renderer.getActiveMipmapLevel(),LO=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,r,s,u,l),n>0&&this._blur(u,0,0,n),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=s4(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=r4(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(DO,PO,NO),this._renderer.xr.enabled=LO,e.scissorTest=!1,lw(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===cd||e.mapping===Jp?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),DO=this._renderer.getRenderTarget(),PO=this._renderer.getActiveCubeFace(),NO=this._renderer.getActiveMipmapLevel(),LO=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Is,minFilter:Is,generateMipmaps:!1,type:M_,format:Ba,colorSpace:tm,depthBuffer:!1},s=i4(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=i4(e,n,r);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Iet(a)),this._blurMaterial=Det(a,e,n)}return s}_compileMaterial(e){const n=new $r(this._lodPlanes[0],e);this._renderer.compile(n,IO)}_sceneToCubeUV(e,n,r,s,a){const u=new Ws(90,1,n,r),f=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],m=this._renderer,y=m.autoClear,_=m.toneMapping;m.getClearColor(e4),m.toneMapping=Of,m.autoClear=!1;const x=new dm({name:"PMREM.Background",side:_o,depthWrite:!1,depthTest:!1}),S=new $r(new Sy,x);let T=!1;const b=e.background;b?b.isColor&&(x.color.copy(b),e.background=null,T=!0):(x.color.copy(e4),T=!0);for(let M=0;M<6;M++){const R=M%3;R===0?(u.up.set(0,f[M],0),u.position.set(a.x,a.y,a.z),u.lookAt(a.x+d[M],a.y,a.z)):R===1?(u.up.set(0,0,f[M]),u.position.set(a.x,a.y,a.z),u.lookAt(a.x,a.y+d[M],a.z)):(u.up.set(0,f[M],0),u.position.set(a.x,a.y,a.z),u.lookAt(a.x,a.y,a.z+d[M]));const A=this._cubeSize;lw(s,R*A,M>2?A:0,A,A),m.setRenderTarget(s),T&&m.render(S,u),m.render(e,u)}S.geometry.dispose(),S.material.dispose(),m.toneMapping=_,m.autoClear=y,e.background=b}_textureToCubeUV(e,n){const r=this._renderer,s=e.mapping===cd||e.mapping===Jp;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=s4()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=r4());const a=s?this._cubemapMaterial:this._equirectMaterial,o=new $r(this._lodPlanes[0],a),l=a.uniforms;l.envMap.value=e;const u=this._cubeSize;lw(n,0,0,3*u,2*u),r.setRenderTarget(n),r.render(o,IO)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const s=this._lodPlanes.length;for(let a=1;a<s;a++){const o=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),l=n4[(s-a-1)%n4.length];this._blur(e,a-1,a,o,l)}n.autoClear=r}_blur(e,n,r,s,a){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,s,"latitudinal",a),this._halfBlur(o,e,r,r,s,"longitudinal",a)}_halfBlur(e,n,r,s,a,o,l){const u=this._renderer,f=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,m=new $r(this._lodPlanes[s],f),y=f.uniforms,_=this._sizeLods[r]-1,x=isFinite(a)?Math.PI/(2*_):2*Math.PI/(2*Lg-1),S=a/x,T=isFinite(a)?1+Math.floor(d*S):Lg;T>Lg&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${Lg}`);const b=[];let M=0;for(let N=0;N<Lg;++N){const L=N/S,U=Math.exp(-L*L/2);b.push(U),N===0?M+=U:N<T&&(M+=2*U)}for(let N=0;N<b.length;N++)b[N]=b[N]/M;y.envMap.value=e.texture,y.samples.value=T,y.weights.value=b,y.latitudinal.value=o==="latitudinal",l&&(y.poleAxis.value=l);const{_lodMax:R}=this;y.dTheta.value=x,y.mipInt.value=R-r;const A=this._sizeLods[s],I=3*A*(s>R-M0?s-R+M0:0),k=4*(this._cubeSize-A);lw(n,I,k,3*A,2*A),u.setRenderTarget(n),u.render(m,IO)}}function Iet(i){const e=[],n=[],r=[];let s=i;const a=i-M0+1+t4.length;for(let o=0;o<a;o++){const l=Math.pow(2,s);n.push(l);let u=1/l;o>i-M0?u=t4[o-i+M0-1]:o===0&&(u=0),r.push(u);const f=1/(l-2),d=-f,m=1+f,y=[d,d,m,d,m,m,d,d,m,m,d,m],_=6,x=6,S=3,T=2,b=1,M=new Float32Array(S*x*_),R=new Float32Array(T*x*_),A=new Float32Array(b*x*_);for(let k=0;k<_;k++){const N=k%3*2/3-1,L=k>2?0:-1,U=[N,L,0,N+2/3,L,0,N+2/3,L+1,0,N,L,0,N+2/3,L+1,0,N,L+1,0];M.set(U,S*x*k),R.set(y,T*x*k);const O=[k,k,k,k,k,k];A.set(O,b*x*k)}const I=new Un;I.setAttribute("position",new zi(M,S)),I.setAttribute("uv",new zi(R,T)),I.setAttribute("faceIndex",new zi(A,b)),e.push(I),s>M0&&s--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function i4(i,e,n){const r=new Vf(i,e,n);return r.texture.mapping=A_,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function lw(i,e,n,r,s){i.viewport.set(e,n,r,s),i.scissor.set(e,n,r,s)}function Det(i,e,n){const r=new Float32Array(Lg),s=new pt(0,1,0);return new Au({name:"SphericalGaussianBlur",defines:{n:Lg,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:T3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:rd,depthTest:!1,depthWrite:!1})}function r4(){return new Au({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:T3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:rd,depthTest:!1,depthWrite:!1})}function s4(){return new Au({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:T3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:rd,depthTest:!1,depthWrite:!1})}function T3(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Pet(i){let e=new WeakMap,n=null;function r(l){if(l&&l.isTexture){const u=l.mapping,f=u===M1||u===C1,d=u===cd||u===Jp;if(f||d){let m=e.get(l);const y=m!==void 0?m.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==y)return n===null&&(n=new PD(i)),m=f?n.fromEquirectangular(l,m):n.fromCubemap(l,m),m.texture.pmremVersion=l.pmremVersion,e.set(l,m),m.texture;if(m!==void 0)return m.texture;{const _=l.image;return f&&_&&_.height>0||d&&_&&s(_)?(n===null&&(n=new PD(i)),m=f?n.fromEquirectangular(l):n.fromCubemap(l),m.texture.pmremVersion=l.pmremVersion,e.set(l,m),l.addEventListener("dispose",a),m.texture):null}}}return l}function s(l){let u=0;const f=6;for(let d=0;d<f;d++)l[d]!==void 0&&u++;return u===f}function a(l){const u=l.target;u.removeEventListener("dispose",a);const f=e.get(u);f!==void 0&&(e.delete(u),f.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function Net(i){const e={};function n(r){if(e[r]!==void 0)return e[r];let s;switch(r){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(r)}return e[r]=s,s}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const s=n(r);return s===null&&Rg("THREE.WebGLRenderer: "+r+" extension not supported."),s}}}function Let(i,e,n,r){const s={},a=new WeakMap;function o(m){const y=m.target;y.index!==null&&e.remove(y.index);for(const x in y.attributes)e.remove(y.attributes[x]);y.removeEventListener("dispose",o),delete s[y.id];const _=a.get(y);_&&(e.remove(_),a.delete(y)),r.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,n.memory.geometries--}function l(m,y){return s[y.id]===!0||(y.addEventListener("dispose",o),s[y.id]=!0,n.memory.geometries++),y}function u(m){const y=m.attributes;for(const _ in y)e.update(y[_],i.ARRAY_BUFFER)}function f(m){const y=[],_=m.index,x=m.attributes.position;let S=0;if(_!==null){const M=_.array;S=_.version;for(let R=0,A=M.length;R<A;R+=3){const I=M[R+0],k=M[R+1],N=M[R+2];y.push(I,k,k,N,N,I)}}else if(x!==void 0){const M=x.array;S=x.version;for(let R=0,A=M.length/3-1;R<A;R+=3){const I=R+0,k=R+1,N=R+2;y.push(I,k,k,N,N,I)}}else return;const T=new(QH(y)?KN:YN)(y,1);T.version=S;const b=a.get(m);b&&e.remove(b),a.set(m,T)}function d(m){const y=a.get(m);if(y){const _=m.index;_!==null&&y.version<_.version&&f(m)}else f(m);return a.get(m)}return{get:l,update:u,getWireframeAttribute:d}}function Uet(i,e,n){let r;function s(y){r=y}let a,o;function l(y){a=y.type,o=y.bytesPerElement}function u(y,_){i.drawElements(r,_,a,y*o),n.update(_,r,1)}function f(y,_,x){x!==0&&(i.drawElementsInstanced(r,_,a,y*o,x),n.update(_,r,x))}function d(y,_,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,_,0,a,y,0,x);let T=0;for(let b=0;b<x;b++)T+=_[b];n.update(T,r,1)}function m(y,_,x,S){if(x===0)return;const T=e.get("WEBGL_multi_draw");if(T===null)for(let b=0;b<y.length;b++)f(y[b]/o,_[b],S[b]);else{T.multiDrawElementsInstancedWEBGL(r,_,0,a,y,0,S,0,x);let b=0;for(let M=0;M<x;M++)b+=_[M]*S[M];n.update(b,r,1)}}this.setMode=s,this.setIndex=l,this.render=u,this.renderInstances=f,this.renderMultiDraw=d,this.renderMultiDrawInstances=m}function ket(i){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,o,l){switch(n.calls++,o){case i.TRIANGLES:n.triangles+=l*(a/3);break;case i.LINES:n.lines+=l*(a/2);break;case i.LINE_STRIP:n.lines+=l*(a-1);break;case i.LINE_LOOP:n.lines+=l*a;break;case i.POINTS:n.points+=l*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function s(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:s,update:r}}function zet(i,e,n){const r=new WeakMap,s=new di;function a(o,l,u){const f=o.morphTargetInfluences,d=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,m=d!==void 0?d.length:0;let y=r.get(l);if(y===void 0||y.count!==m){let O=function(){L.dispose(),r.delete(l),l.removeEventListener("dispose",O)};var _=O;y!==void 0&&y.texture.dispose();const x=l.morphAttributes.position!==void 0,S=l.morphAttributes.normal!==void 0,T=l.morphAttributes.color!==void 0,b=l.morphAttributes.position||[],M=l.morphAttributes.normal||[],R=l.morphAttributes.color||[];let A=0;x===!0&&(A=1),S===!0&&(A=2),T===!0&&(A=3);let I=l.attributes.position.count*A,k=1;I>e.maxTextureSize&&(k=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const N=new Float32Array(I*k*4*m),L=new MS(N,I,k,m);L.type=Jo,L.needsUpdate=!0;const U=A*4;for(let F=0;F<m;F++){const H=b[F],V=M[F],X=R[F],J=I*k*4*F;for(let q=0;q<H.count;q++){const W=q*U;x===!0&&(s.fromBufferAttribute(H,q),N[J+W+0]=s.x,N[J+W+1]=s.y,N[J+W+2]=s.z,N[J+W+3]=0),S===!0&&(s.fromBufferAttribute(V,q),N[J+W+4]=s.x,N[J+W+5]=s.y,N[J+W+6]=s.z,N[J+W+7]=0),T===!0&&(s.fromBufferAttribute(X,q),N[J+W+8]=s.x,N[J+W+9]=s.y,N[J+W+10]=s.z,N[J+W+11]=X.itemSize===4?s.w:1)}}y={count:m,texture:L,size:new de(I,k)},r.set(l,y),l.addEventListener("dispose",O)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)u.getUniforms().setValue(i,"morphTexture",o.morphTexture,n);else{let x=0;for(let T=0;T<f.length;T++)x+=f[T];const S=l.morphTargetsRelative?1:1-x;u.getUniforms().setValue(i,"morphTargetBaseInfluence",S),u.getUniforms().setValue(i,"morphTargetInfluences",f)}u.getUniforms().setValue(i,"morphTargetsTexture",y.texture,n),u.getUniforms().setValue(i,"morphTargetsTextureSize",y.size)}return{update:a}}function Bet(i,e,n,r){let s=new WeakMap;function a(u){const f=r.render.frame,d=u.geometry,m=e.get(u,d);if(s.get(m)!==f&&(e.update(m),s.set(m,f)),u.isInstancedMesh&&(u.hasEventListener("dispose",l)===!1&&u.addEventListener("dispose",l),s.get(u)!==f&&(n.update(u.instanceMatrix,i.ARRAY_BUFFER),u.instanceColor!==null&&n.update(u.instanceColor,i.ARRAY_BUFFER),s.set(u,f))),u.isSkinnedMesh){const y=u.skeleton;s.get(y)!==f&&(y.update(),s.set(y,f))}return m}function o(){s=new WeakMap}function l(u){const f=u.target;f.removeEventListener("dispose",l),n.remove(f.instanceMatrix),f.instanceColor!==null&&n.remove(f.instanceColor)}return{update:a,dispose:o}}const t9=new Xr,a4=new e3(1,1),e9=new MS,n9=new LC,i9=new CS,o4=[],l4=[],u4=new Float32Array(16),c4=new Float32Array(9),f4=new Float32Array(4);function O_(i,e,n){const r=i[0];if(r<=0||r>0)return i;const s=e*n;let a=o4[s];if(a===void 0&&(a=new Float32Array(s),o4[s]=a),e!==0){r.toArray(a,0);for(let o=1,l=0;o!==e;++o)l+=n,i[o].toArray(a,l)}return a}function Ls(i,e){if(i.length!==e.length)return!1;for(let n=0,r=i.length;n<r;n++)if(i[n]!==e[n])return!1;return!0}function Us(i,e){for(let n=0,r=e.length;n<r;n++)i[n]=e[n]}function r2(i,e){let n=l4[e];n===void 0&&(n=new Int32Array(e),l4[e]=n);for(let r=0;r!==e;++r)n[r]=i.allocateTextureUnit();return n}function Fet(i,e){const n=this.cache;n[0]!==e&&(i.uniform1f(this.addr,e),n[0]=e)}function Vet(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ls(n,e))return;i.uniform2fv(this.addr,e),Us(n,e)}}function Het(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ls(n,e))return;i.uniform3fv(this.addr,e),Us(n,e)}}function Get(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ls(n,e))return;i.uniform4fv(this.addr,e),Us(n,e)}}function jet(i,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ls(n,e))return;i.uniformMatrix2fv(this.addr,!1,e),Us(n,e)}else{if(Ls(n,r))return;f4.set(r),i.uniformMatrix2fv(this.addr,!1,f4),Us(n,r)}}function qet(i,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ls(n,e))return;i.uniformMatrix3fv(this.addr,!1,e),Us(n,e)}else{if(Ls(n,r))return;c4.set(r),i.uniformMatrix3fv(this.addr,!1,c4),Us(n,r)}}function $et(i,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ls(n,e))return;i.uniformMatrix4fv(this.addr,!1,e),Us(n,e)}else{if(Ls(n,r))return;u4.set(r),i.uniformMatrix4fv(this.addr,!1,u4),Us(n,r)}}function Wet(i,e){const n=this.cache;n[0]!==e&&(i.uniform1i(this.addr,e),n[0]=e)}function Xet(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ls(n,e))return;i.uniform2iv(this.addr,e),Us(n,e)}}function Yet(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ls(n,e))return;i.uniform3iv(this.addr,e),Us(n,e)}}function Ket(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ls(n,e))return;i.uniform4iv(this.addr,e),Us(n,e)}}function Zet(i,e){const n=this.cache;n[0]!==e&&(i.uniform1ui(this.addr,e),n[0]=e)}function Qet(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ls(n,e))return;i.uniform2uiv(this.addr,e),Us(n,e)}}function Jet(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ls(n,e))return;i.uniform3uiv(this.addr,e),Us(n,e)}}function tnt(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ls(n,e))return;i.uniform4uiv(this.addr,e),Us(n,e)}}function ent(i,e,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(i.uniform1i(this.addr,s),r[0]=s);let a;this.type===i.SAMPLER_2D_SHADOW?(a4.compareFunction=WN,a=a4):a=t9,n.setTexture2D(e||a,s)}function nnt(i,e,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(i.uniform1i(this.addr,s),r[0]=s),n.setTexture3D(e||n9,s)}function int(i,e,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(i.uniform1i(this.addr,s),r[0]=s),n.setTextureCube(e||i9,s)}function rnt(i,e,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(i.uniform1i(this.addr,s),r[0]=s),n.setTexture2DArray(e||e9,s)}function snt(i){switch(i){case 5126:return Fet;case 35664:return Vet;case 35665:return Het;case 35666:return Get;case 35674:return jet;case 35675:return qet;case 35676:return $et;case 5124:case 35670:return Wet;case 35667:case 35671:return Xet;case 35668:case 35672:return Yet;case 35669:case 35673:return Ket;case 5125:return Zet;case 36294:return Qet;case 36295:return Jet;case 36296:return tnt;case 35678:case 36198:case 36298:case 36306:case 35682:return ent;case 35679:case 36299:case 36307:return nnt;case 35680:case 36300:case 36308:case 36293:return int;case 36289:case 36303:case 36311:case 36292:return rnt}}function ant(i,e){i.uniform1fv(this.addr,e)}function ont(i,e){const n=O_(e,this.size,2);i.uniform2fv(this.addr,n)}function lnt(i,e){const n=O_(e,this.size,3);i.uniform3fv(this.addr,n)}function unt(i,e){const n=O_(e,this.size,4);i.uniform4fv(this.addr,n)}function cnt(i,e){const n=O_(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,n)}function fnt(i,e){const n=O_(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,n)}function hnt(i,e){const n=O_(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,n)}function dnt(i,e){i.uniform1iv(this.addr,e)}function pnt(i,e){i.uniform2iv(this.addr,e)}function mnt(i,e){i.uniform3iv(this.addr,e)}function gnt(i,e){i.uniform4iv(this.addr,e)}function ynt(i,e){i.uniform1uiv(this.addr,e)}function vnt(i,e){i.uniform2uiv(this.addr,e)}function _nt(i,e){i.uniform3uiv(this.addr,e)}function bnt(i,e){i.uniform4uiv(this.addr,e)}function xnt(i,e,n){const r=this.cache,s=e.length,a=r2(n,s);Ls(r,a)||(i.uniform1iv(this.addr,a),Us(r,a));for(let o=0;o!==s;++o)n.setTexture2D(e[o]||t9,a[o])}function Snt(i,e,n){const r=this.cache,s=e.length,a=r2(n,s);Ls(r,a)||(i.uniform1iv(this.addr,a),Us(r,a));for(let o=0;o!==s;++o)n.setTexture3D(e[o]||n9,a[o])}function Ent(i,e,n){const r=this.cache,s=e.length,a=r2(n,s);Ls(r,a)||(i.uniform1iv(this.addr,a),Us(r,a));for(let o=0;o!==s;++o)n.setTextureCube(e[o]||i9,a[o])}function Tnt(i,e,n){const r=this.cache,s=e.length,a=r2(n,s);Ls(r,a)||(i.uniform1iv(this.addr,a),Us(r,a));for(let o=0;o!==s;++o)n.setTexture2DArray(e[o]||e9,a[o])}function wnt(i){switch(i){case 5126:return ant;case 35664:return ont;case 35665:return lnt;case 35666:return unt;case 35674:return cnt;case 35675:return fnt;case 35676:return hnt;case 5124:case 35670:return dnt;case 35667:case 35671:return pnt;case 35668:case 35672:return mnt;case 35669:case 35673:return gnt;case 5125:return ynt;case 36294:return vnt;case 36295:return _nt;case 36296:return bnt;case 35678:case 36198:case 36298:case 36306:case 35682:return xnt;case 35679:case 36299:case 36307:return Snt;case 35680:case 36300:case 36308:case 36293:return Ent;case 36289:case 36303:case 36311:case 36292:return Tnt}}class Ant{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=snt(n.type)}}class Mnt{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=wnt(n.type)}}class Cnt{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const s=this.seq;for(let a=0,o=s.length;a!==o;++a){const l=s[a];l.setValue(e,n[l.id],r)}}}const UO=/(\w+)(\])?(\[|\.)?/g;function h4(i,e){i.seq.push(e),i.map[e.id]=e}function Rnt(i,e,n){const r=i.name,s=r.length;for(UO.lastIndex=0;;){const a=UO.exec(r),o=UO.lastIndex;let l=a[1];const u=a[2]==="]",f=a[3];if(u&&(l=l|0),f===void 0||f==="["&&o+2===s){h4(n,f===void 0?new Ant(l,i,e):new Mnt(l,i,e));break}else{let m=n.map[l];m===void 0&&(m=new Cnt(l),h4(n,m)),n=m}}}class nA{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let s=0;s<r;++s){const a=e.getActiveUniform(n,s),o=e.getUniformLocation(n,a.name);Rnt(a,o,this)}}setValue(e,n,r,s){const a=this.map[n];a!==void 0&&a.setValue(e,r,s)}setOptional(e,n,r){const s=n[r];s!==void 0&&this.setValue(e,r,s)}static upload(e,n,r,s){for(let a=0,o=n.length;a!==o;++a){const l=n[a],u=r[l.id];u.needsUpdate!==!1&&l.setValue(e,u.value,s)}}static seqWithValue(e,n){const r=[];for(let s=0,a=e.length;s!==a;++s){const o=e[s];o.id in n&&r.push(o)}return r}}function d4(i,e,n){const r=i.createShader(e);return i.shaderSource(r,n),i.compileShader(r),r}const Ont=37297;let Int=0;function Dnt(i,e){const n=i.split(`
`),r=[],s=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let o=s;o<a;o++){const l=o+1;r.push(`${l===e?">":" "} ${l}: ${n[o]}`)}return r.join(`
`)}const p4=new Dn;function Pnt(i){li._getMatrix(p4,li.workingColorSpace,i);const e=`mat3( ${p4.elements.map(n=>n.toFixed(4))} )`;switch(li.getTransfer(i)){case P1:return[e,"LinearTransferOETF"];case ki:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function m4(i,e,n){const r=i.getShaderParameter(e,i.COMPILE_STATUS),s=i.getShaderInfoLog(e).trim();if(r&&s==="")return"";const a=/ERROR: 0:(\d+)/.exec(s);if(a){const o=parseInt(a[1]);return n.toUpperCase()+`

`+s+`

`+Dnt(i.getShaderSource(e),o)}else return s}function Nnt(i,e){const n=Pnt(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function Lnt(i,e){let n;switch(e){case IH:n="Linear";break;case DH:n="Reinhard";break;case PH:n="Cineon";break;case LN:n="ACESFilmic";break;case LH:n="AgX";break;case UH:n="Neutral";break;case NH:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+i+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const uw=new pt;function Unt(){li.getLuminanceCoefficients(uw);const i=uw.x.toFixed(4),e=uw.y.toFixed(4),n=uw.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function knt(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(kx).join(`
`)}function znt(i){const e=[];for(const n in i){const r=i[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function Bnt(i,e){const n={},r=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let s=0;s<r;s++){const a=i.getActiveAttrib(e,s),o=a.name;let l=1;a.type===i.FLOAT_MAT2&&(l=2),a.type===i.FLOAT_MAT3&&(l=3),a.type===i.FLOAT_MAT4&&(l=4),n[o]={type:a.type,location:i.getAttribLocation(e,o),locationSize:l}}return n}function kx(i){return i!==""}function g4(i,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function y4(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Fnt=/^[ \t]*#include +<([\w\d./]+)>/gm;function ND(i){return i.replace(Fnt,Hnt)}const Vnt=new Map;function Hnt(i,e){let n=Vn[e];if(n===void 0){const r=Vnt.get(e);if(r!==void 0)n=Vn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return ND(n)}const Gnt=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function v4(i){return i.replace(Gnt,jnt)}function jnt(i,e,n,r){let s="";for(let a=parseInt(e);a<parseInt(n);a++)s+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return s}function _4(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function qnt(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===wC?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===Zx?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===oc&&(e="SHADOWMAP_TYPE_VSM"),e}function $nt(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case cd:case Jp:e="ENVMAP_TYPE_CUBE";break;case A_:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Wnt(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Jp:e="ENVMAP_MODE_REFRACTION";break}return e}function Xnt(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case wS:e="ENVMAP_BLENDING_MULTIPLY";break;case RH:e="ENVMAP_BLENDING_MIX";break;case OH:e="ENVMAP_BLENDING_ADD";break}return e}function Ynt(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function Knt(i,e,n,r){const s=i.getContext(),a=n.defines;let o=n.vertexShader,l=n.fragmentShader;const u=qnt(n),f=$nt(n),d=Wnt(n),m=Xnt(n),y=Ynt(n),_=knt(n),x=znt(a),S=s.createProgram();let T,b,M=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(T=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x].filter(kx).join(`
`),T.length>0&&(T+=`
`),b=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x].filter(kx).join(`
`),b.length>0&&(b+=`
`)):(T=[_4(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(kx).join(`
`),b=[_4(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.envMap?"#define "+d:"",n.envMap?"#define "+m:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Of?"#define TONE_MAPPING":"",n.toneMapping!==Of?Vn.tonemapping_pars_fragment:"",n.toneMapping!==Of?Lnt("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Vn.colorspace_pars_fragment,Nnt("linearToOutputTexel",n.outputColorSpace),Unt(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(kx).join(`
`)),o=ND(o),o=g4(o,n),o=y4(o,n),l=ND(l),l=g4(l,n),l=y4(l,n),o=v4(o),l=v4(l),n.isRawShaderMaterial!==!0&&(M=`#version 300 es
`,T=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,b=["#define varying in",n.glslVersion===wD?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===wD?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const R=M+T+o,A=M+b+l,I=d4(s,s.VERTEX_SHADER,R),k=d4(s,s.FRAGMENT_SHADER,A);s.attachShader(S,I),s.attachShader(S,k),n.index0AttributeName!==void 0?s.bindAttribLocation(S,0,n.index0AttributeName):n.morphTargets===!0&&s.bindAttribLocation(S,0,"position"),s.linkProgram(S);function N(F){if(i.debug.checkShaderErrors){const H=s.getProgramInfoLog(S).trim(),V=s.getShaderInfoLog(I).trim(),X=s.getShaderInfoLog(k).trim();let J=!0,q=!0;if(s.getProgramParameter(S,s.LINK_STATUS)===!1)if(J=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,S,I,k);else{const W=m4(s,I,"vertex"),K=m4(s,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(S,s.VALIDATE_STATUS)+`

Material Name: `+F.name+`
Material Type: `+F.type+`

Program Info Log: `+H+`
`+W+`
`+K)}else H!==""?console.warn("THREE.WebGLProgram: Program Info Log:",H):(V===""||X==="")&&(q=!1);q&&(F.diagnostics={runnable:J,programLog:H,vertexShader:{log:V,prefix:T},fragmentShader:{log:X,prefix:b}})}s.deleteShader(I),s.deleteShader(k),L=new nA(s,S),U=Bnt(s,S)}let L;this.getUniforms=function(){return L===void 0&&N(this),L};let U;this.getAttributes=function(){return U===void 0&&N(this),U};let O=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&&(O=s.getProgramParameter(S,Ont)),O},this.destroy=function(){r.releaseStatesOfProgram(this),s.deleteProgram(S),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Int++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=I,this.fragmentShader=k,this}let Znt=0;class Qnt{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,s=this._getShaderStage(n),a=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(s)===!1&&(o.add(s),s.usedTimes++),o.has(a)===!1&&(o.add(a),a.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new Jnt(e),n.set(e,r)),r}}class Jnt{constructor(e){this.id=Znt++,this.code=e,this.usedTimes=0}}function tit(i,e,n,r,s,a,o){const l=new X0,u=new Qnt,f=new Set,d=[],m=s.logarithmicDepthBuffer,y=s.vertexTextures;let _=s.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(U){return f.add(U),U===0?"uv":`uv${U}`}function T(U,O,F,H,V){const X=H.fog,J=V.geometry,q=U.isMeshStandardMaterial?H.environment:null,W=(U.isMeshStandardMaterial?n:e).get(U.envMap||q),K=W&&W.mapping===A_?W.image.height:null,et=x[U.type];U.precision!==null&&(_=s.getMaxPrecision(U.precision),_!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",_,"instead."));const Q=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,dt=Q!==void 0?Q.length:0;let yt=0;J.morphAttributes.position!==void 0&&(yt=1),J.morphAttributes.normal!==void 0&&(yt=2),J.morphAttributes.color!==void 0&&(yt=3);let xt,nt,ht,ft;if(et){const Qe=uc[et];xt=Qe.vertexShader,nt=Qe.fragmentShader}else xt=U.vertexShader,nt=U.fragmentShader,u.update(U),ht=u.getVertexShaderID(U),ft=u.getFragmentShaderID(U);const gt=i.getRenderTarget(),wt=i.state.buffers.depth.getReversed(),Kt=V.isInstancedMesh===!0,zt=V.isBatchedMesh===!0,te=!!U.map,Pt=!!U.matcap,Ht=!!W,at=!!U.aoMap,ue=!!U.lightMap,Jt=!!U.bumpMap,se=!!U.normalMap,ae=!!U.displacementMap,Ce=!!U.emissiveMap,le=!!U.metalnessMap,ct=!!U.roughnessMap,G=U.anisotropy>0,lt=U.clearcoat>0,mt=U.dispersion>0,Ct=U.iridescence>0,bt=U.sheen>0,Mt=U.transmission>0,Lt=G&&!!U.anisotropyMap,Qt=lt&&!!U.clearcoatMap,Oe=lt&&!!U.clearcoatNormalMap,jt=lt&&!!U.clearcoatRoughnessMap,ve=Ct&&!!U.iridescenceMap,we=Ct&&!!U.iridescenceThicknessMap,Me=bt&&!!U.sheenColorMap,Zt=bt&&!!U.sheenRoughnessMap,Re=!!U.specularMap,Ie=!!U.specularColorMap,en=!!U.specularIntensityMap,At=Mt&&!!U.transmissionMap,Te=Mt&&!!U.thicknessMap,Xt=!!U.gradientMap,re=!!U.alphaMap,Ae=U.alphaTest>0,Ee=!!U.alphaHash,sn=!!U.extensions;let Wn=Of;U.toneMapped&&(gt===null||gt.isXRRenderTarget===!0)&&(Wn=i.toneMapping);const ze={shaderID:et,shaderType:U.type,shaderName:U.name,vertexShader:xt,fragmentShader:nt,defines:U.defines,customVertexShaderID:ht,customFragmentShaderID:ft,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:_,batching:zt,batchingColor:zt&&V._colorsTexture!==null,instancing:Kt,instancingColor:Kt&&V.instanceColor!==null,instancingMorph:Kt&&V.morphTexture!==null,supportsVertexTextures:y,outputColorSpace:gt===null?i.outputColorSpace:gt.isXRRenderTarget===!0?gt.texture.colorSpace:tm,alphaToCoverage:!!U.alphaToCoverage,map:te,matcap:Pt,envMap:Ht,envMapMode:Ht&&W.mapping,envMapCubeUVHeight:K,aoMap:at,lightMap:ue,bumpMap:Jt,normalMap:se,displacementMap:y&&ae,emissiveMap:Ce,normalMapObjectSpace:se&&U.normalMapType===GH,normalMapTangentSpace:se&&U.normalMapType===hm,metalnessMap:le,roughnessMap:ct,anisotropy:G,anisotropyMap:Lt,clearcoat:lt,clearcoatMap:Qt,clearcoatNormalMap:Oe,clearcoatRoughnessMap:jt,dispersion:mt,iridescence:Ct,iridescenceMap:ve,iridescenceThicknessMap:we,sheen:bt,sheenColorMap:Me,sheenRoughnessMap:Zt,specularMap:Re,specularColorMap:Ie,specularIntensityMap:en,transmission:Mt,transmissionMap:At,thicknessMap:Te,gradientMap:Xt,opaque:U.transparent===!1&&U.blending===Wg&&U.alphaToCoverage===!1,alphaMap:re,alphaTest:Ae,alphaHash:Ee,combine:U.combine,mapUv:te&&S(U.map.channel),aoMapUv:at&&S(U.aoMap.channel),lightMapUv:ue&&S(U.lightMap.channel),bumpMapUv:Jt&&S(U.bumpMap.channel),normalMapUv:se&&S(U.normalMap.channel),displacementMapUv:ae&&S(U.displacementMap.channel),emissiveMapUv:Ce&&S(U.emissiveMap.channel),metalnessMapUv:le&&S(U.metalnessMap.channel),roughnessMapUv:ct&&S(U.roughnessMap.channel),anisotropyMapUv:Lt&&S(U.anisotropyMap.channel),clearcoatMapUv:Qt&&S(U.clearcoatMap.channel),clearcoatNormalMapUv:Oe&&S(U.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:jt&&S(U.clearcoatRoughnessMap.channel),iridescenceMapUv:ve&&S(U.iridescenceMap.channel),iridescenceThicknessMapUv:we&&S(U.iridescenceThicknessMap.channel),sheenColorMapUv:Me&&S(U.sheenColorMap.channel),sheenRoughnessMapUv:Zt&&S(U.sheenRoughnessMap.channel),specularMapUv:Re&&S(U.specularMap.channel),specularColorMapUv:Ie&&S(U.specularColorMap.channel),specularIntensityMapUv:en&&S(U.specularIntensityMap.channel),transmissionMapUv:At&&S(U.transmissionMap.channel),thicknessMapUv:Te&&S(U.thicknessMap.channel),alphaMapUv:re&&S(U.alphaMap.channel),vertexTangents:!!J.attributes.tangent&&(se||G),vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,pointsUvs:V.isPoints===!0&&!!J.attributes.uv&&(te||re),fog:!!X,useFog:U.fog===!0,fogExp2:!!X&&X.isFogExp2,flatShading:U.flatShading===!0,sizeAttenuation:U.sizeAttenuation===!0,logarithmicDepthBuffer:m,reverseDepthBuffer:wt,skinning:V.isSkinnedMesh===!0,morphTargets:J.morphAttributes.position!==void 0,morphNormals:J.morphAttributes.normal!==void 0,morphColors:J.morphAttributes.color!==void 0,morphTargetsCount:dt,morphTextureStride:yt,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:U.dithering,shadowMapEnabled:i.shadowMap.enabled&&F.length>0,shadowMapType:i.shadowMap.type,toneMapping:Wn,decodeVideoTexture:te&&U.map.isVideoTexture===!0&&li.getTransfer(U.map.colorSpace)===ki,decodeVideoTextureEmissive:Ce&&U.emissiveMap.isVideoTexture===!0&&li.getTransfer(U.emissiveMap.colorSpace)===ki,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===Ef,flipSided:U.side===_o,useDepthPacking:U.depthPacking>=0,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionClipCullDistance:sn&&U.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(sn&&U.extensions.multiDraw===!0||zt)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:U.customProgramCacheKey()};return ze.vertexUv1s=f.has(1),ze.vertexUv2s=f.has(2),ze.vertexUv3s=f.has(3),f.clear(),ze}function b(U){const O=[];if(U.shaderID?O.push(U.shaderID):(O.push(U.customVertexShaderID),O.push(U.customFragmentShaderID)),U.defines!==void 0)for(const F in U.defines)O.push(F),O.push(U.defines[F]);return U.isRawShaderMaterial===!1&&(M(O,U),R(O,U),O.push(i.outputColorSpace)),O.push(U.customProgramCacheKey),O.join()}function M(U,O){U.push(O.precision),U.push(O.outputColorSpace),U.push(O.envMapMode),U.push(O.envMapCubeUVHeight),U.push(O.mapUv),U.push(O.alphaMapUv),U.push(O.lightMapUv),U.push(O.aoMapUv),U.push(O.bumpMapUv),U.push(O.normalMapUv),U.push(O.displacementMapUv),U.push(O.emissiveMapUv),U.push(O.metalnessMapUv),U.push(O.roughnessMapUv),U.push(O.anisotropyMapUv),U.push(O.clearcoatMapUv),U.push(O.clearcoatNormalMapUv),U.push(O.clearcoatRoughnessMapUv),U.push(O.iridescenceMapUv),U.push(O.iridescenceThicknessMapUv),U.push(O.sheenColorMapUv),U.push(O.sheenRoughnessMapUv),U.push(O.specularMapUv),U.push(O.specularColorMapUv),U.push(O.specularIntensityMapUv),U.push(O.transmissionMapUv),U.push(O.thicknessMapUv),U.push(O.combine),U.push(O.fogExp2),U.push(O.sizeAttenuation),U.push(O.morphTargetsCount),U.push(O.morphAttributeCount),U.push(O.numDirLights),U.push(O.numPointLights),U.push(O.numSpotLights),U.push(O.numSpotLightMaps),U.push(O.numHemiLights),U.push(O.numRectAreaLights),U.push(O.numDirLightShadows),U.push(O.numPointLightShadows),U.push(O.numSpotLightShadows),U.push(O.numSpotLightShadowsWithMaps),U.push(O.numLightProbes),U.push(O.shadowMapType),U.push(O.toneMapping),U.push(O.numClippingPlanes),U.push(O.numClipIntersection),U.push(O.depthPacking)}function R(U,O){l.disableAll(),O.supportsVertexTextures&&l.enable(0),O.instancing&&l.enable(1),O.instancingColor&&l.enable(2),O.instancingMorph&&l.enable(3),O.matcap&&l.enable(4),O.envMap&&l.enable(5),O.normalMapObjectSpace&&l.enable(6),O.normalMapTangentSpace&&l.enable(7),O.clearcoat&&l.enable(8),O.iridescence&&l.enable(9),O.alphaTest&&l.enable(10),O.vertexColors&&l.enable(11),O.vertexAlphas&&l.enable(12),O.vertexUv1s&&l.enable(13),O.vertexUv2s&&l.enable(14),O.vertexUv3s&&l.enable(15),O.vertexTangents&&l.enable(16),O.anisotropy&&l.enable(17),O.alphaHash&&l.enable(18),O.batching&&l.enable(19),O.dispersion&&l.enable(20),O.batchingColor&&l.enable(21),U.push(l.mask),l.disableAll(),O.fog&&l.enable(0),O.useFog&&l.enable(1),O.flatShading&&l.enable(2),O.logarithmicDepthBuffer&&l.enable(3),O.reverseDepthBuffer&&l.enable(4),O.skinning&&l.enable(5),O.morphTargets&&l.enable(6),O.morphNormals&&l.enable(7),O.morphColors&&l.enable(8),O.premultipliedAlpha&&l.enable(9),O.shadowMapEnabled&&l.enable(10),O.doubleSided&&l.enable(11),O.flipSided&&l.enable(12),O.useDepthPacking&&l.enable(13),O.dithering&&l.enable(14),O.transmission&&l.enable(15),O.sheen&&l.enable(16),O.opaque&&l.enable(17),O.pointsUvs&&l.enable(18),O.decodeVideoTexture&&l.enable(19),O.decodeVideoTextureEmissive&&l.enable(20),O.alphaToCoverage&&l.enable(21),U.push(l.mask)}function A(U){const O=x[U.type];let F;if(O){const H=uc[O];F=i8.clone(H.uniforms)}else F=U.uniforms;return F}function I(U,O){let F;for(let H=0,V=d.length;H<V;H++){const X=d[H];if(X.cacheKey===O){F=X,++F.usedTimes;break}}return F===void 0&&(F=new Knt(i,O,U,a),d.push(F)),F}function k(U){if(--U.usedTimes===0){const O=d.indexOf(U);d[O]=d[d.length-1],d.pop(),U.destroy()}}function N(U){u.remove(U)}function L(){u.dispose()}return{getParameters:T,getProgramCacheKey:b,getUniforms:A,acquireProgram:I,releaseProgram:k,releaseShaderCache:N,programs:d,dispose:L}}function eit(){let i=new WeakMap;function e(o){return i.has(o)}function n(o){let l=i.get(o);return l===void 0&&(l={},i.set(o,l)),l}function r(o){i.delete(o)}function s(o,l,u){i.get(o)[l]=u}function a(){i=new WeakMap}return{has:e,get:n,remove:r,update:s,dispose:a}}function nit(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function b4(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function x4(){const i=[];let e=0;const n=[],r=[],s=[];function a(){e=0,n.length=0,r.length=0,s.length=0}function o(m,y,_,x,S,T){let b=i[e];return b===void 0?(b={id:m.id,object:m,geometry:y,material:_,groupOrder:x,renderOrder:m.renderOrder,z:S,group:T},i[e]=b):(b.id=m.id,b.object=m,b.geometry=y,b.material=_,b.groupOrder=x,b.renderOrder=m.renderOrder,b.z=S,b.group=T),e++,b}function l(m,y,_,x,S,T){const b=o(m,y,_,x,S,T);_.transmission>0?r.push(b):_.transparent===!0?s.push(b):n.push(b)}function u(m,y,_,x,S,T){const b=o(m,y,_,x,S,T);_.transmission>0?r.unshift(b):_.transparent===!0?s.unshift(b):n.unshift(b)}function f(m,y){n.length>1&&n.sort(m||nit),r.length>1&&r.sort(y||b4),s.length>1&&s.sort(y||b4)}function d(){for(let m=e,y=i.length;m<y;m++){const _=i[m];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:n,transmissive:r,transparent:s,init:a,push:l,unshift:u,finish:d,sort:f}}function iit(){let i=new WeakMap;function e(r,s){const a=i.get(r);let o;return a===void 0?(o=new x4,i.set(r,[o])):s>=a.length?(o=new x4,a.push(o)):o=a[s],o}function n(){i=new WeakMap}return{get:e,dispose:n}}function rit(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new pt,color:new ke};break;case"SpotLight":n={position:new pt,direction:new pt,color:new ke,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new pt,color:new ke,distance:0,decay:0};break;case"HemisphereLight":n={direction:new pt,skyColor:new ke,groundColor:new ke};break;case"RectAreaLight":n={color:new ke,position:new pt,halfWidth:new pt,halfHeight:new pt};break}return i[e.id]=n,n}}}function sit(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=n,n}}}let ait=0;function oit(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function lit(i){const e=new rit,n=sit(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)r.probe.push(new pt);const s=new pt,a=new cn,o=new cn;function l(f){let d=0,m=0,y=0;for(let U=0;U<9;U++)r.probe[U].set(0,0,0);let _=0,x=0,S=0,T=0,b=0,M=0,R=0,A=0,I=0,k=0,N=0;f.sort(oit);for(let U=0,O=f.length;U<O;U++){const F=f[U],H=F.color,V=F.intensity,X=F.distance,J=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)d+=H.r*V,m+=H.g*V,y+=H.b*V;else if(F.isLightProbe){for(let q=0;q<9;q++)r.probe[q].addScaledVector(F.sh.coefficients[q],V);N++}else if(F.isDirectionalLight){const q=e.get(F);if(q.color.copy(F.color).multiplyScalar(F.intensity),F.castShadow){const W=F.shadow,K=n.get(F);K.shadowIntensity=W.intensity,K.shadowBias=W.bias,K.shadowNormalBias=W.normalBias,K.shadowRadius=W.radius,K.shadowMapSize=W.mapSize,r.directionalShadow[_]=K,r.directionalShadowMap[_]=J,r.directionalShadowMatrix[_]=F.shadow.matrix,M++}r.directional[_]=q,_++}else if(F.isSpotLight){const q=e.get(F);q.position.setFromMatrixPosition(F.matrixWorld),q.color.copy(H).multiplyScalar(V),q.distance=X,q.coneCos=Math.cos(F.angle),q.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),q.decay=F.decay,r.spot[S]=q;const W=F.shadow;if(F.map&&(r.spotLightMap[I]=F.map,I++,W.updateMatrices(F),F.castShadow&&k++),r.spotLightMatrix[S]=W.matrix,F.castShadow){const K=n.get(F);K.shadowIntensity=W.intensity,K.shadowBias=W.bias,K.shadowNormalBias=W.normalBias,K.shadowRadius=W.radius,K.shadowMapSize=W.mapSize,r.spotShadow[S]=K,r.spotShadowMap[S]=J,A++}S++}else if(F.isRectAreaLight){const q=e.get(F);q.color.copy(H).multiplyScalar(V),q.halfWidth.set(F.width*.5,0,0),q.halfHeight.set(0,F.height*.5,0),r.rectArea[T]=q,T++}else if(F.isPointLight){const q=e.get(F);if(q.color.copy(F.color).multiplyScalar(F.intensity),q.distance=F.distance,q.decay=F.decay,F.castShadow){const W=F.shadow,K=n.get(F);K.shadowIntensity=W.intensity,K.shadowBias=W.bias,K.shadowNormalBias=W.normalBias,K.shadowRadius=W.radius,K.shadowMapSize=W.mapSize,K.shadowCameraNear=W.camera.near,K.shadowCameraFar=W.camera.far,r.pointShadow[x]=K,r.pointShadowMap[x]=J,r.pointShadowMatrix[x]=F.shadow.matrix,R++}r.point[x]=q,x++}else if(F.isHemisphereLight){const q=e.get(F);q.skyColor.copy(F.color).multiplyScalar(V),q.groundColor.copy(F.groundColor).multiplyScalar(V),r.hemi[b]=q,b++}}T>0&&(i.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Pe.LTC_FLOAT_1,r.rectAreaLTC2=Pe.LTC_FLOAT_2):(r.rectAreaLTC1=Pe.LTC_HALF_1,r.rectAreaLTC2=Pe.LTC_HALF_2)),r.ambient[0]=d,r.ambient[1]=m,r.ambient[2]=y;const L=r.hash;(L.directionalLength!==_||L.pointLength!==x||L.spotLength!==S||L.rectAreaLength!==T||L.hemiLength!==b||L.numDirectionalShadows!==M||L.numPointShadows!==R||L.numSpotShadows!==A||L.numSpotMaps!==I||L.numLightProbes!==N)&&(r.directional.length=_,r.spot.length=S,r.rectArea.length=T,r.point.length=x,r.hemi.length=b,r.directionalShadow.length=M,r.directionalShadowMap.length=M,r.pointShadow.length=R,r.pointShadowMap.length=R,r.spotShadow.length=A,r.spotShadowMap.length=A,r.directionalShadowMatrix.length=M,r.pointShadowMatrix.length=R,r.spotLightMatrix.length=A+I-k,r.spotLightMap.length=I,r.numSpotLightShadowsWithMaps=k,r.numLightProbes=N,L.directionalLength=_,L.pointLength=x,L.spotLength=S,L.rectAreaLength=T,L.hemiLength=b,L.numDirectionalShadows=M,L.numPointShadows=R,L.numSpotShadows=A,L.numSpotMaps=I,L.numLightProbes=N,r.version=ait++)}function u(f,d){let m=0,y=0,_=0,x=0,S=0;const T=d.matrixWorldInverse;for(let b=0,M=f.length;b<M;b++){const R=f[b];if(R.isDirectionalLight){const A=r.directional[m];A.direction.setFromMatrixPosition(R.matrixWorld),s.setFromMatrixPosition(R.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(T),m++}else if(R.isSpotLight){const A=r.spot[_];A.position.setFromMatrixPosition(R.matrixWorld),A.position.applyMatrix4(T),A.direction.setFromMatrixPosition(R.matrixWorld),s.setFromMatrixPosition(R.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(T),_++}else if(R.isRectAreaLight){const A=r.rectArea[x];A.position.setFromMatrixPosition(R.matrixWorld),A.position.applyMatrix4(T),o.identity(),a.copy(R.matrixWorld),a.premultiply(T),o.extractRotation(a),A.halfWidth.set(R.width*.5,0,0),A.halfHeight.set(0,R.height*.5,0),A.halfWidth.applyMatrix4(o),A.halfHeight.applyMatrix4(o),x++}else if(R.isPointLight){const A=r.point[y];A.position.setFromMatrixPosition(R.matrixWorld),A.position.applyMatrix4(T),y++}else if(R.isHemisphereLight){const A=r.hemi[S];A.direction.setFromMatrixPosition(R.matrixWorld),A.direction.transformDirection(T),S++}}}return{setup:l,setupView:u,state:r}}function S4(i){const e=new lit(i),n=[],r=[];function s(d){f.camera=d,n.length=0,r.length=0}function a(d){n.push(d)}function o(d){r.push(d)}function l(){e.setup(n)}function u(d){e.setupView(n,d)}const f={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:f,setupLights:l,setupLightsView:u,pushLight:a,pushShadow:o}}function uit(i){let e=new WeakMap;function n(s,a=0){const o=e.get(s);let l;return o===void 0?(l=new S4(i),e.set(s,[l])):a>=o.length?(l=new S4(i),o.push(l)):l=o[a],l}function r(){e=new WeakMap}return{get:n,dispose:r}}const cit=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fit=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function hit(i,e,n){let r=new RS;const s=new de,a=new de,o=new di,l=new u3({depthPacking:HH}),u=new c3,f={},d=n.maxTextureSize,m={[ud]:_o,[_o]:ud,[Ef]:Ef},y=new Au({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new de},radius:{value:4}},vertexShader:cit,fragmentShader:fit}),_=y.clone();_.defines.HORIZONTAL_PASS=1;const x=new Un;x.setAttribute("position",new zi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new $r(x,y),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=wC;let b=this.type;this.render=function(k,N,L){if(T.enabled===!1||T.autoUpdate===!1&&T.needsUpdate===!1||k.length===0)return;const U=i.getRenderTarget(),O=i.getActiveCubeFace(),F=i.getActiveMipmapLevel(),H=i.state;H.setBlending(rd),H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const V=b!==oc&&this.type===oc,X=b===oc&&this.type!==oc;for(let J=0,q=k.length;J<q;J++){const W=k[J],K=W.shadow;if(K===void 0){console.warn("THREE.WebGLShadowMap:",W,"has no shadow.");continue}if(K.autoUpdate===!1&&K.needsUpdate===!1)continue;s.copy(K.mapSize);const et=K.getFrameExtents();if(s.multiply(et),a.copy(K.mapSize),(s.x>d||s.y>d)&&(s.x>d&&(a.x=Math.floor(d/et.x),s.x=a.x*et.x,K.mapSize.x=a.x),s.y>d&&(a.y=Math.floor(d/et.y),s.y=a.y*et.y,K.mapSize.y=a.y)),K.map===null||V===!0||X===!0){const dt=this.type!==oc?{minFilter:fa,magFilter:fa}:{};K.map!==null&&K.map.dispose(),K.map=new Vf(s.x,s.y,dt),K.map.texture.name=W.name+".shadowMap",K.camera.updateProjectionMatrix()}i.setRenderTarget(K.map),i.clear();const Q=K.getViewportCount();for(let dt=0;dt<Q;dt++){const yt=K.getViewport(dt);o.set(a.x*yt.x,a.y*yt.y,a.x*yt.z,a.y*yt.w),H.viewport(o),K.updateMatrices(W,dt),r=K.getFrustum(),A(N,L,K.camera,W,this.type)}K.isPointLightShadow!==!0&&this.type===oc&&M(K,L),K.needsUpdate=!1}b=this.type,T.needsUpdate=!1,i.setRenderTarget(U,O,F)};function M(k,N){const L=e.update(S);y.defines.VSM_SAMPLES!==k.blurSamples&&(y.defines.VSM_SAMPLES=k.blurSamples,_.defines.VSM_SAMPLES=k.blurSamples,y.needsUpdate=!0,_.needsUpdate=!0),k.mapPass===null&&(k.mapPass=new Vf(s.x,s.y)),y.uniforms.shadow_pass.value=k.map.texture,y.uniforms.resolution.value=k.mapSize,y.uniforms.radius.value=k.radius,i.setRenderTarget(k.mapPass),i.clear(),i.renderBufferDirect(N,null,L,y,S,null),_.uniforms.shadow_pass.value=k.mapPass.texture,_.uniforms.resolution.value=k.mapSize,_.uniforms.radius.value=k.radius,i.setRenderTarget(k.map),i.clear(),i.renderBufferDirect(N,null,L,_,S,null)}function R(k,N,L,U){let O=null;const F=L.isPointLight===!0?k.customDistanceMaterial:k.customDepthMaterial;if(F!==void 0)O=F;else if(O=L.isPointLight===!0?u:l,i.localClippingEnabled&&N.clipShadows===!0&&Array.isArray(N.clippingPlanes)&&N.clippingPlanes.length!==0||N.displacementMap&&N.displacementScale!==0||N.alphaMap&&N.alphaTest>0||N.map&&N.alphaTest>0){const H=O.uuid,V=N.uuid;let X=f[H];X===void 0&&(X={},f[H]=X);let J=X[V];J===void 0&&(J=O.clone(),X[V]=J,N.addEventListener("dispose",I)),O=J}if(O.visible=N.visible,O.wireframe=N.wireframe,U===oc?O.side=N.shadowSide!==null?N.shadowSide:N.side:O.side=N.shadowSide!==null?N.shadowSide:m[N.side],O.alphaMap=N.alphaMap,O.alphaTest=N.alphaTest,O.map=N.map,O.clipShadows=N.clipShadows,O.clippingPlanes=N.clippingPlanes,O.clipIntersection=N.clipIntersection,O.displacementMap=N.displacementMap,O.displacementScale=N.displacementScale,O.displacementBias=N.displacementBias,O.wireframeLinewidth=N.wireframeLinewidth,O.linewidth=N.linewidth,L.isPointLight===!0&&O.isMeshDistanceMaterial===!0){const H=i.properties.get(O);H.light=L}return O}function A(k,N,L,U,O){if(k.visible===!1)return;if(k.layers.test(N.layers)&&(k.isMesh||k.isLine||k.isPoints)&&(k.castShadow||k.receiveShadow&&O===oc)&&(!k.frustumCulled||r.intersectsObject(k))){k.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,k.matrixWorld);const V=e.update(k),X=k.material;if(Array.isArray(X)){const J=V.groups;for(let q=0,W=J.length;q<W;q++){const K=J[q],et=X[K.materialIndex];if(et&&et.visible){const Q=R(k,et,U,O);k.onBeforeShadow(i,k,N,L,V,Q,K),i.renderBufferDirect(L,null,V,Q,k,K),k.onAfterShadow(i,k,N,L,V,Q,K)}}}else if(X.visible){const J=R(k,X,U,O);k.onBeforeShadow(i,k,N,L,V,J,null),i.renderBufferDirect(L,null,V,J,k,null),k.onAfterShadow(i,k,N,L,V,J,null)}}const H=k.children;for(let V=0,X=H.length;V<X;V++)A(H[V],N,L,U,O)}function I(k){k.target.removeEventListener("dispose",I);for(const L in f){const U=f[L],O=k.target.uuid;O in U&&(U[O].dispose(),delete U[O])}}}const dit={[NA]:LA,[UA]:BA,[kA]:FA,[ay]:zA,[LA]:NA,[BA]:UA,[FA]:kA,[zA]:ay};function pit(i,e){function n(){let At=!1;const Te=new di;let Xt=null;const re=new di(0,0,0,0);return{setMask:function(Ae){Xt!==Ae&&!At&&(i.colorMask(Ae,Ae,Ae,Ae),Xt=Ae)},setLocked:function(Ae){At=Ae},setClear:function(Ae,Ee,sn,Wn,ze){ze===!0&&(Ae*=Wn,Ee*=Wn,sn*=Wn),Te.set(Ae,Ee,sn,Wn),re.equals(Te)===!1&&(i.clearColor(Ae,Ee,sn,Wn),re.copy(Te))},reset:function(){At=!1,Xt=null,re.set(-1,0,0,0)}}}function r(){let At=!1,Te=!1,Xt=null,re=null,Ae=null;return{setReversed:function(Ee){if(Te!==Ee){const sn=e.get("EXT_clip_control");Te?sn.clipControlEXT(sn.LOWER_LEFT_EXT,sn.ZERO_TO_ONE_EXT):sn.clipControlEXT(sn.LOWER_LEFT_EXT,sn.NEGATIVE_ONE_TO_ONE_EXT);const Wn=Ae;Ae=null,this.setClear(Wn)}Te=Ee},getReversed:function(){return Te},setTest:function(Ee){Ee?gt(i.DEPTH_TEST):wt(i.DEPTH_TEST)},setMask:function(Ee){Xt!==Ee&&!At&&(i.depthMask(Ee),Xt=Ee)},setFunc:function(Ee){if(Te&&(Ee=dit[Ee]),re!==Ee){switch(Ee){case NA:i.depthFunc(i.NEVER);break;case LA:i.depthFunc(i.ALWAYS);break;case UA:i.depthFunc(i.LESS);break;case ay:i.depthFunc(i.LEQUAL);break;case kA:i.depthFunc(i.EQUAL);break;case zA:i.depthFunc(i.GEQUAL);break;case BA:i.depthFunc(i.GREATER);break;case FA:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}re=Ee}},setLocked:function(Ee){At=Ee},setClear:function(Ee){Ae!==Ee&&(Te&&(Ee=1-Ee),i.clearDepth(Ee),Ae=Ee)},reset:function(){At=!1,Xt=null,re=null,Ae=null,Te=!1}}}function s(){let At=!1,Te=null,Xt=null,re=null,Ae=null,Ee=null,sn=null,Wn=null,ze=null;return{setTest:function(Qe){At||(Qe?gt(i.STENCIL_TEST):wt(i.STENCIL_TEST))},setMask:function(Qe){Te!==Qe&&!At&&(i.stencilMask(Qe),Te=Qe)},setFunc:function(Qe,Lr,Qn){(Xt!==Qe||re!==Lr||Ae!==Qn)&&(i.stencilFunc(Qe,Lr,Qn),Xt=Qe,re=Lr,Ae=Qn)},setOp:function(Qe,Lr,Qn){(Ee!==Qe||sn!==Lr||Wn!==Qn)&&(i.stencilOp(Qe,Lr,Qn),Ee=Qe,sn=Lr,Wn=Qn)},setLocked:function(Qe){At=Qe},setClear:function(Qe){ze!==Qe&&(i.clearStencil(Qe),ze=Qe)},reset:function(){At=!1,Te=null,Xt=null,re=null,Ae=null,Ee=null,sn=null,Wn=null,ze=null}}}const a=new n,o=new r,l=new s,u=new WeakMap,f=new WeakMap;let d={},m={},y=new WeakMap,_=[],x=null,S=!1,T=null,b=null,M=null,R=null,A=null,I=null,k=null,N=new ke(0,0,0),L=0,U=!1,O=null,F=null,H=null,V=null,X=null;const J=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let q=!1,W=0;const K=i.getParameter(i.VERSION);K.indexOf("WebGL")!==-1?(W=parseFloat(/^WebGL (\d)/.exec(K)[1]),q=W>=1):K.indexOf("OpenGL ES")!==-1&&(W=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),q=W>=2);let et=null,Q={};const dt=i.getParameter(i.SCISSOR_BOX),yt=i.getParameter(i.VIEWPORT),xt=new di().fromArray(dt),nt=new di().fromArray(yt);function ht(At,Te,Xt,re){const Ae=new Uint8Array(4),Ee=i.createTexture();i.bindTexture(At,Ee),i.texParameteri(At,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(At,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let sn=0;sn<Xt;sn++)At===i.TEXTURE_3D||At===i.TEXTURE_2D_ARRAY?i.texImage3D(Te,0,i.RGBA,1,1,re,0,i.RGBA,i.UNSIGNED_BYTE,Ae):i.texImage2D(Te+sn,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,Ae);return Ee}const ft={};ft[i.TEXTURE_2D]=ht(i.TEXTURE_2D,i.TEXTURE_2D,1),ft[i.TEXTURE_CUBE_MAP]=ht(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),ft[i.TEXTURE_2D_ARRAY]=ht(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),ft[i.TEXTURE_3D]=ht(i.TEXTURE_3D,i.TEXTURE_3D,1,1),a.setClear(0,0,0,1),o.setClear(1),l.setClear(0),gt(i.DEPTH_TEST),o.setFunc(ay),Jt(!1),se(bD),gt(i.CULL_FACE),at(rd);function gt(At){d[At]!==!0&&(i.enable(At),d[At]=!0)}function wt(At){d[At]!==!1&&(i.disable(At),d[At]=!1)}function Kt(At,Te){return m[At]!==Te?(i.bindFramebuffer(At,Te),m[At]=Te,At===i.DRAW_FRAMEBUFFER&&(m[i.FRAMEBUFFER]=Te),At===i.FRAMEBUFFER&&(m[i.DRAW_FRAMEBUFFER]=Te),!0):!1}function zt(At,Te){let Xt=_,re=!1;if(At){Xt=y.get(Te),Xt===void 0&&(Xt=[],y.set(Te,Xt));const Ae=At.textures;if(Xt.length!==Ae.length||Xt[0]!==i.COLOR_ATTACHMENT0){for(let Ee=0,sn=Ae.length;Ee<sn;Ee++)Xt[Ee]=i.COLOR_ATTACHMENT0+Ee;Xt.length=Ae.length,re=!0}}else Xt[0]!==i.BACK&&(Xt[0]=i.BACK,re=!0);re&&i.drawBuffers(Xt)}function te(At){return x!==At?(i.useProgram(At),x=At,!0):!1}const Pt={[Dp]:i.FUNC_ADD,[hH]:i.FUNC_SUBTRACT,[dH]:i.FUNC_REVERSE_SUBTRACT};Pt[pH]=i.MIN,Pt[mH]=i.MAX;const Ht={[gH]:i.ZERO,[yH]:i.ONE,[vH]:i.SRC_COLOR,[DA]:i.SRC_ALPHA,[TH]:i.SRC_ALPHA_SATURATE,[SH]:i.DST_COLOR,[bH]:i.DST_ALPHA,[_H]:i.ONE_MINUS_SRC_COLOR,[PA]:i.ONE_MINUS_SRC_ALPHA,[EH]:i.ONE_MINUS_DST_COLOR,[xH]:i.ONE_MINUS_DST_ALPHA,[wH]:i.CONSTANT_COLOR,[AH]:i.ONE_MINUS_CONSTANT_COLOR,[MH]:i.CONSTANT_ALPHA,[CH]:i.ONE_MINUS_CONSTANT_ALPHA};function at(At,Te,Xt,re,Ae,Ee,sn,Wn,ze,Qe){if(At===rd){S===!0&&(wt(i.BLEND),S=!1);return}if(S===!1&&(gt(i.BLEND),S=!0),At!==fH){if(At!==T||Qe!==U){if((b!==Dp||A!==Dp)&&(i.blendEquation(i.FUNC_ADD),b=Dp,A=Dp),Qe)switch(At){case Wg:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case IA:i.blendFunc(i.ONE,i.ONE);break;case xD:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case SD:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",At);break}else switch(At){case Wg:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case IA:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case xD:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case SD:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",At);break}M=null,R=null,I=null,k=null,N.set(0,0,0),L=0,T=At,U=Qe}return}Ae=Ae||Te,Ee=Ee||Xt,sn=sn||re,(Te!==b||Ae!==A)&&(i.blendEquationSeparate(Pt[Te],Pt[Ae]),b=Te,A=Ae),(Xt!==M||re!==R||Ee!==I||sn!==k)&&(i.blendFuncSeparate(Ht[Xt],Ht[re],Ht[Ee],Ht[sn]),M=Xt,R=re,I=Ee,k=sn),(Wn.equals(N)===!1||ze!==L)&&(i.blendColor(Wn.r,Wn.g,Wn.b,ze),N.copy(Wn),L=ze),T=At,U=!1}function ue(At,Te){At.side===Ef?wt(i.CULL_FACE):gt(i.CULL_FACE);let Xt=At.side===_o;Te&&(Xt=!Xt),Jt(Xt),At.blending===Wg&&At.transparent===!1?at(rd):at(At.blending,At.blendEquation,At.blendSrc,At.blendDst,At.blendEquationAlpha,At.blendSrcAlpha,At.blendDstAlpha,At.blendColor,At.blendAlpha,At.premultipliedAlpha),o.setFunc(At.depthFunc),o.setTest(At.depthTest),o.setMask(At.depthWrite),a.setMask(At.colorWrite);const re=At.stencilWrite;l.setTest(re),re&&(l.setMask(At.stencilWriteMask),l.setFunc(At.stencilFunc,At.stencilRef,At.stencilFuncMask),l.setOp(At.stencilFail,At.stencilZFail,At.stencilZPass)),Ce(At.polygonOffset,At.polygonOffsetFactor,At.polygonOffsetUnits),At.alphaToCoverage===!0?gt(i.SAMPLE_ALPHA_TO_COVERAGE):wt(i.SAMPLE_ALPHA_TO_COVERAGE)}function Jt(At){O!==At&&(At?i.frontFace(i.CW):i.frontFace(i.CCW),O=At)}function se(At){At!==lH?(gt(i.CULL_FACE),At!==F&&(At===bD?i.cullFace(i.BACK):At===uH?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):wt(i.CULL_FACE),F=At}function ae(At){At!==H&&(q&&i.lineWidth(At),H=At)}function Ce(At,Te,Xt){At?(gt(i.POLYGON_OFFSET_FILL),(V!==Te||X!==Xt)&&(i.polygonOffset(Te,Xt),V=Te,X=Xt)):wt(i.POLYGON_OFFSET_FILL)}function le(At){At?gt(i.SCISSOR_TEST):wt(i.SCISSOR_TEST)}function ct(At){At===void 0&&(At=i.TEXTURE0+J-1),et!==At&&(i.activeTexture(At),et=At)}function G(At,Te,Xt){Xt===void 0&&(et===null?Xt=i.TEXTURE0+J-1:Xt=et);let re=Q[Xt];re===void 0&&(re={type:void 0,texture:void 0},Q[Xt]=re),(re.type!==At||re.texture!==Te)&&(et!==Xt&&(i.activeTexture(Xt),et=Xt),i.bindTexture(At,Te||ft[At]),re.type=At,re.texture=Te)}function lt(){const At=Q[et];At!==void 0&&At.type!==void 0&&(i.bindTexture(At.type,null),At.type=void 0,At.texture=void 0)}function mt(){try{i.compressedTexImage2D(...arguments)}catch(At){console.error("THREE.WebGLState:",At)}}function Ct(){try{i.compressedTexImage3D(...arguments)}catch(At){console.error("THREE.WebGLState:",At)}}function bt(){try{i.texSubImage2D(...arguments)}catch(At){console.error("THREE.WebGLState:",At)}}function Mt(){try{i.texSubImage3D(...arguments)}catch(At){console.error("THREE.WebGLState:",At)}}function Lt(){try{i.compressedTexSubImage2D(...arguments)}catch(At){console.error("THREE.WebGLState:",At)}}function Qt(){try{i.compressedTexSubImage3D(...arguments)}catch(At){console.error("THREE.WebGLState:",At)}}function Oe(){try{i.texStorage2D(...arguments)}catch(At){console.error("THREE.WebGLState:",At)}}function jt(){try{i.texStorage3D(...arguments)}catch(At){console.error("THREE.WebGLState:",At)}}function ve(){try{i.texImage2D(...arguments)}catch(At){console.error("THREE.WebGLState:",At)}}function we(){try{i.texImage3D(...arguments)}catch(At){console.error("THREE.WebGLState:",At)}}function Me(At){xt.equals(At)===!1&&(i.scissor(At.x,At.y,At.z,At.w),xt.copy(At))}function Zt(At){nt.equals(At)===!1&&(i.viewport(At.x,At.y,At.z,At.w),nt.copy(At))}function Re(At,Te){let Xt=f.get(Te);Xt===void 0&&(Xt=new WeakMap,f.set(Te,Xt));let re=Xt.get(At);re===void 0&&(re=i.getUniformBlockIndex(Te,At.name),Xt.set(At,re))}function Ie(At,Te){const re=f.get(Te).get(At);u.get(Te)!==re&&(i.uniformBlockBinding(Te,re,At.__bindingPointIndex),u.set(Te,re))}function en(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),o.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),d={},et=null,Q={},m={},y=new WeakMap,_=[],x=null,S=!1,T=null,b=null,M=null,R=null,A=null,I=null,k=null,N=new ke(0,0,0),L=0,U=!1,O=null,F=null,H=null,V=null,X=null,xt.set(0,0,i.canvas.width,i.canvas.height),nt.set(0,0,i.canvas.width,i.canvas.height),a.reset(),o.reset(),l.reset()}return{buffers:{color:a,depth:o,stencil:l},enable:gt,disable:wt,bindFramebuffer:Kt,drawBuffers:zt,useProgram:te,setBlending:at,setMaterial:ue,setFlipSided:Jt,setCullFace:se,setLineWidth:ae,setPolygonOffset:Ce,setScissorTest:le,activeTexture:ct,bindTexture:G,unbindTexture:lt,compressedTexImage2D:mt,compressedTexImage3D:Ct,texImage2D:ve,texImage3D:we,updateUBOMapping:Re,uniformBlockBinding:Ie,texStorage2D:Oe,texStorage3D:jt,texSubImage2D:bt,texSubImage3D:Mt,compressedTexSubImage2D:Lt,compressedTexSubImage3D:Qt,scissor:Me,viewport:Zt,reset:en}}function mit(i,e,n,r,s,a,o){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new de,d=new WeakMap;let m;const y=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(ct,G){return _?new OffscreenCanvas(ct,G):U1("canvas")}function S(ct,G,lt){let mt=1;const Ct=le(ct);if((Ct.width>lt||Ct.height>lt)&&(mt=lt/Math.max(Ct.width,Ct.height)),mt<1)if(typeof HTMLImageElement<"u"&&ct instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ct instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ct instanceof ImageBitmap||typeof VideoFrame<"u"&&ct instanceof VideoFrame){const bt=Math.floor(mt*Ct.width),Mt=Math.floor(mt*Ct.height);m===void 0&&(m=x(bt,Mt));const Lt=G?x(bt,Mt):m;return Lt.width=bt,Lt.height=Mt,Lt.getContext("2d").drawImage(ct,0,0,bt,Mt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ct.width+"x"+Ct.height+") to ("+bt+"x"+Mt+")."),Lt}else return"data"in ct&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ct.width+"x"+Ct.height+")."),ct;return ct}function T(ct){return ct.generateMipmaps}function b(ct){i.generateMipmap(ct)}function M(ct){return ct.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:ct.isWebGL3DRenderTarget?i.TEXTURE_3D:ct.isWebGLArrayRenderTarget||ct.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function R(ct,G,lt,mt,Ct=!1){if(ct!==null){if(i[ct]!==void 0)return i[ct];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ct+"'")}let bt=G;if(G===i.RED&&(lt===i.FLOAT&&(bt=i.R32F),lt===i.HALF_FLOAT&&(bt=i.R16F),lt===i.UNSIGNED_BYTE&&(bt=i.R8)),G===i.RED_INTEGER&&(lt===i.UNSIGNED_BYTE&&(bt=i.R8UI),lt===i.UNSIGNED_SHORT&&(bt=i.R16UI),lt===i.UNSIGNED_INT&&(bt=i.R32UI),lt===i.BYTE&&(bt=i.R8I),lt===i.SHORT&&(bt=i.R16I),lt===i.INT&&(bt=i.R32I)),G===i.RG&&(lt===i.FLOAT&&(bt=i.RG32F),lt===i.HALF_FLOAT&&(bt=i.RG16F),lt===i.UNSIGNED_BYTE&&(bt=i.RG8)),G===i.RG_INTEGER&&(lt===i.UNSIGNED_BYTE&&(bt=i.RG8UI),lt===i.UNSIGNED_SHORT&&(bt=i.RG16UI),lt===i.UNSIGNED_INT&&(bt=i.RG32UI),lt===i.BYTE&&(bt=i.RG8I),lt===i.SHORT&&(bt=i.RG16I),lt===i.INT&&(bt=i.RG32I)),G===i.RGB_INTEGER&&(lt===i.UNSIGNED_BYTE&&(bt=i.RGB8UI),lt===i.UNSIGNED_SHORT&&(bt=i.RGB16UI),lt===i.UNSIGNED_INT&&(bt=i.RGB32UI),lt===i.BYTE&&(bt=i.RGB8I),lt===i.SHORT&&(bt=i.RGB16I),lt===i.INT&&(bt=i.RGB32I)),G===i.RGBA_INTEGER&&(lt===i.UNSIGNED_BYTE&&(bt=i.RGBA8UI),lt===i.UNSIGNED_SHORT&&(bt=i.RGBA16UI),lt===i.UNSIGNED_INT&&(bt=i.RGBA32UI),lt===i.BYTE&&(bt=i.RGBA8I),lt===i.SHORT&&(bt=i.RGBA16I),lt===i.INT&&(bt=i.RGBA32I)),G===i.RGB&&lt===i.UNSIGNED_INT_5_9_9_9_REV&&(bt=i.RGB9_E5),G===i.RGBA){const Mt=Ct?P1:li.getTransfer(mt);lt===i.FLOAT&&(bt=i.RGBA32F),lt===i.HALF_FLOAT&&(bt=i.RGBA16F),lt===i.UNSIGNED_BYTE&&(bt=Mt===ki?i.SRGB8_ALPHA8:i.RGBA8),lt===i.UNSIGNED_SHORT_4_4_4_4&&(bt=i.RGBA4),lt===i.UNSIGNED_SHORT_5_5_5_1&&(bt=i.RGB5_A1)}return(bt===i.R16F||bt===i.R32F||bt===i.RG16F||bt===i.RG32F||bt===i.RGBA16F||bt===i.RGBA32F)&&e.get("EXT_color_buffer_float"),bt}function A(ct,G){let lt;return ct?G===null||G===fd||G===oy?lt=i.DEPTH24_STENCIL8:G===Jo?lt=i.DEPTH32F_STENCIL8:G===$0&&(lt=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):G===null||G===fd||G===oy?lt=i.DEPTH_COMPONENT24:G===Jo?lt=i.DEPTH_COMPONENT32F:G===$0&&(lt=i.DEPTH_COMPONENT16),lt}function I(ct,G){return T(ct)===!0||ct.isFramebufferTexture&&ct.minFilter!==fa&&ct.minFilter!==Is?Math.log2(Math.max(G.width,G.height))+1:ct.mipmaps!==void 0&&ct.mipmaps.length>0?ct.mipmaps.length:ct.isCompressedTexture&&Array.isArray(ct.image)?G.mipmaps.length:1}function k(ct){const G=ct.target;G.removeEventListener("dispose",k),L(G),G.isVideoTexture&&d.delete(G)}function N(ct){const G=ct.target;G.removeEventListener("dispose",N),O(G)}function L(ct){const G=r.get(ct);if(G.__webglInit===void 0)return;const lt=ct.source,mt=y.get(lt);if(mt){const Ct=mt[G.__cacheKey];Ct.usedTimes--,Ct.usedTimes===0&&U(ct),Object.keys(mt).length===0&&y.delete(lt)}r.remove(ct)}function U(ct){const G=r.get(ct);i.deleteTexture(G.__webglTexture);const lt=ct.source,mt=y.get(lt);delete mt[G.__cacheKey],o.memory.textures--}function O(ct){const G=r.get(ct);if(ct.depthTexture&&(ct.depthTexture.dispose(),r.remove(ct.depthTexture)),ct.isWebGLCubeRenderTarget)for(let mt=0;mt<6;mt++){if(Array.isArray(G.__webglFramebuffer[mt]))for(let Ct=0;Ct<G.__webglFramebuffer[mt].length;Ct++)i.deleteFramebuffer(G.__webglFramebuffer[mt][Ct]);else i.deleteFramebuffer(G.__webglFramebuffer[mt]);G.__webglDepthbuffer&&i.deleteRenderbuffer(G.__webglDepthbuffer[mt])}else{if(Array.isArray(G.__webglFramebuffer))for(let mt=0;mt<G.__webglFramebuffer.length;mt++)i.deleteFramebuffer(G.__webglFramebuffer[mt]);else i.deleteFramebuffer(G.__webglFramebuffer);if(G.__webglDepthbuffer&&i.deleteRenderbuffer(G.__webglDepthbuffer),G.__webglMultisampledFramebuffer&&i.deleteFramebuffer(G.__webglMultisampledFramebuffer),G.__webglColorRenderbuffer)for(let mt=0;mt<G.__webglColorRenderbuffer.length;mt++)G.__webglColorRenderbuffer[mt]&&i.deleteRenderbuffer(G.__webglColorRenderbuffer[mt]);G.__webglDepthRenderbuffer&&i.deleteRenderbuffer(G.__webglDepthRenderbuffer)}const lt=ct.textures;for(let mt=0,Ct=lt.length;mt<Ct;mt++){const bt=r.get(lt[mt]);bt.__webglTexture&&(i.deleteTexture(bt.__webglTexture),o.memory.textures--),r.remove(lt[mt])}r.remove(ct)}let F=0;function H(){F=0}function V(){const ct=F;return ct>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ct+" texture units while this GPU supports only "+s.maxTextures),F+=1,ct}function X(ct){const G=[];return G.push(ct.wrapS),G.push(ct.wrapT),G.push(ct.wrapR||0),G.push(ct.magFilter),G.push(ct.minFilter),G.push(ct.anisotropy),G.push(ct.internalFormat),G.push(ct.format),G.push(ct.type),G.push(ct.generateMipmaps),G.push(ct.premultiplyAlpha),G.push(ct.flipY),G.push(ct.unpackAlignment),G.push(ct.colorSpace),G.join()}function J(ct,G){const lt=r.get(ct);if(ct.isVideoTexture&&ae(ct),ct.isRenderTargetTexture===!1&&ct.version>0&&lt.__version!==ct.version){const mt=ct.image;if(mt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(mt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{nt(lt,ct,G);return}}n.bindTexture(i.TEXTURE_2D,lt.__webglTexture,i.TEXTURE0+G)}function q(ct,G){const lt=r.get(ct);if(ct.version>0&&lt.__version!==ct.version){nt(lt,ct,G);return}n.bindTexture(i.TEXTURE_2D_ARRAY,lt.__webglTexture,i.TEXTURE0+G)}function W(ct,G){const lt=r.get(ct);if(ct.version>0&&lt.__version!==ct.version){nt(lt,ct,G);return}n.bindTexture(i.TEXTURE_3D,lt.__webglTexture,i.TEXTURE0+G)}function K(ct,G){const lt=r.get(ct);if(ct.version>0&&lt.__version!==ct.version){ht(lt,ct,G);return}n.bindTexture(i.TEXTURE_CUBE_MAP,lt.__webglTexture,i.TEXTURE0+G)}const et={[R1]:i.REPEAT,[Su]:i.CLAMP_TO_EDGE,[O1]:i.MIRRORED_REPEAT},Q={[fa]:i.NEAREST,[UN]:i.NEAREST_MIPMAP_NEAREST,[T0]:i.NEAREST_MIPMAP_LINEAR,[Is]:i.LINEAR,[Qx]:i.LINEAR_MIPMAP_NEAREST,[Af]:i.LINEAR_MIPMAP_LINEAR},dt={[jH]:i.NEVER,[KH]:i.ALWAYS,[qH]:i.LESS,[WN]:i.LEQUAL,[$H]:i.EQUAL,[YH]:i.GEQUAL,[WH]:i.GREATER,[XH]:i.NOTEQUAL};function yt(ct,G){if(G.type===Jo&&e.has("OES_texture_float_linear")===!1&&(G.magFilter===Is||G.magFilter===Qx||G.magFilter===T0||G.magFilter===Af||G.minFilter===Is||G.minFilter===Qx||G.minFilter===T0||G.minFilter===Af)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(ct,i.TEXTURE_WRAP_S,et[G.wrapS]),i.texParameteri(ct,i.TEXTURE_WRAP_T,et[G.wrapT]),(ct===i.TEXTURE_3D||ct===i.TEXTURE_2D_ARRAY)&&i.texParameteri(ct,i.TEXTURE_WRAP_R,et[G.wrapR]),i.texParameteri(ct,i.TEXTURE_MAG_FILTER,Q[G.magFilter]),i.texParameteri(ct,i.TEXTURE_MIN_FILTER,Q[G.minFilter]),G.compareFunction&&(i.texParameteri(ct,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(ct,i.TEXTURE_COMPARE_FUNC,dt[G.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(G.magFilter===fa||G.minFilter!==T0&&G.minFilter!==Af||G.type===Jo&&e.has("OES_texture_float_linear")===!1)return;if(G.anisotropy>1||r.get(G).__currentAnisotropy){const lt=e.get("EXT_texture_filter_anisotropic");i.texParameterf(ct,lt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(G.anisotropy,s.getMaxAnisotropy())),r.get(G).__currentAnisotropy=G.anisotropy}}}function xt(ct,G){let lt=!1;ct.__webglInit===void 0&&(ct.__webglInit=!0,G.addEventListener("dispose",k));const mt=G.source;let Ct=y.get(mt);Ct===void 0&&(Ct={},y.set(mt,Ct));const bt=X(G);if(bt!==ct.__cacheKey){Ct[bt]===void 0&&(Ct[bt]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,lt=!0),Ct[bt].usedTimes++;const Mt=Ct[ct.__cacheKey];Mt!==void 0&&(Ct[ct.__cacheKey].usedTimes--,Mt.usedTimes===0&&U(G)),ct.__cacheKey=bt,ct.__webglTexture=Ct[bt].texture}return lt}function nt(ct,G,lt){let mt=i.TEXTURE_2D;(G.isDataArrayTexture||G.isCompressedArrayTexture)&&(mt=i.TEXTURE_2D_ARRAY),G.isData3DTexture&&(mt=i.TEXTURE_3D);const Ct=xt(ct,G),bt=G.source;n.bindTexture(mt,ct.__webglTexture,i.TEXTURE0+lt);const Mt=r.get(bt);if(bt.version!==Mt.__version||Ct===!0){n.activeTexture(i.TEXTURE0+lt);const Lt=li.getPrimaries(li.workingColorSpace),Qt=G.colorSpace===Wh?null:li.getPrimaries(G.colorSpace),Oe=G.colorSpace===Wh||Lt===Qt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,G.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,G.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Oe);let jt=S(G.image,!1,s.maxTextureSize);jt=Ce(G,jt);const ve=a.convert(G.format,G.colorSpace),we=a.convert(G.type);let Me=R(G.internalFormat,ve,we,G.colorSpace,G.isVideoTexture);yt(mt,G);let Zt;const Re=G.mipmaps,Ie=G.isVideoTexture!==!0,en=Mt.__version===void 0||Ct===!0,At=bt.dataReady,Te=I(G,jt);if(G.isDepthTexture)Me=A(G.format===ly,G.type),en&&(Ie?n.texStorage2D(i.TEXTURE_2D,1,Me,jt.width,jt.height):n.texImage2D(i.TEXTURE_2D,0,Me,jt.width,jt.height,0,ve,we,null));else if(G.isDataTexture)if(Re.length>0){Ie&&en&&n.texStorage2D(i.TEXTURE_2D,Te,Me,Re[0].width,Re[0].height);for(let Xt=0,re=Re.length;Xt<re;Xt++)Zt=Re[Xt],Ie?At&&n.texSubImage2D(i.TEXTURE_2D,Xt,0,0,Zt.width,Zt.height,ve,we,Zt.data):n.texImage2D(i.TEXTURE_2D,Xt,Me,Zt.width,Zt.height,0,ve,we,Zt.data);G.generateMipmaps=!1}else Ie?(en&&n.texStorage2D(i.TEXTURE_2D,Te,Me,jt.width,jt.height),At&&n.texSubImage2D(i.TEXTURE_2D,0,0,0,jt.width,jt.height,ve,we,jt.data)):n.texImage2D(i.TEXTURE_2D,0,Me,jt.width,jt.height,0,ve,we,jt.data);else if(G.isCompressedTexture)if(G.isCompressedArrayTexture){Ie&&en&&n.texStorage3D(i.TEXTURE_2D_ARRAY,Te,Me,Re[0].width,Re[0].height,jt.depth);for(let Xt=0,re=Re.length;Xt<re;Xt++)if(Zt=Re[Xt],G.format!==Ba)if(ve!==null)if(Ie){if(At)if(G.layerUpdates.size>0){const Ae=DD(Zt.width,Zt.height,G.format,G.type);for(const Ee of G.layerUpdates){const sn=Zt.data.subarray(Ee*Ae/Zt.data.BYTES_PER_ELEMENT,(Ee+1)*Ae/Zt.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Xt,0,0,Ee,Zt.width,Zt.height,1,ve,sn)}G.clearLayerUpdates()}else n.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Xt,0,0,0,Zt.width,Zt.height,jt.depth,ve,Zt.data)}else n.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Xt,Me,Zt.width,Zt.height,jt.depth,0,Zt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ie?At&&n.texSubImage3D(i.TEXTURE_2D_ARRAY,Xt,0,0,0,Zt.width,Zt.height,jt.depth,ve,we,Zt.data):n.texImage3D(i.TEXTURE_2D_ARRAY,Xt,Me,Zt.width,Zt.height,jt.depth,0,ve,we,Zt.data)}else{Ie&&en&&n.texStorage2D(i.TEXTURE_2D,Te,Me,Re[0].width,Re[0].height);for(let Xt=0,re=Re.length;Xt<re;Xt++)Zt=Re[Xt],G.format!==Ba?ve!==null?Ie?At&&n.compressedTexSubImage2D(i.TEXTURE_2D,Xt,0,0,Zt.width,Zt.height,ve,Zt.data):n.compressedTexImage2D(i.TEXTURE_2D,Xt,Me,Zt.width,Zt.height,0,Zt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ie?At&&n.texSubImage2D(i.TEXTURE_2D,Xt,0,0,Zt.width,Zt.height,ve,we,Zt.data):n.texImage2D(i.TEXTURE_2D,Xt,Me,Zt.width,Zt.height,0,ve,we,Zt.data)}else if(G.isDataArrayTexture)if(Ie){if(en&&n.texStorage3D(i.TEXTURE_2D_ARRAY,Te,Me,jt.width,jt.height,jt.depth),At)if(G.layerUpdates.size>0){const Xt=DD(jt.width,jt.height,G.format,G.type);for(const re of G.layerUpdates){const Ae=jt.data.subarray(re*Xt/jt.data.BYTES_PER_ELEMENT,(re+1)*Xt/jt.data.BYTES_PER_ELEMENT);n.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,re,jt.width,jt.height,1,ve,we,Ae)}G.clearLayerUpdates()}else n.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,jt.width,jt.height,jt.depth,ve,we,jt.data)}else n.texImage3D(i.TEXTURE_2D_ARRAY,0,Me,jt.width,jt.height,jt.depth,0,ve,we,jt.data);else if(G.isData3DTexture)Ie?(en&&n.texStorage3D(i.TEXTURE_3D,Te,Me,jt.width,jt.height,jt.depth),At&&n.texSubImage3D(i.TEXTURE_3D,0,0,0,0,jt.width,jt.height,jt.depth,ve,we,jt.data)):n.texImage3D(i.TEXTURE_3D,0,Me,jt.width,jt.height,jt.depth,0,ve,we,jt.data);else if(G.isFramebufferTexture){if(en)if(Ie)n.texStorage2D(i.TEXTURE_2D,Te,Me,jt.width,jt.height);else{let Xt=jt.width,re=jt.height;for(let Ae=0;Ae<Te;Ae++)n.texImage2D(i.TEXTURE_2D,Ae,Me,Xt,re,0,ve,we,null),Xt>>=1,re>>=1}}else if(Re.length>0){if(Ie&&en){const Xt=le(Re[0]);n.texStorage2D(i.TEXTURE_2D,Te,Me,Xt.width,Xt.height)}for(let Xt=0,re=Re.length;Xt<re;Xt++)Zt=Re[Xt],Ie?At&&n.texSubImage2D(i.TEXTURE_2D,Xt,0,0,ve,we,Zt):n.texImage2D(i.TEXTURE_2D,Xt,Me,ve,we,Zt);G.generateMipmaps=!1}else if(Ie){if(en){const Xt=le(jt);n.texStorage2D(i.TEXTURE_2D,Te,Me,Xt.width,Xt.height)}At&&n.texSubImage2D(i.TEXTURE_2D,0,0,0,ve,we,jt)}else n.texImage2D(i.TEXTURE_2D,0,Me,ve,we,jt);T(G)&&b(mt),Mt.__version=bt.version,G.onUpdate&&G.onUpdate(G)}ct.__version=G.version}function ht(ct,G,lt){if(G.image.length!==6)return;const mt=xt(ct,G),Ct=G.source;n.bindTexture(i.TEXTURE_CUBE_MAP,ct.__webglTexture,i.TEXTURE0+lt);const bt=r.get(Ct);if(Ct.version!==bt.__version||mt===!0){n.activeTexture(i.TEXTURE0+lt);const Mt=li.getPrimaries(li.workingColorSpace),Lt=G.colorSpace===Wh?null:li.getPrimaries(G.colorSpace),Qt=G.colorSpace===Wh||Mt===Lt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,G.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,G.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Qt);const Oe=G.isCompressedTexture||G.image[0].isCompressedTexture,jt=G.image[0]&&G.image[0].isDataTexture,ve=[];for(let re=0;re<6;re++)!Oe&&!jt?ve[re]=S(G.image[re],!0,s.maxCubemapSize):ve[re]=jt?G.image[re].image:G.image[re],ve[re]=Ce(G,ve[re]);const we=ve[0],Me=a.convert(G.format,G.colorSpace),Zt=a.convert(G.type),Re=R(G.internalFormat,Me,Zt,G.colorSpace),Ie=G.isVideoTexture!==!0,en=bt.__version===void 0||mt===!0,At=Ct.dataReady;let Te=I(G,we);yt(i.TEXTURE_CUBE_MAP,G);let Xt;if(Oe){Ie&&en&&n.texStorage2D(i.TEXTURE_CUBE_MAP,Te,Re,we.width,we.height);for(let re=0;re<6;re++){Xt=ve[re].mipmaps;for(let Ae=0;Ae<Xt.length;Ae++){const Ee=Xt[Ae];G.format!==Ba?Me!==null?Ie?At&&n.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+re,Ae,0,0,Ee.width,Ee.height,Me,Ee.data):n.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+re,Ae,Re,Ee.width,Ee.height,0,Ee.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ie?At&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+re,Ae,0,0,Ee.width,Ee.height,Me,Zt,Ee.data):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+re,Ae,Re,Ee.width,Ee.height,0,Me,Zt,Ee.data)}}}else{if(Xt=G.mipmaps,Ie&&en){Xt.length>0&&Te++;const re=le(ve[0]);n.texStorage2D(i.TEXTURE_CUBE_MAP,Te,Re,re.width,re.height)}for(let re=0;re<6;re++)if(jt){Ie?At&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+re,0,0,0,ve[re].width,ve[re].height,Me,Zt,ve[re].data):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+re,0,Re,ve[re].width,ve[re].height,0,Me,Zt,ve[re].data);for(let Ae=0;Ae<Xt.length;Ae++){const sn=Xt[Ae].image[re].image;Ie?At&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+re,Ae+1,0,0,sn.width,sn.height,Me,Zt,sn.data):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+re,Ae+1,Re,sn.width,sn.height,0,Me,Zt,sn.data)}}else{Ie?At&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+re,0,0,0,Me,Zt,ve[re]):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+re,0,Re,Me,Zt,ve[re]);for(let Ae=0;Ae<Xt.length;Ae++){const Ee=Xt[Ae];Ie?At&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+re,Ae+1,0,0,Me,Zt,Ee.image[re]):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+re,Ae+1,Re,Me,Zt,Ee.image[re])}}}T(G)&&b(i.TEXTURE_CUBE_MAP),bt.__version=Ct.version,G.onUpdate&&G.onUpdate(G)}ct.__version=G.version}function ft(ct,G,lt,mt,Ct,bt){const Mt=a.convert(lt.format,lt.colorSpace),Lt=a.convert(lt.type),Qt=R(lt.internalFormat,Mt,Lt,lt.colorSpace),Oe=r.get(G),jt=r.get(lt);if(jt.__renderTarget=G,!Oe.__hasExternalTextures){const ve=Math.max(1,G.width>>bt),we=Math.max(1,G.height>>bt);Ct===i.TEXTURE_3D||Ct===i.TEXTURE_2D_ARRAY?n.texImage3D(Ct,bt,Qt,ve,we,G.depth,0,Mt,Lt,null):n.texImage2D(Ct,bt,Qt,ve,we,0,Mt,Lt,null)}n.bindFramebuffer(i.FRAMEBUFFER,ct),se(G)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,mt,Ct,jt.__webglTexture,0,Jt(G)):(Ct===i.TEXTURE_2D||Ct>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Ct<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,mt,Ct,jt.__webglTexture,bt),n.bindFramebuffer(i.FRAMEBUFFER,null)}function gt(ct,G,lt){if(i.bindRenderbuffer(i.RENDERBUFFER,ct),G.depthBuffer){const mt=G.depthTexture,Ct=mt&&mt.isDepthTexture?mt.type:null,bt=A(G.stencilBuffer,Ct),Mt=G.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Lt=Jt(G);se(G)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Lt,bt,G.width,G.height):lt?i.renderbufferStorageMultisample(i.RENDERBUFFER,Lt,bt,G.width,G.height):i.renderbufferStorage(i.RENDERBUFFER,bt,G.width,G.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,Mt,i.RENDERBUFFER,ct)}else{const mt=G.textures;for(let Ct=0;Ct<mt.length;Ct++){const bt=mt[Ct],Mt=a.convert(bt.format,bt.colorSpace),Lt=a.convert(bt.type),Qt=R(bt.internalFormat,Mt,Lt,bt.colorSpace),Oe=Jt(G);lt&&se(G)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Oe,Qt,G.width,G.height):se(G)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Oe,Qt,G.width,G.height):i.renderbufferStorage(i.RENDERBUFFER,Qt,G.width,G.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function wt(ct,G){if(G&&G.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(i.FRAMEBUFFER,ct),!(G.depthTexture&&G.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const mt=r.get(G.depthTexture);mt.__renderTarget=G,(!mt.__webglTexture||G.depthTexture.image.width!==G.width||G.depthTexture.image.height!==G.height)&&(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=!0),J(G.depthTexture,0);const Ct=mt.__webglTexture,bt=Jt(G);if(G.depthTexture.format===Xg)se(G)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Ct,0,bt):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Ct,0);else if(G.depthTexture.format===ly)se(G)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Ct,0,bt):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Ct,0);else throw new Error("Unknown depthTexture format")}function Kt(ct){const G=r.get(ct),lt=ct.isWebGLCubeRenderTarget===!0;if(G.__boundDepthTexture!==ct.depthTexture){const mt=ct.depthTexture;if(G.__depthDisposeCallback&&G.__depthDisposeCallback(),mt){const Ct=()=>{delete G.__boundDepthTexture,delete G.__depthDisposeCallback,mt.removeEventListener("dispose",Ct)};mt.addEventListener("dispose",Ct),G.__depthDisposeCallback=Ct}G.__boundDepthTexture=mt}if(ct.depthTexture&&!G.__autoAllocateDepthBuffer){if(lt)throw new Error("target.depthTexture not supported in Cube render targets");wt(G.__webglFramebuffer,ct)}else if(lt){G.__webglDepthbuffer=[];for(let mt=0;mt<6;mt++)if(n.bindFramebuffer(i.FRAMEBUFFER,G.__webglFramebuffer[mt]),G.__webglDepthbuffer[mt]===void 0)G.__webglDepthbuffer[mt]=i.createRenderbuffer(),gt(G.__webglDepthbuffer[mt],ct,!1);else{const Ct=ct.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,bt=G.__webglDepthbuffer[mt];i.bindRenderbuffer(i.RENDERBUFFER,bt),i.framebufferRenderbuffer(i.FRAMEBUFFER,Ct,i.RENDERBUFFER,bt)}}else if(n.bindFramebuffer(i.FRAMEBUFFER,G.__webglFramebuffer),G.__webglDepthbuffer===void 0)G.__webglDepthbuffer=i.createRenderbuffer(),gt(G.__webglDepthbuffer,ct,!1);else{const mt=ct.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ct=G.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Ct),i.framebufferRenderbuffer(i.FRAMEBUFFER,mt,i.RENDERBUFFER,Ct)}n.bindFramebuffer(i.FRAMEBUFFER,null)}function zt(ct,G,lt){const mt=r.get(ct);G!==void 0&&ft(mt.__webglFramebuffer,ct,ct.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),lt!==void 0&&Kt(ct)}function te(ct){const G=ct.texture,lt=r.get(ct),mt=r.get(G);ct.addEventListener("dispose",N);const Ct=ct.textures,bt=ct.isWebGLCubeRenderTarget===!0,Mt=Ct.length>1;if(Mt||(mt.__webglTexture===void 0&&(mt.__webglTexture=i.createTexture()),mt.__version=G.version,o.memory.textures++),bt){lt.__webglFramebuffer=[];for(let Lt=0;Lt<6;Lt++)if(G.mipmaps&&G.mipmaps.length>0){lt.__webglFramebuffer[Lt]=[];for(let Qt=0;Qt<G.mipmaps.length;Qt++)lt.__webglFramebuffer[Lt][Qt]=i.createFramebuffer()}else lt.__webglFramebuffer[Lt]=i.createFramebuffer()}else{if(G.mipmaps&&G.mipmaps.length>0){lt.__webglFramebuffer=[];for(let Lt=0;Lt<G.mipmaps.length;Lt++)lt.__webglFramebuffer[Lt]=i.createFramebuffer()}else lt.__webglFramebuffer=i.createFramebuffer();if(Mt)for(let Lt=0,Qt=Ct.length;Lt<Qt;Lt++){const Oe=r.get(Ct[Lt]);Oe.__webglTexture===void 0&&(Oe.__webglTexture=i.createTexture(),o.memory.textures++)}if(ct.samples>0&&se(ct)===!1){lt.__webglMultisampledFramebuffer=i.createFramebuffer(),lt.__webglColorRenderbuffer=[],n.bindFramebuffer(i.FRAMEBUFFER,lt.__webglMultisampledFramebuffer);for(let Lt=0;Lt<Ct.length;Lt++){const Qt=Ct[Lt];lt.__webglColorRenderbuffer[Lt]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,lt.__webglColorRenderbuffer[Lt]);const Oe=a.convert(Qt.format,Qt.colorSpace),jt=a.convert(Qt.type),ve=R(Qt.internalFormat,Oe,jt,Qt.colorSpace,ct.isXRRenderTarget===!0),we=Jt(ct);i.renderbufferStorageMultisample(i.RENDERBUFFER,we,ve,ct.width,ct.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Lt,i.RENDERBUFFER,lt.__webglColorRenderbuffer[Lt])}i.bindRenderbuffer(i.RENDERBUFFER,null),ct.depthBuffer&&(lt.__webglDepthRenderbuffer=i.createRenderbuffer(),gt(lt.__webglDepthRenderbuffer,ct,!0)),n.bindFramebuffer(i.FRAMEBUFFER,null)}}if(bt){n.bindTexture(i.TEXTURE_CUBE_MAP,mt.__webglTexture),yt(i.TEXTURE_CUBE_MAP,G);for(let Lt=0;Lt<6;Lt++)if(G.mipmaps&&G.mipmaps.length>0)for(let Qt=0;Qt<G.mipmaps.length;Qt++)ft(lt.__webglFramebuffer[Lt][Qt],ct,G,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,Qt);else ft(lt.__webglFramebuffer[Lt],ct,G,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,0);T(G)&&b(i.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Mt){for(let Lt=0,Qt=Ct.length;Lt<Qt;Lt++){const Oe=Ct[Lt],jt=r.get(Oe);n.bindTexture(i.TEXTURE_2D,jt.__webglTexture),yt(i.TEXTURE_2D,Oe),ft(lt.__webglFramebuffer,ct,Oe,i.COLOR_ATTACHMENT0+Lt,i.TEXTURE_2D,0),T(Oe)&&b(i.TEXTURE_2D)}n.unbindTexture()}else{let Lt=i.TEXTURE_2D;if((ct.isWebGL3DRenderTarget||ct.isWebGLArrayRenderTarget)&&(Lt=ct.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),n.bindTexture(Lt,mt.__webglTexture),yt(Lt,G),G.mipmaps&&G.mipmaps.length>0)for(let Qt=0;Qt<G.mipmaps.length;Qt++)ft(lt.__webglFramebuffer[Qt],ct,G,i.COLOR_ATTACHMENT0,Lt,Qt);else ft(lt.__webglFramebuffer,ct,G,i.COLOR_ATTACHMENT0,Lt,0);T(G)&&b(Lt),n.unbindTexture()}ct.depthBuffer&&Kt(ct)}function Pt(ct){const G=ct.textures;for(let lt=0,mt=G.length;lt<mt;lt++){const Ct=G[lt];if(T(Ct)){const bt=M(ct),Mt=r.get(Ct).__webglTexture;n.bindTexture(bt,Mt),b(bt),n.unbindTexture()}}}const Ht=[],at=[];function ue(ct){if(ct.samples>0){if(se(ct)===!1){const G=ct.textures,lt=ct.width,mt=ct.height;let Ct=i.COLOR_BUFFER_BIT;const bt=ct.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Mt=r.get(ct),Lt=G.length>1;if(Lt)for(let Qt=0;Qt<G.length;Qt++)n.bindFramebuffer(i.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Qt,i.RENDERBUFFER,null),n.bindFramebuffer(i.FRAMEBUFFER,Mt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Qt,i.TEXTURE_2D,null,0);n.bindFramebuffer(i.READ_FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),n.bindFramebuffer(i.DRAW_FRAMEBUFFER,Mt.__webglFramebuffer);for(let Qt=0;Qt<G.length;Qt++){if(ct.resolveDepthBuffer&&(ct.depthBuffer&&(Ct|=i.DEPTH_BUFFER_BIT),ct.stencilBuffer&&ct.resolveStencilBuffer&&(Ct|=i.STENCIL_BUFFER_BIT)),Lt){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Mt.__webglColorRenderbuffer[Qt]);const Oe=r.get(G[Qt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Oe,0)}i.blitFramebuffer(0,0,lt,mt,0,0,lt,mt,Ct,i.NEAREST),u===!0&&(Ht.length=0,at.length=0,Ht.push(i.COLOR_ATTACHMENT0+Qt),ct.depthBuffer&&ct.resolveDepthBuffer===!1&&(Ht.push(bt),at.push(bt),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,at)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Ht))}if(n.bindFramebuffer(i.READ_FRAMEBUFFER,null),n.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Lt)for(let Qt=0;Qt<G.length;Qt++){n.bindFramebuffer(i.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Qt,i.RENDERBUFFER,Mt.__webglColorRenderbuffer[Qt]);const Oe=r.get(G[Qt]).__webglTexture;n.bindFramebuffer(i.FRAMEBUFFER,Mt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Qt,i.TEXTURE_2D,Oe,0)}n.bindFramebuffer(i.DRAW_FRAMEBUFFER,Mt.__webglMultisampledFramebuffer)}else if(ct.depthBuffer&&ct.resolveDepthBuffer===!1&&u){const G=ct.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[G])}}}function Jt(ct){return Math.min(s.maxSamples,ct.samples)}function se(ct){const G=r.get(ct);return ct.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&G.__useRenderToTexture!==!1}function ae(ct){const G=o.render.frame;d.get(ct)!==G&&(d.set(ct,G),ct.update())}function Ce(ct,G){const lt=ct.colorSpace,mt=ct.format,Ct=ct.type;return ct.isCompressedTexture===!0||ct.isVideoTexture===!0||lt!==tm&&lt!==Wh&&(li.getTransfer(lt)===ki?(mt!==Ba||Ct!==bc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",lt)),G}function le(ct){return typeof HTMLImageElement<"u"&&ct instanceof HTMLImageElement?(f.width=ct.naturalWidth||ct.width,f.height=ct.naturalHeight||ct.height):typeof VideoFrame<"u"&&ct instanceof VideoFrame?(f.width=ct.displayWidth,f.height=ct.displayHeight):(f.width=ct.width,f.height=ct.height),f}this.allocateTextureUnit=V,this.resetTextureUnits=H,this.setTexture2D=J,this.setTexture2DArray=q,this.setTexture3D=W,this.setTextureCube=K,this.rebindTextures=zt,this.setupRenderTarget=te,this.updateRenderTargetMipmap=Pt,this.updateMultisampleRenderTarget=ue,this.setupDepthRenderbuffer=Kt,this.setupFrameBufferTexture=ft,this.useMultisampledRTT=se}function r9(i,e){function n(r,s=Wh){let a;const o=li.getTransfer(s);if(r===bc)return i.UNSIGNED_BYTE;if(r===CC)return i.UNSIGNED_SHORT_4_4_4_4;if(r===RC)return i.UNSIGNED_SHORT_5_5_5_1;if(r===BN)return i.UNSIGNED_INT_5_9_9_9_REV;if(r===kN)return i.BYTE;if(r===zN)return i.SHORT;if(r===$0)return i.UNSIGNED_SHORT;if(r===MC)return i.INT;if(r===fd)return i.UNSIGNED_INT;if(r===Jo)return i.FLOAT;if(r===M_)return i.HALF_FLOAT;if(r===FN)return i.ALPHA;if(r===VN)return i.RGB;if(r===Ba)return i.RGBA;if(r===HN)return i.LUMINANCE;if(r===GN)return i.LUMINANCE_ALPHA;if(r===Xg)return i.DEPTH_COMPONENT;if(r===ly)return i.DEPTH_STENCIL;if(r===OC)return i.RED;if(r===AS)return i.RED_INTEGER;if(r===jN)return i.RG;if(r===IC)return i.RG_INTEGER;if(r===DC)return i.RGBA_INTEGER;if(r===Jx||r===t1||r===e1||r===n1)if(o===ki)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(r===Jx)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===t1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===e1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===n1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(r===Jx)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===t1)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===e1)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===n1)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===VA||r===HA||r===GA||r===jA)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(r===VA)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===HA)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===GA)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===jA)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===qA||r===$A||r===WA)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(r===qA||r===$A)return o===ki?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(r===WA)return o===ki?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===XA||r===YA||r===KA||r===ZA||r===QA||r===JA||r===tM||r===eM||r===nM||r===iM||r===rM||r===sM||r===aM||r===oM)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(r===XA)return o===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===YA)return o===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===KA)return o===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===ZA)return o===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===QA)return o===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===JA)return o===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===tM)return o===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===eM)return o===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===nM)return o===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===iM)return o===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===rM)return o===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===sM)return o===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===aM)return o===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===oM)return o===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===i1||r===lM||r===uM)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(r===i1)return o===ki?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===lM)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===uM)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===qN||r===cM||r===fM||r===hM)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(r===i1)return a.COMPRESSED_RED_RGTC1_EXT;if(r===cM)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===fM)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===hM)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===oy?i.UNSIGNED_INT_24_8:i[r]!==void 0?i[r]:null}return{convert:n}}const git=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,yit=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class vit{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const s=new Xr,a=e.properties.get(s);a.__webglTexture=n.texture,(n.depthNear!==r.depthNear||n.depthFar!==r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new Au({vertexShader:git,fragmentShader:yit,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new $r(new R_(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class _it extends Xf{constructor(e,n){super();const r=this;let s=null,a=1,o=null,l="local-floor",u=1,f=null,d=null,m=null,y=null,_=null,x=null;const S=new vit,T=n.getContextAttributes();let b=null,M=null;const R=[],A=[],I=new de;let k=null;const N=new Ws;N.viewport=new di;const L=new Ws;L.viewport=new di;const U=[N,L],O=new X8;let F=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(nt){let ht=R[nt];return ht===void 0&&(ht=new eA,R[nt]=ht),ht.getTargetRaySpace()},this.getControllerGrip=function(nt){let ht=R[nt];return ht===void 0&&(ht=new eA,R[nt]=ht),ht.getGripSpace()},this.getHand=function(nt){let ht=R[nt];return ht===void 0&&(ht=new eA,R[nt]=ht),ht.getHandSpace()};function V(nt){const ht=A.indexOf(nt.inputSource);if(ht===-1)return;const ft=R[ht];ft!==void 0&&(ft.update(nt.inputSource,nt.frame,f||o),ft.dispatchEvent({type:nt.type,data:nt.inputSource}))}function X(){s.removeEventListener("select",V),s.removeEventListener("selectstart",V),s.removeEventListener("selectend",V),s.removeEventListener("squeeze",V),s.removeEventListener("squeezestart",V),s.removeEventListener("squeezeend",V),s.removeEventListener("end",X),s.removeEventListener("inputsourceschange",J);for(let nt=0;nt<R.length;nt++){const ht=A[nt];ht!==null&&(A[nt]=null,R[nt].disconnect(ht))}F=null,H=null,S.reset(),e.setRenderTarget(b),_=null,y=null,m=null,s=null,M=null,xt.stop(),r.isPresenting=!1,e.setPixelRatio(k),e.setSize(I.width,I.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(nt){a=nt,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(nt){l=nt,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||o},this.setReferenceSpace=function(nt){f=nt},this.getBaseLayer=function(){return y!==null?y:_},this.getBinding=function(){return m},this.getFrame=function(){return x},this.getSession=function(){return s},this.setSession=async function(nt){if(s=nt,s!==null){if(b=e.getRenderTarget(),s.addEventListener("select",V),s.addEventListener("selectstart",V),s.addEventListener("selectend",V),s.addEventListener("squeeze",V),s.addEventListener("squeezestart",V),s.addEventListener("squeezeend",V),s.addEventListener("end",X),s.addEventListener("inputsourceschange",J),T.xrCompatible!==!0&&await n.makeXRCompatible(),k=e.getPixelRatio(),e.getSize(I),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let ft=null,gt=null,wt=null;T.depth&&(wt=T.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,ft=T.stencil?ly:Xg,gt=T.stencil?oy:fd);const Kt={colorFormat:n.RGBA8,depthFormat:wt,scaleFactor:a};m=new XRWebGLBinding(s,n),y=m.createProjectionLayer(Kt),s.updateRenderState({layers:[y]}),e.setPixelRatio(1),e.setSize(y.textureWidth,y.textureHeight,!1),M=new Vf(y.textureWidth,y.textureHeight,{format:Ba,type:bc,depthTexture:new e3(y.textureWidth,y.textureHeight,gt,void 0,void 0,void 0,void 0,void 0,void 0,ft),stencilBuffer:T.stencil,colorSpace:e.outputColorSpace,samples:T.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}else{const ft={antialias:T.antialias,alpha:!0,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:a};_=new XRWebGLLayer(s,n,ft),s.updateRenderState({baseLayer:_}),e.setPixelRatio(1),e.setSize(_.framebufferWidth,_.framebufferHeight,!1),M=new Vf(_.framebufferWidth,_.framebufferHeight,{format:Ba,type:bc,colorSpace:e.outputColorSpace,stencilBuffer:T.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}M.isXRRenderTarget=!0,this.setFoveation(u),f=null,o=await s.requestReferenceSpace(l),xt.setContext(s),xt.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return S.getDepthTexture()};function J(nt){for(let ht=0;ht<nt.removed.length;ht++){const ft=nt.removed[ht],gt=A.indexOf(ft);gt>=0&&(A[gt]=null,R[gt].disconnect(ft))}for(let ht=0;ht<nt.added.length;ht++){const ft=nt.added[ht];let gt=A.indexOf(ft);if(gt===-1){for(let Kt=0;Kt<R.length;Kt++)if(Kt>=A.length){A.push(ft),gt=Kt;break}else if(A[Kt]===null){A[Kt]=ft,gt=Kt;break}if(gt===-1)break}const wt=R[gt];wt&&wt.connect(ft)}}const q=new pt,W=new pt;function K(nt,ht,ft){q.setFromMatrixPosition(ht.matrixWorld),W.setFromMatrixPosition(ft.matrixWorld);const gt=q.distanceTo(W),wt=ht.projectionMatrix.elements,Kt=ft.projectionMatrix.elements,zt=wt[14]/(wt[10]-1),te=wt[14]/(wt[10]+1),Pt=(wt[9]+1)/wt[5],Ht=(wt[9]-1)/wt[5],at=(wt[8]-1)/wt[0],ue=(Kt[8]+1)/Kt[0],Jt=zt*at,se=zt*ue,ae=gt/(-at+ue),Ce=ae*-at;if(ht.matrixWorld.decompose(nt.position,nt.quaternion,nt.scale),nt.translateX(Ce),nt.translateZ(ae),nt.matrixWorld.compose(nt.position,nt.quaternion,nt.scale),nt.matrixWorldInverse.copy(nt.matrixWorld).invert(),wt[10]===-1)nt.projectionMatrix.copy(ht.projectionMatrix),nt.projectionMatrixInverse.copy(ht.projectionMatrixInverse);else{const le=zt+ae,ct=te+ae,G=Jt-Ce,lt=se+(gt-Ce),mt=Pt*te/ct*le,Ct=Ht*te/ct*le;nt.projectionMatrix.makePerspective(G,lt,mt,Ct,le,ct),nt.projectionMatrixInverse.copy(nt.projectionMatrix).invert()}}function et(nt,ht){ht===null?nt.matrixWorld.copy(nt.matrix):nt.matrixWorld.multiplyMatrices(ht.matrixWorld,nt.matrix),nt.matrixWorldInverse.copy(nt.matrixWorld).invert()}this.updateCamera=function(nt){if(s===null)return;let ht=nt.near,ft=nt.far;S.texture!==null&&(S.depthNear>0&&(ht=S.depthNear),S.depthFar>0&&(ft=S.depthFar)),O.near=L.near=N.near=ht,O.far=L.far=N.far=ft,(F!==O.near||H!==O.far)&&(s.updateRenderState({depthNear:O.near,depthFar:O.far}),F=O.near,H=O.far),N.layers.mask=nt.layers.mask|2,L.layers.mask=nt.layers.mask|4,O.layers.mask=N.layers.mask|L.layers.mask;const gt=nt.parent,wt=O.cameras;et(O,gt);for(let Kt=0;Kt<wt.length;Kt++)et(wt[Kt],gt);wt.length===2?K(O,N,L):O.projectionMatrix.copy(N.projectionMatrix),Q(nt,O,gt)};function Q(nt,ht,ft){ft===null?nt.matrix.copy(ht.matrixWorld):(nt.matrix.copy(ft.matrixWorld),nt.matrix.invert(),nt.matrix.multiply(ht.matrixWorld)),nt.matrix.decompose(nt.position,nt.quaternion,nt.scale),nt.updateMatrixWorld(!0),nt.projectionMatrix.copy(ht.projectionMatrix),nt.projectionMatrixInverse.copy(ht.projectionMatrixInverse),nt.isPerspectiveCamera&&(nt.fov=W0*2*Math.atan(1/nt.projectionMatrix.elements[5]),nt.zoom=1)}this.getCamera=function(){return O},this.getFoveation=function(){if(!(y===null&&_===null))return u},this.setFoveation=function(nt){u=nt,y!==null&&(y.fixedFoveation=nt),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=nt)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(O)};let dt=null;function yt(nt,ht){if(d=ht.getViewerPose(f||o),x=ht,d!==null){const ft=d.views;_!==null&&(e.setRenderTargetFramebuffer(M,_.framebuffer),e.setRenderTarget(M));let gt=!1;ft.length!==O.cameras.length&&(O.cameras.length=0,gt=!0);for(let zt=0;zt<ft.length;zt++){const te=ft[zt];let Pt=null;if(_!==null)Pt=_.getViewport(te);else{const at=m.getViewSubImage(y,te);Pt=at.viewport,zt===0&&(e.setRenderTargetTextures(M,at.colorTexture,y.ignoreDepthValues?void 0:at.depthStencilTexture),e.setRenderTarget(M))}let Ht=U[zt];Ht===void 0&&(Ht=new Ws,Ht.layers.enable(zt),Ht.viewport=new di,U[zt]=Ht),Ht.matrix.fromArray(te.transform.matrix),Ht.matrix.decompose(Ht.position,Ht.quaternion,Ht.scale),Ht.projectionMatrix.fromArray(te.projectionMatrix),Ht.projectionMatrixInverse.copy(Ht.projectionMatrix).invert(),Ht.viewport.set(Pt.x,Pt.y,Pt.width,Pt.height),zt===0&&(O.matrix.copy(Ht.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale)),gt===!0&&O.cameras.push(Ht)}const wt=s.enabledFeatures;if(wt&&wt.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&m){const zt=m.getDepthInformation(ft[0]);zt&&zt.isValid&&zt.texture&&S.init(e,zt,s.renderState)}}for(let ft=0;ft<R.length;ft++){const gt=A[ft],wt=R[ft];gt!==null&&wt!==void 0&&wt.update(gt,ht,f||o)}dt&&dt(nt,ht),ht.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ht}),x=null}const xt=new J8;xt.setAnimationLoop(yt),this.setAnimationLoop=function(nt){dt=nt},this.dispose=function(){}}}const _g=new Bl,bit=new cn;function xit(i,e){function n(T,b){T.matrixAutoUpdate===!0&&T.updateMatrix(),b.value.copy(T.matrix)}function r(T,b){b.color.getRGB(T.fogColor.value,n8(i)),b.isFog?(T.fogNear.value=b.near,T.fogFar.value=b.far):b.isFogExp2&&(T.fogDensity.value=b.density)}function s(T,b,M,R,A){b.isMeshBasicMaterial||b.isMeshLambertMaterial?a(T,b):b.isMeshToonMaterial?(a(T,b),m(T,b)):b.isMeshPhongMaterial?(a(T,b),d(T,b)):b.isMeshStandardMaterial?(a(T,b),y(T,b),b.isMeshPhysicalMaterial&&_(T,b,A)):b.isMeshMatcapMaterial?(a(T,b),x(T,b)):b.isMeshDepthMaterial?a(T,b):b.isMeshDistanceMaterial?(a(T,b),S(T,b)):b.isMeshNormalMaterial?a(T,b):b.isLineBasicMaterial?(o(T,b),b.isLineDashedMaterial&&l(T,b)):b.isPointsMaterial?u(T,b,M,R):b.isSpriteMaterial?f(T,b):b.isShadowMaterial?(T.color.value.copy(b.color),T.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function a(T,b){T.opacity.value=b.opacity,b.color&&T.diffuse.value.copy(b.color),b.emissive&&T.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(T.map.value=b.map,n(b.map,T.mapTransform)),b.alphaMap&&(T.alphaMap.value=b.alphaMap,n(b.alphaMap,T.alphaMapTransform)),b.bumpMap&&(T.bumpMap.value=b.bumpMap,n(b.bumpMap,T.bumpMapTransform),T.bumpScale.value=b.bumpScale,b.side===_o&&(T.bumpScale.value*=-1)),b.normalMap&&(T.normalMap.value=b.normalMap,n(b.normalMap,T.normalMapTransform),T.normalScale.value.copy(b.normalScale),b.side===_o&&T.normalScale.value.negate()),b.displacementMap&&(T.displacementMap.value=b.displacementMap,n(b.displacementMap,T.displacementMapTransform),T.displacementScale.value=b.displacementScale,T.displacementBias.value=b.displacementBias),b.emissiveMap&&(T.emissiveMap.value=b.emissiveMap,n(b.emissiveMap,T.emissiveMapTransform)),b.specularMap&&(T.specularMap.value=b.specularMap,n(b.specularMap,T.specularMapTransform)),b.alphaTest>0&&(T.alphaTest.value=b.alphaTest);const M=e.get(b),R=M.envMap,A=M.envMapRotation;R&&(T.envMap.value=R,_g.copy(A),_g.x*=-1,_g.y*=-1,_g.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(_g.y*=-1,_g.z*=-1),T.envMapRotation.value.setFromMatrix4(bit.makeRotationFromEuler(_g)),T.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,T.reflectivity.value=b.reflectivity,T.ior.value=b.ior,T.refractionRatio.value=b.refractionRatio),b.lightMap&&(T.lightMap.value=b.lightMap,T.lightMapIntensity.value=b.lightMapIntensity,n(b.lightMap,T.lightMapTransform)),b.aoMap&&(T.aoMap.value=b.aoMap,T.aoMapIntensity.value=b.aoMapIntensity,n(b.aoMap,T.aoMapTransform))}function o(T,b){T.diffuse.value.copy(b.color),T.opacity.value=b.opacity,b.map&&(T.map.value=b.map,n(b.map,T.mapTransform))}function l(T,b){T.dashSize.value=b.dashSize,T.totalSize.value=b.dashSize+b.gapSize,T.scale.value=b.scale}function u(T,b,M,R){T.diffuse.value.copy(b.color),T.opacity.value=b.opacity,T.size.value=b.size*M,T.scale.value=R*.5,b.map&&(T.map.value=b.map,n(b.map,T.uvTransform)),b.alphaMap&&(T.alphaMap.value=b.alphaMap,n(b.alphaMap,T.alphaMapTransform)),b.alphaTest>0&&(T.alphaTest.value=b.alphaTest)}function f(T,b){T.diffuse.value.copy(b.color),T.opacity.value=b.opacity,T.rotation.value=b.rotation,b.map&&(T.map.value=b.map,n(b.map,T.mapTransform)),b.alphaMap&&(T.alphaMap.value=b.alphaMap,n(b.alphaMap,T.alphaMapTransform)),b.alphaTest>0&&(T.alphaTest.value=b.alphaTest)}function d(T,b){T.specular.value.copy(b.specular),T.shininess.value=Math.max(b.shininess,1e-4)}function m(T,b){b.gradientMap&&(T.gradientMap.value=b.gradientMap)}function y(T,b){T.metalness.value=b.metalness,b.metalnessMap&&(T.metalnessMap.value=b.metalnessMap,n(b.metalnessMap,T.metalnessMapTransform)),T.roughness.value=b.roughness,b.roughnessMap&&(T.roughnessMap.value=b.roughnessMap,n(b.roughnessMap,T.roughnessMapTransform)),b.envMap&&(T.envMapIntensity.value=b.envMapIntensity)}function _(T,b,M){T.ior.value=b.ior,b.sheen>0&&(T.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),T.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(T.sheenColorMap.value=b.sheenColorMap,n(b.sheenColorMap,T.sheenColorMapTransform)),b.sheenRoughnessMap&&(T.sheenRoughnessMap.value=b.sheenRoughnessMap,n(b.sheenRoughnessMap,T.sheenRoughnessMapTransform))),b.clearcoat>0&&(T.clearcoat.value=b.clearcoat,T.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(T.clearcoatMap.value=b.clearcoatMap,n(b.clearcoatMap,T.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,n(b.clearcoatRoughnessMap,T.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(T.clearcoatNormalMap.value=b.clearcoatNormalMap,n(b.clearcoatNormalMap,T.clearcoatNormalMapTransform),T.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===_o&&T.clearcoatNormalScale.value.negate())),b.dispersion>0&&(T.dispersion.value=b.dispersion),b.iridescence>0&&(T.iridescence.value=b.iridescence,T.iridescenceIOR.value=b.iridescenceIOR,T.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(T.iridescenceMap.value=b.iridescenceMap,n(b.iridescenceMap,T.iridescenceMapTransform)),b.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=b.iridescenceThicknessMap,n(b.iridescenceThicknessMap,T.iridescenceThicknessMapTransform))),b.transmission>0&&(T.transmission.value=b.transmission,T.transmissionSamplerMap.value=M.texture,T.transmissionSamplerSize.value.set(M.width,M.height),b.transmissionMap&&(T.transmissionMap.value=b.transmissionMap,n(b.transmissionMap,T.transmissionMapTransform)),T.thickness.value=b.thickness,b.thicknessMap&&(T.thicknessMap.value=b.thicknessMap,n(b.thicknessMap,T.thicknessMapTransform)),T.attenuationDistance.value=b.attenuationDistance,T.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(T.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(T.anisotropyMap.value=b.anisotropyMap,n(b.anisotropyMap,T.anisotropyMapTransform))),T.specularIntensity.value=b.specularIntensity,T.specularColor.value.copy(b.specularColor),b.specularColorMap&&(T.specularColorMap.value=b.specularColorMap,n(b.specularColorMap,T.specularColorMapTransform)),b.specularIntensityMap&&(T.specularIntensityMap.value=b.specularIntensityMap,n(b.specularIntensityMap,T.specularIntensityMapTransform))}function x(T,b){b.matcap&&(T.matcap.value=b.matcap)}function S(T,b){const M=e.get(b).light;T.referencePosition.value.setFromMatrixPosition(M.matrixWorld),T.nearDistance.value=M.shadow.camera.near,T.farDistance.value=M.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:s}}function Sit(i,e,n,r){let s={},a={},o=[];const l=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function u(M,R){const A=R.program;r.uniformBlockBinding(M,A)}function f(M,R){let A=s[M.id];A===void 0&&(x(M),A=d(M),s[M.id]=A,M.addEventListener("dispose",T));const I=R.program;r.updateUBOMapping(M,I);const k=e.render.frame;a[M.id]!==k&&(y(M),a[M.id]=k)}function d(M){const R=m();M.__bindingPointIndex=R;const A=i.createBuffer(),I=M.__size,k=M.usage;return i.bindBuffer(i.UNIFORM_BUFFER,A),i.bufferData(i.UNIFORM_BUFFER,I,k),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,R,A),A}function m(){for(let M=0;M<l;M++)if(o.indexOf(M)===-1)return o.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(M){const R=s[M.id],A=M.uniforms,I=M.__cache;i.bindBuffer(i.UNIFORM_BUFFER,R);for(let k=0,N=A.length;k<N;k++){const L=Array.isArray(A[k])?A[k]:[A[k]];for(let U=0,O=L.length;U<O;U++){const F=L[U];if(_(F,k,U,I)===!0){const H=F.__offset,V=Array.isArray(F.value)?F.value:[F.value];let X=0;for(let J=0;J<V.length;J++){const q=V[J],W=S(q);typeof q=="number"||typeof q=="boolean"?(F.__data[0]=q,i.bufferSubData(i.UNIFORM_BUFFER,H+X,F.__data)):q.isMatrix3?(F.__data[0]=q.elements[0],F.__data[1]=q.elements[1],F.__data[2]=q.elements[2],F.__data[3]=0,F.__data[4]=q.elements[3],F.__data[5]=q.elements[4],F.__data[6]=q.elements[5],F.__data[7]=0,F.__data[8]=q.elements[6],F.__data[9]=q.elements[7],F.__data[10]=q.elements[8],F.__data[11]=0):(q.toArray(F.__data,X),X+=W.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,H,F.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function _(M,R,A,I){const k=M.value,N=R+"_"+A;if(I[N]===void 0)return typeof k=="number"||typeof k=="boolean"?I[N]=k:I[N]=k.clone(),!0;{const L=I[N];if(typeof k=="number"||typeof k=="boolean"){if(L!==k)return I[N]=k,!0}else if(L.equals(k)===!1)return L.copy(k),!0}return!1}function x(M){const R=M.uniforms;let A=0;const I=16;for(let N=0,L=R.length;N<L;N++){const U=Array.isArray(R[N])?R[N]:[R[N]];for(let O=0,F=U.length;O<F;O++){const H=U[O],V=Array.isArray(H.value)?H.value:[H.value];for(let X=0,J=V.length;X<J;X++){const q=V[X],W=S(q),K=A%I,et=K%W.boundary,Q=K+et;A+=et,Q!==0&&I-Q<W.storage&&(A+=I-Q),H.__data=new Float32Array(W.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=A,A+=W.storage}}}const k=A%I;return k>0&&(A+=I-k),M.__size=A,M.__cache={},this}function S(M){const R={boundary:0,storage:0};return typeof M=="number"||typeof M=="boolean"?(R.boundary=4,R.storage=4):M.isVector2?(R.boundary=8,R.storage=8):M.isVector3||M.isColor?(R.boundary=16,R.storage=12):M.isVector4?(R.boundary=16,R.storage=16):M.isMatrix3?(R.boundary=48,R.storage=48):M.isMatrix4?(R.boundary=64,R.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),R}function T(M){const R=M.target;R.removeEventListener("dispose",T);const A=o.indexOf(R.__bindingPointIndex);o.splice(A,1),i.deleteBuffer(s[R.id]),delete s[R.id],delete a[R.id]}function b(){for(const M in s)i.deleteBuffer(s[M]);o=[],s={},a={}}return{bind:u,update:f,dispose:b}}class s9{constructor(e={}){const{canvas:n=JH(),context:r=null,depth:s=!0,stencil:a=!1,alpha:o=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:f=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:m=!1,reverseDepthBuffer:y=!1}=e;this.isWebGLRenderer=!0;let _;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=r.getContextAttributes().alpha}else _=o;const x=new Uint32Array(4),S=new Int32Array(4);let T=null,b=null;const M=[],R=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=la,this.toneMapping=Of,this.toneMappingExposure=1;const A=this;let I=!1,k=0,N=0,L=null,U=-1,O=null;const F=new di,H=new di;let V=null;const X=new ke(0);let J=0,q=n.width,W=n.height,K=1,et=null,Q=null;const dt=new di(0,0,q,W),yt=new di(0,0,q,W);let xt=!1;const nt=new RS;let ht=!1,ft=!1;this.transmissionResolutionScale=1;const gt=new cn,wt=new cn,Kt=new pt,zt=new di,te={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Pt=!1;function Ht(){return L===null?K:1}let at=r;function ue(it,St){return n.getContext(it,St)}try{const it={alpha:!0,depth:s,stencil:a,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:f,powerPreference:d,failIfMajorPerformanceCaveat:m};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${TS}`),n.addEventListener("webglcontextlost",re,!1),n.addEventListener("webglcontextrestored",Ae,!1),n.addEventListener("webglcontextcreationerror",Ee,!1),at===null){const St="webgl2";if(at=ue(St,it),at===null)throw ue(St)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(it){throw console.error("THREE.WebGLRenderer: "+it.message),it}let Jt,se,ae,Ce,le,ct,G,lt,mt,Ct,bt,Mt,Lt,Qt,Oe,jt,ve,we,Me,Zt,Re,Ie,en,At;function Te(){Jt=new Net(at),Jt.init(),Ie=new r9(at,Jt),se=new Met(at,Jt,e,Ie),ae=new pit(at,Jt),se.reverseDepthBuffer&&y&&ae.buffers.depth.setReversed(!0),Ce=new ket(at),le=new eit,ct=new mit(at,Jt,ae,le,se,Ie,Ce),G=new Ret(A),lt=new Pet(A),mt=new VQ(at),en=new wet(at,mt),Ct=new Let(at,mt,Ce,en),bt=new Bet(at,Ct,mt,Ce),Me=new zet(at,se,ct),jt=new Cet(le),Mt=new tit(A,G,lt,Jt,se,en,jt),Lt=new xit(A,le),Qt=new iit,Oe=new uit(Jt),we=new Tet(A,G,lt,ae,bt,_,u),ve=new hit(A,bt,se),At=new Sit(at,Ce,se,ae),Zt=new Aet(at,Jt,Ce),Re=new Uet(at,Jt,Ce),Ce.programs=Mt.programs,A.capabilities=se,A.extensions=Jt,A.properties=le,A.renderLists=Qt,A.shadowMap=ve,A.state=ae,A.info=Ce}Te();const Xt=new _it(A,at);this.xr=Xt,this.getContext=function(){return at},this.getContextAttributes=function(){return at.getContextAttributes()},this.forceContextLoss=function(){const it=Jt.get("WEBGL_lose_context");it&&it.loseContext()},this.forceContextRestore=function(){const it=Jt.get("WEBGL_lose_context");it&&it.restoreContext()},this.getPixelRatio=function(){return K},this.setPixelRatio=function(it){it!==void 0&&(K=it,this.setSize(q,W,!1))},this.getSize=function(it){return it.set(q,W)},this.setSize=function(it,St,Bt=!0){if(Xt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}q=it,W=St,n.width=Math.floor(it*K),n.height=Math.floor(St*K),Bt===!0&&(n.style.width=it+"px",n.style.height=St+"px"),this.setViewport(0,0,it,St)},this.getDrawingBufferSize=function(it){return it.set(q*K,W*K).floor()},this.setDrawingBufferSize=function(it,St,Bt){q=it,W=St,K=Bt,n.width=Math.floor(it*Bt),n.height=Math.floor(St*Bt),this.setViewport(0,0,it,St)},this.getCurrentViewport=function(it){return it.copy(F)},this.getViewport=function(it){return it.copy(dt)},this.setViewport=function(it,St,Bt,Vt){it.isVector4?dt.set(it.x,it.y,it.z,it.w):dt.set(it,St,Bt,Vt),ae.viewport(F.copy(dt).multiplyScalar(K).round())},this.getScissor=function(it){return it.copy(yt)},this.setScissor=function(it,St,Bt,Vt){it.isVector4?yt.set(it.x,it.y,it.z,it.w):yt.set(it,St,Bt,Vt),ae.scissor(H.copy(yt).multiplyScalar(K).round())},this.getScissorTest=function(){return xt},this.setScissorTest=function(it){ae.setScissorTest(xt=it)},this.setOpaqueSort=function(it){et=it},this.setTransparentSort=function(it){Q=it},this.getClearColor=function(it){return it.copy(we.getClearColor())},this.setClearColor=function(){we.setClearColor(...arguments)},this.getClearAlpha=function(){return we.getClearAlpha()},this.setClearAlpha=function(){we.setClearAlpha(...arguments)},this.clear=function(it=!0,St=!0,Bt=!0){let Vt=0;if(it){let Ot=!1;if(L!==null){const he=L.texture.format;Ot=he===DC||he===IC||he===AS}if(Ot){const he=L.texture.type,be=he===bc||he===fd||he===$0||he===oy||he===CC||he===RC,xe=we.getClearColor(),Le=we.getClearAlpha(),nn=xe.r,Ye=xe.g,Ge=xe.b;be?(x[0]=nn,x[1]=Ye,x[2]=Ge,x[3]=Le,at.clearBufferuiv(at.COLOR,0,x)):(S[0]=nn,S[1]=Ye,S[2]=Ge,S[3]=Le,at.clearBufferiv(at.COLOR,0,S))}else Vt|=at.COLOR_BUFFER_BIT}St&&(Vt|=at.DEPTH_BUFFER_BIT),Bt&&(Vt|=at.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),at.clear(Vt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",re,!1),n.removeEventListener("webglcontextrestored",Ae,!1),n.removeEventListener("webglcontextcreationerror",Ee,!1),we.dispose(),Qt.dispose(),Oe.dispose(),le.dispose(),G.dispose(),lt.dispose(),bt.dispose(),en.dispose(),At.dispose(),Mt.dispose(),Xt.dispose(),Xt.removeEventListener("sessionstart",er),Xt.removeEventListener("sessionend",qi),fr.stop()};function re(it){it.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function Ae(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1;const it=Ce.autoReset,St=ve.enabled,Bt=ve.autoUpdate,Vt=ve.needsUpdate,Ot=ve.type;Te(),Ce.autoReset=it,ve.enabled=St,ve.autoUpdate=Bt,ve.needsUpdate=Vt,ve.type=Ot}function Ee(it){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",it.statusMessage)}function sn(it){const St=it.target;St.removeEventListener("dispose",sn),Wn(St)}function Wn(it){ze(it),le.remove(it)}function ze(it){const St=le.get(it).programs;St!==void 0&&(St.forEach(function(Bt){Mt.releaseProgram(Bt)}),it.isShaderMaterial&&Mt.releaseShaderCache(it))}this.renderBufferDirect=function(it,St,Bt,Vt,Ot,he){St===null&&(St=te);const be=Ot.isMesh&&Ot.matrixWorld.determinant()<0,xe=$a(it,St,Bt,Vt,Ot);ae.setMaterial(Vt,be);let Le=Bt.index,nn=1;if(Vt.wireframe===!0){if(Le=Ct.getWireframeAttribute(Bt),Le===void 0)return;nn=2}const Ye=Bt.drawRange,Ge=Bt.attributes.position;let On=Ye.start*nn,Gn=(Ye.start+Ye.count)*nn;he!==null&&(On=Math.max(On,he.start*nn),Gn=Math.min(Gn,(he.start+he.count)*nn)),Le!==null?(On=Math.max(On,0),Gn=Math.min(Gn,Le.count)):Ge!=null&&(On=Math.max(On,0),Gn=Math.min(Gn,Ge.count));const Mi=Gn-On;if(Mi<0||Mi===1/0)return;en.setup(Ot,Vt,xe,Bt,Le);let Pn,zn=Zt;if(Le!==null&&(Pn=mt.get(Le),zn=Re,zn.setIndex(Pn)),Ot.isMesh)Vt.wireframe===!0?(ae.setLineWidth(Vt.wireframeLinewidth*Ht()),zn.setMode(at.LINES)):zn.setMode(at.TRIANGLES);else if(Ot.isLine){let Ke=Vt.linewidth;Ke===void 0&&(Ke=1),ae.setLineWidth(Ke*Ht()),Ot.isLineSegments?zn.setMode(at.LINES):Ot.isLineLoop?zn.setMode(at.LINE_LOOP):zn.setMode(at.LINE_STRIP)}else Ot.isPoints?zn.setMode(at.POINTS):Ot.isSprite&&zn.setMode(at.TRIANGLES);if(Ot.isBatchedMesh)if(Ot._multiDrawInstances!==null)Rg("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),zn.renderMultiDrawInstances(Ot._multiDrawStarts,Ot._multiDrawCounts,Ot._multiDrawCount,Ot._multiDrawInstances);else if(Jt.get("WEBGL_multi_draw"))zn.renderMultiDraw(Ot._multiDrawStarts,Ot._multiDrawCounts,Ot._multiDrawCount);else{const Ke=Ot._multiDrawStarts,$i=Ot._multiDrawCounts,jn=Ot._multiDrawCount,Ur=Le?mt.get(Le).bytesPerElement:1,Eo=le.get(Vt).currentProgram.getUniforms();for(let Jn=0;Jn<jn;Jn++)Eo.setValue(at,"_gl_DrawID",Jn),zn.render(Ke[Jn]/Ur,$i[Jn])}else if(Ot.isInstancedMesh)zn.renderInstances(On,Mi,Ot.count);else if(Bt.isInstancedBufferGeometry){const Ke=Bt._maxInstanceCount!==void 0?Bt._maxInstanceCount:1/0,$i=Math.min(Bt.instanceCount,Ke);zn.renderInstances(On,Mi,$i)}else zn.render(On,Mi)};function Qe(it,St,Bt){it.transparent===!0&&it.side===Ef&&it.forceSinglePass===!1?(it.side=_o,it.needsUpdate=!0,ri(it,St,Bt),it.side=ud,it.needsUpdate=!0,ri(it,St,Bt),it.side=Ef):ri(it,St,Bt)}this.compile=function(it,St,Bt=null){Bt===null&&(Bt=it),b=Oe.get(Bt),b.init(St),R.push(b),Bt.traverseVisible(function(Ot){Ot.isLight&&Ot.layers.test(St.layers)&&(b.pushLight(Ot),Ot.castShadow&&b.pushShadow(Ot))}),it!==Bt&&it.traverseVisible(function(Ot){Ot.isLight&&Ot.layers.test(St.layers)&&(b.pushLight(Ot),Ot.castShadow&&b.pushShadow(Ot))}),b.setupLights();const Vt=new Set;return it.traverse(function(Ot){if(!(Ot.isMesh||Ot.isPoints||Ot.isLine||Ot.isSprite))return;const he=Ot.material;if(he)if(Array.isArray(he))for(let be=0;be<he.length;be++){const xe=he[be];Qe(xe,Bt,Ot),Vt.add(xe)}else Qe(he,Bt,Ot),Vt.add(he)}),b=R.pop(),Vt},this.compileAsync=function(it,St,Bt=null){const Vt=this.compile(it,St,Bt);return new Promise(Ot=>{function he(){if(Vt.forEach(function(be){le.get(be).currentProgram.isReady()&&Vt.delete(be)}),Vt.size===0){Ot(it);return}setTimeout(he,10)}Jt.get("KHR_parallel_shader_compile")!==null?he():setTimeout(he,10)})};let Lr=null;function Qn(it){Lr&&Lr(it)}function er(){fr.stop()}function qi(){fr.start()}const fr=new J8;fr.setAnimationLoop(Qn),typeof self<"u"&&fr.setContext(self),this.setAnimationLoop=function(it){Lr=it,Xt.setAnimationLoop(it),it===null?fr.stop():fr.start()},Xt.addEventListener("sessionstart",er),Xt.addEventListener("sessionend",qi),this.render=function(it,St){if(St!==void 0&&St.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(I===!0)return;if(it.matrixWorldAutoUpdate===!0&&it.updateMatrixWorld(),St.parent===null&&St.matrixWorldAutoUpdate===!0&&St.updateMatrixWorld(),Xt.enabled===!0&&Xt.isPresenting===!0&&(Xt.cameraAutoUpdate===!0&&Xt.updateCamera(St),St=Xt.getCamera()),it.isScene===!0&&it.onBeforeRender(A,it,St,L),b=Oe.get(it,R.length),b.init(St),R.push(b),wt.multiplyMatrices(St.projectionMatrix,St.matrixWorldInverse),nt.setFromProjectionMatrix(wt),ft=this.localClippingEnabled,ht=jt.init(this.clippingPlanes,ft),T=Qt.get(it,M.length),T.init(),M.push(T),Xt.enabled===!0&&Xt.isPresenting===!0){const he=A.xr.getDepthSensingMesh();he!==null&&ks(he,St,-1/0,A.sortObjects)}ks(it,St,0,A.sortObjects),T.finish(),A.sortObjects===!0&&T.sort(et,Q),Pt=Xt.enabled===!1||Xt.isPresenting===!1||Xt.hasDepthSensing()===!1,Pt&&we.addToRenderList(T,it),this.info.render.frame++,ht===!0&&jt.beginShadows();const Bt=b.state.shadowsArray;ve.render(Bt,it,St),ht===!0&&jt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Vt=T.opaque,Ot=T.transmissive;if(b.setupLights(),St.isArrayCamera){const he=St.cameras;if(Ot.length>0)for(let be=0,xe=he.length;be<xe;be++){const Le=he[be];os(Vt,Ot,it,Le)}Pt&&we.render(it);for(let be=0,xe=he.length;be<xe;be++){const Le=he[be];Qf(T,it,Le,Le.viewport)}}else Ot.length>0&&os(Vt,Ot,it,St),Pt&&we.render(it),Qf(T,it,St);L!==null&&N===0&&(ct.updateMultisampleRenderTarget(L),ct.updateRenderTargetMipmap(L)),it.isScene===!0&&it.onAfterRender(A,it,St),en.resetDefaultState(),U=-1,O=null,R.pop(),R.length>0?(b=R[R.length-1],ht===!0&&jt.setGlobalState(A.clippingPlanes,b.state.camera)):b=null,M.pop(),M.length>0?T=M[M.length-1]:T=null};function ks(it,St,Bt,Vt){if(it.visible===!1)return;if(it.layers.test(St.layers)){if(it.isGroup)Bt=it.renderOrder;else if(it.isLOD)it.autoUpdate===!0&&it.update(St);else if(it.isLight)b.pushLight(it),it.castShadow&&b.pushShadow(it);else if(it.isSprite){if(!it.frustumCulled||nt.intersectsSprite(it)){Vt&&zt.setFromMatrixPosition(it.matrixWorld).applyMatrix4(wt);const be=bt.update(it),xe=it.material;xe.visible&&T.push(it,be,xe,Bt,zt.z,null)}}else if((it.isMesh||it.isLine||it.isPoints)&&(!it.frustumCulled||nt.intersectsObject(it))){const be=bt.update(it),xe=it.material;if(Vt&&(it.boundingSphere!==void 0?(it.boundingSphere===null&&it.computeBoundingSphere(),zt.copy(it.boundingSphere.center)):(be.boundingSphere===null&&be.computeBoundingSphere(),zt.copy(be.boundingSphere.center)),zt.applyMatrix4(it.matrixWorld).applyMatrix4(wt)),Array.isArray(xe)){const Le=be.groups;for(let nn=0,Ye=Le.length;nn<Ye;nn++){const Ge=Le[nn],On=xe[Ge.materialIndex];On&&On.visible&&T.push(it,be,On,Bt,zt.z,Ge)}}else xe.visible&&T.push(it,be,xe,Bt,zt.z,null)}}const he=it.children;for(let be=0,xe=he.length;be<xe;be++)ks(he[be],St,Bt,Vt)}function Qf(it,St,Bt,Vt){const Ot=it.opaque,he=it.transmissive,be=it.transparent;b.setupLightsView(Bt),ht===!0&&jt.setGlobalState(A.clippingPlanes,Bt),Vt&&ae.viewport(F.copy(Vt)),Ot.length>0&&Ss(Ot,St,Bt),he.length>0&&Ss(he,St,Bt),be.length>0&&Ss(be,St,Bt),ae.buffers.depth.setTest(!0),ae.buffers.depth.setMask(!0),ae.buffers.color.setMask(!0),ae.setPolygonOffset(!1)}function os(it,St,Bt,Vt){if((Bt.isScene===!0?Bt.overrideMaterial:null)!==null)return;b.state.transmissionRenderTarget[Vt.id]===void 0&&(b.state.transmissionRenderTarget[Vt.id]=new Vf(1,1,{generateMipmaps:!0,type:Jt.has("EXT_color_buffer_half_float")||Jt.has("EXT_color_buffer_float")?M_:bc,minFilter:Af,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:li.workingColorSpace}));const he=b.state.transmissionRenderTarget[Vt.id],be=Vt.viewport||F;he.setSize(be.z*A.transmissionResolutionScale,be.w*A.transmissionResolutionScale);const xe=A.getRenderTarget();A.setRenderTarget(he),A.getClearColor(X),J=A.getClearAlpha(),J<1&&A.setClearColor(16777215,.5),A.clear(),Pt&&we.render(Bt);const Le=A.toneMapping;A.toneMapping=Of;const nn=Vt.viewport;if(Vt.viewport!==void 0&&(Vt.viewport=void 0),b.setupLightsView(Vt),ht===!0&&jt.setGlobalState(A.clippingPlanes,Vt),Ss(it,Bt,Vt),ct.updateMultisampleRenderTarget(he),ct.updateRenderTargetMipmap(he),Jt.has("WEBGL_multisampled_render_to_texture")===!1){let Ye=!1;for(let Ge=0,On=St.length;Ge<On;Ge++){const Gn=St[Ge],Mi=Gn.object,Pn=Gn.geometry,zn=Gn.material,Ke=Gn.group;if(zn.side===Ef&&Mi.layers.test(Vt.layers)){const $i=zn.side;zn.side=_o,zn.needsUpdate=!0,qa(Mi,Bt,Vt,Pn,zn,Ke),zn.side=$i,zn.needsUpdate=!0,Ye=!0}}Ye===!0&&(ct.updateMultisampleRenderTarget(he),ct.updateRenderTargetMipmap(he))}A.setRenderTarget(xe),A.setClearColor(X,J),nn!==void 0&&(Vt.viewport=nn),A.toneMapping=Le}function Ss(it,St,Bt){const Vt=St.isScene===!0?St.overrideMaterial:null;for(let Ot=0,he=it.length;Ot<he;Ot++){const be=it[Ot],xe=be.object,Le=be.geometry,nn=Vt===null?be.material:Vt,Ye=be.group;xe.layers.test(Bt.layers)&&qa(xe,St,Bt,Le,nn,Ye)}}function qa(it,St,Bt,Vt,Ot,he){it.onBeforeRender(A,St,Bt,Vt,Ot,he),it.modelViewMatrix.multiplyMatrices(Bt.matrixWorldInverse,it.matrixWorld),it.normalMatrix.getNormalMatrix(it.modelViewMatrix),Ot.onBeforeRender(A,St,Bt,Vt,it,he),Ot.transparent===!0&&Ot.side===Ef&&Ot.forceSinglePass===!1?(Ot.side=_o,Ot.needsUpdate=!0,A.renderBufferDirect(Bt,St,Vt,Ot,it,he),Ot.side=ud,Ot.needsUpdate=!0,A.renderBufferDirect(Bt,St,Vt,Ot,it,he),Ot.side=Ef):A.renderBufferDirect(Bt,St,Vt,Ot,it,he),it.onAfterRender(A,St,Bt,Vt,Ot,he)}function ri(it,St,Bt){St.isScene!==!0&&(St=te);const Vt=le.get(it),Ot=b.state.lights,he=b.state.shadowsArray,be=Ot.state.version,xe=Mt.getParameters(it,Ot.state,he,St,Bt),Le=Mt.getProgramCacheKey(xe);let nn=Vt.programs;Vt.environment=it.isMeshStandardMaterial?St.environment:null,Vt.fog=St.fog,Vt.envMap=(it.isMeshStandardMaterial?lt:G).get(it.envMap||Vt.environment),Vt.envMapRotation=Vt.environment!==null&&it.envMap===null?St.environmentRotation:it.envMapRotation,nn===void 0&&(it.addEventListener("dispose",sn),nn=new Map,Vt.programs=nn);let Ye=nn.get(Le);if(Ye!==void 0){if(Vt.currentProgram===Ye&&Vt.lightsStateVersion===be)return Ks(it,xe),Ye}else xe.uniforms=Mt.getUniforms(it),it.onBeforeCompile(xe,A),Ye=Mt.acquireProgram(xe,Le),nn.set(Le,Ye),Vt.uniforms=xe.uniforms;const Ge=Vt.uniforms;return(!it.isShaderMaterial&&!it.isRawShaderMaterial||it.clipping===!0)&&(Ge.clippingPlanes=jt.uniform),Ks(it,xe),Vt.needsLights=nr(it),Vt.lightsStateVersion=be,Vt.needsLights&&(Ge.ambientLightColor.value=Ot.state.ambient,Ge.lightProbe.value=Ot.state.probe,Ge.directionalLights.value=Ot.state.directional,Ge.directionalLightShadows.value=Ot.state.directionalShadow,Ge.spotLights.value=Ot.state.spot,Ge.spotLightShadows.value=Ot.state.spotShadow,Ge.rectAreaLights.value=Ot.state.rectArea,Ge.ltc_1.value=Ot.state.rectAreaLTC1,Ge.ltc_2.value=Ot.state.rectAreaLTC2,Ge.pointLights.value=Ot.state.point,Ge.pointLightShadows.value=Ot.state.pointShadow,Ge.hemisphereLights.value=Ot.state.hemi,Ge.directionalShadowMap.value=Ot.state.directionalShadowMap,Ge.directionalShadowMatrix.value=Ot.state.directionalShadowMatrix,Ge.spotShadowMap.value=Ot.state.spotShadowMap,Ge.spotLightMatrix.value=Ot.state.spotLightMatrix,Ge.spotLightMap.value=Ot.state.spotLightMap,Ge.pointShadowMap.value=Ot.state.pointShadowMap,Ge.pointShadowMatrix.value=Ot.state.pointShadowMatrix),Vt.currentProgram=Ye,Vt.uniformsList=null,Ye}function va(it){if(it.uniformsList===null){const St=it.currentProgram.getUniforms();it.uniformsList=nA.seqWithValue(St.seq,it.uniforms)}return it.uniformsList}function Ks(it,St){const Bt=le.get(it);Bt.outputColorSpace=St.outputColorSpace,Bt.batching=St.batching,Bt.batchingColor=St.batchingColor,Bt.instancing=St.instancing,Bt.instancingColor=St.instancingColor,Bt.instancingMorph=St.instancingMorph,Bt.skinning=St.skinning,Bt.morphTargets=St.morphTargets,Bt.morphNormals=St.morphNormals,Bt.morphColors=St.morphColors,Bt.morphTargetsCount=St.morphTargetsCount,Bt.numClippingPlanes=St.numClippingPlanes,Bt.numIntersection=St.numClipIntersection,Bt.vertexAlphas=St.vertexAlphas,Bt.vertexTangents=St.vertexTangents,Bt.toneMapping=St.toneMapping}function $a(it,St,Bt,Vt,Ot){St.isScene!==!0&&(St=te),ct.resetTextureUnits();const he=St.fog,be=Vt.isMeshStandardMaterial?St.environment:null,xe=L===null?A.outputColorSpace:L.isXRRenderTarget===!0?L.texture.colorSpace:tm,Le=(Vt.isMeshStandardMaterial?lt:G).get(Vt.envMap||be),nn=Vt.vertexColors===!0&&!!Bt.attributes.color&&Bt.attributes.color.itemSize===4,Ye=!!Bt.attributes.tangent&&(!!Vt.normalMap||Vt.anisotropy>0),Ge=!!Bt.morphAttributes.position,On=!!Bt.morphAttributes.normal,Gn=!!Bt.morphAttributes.color;let Mi=Of;Vt.toneMapped&&(L===null||L.isXRRenderTarget===!0)&&(Mi=A.toneMapping);const Pn=Bt.morphAttributes.position||Bt.morphAttributes.normal||Bt.morphAttributes.color,zn=Pn!==void 0?Pn.length:0,Ke=le.get(Vt),$i=b.state.lights;if(ht===!0&&(ft===!0||it!==O)){const vn=it===O&&Vt.id===U;jt.setState(Vt,it,vn)}let jn=!1;Vt.version===Ke.__version?(Ke.needsLights&&Ke.lightsStateVersion!==$i.state.version||Ke.outputColorSpace!==xe||Ot.isBatchedMesh&&Ke.batching===!1||!Ot.isBatchedMesh&&Ke.batching===!0||Ot.isBatchedMesh&&Ke.batchingColor===!0&&Ot.colorTexture===null||Ot.isBatchedMesh&&Ke.batchingColor===!1&&Ot.colorTexture!==null||Ot.isInstancedMesh&&Ke.instancing===!1||!Ot.isInstancedMesh&&Ke.instancing===!0||Ot.isSkinnedMesh&&Ke.skinning===!1||!Ot.isSkinnedMesh&&Ke.skinning===!0||Ot.isInstancedMesh&&Ke.instancingColor===!0&&Ot.instanceColor===null||Ot.isInstancedMesh&&Ke.instancingColor===!1&&Ot.instanceColor!==null||Ot.isInstancedMesh&&Ke.instancingMorph===!0&&Ot.morphTexture===null||Ot.isInstancedMesh&&Ke.instancingMorph===!1&&Ot.morphTexture!==null||Ke.envMap!==Le||Vt.fog===!0&&Ke.fog!==he||Ke.numClippingPlanes!==void 0&&(Ke.numClippingPlanes!==jt.numPlanes||Ke.numIntersection!==jt.numIntersection)||Ke.vertexAlphas!==nn||Ke.vertexTangents!==Ye||Ke.morphTargets!==Ge||Ke.morphNormals!==On||Ke.morphColors!==Gn||Ke.toneMapping!==Mi||Ke.morphTargetsCount!==zn)&&(jn=!0):(jn=!0,Ke.__version=Vt.version);let Ur=Ke.currentProgram;jn===!0&&(Ur=ri(Vt,St,Ot));let Eo=!1,Jn=!1,kr=!1;const si=Ur.getUniforms(),hr=Ke.uniforms;if(ae.useProgram(Ur.program)&&(Eo=!0,Jn=!0,kr=!0),Vt.id!==U&&(U=Vt.id,Jn=!0),Eo||O!==it){ae.buffers.depth.getReversed()?(gt.copy(it.projectionMatrix),fK(gt),hK(gt),si.setValue(at,"projectionMatrix",gt)):si.setValue(at,"projectionMatrix",it.projectionMatrix),si.setValue(at,"viewMatrix",it.matrixWorldInverse);const rr=si.map.cameraPosition;rr!==void 0&&rr.setValue(at,Kt.setFromMatrixPosition(it.matrixWorld)),se.logarithmicDepthBuffer&&si.setValue(at,"logDepthBufFC",2/(Math.log(it.far+1)/Math.LN2)),(Vt.isMeshPhongMaterial||Vt.isMeshToonMaterial||Vt.isMeshLambertMaterial||Vt.isMeshBasicMaterial||Vt.isMeshStandardMaterial||Vt.isShaderMaterial)&&si.setValue(at,"isOrthographic",it.isOrthographicCamera===!0),O!==it&&(O=it,Jn=!0,kr=!0)}if(Ot.isSkinnedMesh){si.setOptional(at,Ot,"bindMatrix"),si.setOptional(at,Ot,"bindMatrixInverse");const vn=Ot.skeleton;vn&&(vn.boneTexture===null&&vn.computeBoneTexture(),si.setValue(at,"boneTexture",vn.boneTexture,ct))}Ot.isBatchedMesh&&(si.setOptional(at,Ot,"batchingTexture"),si.setValue(at,"batchingTexture",Ot._matricesTexture,ct),si.setOptional(at,Ot,"batchingIdTexture"),si.setValue(at,"batchingIdTexture",Ot._indirectTexture,ct),si.setOptional(at,Ot,"batchingColorTexture"),Ot._colorsTexture!==null&&si.setValue(at,"batchingColorTexture",Ot._colorsTexture,ct));const ir=Bt.morphAttributes;if((ir.position!==void 0||ir.normal!==void 0||ir.color!==void 0)&&Me.update(Ot,Bt,Ur),(Jn||Ke.receiveShadow!==Ot.receiveShadow)&&(Ke.receiveShadow=Ot.receiveShadow,si.setValue(at,"receiveShadow",Ot.receiveShadow)),Vt.isMeshGouraudMaterial&&Vt.envMap!==null&&(hr.envMap.value=Le,hr.flipEnvMap.value=Le.isCubeTexture&&Le.isRenderTargetTexture===!1?-1:1),Vt.isMeshStandardMaterial&&Vt.envMap===null&&St.environment!==null&&(hr.envMapIntensity.value=St.environmentIntensity),Jn&&(si.setValue(at,"toneMappingExposure",A.toneMappingExposure),Ke.needsLights&&ls(hr,kr),he&&Vt.fog===!0&&Lt.refreshFogUniforms(hr,he),Lt.refreshMaterialUniforms(hr,Vt,K,W,b.state.transmissionRenderTarget[it.id]),nA.upload(at,va(Ke),hr,ct)),Vt.isShaderMaterial&&Vt.uniformsNeedUpdate===!0&&(nA.upload(at,va(Ke),hr,ct),Vt.uniformsNeedUpdate=!1),Vt.isSpriteMaterial&&si.setValue(at,"center",Ot.center),si.setValue(at,"modelViewMatrix",Ot.modelViewMatrix),si.setValue(at,"normalMatrix",Ot.normalMatrix),si.setValue(at,"modelMatrix",Ot.matrixWorld),Vt.isShaderMaterial||Vt.isRawShaderMaterial){const vn=Vt.uniformsGroups;for(let rr=0,xr=vn.length;rr<xr;rr++){const zs=vn[rr];At.update(zs,Ur),At.bind(zs,Ur)}}return Ur}function ls(it,St){it.ambientLightColor.needsUpdate=St,it.lightProbe.needsUpdate=St,it.directionalLights.needsUpdate=St,it.directionalLightShadows.needsUpdate=St,it.pointLights.needsUpdate=St,it.pointLightShadows.needsUpdate=St,it.spotLights.needsUpdate=St,it.spotLightShadows.needsUpdate=St,it.rectAreaLights.needsUpdate=St,it.hemisphereLights.needsUpdate=St}function nr(it){return it.isMeshLambertMaterial||it.isMeshToonMaterial||it.isMeshPhongMaterial||it.isMeshStandardMaterial||it.isShadowMaterial||it.isShaderMaterial&&it.lights===!0}this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return N},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(it,St,Bt){le.get(it.texture).__webglTexture=St,le.get(it.depthTexture).__webglTexture=Bt;const Vt=le.get(it);Vt.__hasExternalTextures=!0,Vt.__autoAllocateDepthBuffer=Bt===void 0,Vt.__autoAllocateDepthBuffer||Jt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Vt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(it,St){const Bt=le.get(it);Bt.__webglFramebuffer=St,Bt.__useDefaultFramebuffer=St===void 0};const Iu=at.createFramebuffer();this.setRenderTarget=function(it,St=0,Bt=0){L=it,k=St,N=Bt;let Vt=!0,Ot=null,he=!1,be=!1;if(it){const Le=le.get(it);if(Le.__useDefaultFramebuffer!==void 0)ae.bindFramebuffer(at.FRAMEBUFFER,null),Vt=!1;else if(Le.__webglFramebuffer===void 0)ct.setupRenderTarget(it);else if(Le.__hasExternalTextures)ct.rebindTextures(it,le.get(it.texture).__webglTexture,le.get(it.depthTexture).__webglTexture);else if(it.depthBuffer){const Ge=it.depthTexture;if(Le.__boundDepthTexture!==Ge){if(Ge!==null&&le.has(Ge)&&(it.width!==Ge.image.width||it.height!==Ge.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ct.setupDepthRenderbuffer(it)}}const nn=it.texture;(nn.isData3DTexture||nn.isDataArrayTexture||nn.isCompressedArrayTexture)&&(be=!0);const Ye=le.get(it).__webglFramebuffer;it.isWebGLCubeRenderTarget?(Array.isArray(Ye[St])?Ot=Ye[St][Bt]:Ot=Ye[St],he=!0):it.samples>0&&ct.useMultisampledRTT(it)===!1?Ot=le.get(it).__webglMultisampledFramebuffer:Array.isArray(Ye)?Ot=Ye[Bt]:Ot=Ye,F.copy(it.viewport),H.copy(it.scissor),V=it.scissorTest}else F.copy(dt).multiplyScalar(K).floor(),H.copy(yt).multiplyScalar(K).floor(),V=xt;if(Bt!==0&&(Ot=Iu),ae.bindFramebuffer(at.FRAMEBUFFER,Ot)&&Vt&&ae.drawBuffers(it,Ot),ae.viewport(F),ae.scissor(H),ae.setScissorTest(V),he){const Le=le.get(it.texture);at.framebufferTexture2D(at.FRAMEBUFFER,at.COLOR_ATTACHMENT0,at.TEXTURE_CUBE_MAP_POSITIVE_X+St,Le.__webglTexture,Bt)}else if(be){const Le=le.get(it.texture),nn=St;at.framebufferTextureLayer(at.FRAMEBUFFER,at.COLOR_ATTACHMENT0,Le.__webglTexture,Bt,nn)}else if(it!==null&&Bt!==0){const Le=le.get(it.texture);at.framebufferTexture2D(at.FRAMEBUFFER,at.COLOR_ATTACHMENT0,at.TEXTURE_2D,Le.__webglTexture,Bt)}U=-1},this.readRenderTargetPixels=function(it,St,Bt,Vt,Ot,he,be){if(!(it&&it.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let xe=le.get(it).__webglFramebuffer;if(it.isWebGLCubeRenderTarget&&be!==void 0&&(xe=xe[be]),xe){ae.bindFramebuffer(at.FRAMEBUFFER,xe);try{const Le=it.texture,nn=Le.format,Ye=Le.type;if(!se.textureFormatReadable(nn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!se.textureTypeReadable(Ye)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}St>=0&&St<=it.width-Vt&&Bt>=0&&Bt<=it.height-Ot&&at.readPixels(St,Bt,Vt,Ot,Ie.convert(nn),Ie.convert(Ye),he)}finally{const Le=L!==null?le.get(L).__webglFramebuffer:null;ae.bindFramebuffer(at.FRAMEBUFFER,Le)}}},this.readRenderTargetPixelsAsync=async function(it,St,Bt,Vt,Ot,he,be){if(!(it&&it.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let xe=le.get(it).__webglFramebuffer;if(it.isWebGLCubeRenderTarget&&be!==void 0&&(xe=xe[be]),xe){const Le=it.texture,nn=Le.format,Ye=Le.type;if(!se.textureFormatReadable(nn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!se.textureTypeReadable(Ye))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(St>=0&&St<=it.width-Vt&&Bt>=0&&Bt<=it.height-Ot){ae.bindFramebuffer(at.FRAMEBUFFER,xe);const Ge=at.createBuffer();at.bindBuffer(at.PIXEL_PACK_BUFFER,Ge),at.bufferData(at.PIXEL_PACK_BUFFER,he.byteLength,at.STREAM_READ),at.readPixels(St,Bt,Vt,Ot,Ie.convert(nn),Ie.convert(Ye),0);const On=L!==null?le.get(L).__webglFramebuffer:null;ae.bindFramebuffer(at.FRAMEBUFFER,On);const Gn=at.fenceSync(at.SYNC_GPU_COMMANDS_COMPLETE,0);return at.flush(),await cK(at,Gn,4),at.bindBuffer(at.PIXEL_PACK_BUFFER,Ge),at.getBufferSubData(at.PIXEL_PACK_BUFFER,0,he),at.deleteBuffer(Ge),at.deleteSync(Gn),he}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(it,St=null,Bt=0){it.isTexture!==!0&&(Rg("WebGLRenderer: copyFramebufferToTexture function signature has changed."),St=arguments[0]||null,it=arguments[1]);const Vt=Math.pow(2,-Bt),Ot=Math.floor(it.image.width*Vt),he=Math.floor(it.image.height*Vt),be=St!==null?St.x:0,xe=St!==null?St.y:0;ct.setTexture2D(it,0),at.copyTexSubImage2D(at.TEXTURE_2D,Bt,0,0,be,xe,Ot,he),ae.unbindTexture()};const ql=at.createFramebuffer(),Zs=at.createFramebuffer();this.copyTextureToTexture=function(it,St,Bt=null,Vt=null,Ot=0,he=null){it.isTexture!==!0&&(Rg("WebGLRenderer: copyTextureToTexture function signature has changed."),Vt=arguments[0]||null,it=arguments[1],St=arguments[2],he=arguments[3]||0,Bt=null),he===null&&(Ot!==0?(Rg("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),he=Ot,Ot=0):he=0);let be,xe,Le,nn,Ye,Ge,On,Gn,Mi;const Pn=it.isCompressedTexture?it.mipmaps[he]:it.image;if(Bt!==null)be=Bt.max.x-Bt.min.x,xe=Bt.max.y-Bt.min.y,Le=Bt.isBox3?Bt.max.z-Bt.min.z:1,nn=Bt.min.x,Ye=Bt.min.y,Ge=Bt.isBox3?Bt.min.z:0;else{const ir=Math.pow(2,-Ot);be=Math.floor(Pn.width*ir),xe=Math.floor(Pn.height*ir),it.isDataArrayTexture?Le=Pn.depth:it.isData3DTexture?Le=Math.floor(Pn.depth*ir):Le=1,nn=0,Ye=0,Ge=0}Vt!==null?(On=Vt.x,Gn=Vt.y,Mi=Vt.z):(On=0,Gn=0,Mi=0);const zn=Ie.convert(St.format),Ke=Ie.convert(St.type);let $i;St.isData3DTexture?(ct.setTexture3D(St,0),$i=at.TEXTURE_3D):St.isDataArrayTexture||St.isCompressedArrayTexture?(ct.setTexture2DArray(St,0),$i=at.TEXTURE_2D_ARRAY):(ct.setTexture2D(St,0),$i=at.TEXTURE_2D),at.pixelStorei(at.UNPACK_FLIP_Y_WEBGL,St.flipY),at.pixelStorei(at.UNPACK_PREMULTIPLY_ALPHA_WEBGL,St.premultiplyAlpha),at.pixelStorei(at.UNPACK_ALIGNMENT,St.unpackAlignment);const jn=at.getParameter(at.UNPACK_ROW_LENGTH),Ur=at.getParameter(at.UNPACK_IMAGE_HEIGHT),Eo=at.getParameter(at.UNPACK_SKIP_PIXELS),Jn=at.getParameter(at.UNPACK_SKIP_ROWS),kr=at.getParameter(at.UNPACK_SKIP_IMAGES);at.pixelStorei(at.UNPACK_ROW_LENGTH,Pn.width),at.pixelStorei(at.UNPACK_IMAGE_HEIGHT,Pn.height),at.pixelStorei(at.UNPACK_SKIP_PIXELS,nn),at.pixelStorei(at.UNPACK_SKIP_ROWS,Ye),at.pixelStorei(at.UNPACK_SKIP_IMAGES,Ge);const si=it.isDataArrayTexture||it.isData3DTexture,hr=St.isDataArrayTexture||St.isData3DTexture;if(it.isDepthTexture){const ir=le.get(it),vn=le.get(St),rr=le.get(ir.__renderTarget),xr=le.get(vn.__renderTarget);ae.bindFramebuffer(at.READ_FRAMEBUFFER,rr.__webglFramebuffer),ae.bindFramebuffer(at.DRAW_FRAMEBUFFER,xr.__webglFramebuffer);for(let zs=0;zs<Le;zs++)si&&(at.framebufferTextureLayer(at.READ_FRAMEBUFFER,at.COLOR_ATTACHMENT0,le.get(it).__webglTexture,Ot,Ge+zs),at.framebufferTextureLayer(at.DRAW_FRAMEBUFFER,at.COLOR_ATTACHMENT0,le.get(St).__webglTexture,he,Mi+zs)),at.blitFramebuffer(nn,Ye,be,xe,On,Gn,be,xe,at.DEPTH_BUFFER_BIT,at.NEAREST);ae.bindFramebuffer(at.READ_FRAMEBUFFER,null),ae.bindFramebuffer(at.DRAW_FRAMEBUFFER,null)}else if(Ot!==0||it.isRenderTargetTexture||le.has(it)){const ir=le.get(it),vn=le.get(St);ae.bindFramebuffer(at.READ_FRAMEBUFFER,ql),ae.bindFramebuffer(at.DRAW_FRAMEBUFFER,Zs);for(let rr=0;rr<Le;rr++)si?at.framebufferTextureLayer(at.READ_FRAMEBUFFER,at.COLOR_ATTACHMENT0,ir.__webglTexture,Ot,Ge+rr):at.framebufferTexture2D(at.READ_FRAMEBUFFER,at.COLOR_ATTACHMENT0,at.TEXTURE_2D,ir.__webglTexture,Ot),hr?at.framebufferTextureLayer(at.DRAW_FRAMEBUFFER,at.COLOR_ATTACHMENT0,vn.__webglTexture,he,Mi+rr):at.framebufferTexture2D(at.DRAW_FRAMEBUFFER,at.COLOR_ATTACHMENT0,at.TEXTURE_2D,vn.__webglTexture,he),Ot!==0?at.blitFramebuffer(nn,Ye,be,xe,On,Gn,be,xe,at.COLOR_BUFFER_BIT,at.NEAREST):hr?at.copyTexSubImage3D($i,he,On,Gn,Mi+rr,nn,Ye,be,xe):at.copyTexSubImage2D($i,he,On,Gn,nn,Ye,be,xe);ae.bindFramebuffer(at.READ_FRAMEBUFFER,null),ae.bindFramebuffer(at.DRAW_FRAMEBUFFER,null)}else hr?it.isDataTexture||it.isData3DTexture?at.texSubImage3D($i,he,On,Gn,Mi,be,xe,Le,zn,Ke,Pn.data):St.isCompressedArrayTexture?at.compressedTexSubImage3D($i,he,On,Gn,Mi,be,xe,Le,zn,Pn.data):at.texSubImage3D($i,he,On,Gn,Mi,be,xe,Le,zn,Ke,Pn):it.isDataTexture?at.texSubImage2D(at.TEXTURE_2D,he,On,Gn,be,xe,zn,Ke,Pn.data):it.isCompressedTexture?at.compressedTexSubImage2D(at.TEXTURE_2D,he,On,Gn,Pn.width,Pn.height,zn,Pn.data):at.texSubImage2D(at.TEXTURE_2D,he,On,Gn,be,xe,zn,Ke,Pn);at.pixelStorei(at.UNPACK_ROW_LENGTH,jn),at.pixelStorei(at.UNPACK_IMAGE_HEIGHT,Ur),at.pixelStorei(at.UNPACK_SKIP_PIXELS,Eo),at.pixelStorei(at.UNPACK_SKIP_ROWS,Jn),at.pixelStorei(at.UNPACK_SKIP_IMAGES,kr),he===0&&St.generateMipmaps&&at.generateMipmap($i),ae.unbindTexture()},this.copyTextureToTexture3D=function(it,St,Bt=null,Vt=null,Ot=0){return it.isTexture!==!0&&(Rg("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Bt=arguments[0]||null,Vt=arguments[1]||null,it=arguments[2],St=arguments[3],Ot=arguments[4]||0),Rg('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(it,St,Bt,Vt,Ot)},this.initRenderTarget=function(it){le.get(it).__webglFramebuffer===void 0&&ct.setupRenderTarget(it)},this.initTexture=function(it){it.isCubeTexture?ct.setTextureCube(it,0):it.isData3DTexture?ct.setTexture3D(it,0):it.isDataArrayTexture||it.isCompressedArrayTexture?ct.setTexture2DArray(it,0):ct.setTexture2D(it,0),ae.unbindTexture()},this.resetState=function(){k=0,N=0,L=null,ae.reset(),en.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return pc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorspace=li._getDrawingBufferColorSpace(e),n.unpackColorSpace=li._getUnpackColorSpace()}}const Eit=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:LN,AddEquation:Dp,AddOperation:OH,AdditiveAnimationBlendMode:$N,AdditiveBlending:IA,AgXToneMapping:LH,AlphaFormat:FN,AlwaysCompare:KH,AlwaysDepth:LA,AlwaysStencilFunc:TD,AmbientLight:H8,AnimationAction:Z8,AnimationClip:G1,AnimationLoader:LZ,AnimationMixer:cQ,AnimationObjectGroup:lQ,AnimationUtils:IZ,ArcCurve:m8,ArrayCamera:X8,ArrowHelper:DQ,AttachedBindMode:ED,Audio:Y8,AudioAnalyser:QZ,AudioContext:g3,AudioListener:YZ,AudioLoader:$Z,AxesHelper:PQ,BackSide:_o,BasicDepthPacking:VH,BasicShadowMap:cH,BatchedMesh:c8,Bone:JN,BooleanKeyframeTrack:wy,Box2:vQ,Box3:ha,Box3Helper:OQ,BoxGeometry:Sy,BoxHelper:RQ,BufferAttribute:zi,BufferGeometry:Un,BufferGeometryLoader:W8,ByteType:kN,Cache:Zh,Camera:UC,CameraHelper:CQ,CanvasTexture:p8,CapsuleGeometry:qC,CatmullRomCurve3:g8,CineonToneMapping:PH,CircleGeometry:$C,ClampToEdgeWrapping:Su,Clock:y3,Color:ke,ColorKeyframeTrack:d3,ColorManagement:li,CompressedArrayTexture:tZ,CompressedCubeTexture:eZ,CompressedTexture:HC,CompressedTextureLoader:UZ,ConeGeometry:IS,ConstantAlphaFactor:MH,ConstantColorFactor:wH,Controls:LQ,CubeCamera:r8,CubeReflectionMapping:cd,CubeRefractionMapping:Jp,CubeTexture:CS,CubeTextureLoader:kZ,CubeUVReflectionMapping:A_,CubicBezierCurve:i3,CubicBezierCurve3:r3,CubicInterpolant:N8,CullFaceBack:bD,CullFaceFront:uH,CullFaceFrontBack:hY,CullFaceNone:lH,Curve:wc,CurvePath:v8,CustomBlending:fH,CustomToneMapping:NH,CylinderGeometry:Ey,Cylindrical:yQ,Data3DTexture:LC,DataArrayTexture:MS,DataTexture:If,DataTextureLoader:zZ,DataUtils:MK,DecrementStencilOp:AY,DecrementWrapStencilOp:CY,DefaultLoadingManager:k8,DepthFormat:Xg,DepthStencilFormat:ly,DepthTexture:e3,DetachedBindMode:kH,DirectionalLight:V8,DirectionalLightHelper:MQ,DiscreteInterpolant:L8,DodecahedronGeometry:WC,DoubleSide:Ef,DstAlphaFactor:bH,DstColorFactor:SH,DynamicCopyUsage:GY,DynamicDrawUsage:kY,DynamicReadUsage:FY,EdgesGeometry:_8,EllipseCurve:GC,EqualCompare:$H,EqualDepth:kA,EqualStencilFunc:DY,EquirectangularReflectionMapping:M1,EquirectangularRefractionMapping:C1,Euler:Bl,EventDispatcher:Xf,ExtrudeGeometry:YC,FileLoader:dd,Float16BufferAttribute:NK,Float32BufferAttribute:qe,FloatType:Jo,Fog:zC,FogExp2:kC,FramebufferTexture:JK,FrontSide:ud,Frustum:RS,GLBufferAttribute:gQ,GLSL1:qY,GLSL3:wD,GreaterCompare:WH,GreaterDepth:BA,GreaterEqualCompare:YH,GreaterEqualDepth:zA,GreaterEqualStencilFunc:UY,GreaterStencilFunc:NY,GridHelper:wQ,Group:Kh,HalfFloatType:M_,HemisphereLight:z8,HemisphereLightHelper:TQ,IcosahedronGeometry:KC,ImageBitmapLoader:qZ,ImageLoader:j1,ImageUtils:t8,IncrementStencilOp:wY,IncrementWrapStencilOp:MY,InstancedBufferAttribute:K0,InstancedBufferGeometry:$8,InstancedInterleavedBuffer:mQ,InstancedMesh:u8,Int16BufferAttribute:DK,Int32BufferAttribute:PK,Int8BufferAttribute:RK,IntType:MC,InterleavedBuffer:BC,InterleavedBufferAttribute:uy,Interpolant:NS,InterpolateDiscrete:I1,InterpolateLinear:dM,InterpolateSmooth:tA,InvertStencilOp:RY,KeepStencilOp:Cg,KeyframeTrack:Ac,LOD:o8,LatheGeometry:OS,Layers:X0,LessCompare:qH,LessDepth:UA,LessEqualCompare:WN,LessEqualDepth:ay,LessEqualStencilFunc:PY,LessStencilFunc:IY,Light:mm,LightProbe:q8,Line:hd,Line3:_Q,LineBasicMaterial:ja,LineCurve:s3,LineCurve3:y8,LineDashedMaterial:I8,LineLoop:f8,LineSegments:Yf,LinearFilter:Is,LinearInterpolant:h3,LinearMipMapLinearFilter:gY,LinearMipMapNearestFilter:mY,LinearMipmapLinearFilter:Af,LinearMipmapNearestFilter:Qx,LinearSRGBColorSpace:tm,LinearToneMapping:IH,LinearTransfer:P1,Loader:cl,LoaderUtils:OD,LoadingManager:p3,LoopOnce:zH,LoopPingPong:FH,LoopRepeat:BH,LuminanceAlphaFormat:GN,LuminanceFormat:HN,MOUSE:cY,Material:Ga,MaterialLoader:i2,MathUtils:ZH,Matrix2:E3,Matrix3:Dn,Matrix4:cn,MaxEquation:mH,Mesh:$r,MeshBasicMaterial:dm,MeshDepthMaterial:u3,MeshDistanceMaterial:c3,MeshLambertMaterial:l3,MeshMatcapMaterial:O8,MeshNormalMaterial:R8,MeshPhongMaterial:M8,MeshPhysicalMaterial:A8,MeshStandardMaterial:n2,MeshToonMaterial:C8,MinEquation:pH,MirroredRepeatWrapping:O1,MixOperation:RH,MultiplyBlending:SD,MultiplyOperation:wS,NearestFilter:fa,NearestMipMapLinearFilter:pY,NearestMipMapNearestFilter:dY,NearestMipmapLinearFilter:T0,NearestMipmapNearestFilter:UN,NeutralToneMapping:UH,NeverCompare:jH,NeverDepth:NA,NeverStencilFunc:OY,NoBlending:rd,NoColorSpace:Wh,NoToneMapping:Of,NormalAnimationBlendMode:PC,NormalBlending:Wg,NotEqualCompare:XH,NotEqualDepth:FA,NotEqualStencilFunc:LY,NumberKeyframeTrack:V1,Object3D:vi,ObjectLoader:GZ,ObjectSpaceNormalMap:GH,OctahedronGeometry:DS,OneFactor:yH,OneMinusConstantAlphaFactor:CH,OneMinusConstantColorFactor:AH,OneMinusDstAlphaFactor:xH,OneMinusDstColorFactor:EH,OneMinusSrcAlphaFactor:PA,OneMinusSrcColorFactor:_H,OrthographicCamera:US,PCFShadowMap:wC,PCFSoftShadowMap:Zx,PMREMGenerator:PD,Path:k1,PerspectiveCamera:Ws,Plane:Op,PlaneGeometry:R_,PlaneHelper:IQ,PointLight:F8,PointLightHelper:SQ,Points:h8,PointsMaterial:t3,PolarGridHelper:AQ,PolyhedronGeometry:pm,PositionalAudio:ZZ,PropertyBinding:mi,PropertyMixer:K8,QuadraticBezierCurve:a3,QuadraticBezierCurve3:jC,Quaternion:bo,QuaternionKeyframeTrack:LS,QuaternionLinearInterpolant:U8,RED_GREEN_RGTC2_Format:fM,RED_RGTC1_Format:qN,REVISION:TS,RGBADepthPacking:HH,RGBAFormat:Ba,RGBAIntegerFormat:DC,RGBA_ASTC_10x10_Format:sM,RGBA_ASTC_10x5_Format:nM,RGBA_ASTC_10x6_Format:iM,RGBA_ASTC_10x8_Format:rM,RGBA_ASTC_12x10_Format:aM,RGBA_ASTC_12x12_Format:oM,RGBA_ASTC_4x4_Format:XA,RGBA_ASTC_5x4_Format:YA,RGBA_ASTC_5x5_Format:KA,RGBA_ASTC_6x5_Format:ZA,RGBA_ASTC_6x6_Format:QA,RGBA_ASTC_8x5_Format:JA,RGBA_ASTC_8x6_Format:tM,RGBA_ASTC_8x8_Format:eM,RGBA_BPTC_Format:i1,RGBA_ETC2_EAC_Format:WA,RGBA_PVRTC_2BPPV1_Format:jA,RGBA_PVRTC_4BPPV1_Format:GA,RGBA_S3TC_DXT1_Format:t1,RGBA_S3TC_DXT3_Format:e1,RGBA_S3TC_DXT5_Format:n1,RGBDepthPacking:xY,RGBFormat:VN,RGBIntegerFormat:yY,RGB_BPTC_SIGNED_Format:lM,RGB_BPTC_UNSIGNED_Format:uM,RGB_ETC1_Format:qA,RGB_ETC2_Format:$A,RGB_PVRTC_2BPPV1_Format:HA,RGB_PVRTC_4BPPV1_Format:VA,RGB_S3TC_DXT1_Format:Jx,RGDepthPacking:SY,RGFormat:jN,RGIntegerFormat:IC,RawShaderMaterial:w8,Ray:C_,Raycaster:x3,RectAreaLight:G8,RedFormat:OC,RedIntegerFormat:AS,ReinhardToneMapping:DH,RenderTarget:NC,RenderTarget3D:fQ,RenderTargetArray:hQ,RepeatWrapping:R1,ReplaceStencilOp:TY,ReverseSubtractEquation:dH,RingGeometry:ZC,SIGNED_RED_GREEN_RGTC2_Format:hM,SIGNED_RED_RGTC1_Format:cM,SRGBColorSpace:la,SRGBTransfer:ki,Scene:ZN,ShaderChunk:Vn,ShaderLib:uc,ShaderMaterial:Au,ShadowMaterial:T8,Shape:Kg,ShapeGeometry:QC,ShapePath:NQ,ShapeUtils:Df,ShortType:zN,Skeleton:VC,SkeletonHelper:xQ,SkinnedMesh:l8,Source:zp,Sphere:da,SphereGeometry:Ty,Spherical:S3,SphericalHarmonics3:j8,SplineCurve:o3,SpotLight:B8,SpotLightHelper:bQ,Sprite:QN,SpriteMaterial:FC,SrcAlphaFactor:DA,SrcAlphaSaturateFactor:TH,SrcColorFactor:vH,StaticCopyUsage:HY,StaticDrawUsage:N1,StaticReadUsage:BY,StereoCamera:WZ,StreamCopyUsage:jY,StreamDrawUsage:zY,StreamReadUsage:VY,StringKeyframeTrack:Ay,SubtractEquation:hH,SubtractiveBlending:xD,TOUCH:fY,TangentSpaceNormalMap:hm,TetrahedronGeometry:JC,Texture:Xr,TextureLoader:BZ,TextureUtils:FQ,TimestampQuery:$Y,TorusGeometry:t2,TorusKnotGeometry:e2,Triangle:Qo,TriangleFanDrawMode:bY,TriangleStripDrawMode:_Y,TrianglesDrawMode:vY,TubeGeometry:PS,UVMapping:AC,Uint16BufferAttribute:YN,Uint32BufferAttribute:KN,Uint8BufferAttribute:OK,Uint8ClampedBufferAttribute:IK,Uniform:b3,UniformsGroup:pQ,UniformsLib:Pe,UniformsUtils:i8,UnsignedByteType:bc,UnsignedInt248Type:oy,UnsignedInt5999Type:BN,UnsignedIntType:fd,UnsignedShort4444Type:CC,UnsignedShort5551Type:RC,UnsignedShortType:$0,VSMShadowMap:oc,Vector2:de,Vector3:pt,Vector4:di,VectorKeyframeTrack:H1,VideoFrameTexture:QK,VideoTexture:d8,WebGL3DRenderTarget:yK,WebGLArrayRenderTarget:gK,WebGLCoordinateSystem:pc,WebGLCubeRenderTarget:s8,WebGLRenderTarget:Vf,WebGLRenderer:s9,WebGLUtils:r9,WebGPUCoordinateSystem:L1,WebXRController:eA,WireframeGeometry:E8,WrapAroundEnding:D1,ZeroCurvatureEnding:kg,ZeroFactor:gH,ZeroSlopeEnding:zg,ZeroStencilOp:EY,createCanvasElement:JH},Symbol.toStringTag,{value:"Module"}));var kO={exports:{}},Nh={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E4;function Tit(){return E4||(E4=1,Nh.ConcurrentRoot=1,Nh.ContinuousEventPriority=8,Nh.DefaultEventPriority=32,Nh.DiscreteEventPriority=2,Nh.IdleEventPriority=268435456,Nh.LegacyRoot=0,Nh.NoEventPriority=0),Nh}var T4;function wit(){return T4||(T4=1,kO.exports=Tit()),kO.exports}var iA=wit(),zO={exports:{}},BO={},FO={exports:{}},VO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w4;function Ait(){if(w4)return VO;w4=1;var i=w_();function e(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var n=typeof Object.is=="function"?Object.is:e,r=i.useState,s=i.useEffect,a=i.useLayoutEffect,o=i.useDebugValue;function l(m,y){var _=y(),x=r({inst:{value:_,getSnapshot:y}}),S=x[0].inst,T=x[1];return a(function(){S.value=_,S.getSnapshot=y,u(S)&&T({inst:S})},[m,_,y]),s(function(){return u(S)&&T({inst:S}),m(function(){u(S)&&T({inst:S})})},[m]),o(_),_}function u(m){var y=m.getSnapshot;m=m.value;try{var _=y();return!n(m,_)}catch{return!0}}function f(m,y){return y()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return VO.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:d,VO}var A4;function Mit(){return A4||(A4=1,FO.exports=Ait()),FO.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M4;function Cit(){if(M4)return BO;M4=1;var i=w_(),e=Mit();function n(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,a=i.useRef,o=i.useEffect,l=i.useMemo,u=i.useDebugValue;return BO.useSyncExternalStoreWithSelector=function(f,d,m,y,_){var x=a(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=l(function(){function b(k){if(!M){if(M=!0,R=k,k=y(k),_!==void 0&&S.hasValue){var N=S.value;if(_(N,k))return A=N}return A=k}if(N=A,r(R,k))return N;var L=y(k);return _!==void 0&&_(N,L)?(R=k,N):(R=k,A=L)}var M=!1,R,A,I=m===void 0?null:m;return[function(){return b(d())},I===null?void 0:function(){return b(I())}]},[d,m,y,_]);var T=s(f,x[0],x[1]);return o(function(){S.hasValue=!0,S.value=T},[T]),u(T),T},BO}var C4;function Rit(){return C4||(C4=1,zO.exports=Cit()),zO.exports}var Oit=Rit();const Iit=fm(Oit),R4=i=>{let e;const n=new Set,r=(f,d)=>{const m=typeof f=="function"?f(e):f;if(!Object.is(m,e)){const y=e;e=d??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(_=>_(e,y))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>u,subscribe:f=>(n.add(f),()=>n.delete(f))},u=e=i(r,s,l);return l},a9=i=>i?R4(i):R4,{useSyncExternalStoreWithSelector:Dit}=Iit,Pit=i=>i;function Nit(i,e=Pit,n){const r=Dit(i.subscribe,i.getState,i.getInitialState,e,n);return pn.useDebugValue(r),r}const O4=(i,e)=>{const n=a9(i),r=(s,a=e)=>Nit(n,s,a);return Object.assign(r,n),r},Lit=(i,e)=>i?O4(i,e):O4;var HO={exports:{}},GO={exports:{}},jO={exports:{}},qO={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I4;function Uit(){return I4||(I4=1,function(i){function e(q,W){var K=q.length;q.push(W);t:for(;0<K;){var et=K-1>>>1,Q=q[et];if(0<s(Q,W))q[et]=W,q[K]=Q,K=et;else break t}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var W=q[0],K=q.pop();if(K!==W){q[0]=K;t:for(var et=0,Q=q.length,dt=Q>>>1;et<dt;){var yt=2*(et+1)-1,xt=q[yt],nt=yt+1,ht=q[nt];if(0>s(xt,K))nt<Q&&0>s(ht,xt)?(q[et]=ht,q[nt]=K,et=nt):(q[et]=xt,q[yt]=K,et=yt);else if(nt<Q&&0>s(ht,K))q[et]=ht,q[nt]=K,et=nt;else break t}}return W}function s(q,W){var K=q.sortIndex-W.sortIndex;return K!==0?K:q.id-W.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();i.unstable_now=function(){return o.now()-l}}var u=[],f=[],d=1,m=null,y=3,_=!1,x=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function R(q){for(var W=n(f);W!==null;){if(W.callback===null)r(f);else if(W.startTime<=q)r(f),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(f)}}function A(q){if(S=!1,R(q),!x)if(n(u)!==null)x=!0,X();else{var W=n(f);W!==null&&J(A,W.startTime-q)}}var I=!1,k=-1,N=5,L=-1;function U(){return!(i.unstable_now()-L<N)}function O(){if(I){var q=i.unstable_now();L=q;var W=!0;try{t:{x=!1,S&&(S=!1,b(k),k=-1),_=!0;var K=y;try{e:{for(R(q),m=n(u);m!==null&&!(m.expirationTime>q&&U());){var et=m.callback;if(typeof et=="function"){m.callback=null,y=m.priorityLevel;var Q=et(m.expirationTime<=q);if(q=i.unstable_now(),typeof Q=="function"){m.callback=Q,R(q),W=!0;break e}m===n(u)&&r(u),R(q)}else r(u);m=n(u)}if(m!==null)W=!0;else{var dt=n(f);dt!==null&&J(A,dt.startTime-q),W=!1}}break t}finally{m=null,y=K,_=!1}W=void 0}}finally{W?F():I=!1}}}var F;if(typeof M=="function")F=function(){M(O)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,V=H.port2;H.port1.onmessage=O,F=function(){V.postMessage(null)}}else F=function(){T(O,0)};function X(){I||(I=!0,F())}function J(q,W){k=T(function(){q(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(q){q.callback=null},i.unstable_continueExecution=function(){x||_||(x=!0,X())},i.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<q?Math.floor(1e3/q):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return n(u)},i.unstable_next=function(q){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var K=y;y=W;try{return q()}finally{y=K}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(q,W){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var K=y;y=q;try{return W()}finally{y=K}},i.unstable_scheduleCallback=function(q,W,K){var et=i.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?et+K:et):K=et,q){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=K+Q,q={id:d++,callback:W,priorityLevel:q,startTime:K,expirationTime:Q,sortIndex:-1},K>et?(q.sortIndex=K,e(f,q),n(u)===null&&q===n(f)&&(S?(b(k),k=-1):S=!0,J(A,K-et))):(q.sortIndex=Q,e(u,q),x||_||(x=!0,X())),q},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(q){var W=y;return function(){var K=y;y=W;try{return q.apply(this,arguments)}finally{y=K}}}}(qO)),qO}var D4;function o9(){return D4||(D4=1,jO.exports=Uit()),jO.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P4;function kit(){return P4||(P4=1,function(i){i.exports=function(e){function n(p,g,w,P){return new sb(p,g,w,P)}function r(){}function s(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)g+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(p){return p===null||typeof p!="object"?null:(p=ju&&p[ju]||p["@@iterator"],typeof p=="function"?p:null)}function o(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===ub?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case $c:return"Fragment";case Lo:return"Portal";case Ky:return"Profiler";case Gm:return"StrictMode";case Zy:return"Suspense";case jd:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case vl:return(p.displayName||"Context")+".Provider";case ob:return(p._context.displayName||"Context")+".Consumer";case qm:var g=p.render;return p=p.displayName,p||(p=g.displayName||g.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case Qy:return g=p.displayName||null,g!==null?g:o(p.type)||"Memo";case Uo:g=p._payload,p=p._init;try{return o(p(g))}catch{}}return null}function l(p){if(Ql===void 0)try{throw Error()}catch(w){var g=w.stack.trim().match(/\n( *(at )?)/);Ql=g&&g[1]||"",qu=-1<w.stack.indexOf(`
    at`)?" (<anonymous>)":-1<w.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ql+p+qu}function u(p,g){if(!p||uh)return"";uh=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var P={DetermineComponentFrameRoot:function(){try{if(g){var De=function(){throw Error()};if(Object.defineProperty(De.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(De,[])}catch(xn){var Ue=xn}Reflect.construct(p,[],De)}else{try{De.call()}catch(xn){Ue=xn}p.call(De.prototype)}}else{try{throw Error()}catch(xn){Ue=xn}(De=p())&&typeof De.catch=="function"&&De.catch(function(){})}}catch(xn){if(xn&&Ue&&typeof xn.stack=="string")return[xn.stack,Ue.stack]}return[null,null]}};P.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var B=Object.getOwnPropertyDescriptor(P.DetermineComponentFrameRoot,"name");B&&B.configurable&&Object.defineProperty(P.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var $=P.DetermineComponentFrameRoot(),ot=$[0],_t=$[1];if(ot&&_t){var Nt=ot.split(`
`),ne=_t.split(`
`);for(B=P=0;P<Nt.length&&!Nt[P].includes("DetermineComponentFrameRoot");)P++;for(;B<ne.length&&!ne[B].includes("DetermineComponentFrameRoot");)B++;if(P===Nt.length||B===ne.length)for(P=Nt.length-1,B=ne.length-1;1<=P&&0<=B&&Nt[P]!==ne[B];)B--;for(;1<=P&&0<=B;P--,B--)if(Nt[P]!==ne[B]){if(P!==1||B!==1)do if(P--,B--,0>B||Nt[P]!==ne[B]){var ye=`
`+Nt[P].replace(" at new "," at ");return p.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",p.displayName)),ye}while(1<=P&&0<=B);break}}}finally{uh=!1,Error.prepareStackTrace=w}return(w=p?p.displayName||p.name:"")?l(w):""}function f(p){switch(p.tag){case 26:case 27:case 5:return l(p.type);case 16:return l("Lazy");case 13:return l("Suspense");case 19:return l("SuspenseList");case 0:case 15:return p=u(p.type,!1),p;case 11:return p=u(p.type.render,!1),p;case 1:return p=u(p.type,!0),p;default:return""}}function d(p){try{var g="";do g+=f(p),p=p.return;while(p);return g}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}function m(p){var g=p,w=p;if(p.alternate)for(;g.return;)g=g.return;else{p=g;do g=p,(g.flags&4098)!==0&&(w=g.return),p=g.return;while(p)}return g.tag===3?w:null}function y(p){if(m(p)!==p)throw Error(s(188))}function _(p){var g=p.alternate;if(!g){if(g=m(p),g===null)throw Error(s(188));return g!==p?null:p}for(var w=p,P=g;;){var B=w.return;if(B===null)break;var $=B.alternate;if($===null){if(P=B.return,P!==null){w=P;continue}break}if(B.child===$.child){for($=B.child;$;){if($===w)return y(B),p;if($===P)return y(B),g;$=$.sibling}throw Error(s(188))}if(w.return!==P.return)w=B,P=$;else{for(var ot=!1,_t=B.child;_t;){if(_t===w){ot=!0,w=B,P=$;break}if(_t===P){ot=!0,P=B,w=$;break}_t=_t.sibling}if(!ot){for(_t=$.child;_t;){if(_t===w){ot=!0,w=$,P=B;break}if(_t===P){ot=!0,P=$,w=B;break}_t=_t.sibling}if(!ot)throw Error(s(189))}}if(w.alternate!==P)throw Error(s(190))}if(w.tag!==3)throw Error(s(188));return w.stateNode.current===w?p:g}function x(p){var g=p.tag;if(g===5||g===26||g===27||g===6)return p;for(p=p.child;p!==null;){if(g=x(p),g!==null)return g;p=p.sibling}return null}function S(p){var g=p.tag;if(g===5||g===26||g===27||g===6)return p;for(p=p.child;p!==null;){if(p.tag!==4&&(g=S(p),g!==null))return g;p=p.sibling}return null}function T(p){return{current:p}}function b(p){0>Yu||(p.current=Ar[Yu],Ar[Yu]=null,Yu--)}function M(p,g){Yu++,Ar[Yu]=p.current,p.current=g}function R(p){return p>>>=0,p===0?32:31-(KE(p)/ZE|0)|0}function A(p){var g=p&42;if(g!==0)return g;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function I(p,g){var w=p.pendingLanes;if(w===0)return 0;var P=0,B=p.suspendedLanes,$=p.pingedLanes,ot=p.warmLanes;p=p.finishedLanes!==0;var _t=w&134217727;return _t!==0?(w=_t&~B,w!==0?P=A(w):($&=_t,$!==0?P=A($):p||(ot=_t&~ot,ot!==0&&(P=A(ot))))):(_t=w&~B,_t!==0?P=A(_t):$!==0?P=A($):p||(ot=w&~ot,ot!==0&&(P=A(ot)))),P===0?0:g!==0&&g!==P&&(g&B)===0&&(B=P&-P,ot=g&-g,B>=ot||B===32&&(ot&4194176)!==0)?g:P}function k(p,g){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&g)===0}function N(p,g){switch(p){case 1:case 2:case 4:case 8:return g+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L(){var p=tu;return tu<<=1,(tu&4194176)===0&&(tu=128),p}function U(){var p=hh;return hh<<=1,(hh&62914560)===0&&(hh=4194304),p}function O(p){for(var g=[],w=0;31>w;w++)g.push(p);return g}function F(p,g){p.pendingLanes|=g,g!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function H(p,g,w,P,B,$){var ot=p.pendingLanes;p.pendingLanes=w,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=w,p.entangledLanes&=w,p.errorRecoveryDisabledLanes&=w,p.shellSuspendCounter=0;var _t=p.entanglements,Nt=p.expirationTimes,ne=p.hiddenUpdates;for(w=ot&~w;0<w;){var ye=31-na(w),De=1<<ye;_t[ye]=0,Nt[ye]=-1;var Ue=ne[ye];if(Ue!==null)for(ne[ye]=null,ye=0;ye<Ue.length;ye++){var xn=Ue[ye];xn!==null&&(xn.lane&=-536870913)}w&=~De}P!==0&&V(p,P,0),$!==0&&B===0&&p.tag!==0&&(p.suspendedLanes|=$&~(ot&~g))}function V(p,g,w){p.pendingLanes|=g,p.suspendedLanes&=~g;var P=31-na(g);p.entangledLanes|=g,p.entanglements[P]=p.entanglements[P]|1073741824|w&4194218}function X(p,g){var w=p.entangledLanes|=g;for(p=p.entanglements;w;){var P=31-na(w),B=1<<P;B&g|p[P]&g&&(p[P]|=g),w&=~B}}function J(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function q(p){if(Aa&&typeof Aa.onCommitFiberRoot=="function")try{Aa.onCommitFiberRoot(Mr,p,void 0,(p.current.flags&128)===128)}catch{}}function W(p){if(typeof tT=="function"&&hs(p),Aa&&typeof Aa.setStrictMode=="function")try{Aa.setStrictMode(Mr,p)}catch{}}function K(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}function et(p,g){if(typeof p=="object"&&p!==null){var w=Cb.get(p);return w!==void 0?w:(g={value:p,source:g,stack:d(g)},Cb.set(p,g),g)}return{value:p,source:g,stack:d(g)}}function Q(p,g){dh[ph++]=Jd,dh[ph++]=mh,mh=p,Jd=g}function dt(p,g,w){Ja[to++]=xl,Ja[to++]=Sl,Ja[to++]=Jc,Jc=p;var P=xl;p=Sl;var B=32-na(P)-1;P&=~(1<<B),w+=1;var $=32-na(g)+B;if(30<$){var ot=B-B%5;$=(P&(1<<ot)-1).toString(32),P>>=ot,B-=ot,xl=1<<32-na(g)+B|w<<B|P,Sl=$+p}else xl=1<<$|w<<B|P,Sl=p}function yt(p){p.return!==null&&(Q(p,1),dt(p,1,0))}function xt(p){for(;p===mh;)mh=dh[--ph],dh[ph]=null,Jd=dh[--ph],dh[ph]=null;for(;p===Jc;)Jc=Ja[--to],Ja[to]=null,Sl=Ja[--to],Ja[to]=null,xl=Ja[--to],Ja[to]=null}function nt(p,g){M(eu,g),M(tp,p),M(Zr,null),p=mE(g),b(Zr),M(Zr,p)}function ht(){b(Zr),b(tp),b(eu)}function ft(p){p.memoizedState!==null&&M(gh,p);var g=Zr.current,w=Xd(g,p.type);g!==w&&(M(tp,p),M(Zr,w))}function gt(p){tp.current===p&&(b(Zr),b(tp)),gh.current===p&&(b(gh),ta?_l._currentValue=Xc:_l._currentValue2=Xc)}function wt(p){var g=Error(s(418,""));throw Ht(et(g,p)),tg}function Kt(p,g){if(!As)throw Error(s(175));FE(p.stateNode,p.type,p.memoizedProps,g,p)||wt(p)}function zt(p){for(Ms=p.return;Ms;)switch(Ms.tag){case 3:case 27:ds=!0;return;case 5:case 13:ds=!1;return;default:Ms=Ms.return}}function te(p){if(!As||p!==Ms)return!1;if(!ei)return zt(p),ei=!0,!1;var g=!1;if(Pi?p.tag!==3&&p.tag!==27&&(p.tag!==5||ov(p.type)&&!Mn(p.type,p.memoizedProps))&&(g=!0):p.tag!==3&&(p.tag!==5||ov(p.type)&&!Mn(p.type,p.memoizedProps))&&(g=!0),g&&Cs&&wt(p),zt(p),p.tag===13){if(!As)throw Error(s(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));Cs=HE(p)}else Cs=Ms?Tb(p.stateNode):null;return!0}function Pt(){As&&(Cs=Ms=null,ei=!1)}function Ht(p){Bo===null?Bo=[p]:Bo.push(p)}function at(){for(var p=yh,g=El=yh=0;g<p;){var w=Fo[g];Fo[g++]=null;var P=Fo[g];Fo[g++]=null;var B=Fo[g];Fo[g++]=null;var $=Fo[g];if(Fo[g++]=null,P!==null&&B!==null){var ot=P.pending;ot===null?B.next=B:(B.next=ot.next,ot.next=B),P.pending=B}$!==0&&ae(w,B,$)}}function ue(p,g,w,P){Fo[yh++]=p,Fo[yh++]=g,Fo[yh++]=w,Fo[yh++]=P,El|=P,p.lanes|=P,p=p.alternate,p!==null&&(p.lanes|=P)}function Jt(p,g,w,P){return ue(p,g,w,P),Ce(p)}function se(p,g){return ue(p,null,null,g),Ce(p)}function ae(p,g,w){p.lanes|=w;var P=p.alternate;P!==null&&(P.lanes|=w);for(var B=!1,$=p.return;$!==null;)$.childLanes|=w,P=$.alternate,P!==null&&(P.childLanes|=w),$.tag===22&&(p=$.stateNode,p===null||p._visibility&1||(B=!0)),p=$,$=$.return;B&&g!==null&&p.tag===3&&($=p.stateNode,B=31-na(w),$=$.hiddenUpdates,p=$[B],p===null?$[B]=[g]:p.push(g),g.lane=w|536870912)}function Ce(p){if(50<up)throw up=0,Sv=null,Error(s(185));for(var g=p.return;g!==null;)p=g,g=p.return;return p.tag===3?p.stateNode:null}function le(p){p!==Ku&&p.next===null&&(Ku===null?eg=Ku=p:Ku=Ku.next=p),Bi=!0,vh||(vh=!0,bt(G))}function ct(p,g){if(!Rb&&Bi){Rb=!0;do for(var w=!1,P=eg;P!==null;){if(p!==0){var B=P.pendingLanes;if(B===0)var $=0;else{var ot=P.suspendedLanes,_t=P.pingedLanes;$=(1<<31-na(42|p)+1)-1,$&=B&~(ot&~_t),$=$&201326677?$&201326677|1:$?$|2:0}$!==0&&(w=!0,Ct(P,$))}else $=Kn,$=I(P,P===xi?$:0),($&3)===0||k(P,$)||(w=!0,Ct(P,$));P=P.next}while(w);Rb=!1}}function G(){Bi=vh=!1;var p=0;ep!==0&&(_E()&&(p=ep),ep=0);for(var g=zo(),w=null,P=eg;P!==null;){var B=P.next,$=lt(P,g);$===0?(P.next=null,w===null?eg=B:w.next=B,B===null&&(Ku=w)):(w=P,(p!==0||($&3)!==0)&&(Bi=!0)),P=B}ct(p)}function lt(p,g){for(var w=p.suspendedLanes,P=p.pingedLanes,B=p.expirationTimes,$=p.pendingLanes&-62914561;0<$;){var ot=31-na($),_t=1<<ot,Nt=B[ot];Nt===-1?((_t&w)===0||(_t&P)!==0)&&(B[ot]=N(_t,g)):Nt<=g&&(p.expiredLanes|=_t),$&=~_t}if(g=xi,w=Kn,w=I(p,p===g?w:0),P=p.callbackNode,w===0||p===g&&Ci===2||p.cancelPendingCommit!==null)return P!==null&&P!==null&&fv(P),p.callbackNode=null,p.callbackPriority=0;if((w&3)===0||k(p,w)){if(g=w&-w,g===p.callbackPriority)return g;switch(P!==null&&fv(P),J(w)){case 2:case 8:w=JE;break;case 32:w=pv;break;case 268435456:w=_R;break;default:w=pv}return P=mt.bind(null,p),w=Jm(w,P),p.callbackPriority=g,p.callbackNode=w,g}return P!==null&&P!==null&&fv(P),p.callbackPriority=2,p.callbackNode=null,2}function mt(p,g){var w=p.callbackNode;if(yl()&&p.callbackNode!==w)return null;var P=Kn;return P=I(p,p===xi?P:0),P===0?null:(Vc(p,P,g),lt(p,zo()),p.callbackNode!=null&&p.callbackNode===w?mt.bind(null,p):null)}function Ct(p,g){if(yl())return null;Vc(p,g,!0)}function bt(p){pb?Xu(function(){(oi&6)!==0?Jm(dv,p):p()}):Jm(dv,p)}function Mt(){return ep===0&&(ep=L()),ep}function Lt(p,g){if(np===null){var w=np=[];_h=0,eo=Mt(),bh={status:"pending",value:void 0,then:function(P){w.push(P)}}}return _h++,g.then(Qt,Qt),g}function Qt(){if(--_h===0&&np!==null){bh!==null&&(bh.status="fulfilled");var p=np;np=null,eo=0,bh=null;for(var g=0;g<p.length;g++)(0,p[g])()}}function Oe(p,g){var w=[],P={status:"pending",value:null,reason:null,then:function(B){w.push(B)}};return p.then(function(){P.status="fulfilled",P.value=g;for(var B=0;B<w.length;B++)(0,w[B])(g)},function(B){for(P.status="rejected",P.reason=B,B=0;B<w.length;B++)(0,w[B])(void 0)}),P}function jt(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ve(p,g){p=p.updateQueue,g.updateQueue===p&&(g.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function we(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function Me(p,g,w){var P=p.updateQueue;if(P===null)return null;if(P=P.shared,(oi&2)!==0){var B=P.pending;return B===null?g.next=g:(g.next=B.next,B.next=g),P.pending=g,g=Ce(p),ae(p,null,w),g}return ue(p,P,g,w),Ce(p)}function Zt(p,g,w){if(g=g.updateQueue,g!==null&&(g=g.shared,(w&4194176)!==0)){var P=g.lanes;P&=p.pendingLanes,w|=P,g.lanes=w,X(p,w)}}function Re(p,g){var w=p.updateQueue,P=p.alternate;if(P!==null&&(P=P.updateQueue,w===P)){var B=null,$=null;if(w=w.firstBaseUpdate,w!==null){do{var ot={lane:w.lane,tag:w.tag,payload:w.payload,callback:null,next:null};$===null?B=$=ot:$=$.next=ot,w=w.next}while(w!==null);$===null?B=$=g:$=$.next=g}else B=$=g;w={baseState:P.baseState,firstBaseUpdate:B,lastBaseUpdate:$,shared:P.shared,callbacks:P.callbacks},p.updateQueue=w;return}p=w.lastBaseUpdate,p===null?w.firstBaseUpdate=g:p.next=g,w.lastBaseUpdate=g}function Ie(){if(xh){var p=bh;if(p!==null)throw p}}function en(p,g,w,P){xh=!1;var B=p.updateQueue;Zu=!1;var $=B.firstBaseUpdate,ot=B.lastBaseUpdate,_t=B.shared.pending;if(_t!==null){B.shared.pending=null;var Nt=_t,ne=Nt.next;Nt.next=null,ot===null?$=ne:ot.next=ne,ot=Nt;var ye=p.alternate;ye!==null&&(ye=ye.updateQueue,_t=ye.lastBaseUpdate,_t!==ot&&(_t===null?ye.firstBaseUpdate=ne:_t.next=ne,ye.lastBaseUpdate=Nt))}if($!==null){var De=B.baseState;ot=0,ye=ne=Nt=null,_t=$;do{var Ue=_t.lane&-536870913,xn=Ue!==_t.lane;if(xn?(Kn&Ue)===Ue:(P&Ue)===Ue){Ue!==0&&Ue===eo&&(xh=!0),ye!==null&&(ye=ye.next={lane:0,tag:_t.tag,payload:_t.payload,callback:null,next:null});t:{var uo=p,uf=_t;Ue=g;var cf=w;switch(uf.tag){case 1:if(uo=uf.payload,typeof uo=="function"){De=uo.call(cf,De,Ue);break t}De=uo;break t;case 3:uo.flags=uo.flags&-65537|128;case 0:if(uo=uf.payload,Ue=typeof uo=="function"?uo.call(cf,De,Ue):uo,Ue==null)break t;De=Yy({},De,Ue);break t;case 2:Zu=!0}}Ue=_t.callback,Ue!==null&&(p.flags|=64,xn&&(p.flags|=8192),xn=B.callbacks,xn===null?B.callbacks=[Ue]:xn.push(Ue))}else xn={lane:Ue,tag:_t.tag,payload:_t.payload,callback:_t.callback,next:null},ye===null?(ne=ye=xn,Nt=De):ye=ye.next=xn,ot|=Ue;if(_t=_t.next,_t===null){if(_t=B.shared.pending,_t===null)break;xn=_t,_t=xn.next,xn.next=null,B.lastBaseUpdate=xn,B.shared.pending=null}}while(!0);ye===null&&(Nt=De),B.baseState=Nt,B.firstBaseUpdate=ne,B.lastBaseUpdate=ye,$===null&&(B.shared.lanes=0),oo|=ot,p.lanes=ot,p.memoizedState=De}}function At(p,g){if(typeof p!="function")throw Error(s(191,p));p.call(g)}function Te(p,g){var w=p.callbacks;if(w!==null)for(p.callbacks=null,p=0;p<w.length;p++)At(w[p],g)}function Xt(p,g){if(Ma(p,g))return!0;if(typeof p!="object"||p===null||typeof g!="object"||g===null)return!1;var w=Object.keys(p),P=Object.keys(g);if(w.length!==P.length)return!1;for(P=0;P<w.length;P++){var B=w[P];if(!nu.call(g,B)||!Ma(p[B],g[B]))return!1}return!0}function re(p){return p=p.status,p==="fulfilled"||p==="rejected"}function Ae(){}function Ee(p,g,w){switch(w=p[w],w===void 0?p.push(g):w!==g&&(g.then(Ae,Ae),g=w),g.status){case"fulfilled":return g.value;case"rejected":throw p=g.reason,p===ip?Error(s(483)):p;default:if(typeof g.status=="string")g.then(Ae,Ae);else{if(p=xi,p!==null&&100<p.shellSuspendCounter)throw Error(s(482));p=g,p.status="pending",p.then(function(P){if(g.status==="pending"){var B=g;B.status="fulfilled",B.value=P}},function(P){if(g.status==="pending"){var B=g;B.status="rejected",B.reason=P}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw p=g.reason,p===ip?Error(s(483)):p}throw tf=g,ip}}function sn(){if(tf===null)throw Error(s(459));var p=tf;return tf=null,p}function Wn(p){var g=nf;return nf+=1,ef===null&&(ef=[]),Ee(ef,p,g)}function ze(p,g){g=g.props.ref,p.ref=g!==void 0?g:null}function Qe(p,g){throw g.$$typeof===hR?Error(s(525)):(p=Object.prototype.toString.call(g),Error(s(31,p==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":p)))}function Lr(p){var g=p._init;return g(p._payload)}function Qn(p){function g(Ft,Et){if(p){var Wt=Ft.deletions;Wt===null?(Ft.deletions=[Et],Ft.flags|=16):Wt.push(Et)}}function w(Ft,Et){if(!p)return null;for(;Et!==null;)g(Ft,Et),Et=Et.sibling;return null}function P(Ft){for(var Et=new Map;Ft!==null;)Ft.key!==null?Et.set(Ft.key,Ft):Et.set(Ft.index,Ft),Ft=Ft.sibling;return Et}function B(Ft,Et){return Ft=No(Ft,Et),Ft.index=0,Ft.sibling=null,Ft}function $(Ft,Et,Wt){return Ft.index=Wt,p?(Wt=Ft.alternate,Wt!==null?(Wt=Wt.index,Wt<Et?(Ft.flags|=33554434,Et):Wt):(Ft.flags|=33554434,Et)):(Ft.flags|=1048576,Et)}function ot(Ft){return p&&Ft.alternate===null&&(Ft.flags|=33554434),Ft}function _t(Ft,Et,Wt,ge){return Et===null||Et.tag!==6?(Et=Wy(Wt,Ft.mode,ge),Et.return=Ft,Et):(Et=B(Et,Wt),Et.return=Ft,Et)}function Nt(Ft,Et,Wt,ge){var Xe=Wt.type;return Xe===$c?ye(Ft,Et,Wt.props.children,ge,Wt.key):Et!==null&&(Et.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===Uo&&Lr(Xe)===Et.type)?(Et=B(Et,Wt.props),ze(Et,Wt),Et.return=Ft,Et):(Et=Zl(Wt.type,Wt.key,Wt.props,null,Ft.mode,ge),ze(Et,Wt),Et.return=Ft,Et)}function ne(Ft,Et,Wt,ge){return Et===null||Et.tag!==4||Et.stateNode.containerInfo!==Wt.containerInfo||Et.stateNode.implementation!==Wt.implementation?(Et=ab(Wt,Ft.mode,ge),Et.return=Ft,Et):(Et=B(Et,Wt.children||[]),Et.return=Ft,Et)}function ye(Ft,Et,Wt,ge,Xe){return Et===null||Et.tag!==7?(Et=dr(Wt,Ft.mode,ge,Xe),Et.return=Ft,Et):(Et=B(Et,Wt),Et.return=Ft,Et)}function De(Ft,Et,Wt){if(typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint")return Et=Wy(""+Et,Ft.mode,Wt),Et.return=Ft,Et;if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case Hm:return Wt=Zl(Et.type,Et.key,Et.props,null,Ft.mode,Wt),ze(Wt,Et),Wt.return=Ft,Wt;case Lo:return Et=ab(Et,Ft.mode,Wt),Et.return=Ft,Et;case Uo:var ge=Et._init;return Et=ge(Et._payload),De(Ft,Et,Wt)}if(qd(Et)||a(Et))return Et=dr(Et,Ft.mode,Wt,null),Et.return=Ft,Et;if(typeof Et.then=="function")return De(Ft,Wn(Et),Wt);if(Et.$$typeof===vl)return De(Ft,Yt(Ft,Et),Wt);Qe(Ft,Et)}return null}function Ue(Ft,Et,Wt,ge){var Xe=Et!==null?Et.key:null;if(typeof Wt=="string"&&Wt!==""||typeof Wt=="number"||typeof Wt=="bigint")return Xe!==null?null:_t(Ft,Et,""+Wt,ge);if(typeof Wt=="object"&&Wt!==null){switch(Wt.$$typeof){case Hm:return Wt.key===Xe?Nt(Ft,Et,Wt,ge):null;case Lo:return Wt.key===Xe?ne(Ft,Et,Wt,ge):null;case Uo:return Xe=Wt._init,Wt=Xe(Wt._payload),Ue(Ft,Et,Wt,ge)}if(qd(Wt)||a(Wt))return Xe!==null?null:ye(Ft,Et,Wt,ge,null);if(typeof Wt.then=="function")return Ue(Ft,Et,Wn(Wt),ge);if(Wt.$$typeof===vl)return Ue(Ft,Et,Yt(Ft,Wt),ge);Qe(Ft,Wt)}return null}function xn(Ft,Et,Wt,ge,Xe){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return Ft=Ft.get(Wt)||null,_t(Et,Ft,""+ge,Xe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case Hm:return Ft=Ft.get(ge.key===null?Wt:ge.key)||null,Nt(Et,Ft,ge,Xe);case Lo:return Ft=Ft.get(ge.key===null?Wt:ge.key)||null,ne(Et,Ft,ge,Xe);case Uo:var Xi=ge._init;return ge=Xi(ge._payload),xn(Ft,Et,Wt,ge,Xe)}if(qd(ge)||a(ge))return Ft=Ft.get(Wt)||null,ye(Et,Ft,ge,Xe,null);if(typeof ge.then=="function")return xn(Ft,Et,Wt,Wn(ge),Xe);if(ge.$$typeof===vl)return xn(Ft,Et,Wt,Yt(Et,ge),Xe);Qe(Et,ge)}return null}function uo(Ft,Et,Wt,ge){for(var Xe=null,Xi=null,hn=Et,fi=Et=0,Cr=null;hn!==null&&fi<Wt.length;fi++){hn.index>fi?(Cr=hn,hn=null):Cr=hn.sibling;var qn=Ue(Ft,hn,Wt[fi],ge);if(qn===null){hn===null&&(hn=Cr);break}p&&hn&&qn.alternate===null&&g(Ft,hn),Et=$(qn,Et,fi),Xi===null?Xe=qn:Xi.sibling=qn,Xi=qn,hn=Cr}if(fi===Wt.length)return w(Ft,hn),ei&&Q(Ft,fi),Xe;if(hn===null){for(;fi<Wt.length;fi++)hn=De(Ft,Wt[fi],ge),hn!==null&&(Et=$(hn,Et,fi),Xi===null?Xe=hn:Xi.sibling=hn,Xi=hn);return ei&&Q(Ft,fi),Xe}for(hn=P(hn);fi<Wt.length;fi++)Cr=xn(hn,Ft,fi,Wt[fi],ge),Cr!==null&&(p&&Cr.alternate!==null&&hn.delete(Cr.key===null?fi:Cr.key),Et=$(Cr,Et,fi),Xi===null?Xe=Cr:Xi.sibling=Cr,Xi=Cr);return p&&hn.forEach(function(cu){return g(Ft,cu)}),ei&&Q(Ft,fi),Xe}function uf(Ft,Et,Wt,ge){if(Wt==null)throw Error(s(151));for(var Xe=null,Xi=null,hn=Et,fi=Et=0,Cr=null,qn=Wt.next();hn!==null&&!qn.done;fi++,qn=Wt.next()){hn.index>fi?(Cr=hn,hn=null):Cr=hn.sibling;var cu=Ue(Ft,hn,qn.value,ge);if(cu===null){hn===null&&(hn=Cr);break}p&&hn&&cu.alternate===null&&g(Ft,hn),Et=$(cu,Et,fi),Xi===null?Xe=cu:Xi.sibling=cu,Xi=cu,hn=Cr}if(qn.done)return w(Ft,hn),ei&&Q(Ft,fi),Xe;if(hn===null){for(;!qn.done;fi++,qn=Wt.next())qn=De(Ft,qn.value,ge),qn!==null&&(Et=$(qn,Et,fi),Xi===null?Xe=qn:Xi.sibling=qn,Xi=qn);return ei&&Q(Ft,fi),Xe}for(hn=P(hn);!qn.done;fi++,qn=Wt.next())qn=xn(hn,Ft,fi,qn.value,ge),qn!==null&&(p&&qn.alternate!==null&&hn.delete(qn.key===null?fi:qn.key),Et=$(qn,Et,fi),Xi===null?Xe=qn:Xi.sibling=qn,Xi=qn);return p&&hn.forEach(function(Ev){return g(Ft,Ev)}),ei&&Q(Ft,fi),Xe}function cf(Ft,Et,Wt,ge){if(typeof Wt=="object"&&Wt!==null&&Wt.type===$c&&Wt.key===null&&(Wt=Wt.props.children),typeof Wt=="object"&&Wt!==null){switch(Wt.$$typeof){case Hm:t:{for(var Xe=Wt.key;Et!==null;){if(Et.key===Xe){if(Xe=Wt.type,Xe===$c){if(Et.tag===7){w(Ft,Et.sibling),ge=B(Et,Wt.props.children),ge.return=Ft,Ft=ge;break t}}else if(Et.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===Uo&&Lr(Xe)===Et.type){w(Ft,Et.sibling),ge=B(Et,Wt.props),ze(ge,Wt),ge.return=Ft,Ft=ge;break t}w(Ft,Et);break}else g(Ft,Et);Et=Et.sibling}Wt.type===$c?(ge=dr(Wt.props.children,Ft.mode,ge,Wt.key),ge.return=Ft,Ft=ge):(ge=Zl(Wt.type,Wt.key,Wt.props,null,Ft.mode,ge),ze(ge,Wt),ge.return=Ft,Ft=ge)}return ot(Ft);case Lo:t:{for(Xe=Wt.key;Et!==null;){if(Et.key===Xe)if(Et.tag===4&&Et.stateNode.containerInfo===Wt.containerInfo&&Et.stateNode.implementation===Wt.implementation){w(Ft,Et.sibling),ge=B(Et,Wt.children||[]),ge.return=Ft,Ft=ge;break t}else{w(Ft,Et);break}else g(Ft,Et);Et=Et.sibling}ge=ab(Wt,Ft.mode,ge),ge.return=Ft,Ft=ge}return ot(Ft);case Uo:return Xe=Wt._init,Wt=Xe(Wt._payload),cf(Ft,Et,Wt,ge)}if(qd(Wt))return uo(Ft,Et,Wt,ge);if(a(Wt)){if(Xe=a(Wt),typeof Xe!="function")throw Error(s(150));return Wt=Xe.call(Wt),uf(Ft,Et,Wt,ge)}if(typeof Wt.then=="function")return cf(Ft,Et,Wn(Wt),ge);if(Wt.$$typeof===vl)return cf(Ft,Et,Yt(Ft,Wt),ge);Qe(Ft,Wt)}return typeof Wt=="string"&&Wt!==""||typeof Wt=="number"||typeof Wt=="bigint"?(Wt=""+Wt,Et!==null&&Et.tag===6?(w(Ft,Et.sibling),ge=B(Et,Wt),ge.return=Ft,Ft=ge):(w(Ft,Et),ge=Wy(Wt,Ft.mode,ge),ge.return=Ft,Ft=ge),ot(Ft)):w(Ft,Et)}return function(Ft,Et,Wt,ge){try{nf=0;var Xe=cf(Ft,Et,Wt,ge);return ef=null,Xe}catch(hn){if(hn===ip)throw hn;var Xi=n(29,hn,null,Ft.mode);return Xi.lanes=ge,Xi.return=Ft,Xi}finally{}}}function er(p,g){p=Gs,M(rp,p),M(Fi,g),Gs=p|g.baseLanes}function qi(){M(rp,Gs),M(Fi,Fi.current)}function fr(){Gs=rp.current,b(Fi),b(rp)}function ks(p){var g=p.alternate;M(Qr,Qr.current&1),M(no,p),Ni===null&&(g===null||Fi.current!==null||g.memoizedState!==null)&&(Ni=p)}function Qf(p){if(p.tag===22){if(M(Qr,Qr.current),M(no,p),Ni===null){var g=p.alternate;g!==null&&g.memoizedState!==null&&(Ni=p)}}else os()}function os(){M(Qr,Qr.current),M(no,no.current)}function Ss(p){b(no),Ni===p&&(Ni=null),b(Qr)}function qa(p){for(var g=p;g!==null;){if(g.tag===13){var w=g.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||rv(w)||sv(w)))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}function ri(){throw Error(s(321))}function va(p,g){if(g===null)return!1;for(var w=0;w<g.length&&w<p.length;w++)if(!Ma(p[w],g[w]))return!1;return!0}function Ks(p,g,w,P,B,$){return Qu=$,Nn=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,fn.H=p===null||p.memoizedState===null?af:ia,sf=!1,$=w(P,B),sf=!1,Sh&&($=ls(g,w,P,B)),$a(p),$}function $a(p){fn.H=pr;var g=rn!==null&&rn.next!==null;if(Qu=0,ai=rn=Nn=null,Vo=!1,Eh=0,ps=null,g)throw Error(s(300));p===null||Li||(p=p.dependencies,p!==null&&Y(p)&&(Li=!0))}function ls(p,g,w,P){Nn=p;var B=0;do{if(Sh&&(ps=null),Eh=0,Sh=!1,25<=B)throw Error(s(301));if(B+=1,ai=rn=null,p.updateQueue!=null){var $=p.updateQueue;$.lastEffect=null,$.events=null,$.stores=null,$.memoCache!=null&&($.memoCache.index=0)}fn.H=io,$=g(w,P)}while(Sh);return $}function nr(){var p=fn.H,g=p.useState()[0];return g=typeof g.then=="function"?Bt(g):g,p=p.useState()[0],(rn!==null?rn.memoizedState:null)!==p&&(Nn.flags|=1024),g}function Iu(){var p=mv!==0;return mv=0,p}function ql(p,g,w){g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~w}function Zs(p){if(Vo){for(p=p.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}Vo=!1}Qu=0,ai=rn=Nn=null,Sh=!1,Eh=mv=0,ps=null}function it(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ai===null?Nn.memoizedState=ai=p:ai=ai.next=p,ai}function St(){if(rn===null){var p=Nn.alternate;p=p!==null?p.memoizedState:null}else p=rn.next;var g=ai===null?Nn.memoizedState:ai.next;if(g!==null)ai=g,rn=p;else{if(p===null)throw Nn.alternate===null?Error(s(467)):Error(s(310));rn=p,p={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},ai===null?Nn.memoizedState=ai=p:ai=ai.next=p}return ai}function Bt(p){var g=Eh;return Eh+=1,ps===null&&(ps=[]),p=Ee(ps,p,g),g=Nn,(ai===null?g.memoizedState:ai.next)===null&&(g=g.alternate,fn.H=g===null||g.memoizedState===null?af:ia),p}function Vt(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return Bt(p);if(p.$$typeof===vl)return Rt(p)}throw Error(s(438,String(p)))}function Ot(p){var g=null,w=Nn.updateQueue;if(w!==null&&(g=w.memoCache),g==null){var P=Nn.alternate;P!==null&&(P=P.updateQueue,P!==null&&(P=P.memoCache,P!=null&&(g={data:P.data.map(function(B){return B.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),w===null&&(w=gv(),Nn.updateQueue=w),w.memoCache=g,w=g.data[g.index],w===void 0)for(w=g.data[g.index]=Array(p),P=0;P<p;P++)w[P]=pE;return g.index++,w}function he(p,g){return typeof g=="function"?g(p):g}function be(p){var g=St();return xe(g,rn,p)}function xe(p,g,w){var P=p.queue;if(P===null)throw Error(s(311));P.lastRenderedReducer=w;var B=p.baseQueue,$=P.pending;if($!==null){if(B!==null){var ot=B.next;B.next=$.next,$.next=ot}g.baseQueue=B=$,P.pending=null}if($=p.baseState,B===null)p.memoizedState=$;else{g=B.next;var _t=ot=null,Nt=null,ne=g,ye=!1;do{var De=ne.lane&-536870913;if(De!==ne.lane?(Kn&De)===De:(Qu&De)===De){var Ue=ne.revertLane;if(Ue===0)Nt!==null&&(Nt=Nt.next={lane:0,revertLane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),De===eo&&(ye=!0);else if((Qu&Ue)===Ue){ne=ne.next,Ue===eo&&(ye=!0);continue}else De={lane:0,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},Nt===null?(_t=Nt=De,ot=$):Nt=Nt.next=De,Nn.lanes|=Ue,oo|=Ue;De=ne.action,sf&&w($,De),$=ne.hasEagerState?ne.eagerState:w($,De)}else Ue={lane:De,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},Nt===null?(_t=Nt=Ue,ot=$):Nt=Nt.next=Ue,Nn.lanes|=De,oo|=De;ne=ne.next}while(ne!==null&&ne!==g);if(Nt===null?ot=$:Nt.next=_t,!Ma($,p.memoizedState)&&(Li=!0,ye&&(w=bh,w!==null)))throw w;p.memoizedState=$,p.baseState=ot,p.baseQueue=Nt,P.lastRenderedState=$}return B===null&&(P.lanes=0),[p.memoizedState,P.dispatch]}function Le(p){var g=St(),w=g.queue;if(w===null)throw Error(s(311));w.lastRenderedReducer=p;var P=w.dispatch,B=w.pending,$=g.memoizedState;if(B!==null){w.pending=null;var ot=B=B.next;do $=p($,ot.action),ot=ot.next;while(ot!==B);Ma($,g.memoizedState)||(Li=!0),g.memoizedState=$,g.baseQueue===null&&(g.baseState=$),w.lastRenderedState=$}return[$,P]}function nn(p,g,w){var P=Nn,B=St(),$=ei;if($){if(w===void 0)throw Error(s(407));w=w()}else w=g();var ot=!Ma((rn||B).memoizedState,w);if(ot&&(B.memoizedState=w,Li=!0),B=B.queue,bm(On.bind(null,P,B,p),[p]),B.getSnapshot!==g||ot||ai!==null&&ai.memoizedState.tag&1){if(P.flags|=2048,xr(9,Ge.bind(null,P,B,w,g),{destroy:void 0},null),xi===null)throw Error(s(349));$||(Qu&60)!==0||Ye(P,g,w)}return w}function Ye(p,g,w){p.flags|=16384,p={getSnapshot:g,value:w},g=Nn.updateQueue,g===null?(g=gv(),Nn.updateQueue=g,g.stores=[p]):(w=g.stores,w===null?g.stores=[p]:w.push(p))}function Ge(p,g,w,P){g.value=w,g.getSnapshot=P,Gn(g)&&Mi(p)}function On(p,g,w){return w(function(){Gn(g)&&Mi(p)})}function Gn(p){var g=p.getSnapshot;p=p.value;try{var w=g();return!Ma(p,w)}catch{return!0}}function Mi(p){var g=se(p,2);g!==null&&fs(g,p,2)}function Pn(p){var g=it();if(typeof p=="function"){var w=p;if(p=w(),sf){W(!0);try{w()}finally{W(!1)}}}return g.memoizedState=g.baseState=p,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:he,lastRenderedState:p},g}function zn(p,g,w,P){return p.baseState=w,xe(p,rn,typeof P=="function"?P:he)}function Ke(p,g,w,P,B){if(Dc(p))throw Error(s(485));if(p=g.action,p!==null){var $={payload:B,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ot){$.listeners.push(ot)}};fn.T!==null?w(!0):$.isTransition=!1,P($),w=g.pending,w===null?($.next=g.pending=$,$i(g,$)):($.next=w.next,g.pending=w.next=$)}}function $i(p,g){var w=g.action,P=g.payload,B=p.state;if(g.isTransition){var $=fn.T,ot={};fn.T=ot;try{var _t=w(B,P),Nt=fn.S;Nt!==null&&Nt(ot,_t),jn(p,g,_t)}catch(ne){Eo(p,g,ne)}finally{fn.T=$}}else try{$=w(B,P),jn(p,g,$)}catch(ne){Eo(p,g,ne)}}function jn(p,g,w){w!==null&&typeof w=="object"&&typeof w.then=="function"?w.then(function(P){Ur(p,g,P)},function(P){return Eo(p,g,P)}):Ur(p,g,w)}function Ur(p,g,w){g.status="fulfilled",g.value=w,Jn(g),p.state=w,g=p.pending,g!==null&&(w=g.next,w===g?p.pending=null:(w=w.next,g.next=w,$i(p,w)))}function Eo(p,g,w){var P=p.pending;if(p.pending=null,P!==null){P=P.next;do g.status="rejected",g.reason=w,Jn(g),g=g.next;while(g!==P)}p.action=null}function Jn(p){p=p.listeners;for(var g=0;g<p.length;g++)(0,p[g])()}function kr(p,g){return g}function si(p,g){if(ei){var w=xi.formState;if(w!==null){t:{var P=Nn;if(ei){if(Cs){var B=Eb(Cs,ds);if(B){Cs=Tb(B),P=UE(B);break t}}wt(P)}P=!1}P&&(g=w[0])}}w=it(),w.memoizedState=w.baseState=g,P={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:g},w.queue=P,w=Md.bind(null,Nn,P),P.dispatch=w,P=Pn(!1);var $=Ao.bind(null,Nn,!1,P.queue);return P=it(),B={state:g,dispatch:null,action:p,pending:null},P.queue=B,w=Ke.bind(null,Nn,B,$,w),B.dispatch=w,P.memoizedState=p,[g,w,!1]}function hr(p){var g=St();return ir(g,rn,p)}function ir(p,g,w){g=xe(p,g,kr)[0],p=be(he)[0],g=typeof g=="object"&&g!==null&&typeof g.then=="function"?Bt(g):g;var P=St(),B=P.queue,$=B.dispatch;return w!==P.memoizedState&&(Nn.flags|=2048,xr(9,vn.bind(null,B,w),{destroy:void 0},null)),[g,$,p]}function vn(p,g){p.action=g}function rr(p){var g=St(),w=rn;if(w!==null)return ir(g,w,p);St(),g=g.memoizedState,w=St();var P=w.queue.dispatch;return w.memoizedState=p,[g,P,!1]}function xr(p,g,w,P){return p={tag:p,create:g,inst:w,deps:P,next:null},g=Nn.updateQueue,g===null&&(g=gv(),Nn.updateQueue=g),w=g.lastEffect,w===null?g.lastEffect=p.next=p:(P=w.next,w.next=p,p.next=P,g.lastEffect=p),p}function zs(){return St().memoizedState}function Jf(p,g,w,P){var B=it();Nn.flags|=p,B.memoizedState=xr(1|g,w,{destroy:void 0},P===void 0?null:P)}function Cc(p,g,w,P){var B=St();P=P===void 0?null:P;var $=B.memoizedState.inst;rn!==null&&P!==null&&va(P,rn.memoizedState.deps)?B.memoizedState=xr(g,w,$,P):(Nn.flags|=p,B.memoizedState=xr(1|g,w,$,P))}function wd(p,g){Jf(8390656,8,p,g)}function bm(p,g){Cc(2048,8,p,g)}function Ny(p,g){return Cc(4,2,p,g)}function th(p,g){return Cc(4,4,p,g)}function $l(p,g){if(typeof g=="function"){p=p();var w=g(p);return function(){typeof w=="function"?w():g(null)}}if(g!=null)return p=p(),g.current=p,function(){g.current=null}}function Wa(p,g,w){w=w!=null?w.concat([p]):null,Cc(4,4,$l.bind(null,g,p),w)}function hl(){}function Wl(p,g){var w=St();g=g===void 0?null:g;var P=w.memoizedState;return g!==null&&va(g,P[1])?P[0]:(w.memoizedState=[p,g],p)}function Ad(p,g){var w=St();g=g===void 0?null:g;var P=w.memoizedState;if(g!==null&&va(g,P[1]))return P[0];if(P=p(),sf){W(!0);try{p()}finally{W(!1)}}return w.memoizedState=[P,g],P}function To(p,g,w){return w===void 0||(Qu&1073741824)!==0?p.memoizedState=g:(p.memoizedState=w,p=tb(),Nn.lanes|=p,oo|=p,w)}function xm(p,g,w,P){return Ma(w,g)?w:Fi.current!==null?(p=To(p,w,P),Ma(p,g)||(Li=!0),p):(Qu&42)===0?(Li=!0,p.memoizedState=w):(p=tb(),Nn.lanes|=p,oo|=p,g)}function Rc(p,g,w,P,B){var $=Wu();Vs($!==0&&8>$?$:8);var ot=fn.T,_t={};fn.T=_t,Ao(p,!1,g,w);try{var Nt=B(),ne=fn.S;if(ne!==null&&ne(_t,Nt),Nt!==null&&typeof Nt=="object"&&typeof Nt.then=="function"){var ye=Oe(Nt,P);ba(p,g,ye,Tr(p))}else ba(p,g,P,Tr(p))}catch(De){ba(p,g,{then:function(){},status:"rejected",reason:De},Tr())}finally{Vs($),fn.T=ot}}function wo(p){var g=p.memoizedState;if(g!==null)return g;g={memoizedState:Xc,baseState:Xc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:he,lastRenderedState:Xc},next:null};var w={};return g.next={memoizedState:w,baseState:w,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:he,lastRenderedState:w},next:null},p.memoizedState=g,p=p.alternate,p!==null&&(p.memoizedState=g),g}function _a(){return Rt(_l)}function Oc(){return St().memoizedState}function dl(){return St().memoizedState}function Ic(p){for(var g=p.return;g!==null;){switch(g.tag){case 24:case 3:var w=Tr();p=we(w);var P=Me(g,p,w);P!==null&&(fs(P,g,w),Zt(P,g,w)),g={cache:Xn()},p.payload=g;return}g=g.return}}function Du(p,g,w){var P=Tr();w={lane:P,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null},Dc(p)?Yr(g,w):(w=Jt(p,g,w,P),w!==null&&(fs(w,p,P),pi(w,g,P)))}function Md(p,g,w){var P=Tr();ba(p,g,w,P)}function ba(p,g,w,P){var B={lane:P,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null};if(Dc(p))Yr(g,B);else{var $=p.alternate;if(p.lanes===0&&($===null||$.lanes===0)&&($=g.lastRenderedReducer,$!==null))try{var ot=g.lastRenderedState,_t=$(ot,w);if(B.hasEagerState=!0,B.eagerState=_t,Ma(_t,ot))return ue(p,g,B,0),xi===null&&at(),!1}catch{}finally{}if(w=Jt(p,g,B,P),w!==null)return fs(w,p,P),pi(w,g,P),!0}return!1}function Ao(p,g,w,P){if(P={lane:2,revertLane:Mt(),action:P,hasEagerState:!1,eagerState:null,next:null},Dc(p)){if(g)throw Error(s(479))}else g=Jt(p,w,P,2),g!==null&&fs(g,p,2)}function Dc(p){var g=p.alternate;return p===Nn||g!==null&&g===Nn}function Yr(p,g){Sh=Vo=!0;var w=p.pending;w===null?g.next=g:(g.next=w.next,w.next=g),p.pending=g}function pi(p,g,w){if((w&4194176)!==0){var P=g.lanes;P&=p.pendingLanes,w|=P,g.lanes=w,X(p,w)}}function Pc(p,g,w,P){g=p.memoizedState,w=w(P,g),w=w==null?g:Yy({},g,w),p.memoizedState=w,p.lanes===0&&(p.updateQueue.baseState=w)}function Nc(p,g,w,P,B,$,ot){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(P,$,ot):g.prototype&&g.prototype.isPureReactComponent?!Xt(w,P)||!Xt(B,$):!0}function Sm(p,g,w,P){p=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(w,P),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(w,P),g.state!==p&&ru.enqueueReplaceState(g,g.state,null)}function Mo(p,g){var w=g;if("ref"in g){w={};for(var P in g)P!=="ref"&&(w[P]=g[P])}if(p=p.defaultProps){w===g&&(w=Yy({},w));for(var B in p)w[B]===void 0&&(w[B]=p[B])}return w}function Pu(p,g){try{var w=p.onUncaughtError;w(g.value,{componentStack:g.stack})}catch(P){setTimeout(function(){throw P})}}function pl(p,g,w){try{var P=p.onCaughtError;P(w.value,{componentStack:w.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(B){setTimeout(function(){throw B})}}function Nu(p,g,w){return w=we(w),w.tag=3,w.payload={element:null},w.callback=function(){Pu(p,g)},w}function Xa(p){return p=we(p),p.tag=3,p}function Em(p,g,w,P){var B=w.type.getDerivedStateFromError;if(typeof B=="function"){var $=P.value;p.payload=function(){return B($)},p.callback=function(){pl(g,w,P)}}var ot=w.stateNode;ot!==null&&typeof ot.componentDidCatch=="function"&&(p.callback=function(){pl(g,w,P),typeof B!="function"&&(of===null?of=new Set([this]):of.add(this));var _t=P.stack;this.componentDidCatch(P.value,{componentStack:_t!==null?_t:""})})}function j_(p,g,w,P,B){if(w.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){if(g=w.alternate,g!==null&&j(g,w,B,!0),w=no.current,w!==null){switch(w.tag){case 13:return Ni===null?Vu():w.alternate===null&&Ui===0&&(Ui=3),w.flags&=-257,w.flags|=65536,w.lanes=B,P===ig?w.flags|=16384:(g=w.updateQueue,g===null?w.updateQueue=new Set([P]):g.add(P),lh(p,P,B)),!1;case 22:return w.flags|=65536,P===ig?w.flags|=16384:(g=w.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([P])},w.updateQueue=g):(w=g.retryQueue,w===null?g.retryQueue=new Set([P]):w.add(P)),lh(p,P,B)),!1}throw Error(s(435,w.tag))}return lh(p,P,B),Vu(),!1}if(ei)return g=no.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=B,P!==tg&&(p=Error(s(422),{cause:P}),Ht(et(p,w)))):(P!==tg&&(g=Error(s(423),{cause:P}),Ht(et(g,w))),p=p.current.alternate,p.flags|=65536,B&=-B,p.lanes|=B,P=et(P,w),B=Nu(p.stateNode,P,B),Re(p,B),Ui!==4&&(Ui=2)),!1;var $=Error(s(520),{cause:P});if($=et($,w),wh===null?wh=[$]:wh.push($),Ui!==4&&(Ui=2),g===null)return!0;P=et(P,w),w=g;do{switch(w.tag){case 3:return w.flags|=65536,p=B&-B,w.lanes|=p,p=Nu(w.stateNode,P,p),Re(w,p),!1;case 1:if(g=w.type,$=w.stateNode,(w.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(of===null||!of.has($))))return w.flags|=65536,B&=-B,w.lanes|=B,B=Xa(B),Em(B,p,w,P),Re(w,B),!1}w=w.return}while(w!==null);return!1}function sr(p,g,w,P){g.child=p===null?iu(g,null,w,P):rf(g,p.child,w,P)}function eh(p,g,w,P,B){w=w.render;var $=g.ref;if("ref"in P){var ot={};for(var _t in P)_t!=="ref"&&(ot[_t]=P[_t])}else ot=P;return ut(g),P=Ks(p,g,w,ot,$,B),_t=Iu(),p!==null&&!Li?(ql(p,g,B),Co(p,g,B)):(ei&&_t&&yt(g),g.flags|=1,sr(p,g,P,B),g.child)}function Cd(p,g,w,P,B){if(p===null){var $=w.type;return typeof $=="function"&&!zm($)&&$.defaultProps===void 0&&w.compare===null?(g.tag=15,g.type=$,nh(p,g,$,P,B)):(p=Zl(w.type,null,P,g,g.mode,B),p.ref=g.ref,p.return=g,g.child=p)}if($=p.child,!Id(p,B)){var ot=$.memoizedProps;if(w=w.compare,w=w!==null?w:Xt,w(ot,P)&&p.ref===g.ref)return Co(p,g,B)}return g.flags|=1,p=No($,P),p.ref=g.ref,p.return=g,g.child=p}function nh(p,g,w,P,B){if(p!==null){var $=p.memoizedProps;if(Xt($,P)&&p.ref===g.ref)if(Li=!1,g.pendingProps=P=$,Id(p,B))(p.flags&131072)!==0&&(Li=!0);else return g.lanes=p.lanes,Co(p,g,B)}return sh(p,g,w,P,B)}function Tm(p,g,w){var P=g.pendingProps,B=P.children,$=(g.stateNode._pendingVisibility&2)!==0,ot=p!==null?p.memoizedState:null;if(rh(p,g),P.mode==="hidden"||$){if((g.flags&128)!==0){if(P=ot!==null?ot.baseLanes|w:w,p!==null){for(B=g.child=p.child,$=0;B!==null;)$=$|B.lanes|B.childLanes,B=B.sibling;g.childLanes=$&~P}else g.childLanes=0,g.child=null;return ih(p,g,P,w)}if((w&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},p!==null&&Sr(g,ot!==null?ot.cachePool:null),ot!==null?er(g,ot):qi(),Qf(g);else return g.lanes=g.childLanes=536870912,ih(p,g,ot!==null?ot.baseLanes|w:w,w)}else ot!==null?(Sr(g,ot.cachePool),er(g,ot),os(),g.memoizedState=null):(p!==null&&Sr(g,null),qi(),os());return sr(p,g,B,w),g.child}function ih(p,g,w,P){var B=Yn();return B=B===null?null:{parent:ta?Vi._currentValue:Vi._currentValue2,pool:B},g.memoizedState={baseLanes:w,cachePool:B},p!==null&&Sr(g,null),qi(),Qf(g),p!==null&&j(p,g,P,!0),null}function rh(p,g){var w=g.ref;if(w===null)p!==null&&p.ref!==null&&(g.flags|=2097664);else{if(typeof w!="function"&&typeof w!="object")throw Error(s(284));(p===null||p.ref!==w)&&(g.flags|=2097664)}}function sh(p,g,w,P,B){return ut(g),w=Ks(p,g,w,P,void 0,B),P=Iu(),p!==null&&!Li?(ql(p,g,B),Co(p,g,B)):(ei&&P&&yt(g),g.flags|=1,sr(p,g,w,B),g.child)}function Lc(p,g,w,P,B,$){return ut(g),g.updateQueue=null,w=ls(g,P,w,B),$a(p),P=Iu(),p!==null&&!Li?(ql(p,g,$),Co(p,g,$)):(ei&&P&&yt(g),g.flags|=1,sr(p,g,w,$),g.child)}function wm(p,g,w,P,B){if(ut(g),g.stateNode===null){var $=Qc,ot=w.contextType;typeof ot=="object"&&ot!==null&&($=Rt(ot)),$=new w(P,$),g.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=ru,g.stateNode=$,$._reactInternals=g,$=g.stateNode,$.props=P,$.state=g.memoizedState,$.refs={},jt(g),ot=w.contextType,$.context=typeof ot=="object"&&ot!==null?Rt(ot):Qc,$.state=g.memoizedState,ot=w.getDerivedStateFromProps,typeof ot=="function"&&(Pc(g,w,ot,P),$.state=g.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(ot=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),ot!==$.state&&ru.enqueueReplaceState($,$.state,null),en(g,P,$,B),Ie(),$.state=g.memoizedState),typeof $.componentDidMount=="function"&&(g.flags|=4194308),P=!0}else if(p===null){$=g.stateNode;var _t=g.memoizedProps,Nt=Mo(w,_t);$.props=Nt;var ne=$.context,ye=w.contextType;ot=Qc,typeof ye=="object"&&ye!==null&&(ot=Rt(ye));var De=w.getDerivedStateFromProps;ye=typeof De=="function"||typeof $.getSnapshotBeforeUpdate=="function",_t=g.pendingProps!==_t,ye||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(_t||ne!==ot)&&Sm(g,$,P,ot),Zu=!1;var Ue=g.memoizedState;$.state=Ue,en(g,P,$,B),Ie(),ne=g.memoizedState,_t||Ue!==ne||Zu?(typeof De=="function"&&(Pc(g,w,De,P),ne=g.memoizedState),(Nt=Zu||Nc(g,w,Nt,P,Ue,ne,ot))?(ye||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(g.flags|=4194308)):(typeof $.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=P,g.memoizedState=ne),$.props=P,$.state=ne,$.context=ot,P=Nt):(typeof $.componentDidMount=="function"&&(g.flags|=4194308),P=!1)}else{$=g.stateNode,ve(p,g),ot=g.memoizedProps,ye=Mo(w,ot),$.props=ye,De=g.pendingProps,Ue=$.context,ne=w.contextType,Nt=Qc,typeof ne=="object"&&ne!==null&&(Nt=Rt(ne)),_t=w.getDerivedStateFromProps,(ne=typeof _t=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(ot!==De||Ue!==Nt)&&Sm(g,$,P,Nt),Zu=!1,Ue=g.memoizedState,$.state=Ue,en(g,P,$,B),Ie();var xn=g.memoizedState;ot!==De||Ue!==xn||Zu||p!==null&&p.dependencies!==null&&Y(p.dependencies)?(typeof _t=="function"&&(Pc(g,w,_t,P),xn=g.memoizedState),(ye=Zu||Nc(g,w,ye,P,Ue,xn,Nt)||p!==null&&p.dependencies!==null&&Y(p.dependencies))?(ne||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(P,xn,Nt),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(P,xn,Nt)),typeof $.componentDidUpdate=="function"&&(g.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof $.componentDidUpdate!="function"||ot===p.memoizedProps&&Ue===p.memoizedState||(g.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||ot===p.memoizedProps&&Ue===p.memoizedState||(g.flags|=1024),g.memoizedProps=P,g.memoizedState=xn),$.props=P,$.state=xn,$.context=Nt,P=ye):(typeof $.componentDidUpdate!="function"||ot===p.memoizedProps&&Ue===p.memoizedState||(g.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||ot===p.memoizedProps&&Ue===p.memoizedState||(g.flags|=1024),P=!1)}return $=P,rh(p,g),P=(g.flags&128)!==0,$||P?($=g.stateNode,w=P&&typeof w.getDerivedStateFromError!="function"?null:$.render(),g.flags|=1,p!==null&&P?(g.child=rf(g,p.child,null,B),g.child=rf(g,null,w,B)):sr(p,g,w,B),g.memoizedState=$.state,p=g.child):p=Co(p,g,B),p}function Am(p,g,w,P){return Pt(),g.flags|=256,sr(p,g,w,P),g.child}function ah(p){return{baseLanes:p,cachePool:zr()}}function Lu(p,g,w){return p=p!==null?p.childLanes&~w:0,g&&(p|=lo),p}function Mm(p,g,w){var P=g.pendingProps,B=!1,$=(g.flags&128)!==0,ot;if((ot=$)||(ot=p!==null&&p.memoizedState===null?!1:(Qr.current&2)!==0),ot&&(B=!0,g.flags&=-129),ot=(g.flags&32)!==0,g.flags&=-33,p===null){if(ei){if(B?ks(g):os(),ei){var _t=Cs,Nt;(Nt=_t)&&(_t=BE(_t,ds),_t!==null?(g.memoizedState={dehydrated:_t,treeContext:Jc!==null?{id:xl,overflow:Sl}:null,retryLane:536870912},Nt=n(18,null,null,0),Nt.stateNode=_t,Nt.return=g,g.child=Nt,Ms=g,Cs=null,Nt=!0):Nt=!1),Nt||wt(g)}if(_t=g.memoizedState,_t!==null&&(_t=_t.dehydrated,_t!==null))return sv(_t)?g.lanes=16:g.lanes=536870912,null;Ss(g)}return _t=P.children,P=P.fallback,B?(os(),B=g.mode,_t=Rd({mode:"hidden",children:_t},B),P=dr(P,B,w,null),_t.return=g,P.return=g,_t.sibling=P,g.child=_t,B=g.child,B.memoizedState=ah(w),B.childLanes=Lu(p,ot,w),g.memoizedState=_v,P):(ks(g),Uc(g,_t))}if(Nt=p.memoizedState,Nt!==null&&(_t=Nt.dehydrated,_t!==null)){if($)g.flags&256?(ks(g),g.flags&=-257,g=oh(p,g,w)):g.memoizedState!==null?(os(),g.child=p.child,g.flags|=128,g=null):(os(),B=P.fallback,_t=g.mode,P=Rd({mode:"visible",children:P.children},_t),B=dr(B,_t,w,null),B.flags|=2,P.return=g,B.return=g,P.sibling=B,g.child=P,rf(g,p.child,null,w),P=g.child,P.memoizedState=ah(w),P.childLanes=Lu(p,ot,w),g.memoizedState=_v,g=B);else if(ks(g),sv(_t))ot=NE(_t).digest,P=Error(s(419)),P.stack="",P.digest=ot,Ht({value:P,source:null,stack:null}),g=oh(p,g,w);else if(Li||j(p,g,w,!1),ot=(w&p.childLanes)!==0,Li||ot){if(ot=xi,ot!==null){if(P=w&-w,(P&42)!==0)P=1;else switch(P){case 2:P=1;break;case 8:P=4;break;case 32:P=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:P=64;break;case 268435456:P=134217728;break;default:P=0}if(P=(P&(ot.suspendedLanes|w))!==0?0:P,P!==0&&P!==Nt.retryLane)throw Nt.retryLane=P,se(p,P),fs(ot,p,P),vv}rv(_t)||Vu(),g=oh(p,g,w)}else rv(_t)?(g.flags|=128,g.child=p.child,g=Hu.bind(null,p),LE(_t,g),g=null):(p=Nt.treeContext,As&&(Cs=zE(_t),Ms=g,ei=!0,Bo=null,ds=!1,p!==null&&(Ja[to++]=xl,Ja[to++]=Sl,Ja[to++]=Jc,xl=p.id,Sl=p.overflow,Jc=g)),g=Uc(g,P.children),g.flags|=4096);return g}return B?(os(),B=P.fallback,_t=g.mode,Nt=p.child,$=Nt.sibling,P=No(Nt,{mode:"hidden",children:P.children}),P.subtreeFlags=Nt.subtreeFlags&31457280,$!==null?B=No($,B):(B=dr(B,_t,w,null),B.flags|=2),B.return=g,P.return=g,P.sibling=B,g.child=P,P=B,B=g.child,_t=p.child.memoizedState,_t===null?_t=ah(w):(Nt=_t.cachePool,Nt!==null?($=ta?Vi._currentValue:Vi._currentValue2,Nt=Nt.parent!==$?{parent:$,pool:$}:Nt):Nt=zr(),_t={baseLanes:_t.baseLanes|w,cachePool:Nt}),B.memoizedState=_t,B.childLanes=Lu(p,ot,w),g.memoizedState=_v,P):(ks(g),w=p.child,p=w.sibling,w=No(w,{mode:"visible",children:P.children}),w.return=g,w.sibling=null,p!==null&&(ot=g.deletions,ot===null?(g.deletions=[p],g.flags|=16):ot.push(p)),g.child=w,g.memoizedState=null,w)}function Uc(p,g){return g=Rd({mode:"visible",children:g},p.mode),g.return=p,p.child=g}function Rd(p,g){return Fm(p,g,0,null)}function oh(p,g,w){return rf(g,p.child,null,w),p=Uc(g,g.pendingProps.children),p.flags|=2,g.memoizedState=null,p}function Xl(p,g,w){p.lanes|=g;var P=p.alternate;P!==null&&(P.lanes|=g),Oo(p.return,g,w)}function Od(p,g,w,P,B){var $=p.memoizedState;$===null?p.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:P,tail:w,tailMode:B}:($.isBackwards=g,$.rendering=null,$.renderingStartTime=0,$.last=P,$.tail=w,$.tailMode=B)}function Cm(p,g,w){var P=g.pendingProps,B=P.revealOrder,$=P.tail;if(sr(p,g,P.children,w),P=Qr.current,(P&2)!==0)P=P&1|2,g.flags|=128;else{if(p!==null&&(p.flags&128)!==0)t:for(p=g.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&Xl(p,w,g);else if(p.tag===19)Xl(p,w,g);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===g)break t;for(;p.sibling===null;){if(p.return===null||p.return===g)break t;p=p.return}p.sibling.return=p.return,p=p.sibling}P&=1}switch(M(Qr,P),B){case"forwards":for(w=g.child,B=null;w!==null;)p=w.alternate,p!==null&&qa(p)===null&&(B=w),w=w.sibling;w=B,w===null?(B=g.child,g.child=null):(B=w.sibling,w.sibling=null),Od(g,!1,B,w,$);break;case"backwards":for(w=null,B=g.child,g.child=null;B!==null;){if(p=B.alternate,p!==null&&qa(p)===null){g.child=B;break}p=B.sibling,B.sibling=w,w=B,B=p}Od(g,!0,w,null,$);break;case"together":Od(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function Co(p,g,w){if(p!==null&&(g.dependencies=p.dependencies),oo|=g.lanes,(w&g.childLanes)===0)if(p!==null){if(j(p,g,w,!1),(w&g.childLanes)===0)return null}else return null;if(p!==null&&g.child!==p.child)throw Error(s(153));if(g.child!==null){for(p=g.child,w=No(p,p.pendingProps),g.child=w,w.return=g;p.sibling!==null;)p=p.sibling,w=w.sibling=No(p,p.pendingProps),w.return=g;w.sibling=null}return g.child}function Id(p,g){return(p.lanes&g)!==0?!0:(p=p.dependencies,!!(p!==null&&Y(p)))}function Dd(p,g,w){switch(g.tag){case 3:nt(g,g.stateNode.containerInfo),ml(g,Vi,p.memoizedState.cache),Pt();break;case 27:case 5:ft(g);break;case 4:nt(g,g.stateNode.containerInfo);break;case 10:ml(g,g.type,g.memoizedProps.value);break;case 13:var P=g.memoizedState;if(P!==null)return P.dehydrated!==null?(ks(g),g.flags|=128,null):(w&g.child.childLanes)!==0?Mm(p,g,w):(ks(g),p=Co(p,g,w),p!==null?p.sibling:null);ks(g);break;case 19:var B=(p.flags&128)!==0;if(P=(w&g.childLanes)!==0,P||(j(p,g,w,!1),P=(w&g.childLanes)!==0),B){if(P)return Cm(p,g,w);g.flags|=128}if(B=g.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),M(Qr,Qr.current),P)break;return null;case 22:case 23:return g.lanes=0,Tm(p,g,w);case 24:ml(g,Vi,p.memoizedState.cache)}return Co(p,g,w)}function Bs(p,g,w){if(p!==null)if(p.memoizedProps!==g.pendingProps)Li=!0;else{if(!Id(p,w)&&(g.flags&128)===0)return Li=!1,Dd(p,g,w);Li=(p.flags&131072)!==0}else Li=!1,ei&&(g.flags&1048576)!==0&&dt(g,Jd,g.index);switch(g.lanes=0,g.tag){case 16:t:{p=g.pendingProps;var P=g.elementType,B=P._init;if(P=B(P._payload),g.type=P,typeof P=="function")zm(P)?(p=Mo(P,p),g.tag=1,g=wm(null,g,P,p,w)):(g.tag=0,g=sh(null,g,P,p,w));else{if(P!=null){if(B=P.$$typeof,B===qm){g.tag=11,g=eh(null,g,P,p,w);break t}else if(B===Qy){g.tag=14,g=Cd(null,g,P,p,w);break t}}throw g=o(P)||P,Error(s(306,g,""))}}return g;case 0:return sh(p,g,g.type,g.pendingProps,w);case 1:return P=g.type,B=Mo(P,g.pendingProps),wm(p,g,P,B,w);case 3:t:{if(nt(g,g.stateNode.containerInfo),p===null)throw Error(s(387));var $=g.pendingProps;B=g.memoizedState,P=B.element,ve(p,g),en(g,$,null,w);var ot=g.memoizedState;if($=ot.cache,ml(g,Vi,$),$!==B.cache&&C(g,[Vi],w,!0),Ie(),$=ot.element,As&&B.isDehydrated)if(B={element:$,isDehydrated:!1,cache:ot.cache},g.updateQueue.baseState=B,g.memoizedState=B,g.flags&256){g=Am(p,g,$,w);break t}else if($!==P){P=et(Error(s(424)),g),Ht(P),g=Am(p,g,$,w);break t}else for(As&&(Cs=kE(g.stateNode.containerInfo),Ms=g,ei=!0,Bo=null,ds=!0),w=iu(g,null,$,w),g.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(Pt(),$===P){g=Co(p,g,w);break t}sr(p,g,$,w)}g=g.child}return g;case 26:if(Qa)return rh(p,g),p===null?(w=Mb(g.type,null,g.pendingProps,null))?g.memoizedState=w:ei||(g.stateNode=cv(g.type,g.pendingProps,eu.current,g)):g.memoizedState=Mb(g.type,p.memoizedProps,g.pendingProps,p.memoizedState),null;case 27:if(Pi)return ft(g),p===null&&Pi&&ei&&(P=g.stateNode=bl(g.type,g.pendingProps,eu.current,Zr.current,!1),Ms=g,ds=!0,Cs=av(P)),P=g.pendingProps.children,p!==null||ei?sr(p,g,P,w):g.child=rf(g,null,P,w),rh(p,g),g.child;case 5:return p===null&&ei&&(lv(g.type,g.pendingProps,Zr.current),(B=P=Cs)&&(P=gR(P,g.type,g.pendingProps,ds),P!==null?(g.stateNode=P,Ms=g,Cs=av(P),ds=!1,B=!0):B=!1),B||wt(g)),ft(g),B=g.type,$=g.pendingProps,ot=p!==null?p.memoizedProps:null,P=$.children,Mn(B,$)?P=null:ot!==null&&Mn(B,ot)&&(g.flags|=32),g.memoizedState!==null&&(B=Ks(p,g,nr,null,null,w),ta?_l._currentValue=B:_l._currentValue2=B),rh(p,g),sr(p,g,P,w),g.child;case 6:return p===null&&ei&&(jE(g.pendingProps,Zr.current),(p=w=Cs)&&(w=wb(w,g.pendingProps,ds),w!==null?(g.stateNode=w,Ms=g,Cs=null,p=!0):p=!1),p||wt(g)),null;case 13:return Mm(p,g,w);case 4:return nt(g,g.stateNode.containerInfo),P=g.pendingProps,p===null?g.child=rf(g,null,P,w):sr(p,g,P,w),g.child;case 11:return eh(p,g,g.type,g.pendingProps,w);case 7:return sr(p,g,g.pendingProps,w),g.child;case 8:return sr(p,g,g.pendingProps.children,w),g.child;case 12:return sr(p,g,g.pendingProps.children,w),g.child;case 10:return P=g.pendingProps,ml(g,g.type,P.value),sr(p,g,P.children,w),g.child;case 9:return B=g.type._context,P=g.pendingProps.children,ut(g),B=Rt(B),P=P(B),g.flags|=1,sr(p,g,P,w),g.child;case 14:return Cd(p,g,g.type,g.pendingProps,w);case 15:return nh(p,g,g.type,g.pendingProps,w);case 19:return Cm(p,g,w);case 22:return Tm(p,g,w);case 24:return ut(g),P=Rt(Vi),p===null?(B=Yn(),B===null&&(B=xi,$=Xn(),B.pooledCache=$,$.refCount++,$!==null&&(B.pooledCacheLanes|=w),B=$),g.memoizedState={parent:P,cache:B},jt(g),ml(g,Vi,B)):((p.lanes&w)!==0&&(ve(p,g),en(g,null,null,w),Ie()),B=p.memoizedState,$=g.memoizedState,B.parent!==P?(B={parent:P,cache:P},g.memoizedState=B,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=B),ml(g,Vi,P)):(P=$.cache,ml(g,Vi,P),P!==B.cache&&C(g,[Vi],w,!0))),sr(p,g,g.pendingProps.children,w),g.child;case 29:throw g.pendingProps}throw Error(s(156,g.tag))}function ml(p,g,w){ta?(M(Ju,g._currentValue),g._currentValue=w):(M(Ju,g._currentValue2),g._currentValue2=w)}function Ro(p){var g=Ju.current;ta?p._currentValue=g:p._currentValue2=g,b(Ju)}function Oo(p,g,w){for(;p!==null;){var P=p.alternate;if((p.childLanes&g)!==g?(p.childLanes|=g,P!==null&&(P.childLanes|=g)):P!==null&&(P.childLanes&g)!==g&&(P.childLanes|=g),p===w)break;p=p.return}}function C(p,g,w,P){var B=p.child;for(B!==null&&(B.return=p);B!==null;){var $=B.dependencies;if($!==null){var ot=B.child;$=$.firstContext;t:for(;$!==null;){var _t=$;$=B;for(var Nt=0;Nt<g.length;Nt++)if(_t.context===g[Nt]){$.lanes|=w,_t=$.alternate,_t!==null&&(_t.lanes|=w),Oo($.return,w,p),P||(ot=null);break t}$=_t.next}}else if(B.tag===18){if(ot=B.return,ot===null)throw Error(s(341));ot.lanes|=w,$=ot.alternate,$!==null&&($.lanes|=w),Oo(ot,w,p),ot=null}else ot=B.child;if(ot!==null)ot.return=B;else for(ot=B;ot!==null;){if(ot===p){ot=null;break}if(B=ot.sibling,B!==null){B.return=ot.return,ot=B;break}ot=ot.return}B=ot}}function j(p,g,w,P){p=null;for(var B=g,$=!1;B!==null;){if(!$){if((B.flags&524288)!==0)$=!0;else if((B.flags&262144)!==0)break}if(B.tag===10){var ot=B.alternate;if(ot===null)throw Error(s(387));if(ot=ot.memoizedProps,ot!==null){var _t=B.type;Ma(B.pendingProps.value,ot.value)||(p!==null?p.push(_t):p=[_t])}}else if(B===gh.current){if(ot=B.alternate,ot===null)throw Error(s(387));ot.memoizedState.memoizedState!==B.memoizedState.memoizedState&&(p!==null?p.push(_l):p=[_l])}B=B.return}p!==null&&C(g,p,w,P),g.flags|=262144}function Y(p){for(p=p.firstContext;p!==null;){var g=p.context;if(!Ma(ta?g._currentValue:g._currentValue2,p.memoizedValue))return!0;p=p.next}return!1}function ut(p){wl=p,ro=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function Rt(p){return Se(wl,p)}function Yt(p,g){return wl===null&&ut(p),Se(p,g)}function Se(p,g){var w=ta?g._currentValue:g._currentValue2;if(g={context:g,memoizedValue:w,next:null},ro===null){if(p===null)throw Error(s(308));ro=g,p.dependencies={lanes:0,firstContext:g},p.flags|=524288}else ro=ro.next=g;return w}function Xn(){return{controller:new sp,data:new Map,refCount:0}}function ar(p){p.refCount--,p.refCount===0&&eT(nT,function(){p.controller.abort()})}function Yn(){var p=su.current;return p!==null?p:xi.pooledCache}function Sr(p,g){g===null?M(su,su.current):M(su,g.pool)}function zr(){var p=Yn();return p===null?null:{parent:ta?Vi._currentValue:Vi._currentValue2,pool:p}}function Er(p){p.flags|=4}function us(p,g){if(p!==null&&p.child===g.child)return!1;if((g.flags&16)!==0)return!0;for(p=g.child;p!==null;){if((p.flags&13878)!==0||(p.subtreeFlags&13878)!==0)return!0;p=p.sibling}return!1}function Io(p,g,w,P){if(Kr)for(w=g.child;w!==null;){if(w.tag===5||w.tag===6)Wm(p,w.stateNode);else if(!(w.tag===4||Pi&&w.tag===27)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===g)break;for(;w.sibling===null;){if(w.return===null||w.return===g)return;w=w.return}w.sibling.return=w.return,w=w.sibling}else if(ko)for(var B=g.child;B!==null;){if(B.tag===5){var $=B.stateNode;w&&P&&($=xb($,B.type,B.memoizedProps)),Wm(p,$)}else if(B.tag===6)$=B.stateNode,w&&P&&($=Sb($,B.memoizedProps)),Wm(p,$);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)$=B.child,$!==null&&($.return=B),Io(p,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===g)break;for(;B.sibling===null;){if(B.return===null||B.return===g)return;B=B.return}B.sibling.return=B.return,B=B.sibling}}function Pd(p,g,w,P){if(ko)for(var B=g.child;B!==null;){if(B.tag===5){var $=B.stateNode;w&&P&&($=xb($,B.type,B.memoizedProps)),bb(p,$)}else if(B.tag===6)$=B.stateNode,w&&P&&($=Sb($,B.memoizedProps)),bb(p,$);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)$=B.child,$!==null&&($.return=B),Pd(p,B,!(B.memoizedProps!==null&&B.memoizedProps.mode==="manual"),!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===g)break;for(;B.sibling===null;){if(B.return===null||B.return===g)return;B=B.return}B.sibling.return=B.return,B=B.sibling}}function Rm(p,g){if(ko&&us(p,g)){p=g.stateNode;var w=p.containerInfo,P=Xm();Pd(P,g,!1,!1),p.pendingChildren=P,Er(g),iv(w,P)}}function Ly(p,g,w,P){if(Kr)p.memoizedProps!==P&&Er(g);else if(ko){var B=p.stateNode,$=p.memoizedProps;if((p=us(p,g))||$!==P){var ot=Zr.current;$=Kd(B,w,$,P,!p,null),$===B?g.stateNode=B:($u($,w,P,ot)&&Er(g),g.stateNode=$,p?Io($,g,!1,!1):Er(g))}else g.stateNode=B}}function Uy(p,g,w){if(hb(g,w)){if(p.flags|=16777216,!ev(g,w))if(Hc())p.flags|=8192;else throw tf=ig,ng}else p.flags&=-16777217}function ky(p,g){if(WE(g)){if(p.flags|=16777216,!fh(g))if(Hc())p.flags|=8192;else throw tf=ig,ng}else p.flags&=-16777217}function Nd(p,g){g!==null&&(p.flags|=4),p.flags&16384&&(g=p.tag!==22?U():536870912,p.lanes|=g,lu|=g)}function Ld(p,g){if(!ei)switch(p.tailMode){case"hidden":g=p.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?p.tail=null:w.sibling=null;break;case"collapsed":w=p.tail;for(var P=null;w!==null;)w.alternate!==null&&(P=w),w=w.sibling;P===null?g||p.tail===null?p.tail=null:p.tail.sibling=null:P.sibling=null}}function Ji(p){var g=p.alternate!==null&&p.alternate.child===p.child,w=0,P=0;if(g)for(var B=p.child;B!==null;)w|=B.lanes|B.childLanes,P|=B.subtreeFlags&31457280,P|=B.flags&31457280,B.return=p,B=B.sibling;else for(B=p.child;B!==null;)w|=B.lanes|B.childLanes,P|=B.subtreeFlags,P|=B.flags,B.return=p,B=B.sibling;return p.subtreeFlags|=P,p.childLanes=w,g}function oE(p,g,w){var P=g.pendingProps;switch(xt(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ji(g),null;case 1:return Ji(g),null;case 3:return w=g.stateNode,P=null,p!==null&&(P=p.memoizedState.cache),g.memoizedState.cache!==P&&(g.flags|=2048),Ro(Vi),ht(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(p===null||p.child===null)&&(te(g)?Er(g):p===null||p.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,Bo!==null&&(Um(Bo),Bo=null))),Rm(p,g),Ji(g),null;case 26:if(Qa){w=g.type;var B=g.memoizedState;return p===null?(Er(g),B!==null?(Ji(g),ky(g,B)):(Ji(g),Uy(g,w,P))):B?B!==p.memoizedState?(Er(g),Ji(g),ky(g,B)):(Ji(g),g.flags&=-16777217):(Kr?p.memoizedProps!==P&&Er(g):Ly(p,g,w,P),Ji(g),Uy(g,w,P)),null}case 27:if(Pi){if(gt(g),w=eu.current,B=g.type,p!==null&&g.stateNode!=null)Kr?p.memoizedProps!==P&&Er(g):Ly(p,g,B,P);else{if(!P){if(g.stateNode===null)throw Error(s(166));return Ji(g),null}p=Zr.current,te(g)?Kt(g,p):(p=bl(B,P,w,p,!0),g.stateNode=p,Er(g))}return Ji(g),null}case 5:if(gt(g),w=g.type,p!==null&&g.stateNode!=null)Ly(p,g,w,P);else{if(!P){if(g.stateNode===null)throw Error(s(166));return Ji(g),null}p=Zr.current,te(g)?Kt(g,p):(B=fb(w,P,eu.current,p,g),Io(B,g,!1,!1),g.stateNode=B,$u(B,w,P,p)&&Er(g))}return Ji(g),Uy(g,g.type,g.pendingProps),null;case 6:if(p&&g.stateNode!=null)w=p.memoizedProps,Kr?w!==P&&Er(g):ko&&(w!==P?(g.stateNode=Ti(P,eu.current,Zr.current,g),Er(g)):g.stateNode=p.stateNode);else{if(typeof P!="string"&&g.stateNode===null)throw Error(s(166));if(p=eu.current,w=Zr.current,te(g)){if(!As)throw Error(s(176));if(p=g.stateNode,w=g.memoizedProps,P=null,B=Ms,B!==null)switch(B.tag){case 27:case 5:P=B.memoizedProps}Ab(p,w,g,P)||wt(g)}else g.stateNode=Ti(P,p,w,g)}return Ji(g),null;case 13:if(P=g.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(B=te(g),P!==null&&P.dehydrated!==null){if(p===null){if(!B)throw Error(s(318));if(!As)throw Error(s(344));if(B=g.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(s(317));VE(B,g)}else Pt(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Ji(g),B=!1}else Bo!==null&&(Um(Bo),Bo=null),B=!0;if(!B)return g.flags&256?(Ss(g),g):(Ss(g),null)}if(Ss(g),(g.flags&128)!==0)return g.lanes=w,g;if(w=P!==null,p=p!==null&&p.memoizedState!==null,w){P=g.child,B=null,P.alternate!==null&&P.alternate.memoizedState!==null&&P.alternate.memoizedState.cachePool!==null&&(B=P.alternate.memoizedState.cachePool.pool);var $=null;P.memoizedState!==null&&P.memoizedState.cachePool!==null&&($=P.memoizedState.cachePool.pool),$!==B&&(P.flags|=2048)}return w!==p&&w&&(g.child.flags|=8192),Nd(g,g.updateQueue),Ji(g),null;case 4:return ht(),Rm(p,g),p===null&&wr(g.stateNode.containerInfo),Ji(g),null;case 10:return Ro(g.type),Ji(g),null;case 19:if(b(Qr),B=g.memoizedState,B===null)return Ji(g),null;if(P=(g.flags&128)!==0,$=B.rendering,$===null)if(P)Ld(B,!1);else{if(Ui!==0||p!==null&&(p.flags&128)!==0)for(p=g.child;p!==null;){if($=qa(p),$!==null){for(g.flags|=128,Ld(B,!1),p=$.updateQueue,g.updateQueue=p,Nd(g,p),g.subtreeFlags=0,p=w,w=g.child;w!==null;)Bm(w,p),w=w.sibling;return M(Qr,Qr.current&1|2),g.child}p=p.sibling}B.tail!==null&&zo()>lp&&(g.flags|=128,P=!0,Ld(B,!1),g.lanes=4194304)}else{if(!P)if(p=qa($),p!==null){if(g.flags|=128,P=!0,p=p.updateQueue,g.updateQueue=p,Nd(g,p),Ld(B,!0),B.tail===null&&B.tailMode==="hidden"&&!$.alternate&&!ei)return Ji(g),null}else 2*zo()-B.renderingStartTime>lp&&w!==536870912&&(g.flags|=128,P=!0,Ld(B,!1),g.lanes=4194304);B.isBackwards?($.sibling=g.child,g.child=$):(p=B.last,p!==null?p.sibling=$:g.child=$,B.last=$)}return B.tail!==null?(g=B.tail,B.rendering=g,B.tail=g.sibling,B.renderingStartTime=zo(),g.sibling=null,p=Qr.current,M(Qr,P?p&1|2:p&1),g):(Ji(g),null);case 22:case 23:return Ss(g),fr(),P=g.memoizedState!==null,p!==null?p.memoizedState!==null!==P&&(g.flags|=8192):P&&(g.flags|=8192),P?(w&536870912)!==0&&(g.flags&128)===0&&(Ji(g),g.subtreeFlags&6&&(g.flags|=8192)):Ji(g),w=g.updateQueue,w!==null&&Nd(g,w.retryQueue),w=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),P=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(P=g.memoizedState.cachePool.pool),P!==w&&(g.flags|=2048),p!==null&&b(su),null;case 24:return w=null,p!==null&&(w=p.memoizedState.cache),g.memoizedState.cache!==w&&(g.flags|=2048),Ro(Vi),Ji(g),null;case 25:return null}throw Error(s(156,g.tag))}function cR(p,g){switch(xt(g),g.tag){case 1:return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 3:return Ro(Vi),ht(),p=g.flags,(p&65536)!==0&&(p&128)===0?(g.flags=p&-65537|128,g):null;case 26:case 27:case 5:return gt(g),null;case 13:if(Ss(g),p=g.memoizedState,p!==null&&p.dehydrated!==null){if(g.alternate===null)throw Error(s(340));Pt()}return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 19:return b(Qr),null;case 4:return ht(),null;case 10:return Ro(g.type),null;case 22:case 23:return Ss(g),fr(),p!==null&&b(su),p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 24:return Ro(Vi),null;case 25:return null;default:return null}}function lE(p,g){switch(xt(g),g.tag){case 3:Ro(Vi),ht();break;case 26:case 27:case 5:gt(g);break;case 4:ht();break;case 13:Ss(g);break;case 19:b(Qr);break;case 10:Ro(g.type);break;case 22:case 23:Ss(g),fr(),p!==null&&b(su);break;case 24:Ro(Vi)}}function Om(p,g){try{var w=g.updateQueue,P=w!==null?w.lastEffect:null;if(P!==null){var B=P.next;w=B;do{if((w.tag&p)===p){P=void 0;var $=w.create,ot=w.inst;P=$(),ot.destroy=P}w=w.next}while(w!==B)}}catch(_t){_i(g,g.return,_t)}}function kc(p,g,w){try{var P=g.updateQueue,B=P!==null?P.lastEffect:null;if(B!==null){var $=B.next;P=$;do{if((P.tag&p)===p){var ot=P.inst,_t=ot.destroy;if(_t!==void 0){ot.destroy=void 0,B=g;var Nt=w;try{_t()}catch(ne){_i(B,Nt,ne)}}}P=P.next}while(P!==$)}}catch(ne){_i(g,g.return,ne)}}function uE(p){var g=p.updateQueue;if(g!==null){var w=p.stateNode;try{Te(g,w)}catch(P){_i(p,p.return,P)}}}function xa(p,g,w){w.props=Mo(p.type,p.memoizedProps),w.state=p.memoizedState;try{w.componentWillUnmount()}catch(P){_i(p,g,P)}}function gl(p,g){try{var w=p.ref;if(w!==null){var P=p.stateNode;switch(p.tag){case 26:case 27:case 5:var B=Wd(P);break;default:B=P}typeof w=="function"?p.refCleanup=w(B):w.current=B}}catch($){_i(p,g,$)}}function Sa(p,g){var w=p.ref,P=p.refCleanup;if(w!==null)if(typeof P=="function")try{P()}catch(B){_i(p,g,B)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof w=="function")try{w(null)}catch(B){_i(p,g,B)}else w.current=null}function q_(p){var g=p.type,w=p.memoizedProps,P=p.stateNode;try{pR(P,g,w,p)}catch(B){_i(p,p.return,B)}}function $_(p,g,w){try{AE(p.stateNode,p.type,w,g,p)}catch(P){_i(p,p.return,P)}}function W_(p){return p.tag===5||p.tag===3||(Qa?p.tag===26:!1)||(Pi?p.tag===27:!1)||p.tag===4}function Im(p){t:for(;;){for(;p.sibling===null;){if(p.return===null||W_(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&(!Pi||p.tag!==27)&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue t;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function X_(p,g,w){var P=p.tag;if(P===5||P===6)p=p.stateNode,g?CE(w,p,g):yb(w,p);else if(!(P===4||Pi&&P===27)&&(p=p.child,p!==null))for(X_(p,g,w),p=p.sibling;p!==null;)X_(p,g,w),p=p.sibling}function Uu(p,g,w){var P=p.tag;if(P===5||P===6)p=p.stateNode,g?ME(w,p,g):TE(w,p);else if(!(P===4||Pi&&P===27)&&(p=p.child,p!==null))for(Uu(p,g,w),p=p.sibling;p!==null;)Uu(p,g,w),p=p.sibling}function zy(p,g,w){p=p.containerInfo;try{Zd(p,w)}catch(P){_i(g,g.return,P)}}function Dm(p,g){for(Jy(p.containerInfo),bn=g;bn!==null;)if(p=bn,g=p.child,(p.subtreeFlags&1028)!==0&&g!==null)g.return=p,bn=g;else for(;bn!==null;){p=bn;var w=p.alternate;switch(g=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((g&1024)!==0&&w!==null){g=void 0;var P=p,B=w.memoizedProps;w=w.memoizedState;var $=P.stateNode;try{var ot=Mo(P.type,B,P.elementType===P.type);g=$.getSnapshotBeforeUpdate(ot,w),$.__reactInternalSnapshotBeforeUpdate=g}catch(_t){_i(P,P.return,_t)}}break;case 3:(g&1024)!==0&&Kr&&PE(p.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((g&1024)!==0)throw Error(s(163))}if(g=p.sibling,g!==null){g.return=p.return,bn=g;break}bn=p.return}return ot=Hn,Hn=!1,ot}function By(p,g,w){var P=w.flags;switch(w.tag){case 0:case 11:case 15:zu(p,w),P&4&&Om(5,w);break;case 1:if(zu(p,w),P&4)if(p=w.stateNode,g===null)try{p.componentDidMount()}catch(_t){_i(w,w.return,_t)}else{var B=Mo(w.type,g.memoizedProps);g=g.memoizedState;try{p.componentDidUpdate(B,g,p.__reactInternalSnapshotBeforeUpdate)}catch(_t){_i(w,w.return,_t)}}P&64&&uE(w),P&512&&gl(w,w.return);break;case 3:if(zu(p,w),P&64&&(P=w.updateQueue,P!==null)){if(p=null,w.child!==null)switch(w.child.tag){case 27:case 5:p=Wd(w.child.stateNode);break;case 1:p=w.child.stateNode}try{Te(P,p)}catch(_t){_i(w,w.return,_t)}}break;case 26:if(Qa){zu(p,w),P&512&&gl(w,w.return);break}case 27:case 5:zu(p,w),g===null&&P&4&&q_(w),P&512&&gl(w,w.return);break;case 12:zu(p,w);break;case 13:zu(p,w),P&4&&Fy(p,w);break;case 22:if(B=w.memoizedState!==null||au,!B){g=g!==null&&g.memoizedState!==null||mr;var $=au,ot=mr;au=B,(mr=g)&&!ot?Bu(p,w,(w.subtreeFlags&8772)!==0):zu(p,w),au=$,mr=ot}P&512&&(w.memoizedProps.mode==="manual"?gl(w,w.return):Sa(w,w.return));break;default:zu(p,w)}}function Y_(p){var g=p.alternate;g!==null&&(p.alternate=null,Y_(g)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(g=p.stateNode,g!==null&&dR(g)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function Es(p,g,w){for(w=w.child;w!==null;)zc(p,g,w),w=w.sibling}function zc(p,g,w){if(Aa&&typeof Aa.onCommitFiberUnmount=="function")try{Aa.onCommitFiberUnmount(Mr,w)}catch{}switch(w.tag){case 26:if(Qa){mr||Sa(w,g),Es(p,g,w),w.memoizedState?ch(w.memoizedState):w.stateNode&&Qd(w.stateNode);break}case 27:if(Pi){mr||Sa(w,g);var P=Je,B=In;Je=w.stateNode,Es(p,g,w),Zc(w.stateNode),Je=P,In=B;break}case 5:mr||Sa(w,g);case 6:if(Kr){if(P=Je,B=In,Je=null,Es(p,g,w),Je=P,In=B,Je!==null)if(In)try{RE(Je,w.stateNode)}catch($){_i(w,g,$)}else try{vb(Je,w.stateNode)}catch($){_i(w,g,$)}}else Es(p,g,w);break;case 18:Kr&&Je!==null&&(In?Ym(Je,w.stateNode):GE(Je,w.stateNode));break;case 4:Kr?(P=Je,B=In,Je=w.stateNode.containerInfo,In=!0,Es(p,g,w),Je=P,In=B):(ko&&zy(w.stateNode,w,Xm()),Es(p,g,w));break;case 0:case 11:case 14:case 15:mr||kc(2,w,g),mr||kc(4,w,g),Es(p,g,w);break;case 1:mr||(Sa(w,g),P=w.stateNode,typeof P.componentWillUnmount=="function"&&xa(w,g,P)),Es(p,g,w);break;case 21:Es(p,g,w);break;case 22:mr||Sa(w,g),mr=(P=mr)||w.memoizedState!==null,Es(p,g,w),mr=P;break;default:Es(p,g,w)}}function Fy(p,g){if(As&&g.memoizedState===null&&(p=g.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{vR(p)}catch(w){_i(g,g.return,w)}}function cE(p){switch(p.tag){case 13:case 19:var g=p.stateNode;return g===null&&(g=p.stateNode=new bi),g;case 22:return p=p.stateNode,g=p._retryCache,g===null&&(g=p._retryCache=new bi),g;default:throw Error(s(435,p.tag))}}function ku(p,g){var w=cE(p);g.forEach(function(P){var B=qc.bind(null,p,P);w.has(P)||(w.add(P),P.then(B,B))})}function Qs(p,g){var w=g.deletions;if(w!==null)for(var P=0;P<w.length;P++){var B=w[P],$=p,ot=g;if(Kr){var _t=ot;t:for(;_t!==null;){switch(_t.tag){case 27:case 5:Je=_t.stateNode,In=!1;break t;case 3:Je=_t.stateNode.containerInfo,In=!0;break t;case 4:Je=_t.stateNode.containerInfo,In=!0;break t}_t=_t.return}if(Je===null)throw Error(s(160));zc($,ot,B),Je=null,In=!1}else zc($,ot,B);$=B.alternate,$!==null&&($.return=null),B.return=null}if(g.subtreeFlags&13878)for(g=g.child;g!==null;)K_(g,p),g=g.sibling}function K_(p,g){var w=p.alternate,P=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:Qs(g,p),Ea(p),P&4&&(kc(3,p,p.return),Om(3,p),kc(5,p,p.return));break;case 1:Qs(g,p),Ea(p),P&512&&(mr||w===null||Sa(w,w.return)),P&64&&au&&(p=p.updateQueue,p!==null&&(P=p.callbacks,P!==null&&(w=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=w===null?P:w.concat(P))));break;case 26:if(Qa){var B=lr;Qs(g,p),Ea(p),P&512&&(mr||w===null||Sa(w,w.return)),P&4&&(P=w!==null?w.memoizedState:null,g=p.memoizedState,w===null?g===null?p.stateNode===null?p.stateNode=Zm(B,p.type,p.memoizedProps,p):Qm(B,p.type,p.stateNode):p.stateNode=qE(B,g,p.memoizedProps):P!==g?(P===null?w.stateNode!==null&&Qd(w.stateNode):ch(P),g===null?Qm(B,p.type,p.stateNode):qE(B,g,p.memoizedProps)):g===null&&p.stateNode!==null&&$_(p,p.memoizedProps,w.memoizedProps));break}case 27:if(Pi&&P&4&&p.alternate===null){B=p.stateNode;var $=p.memoizedProps;try{Kc(B),YE(p.type,$,B,p)}catch(ye){_i(p,p.return,ye)}}case 5:if(Qs(g,p),Ea(p),P&512&&(mr||w===null||Sa(w,w.return)),Kr){if(p.flags&32){g=p.stateNode;try{_b(g)}catch(ye){_i(p,p.return,ye)}}P&4&&p.stateNode!=null&&(g=p.memoizedProps,$_(p,g,w!==null?w.memoizedProps:g)),P&1024&&(Ib=!0)}break;case 6:if(Qs(g,p),Ea(p),P&4&&Kr){if(p.stateNode===null)throw Error(s(162));P=p.memoizedProps,w=w!==null?w.memoizedProps:P,g=p.stateNode;try{wE(g,w,P)}catch(ye){_i(p,p.return,ye)}}break;case 3:if(Qa?($E(),B=lr,lr=uv(g.containerInfo),Qs(g,p),lr=B):Qs(g,p),Ea(p),P&4){if(Kr&&As&&w!==null&&w.memoizedState.isDehydrated)try{yR(g.containerInfo)}catch(ye){_i(p,p.return,ye)}if(ko){P=g.containerInfo,w=g.pendingChildren;try{Zd(P,w)}catch(ye){_i(p,p.return,ye)}}}Ib&&(Ib=!1,fE(p));break;case 4:Qa?(w=lr,lr=uv(p.stateNode.containerInfo),Qs(g,p),Ea(p),lr=w):(Qs(g,p),Ea(p)),P&4&&ko&&zy(p.stateNode,p,p.stateNode.pendingChildren);break;case 12:Qs(g,p),Ea(p);break;case 13:Qs(g,p),Ea(p),p.child.flags&8192&&p.memoizedState!==null!=(w!==null&&w.memoizedState!==null)&&(ra=zo()),P&4&&(P=p.updateQueue,P!==null&&(p.updateQueue=null,ku(p,P)));break;case 22:P&512&&(mr||w===null||Sa(w,w.return)),B=p.memoizedState!==null;var ot=w!==null&&w.memoizedState!==null,_t=au,Nt=mr;if(au=_t||B,mr=Nt||ot,Qs(g,p),mr=Nt,au=_t,Ea(p),g=p.stateNode,g._current=p,g._visibility&=-3,g._visibility|=g._pendingVisibility&2,P&8192&&(g._visibility=B?g._visibility&-2:g._visibility|1,B&&(g=au||mr,w===null||ot||g||Ud(p)),Kr&&(p.memoizedProps===null||p.memoizedProps.mode!=="manual"))){t:if(w=null,Kr)for(g=p;;){if(g.tag===5||Qa&&g.tag===26||Pi&&g.tag===27){if(w===null){ot=w=g;try{$=ot.stateNode,B?OE($):DE(ot.stateNode,ot.memoizedProps)}catch(ye){_i(ot,ot.return,ye)}}}else if(g.tag===6){if(w===null){ot=g;try{var ne=ot.stateNode;B?IE(ne):mR(ne,ot.memoizedProps)}catch(ye){_i(ot,ot.return,ye)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===p)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break t;for(;g.sibling===null;){if(g.return===null||g.return===p)break t;w===g&&(w=null),g=g.return}w===g&&(w=null),g.sibling.return=g.return,g=g.sibling}}P&4&&(P=p.updateQueue,P!==null&&(w=P.retryQueue,w!==null&&(P.retryQueue=null,ku(p,w))));break;case 19:Qs(g,p),Ea(p),P&4&&(P=p.updateQueue,P!==null&&(p.updateQueue=null,ku(p,P)));break;case 21:break;default:Qs(g,p),Ea(p)}}function Ea(p){var g=p.flags;if(g&2){try{if(Kr&&(!Pi||p.tag!==27)){t:{for(var w=p.return;w!==null;){if(W_(w)){var P=w;break t}w=w.return}throw Error(s(160))}switch(P.tag){case 27:if(Pi){var B=P.stateNode,$=Im(p);Uu(p,$,B);break}case 5:var ot=P.stateNode;P.flags&32&&(_b(ot),P.flags&=-33);var _t=Im(p);Uu(p,_t,ot);break;case 3:case 4:var Nt=P.stateNode.containerInfo,ne=Im(p);X_(p,ne,Nt);break;default:throw Error(s(161))}}}catch(ye){_i(p,p.return,ye)}p.flags&=-3}g&4096&&(p.flags&=-4097)}function fE(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var g=p;fE(g),g.tag===5&&g.flags&1024&&nv(g.stateNode),p=p.sibling}}function zu(p,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)By(p,g.alternate,g),g=g.sibling}function Ud(p){for(p=p.child;p!==null;){var g=p;switch(g.tag){case 0:case 11:case 14:case 15:kc(4,g,g.return),Ud(g);break;case 1:Sa(g,g.return);var w=g.stateNode;typeof w.componentWillUnmount=="function"&&xa(g,g.return,w),Ud(g);break;case 26:case 27:case 5:Sa(g,g.return),Ud(g);break;case 22:Sa(g,g.return),g.memoizedState===null&&Ud(g);break;default:Ud(g)}p=p.sibling}}function Bu(p,g,w){for(w=w&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var P=g.alternate,B=p,$=g,ot=$.flags;switch($.tag){case 0:case 11:case 15:Bu(B,$,w),Om(4,$);break;case 1:if(Bu(B,$,w),P=$,B=P.stateNode,typeof B.componentDidMount=="function")try{B.componentDidMount()}catch(ne){_i(P,P.return,ne)}if(P=$,B=P.updateQueue,B!==null){var _t=P.stateNode;try{var Nt=B.shared.hiddenCallbacks;if(Nt!==null)for(B.shared.hiddenCallbacks=null,B=0;B<Nt.length;B++)At(Nt[B],_t)}catch(ne){_i(P,P.return,ne)}}w&&ot&64&&uE($),gl($,$.return);break;case 26:case 27:case 5:Bu(B,$,w),w&&P===null&&ot&4&&q_($),gl($,$.return);break;case 12:Bu(B,$,w);break;case 13:Bu(B,$,w),w&&ot&4&&Fy(B,$);break;case 22:$.memoizedState===null&&Bu(B,$,w),gl($,$.return);break;default:Bu(B,$,w)}g=g.sibling}}function Vy(p,g){var w=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),p=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(p=g.memoizedState.cachePool.pool),p!==w&&(p!=null&&p.refCount++,w!=null&&ar(w))}function Pm(p,g){p=null,g.alternate!==null&&(p=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==p&&(g.refCount++,p!=null&&ar(p))}function cs(p,g,w,P){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)Z_(p,g,w,P),g=g.sibling}function Z_(p,g,w,P){var B=g.flags;switch(g.tag){case 0:case 11:case 15:cs(p,g,w,P),B&2048&&Om(9,g);break;case 3:cs(p,g,w,P),B&2048&&(p=null,g.alternate!==null&&(p=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==p&&(g.refCount++,p!=null&&ar(p)));break;case 12:if(B&2048){cs(p,g,w,P),p=g.stateNode;try{var $=g.memoizedProps,ot=$.id,_t=$.onPostCommit;typeof _t=="function"&&_t(ot,g.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(Nt){_i(g,g.return,Nt)}}else cs(p,g,w,P);break;case 23:break;case 22:$=g.stateNode,g.memoizedState!==null?$._visibility&4?cs(p,g,w,P):Fs(p,g):$._visibility&4?cs(p,g,w,P):($._visibility|=4,Ts(p,g,w,P,(g.subtreeFlags&10256)!==0)),B&2048&&Vy(g.alternate,g);break;case 24:cs(p,g,w,P),B&2048&&Pm(g.alternate,g);break;default:cs(p,g,w,P)}}function Ts(p,g,w,P,B){for(B=B&&(g.subtreeFlags&10256)!==0,g=g.child;g!==null;){var $=p,ot=g,_t=w,Nt=P,ne=ot.flags;switch(ot.tag){case 0:case 11:case 15:Ts($,ot,_t,Nt,B),Om(8,ot);break;case 23:break;case 22:var ye=ot.stateNode;ot.memoizedState!==null?ye._visibility&4?Ts($,ot,_t,Nt,B):Fs($,ot):(ye._visibility|=4,Ts($,ot,_t,Nt,B)),B&&ne&2048&&Vy(ot.alternate,ot);break;case 24:Ts($,ot,_t,Nt,B),B&&ne&2048&&Pm(ot.alternate,ot);break;default:Ts($,ot,_t,Nt,B)}g=g.sibling}}function Fs(p,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var w=p,P=g,B=P.flags;switch(P.tag){case 22:Fs(w,P),B&2048&&Vy(P.alternate,P);break;case 24:Fs(w,P),B&2048&&Pm(P.alternate,P);break;default:Fs(w,P)}g=g.sibling}}function Do(p){if(p.subtreeFlags&so)for(p=p.child;p!==null;)Hy(p),p=p.sibling}function Hy(p){switch(p.tag){case 26:Do(p),p.flags&so&&(p.memoizedState!==null?XE(lr,p.memoizedState,p.memoizedProps):ea(p.type,p.memoizedProps));break;case 5:Do(p),p.flags&so&&ea(p.type,p.memoizedProps);break;case 3:case 4:if(Qa){var g=lr;lr=uv(p.stateNode.containerInfo),Do(p),lr=g}else Do(p);break;case 22:p.memoizedState===null&&(g=p.alternate,g!==null&&g.memoizedState!==null?(g=so,so=16777216,Do(p),so=g):Do(p));break;default:Do(p)}}function Nm(p){var g=p.alternate;if(g!==null&&(p=g.child,p!==null)){g.child=null;do g=p.sibling,p.sibling=null,p=g;while(p!==null)}}function Bc(p){var g=p.deletions;if((p.flags&16)!==0){if(g!==null)for(var w=0;w<g.length;w++){var P=g[w];bn=P,Q_(P,p)}Nm(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)Gy(p),p=p.sibling}function Gy(p){switch(p.tag){case 0:case 11:case 15:Bc(p),p.flags&2048&&kc(9,p,p.return);break;case 3:Bc(p);break;case 12:Bc(p);break;case 22:var g=p.stateNode;p.memoizedState!==null&&g._visibility&4&&(p.return===null||p.return.tag!==13)?(g._visibility&=-5,Fu(p)):Bc(p);break;default:Bc(p)}}function Fu(p){var g=p.deletions;if((p.flags&16)!==0){if(g!==null)for(var w=0;w<g.length;w++){var P=g[w];bn=P,Q_(P,p)}Nm(p)}for(p=p.child;p!==null;){switch(g=p,g.tag){case 0:case 11:case 15:kc(8,g,g.return),Fu(g);break;case 22:w=g.stateNode,w._visibility&4&&(w._visibility&=-5,Fu(g));break;default:Fu(g)}p=p.sibling}}function Q_(p,g){for(;bn!==null;){var w=bn;switch(w.tag){case 0:case 11:case 15:kc(8,w,g);break;case 23:case 22:if(w.memoizedState!==null&&w.memoizedState.cachePool!==null){var P=w.memoizedState.cachePool.pool;P!=null&&P.refCount++}break;case 24:ar(w.memoizedState.cache)}if(P=w.child,P!==null)P.return=w,bn=P;else t:for(w=p;bn!==null;){P=bn;var B=P.sibling,$=P.return;if(Y_(P),P===w){bn=null;break t}if(B!==null){B.return=$,bn=B;break t}bn=$}}}function kd(p){var g=yE(p);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(s(364));return g}if(p=mb(p),p===null)throw Error(s(362));return p.stateNode.current}function Fc(p,g){var w=p.tag;switch(g.$$typeof){case op:if(p.type===g.value)return!0;break;case Ho:t:{for(g=g.value,p=[p,0],w=0;w<p.length;){var P=p[w++],B=P.tag,$=p[w++],ot=g[$];if(B!==5&&B!==26&&B!==27||!Yd(P)){for(;ot!=null&&Fc(P,ot);)$++,ot=g[$];if($===g.length){g=!0;break t}else for(P=P.child;P!==null;)p.push(P,$),P=P.sibling}}g=!1}return g;case Wi:if((w===5||w===26||w===27)&&xE(p.stateNode,g.value))return!0;break;case ou:if((w===5||w===6||w===26||w===27)&&(p=bE(p),p!==null&&0<=p.indexOf(g.value)))return!0;break;case Al:if((w===5||w===26||w===27)&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function J_(p){switch(p.$$typeof){case op:return"<"+(o(p.value)||"Unknown")+">";case Ho:return":has("+(J_(p)||"")+")";case Wi:return'[role="'+p.value+'"]';case ou:return'"'+p.value+'"';case Al:return'[data-testname="'+p.value+'"]';default:throw Error(s(365))}}function Ta(p,g){var w=[];p=[p,0];for(var P=0;P<p.length;){var B=p[P++],$=B.tag,ot=p[P++],_t=g[ot];if($!==5&&$!==26&&$!==27||!Yd(B)){for(;_t!=null&&Fc(B,_t);)ot++,_t=g[ot];if(ot===g.length)w.push(B);else for(B=B.child;B!==null;)p.push(B,ot),B=B.sibling}}return w}function Lm(p,g){if(!Yc)throw Error(s(363));p=kd(p),p=Ta(p,g),g=[],p=Array.from(p);for(var w=0;w<p.length;){var P=p[w++],B=P.tag;if(B===5||B===26||B===27)Yd(P)||g.push(P.stateNode);else for(P=P.child;P!==null;)p.push(P),P=P.sibling}return g}function Tr(){if((oi&2)!==0&&Kn!==0)return Kn&-Kn;if(fn.T!==null){var p=eo;return p!==0?p:Mt()}return vE()}function tb(){lo===0&&(lo=(Kn&536870912)===0||ei?L():536870912);var p=no.current;return p!==null&&(p.flags|=32),lo}function fs(p,g,w){(p===xi&&Ci===2||p.cancelPendingCommit!==null)&&(ws(p,0),wa(p,Kn,lo,!1)),F(p,w),((oi&2)===0||p!==xi)&&(p===xi&&((oi&2)===0&&(tc|=w),Ui===4&&wa(p,Kn,lo,!1)),le(p))}function Vc(p,g,w){if((oi&6)!==0)throw Error(s(327));var P=!w&&(g&60)===0&&(g&p.expiredLanes)===0||k(p,g),B=P?nb(p,g):qy(p,g,!0),$=P;do{if(B===0){ao&&!P&&wa(p,g,0,!1);break}else if(B===6)wa(p,g,0,!jo);else{if(w=p.current.alternate,$&&!zd(w)){B=qy(p,g,!1),$=!1;continue}if(B===2){if($=g,p.errorRecoveryDisabledLanes&$)var ot=0;else ot=p.pendingLanes&-536870913,ot=ot!==0?ot:ot&536870912?536870912:0;if(ot!==0){g=ot;t:{var _t=p;B=wh;var Nt=As&&_t.current.memoizedState.isDehydrated;if(Nt&&(ws(_t,ot).flags|=256),ot=qy(_t,ot,!1),ot!==2){if(Jr&&!Nt){_t.errorRecoveryDisabledLanes|=$,tc|=$,B=4;break t}$=gr,gr=B,$!==null&&Um($)}B=ot}if($=!1,B!==2)continue}}if(B===1){ws(p,0),wa(p,g,0,!0);break}t:{switch(P=p,B){case 0:case 1:throw Error(s(345));case 4:if((g&4194176)===g){wa(P,g,lo,!jo);break t}break;case 2:gr=null;break;case 3:case 5:break;default:throw Error(s(329))}if(P.finishedWork=w,P.finishedLanes=g,(g&62914560)===g&&($=ra+300-zo(),10<$)){if(wa(P,g,lo,!jo),I(P,0)!==0)break t;P.timeoutHandle=Fr(jy.bind(null,P,w,gr,sg,bv,g,lo,tc,lu,jo,2,-0,0),$);break t}jy(P,w,gr,sg,bv,g,lo,tc,lu,jo,0,-0,0)}}break}while(!0);le(p)}function Um(p){gr===null?gr=p:gr.push.apply(gr,p)}function jy(p,g,w,P,B,$,ot,_t,Nt,ne,ye,De,Ue){var xn=g.subtreeFlags;if((xn&8192||(xn&16785408)===16785408)&&(db(),Hy(g),g=Vr(),g!==null)){p.cancelPendingCommit=g(Gc.bind(null,p,w,P,B,ot,_t,Nt,1,De,Ue)),wa(p,$,ot,!ne);return}Gc(p,w,P,B,ot,_t,Nt,ye,De,Ue)}function zd(p){for(var g=p;;){var w=g.tag;if((w===0||w===11||w===15)&&g.flags&16384&&(w=g.updateQueue,w!==null&&(w=w.stores,w!==null)))for(var P=0;P<w.length;P++){var B=w[P],$=B.getSnapshot;B=B.value;try{if(!Ma($(),B))return!1}catch{return!1}}if(w=g.child,g.subtreeFlags&16384&&w!==null)w.return=g,g=w;else{if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function wa(p,g,w,P){g&=~rg,g&=~tc,p.suspendedLanes|=g,p.pingedLanes&=~g,P&&(p.warmLanes|=g),P=p.expirationTimes;for(var B=g;0<B;){var $=31-na(B),ot=1<<$;P[$]=-1,B&=~ot}w!==0&&V(p,w,g)}function km(){return(oi&6)===0?(ct(0),!1):!0}function Bd(){if(an!==null){if(Ci===0)var p=an.return;else p=an,ro=wl=null,Zs(p),ef=null,nf=0,p=an;for(;p!==null;)lE(p.alternate,p),p=p.return;an=null}}function ws(p,g){p.finishedWork=null,p.finishedLanes=0;var w=p.timeoutHandle;w!==Wc&&(p.timeoutHandle=Wc,tv(w)),w=p.cancelPendingCommit,w!==null&&(p.cancelPendingCommit=null,w()),Bd(),xi=p,an=w=No(p.current,null),Kn=g,Ci=0,Hs=null,jo=!1,ao=k(p,g),Jr=!1,lu=lo=rg=tc=oo=Ui=0,gr=wh=null,bv=!1,(g&8)!==0&&(g|=g&32);var P=p.entangledLanes;if(P!==0)for(p=p.entanglements,P&=g;0<P;){var B=31-na(P),$=1<<B;g|=p[B],P&=~$}return Gs=g,at(),w}function Ya(p,g){Nn=null,fn.H=pr,g===ip?(g=sn(),Ci=3):g===ng?(g=sn(),Ci=4):Ci=g===vv?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,Hs=g,an===null&&(Ui=1,Pu(p,et(g,p.current)))}function Hc(){var p=no.current;return p===null?!0:(Kn&4194176)===Kn?Ni===null:(Kn&62914560)===Kn||(Kn&536870912)!==0?p===Ni:!1}function Yl(){var p=fn.H;return fn.H=pr,p===null?pr:p}function Kl(){var p=fn.A;return fn.A=ap,p}function Vu(){Ui=4,jo||(Kn&4194176)!==Kn&&no.current!==null||(ao=!0),(oo&134217727)===0&&(tc&134217727)===0||xi===null||wa(xi,Kn,lo,!1)}function qy(p,g,w){var P=oi;oi|=2;var B=Yl(),$=Kl();(xi!==p||Kn!==g)&&(sg=null,ws(p,g)),g=!1;var ot=Ui;t:do try{if(Ci!==0&&an!==null){var _t=an,Nt=Hs;switch(Ci){case 8:Bd(),ot=6;break t;case 3:case 2:case 6:no.current===null&&(g=!0);var ne=Ci;if(Ci=0,Hs=null,Po(p,_t,Nt,ne),w&&ao){ot=0;break t}break;default:ne=Ci,Ci=0,Hs=null,Po(p,_t,Nt,ne)}}eb(),ot=Ui;break}catch(ye){Ya(p,ye)}while(!0);return g&&p.shellSuspendCounter++,ro=wl=null,oi=P,fn.H=B,fn.A=$,an===null&&(xi=null,Kn=0,at()),ot}function eb(){for(;an!==null;)or(an)}function nb(p,g){var w=oi;oi|=2;var P=Yl(),B=Kl();xi!==p||Kn!==g?(sg=null,lp=zo()+500,ws(p,g)):ao=k(p,g);t:do try{if(Ci!==0&&an!==null){g=an;var $=Hs;e:switch(Ci){case 1:Ci=0,Hs=null,Po(p,g,$,1);break;case 2:if(re($)){Ci=0,Hs=null,ci(g);break}g=function(){Ci===2&&xi===p&&(Ci=7),le(p)},$.then(g,g);break t;case 3:Ci=7;break t;case 4:Ci=5;break t;case 7:re($)?(Ci=0,Hs=null,ci(g)):(Ci=0,Hs=null,Po(p,g,$,7));break;case 5:var ot=null;switch(an.tag){case 26:ot=an.memoizedState;case 5:case 27:var _t=an,Nt=_t.type,ne=_t.pendingProps;if(ot?fh(ot):ev(Nt,ne)){Ci=0,Hs=null;var ye=_t.sibling;if(ye!==null)an=ye;else{var De=_t.return;De!==null?(an=De,Ka(De)):an=null}break e}}Ci=0,Hs=null,Po(p,g,$,5);break;case 6:Ci=0,Hs=null,Po(p,g,$,6);break;case 8:Bd(),Ui=6;break t;default:throw Error(s(462))}}Js();break}catch(Ue){Ya(p,Ue)}while(!0);return ro=wl=null,fn.H=P,fn.A=B,oi=w,an!==null?0:(xi=null,Kn=0,at(),Ui)}function Js(){for(;an!==null&&!QE();)or(an)}function or(p){var g=Bs(p.alternate,p,Gs);p.memoizedProps=p.pendingProps,g===null?Ka(p):an=g}function ci(p){var g=p,w=g.alternate;switch(g.tag){case 15:case 0:g=Lc(w,g,g.pendingProps,g.type,void 0,Kn);break;case 11:g=Lc(w,g,g.pendingProps,g.type.render,g.ref,Kn);break;case 5:Zs(g);default:lE(w,g),g=an=Bm(g,Gs),g=Bs(w,g,Gs)}p.memoizedProps=p.pendingProps,g===null?Ka(p):an=g}function Po(p,g,w,P){ro=wl=null,Zs(g),ef=null,nf=0;var B=g.return;try{if(j_(p,B,g,w,Kn)){Ui=1,Pu(p,et(w,p.current)),an=null;return}}catch($){if(B!==null)throw an=B,$;Ui=1,Pu(p,et(w,p.current)),an=null;return}g.flags&32768?(ei||P===1?p=!0:ao||(Kn&536870912)!==0?p=!1:(jo=p=!0,(P===2||P===3||P===6)&&(P=no.current,P!==null&&P.tag===13&&(P.flags|=16384))),$y(g,p)):Ka(g)}function Ka(p){var g=p;do{if((g.flags&32768)!==0){$y(g,jo);return}p=g.return;var w=oE(g.alternate,g,Gs);if(w!==null){an=w;return}if(g=g.sibling,g!==null){an=g;return}an=g=p}while(g!==null);Ui===0&&(Ui=5)}function $y(p,g){do{var w=cR(p.alternate,p);if(w!==null){w.flags&=32767,an=w;return}if(w=p.return,w!==null&&(w.flags|=32768,w.subtreeFlags=0,w.deletions=null),!g&&(p=p.sibling,p!==null)){an=p;return}an=p=w}while(p!==null);Ui=6,an=null}function Gc(p,g,w,P,B,$,ot,_t,Nt,ne){var ye=fn.T,De=Wu();try{Vs(2),fn.T=null,hE(p,g,w,P,De,B,$,ot,_t,Nt,ne)}finally{fn.T=ye,Vs(De)}}function hE(p,g,w,P,B,$,ot,_t){do yl();while(uu!==null);if((oi&6)!==0)throw Error(s(327));var Nt=p.finishedWork;if(P=p.finishedLanes,Nt===null)return null;if(p.finishedWork=null,p.finishedLanes=0,Nt===p.current)throw Error(s(177));p.callbackNode=null,p.callbackPriority=0,p.cancelPendingCommit=null;var ne=Nt.lanes|Nt.childLanes;if(ne|=El,H(p,P,ne,$,ot,_t),p===xi&&(an=xi=null,Kn=0),(Nt.subtreeFlags&10256)===0&&(Nt.flags&10256)===0||Ml||(Ml=!0,lf=ne,xv=w,Gu(pv,function(){return yl(),null})),w=(Nt.flags&15990)!==0,(Nt.subtreeFlags&15990)!==0||w?(w=fn.T,fn.T=null,$=Wu(),Vs(2),ot=oi,oi|=4,Dm(p,Nt),K_(Nt,p),gE(p.containerInfo),p.current=Nt,By(p,Nt.alternate,Nt),hv(),oi=ot,Vs($),fn.T=w):p.current=Nt,Ml?(Ml=!1,uu=p,Ah=P):ib(p,ne),ne=p.pendingLanes,ne===0&&(of=null),q(Nt.stateNode),le(p),g!==null)for(B=p.onRecoverableError,Nt=0;Nt<g.length;Nt++)ne=g[Nt],B(ne.value,{componentStack:ne.stack});return(Ah&3)!==0&&yl(),ne=p.pendingLanes,(P&4194218)!==0&&(ne&42)!==0?p===Sv?up++:(up=0,Sv=p):up=0,ct(0),null}function ib(p,g){(p.pooledCacheLanes&=g)===0&&(g=p.pooledCache,g!=null&&(p.pooledCache=null,ar(g)))}function yl(){if(uu!==null){var p=uu,g=lf;lf=0;var w=J(Ah),P=32>w?32:w;w=fn.T;var B=Wu();try{if(Vs(P),fn.T=null,uu===null)var $=!1;else{P=xv,xv=null;var ot=uu,_t=Ah;if(uu=null,Ah=0,(oi&6)!==0)throw Error(s(331));var Nt=oi;if(oi|=4,Gy(ot.current),Z_(ot,ot.current,_t,P),oi=Nt,ct(0,!1),Aa&&typeof Aa.onPostCommitFiberRoot=="function")try{Aa.onPostCommitFiberRoot(Mr,ot)}catch{}$=!0}return $}finally{Vs(B),fn.T=w,ib(p,g)}}return!1}function Fd(p,g,w){g=et(w,g),g=Nu(p.stateNode,g,2),p=Me(p,g,2),p!==null&&(F(p,2),le(p))}function _i(p,g,w){if(p.tag===3)Fd(p,p,w);else for(;g!==null;){if(g.tag===3){Fd(g,p,w);break}else if(g.tag===1){var P=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(of===null||!of.has(P))){p=et(w,p),w=Xa(2),P=Me(g,w,2),P!==null&&(Em(w,P,g,p),F(P,2),le(P));break}}g=g.return}}function lh(p,g,w){var P=p.pingCache;if(P===null){P=p.pingCache=new Go;var B=new Set;P.set(g,B)}else B=P.get(g),B===void 0&&(B=new Set,P.set(g,B));B.has(w)||(Jr=!0,B.add(w),p=rb.bind(null,p,g,w),g.then(p,p))}function rb(p,g,w){var P=p.pingCache;P!==null&&P.delete(g),p.pingedLanes|=p.suspendedLanes&w,p.warmLanes&=~w,xi===p&&(Kn&w)===w&&(Ui===4||Ui===3&&(Kn&62914560)===Kn&&300>zo()-ra?(oi&2)===0&&ws(p,0):rg|=w,lu===Kn&&(lu=0)),le(p)}function jc(p,g){g===0&&(g=U()),p=se(p,g),p!==null&&(F(p,g),le(p))}function Hu(p){var g=p.memoizedState,w=0;g!==null&&(w=g.retryLane),jc(p,w)}function qc(p,g){var w=0;switch(p.tag){case 13:var P=p.stateNode,B=p.memoizedState;B!==null&&(w=B.retryLane);break;case 19:P=p.stateNode;break;case 22:P=p.stateNode._retryCache;break;default:throw Error(s(314))}P!==null&&P.delete(g),jc(p,w)}function Gu(p,g){return Jm(p,g)}function sb(p,g,w,P){this.tag=p,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zm(p){return p=p.prototype,!(!p||!p.isReactComponent)}function No(p,g){var w=p.alternate;return w===null?(w=n(p.tag,g,p.key,p.mode),w.elementType=p.elementType,w.type=p.type,w.stateNode=p.stateNode,w.alternate=p,p.alternate=w):(w.pendingProps=g,w.type=p.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=p.flags&31457280,w.childLanes=p.childLanes,w.lanes=p.lanes,w.child=p.child,w.memoizedProps=p.memoizedProps,w.memoizedState=p.memoizedState,w.updateQueue=p.updateQueue,g=p.dependencies,w.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},w.sibling=p.sibling,w.index=p.index,w.ref=p.ref,w.refCleanup=p.refCleanup,w}function Bm(p,g){p.flags&=31457282;var w=p.alternate;return w===null?(p.childLanes=0,p.lanes=g,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,g=w.dependencies,p.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),p}function Zl(p,g,w,P,B,$){var ot=0;if(P=p,typeof p=="function")zm(p)&&(ot=1);else if(typeof p=="string")ot=Qa&&Pi?Km(p,w,Zr.current)?26:Jl(p)?27:5:Qa?Km(p,w,Zr.current)?26:5:Pi&&Jl(p)?27:5;else t:switch(p){case $c:return dr(w.children,B,$,g);case Gm:ot=8,B|=24;break;case Ky:return p=n(12,w,g,B|2),p.elementType=Ky,p.lanes=$,p;case Zy:return p=n(13,w,g,B),p.elementType=Zy,p.lanes=$,p;case jd:return p=n(19,w,g,B),p.elementType=jd,p.lanes=$,p;case lb:return Fm(w,B,$,g);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case jm:case vl:ot=10;break t;case ob:ot=9;break t;case qm:ot=11;break t;case Qy:ot=14;break t;case Uo:ot=16,P=null;break t}ot=29,w=Error(s(130,p===null?"null":typeof p,"")),P=null}return g=n(ot,w,g,B),g.elementType=p,g.type=P,g.lanes=$,g}function dr(p,g,w,P){return p=n(7,p,P,g),p.lanes=w,p}function Fm(p,g,w,P){p=n(22,p,P,g),p.elementType=lb,p.lanes=w;var B={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var $=B._current;if($===null)throw Error(s(456));if((B._pendingVisibility&2)===0){var ot=se($,2);ot!==null&&(B._pendingVisibility|=2,fs(ot,$,2))}},attach:function(){var $=B._current;if($===null)throw Error(s(456));if((B._pendingVisibility&2)!==0){var ot=se($,2);ot!==null&&(B._pendingVisibility&=-3,fs(ot,$,2))}}};return p.stateNode=B,p}function Wy(p,g,w){return p=n(6,p,null,g),p.lanes=w,p}function ab(p,g,w){return g=n(4,p.children!==null?p.children:[],p.key,g),g.lanes=w,g.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},g}function fR(p,g,w,P,B,$,ot,_t){this.tag=1,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Wc,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=O(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O(0),this.hiddenUpdates=O(null),this.identifierPrefix=P,this.onUncaughtError=B,this.onCaughtError=$,this.onRecoverableError=ot,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_t,this.incompleteTransitions=new Map}function dE(p,g,w,P,B,$,ot,_t,Nt,ne,ye,De){return p=new fR(p,g,w,ot,_t,Nt,ne,De),g=1,$===!0&&(g|=24),$=n(3,null,null,g),p.current=$,$.stateNode=p,g=Xn(),g.refCount++,p.pooledCache=g,g.refCount++,$.memoizedState={element:P,isDehydrated:w,cache:g},jt($),p}function Br(p){return p?(p=Qc,p):Qc}function Xy(p){var g=p._reactInternals;if(g===void 0)throw typeof p.render=="function"?Error(s(188)):(p=Object.keys(p).join(","),Error(s(268,p)));return p=_(g),p=p!==null?x(p):null,p===null?null:Wd(p.stateNode)}function Vd(p,g,w,P,B,$){B=Br(B),P.context===null?P.context=B:P.pendingContext=B,P=we(g),P.payload={element:w},$=$===void 0?null:$,$!==null&&(P.callback=$),w=Me(p,P,g),w!==null&&(fs(w,p,g),Zt(w,p,g))}function Hd(p,g){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var w=p.retryLane;p.retryLane=w!==0&&w<g?w:g}}function Vm(p,g){Hd(p,g),(p=p.alternate)&&Hd(p,g)}var An={},Gd=w_(),Za=o9(),Yy=Object.assign,hR=Symbol.for("react.element"),Hm=Symbol.for("react.transitional.element"),Lo=Symbol.for("react.portal"),$c=Symbol.for("react.fragment"),Gm=Symbol.for("react.strict_mode"),Ky=Symbol.for("react.profiler"),jm=Symbol.for("react.provider"),ob=Symbol.for("react.consumer"),vl=Symbol.for("react.context"),qm=Symbol.for("react.forward_ref"),Zy=Symbol.for("react.suspense"),jd=Symbol.for("react.suspense_list"),Qy=Symbol.for("react.memo"),Uo=Symbol.for("react.lazy"),lb=Symbol.for("react.offscreen"),pE=Symbol.for("react.memo_cache_sentinel"),ju=Symbol.iterator,ub=Symbol.for("react.client.reference"),fn=Gd.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ql,qu,uh=!1,qd=Array.isArray,cb=e.rendererVersion,$m=e.rendererPackageName,$d=e.extraDevToolsConfig,Wd=e.getPublicInstance,mE=e.getRootHostContext,Xd=e.getChildHostContext,Jy=e.prepareForCommit,gE=e.resetAfterCommit,fb=e.createInstance,Wm=e.appendInitialChild,$u=e.finalizeInitialChildren,Mn=e.shouldSetTextContent,Ti=e.createTextInstance,Fr=e.scheduleTimeout,tv=e.cancelTimeout,Wc=e.noTimeout,ta=e.isPrimaryRenderer;e.warnsIfNotActing;var Kr=e.supportsMutation,ko=e.supportsPersistence,As=e.supportsHydration,yE=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var wr=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Vs=e.setCurrentUpdatePriority,Wu=e.getCurrentUpdatePriority,vE=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var _E=e.shouldAttemptEagerTransition,dR=e.detachDeletedInstance;e.requestPostPaintCallback;var hb=e.maySuspendCommit,ev=e.preloadInstance,db=e.startSuspendingCommit,ea=e.suspendInstance,Vr=e.waitForCommitToBeReady,Xc=e.NotPendingTransition,_l=e.HostTransitionContext,nv=e.resetFormInstance;e.bindToConsole;var pb=e.supportsMicrotasks,Xu=e.scheduleMicrotask,Yc=e.supportsTestSelectors,mb=e.findFiberRoot,gb=e.getBoundingRect,bE=e.getTextContent,Yd=e.isHiddenSubtree,xE=e.matchAccessibilityRole,SE=e.setFocusIfFocusable,EE=e.setupIntersectionObserver,TE=e.appendChild,yb=e.appendChildToContainer,wE=e.commitTextUpdate,pR=e.commitMount,AE=e.commitUpdate,ME=e.insertBefore,CE=e.insertInContainerBefore,vb=e.removeChild,RE=e.removeChildFromContainer,_b=e.resetTextContent,OE=e.hideInstance,IE=e.hideTextInstance,DE=e.unhideInstance,mR=e.unhideTextInstance,PE=e.clearContainer,Kd=e.cloneInstance,Xm=e.createContainerChildSet,bb=e.appendChildToContainerChildSet,iv=e.finalizeContainerChildren,Zd=e.replaceContainerChildren,xb=e.cloneHiddenInstance,Sb=e.cloneHiddenTextInstance,rv=e.isSuspenseInstancePending,sv=e.isSuspenseInstanceFallback,NE=e.getSuspenseInstanceFallbackErrorDetails,LE=e.registerSuspenseInstanceRetry,Eb=e.canHydrateFormStateMarker,UE=e.isFormStateMarkerMatching,Tb=e.getNextHydratableSibling,av=e.getFirstHydratableChild,kE=e.getFirstHydratableChildWithinContainer,zE=e.getFirstHydratableChildWithinSuspenseInstance,gR=e.canHydrateInstance,wb=e.canHydrateTextInstance,BE=e.canHydrateSuspenseInstance,FE=e.hydrateInstance,Ab=e.hydrateTextInstance,VE=e.hydrateSuspenseInstance,HE=e.getNextHydratableInstanceAfterSuspenseInstance,yR=e.commitHydratedContainer,vR=e.commitHydratedSuspenseInstance,GE=e.clearSuspenseBoundary,Ym=e.clearSuspenseBoundaryFromContainer,ov=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var lv=e.validateHydratableInstance,jE=e.validateHydratableTextInstance,Qa=e.supportsResources,Km=e.isHostHoistableType,uv=e.getHoistableRoot,Mb=e.getResource,qE=e.acquireResource,ch=e.releaseResource,Zm=e.hydrateHoistable,Qm=e.mountHoistable,Qd=e.unmountHoistable,cv=e.createHoistableInstance,$E=e.prepareToCommitHoistables,WE=e.mayResourceSuspendCommit,fh=e.preloadResource,XE=e.suspendResource,Pi=e.supportsSingletons,bl=e.resolveSingletonInstance,Kc=e.clearSingleton,YE=e.acquireSingletonInstance,Zc=e.releaseSingletonInstance,Jl=e.isHostSingletonType,Ar=[],Yu=-1,Qc={},na=Math.clz32?Math.clz32:R,KE=Math.log,ZE=Math.LN2,tu=128,hh=4194304,Jm=Za.unstable_scheduleCallback,fv=Za.unstable_cancelCallback,QE=Za.unstable_shouldYield,hv=Za.unstable_requestPaint,zo=Za.unstable_now,dv=Za.unstable_ImmediatePriority,JE=Za.unstable_UserBlockingPriority,pv=Za.unstable_NormalPriority,_R=Za.unstable_IdlePriority,tT=Za.log,hs=Za.unstable_setDisableYieldValue,Mr=null,Aa=null,Ma=typeof Object.is=="function"?Object.is:K,Cb=new WeakMap,dh=[],ph=0,mh=null,Jd=0,Ja=[],to=0,Jc=null,xl=1,Sl="",Zr=T(null),tp=T(null),eu=T(null),gh=T(null),Ms=null,Cs=null,ei=!1,Bo=null,ds=!1,tg=Error(s(519)),Fo=[],yh=0,El=0,eg=null,Ku=null,vh=!1,Bi=!1,Rb=!1,ep=0,np=null,_h=0,eo=0,bh=null,Zu=!1,xh=!1,nu=Object.prototype.hasOwnProperty,ip=Error(s(460)),ng=Error(s(474)),ig={then:function(){}},tf=null,ef=null,nf=0,rf=Qn(!0),iu=Qn(!1),Fi=T(null),rp=T(0),no=T(null),Ni=null,Qr=T(0),Qu=0,Nn=null,rn=null,ai=null,Vo=!1,Sh=!1,sf=!1,mv=0,Eh=0,ps=null,Tl=0,gv=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},pr={readContext:Rt,use:Vt,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useLayoutEffect:ri,useInsertionEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useSyncExternalStore:ri,useId:ri};pr.useCacheRefresh=ri,pr.useMemoCache=ri,pr.useHostTransitionStatus=ri,pr.useFormState=ri,pr.useActionState=ri,pr.useOptimistic=ri;var af={readContext:Rt,use:Vt,useCallback:function(p,g){return it().memoizedState=[p,g===void 0?null:g],p},useContext:Rt,useEffect:wd,useImperativeHandle:function(p,g,w){w=w!=null?w.concat([p]):null,Jf(4194308,4,$l.bind(null,g,p),w)},useLayoutEffect:function(p,g){return Jf(4194308,4,p,g)},useInsertionEffect:function(p,g){Jf(4,2,p,g)},useMemo:function(p,g){var w=it();g=g===void 0?null:g;var P=p();if(sf){W(!0);try{p()}finally{W(!1)}}return w.memoizedState=[P,g],P},useReducer:function(p,g,w){var P=it();if(w!==void 0){var B=w(g);if(sf){W(!0);try{w(g)}finally{W(!1)}}}else B=g;return P.memoizedState=P.baseState=B,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:B},P.queue=p,p=p.dispatch=Du.bind(null,Nn,p),[P.memoizedState,p]},useRef:function(p){var g=it();return p={current:p},g.memoizedState=p},useState:function(p){p=Pn(p);var g=p.queue,w=Md.bind(null,Nn,g);return g.dispatch=w,[p.memoizedState,w]},useDebugValue:hl,useDeferredValue:function(p,g){var w=it();return To(w,p,g)},useTransition:function(){var p=Pn(!1);return p=Rc.bind(null,Nn,p.queue,!0,!1),it().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,g,w){var P=Nn,B=it();if(ei){if(w===void 0)throw Error(s(407));w=w()}else{if(w=g(),xi===null)throw Error(s(349));(Kn&60)!==0||Ye(P,g,w)}B.memoizedState=w;var $={value:w,getSnapshot:g};return B.queue=$,wd(On.bind(null,P,$,p),[p]),P.flags|=2048,xr(9,Ge.bind(null,P,$,w,g),{destroy:void 0},null),w},useId:function(){var p=it(),g=xi.identifierPrefix;if(ei){var w=Sl,P=xl;w=(P&~(1<<32-na(P)-1)).toString(32)+w,g=":"+g+"R"+w,w=mv++,0<w&&(g+="H"+w.toString(32)),g+=":"}else w=Tl++,g=":"+g+"r"+w.toString(32)+":";return p.memoizedState=g},useCacheRefresh:function(){return it().memoizedState=Ic.bind(null,Nn)}};af.useMemoCache=Ot,af.useHostTransitionStatus=_a,af.useFormState=si,af.useActionState=si,af.useOptimistic=function(p){var g=it();g.memoizedState=g.baseState=p;var w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=w,g=Ao.bind(null,Nn,!0,w),w.dispatch=g,[p,g]};var ia={readContext:Rt,use:Vt,useCallback:Wl,useContext:Rt,useEffect:bm,useImperativeHandle:Wa,useInsertionEffect:Ny,useLayoutEffect:th,useMemo:Ad,useReducer:be,useRef:zs,useState:function(){return be(he)},useDebugValue:hl,useDeferredValue:function(p,g){var w=St();return xm(w,rn.memoizedState,p,g)},useTransition:function(){var p=be(he)[0],g=St().memoizedState;return[typeof p=="boolean"?p:Bt(p),g]},useSyncExternalStore:nn,useId:Oc};ia.useCacheRefresh=dl,ia.useMemoCache=Ot,ia.useHostTransitionStatus=_a,ia.useFormState=hr,ia.useActionState=hr,ia.useOptimistic=function(p,g){var w=St();return zn(w,rn,p,g)};var io={readContext:Rt,use:Vt,useCallback:Wl,useContext:Rt,useEffect:bm,useImperativeHandle:Wa,useInsertionEffect:Ny,useLayoutEffect:th,useMemo:Ad,useReducer:Le,useRef:zs,useState:function(){return Le(he)},useDebugValue:hl,useDeferredValue:function(p,g){var w=St();return rn===null?To(w,p,g):xm(w,rn.memoizedState,p,g)},useTransition:function(){var p=Le(he)[0],g=St().memoizedState;return[typeof p=="boolean"?p:Bt(p),g]},useSyncExternalStore:nn,useId:Oc};io.useCacheRefresh=dl,io.useMemoCache=Ot,io.useHostTransitionStatus=_a,io.useFormState=rr,io.useActionState=rr,io.useOptimistic=function(p,g){var w=St();return rn!==null?zn(w,rn,p,g):(w.baseState=p,[p,w.queue.dispatch])};var ru={isMounted:function(p){return(p=p._reactInternals)?m(p)===p:!1},enqueueSetState:function(p,g,w){p=p._reactInternals;var P=Tr(),B=we(P);B.payload=g,w!=null&&(B.callback=w),g=Me(p,B,P),g!==null&&(fs(g,p,P),Zt(g,p,P))},enqueueReplaceState:function(p,g,w){p=p._reactInternals;var P=Tr(),B=we(P);B.tag=1,B.payload=g,w!=null&&(B.callback=w),g=Me(p,B,P),g!==null&&(fs(g,p,P),Zt(g,p,P))},enqueueForceUpdate:function(p,g){p=p._reactInternals;var w=Tr(),P=we(w);P.tag=2,g!=null&&(P.callback=g),g=Me(p,P,w),g!==null&&(fs(g,p,w),Zt(g,p,w))}},yv=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)},vv=Error(s(461)),Li=!1,_v={dehydrated:null,treeContext:null,retryLane:0},Ju=T(null),wl=null,ro=null,sp=typeof AbortController<"u"?AbortController:function(){var p=[],g=this.signal={aborted:!1,addEventListener:function(w,P){p.push(P)}};this.abort=function(){g.aborted=!0,p.forEach(function(w){return w()})}},eT=Za.unstable_scheduleCallback,nT=Za.unstable_NormalPriority,Vi={$$typeof:vl,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Ob=fn.S;fn.S=function(p,g){typeof g=="object"&&g!==null&&typeof g.then=="function"&&Lt(p,g),Ob!==null&&Ob(p,g)};var su=T(null),au=!1,mr=!1,Ib=!1,bi=typeof WeakSet=="function"?WeakSet:Set,bn=null,Hn=!1,Je=null,In=!1,lr=null,so=8192,ap={getCacheForType:function(p){var g=Rt(Vi),w=g.data.get(p);return w===void 0&&(w=p(),g.data.set(p,w)),w}},op=0,Ho=1,Wi=2,Al=3,ou=4;if(typeof Symbol=="function"&&Symbol.for){var Th=Symbol.for;op=Th("selector.component"),Ho=Th("selector.has_pseudo_class"),Wi=Th("selector.role"),Al=Th("selector.test_id"),ou=Th("selector.text")}var Go=typeof WeakMap=="function"?WeakMap:Map,oi=0,xi=null,an=null,Kn=0,Ci=0,Hs=null,jo=!1,ao=!1,Jr=!1,Gs=0,Ui=0,oo=0,tc=0,rg=0,lo=0,lu=0,wh=null,gr=null,bv=!1,ra=0,lp=1/0,sg=null,of=null,Ml=!1,uu=null,Ah=0,lf=0,xv=null,up=0,Sv=null;return An.attemptContinuousHydration=function(p){if(p.tag===13){var g=se(p,67108864);g!==null&&fs(g,p,67108864),Vm(p,67108864)}},An.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var g=Tr(),w=se(p,g);w!==null&&fs(w,p,g),Vm(p,g)}},An.attemptSynchronousHydration=function(p){switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var g=A(p.pendingLanes);if(g!==0){for(p.pendingLanes|=2,p.entangledLanes|=2;g;){var w=1<<31-na(g);p.entanglements[1]|=w,g&=~w}le(p),(oi&6)===0&&(lp=zo()+500,ct(0))}}break;case 13:g=se(p,2),g!==null&&fs(g,p,2),km(),Vm(p,2)}},An.batchedUpdates=function(p,g){return p(g)},An.createComponentSelector=function(p){return{$$typeof:op,value:p}},An.createContainer=function(p,g,w,P,B,$,ot,_t,Nt,ne){return dE(p,g,!1,null,w,P,$,ot,_t,Nt,ne,null)},An.createHasPseudoClassSelector=function(p){return{$$typeof:Ho,value:p}},An.createHydrationContainer=function(p,g,w,P,B,$,ot,_t,Nt,ne,ye,De,Ue){return p=dE(w,P,!0,p,B,$,_t,Nt,ne,ye,De,Ue),p.context=Br(null),w=p.current,P=Tr(),B=we(P),B.callback=g??null,Me(w,B,P),p.current.lanes=P,F(p,P),le(p),p},An.createPortal=function(p,g,w){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lo,key:P==null?null:""+P,children:p,containerInfo:g,implementation:w}},An.createRoleSelector=function(p){return{$$typeof:Wi,value:p}},An.createTestNameSelector=function(p){return{$$typeof:Al,value:p}},An.createTextSelector=function(p){return{$$typeof:ou,value:p}},An.defaultOnCaughtError=function(p){console.error(p)},An.defaultOnRecoverableError=function(p){yv(p)},An.defaultOnUncaughtError=function(p){yv(p)},An.deferredUpdates=function(p){var g=fn.T,w=Wu();try{return Vs(32),fn.T=null,p()}finally{Vs(w),fn.T=g}},An.discreteUpdates=function(p,g,w,P,B){var $=fn.T,ot=Wu();try{return Vs(2),fn.T=null,p(g,w,P,B)}finally{Vs(ot),fn.T=$,oi===0&&(lp=zo()+500)}},An.findAllNodes=Lm,An.findBoundingRects=function(p,g){if(!Yc)throw Error(s(363));g=Lm(p,g),p=[];for(var w=0;w<g.length;w++)p.push(gb(g[w]));for(g=p.length-1;0<g;g--){w=p[g];for(var P=w.x,B=P+w.width,$=w.y,ot=$+w.height,_t=g-1;0<=_t;_t--)if(g!==_t){var Nt=p[_t],ne=Nt.x,ye=ne+Nt.width,De=Nt.y,Ue=De+Nt.height;if(P>=ne&&$>=De&&B<=ye&&ot<=Ue){p.splice(g,1);break}else if(P!==ne||w.width!==Nt.width||Ue<$||De>ot){if(!($!==De||w.height!==Nt.height||ye<P||ne>B)){ne>P&&(Nt.width+=ne-P,Nt.x=P),ye<B&&(Nt.width=B-ne),p.splice(g,1);break}}else{De>$&&(Nt.height+=De-$,Nt.y=$),Ue<ot&&(Nt.height=ot-De),p.splice(g,1);break}}}return p},An.findHostInstance=Xy,An.findHostInstanceWithNoPortals=function(p){return p=_(p),p=p!==null?S(p):null,p===null?null:Wd(p.stateNode)},An.findHostInstanceWithWarning=function(p){return Xy(p)},An.flushPassiveEffects=yl,An.flushSyncFromReconciler=function(p){var g=oi;oi|=1;var w=fn.T,P=Wu();try{if(Vs(2),fn.T=null,p)return p()}finally{Vs(P),fn.T=w,oi=g,(oi&6)===0&&ct(0)}},An.flushSyncWork=km,An.focusWithin=function(p,g){if(!Yc)throw Error(s(363));for(p=kd(p),g=Ta(p,g),g=Array.from(g),p=0;p<g.length;){var w=g[p++],P=w.tag;if(!Yd(w)){if((P===5||P===26||P===27)&&SE(w.stateNode))return!0;for(w=w.child;w!==null;)g.push(w),w=w.sibling}}return!1},An.getFindAllNodesFailureDescription=function(p,g){if(!Yc)throw Error(s(363));var w=0,P=[];p=[kd(p),0];for(var B=0;B<p.length;){var $=p[B++],ot=$.tag,_t=p[B++],Nt=g[_t];if((ot!==5&&ot!==26&&ot!==27||!Yd($))&&(Fc($,Nt)&&(P.push(J_(Nt)),_t++,_t>w&&(w=_t)),_t<g.length))for($=$.child;$!==null;)p.push($,_t),$=$.sibling}if(w<g.length){for(p=[];w<g.length;w++)p.push(J_(g[w]));return`findAllNodes was able to match part of the selector:
  `+(P.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},An.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 27:case 5:return Wd(p.child.stateNode);default:return p.child.stateNode}},An.injectIntoDevTools=function(){var p={bundleType:0,version:cb,rendererPackageName:$m,currentDispatcherRef:fn,findFiberByHostInstance:yE,reconcilerVersion:"19.0.0"};if($d!==null&&(p.rendererConfig=$d),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)p=!0;else{try{Mr=g.inject(p),Aa=g}catch{}p=!!g.checkDCE}}return p},An.isAlreadyRendering=function(){return!1},An.observeVisibleRects=function(p,g,w,P){if(!Yc)throw Error(s(363));p=Lm(p,g);var B=EE(p,w,P).disconnect;return{disconnect:function(){B()}}},An.shouldError=function(){return null},An.shouldSuspend=function(){return!1},An.startHostTransition=function(p,g,w,P){if(p.tag!==5)throw Error(s(476));var B=wo(p).queue;Rc(p,B,g,Xc,w===null?r:function(){var $=wo(p).next.queue;return ba(p,$,{},Tr()),w(P)})},An.updateContainer=function(p,g,w,P){var B=g.current,$=Tr();return Vd(B,$,p,g,w,P),$},An.updateContainerSync=function(p,g,w,P){return g.tag===0&&yl(),Vd(g.current,2,p,g,w,P),2},An},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})}(GO)),GO.exports}var N4;function zit(){return N4||(N4=1,HO.exports=kit()),HO.exports}var Bit=zit();const Fit=fm(Bit);var L4=o9();function w3(i,e,n){if(!i)return;if(n(i)===!0)return i;let r=e?i.return:i.child;for(;r;){const s=w3(r,e,n);if(s)return s;r=e?null:r.sibling}}function l9(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const A3=l9(tt.createContext(null));let u9=class extends tt.Component{render(){return tt.createElement(A3.Provider,{value:this._reactInternals},this.props.children)}};function c9(){const i=tt.useContext(A3);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=tt.useId();return tt.useMemo(()=>{for(const n of[i,i==null?void 0:i.alternate]){if(!n)continue;const r=w3(n,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(r)return r}},[i,e])}const Vit=Symbol.for("react.context"),Hit=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===Vit;function Git(){const i=c9(),[e]=tt.useState(()=>new Map);e.clear();let n=i;for(;n;){const r=n.type;Hit(r)&&r!==A3&&!e.has(r)&&e.set(r,tt.use(l9(r))),n=n.return}return e}function jit(){const i=Git();return tt.useMemo(()=>Array.from(i.keys()).reduce((e,n)=>r=>tt.createElement(e,null,tt.createElement(n.Provider,{...r,value:i.get(n)})),e=>tt.createElement(u9,{...e})),[i])}function f9(i){let e=i.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const h9=i=>i&&i.isOrthographicCamera,qit=i=>i&&i.hasOwnProperty("current"),$it=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),kS=((i,e)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?tt.useLayoutEffect:tt.useEffect;function d9(i){const e=tt.useRef(i);return kS(()=>void(e.current=i),[i]),e}function Wit(){const i=c9(),e=jit();return tt.useMemo(()=>({children:n})=>{const s=!!w3(i,!0,a=>a.type===tt.StrictMode)?tt.StrictMode:tt.Fragment;return st.jsx(s,{children:st.jsx(e,{children:n})})},[i,e])}function Xit({set:i}){return kS(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const Yit=(i=>(i=class extends tt.Component{constructor(...n){super(...n),this.state={error:!1}}componentDidCatch(n){this.props.set(n)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function p9(i){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],n),i[1]):i}function $v(i){var e;return(e=i.__r3f)==null?void 0:e.root.getState()}const Or={obj:i=>i===Object(i)&&!Or.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,e,{arrays:n="shallow",objects:r="reference",strict:s=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(Or.str(i)||Or.num(i)||Or.boo(i))return i===e;const a=Or.obj(i);if(a&&r==="reference")return i===e;const o=Or.arr(i);if(o&&n==="reference")return i===e;if((o||a)&&i===e)return!0;let l;for(l in i)if(!(l in e))return!1;if(a&&n==="shallow"&&r==="shallow"){for(l in s?e:i)if(!Or.equ(i[l],e[l],{strict:s,objects:"reference"}))return!1}else for(l in s?e:i)if(i[l]!==e[l])return!1;if(Or.und(l)){if(o&&i.length===0&&e.length===0||a&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function Kit(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const e in i){const n=i[e];(n==null?void 0:n.type)!=="Scene"&&(n==null||n.dispose==null||n.dispose())}}const m9=["children","key","ref"];function Zit(i){const e={};for(const n in i)m9.includes(n)||(e[n]=i[n]);return e}function yM(i,e,n,r){const s=i;let a=s==null?void 0:s.__r3f;return a||(a={root:e,type:n,parent:null,children:[],props:Zit(r),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=a)),a}function q1(i,e){let n=i[e];if(!e.includes("-"))return{root:i,key:e,target:n};n=i;for(const s of e.split("-")){var r;e=s,i=n,n=(r=n)==null?void 0:r[e]}return{root:i,key:e,target:n}}const U4=/-\d+$/;function vM(i,e){if(Or.str(e.props.attach)){if(U4.test(e.props.attach)){const s=e.props.attach.replace(U4,""),{root:a,key:o}=q1(i.object,s);Array.isArray(a[o])||(a[o]=[])}const{root:n,key:r}=q1(i.object,e.props.attach);e.previousAttach=n[r],n[r]=e.object}else Or.fun(e.props.attach)&&(e.previousAttach=e.props.attach(i.object,e.object))}function _M(i,e){if(Or.str(e.props.attach)){const{root:n,key:r}=q1(i.object,e.props.attach),s=e.previousAttach;s===void 0?delete n[r]:n[r]=s}else e.previousAttach==null||e.previousAttach(i.object,e.object);delete e.previousAttach}const LD=[...m9,"args","dispose","attach","object","onUpdate","dispose"],k4=new Map;function Qit(i){let e=k4.get(i.constructor);try{e||(e=new i.constructor,k4.set(i.constructor,e))}catch{}return e}function Jit(i,e){const n={};for(const r in e)if(!LD.includes(r)&&!Or.equ(e[r],i.props[r])){n[r]=e[r];for(const s in e)s.startsWith(`${r}-`)&&(n[s]=e[s])}for(const r in i.props){if(LD.includes(r)||e.hasOwnProperty(r))continue;const{root:s,key:a}=q1(i.object,r);if(s.constructor&&s.constructor.length===0){const o=Qit(s);Or.und(o)||(n[a]=o[a])}else n[a]=0}return n}const trt=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],ert=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Pp(i,e){var n;const r=i.__r3f,s=r&&f9(r).getState(),a=r==null?void 0:r.eventCount;for(const l in e){let u=e[l];if(LD.includes(l))continue;if(r&&ert.test(l)){typeof u=="function"?r.handlers[l]=u:delete r.handlers[l],r.eventCount=Object.keys(r.handlers).length;continue}if(u===void 0)continue;let{root:f,key:d,target:m}=q1(i,l);if(m instanceof X0&&u instanceof X0)m.mask=u.mask;else if(m instanceof ke&&$it(u))m.set(u);else if(m!==null&&typeof m=="object"&&typeof m.set=="function"&&typeof m.copy=="function"&&u!=null&&u.constructor&&m.constructor===u.constructor)m.copy(u);else if(m!==null&&typeof m=="object"&&typeof m.set=="function"&&Array.isArray(u))typeof m.fromArray=="function"?m.fromArray(u):m.set(...u);else if(m!==null&&typeof m=="object"&&typeof m.set=="function"&&typeof u=="number")typeof m.setScalar=="function"?m.setScalar(u):m.set(u);else{var o;f[d]=u,s&&!s.linear&&trt.includes(d)&&(o=f[d])!=null&&o.isTexture&&f[d].format===Ba&&f[d].type===bc&&(f[d].colorSpace=la)}}if(r!=null&&r.parent&&s!=null&&s.internal&&(n=r.object)!=null&&n.isObject3D&&a!==r.eventCount){const l=r.object,u=s.internal.interaction.indexOf(l);u>-1&&s.internal.interaction.splice(u,1),r.eventCount&&l.raycast!==null&&s.internal.interaction.push(l)}return r&&r.props.attach===void 0&&(r.object.isBufferGeometry?r.props.attach="geometry":r.object.isMaterial&&(r.props.attach="material")),r&&I_(r),i}function I_(i){var e;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const n=(e=i.root)==null||e.getState==null?void 0:e.getState();n&&n.internal.frames===0&&n.invalidate()}function nrt(i,e){i.manual||(h9(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix())}const Yo=i=>i==null?void 0:i.isObject3D;function cw(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function g9(i,e,n,r){const s=n.get(e);s&&(n.delete(e),n.size===0&&(i.delete(r),s.target.releasePointerCapture(r)))}function irt(i,e){const{internal:n}=i.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,s)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(s)}),n.capturedMap.forEach((r,s)=>{g9(n.capturedMap,e,r,s)})}function rrt(i){function e(u){const{internal:f}=i.getState(),d=u.offsetX-f.initialClick[0],m=u.offsetY-f.initialClick[1];return Math.round(Math.sqrt(d*d+m*m))}function n(u){return u.filter(f=>["Move","Over","Enter","Out","Leave"].some(d=>{var m;return(m=f.__r3f)==null?void 0:m.handlers["onPointer"+d]}))}function r(u,f){const d=i.getState(),m=new Set,y=[],_=f?f(d.internal.interaction):d.internal.interaction;for(let b=0;b<_.length;b++){const M=$v(_[b]);M&&(M.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(u,d);function x(b){const M=$v(b);if(!M||!M.events.enabled||M.raycaster.camera===null)return[];if(M.raycaster.camera===void 0){var R;M.events.compute==null||M.events.compute(u,M,(R=M.previousRoot)==null?void 0:R.getState()),M.raycaster.camera===void 0&&(M.raycaster.camera=null)}return M.raycaster.camera?M.raycaster.intersectObject(b,!0):[]}let S=_.flatMap(x).sort((b,M)=>{const R=$v(b.object),A=$v(M.object);return!R||!A?b.distance-M.distance:A.events.priority-R.events.priority||b.distance-M.distance}).filter(b=>{const M=cw(b);return m.has(M)?!1:(m.add(M),!0)});d.events.filter&&(S=d.events.filter(S,d));for(const b of S){let M=b.object;for(;M;){var T;(T=M.__r3f)!=null&&T.eventCount&&y.push({...b,eventObject:M}),M=M.parent}}if("pointerId"in u&&d.internal.capturedMap.has(u.pointerId))for(let b of d.internal.capturedMap.get(u.pointerId).values())m.has(cw(b.intersection))||y.push(b.intersection);return y}function s(u,f,d,m){if(u.length){const y={stopped:!1};for(const _ of u){let x=$v(_.object);if(x||_.object.traverseAncestors(S=>{const T=$v(S);if(T)return x=T,!1}),x){const{raycaster:S,pointer:T,camera:b,internal:M}=x,R=new pt(T.x,T.y,0).unproject(b),A=U=>{var O,F;return(O=(F=M.capturedMap.get(U))==null?void 0:F.has(_.eventObject))!=null?O:!1},I=U=>{const O={intersection:_,target:f.target};M.capturedMap.has(U)?M.capturedMap.get(U).set(_.eventObject,O):M.capturedMap.set(U,new Map([[_.eventObject,O]])),f.target.setPointerCapture(U)},k=U=>{const O=M.capturedMap.get(U);O&&g9(M.capturedMap,_.eventObject,O,U)};let N={};for(let U in f){let O=f[U];typeof O!="function"&&(N[U]=O)}let L={..._,...N,pointer:T,intersections:u,stopped:y.stopped,delta:d,unprojectedPoint:R,ray:S.ray,camera:b,stopPropagation(){const U="pointerId"in f&&M.capturedMap.get(f.pointerId);if((!U||U.has(_.eventObject))&&(L.stopped=y.stopped=!0,M.hovered.size&&Array.from(M.hovered.values()).find(O=>O.eventObject===_.eventObject))){const O=u.slice(0,u.indexOf(_));a([...O,_])}},target:{hasPointerCapture:A,setPointerCapture:I,releasePointerCapture:k},currentTarget:{hasPointerCapture:A,setPointerCapture:I,releasePointerCapture:k},nativeEvent:f};if(m(L),y.stopped===!0)break}}}return u}function a(u){const{internal:f}=i.getState();for(const d of f.hovered.values())if(!u.length||!u.find(m=>m.object===d.object&&m.index===d.index&&m.instanceId===d.instanceId)){const y=d.eventObject.__r3f;if(f.hovered.delete(cw(d)),y!=null&&y.eventCount){const _=y.handlers,x={...d,intersections:u};_.onPointerOut==null||_.onPointerOut(x),_.onPointerLeave==null||_.onPointerLeave(x)}}}function o(u,f){for(let d=0;d<f.length;d++){const m=f[d].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(u)}}function l(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return f=>{const{internal:d}=i.getState();"pointerId"in f&&d.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(f.pointerId)&&(d.capturedMap.delete(f.pointerId),a([]))})}}return function(d){const{onPointerMissed:m,internal:y}=i.getState();y.lastEvent.current=d;const _=u==="onPointerMove",x=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",T=r(d,_?n:void 0),b=x?e(d):0;u==="onPointerDown"&&(y.initialClick=[d.offsetX,d.offsetY],y.initialHits=T.map(R=>R.eventObject)),x&&!T.length&&b<=2&&(o(d,y.interaction),m&&m(d)),_&&a(T);function M(R){const A=R.eventObject,I=A.__r3f;if(!(I!=null&&I.eventCount))return;const k=I.handlers;if(_){if(k.onPointerOver||k.onPointerEnter||k.onPointerOut||k.onPointerLeave){const N=cw(R),L=y.hovered.get(N);L?L.stopped&&R.stopPropagation():(y.hovered.set(N,R),k.onPointerOver==null||k.onPointerOver(R),k.onPointerEnter==null||k.onPointerEnter(R))}k.onPointerMove==null||k.onPointerMove(R)}else{const N=k[u];N?(!x||y.initialHits.includes(A))&&(o(d,y.interaction.filter(L=>!y.initialHits.includes(L))),N(R)):x&&y.initialHits.includes(A)&&o(d,y.interaction.filter(L=>!y.initialHits.includes(L)))}}s(T,d,b,M)}}return{handlePointer:l}}const z4=i=>!!(i!=null&&i.render),y9=tt.createContext(null),srt=(i,e)=>{const n=Lit((l,u)=>{const f=new pt,d=new pt,m=new pt;function y(b=u().camera,M=d,R=u().size){const{width:A,height:I,top:k,left:N}=R,L=A/I;M.isVector3?m.copy(M):m.set(...M);const U=b.getWorldPosition(f).distanceTo(m);if(h9(b))return{width:A/b.zoom,height:I/b.zoom,top:k,left:N,factor:1,distance:U,aspect:L};{const O=b.fov*Math.PI/180,F=2*Math.tan(O/2)*U,H=F*(A/I);return{width:H,height:F,top:k,left:N,factor:A/H,distance:U,aspect:L}}}let _;const x=b=>l(M=>({performance:{...M.performance,current:b}})),S=new de;return{set:l,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(b=1)=>i(u(),b),advance:(b,M)=>e(b,M,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new y3,pointer:S,mouse:S,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const b=u();_&&clearTimeout(_),b.performance.current!==b.performance.min&&x(b.performance.min),_=setTimeout(()=>x(u().performance.max),b.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:y},setEvents:b=>l(M=>({...M,events:{...M.events,...b}})),setSize:(b,M,R=0,A=0)=>{const I=u().camera,k={width:b,height:M,top:R,left:A};l(N=>({size:k,viewport:{...N.viewport,...y(I,d,k)}}))},setDpr:b=>l(M=>{const R=p9(b);return{viewport:{...M.viewport,dpr:R,initialDpr:M.viewport.initialDpr||R}}}),setFrameloop:(b="always")=>{const M=u().clock;M.stop(),M.elapsedTime=0,b!=="never"&&(M.start(),M.elapsedTime=0),l(()=>({frameloop:b}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:tt.createRef(),active:!1,frames:0,priority:0,subscribe:(b,M,R)=>{const A=u().internal;return A.priority=A.priority+(M>0?1:0),A.subscribers.push({ref:b,priority:M,store:R}),A.subscribers=A.subscribers.sort((I,k)=>I.priority-k.priority),()=>{const I=u().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(M>0?1:0),I.subscribers=I.subscribers.filter(k=>k.ref!==b))}}}}}),r=n.getState();let s=r.size,a=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{const{camera:l,size:u,viewport:f,gl:d,set:m}=n.getState();if(u.width!==s.width||u.height!==s.height||f.dpr!==a){s=u,a=f.dpr,nrt(l,u),f.dpr>0&&d.setPixelRatio(f.dpr);const y=typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(u.width,u.height,y)}l!==o&&(o=l,m(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(l)}})))}),n.subscribe(l=>i(l)),n};function v9(){const i=tt.useContext(y9);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function Ep(i=n=>n,e){return v9()(i,e)}function M3(i,e=0){const n=v9(),r=n.getState().internal.subscribe,s=d9(i);return kS(()=>r(s,e,n),[e,r,n]),null}function art(i){const e=Fit(i);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:tt.version}),e}const _9=0,Z0={},ort=/^three(?=[A-Z])/,s2=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let lrt=0;const urt=i=>typeof i=="function";function b9(i){if(urt(i)){const e=`${lrt++}`;return Z0[e]=i,e}else Object.assign(Z0,i)}function x9(i,e){const n=s2(i),r=Z0[n];if(i!=="primitive"&&!r)throw new Error(`R3F: ${n} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function crt(i,e,n){var r;return i=s2(i)in Z0?i:i.replace(ort,""),x9(i,e),i==="primitive"&&(r=e.object)!=null&&r.__r3f&&delete e.object.__r3f,yM(e.object,n,i,e)}function frt(i){if(!i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?_M(i.parent,i):Yo(i.object)&&(i.object.visible=!1),i.isHidden=!0,I_(i)}}function S9(i){if(i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?vM(i.parent,i):Yo(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,I_(i)}}function C3(i,e,n){const r=e.root.getState();if(!(!i.parent&&i.object!==r.scene)){if(!e.object){var s,a;const o=Z0[s2(e.type)];e.object=(s=e.props.object)!=null?s:new o(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(Pp(e.object,e.props),e.props.attach)vM(i,e);else if(Yo(e.object)&&Yo(i.object)){const o=i.object.children.indexOf(n==null?void 0:n.object);if(n&&o!==-1){const l=i.object.children.indexOf(e.object);if(l!==-1){i.object.children.splice(l,1);const u=l<o?o-1:o;i.object.children.splice(u,0,e.object)}else e.object.parent=i.object,i.object.children.splice(o,0,e.object),e.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:e.object})}else i.object.add(e.object)}for(const o of e.children)C3(e,o);I_(e)}}function $O(i,e){e&&(e.parent=i,i.children.push(e),C3(i,e))}function B4(i,e,n){if(!e||!n)return;e.parent=i;const r=i.children.indexOf(n);r!==-1?i.children.splice(r,0,e):i.children.push(e),C3(i,e,n)}function E9(i){if(typeof i.dispose=="function"){const e=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():L4.unstable_scheduleCallback(L4.unstable_IdlePriority,e)}}function UD(i,e,n){if(!e)return;e.parent=null;const r=i.children.indexOf(e);r!==-1&&i.children.splice(r,1),e.props.attach?_M(i,e):Yo(e.object)&&Yo(i.object)&&(i.object.remove(e.object),irt(f9(e),e.object));const s=e.props.dispose!==null&&n!==!1;for(let a=e.children.length-1;a>=0;a--){const o=e.children[a];UD(e,o,s)}e.children.length=0,delete e.object.__r3f,s&&e.type!=="primitive"&&e.object.type!=="Scene"&&E9(e.object),n===void 0&&I_(e)}function hrt(i,e){for(const n of[i,i.alternate])if(n!==null)if(typeof n.ref=="function"){n.refCleanup==null||n.refCleanup();const r=n.ref(e);typeof r=="function"&&(n.refCleanup=r)}else n.ref&&(n.ref.current=e)}const rA=[];function drt(){for(const[n]of rA){const r=n.parent;if(r){n.props.attach?_M(r,n):Yo(n.object)&&Yo(r.object)&&r.object.remove(n.object);for(const s of n.children)s.props.attach?_M(n,s):Yo(s.object)&&Yo(n.object)&&n.object.remove(s.object)}n.isHidden&&S9(n),n.object.__r3f&&delete n.object.__r3f,n.type!=="primitive"&&E9(n.object)}for(const[n,r,s]of rA){n.props=r;const a=n.parent;if(a){var i,e;const o=Z0[s2(n.type)];n.object=(i=n.props.object)!=null?i:new o(...(e=n.props.args)!=null?e:[]),n.object.__r3f=n,hrt(s,n.object),Pp(n.object,n.props),n.props.attach?vM(a,n):Yo(n.object)&&Yo(a.object)&&a.object.add(n.object);for(const l of n.children)l.props.attach?vM(n,l):Yo(l.object)&&Yo(n.object)&&n.object.add(l.object);I_(n)}}rA.length=0}const WO=()=>{},F4={};let fw=_9;const prt=0,mrt=4,kD=art({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:crt,removeChild:UD,appendChild:$O,appendInitialChild:$O,insertBefore:B4,appendChildToContainer(i,e){const n=i.getState().scene.__r3f;!e||!n||$O(n,e)},removeChildFromContainer(i,e){const n=i.getState().scene.__r3f;!e||!n||UD(n,e)},insertInContainerBefore(i,e,n){const r=i.getState().scene.__r3f;!e||!n||!r||B4(r,e,n)},getRootHostContext:()=>F4,getChildHostContext:()=>F4,commitUpdate(i,e,n,r,s){var a,o,l;x9(e,r);let u=!1;if((i.type==="primitive"&&n.object!==r.object||((a=r.args)==null?void 0:a.length)!==((o=n.args)==null?void 0:o.length)||(l=r.args)!=null&&l.some((d,m)=>{var y;return d!==((y=n.args)==null?void 0:y[m])}))&&(u=!0),u)rA.push([i,{...r},s]);else{const d=Jit(i,r);Object.keys(d).length&&(Object.assign(i.props,d),Pp(i.object,d))}(s.sibling===null||(s.flags&mrt)===prt)&&drt()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i==null?void 0:i.object,prepareForCommit:()=>null,preparePortalMount:i=>yM(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:frt,unhideInstance:S9,createTextInstance:WO,hideTextInstance:WO,unhideTextInstance:WO,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:tt.createContext(null),setCurrentUpdatePriority(i){fw=i},getCurrentUpdatePriority(){return fw},resolveUpdatePriority(){var i;if(fw!==_9)return fw;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return iA.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return iA.ContinuousEventPriority;default:return iA.DefaultEventPriority}},resetFormInstance(){}}),fy=new Map,Wv={objects:"shallow",strict:!1};function grt(i,e){if(!e&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:n,height:r,top:s,left:a}=i.parentElement.getBoundingClientRect();return{width:n,height:r,top:s,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function yrt(i){const e=fy.get(i),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,a=r||srt(FD,H4),o=n||kD.createContainer(a,iA.ConcurrentRoot,null,!1,null,"",s,s,s,null);e||fy.set(i,{fiber:o,store:a});let l,u,f=!1,d=null;return{async configure(m={}){let y;d=new Promise(dt=>y=dt);let{gl:_,size:x,scene:S,events:T,onCreated:b,shadows:M=!1,linear:R=!1,flat:A=!1,legacy:I=!1,orthographic:k=!1,frameloop:N="always",dpr:L=[1,2],performance:U,raycaster:O,camera:F,onPointerMissed:H}=m,V=a.getState(),X=V.gl;if(!V.gl){const dt={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},yt=typeof _=="function"?await _(dt):_;z4(yt)?X=yt:X=new s9({...dt,..._}),V.set({gl:X})}let J=V.raycaster;J||V.set({raycaster:J=new x3});const{params:q,...W}=O||{};if(Or.equ(W,J,Wv)||Pp(J,{...W}),Or.equ(q,J.params,Wv)||Pp(J,{params:{...J.params,...q}}),!V.camera||V.camera===u&&!Or.equ(u,F,Wv)){u=F;const dt=F==null?void 0:F.isCamera,yt=dt?F:k?new US(0,0,0,0,.1,1e3):new Ws(75,0,.1,1e3);dt||(yt.position.z=5,F&&(Pp(yt,F),yt.manual||("aspect"in F||"left"in F||"right"in F||"bottom"in F||"top"in F)&&(yt.manual=!0,yt.updateProjectionMatrix())),!V.camera&&!(F!=null&&F.rotation)&&yt.lookAt(0,0,0)),V.set({camera:yt}),J.camera=yt}if(!V.scene){let dt;S!=null&&S.isScene?(dt=S,yM(dt,a,"",{})):(dt=new ZN,yM(dt,a,"",{}),S&&Pp(dt,S)),V.set({scene:dt})}T&&!V.events.handlers&&V.set({events:T(a)});const K=grt(i,x);if(Or.equ(K,V.size,Wv)||V.setSize(K.width,K.height,K.top,K.left),L&&V.viewport.dpr!==p9(L)&&V.setDpr(L),V.frameloop!==N&&V.setFrameloop(N),V.onPointerMissed||V.set({onPointerMissed:H}),U&&!Or.equ(U,V.performance,Wv)&&V.set(dt=>({performance:{...dt.performance,...U}})),!V.xr){var et;const dt=(nt,ht)=>{const ft=a.getState();ft.frameloop!=="never"&&H4(nt,!0,ft,ht)},yt=()=>{const nt=a.getState();nt.gl.xr.enabled=nt.gl.xr.isPresenting,nt.gl.xr.setAnimationLoop(nt.gl.xr.isPresenting?dt:null),nt.gl.xr.isPresenting||FD(nt)},xt={connect(){const nt=a.getState().gl;nt.xr.addEventListener("sessionstart",yt),nt.xr.addEventListener("sessionend",yt)},disconnect(){const nt=a.getState().gl;nt.xr.removeEventListener("sessionstart",yt),nt.xr.removeEventListener("sessionend",yt)}};typeof((et=X.xr)==null?void 0:et.addEventListener)=="function"&&xt.connect(),V.set({xr:xt})}if(X.shadowMap){const dt=X.shadowMap.enabled,yt=X.shadowMap.type;if(X.shadowMap.enabled=!!M,Or.boo(M))X.shadowMap.type=Zx;else if(Or.str(M)){var Q;const xt={basic:cH,percentage:wC,soft:Zx,variance:oc};X.shadowMap.type=(Q=xt[M])!=null?Q:Zx}else Or.obj(M)&&Object.assign(X.shadowMap,M);(dt!==X.shadowMap.enabled||yt!==X.shadowMap.type)&&(X.shadowMap.needsUpdate=!0)}return li.enabled=!I,f||(X.outputColorSpace=R?tm:la,X.toneMapping=A?Of:LN),V.legacy!==I&&V.set(()=>({legacy:I})),V.linear!==R&&V.set(()=>({linear:R})),V.flat!==A&&V.set(()=>({flat:A})),_&&!Or.fun(_)&&!z4(_)&&!Or.equ(_,X,Wv)&&Pp(X,_),l=b,f=!0,y(),this},render(m){return!f&&!d&&this.configure(),d.then(()=>{kD.updateContainer(st.jsx(vrt,{store:a,children:m,onCreated:l,rootElement:i}),o,null,()=>{})}),a},unmount(){T9(i)}}}function vrt({store:i,children:e,onCreated:n,rootElement:r}){return kS(()=>{const s=i.getState();s.set(a=>({internal:{...a.internal,active:!0}})),n&&n(s),i.getState().events.connected||s.events.connect==null||s.events.connect(r)},[]),st.jsx(y9.Provider,{value:i,children:e})}function T9(i,e){const n=fy.get(i),r=n==null?void 0:n.fiber;if(r){const s=n==null?void 0:n.store.getState();s&&(s.internal.active=!1),kD.updateContainer(null,r,null,()=>{s&&setTimeout(()=>{try{var a,o,l,u;s.events.disconnect==null||s.events.disconnect(),(a=s.gl)==null||(o=a.renderLists)==null||o.dispose==null||o.dispose(),(l=s.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(u=s.gl)!=null&&u.xr&&s.xr.disconnect(),Kit(s.scene),fy.delete(i)}catch{}},500)})}}const _rt=new Set,brt=new Set,xrt=new Set;function XO(i,e){if(i.size)for(const{callback:n}of i.values())n(e)}function o1(i,e){switch(i){case"before":return XO(_rt,e);case"after":return XO(brt,e);case"tail":return XO(xrt,e)}}let YO,KO;function zD(i,e,n){let r=e.clock.getDelta();e.frameloop==="never"&&typeof i=="number"&&(r=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),YO=e.internal.subscribers;for(let s=0;s<YO.length;s++)KO=YO[s],KO.ref.current(KO.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let bM=!1,BD=!1,ZO,V4,Xv;function w9(i){V4=requestAnimationFrame(w9),bM=!0,ZO=0,o1("before",i),BD=!0;for(const n of fy.values()){var e;Xv=n.store.getState(),Xv.internal.active&&(Xv.frameloop==="always"||Xv.internal.frames>0)&&!((e=Xv.gl.xr)!=null&&e.isPresenting)&&(ZO+=zD(i,Xv))}if(BD=!1,o1("after",i),ZO===0)return o1("tail",i),bM=!1,cancelAnimationFrame(V4)}function FD(i,e=1){var n;if(!i)return fy.forEach(r=>FD(r.store.getState(),e));(n=i.gl.xr)!=null&&n.isPresenting||!i.internal.active||i.frameloop==="never"||(e>1?i.internal.frames=Math.min(60,i.internal.frames+e):BD?i.internal.frames=2:i.internal.frames=1,bM||(bM=!0,requestAnimationFrame(w9)))}function H4(i,e=!0,n,r){if(e&&o1("before",i),n)zD(i,n,r);else for(const s of fy.values())zD(i,s.store.getState());e&&o1("after",i)}const QO={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Srt(i){const{handlePointer:e}=rrt(i);return{priority:1,enabled:!0,compute(n,r,s){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(QO).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:s}=i.getState();(n=s.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(s.lastEvent.current)},connect:n=>{const{set:r,events:s}=i.getState();if(s.disconnect==null||s.disconnect(),r(a=>({events:{...a.events,connected:n}})),s.handlers)for(const a in s.handlers){const o=s.handlers[a],[l,u]=QO[a];n.addEventListener(l,o,{passive:u})}},disconnect:()=>{const{set:n,events:r}=i.getState();if(r.connected){if(r.handlers)for(const s in r.handlers){const a=r.handlers[s],[o]=QO[s];r.connected.removeEventListener(o,a)}n(s=>({events:{...s.events,connected:void 0}}))}}}}function G4(i,e){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>i(...r),e)}}function Ert({debounce:i,scroll:e,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const s=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,o]=tt.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=tt.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),u=i?typeof i=="number"?i:i.scroll:null,f=i?typeof i=="number"?i:i.resize:null,d=tt.useRef(!1);tt.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[m,y,_]=tt.useMemo(()=>{const b=()=>{if(!l.current.element)return;const{left:M,top:R,width:A,height:I,bottom:k,right:N,x:L,y:U}=l.current.element.getBoundingClientRect(),O={left:M,top:R,width:A,height:I,bottom:k,right:N,x:L,y:U};l.current.element instanceof HTMLElement&&r&&(O.height=l.current.element.offsetHeight,O.width=l.current.element.offsetWidth),Object.freeze(O),d.current&&!Mrt(l.current.lastBounds,O)&&o(l.current.lastBounds=O)};return[b,f?G4(b,f):b,u?G4(b,u):b]},[o,r,u,f]);function x(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(b=>b.removeEventListener("scroll",_,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function S(){l.current.element&&(l.current.resizeObserver=new s(_),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(b=>b.addEventListener("scroll",_,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const T=b=>{!b||b===l.current.element||(x(),l.current.element=b,l.current.scrollContainers=A9(b),S())};return wrt(_,!!e),Trt(y),tt.useEffect(()=>{x(),S()},[e,_,y]),tt.useEffect(()=>x,[]),[T,a,m]}function Trt(i){tt.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function wrt(i,e){tt.useEffect(()=>{if(e){const n=i;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[i,e])}function A9(i){const e=[];if(!i||i===document.body)return e;const{overflow:n,overflowX:r,overflowY:s}=window.getComputedStyle(i);return[n,r,s].some(a=>a==="auto"||a==="scroll")&&e.push(i),[...e,...A9(i.parentElement)]}const Art=["x","y","top","bottom","left","right","width","height"],Mrt=(i,e)=>Art.every(n=>i[n]===e[n]);function Crt({ref:i,children:e,fallback:n,resize:r,style:s,gl:a,events:o=Srt,eventSource:l,eventPrefix:u,shadows:f,linear:d,flat:m,legacy:y,orthographic:_,frameloop:x,dpr:S,performance:T,raycaster:b,camera:M,scene:R,onPointerMissed:A,onCreated:I,...k}){tt.useMemo(()=>b9(Eit),[]);const N=Wit(),[L,U]=Ert({scroll:!0,debounce:{scroll:50,resize:0},...r}),O=tt.useRef(null),F=tt.useRef(null);tt.useImperativeHandle(i,()=>O.current);const H=d9(A),[V,X]=tt.useState(!1),[J,q]=tt.useState(!1);if(V)throw V;if(J)throw J;const W=tt.useRef(null);kS(()=>{const et=O.current;if(U.width>0&&U.height>0&&et){W.current||(W.current=yrt(et));async function Q(){await W.current.configure({gl:a,scene:R,events:o,shadows:f,linear:d,flat:m,legacy:y,orthographic:_,frameloop:x,dpr:S,performance:T,raycaster:b,camera:M,size:U,onPointerMissed:(...dt)=>H.current==null?void 0:H.current(...dt),onCreated:dt=>{dt.events.connect==null||dt.events.connect(l?qit(l)?l.current:l:F.current),u&&dt.setEvents({compute:(yt,xt)=>{const nt=yt[u+"X"],ht=yt[u+"Y"];xt.pointer.set(nt/xt.size.width*2-1,-(ht/xt.size.height)*2+1),xt.raycaster.setFromCamera(xt.pointer,xt.camera)}}),I==null||I(dt)}}),W.current.render(st.jsx(N,{children:st.jsx(Yit,{set:q,children:st.jsx(tt.Suspense,{fallback:st.jsx(Xit,{set:X}),children:e??null})})}))}Q()}}),tt.useEffect(()=>{const et=O.current;if(et)return()=>T9(et)},[]);const K=l?"none":"auto";return st.jsx("div",{ref:F,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:K,...s},...k,children:st.jsx("div",{ref:L,style:{width:"100%",height:"100%"},children:st.jsx("canvas",{ref:O,style:{display:"block"},children:n})})})}function Rrt(i){return st.jsx(u9,{children:st.jsx(Crt,{...i})})}function $1(){return $1=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},$1.apply(null,arguments)}const Ort=i=>i;function Irt(i,e=Ort){const n=pn.useSyncExternalStore(i.subscribe,()=>e(i.getState()),()=>e(i.getInitialState()));return pn.useDebugValue(n),n}const j4=i=>{const e=a9(i),n=r=>Irt(e,r);return Object.assign(n,e),n},Drt=i=>i?j4(i):j4,Prt=()=>parseInt(TS.replace(/\D+/g,"")),Nrt=Prt();/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const Rr={LEFT:1,RIGHT:2,MIDDLE:4},qt=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,SCREEN_PAN:4,OFFSET:8,DOLLY:16,ZOOM:32,TOUCH_ROTATE:64,TOUCH_TRUCK:128,TOUCH_SCREEN_PAN:256,TOUCH_OFFSET:512,TOUCH_DOLLY:1024,TOUCH_ZOOM:2048,TOUCH_DOLLY_TRUCK:4096,TOUCH_DOLLY_SCREEN_PAN:8192,TOUCH_DOLLY_OFFSET:16384,TOUCH_DOLLY_ROTATE:32768,TOUCH_ZOOM_TRUCK:65536,TOUCH_ZOOM_OFFSET:131072,TOUCH_ZOOM_SCREEN_PAN:262144,TOUCH_ZOOM_ROTATE:524288}),Yv={NONE:0,IN:1,OUT:-1};function bg(i){return i.isPerspectiveCamera}function Cp(i){return i.isOrthographicCamera}const Kv=Math.PI*2,q4=Math.PI/2,M9=1e-5,sx=Math.PI/180;function sc(i,e,n){return Math.max(e,Math.min(n,i))}function tr(i,e=M9){return Math.abs(i)<e}function Ri(i,e,n=M9){return tr(i-e,n)}function $4(i,e){return Math.round(i/e)*e}function ax(i){return isFinite(i)?i:i<0?-Number.MAX_VALUE:Number.MAX_VALUE}function ox(i){return Math.abs(i)<Number.MAX_VALUE?i:i*(1/0)}function hw(i,e,n,r,s=1/0,a){r=Math.max(1e-4,r);const o=2/r,l=o*a,u=1/(1+l+.48*l*l+.235*l*l*l);let f=i-e;const d=e,m=s*r;f=sc(f,-m,m),e=i-f;const y=(n.value+o*f)*a;n.value=(n.value-o*y)*u;let _=e+(f+y)*u;return d-i>0==_>d&&(_=d,n.value=(_-d)/a),_}function W4(i,e,n,r,s=1/0,a,o){r=Math.max(1e-4,r);const l=2/r,u=l*a,f=1/(1+u+.48*u*u+.235*u*u*u);let d=e.x,m=e.y,y=e.z,_=i.x-d,x=i.y-m,S=i.z-y;const T=d,b=m,M=y,R=s*r,A=R*R,I=_*_+x*x+S*S;if(I>A){const J=Math.sqrt(I);_=_/J*R,x=x/J*R,S=S/J*R}d=i.x-_,m=i.y-x,y=i.z-S;const k=(n.x+l*_)*a,N=(n.y+l*x)*a,L=(n.z+l*S)*a;n.x=(n.x-l*k)*f,n.y=(n.y-l*N)*f,n.z=(n.z-l*L)*f,o.x=d+(_+k)*f,o.y=m+(x+N)*f,o.z=y+(S+L)*f;const U=T-i.x,O=b-i.y,F=M-i.z,H=o.x-T,V=o.y-b,X=o.z-M;return U*H+O*V+F*X>0&&(o.x=T,o.y=b,o.z=M,n.x=(o.x-T)/a,n.y=(o.y-b)/a,n.z=(o.z-M)/a),o}function JO(i,e){e.set(0,0),i.forEach(n=>{e.x+=n.clientX,e.y+=n.clientY}),e.x/=i.length,e.y/=i.length}function tI(i,e){return Cp(i)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class Lrt{constructor(){this._listeners={}}addEventListener(e,n){const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){const s=this._listeners[e];if(s!==void 0){const a=s.indexOf(n);a!==-1&&s.splice(a,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const r=this._listeners[e.type];if(r!==void 0){e.target=this;const s=r.slice(0);for(let a=0,o=s.length;a<o;a++)s[a].call(this,e)}}}var eI;const Urt="2.10.1",dw=1/8,krt=/Mac/.test((eI=globalThis==null?void 0:globalThis.navigator)===null||eI===void 0?void 0:eI.platform);let gn,X4,pw,nI,$o,Fn,Ei,Zv,lx,hf,df,xg,Y4,K4,du,ux,Qv,Z4,iI,Q4,rI,sI,mw,aI=class VD extends Lrt{static install(e){gn=e.THREE,X4=Object.freeze(new gn.Vector3(0,0,0)),pw=Object.freeze(new gn.Vector3(0,1,0)),nI=Object.freeze(new gn.Vector3(0,0,1)),$o=new gn.Vector2,Fn=new gn.Vector3,Ei=new gn.Vector3,Zv=new gn.Vector3,lx=new gn.Vector3,hf=new gn.Vector3,df=new gn.Vector3,xg=new gn.Vector3,Y4=new gn.Vector3,K4=new gn.Vector3,du=new gn.Spherical,ux=new gn.Spherical,Qv=new gn.Box3,Z4=new gn.Box3,iI=new gn.Sphere,Q4=new gn.Quaternion,rI=new gn.Quaternion,sI=new gn.Matrix4,mw=new gn.Raycaster}static get ACTION(){return qt}set verticalDragToForward(e){console.warn("camera-controls: `verticalDragToForward` was removed. Use `mouseButtons.left = CameraControls.ACTION.SCREEN_PAN` instead.")}constructor(e,n){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=qt.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Yv.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new gn.Vector3,this._focalOffsetVelocity=new gn.Vector3,this._zoomVelocity={value:0},this._truckInternal=(b,M,R,A)=>{let I,k;if(bg(this._camera)){const N=Fn.copy(this._camera.position).sub(this._target),L=this._camera.getEffectiveFOV()*sx,U=N.length()*Math.tan(L*.5);I=this.truckSpeed*b*U/this._elementRect.height,k=this.truckSpeed*M*U/this._elementRect.height}else if(Cp(this._camera)){const N=this._camera;I=this.truckSpeed*b*(N.right-N.left)/N.zoom/this._elementRect.width,k=this.truckSpeed*M*(N.top-N.bottom)/N.zoom/this._elementRect.height}else return;A?(R?this.setFocalOffset(this._focalOffsetEnd.x+I,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(I,0,!0),this.forward(-k,!0)):R?this.setFocalOffset(this._focalOffsetEnd.x+I,this._focalOffsetEnd.y+k,this._focalOffsetEnd.z,!0):this.truck(I,k,!0)},this._rotateInternal=(b,M)=>{const R=Kv*this.azimuthRotateSpeed*b/this._elementRect.height,A=Kv*this.polarRotateSpeed*M/this._elementRect.height;this.rotate(R,A,!0)},this._dollyInternal=(b,M,R)=>{const A=Math.pow(.95,-b*this.dollySpeed),I=this._sphericalEnd.radius,k=this._sphericalEnd.radius*A,N=sc(k,this.minDistance,this.maxDistance),L=N-k;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(k,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(L,!0),this._dollyToNoClamp(N,!0)):this._dollyToNoClamp(N,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?k:N)-I,this._dollyControlCoord.set(M,R)),this._lastDollyDirection=Math.sign(-b)},this._zoomInternal=(b,M,R)=>{const A=Math.pow(.95,b*this.dollySpeed),I=this._zoom,k=this._zoom*A;this.zoomTo(k,!0),this.dollyToCursor&&(this._changedZoom+=k-I,this._dollyControlCoord.set(M,R))},typeof gn>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new gn.Quaternion().setFromUnitVectors(this._camera.up,pw),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=qt.NONE,this._target=new gn.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new gn.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new gn.Spherical().setFromVector3(Fn.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new gn.Vector3,new gn.Vector3,new gn.Vector3,new gn.Vector3],this._updateNearPlaneCorners(),this._boundary=new gn.Box3(new gn.Vector3(-1/0,-1/0,-1/0),new gn.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new gn.Vector2,this.mouseButtons={left:qt.ROTATE,middle:qt.DOLLY,right:qt.TRUCK,wheel:bg(this._camera)?qt.DOLLY:Cp(this._camera)?qt.ZOOM:qt.NONE},this.touches={one:qt.TOUCH_ROTATE,two:bg(this._camera)?qt.TOUCH_DOLLY_TRUCK:Cp(this._camera)?qt.TOUCH_ZOOM_TRUCK:qt.NONE,three:qt.TOUCH_TRUCK};const r=new gn.Vector2,s=new gn.Vector2,a=new gn.Vector2,o=b=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const A=this._domElement.getBoundingClientRect(),I=b.clientX/A.width,k=b.clientY/A.height;if(I<this._interactiveArea.left||I>this._interactiveArea.right||k<this._interactiveArea.top||k>this._interactiveArea.bottom)return}const M=b.pointerType!=="mouse"?null:(b.buttons&Rr.LEFT)===Rr.LEFT?Rr.LEFT:(b.buttons&Rr.MIDDLE)===Rr.MIDDLE?Rr.MIDDLE:(b.buttons&Rr.RIGHT)===Rr.RIGHT?Rr.RIGHT:null;if(M!==null){const A=this._findPointerByMouseButton(M);A&&this._disposePointer(A)}if((b.buttons&Rr.LEFT)===Rr.LEFT&&this._lockedPointer)return;const R={pointerId:b.pointerId,clientX:b.clientX,clientY:b.clientY,deltaX:0,deltaY:0,mouseButton:M};this._activePointers.push(R),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),this._isDragging=!0,y(b)},l=b=>{b.cancelable&&b.preventDefault();const M=b.pointerId,R=this._lockedPointer||this._findPointerById(M);if(R){if(R.clientX=b.clientX,R.clientY=b.clientY,R.deltaX=b.movementX,R.deltaY=b.movementY,this._state=0,b.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(b.buttons&Rr.LEFT)===Rr.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(b.buttons&Rr.MIDDLE)===Rr.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(b.buttons&Rr.RIGHT)===Rr.RIGHT&&(this._state=this._state|this.mouseButtons.right);_()}},u=b=>{const M=this._findPointerById(b.pointerId);if(!(M&&M===this._lockedPointer)){if(M&&this._disposePointer(M),b.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=qt.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=qt.NONE;x()}};let f=-1;const d=b=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===qt.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const k=this._domElement.getBoundingClientRect(),N=b.clientX/k.width,L=b.clientY/k.height;if(N<this._interactiveArea.left||N>this._interactiveArea.right||L<this._interactiveArea.top||L>this._interactiveArea.bottom)return}if(b.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===qt.ROTATE||this.mouseButtons.wheel===qt.TRUCK){const k=performance.now();f-k<1e3&&this._getClientRect(this._elementRect),f=k}const M=krt?-1:-3,R=b.deltaMode===1||b.ctrlKey?b.deltaY/M:b.deltaY/(M*10),A=this.dollyToCursor?(b.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,I=this.dollyToCursor?(b.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case qt.ROTATE:{this._rotateInternal(b.deltaX,b.deltaY),this._isUserControllingRotate=!0;break}case qt.TRUCK:{this._truckInternal(b.deltaX,b.deltaY,!1,!1),this._isUserControllingTruck=!0;break}case qt.SCREEN_PAN:{this._truckInternal(b.deltaX,b.deltaY,!1,!0),this._isUserControllingTruck=!0;break}case qt.OFFSET:{this._truckInternal(b.deltaX,b.deltaY,!0,!1),this._isUserControllingOffset=!0;break}case qt.DOLLY:{this._dollyInternal(-R,A,I),this._isUserControllingDolly=!0;break}case qt.ZOOM:{this._zoomInternal(-R,A,I),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},m=b=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===VD.ACTION.NONE){const M=b instanceof PointerEvent?b.pointerId:0,R=this._findPointerById(M);R&&this._disposePointer(R),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u);return}b.preventDefault()}},y=b=>{if(!this._enabled)return;if(JO(this._activePointers,$o),this._getClientRect(this._elementRect),r.copy($o),s.copy($o),this._activePointers.length>=2){const R=$o.x-this._activePointers[1].clientX,A=$o.y-this._activePointers[1].clientY,I=Math.sqrt(R*R+A*A);a.set(0,I);const k=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,N=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;s.set(k,N)}if(this._state=0,!b)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in b&&b.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(b.buttons&Rr.LEFT)===Rr.LEFT&&(this._state=this._state|this.mouseButtons.left),(b.buttons&Rr.MIDDLE)===Rr.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(b.buttons&Rr.RIGHT)===Rr.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&qt.ROTATE)===qt.ROTATE||(this._state&qt.TOUCH_ROTATE)===qt.TOUCH_ROTATE||(this._state&qt.TOUCH_DOLLY_ROTATE)===qt.TOUCH_DOLLY_ROTATE||(this._state&qt.TOUCH_ZOOM_ROTATE)===qt.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&qt.TRUCK)===qt.TRUCK||(this._state&qt.SCREEN_PAN)===qt.SCREEN_PAN||(this._state&qt.TOUCH_TRUCK)===qt.TOUCH_TRUCK||(this._state&qt.TOUCH_SCREEN_PAN)===qt.TOUCH_SCREEN_PAN||(this._state&qt.TOUCH_DOLLY_TRUCK)===qt.TOUCH_DOLLY_TRUCK||(this._state&qt.TOUCH_DOLLY_SCREEN_PAN)===qt.TOUCH_DOLLY_SCREEN_PAN||(this._state&qt.TOUCH_ZOOM_TRUCK)===qt.TOUCH_ZOOM_TRUCK||(this._state&qt.TOUCH_ZOOM_SCREEN_PAN)===qt.TOUCH_DOLLY_SCREEN_PAN)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&qt.DOLLY)===qt.DOLLY||(this._state&qt.TOUCH_DOLLY)===qt.TOUCH_DOLLY||(this._state&qt.TOUCH_DOLLY_TRUCK)===qt.TOUCH_DOLLY_TRUCK||(this._state&qt.TOUCH_DOLLY_SCREEN_PAN)===qt.TOUCH_DOLLY_SCREEN_PAN||(this._state&qt.TOUCH_DOLLY_OFFSET)===qt.TOUCH_DOLLY_OFFSET||(this._state&qt.TOUCH_DOLLY_ROTATE)===qt.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&qt.ZOOM)===qt.ZOOM||(this._state&qt.TOUCH_ZOOM)===qt.TOUCH_ZOOM||(this._state&qt.TOUCH_ZOOM_TRUCK)===qt.TOUCH_ZOOM_TRUCK||(this._state&qt.TOUCH_ZOOM_SCREEN_PAN)===qt.TOUCH_ZOOM_SCREEN_PAN||(this._state&qt.TOUCH_ZOOM_OFFSET)===qt.TOUCH_ZOOM_OFFSET||(this._state&qt.TOUCH_ZOOM_ROTATE)===qt.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&qt.OFFSET)===qt.OFFSET||(this._state&qt.TOUCH_OFFSET)===qt.TOUCH_OFFSET||(this._state&qt.TOUCH_DOLLY_OFFSET)===qt.TOUCH_DOLLY_OFFSET||(this._state&qt.TOUCH_ZOOM_OFFSET)===qt.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},_=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,JO(this._activePointers,$o);const M=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,R=M?-M.deltaX:s.x-$o.x,A=M?-M.deltaY:s.y-$o.y;if(s.copy($o),((this._state&qt.ROTATE)===qt.ROTATE||(this._state&qt.TOUCH_ROTATE)===qt.TOUCH_ROTATE||(this._state&qt.TOUCH_DOLLY_ROTATE)===qt.TOUCH_DOLLY_ROTATE||(this._state&qt.TOUCH_ZOOM_ROTATE)===qt.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(R,A),this._isUserControllingRotate=!0),(this._state&qt.DOLLY)===qt.DOLLY||(this._state&qt.ZOOM)===qt.ZOOM){const I=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,k=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0,N=this.dollyDragInverted?-1:1;(this._state&qt.DOLLY)===qt.DOLLY?(this._dollyInternal(N*A*dw,I,k),this._isUserControllingDolly=!0):(this._zoomInternal(N*A*dw,I,k),this._isUserControllingZoom=!0)}if((this._state&qt.TOUCH_DOLLY)===qt.TOUCH_DOLLY||(this._state&qt.TOUCH_ZOOM)===qt.TOUCH_ZOOM||(this._state&qt.TOUCH_DOLLY_TRUCK)===qt.TOUCH_DOLLY_TRUCK||(this._state&qt.TOUCH_ZOOM_TRUCK)===qt.TOUCH_ZOOM_TRUCK||(this._state&qt.TOUCH_DOLLY_SCREEN_PAN)===qt.TOUCH_DOLLY_SCREEN_PAN||(this._state&qt.TOUCH_ZOOM_SCREEN_PAN)===qt.TOUCH_ZOOM_SCREEN_PAN||(this._state&qt.TOUCH_DOLLY_OFFSET)===qt.TOUCH_DOLLY_OFFSET||(this._state&qt.TOUCH_ZOOM_OFFSET)===qt.TOUCH_ZOOM_OFFSET||(this._state&qt.TOUCH_DOLLY_ROTATE)===qt.TOUCH_DOLLY_ROTATE||(this._state&qt.TOUCH_ZOOM_ROTATE)===qt.TOUCH_ZOOM_ROTATE){const I=$o.x-this._activePointers[1].clientX,k=$o.y-this._activePointers[1].clientY,N=Math.sqrt(I*I+k*k),L=a.y-N;a.set(0,N);const U=this.dollyToCursor?(s.x-this._elementRect.x)/this._elementRect.width*2-1:0,O=this.dollyToCursor?(s.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&qt.TOUCH_DOLLY)===qt.TOUCH_DOLLY||(this._state&qt.TOUCH_DOLLY_ROTATE)===qt.TOUCH_DOLLY_ROTATE||(this._state&qt.TOUCH_DOLLY_TRUCK)===qt.TOUCH_DOLLY_TRUCK||(this._state&qt.TOUCH_DOLLY_SCREEN_PAN)===qt.TOUCH_DOLLY_SCREEN_PAN||(this._state&qt.TOUCH_DOLLY_OFFSET)===qt.TOUCH_DOLLY_OFFSET?(this._dollyInternal(L*dw,U,O),this._isUserControllingDolly=!0):(this._zoomInternal(L*dw,U,O),this._isUserControllingZoom=!0)}((this._state&qt.TRUCK)===qt.TRUCK||(this._state&qt.TOUCH_TRUCK)===qt.TOUCH_TRUCK||(this._state&qt.TOUCH_DOLLY_TRUCK)===qt.TOUCH_DOLLY_TRUCK||(this._state&qt.TOUCH_ZOOM_TRUCK)===qt.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(R,A,!1,!1),this._isUserControllingTruck=!0),((this._state&qt.SCREEN_PAN)===qt.SCREEN_PAN||(this._state&qt.TOUCH_SCREEN_PAN)===qt.TOUCH_SCREEN_PAN||(this._state&qt.TOUCH_DOLLY_SCREEN_PAN)===qt.TOUCH_DOLLY_SCREEN_PAN||(this._state&qt.TOUCH_ZOOM_SCREEN_PAN)===qt.TOUCH_ZOOM_SCREEN_PAN)&&(this._truckInternal(R,A,!1,!0),this._isUserControllingTruck=!0),((this._state&qt.OFFSET)===qt.OFFSET||(this._state&qt.TOUCH_OFFSET)===qt.TOUCH_OFFSET||(this._state&qt.TOUCH_DOLLY_OFFSET)===qt.TOUCH_DOLLY_OFFSET||(this._state&qt.TOUCH_ZOOM_OFFSET)===qt.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(R,A,!0,!1),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},x=()=>{JO(this._activePointers,$o),s.copy($o),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",S),this._domElement.ownerDocument.addEventListener("pointerlockerror",T),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),y())},this.unlockPointer=()=>{var b,M,R;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(b=this._domElement)===null||b===void 0||b.ownerDocument.exitPointerLock(),(M=this._domElement)===null||M===void 0||M.ownerDocument.removeEventListener("pointerlockchange",S),(R=this._domElement)===null||R===void 0||R.ownerDocument.removeEventListener("pointerlockerror",T),this.cancel()};const S=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},T=()=>{this.unlockPointer()};this._addAllEventListeners=b=>{this._domElement=b,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),this._domElement.addEventListener("pointercancel",u),this._domElement.addEventListener("wheel",d,{passive:!1}),this._domElement.addEventListener("contextmenu",m)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("pointercancel",u),this._domElement.removeEventListener("wheel",d,{passive:!1}),this._domElement.removeEventListener("contextmenu",m),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("pointerlockchange",S),this._domElement.ownerDocument.removeEventListener("pointerlockerror",T))},this.cancel=()=>{this._state!==qt.NONE&&(this._state=qt.NONE,this._activePointers.length=0,x())},n&&this.connect(n),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=sc(e.width,0,1),this._interactiveArea.height=sc(e.height,0,1),this._interactiveArea.x=sc(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=sc(e.y,0,1-this._interactiveArea.height)}addEventListener(e,n){super.addEventListener(e,n)}removeEventListener(e,n){super.removeEventListener(e,n)}rotate(e,n,r=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+n,r)}rotateAzimuthTo(e,n=!1){return this.rotateTo(e,this._sphericalEnd.phi,n)}rotatePolarTo(e,n=!1){return this.rotateTo(this._sphericalEnd.theta,e,n)}rotateTo(e,n,r=!1){this._isUserControllingRotate=!1;const s=sc(e,this.minAzimuthAngle,this.maxAzimuthAngle),a=sc(n,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=s,this._sphericalEnd.phi=a,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,r||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!r||Ri(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ri(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,n=!1){return this.dollyTo(this._sphericalEnd.radius-e,n)}dollyTo(e,n=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Yv.NONE,this._changedDolly=0,this._dollyToNoClamp(sc(e,this.minDistance,this.maxDistance),n)}_dollyToNoClamp(e,n=!1){const r=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),l=Ri(o,this._spherical.radius);if(!(r>e)&&l)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,n||(this._spherical.radius=this._sphericalEnd.radius);const a=!n||Ri(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(a)}dollyInFixed(e,n=!1){this._targetEnd.add(this._getCameraDirection(lx).multiplyScalar(e)),n||this._target.copy(this._targetEnd);const r=!n||Ri(this._target.x,this._targetEnd.x,this.restThreshold)&&Ri(this._target.y,this._targetEnd.y,this.restThreshold)&&Ri(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(r)}zoom(e,n=!1){return this.zoomTo(this._zoomEnd+e,n)}zoomTo(e,n=!1){this._isUserControllingZoom=!1,this._zoomEnd=sc(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,n||(this._zoom=this._zoomEnd);const r=!n||Ri(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(r)}pan(e,n,r=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,n,r)}truck(e,n,r=!1){this._camera.updateMatrix(),hf.setFromMatrixColumn(this._camera.matrix,0),df.setFromMatrixColumn(this._camera.matrix,1),hf.multiplyScalar(e),df.multiplyScalar(-n);const s=Fn.copy(hf).add(df),a=Ei.copy(this._targetEnd).add(s);return this.moveTo(a.x,a.y,a.z,r)}forward(e,n=!1){Fn.setFromMatrixColumn(this._camera.matrix,0),Fn.crossVectors(this._camera.up,Fn),Fn.multiplyScalar(e);const r=Ei.copy(this._targetEnd).add(Fn);return this.moveTo(r.x,r.y,r.z,n)}elevate(e,n=!1){return Fn.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+Fn.x,this._targetEnd.y+Fn.y,this._targetEnd.z+Fn.z,n)}moveTo(e,n,r,s=!1){this._isUserControllingTruck=!1;const a=Fn.set(e,n,r).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,a,this.boundaryFriction),this._needsUpdate=!0,s||this._target.copy(this._targetEnd);const o=!s||Ri(this._target.x,this._targetEnd.x,this.restThreshold)&&Ri(this._target.y,this._targetEnd.y,this.restThreshold)&&Ri(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,n,r,s=!1){const l=Fn.set(e,n,r).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(l.x,l.y,l.z,s)}fitToBox(e,n,{cover:r=!1,paddingLeft:s=0,paddingRight:a=0,paddingBottom:o=0,paddingTop:l=0}={}){const u=[],f=e.isBox3?Qv.copy(e):Qv.setFromObject(e);f.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const d=$4(this._sphericalEnd.theta,q4),m=$4(this._sphericalEnd.phi,q4);u.push(this.rotateTo(d,m,n));const y=Fn.setFromSpherical(this._sphericalEnd).normalize(),_=Q4.setFromUnitVectors(y,nI),x=Ri(Math.abs(y.y),1);x&&_.multiply(rI.setFromAxisAngle(pw,d)),_.multiply(this._yAxisUpSpaceInverse);const S=Z4.makeEmpty();Ei.copy(f.min).applyQuaternion(_),S.expandByPoint(Ei),Ei.copy(f.min).setX(f.max.x).applyQuaternion(_),S.expandByPoint(Ei),Ei.copy(f.min).setY(f.max.y).applyQuaternion(_),S.expandByPoint(Ei),Ei.copy(f.max).setZ(f.min.z).applyQuaternion(_),S.expandByPoint(Ei),Ei.copy(f.min).setZ(f.max.z).applyQuaternion(_),S.expandByPoint(Ei),Ei.copy(f.max).setY(f.min.y).applyQuaternion(_),S.expandByPoint(Ei),Ei.copy(f.max).setX(f.min.x).applyQuaternion(_),S.expandByPoint(Ei),Ei.copy(f.max).applyQuaternion(_),S.expandByPoint(Ei),S.min.x-=s,S.min.y-=o,S.max.x+=a,S.max.y+=l,_.setFromUnitVectors(nI,y),x&&_.premultiply(rI.invert()),_.premultiply(this._yAxisUpSpace);const T=S.getSize(Fn),b=S.getCenter(Ei).applyQuaternion(_);if(bg(this._camera)){const M=this.getDistanceToFitBox(T.x,T.y,T.z,r);u.push(this.moveTo(b.x,b.y,b.z,n)),u.push(this.dollyTo(M,n)),u.push(this.setFocalOffset(0,0,0,n))}else if(Cp(this._camera)){const M=this._camera,R=M.right-M.left,A=M.top-M.bottom,I=r?Math.max(R/T.x,A/T.y):Math.min(R/T.x,A/T.y);u.push(this.moveTo(b.x,b.y,b.z,n)),u.push(this.zoomTo(I,n)),u.push(this.setFocalOffset(0,0,0,n))}return Promise.all(u)}fitToSphere(e,n){const r=[],a="isObject3D"in e?VD.createBoundingSphere(e,iI):iI.copy(e);if(r.push(this.moveTo(a.center.x,a.center.y,a.center.z,n)),bg(this._camera)){const o=this.getDistanceToFitSphere(a.radius);r.push(this.dollyTo(o,n))}else if(Cp(this._camera)){const o=this._camera.right-this._camera.left,l=this._camera.top-this._camera.bottom,u=2*a.radius,f=Math.min(o/u,l/u);r.push(this.zoomTo(f,n))}return r.push(this.setFocalOffset(0,0,0,n)),Promise.all(r)}setLookAt(e,n,r,s,a,o,l=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Yv.NONE,this._changedDolly=0;const u=Ei.set(s,a,o),f=Fn.set(e,n,r);this._targetEnd.copy(u),this._sphericalEnd.setFromVector3(f.sub(u).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,l||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const d=!l||Ri(this._target.x,this._targetEnd.x,this.restThreshold)&&Ri(this._target.y,this._targetEnd.y,this.restThreshold)&&Ri(this._target.z,this._targetEnd.z,this.restThreshold)&&Ri(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ri(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Ri(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(d)}lerpLookAt(e,n,r,s,a,o,l,u,f,d,m,y,_,x=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Yv.NONE,this._changedDolly=0;const S=Fn.set(s,a,o),T=Ei.set(e,n,r);du.setFromVector3(T.sub(S).applyQuaternion(this._yAxisUpSpace));const b=Zv.set(d,m,y),M=Ei.set(l,u,f);ux.setFromVector3(M.sub(b).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(S.lerp(b,_));const R=ux.theta-du.theta,A=ux.phi-du.phi,I=ux.radius-du.radius;this._sphericalEnd.set(du.radius+I*_,du.phi+A*_,du.theta+R*_),this.normalizeRotations(),this._needsUpdate=!0,x||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const k=!x||Ri(this._target.x,this._targetEnd.x,this.restThreshold)&&Ri(this._target.y,this._targetEnd.y,this.restThreshold)&&Ri(this._target.z,this._targetEnd.z,this.restThreshold)&&Ri(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ri(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Ri(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(k)}setPosition(e,n,r,s=!1){return this.setLookAt(e,n,r,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,s)}setTarget(e,n,r,s=!1){const a=this.getPosition(Fn),o=this.setLookAt(a.x,a.y,a.z,e,n,r,s);return this._sphericalEnd.phi=sc(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,n,r,s=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,n,r),this._needsUpdate=!0,s||this._focalOffset.copy(this._focalOffsetEnd);const a=!s||Ri(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&Ri(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&Ri(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(a)}setOrbitPoint(e,n,r){this._camera.updateMatrixWorld(),hf.setFromMatrixColumn(this._camera.matrixWorldInverse,0),df.setFromMatrixColumn(this._camera.matrixWorldInverse,1),xg.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const s=Fn.set(e,n,r),a=s.distanceTo(this._camera.position),o=s.sub(this._camera.position);hf.multiplyScalar(o.x),df.multiplyScalar(o.y),xg.multiplyScalar(o.z),Fn.copy(hf).add(df).add(xg),Fn.z=Fn.z+a,this.dollyTo(a,!1),this.setFocalOffset(-Fn.x,Fn.y,-Fn.z,!1),this.moveTo(e,n,r,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,n,r,s){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new gn.Vector4,typeof e=="number"?this._viewport.set(e,n,r,s):this._viewport.copy(e)}getDistanceToFitBox(e,n,r,s=!1){if(tI(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const a=e/n,o=this._camera.getEffectiveFOV()*sx,l=this._camera.aspect;return((s?a>l:a<l)?n:e/l)*.5/Math.tan(o*.5)+r*.5}getDistanceToFitSphere(e){if(tI(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const n=this._camera.getEffectiveFOV()*sx,r=Math.atan(Math.tan(n*.5)*this._camera.aspect)*2,s=1<this._camera.aspect?n:r;return e/Math.sin(s*.5)}getTarget(e,n=!0){return(e&&e.isVector3?e:new gn.Vector3).copy(n?this._targetEnd:this._target)}getPosition(e,n=!0){return(e&&e.isVector3?e:new gn.Vector3).setFromSpherical(n?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(n?this._targetEnd:this._target)}getSpherical(e,n=!0){return(e||new gn.Spherical).copy(n?this._sphericalEnd:this._spherical)}getFocalOffset(e,n=!0){return(e&&e.isVector3?e:new gn.Vector3).copy(n?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Kv,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Kv),this._spherical.theta+=Kv*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Kv)}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(e=!1){if(!Ri(this._camera.up.x,this._cameraUp0.x)||!Ri(this._camera.up.y,this._cameraUp0.y)||!Ri(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const r=this.getPosition(Fn);this.updateCameraUp(),this.setPosition(r.x,r.y,r.z)}const n=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(n)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,pw),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=Fn.subVectors(this._target,this._camera.position).normalize(),n=Ei.crossVectors(e,this._camera.up);this._camera.up.crossVectors(n,e).normalize(),this._camera.updateMatrixWorld();const r=this.getPosition(Fn);this.updateCameraUp(),this.setPosition(r.x,r.y,r.z)}update(e){const n=this._sphericalEnd.theta-this._spherical.theta,r=this._sphericalEnd.phi-this._spherical.phi,s=this._sphericalEnd.radius-this._spherical.radius,a=Y4.subVectors(this._targetEnd,this._target),o=K4.subVectors(this._focalOffsetEnd,this._focalOffset),l=this._zoomEnd-this._zoom;if(tr(n))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const m=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=hw(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,m,1/0,e),this._needsUpdate=!0}if(tr(r))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const m=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=hw(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,m,1/0,e),this._needsUpdate=!0}if(tr(s))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const m=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=hw(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,m,this.maxSpeed,e),this._needsUpdate=!0}if(tr(a.x)&&tr(a.y)&&tr(a.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const m=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;W4(this._target,this._targetEnd,this._targetVelocity,m,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(tr(o.x)&&tr(o.y)&&tr(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const m=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;W4(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,m,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(tr(l))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const m=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=hw(this._zoom,this._zoomEnd,this._zoomVelocity,m,1/0,e)}if(this.dollyToCursor){if(bg(this._camera)&&this._changedDolly!==0){const m=this._spherical.radius-this._lastDistance,y=this._camera,_=this._getCameraDirection(lx),x=Fn.copy(_).cross(y.up).normalize();x.lengthSq()===0&&(x.x=1);const S=Ei.crossVectors(x,_),T=this._sphericalEnd.radius*Math.tan(y.getEffectiveFOV()*sx*.5),M=(this._sphericalEnd.radius-m-this._sphericalEnd.radius)/this._sphericalEnd.radius,R=Zv.copy(this._targetEnd).add(x.multiplyScalar(this._dollyControlCoord.x*T*y.aspect)).add(S.multiplyScalar(this._dollyControlCoord.y*T)),A=Fn.copy(this._targetEnd).lerp(R,M),I=this._lastDollyDirection===Yv.IN&&this._spherical.radius<=this.minDistance,k=this._lastDollyDirection===Yv.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(I||k)){this._sphericalEnd.radius-=m,this._spherical.radius-=m;const L=Ei.copy(_).multiplyScalar(-m);A.add(L)}this._boundary.clampPoint(A,A);const N=Ei.subVectors(A,this._targetEnd);this._targetEnd.copy(A),this._target.add(N),this._changedDolly-=m,tr(this._changedDolly)&&(this._changedDolly=0)}else if(Cp(this._camera)&&this._changedZoom!==0){const m=this._zoom-this._lastZoom,y=this._camera,_=Fn.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(y.near+y.far)/(y.near-y.far)).unproject(y),x=Ei.set(0,0,-1).applyQuaternion(y.quaternion),S=Zv.copy(_).add(x.multiplyScalar(-_.dot(y.up))),b=-(this._zoom-m-this._zoom)/this._zoom,M=this._getCameraDirection(lx),R=this._targetEnd.dot(M),A=Fn.copy(this._targetEnd).lerp(S,b),I=A.dot(M),k=M.multiplyScalar(I-R);A.sub(k),this._boundary.clampPoint(A,A);const N=Ei.subVectors(A,this._targetEnd);this._targetEnd.copy(A),this._target.add(N),this._changedZoom-=m,tr(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const u=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,u),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!tr(this._focalOffset.x)||!tr(this._focalOffset.y)||!tr(this._focalOffset.z))&&(hf.setFromMatrixColumn(this._camera.matrix,0),df.setFromMatrixColumn(this._camera.matrix,1),xg.setFromMatrixColumn(this._camera.matrix,2),hf.multiplyScalar(this._focalOffset.x),df.multiplyScalar(-this._focalOffset.y),xg.multiplyScalar(this._focalOffset.z),Fn.copy(hf).add(df).add(xg),this._camera.position.add(Fn),this._camera.updateMatrixWorld()),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Fn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const d=this._needsUpdate;return d&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):d?(this.dispatchEvent({type:"update"}),tr(n,this.restThreshold)&&tr(r,this.restThreshold)&&tr(s,this.restThreshold)&&tr(a.x,this.restThreshold)&&tr(a.y,this.restThreshold)&&tr(a.z,this.restThreshold)&&tr(o.x,this.restThreshold)&&tr(o.y,this.restThreshold)&&tr(o.z,this.restThreshold)&&tr(l,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!d&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=d,this._needsUpdate=!1,d}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:ax(this.maxDistance),minZoom:this.minZoom,maxZoom:ax(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:ax(this.maxPolarAngle),minAzimuthAngle:ax(this.minAzimuthAngle),maxAzimuthAngle:ax(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,target:this._targetEnd.toArray(),position:Fn.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,n=!1){const r=JSON.parse(e);this.enabled=r.enabled,this.minDistance=r.minDistance,this.maxDistance=ox(r.maxDistance),this.minZoom=r.minZoom,this.maxZoom=ox(r.maxZoom),this.minPolarAngle=r.minPolarAngle,this.maxPolarAngle=ox(r.maxPolarAngle),this.minAzimuthAngle=ox(r.minAzimuthAngle),this.maxAzimuthAngle=ox(r.maxAzimuthAngle),this.smoothTime=r.smoothTime,this.draggingSmoothTime=r.draggingSmoothTime,this.dollySpeed=r.dollySpeed,this.truckSpeed=r.truckSpeed,this.dollyToCursor=r.dollyToCursor,this._target0.fromArray(r.target0),this._position0.fromArray(r.position0),this._zoom0=r.zoom0,this._focalOffset0.fromArray(r.focalOffset0),this.moveTo(r.target[0],r.target[1],r.target[2],n),du.setFromVector3(Fn.fromArray(r.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(du.theta,du.phi,n),this.dollyTo(du.radius,n),this.zoomTo(r.zoom,n),this.setFocalOffset(r.focalOffset[0],r.focalOffset[1],r.focalOffset[2],n),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",Urt),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(n=>n.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(n=>n.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,n,r){const s=n.lengthSq();if(s===0)return e;const a=Ei.copy(n).add(e),l=this._boundary.clampPoint(a,Zv).sub(a),u=l.lengthSq();if(u===0)return e.add(n);if(u===s)return e;if(r===0)return e.add(n).add(l);{const f=1+r*u/n.dot(l);return e.add(Ei.copy(n).multiplyScalar(f)).add(l.multiplyScalar(1-r))}}_updateNearPlaneCorners(){if(bg(this._camera)){const e=this._camera,n=e.near,r=e.getEffectiveFOV()*sx,s=Math.tan(r*.5)*n,a=s*e.aspect;this._nearPlaneCorners[0].set(-a,-s,0),this._nearPlaneCorners[1].set(a,-s,0),this._nearPlaneCorners[2].set(a,s,0),this._nearPlaneCorners[3].set(-a,s,0)}else if(Cp(this._camera)){const e=this._camera,n=1/e.zoom,r=e.left*n,s=e.right*n,a=e.top*n,o=e.bottom*n;this._nearPlaneCorners[0].set(r,a,0),this._nearPlaneCorners[1].set(s,a,0),this._nearPlaneCorners[2].set(s,o,0),this._nearPlaneCorners[3].set(r,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||tI(this._camera,"_collisionTest"))return e;const r=this._getTargetDirection(lx);sI.lookAt(X4,r,this._camera.up);for(let s=0;s<4;s++){const a=Ei.copy(this._nearPlaneCorners[s]);a.applyMatrix4(sI);const o=Zv.addVectors(this._target,a);mw.set(o,r),mw.far=this._spherical.radius+1;const l=mw.intersectObjects(this.colliderMeshes);l.length!==0&&l[0].distance<e&&(e=l[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const n=this._domElement.getBoundingClientRect();return e.x=n.left,e.y=n.top,this._viewport?(e.x+=this._viewport.x,e.y+=n.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=n.width,e.height=n.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(n=>{const r=()=>{this.removeEventListener("rest",r),n()};this.addEventListener("rest",r)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,n=new gn.Sphere){const r=n,s=r.center;Qv.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&Qv.expandByObject(o)}),Qv.getCenter(s);let a=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const l=o;if(!l.geometry)return;const u=l.geometry.clone();u.applyMatrix4(l.matrixWorld);const d=u.attributes.position;for(let m=0,y=d.count;m<y;m++)Fn.fromBufferAttribute(d,m),a=Math.max(a,s.distanceToSquared(Fn))}),r.radius=Math.sqrt(a),r}};const zrt=tt.forwardRef((i,e)=>{tt.useMemo(()=>{const I={Box3:ha,MathUtils:{clamp:ZH.clamp},Matrix4:cn,Quaternion:bo,Raycaster:x3,Sphere:da,Spherical:S3,Vector2:de,Vector3:pt,Vector4:di};aI.install({THREE:I}),b9({CameraControlsImpl:aI})},[]);const{camera:n,domElement:r,makeDefault:s,onStart:a,onEnd:o,onChange:l,regress:u,...f}=i,d=Ep(I=>I.camera),m=Ep(I=>I.gl),y=Ep(I=>I.invalidate),_=Ep(I=>I.events),x=Ep(I=>I.setEvents),S=Ep(I=>I.set),T=Ep(I=>I.get),b=Ep(I=>I.performance),M=n||d,R=r||_.connected||m.domElement,A=tt.useMemo(()=>new aI(M),[M]);return M3((I,k)=>{A.enabled&&A.update(k)},-1),tt.useEffect(()=>(A.connect(R),()=>void A.disconnect()),[R,A]),tt.useEffect(()=>{const I=L=>{y(),u&&b.regress(),l&&l(L)},k=L=>{a&&a(L)},N=L=>{o&&o(L)};return A.addEventListener("update",I),A.addEventListener("controlstart",k),A.addEventListener("controlend",N),A.addEventListener("control",I),A.addEventListener("transitionstart",I),A.addEventListener("wake",I),()=>{A.removeEventListener("update",I),A.removeEventListener("controlstart",k),A.removeEventListener("controlend",N),A.removeEventListener("control",I),A.removeEventListener("transitionstart",I),A.removeEventListener("wake",I)}},[A,a,o,y,x,u,l]),tt.useEffect(()=>{if(s){const I=T().controls;return S({controls:A}),()=>S({controls:I})}},[s,A]),tt.createElement("primitive",$1({ref:e,object:A},f))});class Brt extends Au{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${Nrt>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const Frt=i=>new pt().setFromSpherical(new S3(i,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),Vrt=tt.forwardRef(({radius:i=100,depth:e=50,count:n=5e3,saturation:r=0,factor:s=4,fade:a=!1,speed:o=1},l)=>{const u=tt.useRef(null),[f,d,m]=tt.useMemo(()=>{const _=[],x=[],S=Array.from({length:n},()=>(.5+.5*Math.random())*s),T=new ke;let b=i+e;const M=e/n;for(let R=0;R<n;R++)b-=M*Math.random(),_.push(...Frt(b).toArray()),T.setHSL(R/n,r,.9),x.push(T.r,T.g,T.b);return[new Float32Array(_),new Float32Array(x),new Float32Array(S)]},[n,e,s,i,r]);M3(_=>u.current&&(u.current.uniforms.time.value=_.clock.elapsedTime*o));const[y]=tt.useState(()=>new Brt);return tt.createElement("points",{ref:l},tt.createElement("bufferGeometry",null,tt.createElement("bufferAttribute",{attach:"attributes-position",args:[f,3]}),tt.createElement("bufferAttribute",{attach:"attributes-color",args:[d,3]}),tt.createElement("bufferAttribute",{attach:"attributes-size",args:[m,1]})),tt.createElement("primitive",{ref:u,object:y,attach:"material",blending:IA,"uniforms-fade-value":a,depthWrite:!1,transparent:!0,vertexColors:!0}))}),Hrt={canvasBackgraundColor:"#002"},J4={guard:"rgb(73, 255, 33)",submission:"rgb(255, 0, 0)51)",pass:"rgb(27, 250, 250)",switch:"rgb(255, 243, 17)",transition:"rgb(198, 122, 28)",control:"rgb(212, 0, 255)"},Sg={fov:90,near:.1,far:1e3,position:[30,50,100],dollySpeed:4,minDistance:20,maxDistance:270},Jv={radius:180,depth:5,count:2e3,factor:7,saturation:1,speed:.5},Qh={nodes:"nodos",links:"links"};function pd(i,...e){const n=new URL(`https://mui.com/production-error/?code=${i}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${i}; visit ${n} for the full message.`}function Grt(i){if(i.sheet)return i.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===i)return document.styleSheets[e]}function jrt(i){var e=document.createElement("style");return e.setAttribute("data-emotion",i.key),i.nonce!==void 0&&e.setAttribute("nonce",i.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var qrt=function(){function i(n){var r=this;this._insertTag=function(s){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,a),r.tags.push(s)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=i.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(jrt(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var a=Grt(s);try{a.insertRule(r,a.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},i}(),La="-ms-",xM="-moz-",wi="-webkit-",C9="comm",R3="rule",O3="decl",$rt="@import",R9="@keyframes",Wrt="@layer",Xrt=Math.abs,a2=String.fromCharCode,Yrt=Object.assign;function Krt(i,e){return ua(i,0)^45?(((e<<2^ua(i,0))<<2^ua(i,1))<<2^ua(i,2))<<2^ua(i,3):0}function O9(i){return i.trim()}function Zrt(i,e){return(i=e.exec(i))?i[0]:i}function Ai(i,e,n){return i.replace(e,n)}function HD(i,e){return i.indexOf(e)}function ua(i,e){return i.charCodeAt(e)|0}function W1(i,e,n){return i.slice(e,n)}function xf(i){return i.length}function I3(i){return i.length}function gw(i,e){return e.push(i),i}function Qrt(i,e){return i.map(e).join("")}var o2=1,Q0=1,I9=0,ol=0,_s=0,D_="";function l2(i,e,n,r,s,a,o){return{value:i,root:e,parent:n,type:r,props:s,children:a,line:o2,column:Q0,length:o,return:""}}function cx(i,e){return Yrt(l2("",null,null,"",null,null,0),i,{length:-i.length},e)}function Jrt(){return _s}function tst(){return _s=ol>0?ua(D_,--ol):0,Q0--,_s===10&&(Q0=1,o2--),_s}function kl(){return _s=ol<I9?ua(D_,ol++):0,Q0++,_s===10&&(Q0=1,o2++),_s}function Pf(){return ua(D_,ol)}function sA(){return ol}function zS(i,e){return W1(D_,i,e)}function X1(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function D9(i){return o2=Q0=1,I9=xf(D_=i),ol=0,[]}function P9(i){return D_="",i}function aA(i){return O9(zS(ol-1,GD(i===91?i+2:i===40?i+1:i)))}function est(i){for(;(_s=Pf())&&_s<33;)kl();return X1(i)>2||X1(_s)>3?"":" "}function nst(i,e){for(;--e&&kl()&&!(_s<48||_s>102||_s>57&&_s<65||_s>70&&_s<97););return zS(i,sA()+(e<6&&Pf()==32&&kl()==32))}function GD(i){for(;kl();)switch(_s){case i:return ol;case 34:case 39:i!==34&&i!==39&&GD(_s);break;case 40:i===41&&GD(i);break;case 92:kl();break}return ol}function ist(i,e){for(;kl()&&i+_s!==57;)if(i+_s===84&&Pf()===47)break;return"/*"+zS(e,ol-1)+"*"+a2(i===47?i:kl())}function rst(i){for(;!X1(Pf());)kl();return zS(i,ol)}function sst(i){return P9(oA("",null,null,null,[""],i=D9(i),0,[0],i))}function oA(i,e,n,r,s,a,o,l,u){for(var f=0,d=0,m=o,y=0,_=0,x=0,S=1,T=1,b=1,M=0,R="",A=s,I=a,k=r,N=R;T;)switch(x=M,M=kl()){case 40:if(x!=108&&ua(N,m-1)==58){HD(N+=Ai(aA(M),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:N+=aA(M);break;case 9:case 10:case 13:case 32:N+=est(x);break;case 92:N+=nst(sA()-1,7);continue;case 47:switch(Pf()){case 42:case 47:gw(ast(ist(kl(),sA()),e,n),u);break;default:N+="/"}break;case 123*S:l[f++]=xf(N)*b;case 125*S:case 59:case 0:switch(M){case 0:case 125:T=0;case 59+d:b==-1&&(N=Ai(N,/\f/g,"")),_>0&&xf(N)-m&&gw(_>32?eB(N+";",r,n,m-1):eB(Ai(N," ","")+";",r,n,m-2),u);break;case 59:N+=";";default:if(gw(k=tB(N,e,n,f,d,s,l,R,A=[],I=[],m),a),M===123)if(d===0)oA(N,e,k,k,A,a,m,l,I);else switch(y===99&&ua(N,3)===110?100:y){case 100:case 108:case 109:case 115:oA(i,k,k,r&&gw(tB(i,k,k,0,0,s,l,R,s,A=[],m),I),s,I,m,l,r?A:I);break;default:oA(N,k,k,k,[""],I,0,l,I)}}f=d=_=0,S=b=1,R=N="",m=o;break;case 58:m=1+xf(N),_=x;default:if(S<1){if(M==123)--S;else if(M==125&&S++==0&&tst()==125)continue}switch(N+=a2(M),M*S){case 38:b=d>0?1:(N+="\f",-1);break;case 44:l[f++]=(xf(N)-1)*b,b=1;break;case 64:Pf()===45&&(N+=aA(kl())),y=Pf(),d=m=xf(R=N+=rst(sA())),M++;break;case 45:x===45&&xf(N)==2&&(S=0)}}return a}function tB(i,e,n,r,s,a,o,l,u,f,d){for(var m=s-1,y=s===0?a:[""],_=I3(y),x=0,S=0,T=0;x<r;++x)for(var b=0,M=W1(i,m+1,m=Xrt(S=o[x])),R=i;b<_;++b)(R=O9(S>0?y[b]+" "+M:Ai(M,/&\f/g,y[b])))&&(u[T++]=R);return l2(i,e,n,s===0?R3:l,u,f,d)}function ast(i,e,n){return l2(i,e,n,C9,a2(Jrt()),W1(i,2,-2),0)}function eB(i,e,n,r){return l2(i,e,n,O3,W1(i,0,r),W1(i,r+1,-1),r)}function P0(i,e){for(var n="",r=I3(i),s=0;s<r;s++)n+=e(i[s],s,i,e)||"";return n}function ost(i,e,n,r){switch(i.type){case Wrt:if(i.children.length)break;case $rt:case O3:return i.return=i.return||i.value;case C9:return"";case R9:return i.return=i.value+"{"+P0(i.children,r)+"}";case R3:i.value=i.props.join(",")}return xf(n=P0(i.children,r))?i.return=i.value+"{"+n+"}":""}function lst(i){var e=I3(i);return function(n,r,s,a){for(var o="",l=0;l<e;l++)o+=i[l](n,r,s,a)||"";return o}}function ust(i){return function(e){e.root||(e=e.return)&&i(e)}}function N9(i){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=i(n)),e[n]}}var cst=function(e,n,r){for(var s=0,a=0;s=a,a=Pf(),s===38&&a===12&&(n[r]=1),!X1(a);)kl();return zS(e,ol)},fst=function(e,n){var r=-1,s=44;do switch(X1(s)){case 0:s===38&&Pf()===12&&(n[r]=1),e[r]+=cst(ol-1,n,r);break;case 2:e[r]+=aA(s);break;case 4:if(s===44){e[++r]=Pf()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=a2(s)}while(s=kl());return e},hst=function(e,n){return P9(fst(D9(e),n))},nB=new WeakMap,dst=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!nB.get(r))&&!s){nB.set(e,!0);for(var a=[],o=hst(n,a),l=r.props,u=0,f=0;u<o.length;u++)for(var d=0;d<l.length;d++,f++)e.props[f]=a[u]?o[u].replace(/&\f/g,l[d]):l[d]+" "+o[u]}}},pst=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function L9(i,e){switch(Krt(i,e)){case 5103:return wi+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return wi+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return wi+i+xM+i+La+i+i;case 6828:case 4268:return wi+i+La+i+i;case 6165:return wi+i+La+"flex-"+i+i;case 5187:return wi+i+Ai(i,/(\w+).+(:[^]+)/,wi+"box-$1$2"+La+"flex-$1$2")+i;case 5443:return wi+i+La+"flex-item-"+Ai(i,/flex-|-self/,"")+i;case 4675:return wi+i+La+"flex-line-pack"+Ai(i,/align-content|flex-|-self/,"")+i;case 5548:return wi+i+La+Ai(i,"shrink","negative")+i;case 5292:return wi+i+La+Ai(i,"basis","preferred-size")+i;case 6060:return wi+"box-"+Ai(i,"-grow","")+wi+i+La+Ai(i,"grow","positive")+i;case 4554:return wi+Ai(i,/([^-])(transform)/g,"$1"+wi+"$2")+i;case 6187:return Ai(Ai(Ai(i,/(zoom-|grab)/,wi+"$1"),/(image-set)/,wi+"$1"),i,"")+i;case 5495:case 3959:return Ai(i,/(image-set\([^]*)/,wi+"$1$`$1");case 4968:return Ai(Ai(i,/(.+:)(flex-)?(.*)/,wi+"box-pack:$3"+La+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+wi+i+i;case 4095:case 3583:case 4068:case 2532:return Ai(i,/(.+)-inline(.+)/,wi+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(xf(i)-1-e>6)switch(ua(i,e+1)){case 109:if(ua(i,e+4)!==45)break;case 102:return Ai(i,/(.+:)(.+)-([^]+)/,"$1"+wi+"$2-$3$1"+xM+(ua(i,e+3)==108?"$3":"$2-$3"))+i;case 115:return~HD(i,"stretch")?L9(Ai(i,"stretch","fill-available"),e)+i:i}break;case 4949:if(ua(i,e+1)!==115)break;case 6444:switch(ua(i,xf(i)-3-(~HD(i,"!important")&&10))){case 107:return Ai(i,":",":"+wi)+i;case 101:return Ai(i,/(.+:)([^;!]+)(;|!.+)?/,"$1"+wi+(ua(i,14)===45?"inline-":"")+"box$3$1"+wi+"$2$3$1"+La+"$2box$3")+i}break;case 5936:switch(ua(i,e+11)){case 114:return wi+i+La+Ai(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return wi+i+La+Ai(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return wi+i+La+Ai(i,/[svh]\w+-[tblr]{2}/,"lr")+i}return wi+i+La+i+i}return i}var mst=function(e,n,r,s){if(e.length>-1&&!e.return)switch(e.type){case O3:e.return=L9(e.value,e.length);break;case R9:return P0([cx(e,{value:Ai(e.value,"@","@"+wi)})],s);case R3:if(e.length)return Qrt(e.props,function(a){switch(Zrt(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return P0([cx(e,{props:[Ai(a,/:(read-\w+)/,":"+xM+"$1")]})],s);case"::placeholder":return P0([cx(e,{props:[Ai(a,/:(plac\w+)/,":"+wi+"input-$1")]}),cx(e,{props:[Ai(a,/:(plac\w+)/,":"+xM+"$1")]}),cx(e,{props:[Ai(a,/:(plac\w+)/,La+"input-$1")]})],s)}return""})}},gst=[mst],yst=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(S){var T=S.getAttribute("data-emotion");T.indexOf(" ")!==-1&&(document.head.appendChild(S),S.setAttribute("data-s",""))})}var s=e.stylisPlugins||gst,a={},o,l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(S){for(var T=S.getAttribute("data-emotion").split(" "),b=1;b<T.length;b++)a[T[b]]=!0;l.push(S)});var u,f=[dst,pst];{var d,m=[ost,ust(function(S){d.insert(S)})],y=lst(f.concat(s,m)),_=function(T){return P0(sst(T),y)};u=function(T,b,M,R){d=M,_(T?T+"{"+b.styles+"}":b.styles),R&&(x.inserted[b.name]=!0)}}var x={key:n,sheet:new qrt({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:u};return x.sheet.hydrate(l),x},oI={exports:{}},Oi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iB;function vst(){if(iB)return Oi;iB=1;var i=typeof Symbol=="function"&&Symbol.for,e=i?Symbol.for("react.element"):60103,n=i?Symbol.for("react.portal"):60106,r=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,a=i?Symbol.for("react.profiler"):60114,o=i?Symbol.for("react.provider"):60109,l=i?Symbol.for("react.context"):60110,u=i?Symbol.for("react.async_mode"):60111,f=i?Symbol.for("react.concurrent_mode"):60111,d=i?Symbol.for("react.forward_ref"):60112,m=i?Symbol.for("react.suspense"):60113,y=i?Symbol.for("react.suspense_list"):60120,_=i?Symbol.for("react.memo"):60115,x=i?Symbol.for("react.lazy"):60116,S=i?Symbol.for("react.block"):60121,T=i?Symbol.for("react.fundamental"):60117,b=i?Symbol.for("react.responder"):60118,M=i?Symbol.for("react.scope"):60119;function R(I){if(typeof I=="object"&&I!==null){var k=I.$$typeof;switch(k){case e:switch(I=I.type,I){case u:case f:case r:case a:case s:case m:return I;default:switch(I=I&&I.$$typeof,I){case l:case d:case x:case _:case o:return I;default:return k}}case n:return k}}}function A(I){return R(I)===f}return Oi.AsyncMode=u,Oi.ConcurrentMode=f,Oi.ContextConsumer=l,Oi.ContextProvider=o,Oi.Element=e,Oi.ForwardRef=d,Oi.Fragment=r,Oi.Lazy=x,Oi.Memo=_,Oi.Portal=n,Oi.Profiler=a,Oi.StrictMode=s,Oi.Suspense=m,Oi.isAsyncMode=function(I){return A(I)||R(I)===u},Oi.isConcurrentMode=A,Oi.isContextConsumer=function(I){return R(I)===l},Oi.isContextProvider=function(I){return R(I)===o},Oi.isElement=function(I){return typeof I=="object"&&I!==null&&I.$$typeof===e},Oi.isForwardRef=function(I){return R(I)===d},Oi.isFragment=function(I){return R(I)===r},Oi.isLazy=function(I){return R(I)===x},Oi.isMemo=function(I){return R(I)===_},Oi.isPortal=function(I){return R(I)===n},Oi.isProfiler=function(I){return R(I)===a},Oi.isStrictMode=function(I){return R(I)===s},Oi.isSuspense=function(I){return R(I)===m},Oi.isValidElementType=function(I){return typeof I=="string"||typeof I=="function"||I===r||I===f||I===a||I===s||I===m||I===y||typeof I=="object"&&I!==null&&(I.$$typeof===x||I.$$typeof===_||I.$$typeof===o||I.$$typeof===l||I.$$typeof===d||I.$$typeof===T||I.$$typeof===b||I.$$typeof===M||I.$$typeof===S)},Oi.typeOf=R,Oi}var rB;function _st(){return rB||(rB=1,oI.exports=vst()),oI.exports}var lI,sB;function bst(){if(sB)return lI;sB=1;var i=_st(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[i.ForwardRef]=r,a[i.Memo]=s;function o(x){return i.isMemo(x)?s:a[x.$$typeof]||e}var l=Object.defineProperty,u=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,m=Object.getPrototypeOf,y=Object.prototype;function _(x,S,T){if(typeof S!="string"){if(y){var b=m(S);b&&b!==y&&_(x,b,T)}var M=u(S);f&&(M=M.concat(f(S)));for(var R=o(x),A=o(S),I=0;I<M.length;++I){var k=M[I];if(!n[k]&&!(T&&T[k])&&!(A&&A[k])&&!(R&&R[k])){var N=d(S,k);try{l(x,k,N)}catch{}}}}return x}return lI=_,lI}bst();var xst=!0;function U9(i,e,n){var r="";return n.split(" ").forEach(function(s){i[s]!==void 0?e.push(i[s]+";"):s&&(r+=s+" ")}),r}var D3=function(e,n,r){var s=e.key+"-"+n.name;(r===!1||xst===!1)&&e.registered[s]===void 0&&(e.registered[s]=n.styles)},P3=function(e,n,r){D3(e,n,r);var s=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var a=n;do e.insert(n===a?"."+s:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function Sst(i){for(var e=0,n,r=0,s=i.length;s>=4;++r,s-=4)n=i.charCodeAt(r)&255|(i.charCodeAt(++r)&255)<<8|(i.charCodeAt(++r)&255)<<16|(i.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(i.charCodeAt(r+2)&255)<<16;case 2:e^=(i.charCodeAt(r+1)&255)<<8;case 1:e^=i.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Est={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Tst=/[A-Z]|^ms/g,wst=/_EMO_([^_]+?)_([^]*?)_EMO_/g,k9=function(e){return e.charCodeAt(1)===45},aB=function(e){return e!=null&&typeof e!="boolean"},uI=N9(function(i){return k9(i)?i:i.replace(Tst,"-$&").toLowerCase()}),oB=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(wst,function(r,s,a){return Sf={name:s,styles:a,next:Sf},s})}return Est[e]!==1&&!k9(e)&&typeof n=="number"&&n!==0?n+"px":n};function Y1(i,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var s=n;if(s.anim===1)return Sf={name:s.name,styles:s.styles,next:Sf},s.name;var a=n;if(a.styles!==void 0){var o=a.next;if(o!==void 0)for(;o!==void 0;)Sf={name:o.name,styles:o.styles,next:Sf},o=o.next;var l=a.styles+";";return l}return Ast(i,e,n)}case"function":{if(i!==void 0){var u=Sf,f=n(i);return Sf=u,Y1(i,e,f)}break}}var d=n;if(e==null)return d;var m=e[d];return m!==void 0?m:d}function Ast(i,e,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=Y1(i,e,n[s])+";";else for(var a in n){var o=n[a];if(typeof o!="object"){var l=o;e!=null&&e[l]!==void 0?r+=a+"{"+e[l]+"}":aB(l)&&(r+=uI(a)+":"+oB(a,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var u=0;u<o.length;u++)aB(o[u])&&(r+=uI(a)+":"+oB(a,o[u])+";");else{var f=Y1(i,e,o);switch(a){case"animation":case"animationName":{r+=uI(a)+":"+f+";";break}default:r+=a+"{"+f+"}"}}}return r}var lB=/label:\s*([^\s;{]+)\s*(;|$)/g,Sf;function BS(i,e,n){if(i.length===1&&typeof i[0]=="object"&&i[0]!==null&&i[0].styles!==void 0)return i[0];var r=!0,s="";Sf=void 0;var a=i[0];if(a==null||a.raw===void 0)r=!1,s+=Y1(n,e,a);else{var o=a;s+=o[0]}for(var l=1;l<i.length;l++)if(s+=Y1(n,e,i[l]),r){var u=a;s+=u[l]}lB.lastIndex=0;for(var f="",d;(d=lB.exec(s))!==null;)f+="-"+d[1];var m=Sst(s)+f;return{name:m,styles:s,next:Sf}}var Mst=function(e){return e()},z9=_D.useInsertionEffect?_D.useInsertionEffect:!1,B9=z9||Mst,uB=z9||tt.useLayoutEffect,F9=tt.createContext(typeof HTMLElement<"u"?yst({key:"css"}):null);F9.Provider;var N3=function(e){return tt.forwardRef(function(n,r){var s=tt.useContext(F9);return e(n,s,r)})},u2=tt.createContext({}),L3={}.hasOwnProperty,jD="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Cst=function(e,n){var r={};for(var s in n)L3.call(n,s)&&(r[s]=n[s]);return r[jD]=e,r},Rst=function(e){var n=e.cache,r=e.serialized,s=e.isStringTag;return D3(n,r,s),B9(function(){return P3(n,r,s)}),null},Ost=N3(function(i,e,n){var r=i.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=i[jD],a=[r],o="";typeof i.className=="string"?o=U9(e.registered,a,i.className):i.className!=null&&(o=i.className+" ");var l=BS(a,void 0,tt.useContext(u2));o+=e.key+"-"+l.name;var u={};for(var f in i)L3.call(i,f)&&f!=="css"&&f!==jD&&(u[f]=i[f]);return u.className=o,n&&(u.ref=n),tt.createElement(tt.Fragment,null,tt.createElement(Rst,{cache:e,serialized:l,isStringTag:typeof s=="string"}),tt.createElement(s,u))}),Ist=Ost,cB=function(e,n){var r=arguments;if(n==null||!L3.call(n,"css"))return tt.createElement.apply(void 0,r);var s=r.length,a=new Array(s);a[0]=Ist,a[1]=Cst(e,n);for(var o=2;o<s;o++)a[o]=r[o];return tt.createElement.apply(null,a)};(function(i){var e;e||(e=i.JSX||(i.JSX={}))})(cB||(cB={}));var Dst=N3(function(i,e){var n=i.styles,r=BS([n],void 0,tt.useContext(u2)),s=tt.useRef();return uB(function(){var a=e.key+"-global",o=new e.sheet.constructor({key:a,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),l=!1,u=document.querySelector('style[data-emotion="'+a+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),u!==null&&(l=!0,u.setAttribute("data-emotion",a),o.hydrate([u])),s.current=[o,l],function(){o.flush()}},[e]),uB(function(){var a=s.current,o=a[0],l=a[1];if(l){a[1]=!1;return}if(r.next!==void 0&&P3(e,r.next,!0),o.tags.length){var u=o.tags[o.tags.length-1].nextElementSibling;o.before=u,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function P_(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return BS(e)}function gm(){var i=P_.apply(void 0,arguments),e="animation-"+i.name;return{name:e,styles:"@keyframes "+e+"{"+i.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Pst=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Nst=N9(function(i){return Pst.test(i)||i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)<91}),Lst=Nst,Ust=function(e){return e!=="theme"},fB=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Lst:Ust},hB=function(e,n,r){var s;if(n){var a=n.shouldForwardProp;s=e.__emotion_forwardProp&&a?function(o){return e.__emotion_forwardProp(o)&&a(o)}:a}return typeof s!="function"&&r&&(s=e.__emotion_forwardProp),s},kst=function(e){var n=e.cache,r=e.serialized,s=e.isStringTag;return D3(n,r,s),B9(function(){return P3(n,r,s)}),null},zst=function i(e,n){var r=e.__emotion_real===e,s=r&&e.__emotion_base||e,a,o;n!==void 0&&(a=n.label,o=n.target);var l=hB(e,n,r),u=l||fB(s),f=!u("as");return function(){var d=arguments,m=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(a!==void 0&&m.push("label:"+a+";"),d[0]==null||d[0].raw===void 0)m.push.apply(m,d);else{var y=d[0];m.push(y[0]);for(var _=d.length,x=1;x<_;x++)m.push(d[x],y[x])}var S=N3(function(T,b,M){var R=f&&T.as||s,A="",I=[],k=T;if(T.theme==null){k={};for(var N in T)k[N]=T[N];k.theme=tt.useContext(u2)}typeof T.className=="string"?A=U9(b.registered,I,T.className):T.className!=null&&(A=T.className+" ");var L=BS(m.concat(I),b.registered,k);A+=b.key+"-"+L.name,o!==void 0&&(A+=" "+o);var U=f&&l===void 0?fB(R):u,O={};for(var F in T)f&&F==="as"||U(F)&&(O[F]=T[F]);return O.className=A,M&&(O.ref=M),tt.createElement(tt.Fragment,null,tt.createElement(kst,{cache:b,serialized:L,isStringTag:typeof R=="string"}),tt.createElement(R,O))});return S.displayName=a!==void 0?a:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",S.defaultProps=e.defaultProps,S.__emotion_real=S,S.__emotion_base=s,S.__emotion_styles=m,S.__emotion_forwardProp=l,Object.defineProperty(S,"toString",{value:function(){return"."+o}}),S.withComponent=function(T,b){var M=i(T,$1({},n,b,{shouldForwardProp:hB(S,b,!0)}));return M.apply(void 0,m)},S}},Bst=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],qD=zst.bind(null);Bst.forEach(function(i){qD[i]=qD(i)});var cI={exports:{}},fI,dB;function Fst(){if(dB)return fI;dB=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return fI=i,fI}var hI,pB;function Vst(){if(pB)return hI;pB=1;var i=Fst();function e(){}function n(){}return n.resetWarningCache=e,hI=function(){function r(o,l,u,f,d,m){if(m!==i){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},hI}var mB;function Hst(){return mB||(mB=1,cI.exports=Vst()()),cI.exports}var Gst=Hst();const It=fm(Gst);function jst(i){return i==null||Object.keys(i).length===0}function qst(i){const{styles:e,defaultTheme:n={}}=i,r=typeof e=="function"?s=>e(jst(s)?n:s):e;return st.jsx(Dst,{styles:r})}/**
 * @mui/styled-engine v6.4.11
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function V9(i,e){return qD(i,e)}function $st(i,e){Array.isArray(i.__emotion_styles)&&(i.__emotion_styles=e(i.__emotion_styles))}const gB=[];function yB(i){return gB[0]=i,BS(gB)}var dI={exports:{}},ji={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vB;function Wst(){if(vB)return ji;vB=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),_=Symbol.for("react.client.reference");function x(S){if(typeof S=="object"&&S!==null){var T=S.$$typeof;switch(T){case i:switch(S=S.type,S){case n:case s:case r:case u:case f:case y:return S;default:switch(S=S&&S.$$typeof,S){case o:case l:case m:case d:return S;case a:return S;default:return T}}case e:return T}}}return ji.ContextConsumer=a,ji.ContextProvider=o,ji.Element=i,ji.ForwardRef=l,ji.Fragment=n,ji.Lazy=m,ji.Memo=d,ji.Portal=e,ji.Profiler=s,ji.StrictMode=r,ji.Suspense=u,ji.SuspenseList=f,ji.isContextConsumer=function(S){return x(S)===a},ji.isContextProvider=function(S){return x(S)===o},ji.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===i},ji.isForwardRef=function(S){return x(S)===l},ji.isFragment=function(S){return x(S)===n},ji.isLazy=function(S){return x(S)===m},ji.isMemo=function(S){return x(S)===d},ji.isPortal=function(S){return x(S)===e},ji.isProfiler=function(S){return x(S)===s},ji.isStrictMode=function(S){return x(S)===r},ji.isSuspense=function(S){return x(S)===u},ji.isSuspenseList=function(S){return x(S)===f},ji.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===s||S===r||S===u||S===f||typeof S=="object"&&S!==null&&(S.$$typeof===m||S.$$typeof===d||S.$$typeof===o||S.$$typeof===a||S.$$typeof===l||S.$$typeof===_||S.getModuleId!==void 0)},ji.typeOf=x,ji}var _B;function Xst(){return _B||(_B=1,dI.exports=Wst()),dI.exports}var H9=Xst();function Tf(i){if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)}function G9(i){if(tt.isValidElement(i)||H9.isValidElementType(i)||!Tf(i))return i;const e={};return Object.keys(i).forEach(n=>{e[n]=G9(i[n])}),e}function Xs(i,e,n={clone:!0}){const r=n.clone?{...i}:i;return Tf(i)&&Tf(e)&&Object.keys(e).forEach(s=>{tt.isValidElement(e[s])||H9.isValidElementType(e[s])?r[s]=e[s]:Tf(e[s])&&Object.prototype.hasOwnProperty.call(i,s)&&Tf(i[s])?r[s]=Xs(i[s],e[s],n):n.clone?r[s]=Tf(e[s])?G9(e[s]):e[s]:r[s]=e[s]}),r}const Yst=i=>{const e=Object.keys(i).map(n=>({key:n,val:i[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function Kst(i){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...s}=i,a=Yst(e),o=Object.keys(a);function l(y){return`@media (min-width:${typeof e[y]=="number"?e[y]:y}${n})`}function u(y){return`@media (max-width:${(typeof e[y]=="number"?e[y]:y)-r/100}${n})`}function f(y,_){const x=o.indexOf(_);return`@media (min-width:${typeof e[y]=="number"?e[y]:y}${n}) and (max-width:${(x!==-1&&typeof e[o[x]]=="number"?e[o[x]]:_)-r/100}${n})`}function d(y){return o.indexOf(y)+1<o.length?f(y,o[o.indexOf(y)+1]):l(y)}function m(y){const _=o.indexOf(y);return _===0?l(o[1]):_===o.length-1?u(o[_]):f(y,o[o.indexOf(y)+1]).replace("@media","@media not all and")}return{keys:o,values:a,up:l,down:u,between:f,only:d,not:m,unit:n,...s}}function Zst(i,e){if(!i.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,s)=>{var o,l;const a=/min-width:\s*([0-9.]+)/;return+(((o=r.match(a))==null?void 0:o[1])||0)-+(((l=s.match(a))==null?void 0:l[1])||0)});return n.length?n.reduce((r,s)=>{const a=e[s];return delete r[s],r[s]=a,r},{...e}):e}function Qst(i,e){return e==="@"||e.startsWith("@")&&(i.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function Jst(i,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,s]=n,a=Number.isNaN(+r)?r||0:+r;return i.containerQueries(s).up(a)}function tat(i){const e=(a,o)=>a.replace("@media",o?`@container ${o}`:"@container");function n(a,o){a.up=(...l)=>e(i.breakpoints.up(...l),o),a.down=(...l)=>e(i.breakpoints.down(...l),o),a.between=(...l)=>e(i.breakpoints.between(...l),o),a.only=(...l)=>e(i.breakpoints.only(...l),o),a.not=(...l)=>{const u=e(i.breakpoints.not(...l),o);return u.includes("not all and")?u.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):u}}const r={},s=a=>(n(r,a),r);return n(s),{...i,containerQueries:s}}const eat={borderRadius:4};function l1(i,e){return e?Xs(i,e,{clone:!1}):i}const c2={xs:0,sm:600,md:900,lg:1200,xl:1536},bB={keys:["xs","sm","md","lg","xl"],up:i=>`@media (min-width:${c2[i]}px)`},nat={containerQueries:i=>({up:e=>{let n=typeof e=="number"?e:c2[e]||e;return typeof n=="number"&&(n=`${n}px`),i?`@container ${i} (min-width:${n})`:`@container (min-width:${n})`}})};function xc(i,e,n){const r=i.theme||{};if(Array.isArray(e)){const a=r.breakpoints||bB;return e.reduce((o,l,u)=>(o[a.up(a.keys[u])]=n(e[u]),o),{})}if(typeof e=="object"){const a=r.breakpoints||bB;return Object.keys(e).reduce((o,l)=>{if(Qst(a.keys,l)){const u=Jst(r.containerQueries?r:nat,l);u&&(o[u]=n(e[l],l))}else if(Object.keys(a.values||c2).includes(l)){const u=a.up(l);o[u]=n(e[l],l)}else{const u=l;o[u]=e[u]}return o},{})}return n(e)}function j9(i={}){var n;return((n=i.keys)==null?void 0:n.reduce((r,s)=>{const a=i.up(s);return r[a]={},r},{}))||{}}function q9(i,e){return i.reduce((n,r)=>{const s=n[r];return(!s||Object.keys(s).length===0)&&delete n[r],n},e)}function iat(i,...e){const n=j9(i),r=[n,...e].reduce((s,a)=>Xs(s,a),{});return q9(Object.keys(n),r)}function rat(i,e){if(typeof i!="object")return{};const n={},r=Object.keys(e);return Array.isArray(i)?r.forEach((s,a)=>{a<i.length&&(n[s]=!0)}):r.forEach(s=>{i[s]!=null&&(n[s]=!0)}),n}function pI({values:i,breakpoints:e,base:n}){const r=n||rat(i,e),s=Object.keys(r);if(s.length===0)return i;let a;return s.reduce((o,l,u)=>(Array.isArray(i)?(o[l]=i[u]!=null?i[u]:i[a],a=u):typeof i=="object"?(o[l]=i[l]!=null?i[l]:i[a],a=l):o[l]=i,o),{})}function Fe(i){if(typeof i!="string")throw new Error(pd(7));return i.charAt(0).toUpperCase()+i.slice(1)}function f2(i,e,n=!0){if(!e||typeof e!="string")return null;if(i&&i.vars&&n){const r=`vars.${e}`.split(".").reduce((s,a)=>s&&s[a]?s[a]:null,i);if(r!=null)return r}return e.split(".").reduce((r,s)=>r&&r[s]!=null?r[s]:null,i)}function SM(i,e,n,r=n){let s;return typeof i=="function"?s=i(n):Array.isArray(i)?s=i[n]||r:s=f2(i,n)||r,e&&(s=e(s,r,i)),s}function as(i){const{prop:e,cssProperty:n=i.prop,themeKey:r,transform:s}=i,a=o=>{if(o[e]==null)return null;const l=o[e],u=o.theme,f=f2(u,r)||{};return xc(o,l,m=>{let y=SM(f,s,m);return m===y&&typeof m=="string"&&(y=SM(f,s,`${e}${m==="default"?"":Fe(m)}`,m)),n===!1?y:{[n]:y}})};return a.propTypes={},a.filterProps=[e],a}function sat(i){const e={};return n=>(e[n]===void 0&&(e[n]=i(n)),e[n])}const aat={m:"margin",p:"padding"},oat={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},xB={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},lat=sat(i=>{if(i.length>2)if(xB[i])i=xB[i];else return[i];const[e,n]=i.split(""),r=aat[e],s=oat[n]||"";return Array.isArray(s)?s.map(a=>r+a):[r+s]}),U3=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],k3=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...U3,...k3];function FS(i,e,n,r){const s=f2(i,e,!0)??n;return typeof s=="number"||typeof s=="string"?a=>typeof a=="string"?a:typeof s=="string"?`calc(${a} * ${s})`:s*a:Array.isArray(s)?a=>{if(typeof a=="string")return a;const o=Math.abs(a),l=s[o];return a>=0?l:typeof l=="number"?-l:`-${l}`}:typeof s=="function"?s:()=>{}}function h2(i){return FS(i,"spacing",8)}function hy(i,e){return typeof e=="string"||e==null?e:i(e)}function uat(i,e){return n=>i.reduce((r,s)=>(r[s]=hy(e,n),r),{})}function cat(i,e,n,r){if(!e.includes(n))return null;const s=lat(n),a=uat(s,r),o=i[n];return xc(i,o,a)}function $9(i,e){const n=h2(i.theme);return Object.keys(i).map(r=>cat(i,e,r,n)).reduce(l1,{})}function Gr(i){return $9(i,U3)}Gr.propTypes={};Gr.filterProps=U3;function jr(i){return $9(i,k3)}jr.propTypes={};jr.filterProps=k3;function W9(i=8,e=h2({spacing:i})){if(i.mui)return i;const n=(...r)=>(r.length===0?[1]:r).map(a=>{const o=e(a);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function d2(...i){const e=i.reduce((r,s)=>(s.filterProps.forEach(a=>{r[a]=s}),r),{}),n=r=>Object.keys(r).reduce((s,a)=>e[a]?l1(s,e[a](r)):s,{});return n.propTypes={},n.filterProps=i.reduce((r,s)=>r.concat(s.filterProps),[]),n}function vu(i){return typeof i!="number"?i:`${i}px solid`}function Ru(i,e){return as({prop:i,themeKey:"borders",transform:e})}const fat=Ru("border",vu),hat=Ru("borderTop",vu),dat=Ru("borderRight",vu),pat=Ru("borderBottom",vu),mat=Ru("borderLeft",vu),gat=Ru("borderColor"),yat=Ru("borderTopColor"),vat=Ru("borderRightColor"),_at=Ru("borderBottomColor"),bat=Ru("borderLeftColor"),xat=Ru("outline",vu),Sat=Ru("outlineColor"),p2=i=>{if(i.borderRadius!==void 0&&i.borderRadius!==null){const e=FS(i.theme,"shape.borderRadius",4),n=r=>({borderRadius:hy(e,r)});return xc(i,i.borderRadius,n)}return null};p2.propTypes={};p2.filterProps=["borderRadius"];d2(fat,hat,dat,pat,mat,gat,yat,vat,_at,bat,p2,xat,Sat);const m2=i=>{if(i.gap!==void 0&&i.gap!==null){const e=FS(i.theme,"spacing",8),n=r=>({gap:hy(e,r)});return xc(i,i.gap,n)}return null};m2.propTypes={};m2.filterProps=["gap"];const g2=i=>{if(i.columnGap!==void 0&&i.columnGap!==null){const e=FS(i.theme,"spacing",8),n=r=>({columnGap:hy(e,r)});return xc(i,i.columnGap,n)}return null};g2.propTypes={};g2.filterProps=["columnGap"];const y2=i=>{if(i.rowGap!==void 0&&i.rowGap!==null){const e=FS(i.theme,"spacing",8),n=r=>({rowGap:hy(e,r)});return xc(i,i.rowGap,n)}return null};y2.propTypes={};y2.filterProps=["rowGap"];const Eat=as({prop:"gridColumn"}),Tat=as({prop:"gridRow"}),wat=as({prop:"gridAutoFlow"}),Aat=as({prop:"gridAutoColumns"}),Mat=as({prop:"gridAutoRows"}),Cat=as({prop:"gridTemplateColumns"}),Rat=as({prop:"gridTemplateRows"}),Oat=as({prop:"gridTemplateAreas"}),Iat=as({prop:"gridArea"});d2(m2,g2,y2,Eat,Tat,wat,Aat,Mat,Cat,Rat,Oat,Iat);function N0(i,e){return e==="grey"?e:i}const Dat=as({prop:"color",themeKey:"palette",transform:N0}),Pat=as({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:N0}),Nat=as({prop:"backgroundColor",themeKey:"palette",transform:N0});d2(Dat,Pat,Nat);function Pl(i){return i<=1&&i!==0?`${i*100}%`:i}const Lat=as({prop:"width",transform:Pl}),z3=i=>{if(i.maxWidth!==void 0&&i.maxWidth!==null){const e=n=>{var s,a,o,l,u;const r=((o=(a=(s=i.theme)==null?void 0:s.breakpoints)==null?void 0:a.values)==null?void 0:o[n])||c2[n];return r?((u=(l=i.theme)==null?void 0:l.breakpoints)==null?void 0:u.unit)!=="px"?{maxWidth:`${r}${i.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:Pl(n)}};return xc(i,i.maxWidth,e)}return null};z3.filterProps=["maxWidth"];const Uat=as({prop:"minWidth",transform:Pl}),kat=as({prop:"height",transform:Pl}),zat=as({prop:"maxHeight",transform:Pl}),Bat=as({prop:"minHeight",transform:Pl});as({prop:"size",cssProperty:"width",transform:Pl});as({prop:"size",cssProperty:"height",transform:Pl});const Fat=as({prop:"boxSizing"});d2(Lat,z3,Uat,kat,zat,Bat,Fat);const VS={border:{themeKey:"borders",transform:vu},borderTop:{themeKey:"borders",transform:vu},borderRight:{themeKey:"borders",transform:vu},borderBottom:{themeKey:"borders",transform:vu},borderLeft:{themeKey:"borders",transform:vu},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:vu},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:p2},color:{themeKey:"palette",transform:N0},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:N0},backgroundColor:{themeKey:"palette",transform:N0},p:{style:jr},pt:{style:jr},pr:{style:jr},pb:{style:jr},pl:{style:jr},px:{style:jr},py:{style:jr},padding:{style:jr},paddingTop:{style:jr},paddingRight:{style:jr},paddingBottom:{style:jr},paddingLeft:{style:jr},paddingX:{style:jr},paddingY:{style:jr},paddingInline:{style:jr},paddingInlineStart:{style:jr},paddingInlineEnd:{style:jr},paddingBlock:{style:jr},paddingBlockStart:{style:jr},paddingBlockEnd:{style:jr},m:{style:Gr},mt:{style:Gr},mr:{style:Gr},mb:{style:Gr},ml:{style:Gr},mx:{style:Gr},my:{style:Gr},margin:{style:Gr},marginTop:{style:Gr},marginRight:{style:Gr},marginBottom:{style:Gr},marginLeft:{style:Gr},marginX:{style:Gr},marginY:{style:Gr},marginInline:{style:Gr},marginInlineStart:{style:Gr},marginInlineEnd:{style:Gr},marginBlock:{style:Gr},marginBlockStart:{style:Gr},marginBlockEnd:{style:Gr},displayPrint:{cssProperty:!1,transform:i=>({"@media print":{display:i}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:m2},rowGap:{style:y2},columnGap:{style:g2},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Pl},maxWidth:{style:z3},minWidth:{transform:Pl},height:{transform:Pl},maxHeight:{transform:Pl},minHeight:{transform:Pl},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Vat(...i){const e=i.reduce((r,s)=>r.concat(Object.keys(s)),[]),n=new Set(e);return i.every(r=>n.size===Object.keys(r).length)}function Hat(i,e){return typeof i=="function"?i(e):i}function Gat(){function i(n,r,s,a){const o={[n]:r,theme:s},l=a[n];if(!l)return{[n]:r};const{cssProperty:u=n,themeKey:f,transform:d,style:m}=l;if(r==null)return null;if(f==="typography"&&r==="inherit")return{[n]:r};const y=f2(s,f)||{};return m?m(o):xc(o,r,x=>{let S=SM(y,d,x);return x===S&&typeof x=="string"&&(S=SM(y,d,`${n}${x==="default"?"":Fe(x)}`,x)),u===!1?S:{[u]:S}})}function e(n){const{sx:r,theme:s={}}=n||{};if(!r)return null;const a=s.unstable_sxConfig??VS;function o(l){let u=l;if(typeof l=="function")u=l(s);else if(typeof l!="object")return l;if(!u)return null;const f=j9(s.breakpoints),d=Object.keys(f);let m=f;return Object.keys(u).forEach(y=>{const _=Hat(u[y],s);if(_!=null)if(typeof _=="object")if(a[y])m=l1(m,i(y,_,s,a));else{const x=xc({theme:s},_,S=>({[y]:S}));Vat(x,_)?m[y]=e({sx:_,theme:s}):m=l1(m,x)}else m=l1(m,i(y,_,s,a))}),Zst(s,q9(d,m))}return Array.isArray(r)?r.map(o):o(r)}return e}const dy=Gat();dy.filterProps=["sx"];function jat(i,e){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[i])||typeof n.getColorSchemeSelector!="function")return{};let s=n.getColorSchemeSelector(i);return s==="&"?e:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:e})}return n.palette.mode===i?e:{}}function HS(i={},...e){const{breakpoints:n={},palette:r={},spacing:s,shape:a={},...o}=i,l=Kst(n),u=W9(s);let f=Xs({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:u,shape:{...eat,...a}},o);return f=tat(f),f.applyStyles=jat,f=e.reduce((d,m)=>Xs(d,m),f),f.unstable_sxConfig={...VS,...o==null?void 0:o.unstable_sxConfig},f.unstable_sx=function(m){return dy({sx:m,theme:this})},f}function qat(i){return Object.keys(i).length===0}function $at(i=null){const e=tt.useContext(u2);return!e||qat(e)?i:e}const Wat=HS();function v2(i=Wat){return $at(i)}function Xat({styles:i,themeId:e,defaultTheme:n={}}){const r=v2(n),s=typeof i=="function"?i(e&&r[e]||r):i;return st.jsx(qst,{styles:s})}const Yat=i=>{var r;const e={systemProps:{},otherProps:{}},n=((r=i==null?void 0:i.theme)==null?void 0:r.unstable_sxConfig)??VS;return Object.keys(i).forEach(s=>{n[s]?e.systemProps[s]=i[s]:e.otherProps[s]=i[s]}),e};function B3(i){const{sx:e,...n}=i,{systemProps:r,otherProps:s}=Yat(n);let a;return Array.isArray(e)?a=[r,...e]:typeof e=="function"?a=(...o)=>{const l=e(...o);return Tf(l)?{...r,...l}:r}:a={...r,...e},{...s,sx:a}}const SB=i=>i,Kat=()=>{let i=SB;return{configure(e){i=e},generate(e){return i(e)},reset(){i=SB}}},X9=Kat();function Y9(i){var e,n,r="";if(typeof i=="string"||typeof i=="number")r+=i;else if(typeof i=="object")if(Array.isArray(i)){var s=i.length;for(e=0;e<s;e++)i[e]&&(n=Y9(i[e]))&&(r&&(r+=" "),r+=n)}else for(n in i)i[n]&&(r&&(r+=" "),r+=n);return r}function je(){for(var i,e,n=0,r="",s=arguments.length;n<s;n++)(i=arguments[n])&&(e=Y9(i))&&(r&&(r+=" "),r+=e);return r}function Zat(i={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:s}=i,a=V9("div",{shouldForwardProp:l=>l!=="theme"&&l!=="sx"&&l!=="as"})(dy);return tt.forwardRef(function(u,f){const d=v2(n),{className:m,component:y="div",..._}=B3(u);return st.jsx(a,{as:y,ref:f,className:je(m,s?s(r):r),theme:e&&d[e]||d,..._})})}const Qat={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Tn(i,e,n="Mui"){const r=Qat[e];return r?`${n}-${r}`:`${X9.generate(i)}-${e}`}function _n(i,e,n="Mui"){const r={};return e.forEach(s=>{r[s]=Tn(i,s,n)}),r}function K9(i){const{variants:e,...n}=i,r={variants:e,style:yB(n),isProcessed:!0};return r.style===n||e&&e.forEach(s=>{typeof s.style!="function"&&(s.style=yB(s.style))}),r}const Jat=HS();function mI(i){return i!=="ownerState"&&i!=="theme"&&i!=="sx"&&i!=="as"}function tot(i){return i?(e,n)=>n[i]:null}function eot(i,e,n){i.theme=iot(i.theme)?n:i.theme[e]||i.theme}function lA(i,e){const n=typeof e=="function"?e(i):e;if(Array.isArray(n))return n.flatMap(r=>lA(i,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:s,...a}=n;r=a}return Z9(i,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function Z9(i,e,n=[]){var s;let r;t:for(let a=0;a<e.length;a+=1){const o=e[a];if(typeof o.props=="function"){if(r??(r={...i,...i.ownerState,ownerState:i.ownerState}),!o.props(r))continue}else for(const l in o.props)if(i[l]!==o.props[l]&&((s=i.ownerState)==null?void 0:s[l])!==o.props[l])continue t;typeof o.style=="function"?(r??(r={...i,...i.ownerState,ownerState:i.ownerState}),n.push(o.style(r))):n.push(o.style)}return n}function Q9(i={}){const{themeId:e,defaultTheme:n=Jat,rootShouldForwardProp:r=mI,slotShouldForwardProp:s=mI}=i;function a(l){eot(l,e,n)}return(l,u={})=>{$st(l,I=>I.filter(k=>k!==dy));const{name:f,slot:d,skipVariantsResolver:m,skipSx:y,overridesResolver:_=tot(sot(d)),...x}=u,S=m!==void 0?m:d&&d!=="Root"&&d!=="root"||!1,T=y||!1;let b=mI;d==="Root"||d==="root"?b=r:d?b=s:rot(l)&&(b=void 0);const M=V9(l,{shouldForwardProp:b,label:not(),...x}),R=I=>{if(typeof I=="function"&&I.__emotion_real!==I)return function(N){return lA(N,I)};if(Tf(I)){const k=K9(I);return k.variants?function(L){return lA(L,k)}:k.style}return I},A=(...I)=>{const k=[],N=I.map(R),L=[];if(k.push(a),f&&_&&L.push(function(H){var q,W;const X=(W=(q=H.theme.components)==null?void 0:q[f])==null?void 0:W.styleOverrides;if(!X)return null;const J={};for(const K in X)J[K]=lA(H,X[K]);return _(H,J)}),f&&!S&&L.push(function(H){var J,q;const V=H.theme,X=(q=(J=V==null?void 0:V.components)==null?void 0:J[f])==null?void 0:q.variants;return X?Z9(H,X):null}),T||L.push(dy),Array.isArray(N[0])){const F=N.shift(),H=new Array(k.length).fill(""),V=new Array(L.length).fill("");let X;X=[...H,...F,...V],X.raw=[...H,...F.raw,...V],k.unshift(X)}const U=[...k,...N,...L],O=M(...U);return l.muiName&&(O.muiName=l.muiName),O};return M.withConfig&&(A.withConfig=M.withConfig),A}}function not(i,e){return void 0}function iot(i){for(const e in i)return!1;return!0}function rot(i){return typeof i=="string"&&i.charCodeAt(0)>96}function sot(i){return i&&i.charAt(0).toLowerCase()+i.slice(1)}const aot=Q9();function K1(i,e){const n={...e};for(const r in i)if(Object.prototype.hasOwnProperty.call(i,r)){const s=r;if(s==="components"||s==="slots")n[s]={...i[s],...n[s]};else if(s==="componentsProps"||s==="slotProps"){const a=i[s],o=e[s];if(!o)n[s]=a||{};else if(!a)n[s]=o;else{n[s]={...o};for(const l in a)if(Object.prototype.hasOwnProperty.call(a,l)){const u=l;n[s][u]=K1(a[u],o[u])}}}else n[s]===void 0&&(n[s]=i[s])}return n}function oot(i){const{theme:e,name:n,props:r}=i;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:K1(e.components[n].defaultProps,r)}function lot({props:i,name:e,defaultTheme:n,themeId:r}){let s=v2(n);return r&&(s=s[r]||s),oot({theme:s,name:e,props:i})}const Hf=typeof window<"u"?tt.useLayoutEffect:tt.useEffect;function uot(i,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(i,n))}function F3(i,e=0,n=1){return uot(i,e,n)}function cot(i){i=i.slice(1);const e=new RegExp(`.{1,${i.length>=6?2:1}}`,"g");let n=i.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,s)=>s<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function em(i){if(i.type)return i;if(i.charAt(0)==="#")return em(cot(i));const e=i.indexOf("("),n=i.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(pd(9,i));let r=i.substring(e+1,i.length-1),s;if(n==="color"){if(r=r.split(" "),s=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(pd(10,s))}else r=r.split(",");return r=r.map(a=>parseFloat(a)),{type:n,values:r,colorSpace:s}}const fot=i=>{const e=em(i);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},zx=(i,e)=>{try{return fot(i)}catch{return i}};function _2(i){const{type:e,colorSpace:n}=i;let{values:r}=i;return e.includes("rgb")?r=r.map((s,a)=>a<3?parseInt(s,10):s):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function J9(i){i=em(i);const{values:e}=i,n=e[0],r=e[1]/100,s=e[2]/100,a=r*Math.min(s,1-s),o=(f,d=(f+n/30)%12)=>s-a*Math.max(Math.min(d-3,9-d,1),-1);let l="rgb";const u=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return i.type==="hsla"&&(l+="a",u.push(e[3])),_2({type:l,values:u})}function $D(i){i=em(i);let e=i.type==="hsl"||i.type==="hsla"?em(J9(i)).values:i.values;return e=e.map(n=>(i.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function hot(i,e){const n=$D(i),r=$D(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Os(i,e){return i=em(i),e=F3(e),(i.type==="rgb"||i.type==="hsl")&&(i.type+="a"),i.type==="color"?i.values[3]=`/${e}`:i.values[3]=e,_2(i)}function yw(i,e,n){try{return Os(i,e)}catch{return i}}function J0(i,e){if(i=em(i),e=F3(e),i.type.includes("hsl"))i.values[2]*=1-e;else if(i.type.includes("rgb")||i.type.includes("color"))for(let n=0;n<3;n+=1)i.values[n]*=1-e;return _2(i)}function Yi(i,e,n){try{return J0(i,e)}catch{return i}}function t_(i,e){if(i=em(i),e=F3(e),i.type.includes("hsl"))i.values[2]+=(100-i.values[2])*e;else if(i.type.includes("rgb"))for(let n=0;n<3;n+=1)i.values[n]+=(255-i.values[n])*e;else if(i.type.includes("color"))for(let n=0;n<3;n+=1)i.values[n]+=(1-i.values[n])*e;return _2(i)}function Ki(i,e,n){try{return t_(i,e)}catch{return i}}function dot(i,e=.15){return $D(i)>.5?J0(i,e):t_(i,e)}function vw(i,e,n){try{return dot(i,e)}catch{return i}}function WD(...i){return i.reduce((e,n)=>n==null?e:function(...s){e.apply(this,s),n.apply(this,s)},()=>{})}function V3(i,e=166){let n;function r(...s){const a=()=>{i.apply(this,s)};clearTimeout(n),n=setTimeout(a,e)}return r.clear=()=>{clearTimeout(n)},r}function gI(i,e){var n,r,s;return tt.isValidElement(i)&&e.indexOf(i.type.muiName??((s=(r=(n=i.type)==null?void 0:n._payload)==null?void 0:r.value)==null?void 0:s.muiName))!==-1}function Fl(i){return i&&i.ownerDocument||document}function Sc(i){return Fl(i).defaultView||window}function EB(i,e){typeof i=="function"?i(e):i&&(i.current=e)}let TB=0;function pot(i){const[e,n]=tt.useState(i),r=i||e;return tt.useEffect(()=>{e==null&&(TB+=1,n(`mui-${TB}`))},[e]),r}const mot={..._D},wB=mot.useId;function N_(i){if(wB!==void 0){const e=wB();return i??e}return pot(i)}function Z1({controlled:i,default:e,name:n,state:r="value"}){const{current:s}=tt.useRef(i!==void 0),[a,o]=tt.useState(e),l=s?i:a,u=tt.useCallback(f=>{s||o(f)},[]);return[l,u]}function ad(i){const e=tt.useRef(i);return Hf(()=>{e.current=i}),tt.useRef((...n)=>(0,e.current)(...n)).current}function ss(...i){const e=tt.useRef(void 0),n=tt.useCallback(r=>{const s=i.map(a=>{if(a==null)return null;if(typeof a=="function"){const o=a,l=o(r);return typeof l=="function"?l:()=>{o(null)}}return a.current=r,()=>{a.current=null}});return()=>{s.forEach(a=>a==null?void 0:a())}},i);return tt.useMemo(()=>i.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},i)}const AB={};function tG(i,e){const n=tt.useRef(AB);return n.current===AB&&(n.current=i(e)),n}const got=[];function yot(i){tt.useEffect(i,got)}class b2{constructor(){jb(this,"currentId",null);jb(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});jb(this,"disposeEffect",()=>this.clear)}static create(){return new b2}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function Fg(){const i=tG(b2.create).current;return yot(i.disposeEffect),i}function EM(i){try{return i.matches(":focus-visible")}catch{}return!1}function eG(i=window){const e=i.document.documentElement.clientWidth;return i.innerWidth-e}function wn(i,e,n=void 0){const r={};for(const s in i){const a=i[s];let o="",l=!0;for(let u=0;u<a.length;u+=1){const f=a[u];f&&(o+=(l===!0?"":" ")+e(f),l=!1,n&&n[f]&&(o+=" "+n[f]))}r[s]=o}return r}function vot(i){return typeof i=="string"}function nG(i,e,n){return i===void 0||vot(i)?e:{...e,ownerState:{...e.ownerState,...n}}}function iG(i,e=[]){if(i===void 0)return{};const n={};return Object.keys(i).filter(r=>r.match(/^on[A-Z]/)&&typeof i[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=i[r]}),n}function MB(i){if(i===void 0)return{};const e={};return Object.keys(i).filter(n=>!(n.match(/^on[A-Z]/)&&typeof i[n]=="function")).forEach(n=>{e[n]=i[n]}),e}function rG(i){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:s,className:a}=i;if(!e){const _=je(n==null?void 0:n.className,a,s==null?void 0:s.className,r==null?void 0:r.className),x={...n==null?void 0:n.style,...s==null?void 0:s.style,...r==null?void 0:r.style},S={...n,...s,...r};return _.length>0&&(S.className=_),Object.keys(x).length>0&&(S.style=x),{props:S,internalRef:void 0}}const o=iG({...s,...r}),l=MB(r),u=MB(s),f=e(o),d=je(f==null?void 0:f.className,n==null?void 0:n.className,a,s==null?void 0:s.className,r==null?void 0:r.className),m={...f==null?void 0:f.style,...n==null?void 0:n.style,...s==null?void 0:s.style,...r==null?void 0:r.style},y={...f,...n,...u,...l};return d.length>0&&(y.className=d),Object.keys(m).length>0&&(y.style=m),{props:y,internalRef:f.ref}}function sG(i,e,n){return typeof i=="function"?i(e,n):i}function aG(i){var m;const{elementType:e,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:s=!1,...a}=i,o=s?{}:sG(n,r),{props:l,internalRef:u}=rG({...a,externalSlotProps:o}),f=ss(u,o==null?void 0:o.ref,(m=i.additionalProps)==null?void 0:m.ref);return nG(e,{...l,ref:f},r)}function My(i){var e;return parseInt(tt.version,10)>=19?((e=i==null?void 0:i.props)==null?void 0:e.ref)||null:(i==null?void 0:i.ref)||null}const _ot=tt.createContext(),x2=()=>tt.useContext(_ot)??!1,bot=tt.createContext(void 0);function xot(i){const{theme:e,name:n,props:r}=i;if(!e||!e.components||!e.components[n])return r;const s=e.components[n];return s.defaultProps?K1(s.defaultProps,r):!s.styleOverrides&&!s.variants?K1(s,r):r}function Sot({props:i,name:e}){const n=tt.useContext(bot);return xot({props:i,name:e,theme:{components:n}})}const CB={theme:void 0};function Eot(i){let e,n;return function(s){let a=e;return(a===void 0||s.theme!==n)&&(CB.theme=s.theme,a=K9(i(CB)),e=a,n=s.theme),a}}function Tot(i=""){function e(...r){if(!r.length)return"";const s=r[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${i?`${i}-`:""}${s}${e(...r.slice(1))})`:`, ${s}`}return(r,...s)=>`var(--${i?`${i}-`:""}${r}${e(...s)})`}const RB=(i,e,n,r=[])=>{let s=i;e.forEach((a,o)=>{o===e.length-1?Array.isArray(s)?s[Number(a)]=n:s&&typeof s=="object"&&(s[a]=n):s&&typeof s=="object"&&(s[a]||(s[a]=r.includes(a)?[]:{}),s=s[a])})},wot=(i,e,n)=>{function r(s,a=[],o=[]){Object.entries(s).forEach(([l,u])=>{(!n||n&&!n([...a,l]))&&u!=null&&(typeof u=="object"&&Object.keys(u).length>0?r(u,[...a,l],Array.isArray(u)?[...o,l]:o):e([...a,l],u,o))})}r(i)},Aot=(i,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>i.includes(r))||i[i.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function yI(i,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},s={},a={},o={};return wot(i,(l,u,f)=>{if((typeof u=="string"||typeof u=="number")&&(!r||!r(l,u))){const d=`--${n?`${n}-`:""}${l.join("-")}`,m=Aot(l,u);Object.assign(s,{[d]:m}),RB(a,l,`var(${d})`,f),RB(o,l,`var(${d}, ${m})`,f)}},l=>l[0]==="vars"),{css:s,vars:a,varsWithDefaults:o}}function Mot(i,e={}){const{getSelector:n=T,disableCssColorScheme:r,colorSchemeSelector:s}=e,{colorSchemes:a={},components:o,defaultColorScheme:l="light",...u}=i,{vars:f,css:d,varsWithDefaults:m}=yI(u,e);let y=m;const _={},{[l]:x,...S}=a;if(Object.entries(S||{}).forEach(([R,A])=>{const{vars:I,css:k,varsWithDefaults:N}=yI(A,e);y=Xs(y,N),_[R]={css:k,vars:I}}),x){const{css:R,vars:A,varsWithDefaults:I}=yI(x,e);y=Xs(y,I),_[l]={css:R,vars:A}}function T(R,A){var k,N;let I=s;if(s==="class"&&(I=".%s"),s==="data"&&(I="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(I=`[${s}="%s"]`),R){if(I==="media")return i.defaultColorScheme===R?":root":{[`@media (prefers-color-scheme: ${((N=(k=a[R])==null?void 0:k.palette)==null?void 0:N.mode)||R})`]:{":root":A}};if(I)return i.defaultColorScheme===R?`:root, ${I.replace("%s",String(R))}`:I.replace("%s",String(R))}return":root"}return{vars:y,generateThemeVars:()=>{let R={...f};return Object.entries(_).forEach(([,{vars:A}])=>{R=Xs(R,A)}),R},generateStyleSheets:()=>{var L,U;const R=[],A=i.defaultColorScheme||"light";function I(O,F){Object.keys(F).length&&R.push(typeof O=="string"?{[O]:{...F}}:O)}I(n(void 0,{...d}),d);const{[A]:k,...N}=_;if(k){const{css:O}=k,F=(U=(L=a[A])==null?void 0:L.palette)==null?void 0:U.mode,H=!r&&F?{colorScheme:F,...O}:{...O};I(n(A,{...H}),H)}return Object.entries(N).forEach(([O,{css:F}])=>{var X,J;const H=(J=(X=a[O])==null?void 0:X.palette)==null?void 0:J.mode,V=!r&&H?{colorScheme:H,...F}:{...F};I(n(O,{...V}),V)}),R}}}function Cot(i){return function(n){return i==="media"?`@media (prefers-color-scheme: ${n})`:i?i.startsWith("data-")&&!i.includes("%s")?`[${i}="${n}"] &`:i==="class"?`.${n} &`:i==="data"?`[data-${n}] &`:`${i.replace("%s",n)} &`:"&"}}const Rot=HS(),Oot=aot("div",{name:"MuiStack",slot:"Root",overridesResolver:(i,e)=>e.root});function Iot(i){return lot({props:i,name:"MuiStack",defaultTheme:Rot})}function Dot(i,e){const n=tt.Children.toArray(i).filter(Boolean);return n.reduce((r,s,a)=>(r.push(s),a<n.length-1&&r.push(tt.cloneElement(e,{key:`separator-${a}`})),r),[])}const Pot=i=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[i],Not=({ownerState:i,theme:e})=>{let n={display:"flex",flexDirection:"column",...xc({theme:e},pI({values:i.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r}))};if(i.spacing){const r=h2(e),s=Object.keys(e.breakpoints.values).reduce((u,f)=>((typeof i.spacing=="object"&&i.spacing[f]!=null||typeof i.direction=="object"&&i.direction[f]!=null)&&(u[f]=!0),u),{}),a=pI({values:i.direction,base:s}),o=pI({values:i.spacing,base:s});typeof a=="object"&&Object.keys(a).forEach((u,f,d)=>{if(!a[u]){const y=f>0?a[d[f-1]]:"column";a[u]=y}}),n=Xs(n,xc({theme:e},o,(u,f)=>i.useFlexGap?{gap:hy(r,u)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Pot(f?a[f]:i.direction)}`]:hy(r,u)}}))}return n=iat(e.breakpoints,n),n};function Lot(i={}){const{createStyledComponent:e=Oot,useThemeProps:n=Iot,componentName:r="MuiStack"}=i,s=()=>wn({root:["root"]},u=>Tn(r,u),{}),a=e(Not);return tt.forwardRef(function(u,f){const d=n(u),m=B3(d),{component:y="div",direction:_="column",spacing:x=0,divider:S,children:T,className:b,useFlexGap:M=!1,...R}=m,A={direction:_,spacing:x,useFlexGap:M},I=s();return st.jsx(a,{as:y,ownerState:A,ref:f,className:je(I.root,b),...R,children:S?Dot(T,S):T})})}const S2="$$material",Q1={black:"#000",white:"#fff"},Uot={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},t0={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},e0={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},fx={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},n0={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},i0={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},r0={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function oG(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Q1.white,default:Q1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const kot=oG();function lG(){return{text:{primary:Q1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Q1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const OB=lG();function IB(i,e,n,r){const s=r.light||r,a=r.dark||r*1.5;i[e]||(i.hasOwnProperty(n)?i[e]=i[n]:e==="light"?i.light=t_(i.main,s):e==="dark"&&(i.dark=J0(i.main,a)))}function zot(i="light"){return i==="dark"?{main:n0[200],light:n0[50],dark:n0[400]}:{main:n0[700],light:n0[400],dark:n0[800]}}function Bot(i="light"){return i==="dark"?{main:t0[200],light:t0[50],dark:t0[400]}:{main:t0[500],light:t0[300],dark:t0[700]}}function Fot(i="light"){return i==="dark"?{main:e0[500],light:e0[300],dark:e0[700]}:{main:e0[700],light:e0[400],dark:e0[800]}}function Vot(i="light"){return i==="dark"?{main:i0[400],light:i0[300],dark:i0[700]}:{main:i0[700],light:i0[500],dark:i0[900]}}function Hot(i="light"){return i==="dark"?{main:r0[400],light:r0[300],dark:r0[700]}:{main:r0[800],light:r0[500],dark:r0[900]}}function Got(i="light"){return i==="dark"?{main:fx[400],light:fx[300],dark:fx[700]}:{main:"#ed6c02",light:fx[500],dark:fx[900]}}function H3(i){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...s}=i,a=i.primary||zot(e),o=i.secondary||Bot(e),l=i.error||Fot(e),u=i.info||Vot(e),f=i.success||Hot(e),d=i.warning||Got(e);function m(S){return hot(S,OB.text.primary)>=n?OB.text.primary:kot.text.primary}const y=({color:S,name:T,mainShade:b=500,lightShade:M=300,darkShade:R=700})=>{if(S={...S},!S.main&&S[b]&&(S.main=S[b]),!S.hasOwnProperty("main"))throw new Error(pd(11,T?` (${T})`:"",b));if(typeof S.main!="string")throw new Error(pd(12,T?` (${T})`:"",JSON.stringify(S.main)));return IB(S,"light",M,r),IB(S,"dark",R,r),S.contrastText||(S.contrastText=m(S.main)),S};let _;return e==="light"?_=oG():e==="dark"&&(_=lG()),Xs({common:{...Q1},mode:e,primary:y({color:a,name:"primary"}),secondary:y({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:y({color:l,name:"error"}),warning:y({color:d,name:"warning"}),info:y({color:u,name:"info"}),success:y({color:f,name:"success"}),grey:Uot,contrastThreshold:n,getContrastText:m,augmentColor:y,tonalOffset:r,..._},s)}function jot(i){const e={};return Object.entries(i).forEach(r=>{const[s,a]=r;typeof a=="object"&&(e[s]=`${a.fontStyle?`${a.fontStyle} `:""}${a.fontVariant?`${a.fontVariant} `:""}${a.fontWeight?`${a.fontWeight} `:""}${a.fontStretch?`${a.fontStretch} `:""}${a.fontSize||""}${a.lineHeight?`/${a.lineHeight} `:""}${a.fontFamily||""}`)}),e}function qot(i,e){return{toolbar:{minHeight:56,[i.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[i.up("sm")]:{minHeight:64}},...e}}function $ot(i){return Math.round(i*1e5)/1e5}const DB={textTransform:"uppercase"},PB='"Roboto", "Helvetica", "Arial", sans-serif';function Wot(i,e){const{fontFamily:n=PB,fontSize:r=14,fontWeightLight:s=300,fontWeightRegular:a=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:u=16,allVariants:f,pxToRem:d,...m}=typeof e=="function"?e(i):e,y=r/14,_=d||(T=>`${T/u*y}rem`),x=(T,b,M,R,A)=>({fontFamily:n,fontWeight:T,fontSize:_(b),lineHeight:M,...n===PB?{letterSpacing:`${$ot(R/b)}em`}:{},...A,...f}),S={h1:x(s,96,1.167,-1.5),h2:x(s,60,1.2,-.5),h3:x(a,48,1.167,0),h4:x(a,34,1.235,.25),h5:x(a,24,1.334,0),h6:x(o,20,1.6,.15),subtitle1:x(a,16,1.75,.15),subtitle2:x(o,14,1.57,.1),body1:x(a,16,1.5,.15),body2:x(a,14,1.43,.15),button:x(o,14,1.75,.4,DB),caption:x(a,12,1.66,.4),overline:x(a,12,2.66,1,DB),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Xs({htmlFontSize:u,pxToRem:_,fontFamily:n,fontSize:r,fontWeightLight:s,fontWeightRegular:a,fontWeightMedium:o,fontWeightBold:l,...S},m,{clone:!1})}const Xot=.2,Yot=.14,Kot=.12;function yr(...i){return[`${i[0]}px ${i[1]}px ${i[2]}px ${i[3]}px rgba(0,0,0,${Xot})`,`${i[4]}px ${i[5]}px ${i[6]}px ${i[7]}px rgba(0,0,0,${Yot})`,`${i[8]}px ${i[9]}px ${i[10]}px ${i[11]}px rgba(0,0,0,${Kot})`].join(",")}const Zot=["none",yr(0,2,1,-1,0,1,1,0,0,1,3,0),yr(0,3,1,-2,0,2,2,0,0,1,5,0),yr(0,3,3,-2,0,3,4,0,0,1,8,0),yr(0,2,4,-1,0,4,5,0,0,1,10,0),yr(0,3,5,-1,0,5,8,0,0,1,14,0),yr(0,3,5,-1,0,6,10,0,0,1,18,0),yr(0,4,5,-2,0,7,10,1,0,2,16,1),yr(0,5,5,-3,0,8,10,1,0,3,14,2),yr(0,5,6,-3,0,9,12,1,0,3,16,2),yr(0,6,6,-3,0,10,14,1,0,4,18,3),yr(0,6,7,-4,0,11,15,1,0,4,20,3),yr(0,7,8,-4,0,12,17,2,0,5,22,4),yr(0,7,8,-4,0,13,19,2,0,5,24,4),yr(0,7,9,-4,0,14,21,2,0,5,26,4),yr(0,8,9,-5,0,15,22,2,0,6,28,5),yr(0,8,10,-5,0,16,24,2,0,6,30,5),yr(0,8,11,-5,0,17,26,2,0,6,32,5),yr(0,9,11,-5,0,18,28,2,0,7,34,6),yr(0,9,12,-6,0,19,29,2,0,7,36,6),yr(0,10,13,-6,0,20,31,3,0,8,38,7),yr(0,10,13,-6,0,21,33,3,0,8,40,7),yr(0,10,14,-6,0,22,35,3,0,8,42,7),yr(0,11,14,-7,0,23,36,3,0,9,44,8),yr(0,11,15,-7,0,24,38,3,0,9,46,8)],Qot={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},uG={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function NB(i){return`${Math.round(i)}ms`}function Jot(i){if(!i)return 0;const e=i/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function tlt(i){const e={...Qot,...i.easing},n={...uG,...i.duration};return{getAutoHeightDuration:Jot,create:(s=["all"],a={})=>{const{duration:o=n.standard,easing:l=e.easeInOut,delay:u=0,...f}=a;return(Array.isArray(s)?s:[s]).map(d=>`${d} ${typeof o=="string"?o:NB(o)} ${l} ${typeof u=="string"?u:NB(u)}`).join(",")},...i,easing:e,duration:n}}const elt={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function nlt(i){return Tf(i)||typeof i>"u"||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||Array.isArray(i)}function cG(i={}){const e={...i};function n(r){const s=Object.entries(r);for(let a=0;a<s.length;a++){const[o,l]=s[a];!nlt(l)||o.startsWith("unstable_")?delete r[o]:Tf(l)&&(r[o]={...l},n(r[o]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function XD(i={},...e){const{breakpoints:n,mixins:r={},spacing:s,palette:a={},transitions:o={},typography:l={},shape:u,...f}=i;if(i.vars&&i.generateThemeVars===void 0)throw new Error(pd(20));const d=H3(a),m=HS(i);let y=Xs(m,{mixins:qot(m.breakpoints,r),palette:d,shadows:Zot.slice(),typography:Wot(d,l),transitions:tlt(o),zIndex:{...elt}});return y=Xs(y,f),y=e.reduce((_,x)=>Xs(_,x),y),y.unstable_sxConfig={...VS,...f==null?void 0:f.unstable_sxConfig},y.unstable_sx=function(x){return dy({sx:x,theme:this})},y.toRuntimeSource=cG,y}function YD(i){let e;return i<1?e=5.11916*i**2:e=4.5*Math.log(i+1)+2,Math.round(e*10)/1e3}const ilt=[...Array(25)].map((i,e)=>{if(e===0)return"none";const n=YD(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function fG(i){return{inputPlaceholder:i==="dark"?.5:.42,inputUnderline:i==="dark"?.7:.42,switchTrackDisabled:i==="dark"?.2:.12,switchTrack:i==="dark"?.3:.38}}function hG(i){return i==="dark"?ilt:[]}function rlt(i){const{palette:e={mode:"light"},opacity:n,overlays:r,...s}=i,a=H3(e);return{palette:a,opacity:{...fG(a.mode),...n},overlays:r||hG(a.mode),...s}}function slt(i){var e;return!!i[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!i[0].match(/sxConfig$/)||i[0]==="palette"&&!!((e=i[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const alt=i=>[...[...Array(25)].map((e,n)=>`--${i?`${i}-`:""}overlays-${n}`),`--${i?`${i}-`:""}palette-AppBar-darkBg`,`--${i?`${i}-`:""}palette-AppBar-darkColor`],olt=i=>(e,n)=>{const r=i.rootSelector||":root",s=i.colorSchemeSelector;let a=s;if(s==="class"&&(a=".%s"),s==="data"&&(a="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(a=`[${s}="%s"]`),i.defaultColorScheme===e){if(e==="dark"){const o={};return alt(i.cssVarPrefix).forEach(l=>{o[l]=n[l],delete n[l]}),a==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:o}}:a?{[a.replace("%s",e)]:o,[`${r}, ${a.replace("%s",e)}`]:n}:{[r]:{...n,...o}}}if(a&&a!=="media")return`${r}, ${a.replace("%s",String(e))}`}else if(e){if(a==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(a)return a.replace("%s",String(e))}return r};function llt(i,e){e.forEach(n=>{i[n]||(i[n]={})})}function ee(i,e,n){!i[e]&&n&&(i[e]=n)}function Bx(i){return typeof i!="string"||!i.startsWith("hsl")?i:J9(i)}function Lh(i,e){`${e}Channel`in i||(i[`${e}Channel`]=zx(Bx(i[e])))}function ult(i){return typeof i=="number"?`${i}px`:typeof i=="string"||typeof i=="function"||Array.isArray(i)?i:"8px"}const pf=i=>{try{return i()}catch{}},clt=(i="mui")=>Tot(i);function vI(i,e,n,r){if(!e)return;e=e===!0?{}:e;const s=r==="dark"?"dark":"light";if(!n){i[r]=rlt({...e,palette:{mode:s,...e==null?void 0:e.palette}});return}const{palette:a,...o}=XD({...n,palette:{mode:s,...e==null?void 0:e.palette}});return i[r]={...e,palette:a,opacity:{...fG(s),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||hG(s)},o}function flt(i={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:s=!1,cssVarPrefix:a="mui",shouldSkipGeneratingVar:o=slt,colorSchemeSelector:l=n.light&&n.dark?"media":void 0,rootSelector:u=":root",...f}=i,d=Object.keys(n)[0],m=r||(n.light&&d!=="light"?"light":d),y=clt(a),{[m]:_,light:x,dark:S,...T}=n,b={...T};let M=_;if((m==="dark"&&!("dark"in n)||m==="light"&&!("light"in n))&&(M=!0),!M)throw new Error(pd(21,m));const R=vI(b,M,f,m);x&&!b.light&&vI(b,x,void 0,"light"),S&&!b.dark&&vI(b,S,void 0,"dark");let A={defaultColorScheme:m,...R,cssVarPrefix:a,colorSchemeSelector:l,rootSelector:u,getCssVar:y,colorSchemes:b,font:{...jot(R.typography),...R.font},spacing:ult(f.spacing)};Object.keys(A.colorSchemes).forEach(U=>{const O=A.colorSchemes[U].palette,F=H=>{const V=H.split("-"),X=V[1],J=V[2];return y(H,O[X][J])};if(O.mode==="light"&&(ee(O.common,"background","#fff"),ee(O.common,"onBackground","#000")),O.mode==="dark"&&(ee(O.common,"background","#000"),ee(O.common,"onBackground","#fff")),llt(O,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),O.mode==="light"){ee(O.Alert,"errorColor",Yi(O.error.light,.6)),ee(O.Alert,"infoColor",Yi(O.info.light,.6)),ee(O.Alert,"successColor",Yi(O.success.light,.6)),ee(O.Alert,"warningColor",Yi(O.warning.light,.6)),ee(O.Alert,"errorFilledBg",F("palette-error-main")),ee(O.Alert,"infoFilledBg",F("palette-info-main")),ee(O.Alert,"successFilledBg",F("palette-success-main")),ee(O.Alert,"warningFilledBg",F("palette-warning-main")),ee(O.Alert,"errorFilledColor",pf(()=>O.getContrastText(O.error.main))),ee(O.Alert,"infoFilledColor",pf(()=>O.getContrastText(O.info.main))),ee(O.Alert,"successFilledColor",pf(()=>O.getContrastText(O.success.main))),ee(O.Alert,"warningFilledColor",pf(()=>O.getContrastText(O.warning.main))),ee(O.Alert,"errorStandardBg",Ki(O.error.light,.9)),ee(O.Alert,"infoStandardBg",Ki(O.info.light,.9)),ee(O.Alert,"successStandardBg",Ki(O.success.light,.9)),ee(O.Alert,"warningStandardBg",Ki(O.warning.light,.9)),ee(O.Alert,"errorIconColor",F("palette-error-main")),ee(O.Alert,"infoIconColor",F("palette-info-main")),ee(O.Alert,"successIconColor",F("palette-success-main")),ee(O.Alert,"warningIconColor",F("palette-warning-main")),ee(O.AppBar,"defaultBg",F("palette-grey-100")),ee(O.Avatar,"defaultBg",F("palette-grey-400")),ee(O.Button,"inheritContainedBg",F("palette-grey-300")),ee(O.Button,"inheritContainedHoverBg",F("palette-grey-A100")),ee(O.Chip,"defaultBorder",F("palette-grey-400")),ee(O.Chip,"defaultAvatarColor",F("palette-grey-700")),ee(O.Chip,"defaultIconColor",F("palette-grey-700")),ee(O.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ee(O.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ee(O.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ee(O.LinearProgress,"primaryBg",Ki(O.primary.main,.62)),ee(O.LinearProgress,"secondaryBg",Ki(O.secondary.main,.62)),ee(O.LinearProgress,"errorBg",Ki(O.error.main,.62)),ee(O.LinearProgress,"infoBg",Ki(O.info.main,.62)),ee(O.LinearProgress,"successBg",Ki(O.success.main,.62)),ee(O.LinearProgress,"warningBg",Ki(O.warning.main,.62)),ee(O.Skeleton,"bg",`rgba(${F("palette-text-primaryChannel")} / 0.11)`),ee(O.Slider,"primaryTrack",Ki(O.primary.main,.62)),ee(O.Slider,"secondaryTrack",Ki(O.secondary.main,.62)),ee(O.Slider,"errorTrack",Ki(O.error.main,.62)),ee(O.Slider,"infoTrack",Ki(O.info.main,.62)),ee(O.Slider,"successTrack",Ki(O.success.main,.62)),ee(O.Slider,"warningTrack",Ki(O.warning.main,.62));const H=vw(O.background.default,.8);ee(O.SnackbarContent,"bg",H),ee(O.SnackbarContent,"color",pf(()=>O.getContrastText(H))),ee(O.SpeedDialAction,"fabHoverBg",vw(O.background.paper,.15)),ee(O.StepConnector,"border",F("palette-grey-400")),ee(O.StepContent,"border",F("palette-grey-400")),ee(O.Switch,"defaultColor",F("palette-common-white")),ee(O.Switch,"defaultDisabledColor",F("palette-grey-100")),ee(O.Switch,"primaryDisabledColor",Ki(O.primary.main,.62)),ee(O.Switch,"secondaryDisabledColor",Ki(O.secondary.main,.62)),ee(O.Switch,"errorDisabledColor",Ki(O.error.main,.62)),ee(O.Switch,"infoDisabledColor",Ki(O.info.main,.62)),ee(O.Switch,"successDisabledColor",Ki(O.success.main,.62)),ee(O.Switch,"warningDisabledColor",Ki(O.warning.main,.62)),ee(O.TableCell,"border",Ki(yw(O.divider,1),.88)),ee(O.Tooltip,"bg",yw(O.grey[700],.92))}if(O.mode==="dark"){ee(O.Alert,"errorColor",Ki(O.error.light,.6)),ee(O.Alert,"infoColor",Ki(O.info.light,.6)),ee(O.Alert,"successColor",Ki(O.success.light,.6)),ee(O.Alert,"warningColor",Ki(O.warning.light,.6)),ee(O.Alert,"errorFilledBg",F("palette-error-dark")),ee(O.Alert,"infoFilledBg",F("palette-info-dark")),ee(O.Alert,"successFilledBg",F("palette-success-dark")),ee(O.Alert,"warningFilledBg",F("palette-warning-dark")),ee(O.Alert,"errorFilledColor",pf(()=>O.getContrastText(O.error.dark))),ee(O.Alert,"infoFilledColor",pf(()=>O.getContrastText(O.info.dark))),ee(O.Alert,"successFilledColor",pf(()=>O.getContrastText(O.success.dark))),ee(O.Alert,"warningFilledColor",pf(()=>O.getContrastText(O.warning.dark))),ee(O.Alert,"errorStandardBg",Yi(O.error.light,.9)),ee(O.Alert,"infoStandardBg",Yi(O.info.light,.9)),ee(O.Alert,"successStandardBg",Yi(O.success.light,.9)),ee(O.Alert,"warningStandardBg",Yi(O.warning.light,.9)),ee(O.Alert,"errorIconColor",F("palette-error-main")),ee(O.Alert,"infoIconColor",F("palette-info-main")),ee(O.Alert,"successIconColor",F("palette-success-main")),ee(O.Alert,"warningIconColor",F("palette-warning-main")),ee(O.AppBar,"defaultBg",F("palette-grey-900")),ee(O.AppBar,"darkBg",F("palette-background-paper")),ee(O.AppBar,"darkColor",F("palette-text-primary")),ee(O.Avatar,"defaultBg",F("palette-grey-600")),ee(O.Button,"inheritContainedBg",F("palette-grey-800")),ee(O.Button,"inheritContainedHoverBg",F("palette-grey-700")),ee(O.Chip,"defaultBorder",F("palette-grey-700")),ee(O.Chip,"defaultAvatarColor",F("palette-grey-300")),ee(O.Chip,"defaultIconColor",F("palette-grey-300")),ee(O.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ee(O.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ee(O.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ee(O.LinearProgress,"primaryBg",Yi(O.primary.main,.5)),ee(O.LinearProgress,"secondaryBg",Yi(O.secondary.main,.5)),ee(O.LinearProgress,"errorBg",Yi(O.error.main,.5)),ee(O.LinearProgress,"infoBg",Yi(O.info.main,.5)),ee(O.LinearProgress,"successBg",Yi(O.success.main,.5)),ee(O.LinearProgress,"warningBg",Yi(O.warning.main,.5)),ee(O.Skeleton,"bg",`rgba(${F("palette-text-primaryChannel")} / 0.13)`),ee(O.Slider,"primaryTrack",Yi(O.primary.main,.5)),ee(O.Slider,"secondaryTrack",Yi(O.secondary.main,.5)),ee(O.Slider,"errorTrack",Yi(O.error.main,.5)),ee(O.Slider,"infoTrack",Yi(O.info.main,.5)),ee(O.Slider,"successTrack",Yi(O.success.main,.5)),ee(O.Slider,"warningTrack",Yi(O.warning.main,.5));const H=vw(O.background.default,.98);ee(O.SnackbarContent,"bg",H),ee(O.SnackbarContent,"color",pf(()=>O.getContrastText(H))),ee(O.SpeedDialAction,"fabHoverBg",vw(O.background.paper,.15)),ee(O.StepConnector,"border",F("palette-grey-600")),ee(O.StepContent,"border",F("palette-grey-600")),ee(O.Switch,"defaultColor",F("palette-grey-300")),ee(O.Switch,"defaultDisabledColor",F("palette-grey-600")),ee(O.Switch,"primaryDisabledColor",Yi(O.primary.main,.55)),ee(O.Switch,"secondaryDisabledColor",Yi(O.secondary.main,.55)),ee(O.Switch,"errorDisabledColor",Yi(O.error.main,.55)),ee(O.Switch,"infoDisabledColor",Yi(O.info.main,.55)),ee(O.Switch,"successDisabledColor",Yi(O.success.main,.55)),ee(O.Switch,"warningDisabledColor",Yi(O.warning.main,.55)),ee(O.TableCell,"border",Yi(yw(O.divider,1),.68)),ee(O.Tooltip,"bg",yw(O.grey[700],.92))}Lh(O.background,"default"),Lh(O.background,"paper"),Lh(O.common,"background"),Lh(O.common,"onBackground"),Lh(O,"divider"),Object.keys(O).forEach(H=>{const V=O[H];H!=="tonalOffset"&&V&&typeof V=="object"&&(V.main&&ee(O[H],"mainChannel",zx(Bx(V.main))),V.light&&ee(O[H],"lightChannel",zx(Bx(V.light))),V.dark&&ee(O[H],"darkChannel",zx(Bx(V.dark))),V.contrastText&&ee(O[H],"contrastTextChannel",zx(Bx(V.contrastText))),H==="text"&&(Lh(O[H],"primary"),Lh(O[H],"secondary")),H==="action"&&(V.active&&Lh(O[H],"active"),V.selected&&Lh(O[H],"selected")))})}),A=e.reduce((U,O)=>Xs(U,O),A);const I={prefix:a,disableCssColorScheme:s,shouldSkipGeneratingVar:o,getSelector:olt(A)},{vars:k,generateThemeVars:N,generateStyleSheets:L}=Mot(A,I);return A.vars=k,Object.entries(A.colorSchemes[A.defaultColorScheme]).forEach(([U,O])=>{A[U]=O}),A.generateThemeVars=N,A.generateStyleSheets=L,A.generateSpacing=function(){return W9(f.spacing,h2(this))},A.getColorSchemeSelector=Cot(l),A.spacing=A.generateSpacing(),A.shouldSkipGeneratingVar=o,A.unstable_sxConfig={...VS,...f==null?void 0:f.unstable_sxConfig},A.unstable_sx=function(O){return dy({sx:O,theme:this})},A.toRuntimeSource=cG,A}function LB(i,e,n){i.colorSchemes&&n&&(i.colorSchemes[e]={...n!==!0&&n,palette:H3({...n===!0?{}:n.palette,mode:e})})}function dG(i={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:s=n?void 0:{light:!0},defaultColorScheme:a=n==null?void 0:n.mode,...o}=i,l=a||"light",u=s==null?void 0:s[l],f={...s,...n?{[l]:{...typeof u!="boolean"&&u,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in i))return XD(i,...e);let d=n;"palette"in i||f[l]&&(f[l]!==!0?d=f[l].palette:l==="dark"&&(d={mode:"dark"}));const m=XD({...i,palette:d},...e);return m.defaultColorScheme=l,m.colorSchemes=f,m.palette.mode==="light"&&(m.colorSchemes.light={...f.light!==!0&&f.light,palette:m.palette},LB(m,"dark",f.dark)),m.palette.mode==="dark"&&(m.colorSchemes.dark={...f.dark!==!0&&f.dark,palette:m.palette},LB(m,"light",f.light)),m}return!n&&!("light"in f)&&l==="light"&&(f.light=!0),flt({...o,colorSchemes:f,defaultColorScheme:l,...typeof r!="boolean"&&r},...e)}const G3=dG();function L_(){const i=v2(G3);return i[S2]||i}function pG(i){return i!=="ownerState"&&i!=="theme"&&i!=="sx"&&i!=="as"}const xo=i=>pG(i)&&i!=="classes",me=Q9({themeId:S2,defaultTheme:G3,rootShouldForwardProp:xo}),hlt=_n("MuiBox",["root"]),dlt=dG(),bs=Zat({themeId:S2,defaultTheme:dlt,defaultClassName:hlt.root,generateClassName:X9.generate});function plt(i){return st.jsx(Xat,{...i,defaultTheme:G3,themeId:S2})}function mlt(i){return function(n){return st.jsx(plt,{styles:typeof i=="function"?r=>i({theme:r,...n}):i})}}function glt(){return B3}const En=Eot;function kn(i){return Sot(i)}function ylt(i){return Tn("MuiSvgIcon",i)}_n("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const vlt=i=>{const{color:e,fontSize:n,classes:r}=i,s={root:["root",e!=="inherit"&&`color${Fe(e)}`,`fontSize${Fe(n)}`]};return wn(s,ylt,r)},_lt=me("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,n.color!=="inherit"&&e[`color${Fe(n.color)}`],e[`fontSize${Fe(n.fontSize)}`]]}})(En(({theme:i})=>{var e,n,r,s,a,o,l,u,f,d,m,y,_,x;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(s=(e=i.transitions)==null?void 0:e.create)==null?void 0:s.call(e,"fill",{duration:(r=(n=(i.vars??i).transitions)==null?void 0:n.duration)==null?void 0:r.shorter}),variants:[{props:S=>!S.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((o=(a=i.typography)==null?void 0:a.pxToRem)==null?void 0:o.call(a,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((u=(l=i.typography)==null?void 0:l.pxToRem)==null?void 0:u.call(l,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((d=(f=i.typography)==null?void 0:f.pxToRem)==null?void 0:d.call(f,35))||"2.1875rem"}},...Object.entries((i.vars??i).palette).filter(([,S])=>S&&S.main).map(([S])=>{var T,b;return{props:{color:S},style:{color:(b=(T=(i.vars??i).palette)==null?void 0:T[S])==null?void 0:b.main}}}),{props:{color:"action"},style:{color:(y=(m=(i.vars??i).palette)==null?void 0:m.action)==null?void 0:y.active}},{props:{color:"disabled"},style:{color:(x=(_=(i.vars??i).palette)==null?void 0:_.action)==null?void 0:x.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),TM=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiSvgIcon"}),{children:s,className:a,color:o="inherit",component:l="svg",fontSize:u="medium",htmlColor:f,inheritViewBox:d=!1,titleAccess:m,viewBox:y="0 0 24 24",..._}=r,x=tt.isValidElement(s)&&s.type==="svg",S={...r,color:o,component:l,fontSize:u,instanceFontSize:e.fontSize,inheritViewBox:d,viewBox:y,hasSvgAsChild:x},T={};d||(T.viewBox=y);const b=vlt(S);return st.jsxs(_lt,{as:l,className:je(b.root,a),focusable:"false",color:f,"aria-hidden":m?void 0:!0,role:m?"img":void 0,ref:n,...T,..._,...x&&s.props,ownerState:S,children:[x?s.props.children:s,m?st.jsx("title",{children:m}):null]})});TM.muiName="SvgIcon";function ga(i,e){function n(r,s){return st.jsx(TM,{"data-testid":`${e}Icon`,ref:s,...r,children:i})}return n.muiName=TM.muiName,tt.memo(tt.forwardRef(n))}const blt=ga(st.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function xlt(i){return Tn("MuiAvatar",i)}_n("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);function gi(i,e){const{className:n,elementType:r,ownerState:s,externalForwardedProps:a,internalForwardedProps:o,shouldForwardComponentProp:l=!1,...u}=e,{component:f,slots:d={[i]:void 0},slotProps:m={[i]:void 0},...y}=a,_=d[i]||r,x=sG(m[i],s),{props:{component:S,...T},internalRef:b}=rG({className:n,...u,externalForwardedProps:i==="root"?y:void 0,externalSlotProps:x}),M=ss(b,x==null?void 0:x.ref,e.ref),R=i==="root"?S||f:S,A=nG(_,{...i==="root"&&!f&&!d[i]&&o,...i!=="root"&&!d[i]&&o,...T,...R&&!l&&{as:R},...R&&l&&{component:R},ref:M},s);return[_,A]}const Slt=i=>{const{classes:e,variant:n,colorDefault:r}=i;return wn({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},xlt,e)},Elt=me("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,e[n.variant],n.colorDefault&&e.colorDefault]}})(En(({theme:i})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:i.typography.fontFamily,fontSize:i.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(i.vars||i).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(i.vars||i).palette.background.default,...i.vars?{backgroundColor:i.vars.palette.Avatar.defaultBg}:{backgroundColor:i.palette.grey[400],...i.applyStyles("dark",{backgroundColor:i.palette.grey[600]})}}}]}))),Tlt=me("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(i,e)=>e.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),wlt=me(blt,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(i,e)=>e.fallback})({width:"75%",height:"75%"});function Alt({crossOrigin:i,referrerPolicy:e,src:n,srcSet:r}){const[s,a]=tt.useState(!1);return tt.useEffect(()=>{if(!n&&!r)return;a(!1);let o=!0;const l=new Image;return l.onload=()=>{o&&a("loaded")},l.onerror=()=>{o&&a("error")},l.crossOrigin=i,l.referrerPolicy=e,l.src=n,r&&(l.srcset=r),()=>{o=!1}},[i,e,n,r]),s}const UB=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiAvatar"}),{alt:s,children:a,className:o,component:l="div",slots:u={},slotProps:f={},imgProps:d,sizes:m,src:y,srcSet:_,variant:x="circular",...S}=r;let T=null;const b={...r,component:l,variant:x},M=Alt({...d,...typeof f.img=="function"?f.img(b):f.img,src:y,srcSet:_}),R=y||_,A=R&&M!=="error";b.colorDefault=!A,delete b.ownerState;const I=Slt(b),[k,N]=gi("img",{className:I.img,elementType:Tlt,externalForwardedProps:{slots:u,slotProps:{img:{...d,...f.img}}},additionalProps:{alt:s,src:y,srcSet:_,sizes:m},ownerState:b});return A?T=st.jsx(k,{...N}):a||a===0?T=a:R&&s?T=s[0]:T=st.jsx(wlt,{ownerState:b,className:I.fallback}),st.jsx(Elt,{as:l,className:je(I.root,o),ref:n,...S,ownerState:b,children:T})}),wM=tt.createContext({});function Mlt(i){return Tn("MuiList",i)}_n("MuiList",["root","padding","dense","subheader"]);const Clt=i=>{const{classes:e,disablePadding:n,dense:r,subheader:s}=i;return wn({root:["root",!n&&"padding",r&&"dense",s&&"subheader"]},Mlt,e)},Rlt=me("ul",{name:"MuiList",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:i})=>!i.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:i})=>i.subheader,style:{paddingTop:0}}]}),Olt=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiList"}),{children:s,className:a,component:o="ul",dense:l=!1,disablePadding:u=!1,subheader:f,...d}=r,m=tt.useMemo(()=>({dense:l}),[l]),y={...r,component:o,dense:l,disablePadding:u},_=Clt(y);return st.jsx(wM.Provider,{value:m,children:st.jsxs(Rlt,{as:o,className:je(_.root,a),ref:n,ownerState:y,...d,children:[f,s]})})});function Ilt(i,e){if(!i)return e;if(typeof i=="function"||typeof e=="function")return s=>{const a=typeof e=="function"?e(s):e,o=typeof i=="function"?i({...s,...a}):i,l=je(s==null?void 0:s.className,a==null?void 0:a.className,o==null?void 0:o.className);return{...a,...o,...!!l&&{className:l},...(a==null?void 0:a.style)&&(o==null?void 0:o.style)&&{style:{...a.style,...o.style}},...(a==null?void 0:a.sx)&&(o==null?void 0:o.sx)&&{sx:[...Array.isArray(a.sx)?a.sx:[a.sx],...Array.isArray(o.sx)?o.sx:[o.sx]]}}};const n=e,r=je(n==null?void 0:n.className,i==null?void 0:i.className);return{...e,...i,...!!r&&{className:r},...(n==null?void 0:n.style)&&(i==null?void 0:i.style)&&{style:{...n.style,...i.style}},...(n==null?void 0:n.sx)&&(i==null?void 0:i.sx)&&{sx:[...Array.isArray(n.sx)?n.sx:[n.sx],...Array.isArray(i.sx)?i.sx:[i.sx]]}}}function _I(i,e,n){return i===e?i.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:i.firstChild}function kB(i,e,n){return i===e?n?i.firstChild:i.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:i.lastChild}function mG(i,e){if(e===void 0)return!0;let n=i.innerText;return n===void 0&&(n=i.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.startsWith(e.keys.join(""))}function hx(i,e,n,r,s,a){let o=!1,l=s(i,e,e?n:!1);for(;l;){if(l===i.firstChild){if(o)return!1;o=!0}const u=r?!1:l.disabled||l.getAttribute("aria-disabled")==="true";if(!l.hasAttribute("tabindex")||!mG(l,a)||u)l=s(i,l,n);else return l.focus(),!0}return!1}const Dlt=tt.forwardRef(function(e,n){const{actions:r,autoFocus:s=!1,autoFocusItem:a=!1,children:o,className:l,disabledItemsFocusable:u=!1,disableListWrap:f=!1,onKeyDown:d,variant:m="selectedMenu",...y}=e,_=tt.useRef(null),x=tt.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Hf(()=>{s&&_.current.focus()},[s]),tt.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(R,{direction:A})=>{const I=!_.current.style.width;if(R.clientHeight<_.current.clientHeight&&I){const k=`${eG(Sc(R))}px`;_.current.style[A==="rtl"?"paddingLeft":"paddingRight"]=k,_.current.style.width=`calc(100% + ${k})`}return _.current}}),[]);const S=R=>{const A=_.current,I=R.key;if(R.ctrlKey||R.metaKey||R.altKey){d&&d(R);return}const N=Fl(A).activeElement;if(I==="ArrowDown")R.preventDefault(),hx(A,N,f,u,_I);else if(I==="ArrowUp")R.preventDefault(),hx(A,N,f,u,kB);else if(I==="Home")R.preventDefault(),hx(A,null,f,u,_I);else if(I==="End")R.preventDefault(),hx(A,null,f,u,kB);else if(I.length===1){const L=x.current,U=I.toLowerCase(),O=performance.now();L.keys.length>0&&(O-L.lastTime>500?(L.keys=[],L.repeating=!0,L.previousKeyMatched=!0):L.repeating&&U!==L.keys[0]&&(L.repeating=!1)),L.lastTime=O,L.keys.push(U);const F=N&&!L.repeating&&mG(N,L);L.previousKeyMatched&&(F||hx(A,N,!1,u,_I,L))?R.preventDefault():L.previousKeyMatched=!1}d&&d(R)},T=ss(_,n);let b=-1;tt.Children.forEach(o,(R,A)=>{if(!tt.isValidElement(R)){b===A&&(b+=1,b>=o.length&&(b=-1));return}R.props.disabled||(m==="selectedMenu"&&R.props.selected||b===-1)&&(b=A),b===A&&(R.props.disabled||R.props.muiSkipListHighlight||R.type.muiSkipListHighlight)&&(b+=1,b>=o.length&&(b=-1))});const M=tt.Children.map(o,(R,A)=>{if(A===b){const I={};return a&&(I.autoFocus=!0),R.props.tabIndex===void 0&&m==="selectedMenu"&&(I.tabIndex=0),tt.cloneElement(R,I)}return R});return st.jsx(Olt,{role:"menu",ref:T,className:l,onKeyDown:S,tabIndex:s?0:-1,...y,children:M})});function KD(i){return typeof i=="string"}function gG(i,e){if(i==null)return{};var n={};for(var r in i)if({}.hasOwnProperty.call(i,r)){if(e.indexOf(r)!==-1)continue;n[r]=i[r]}return n}function ZD(i,e){return ZD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},ZD(i,e)}function yG(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,ZD(i,e)}var vG=oH();const _w=fm(vG),zB={disabled:!1},AM=pn.createContext(null);var Plt=function(e){return e.scrollTop},Fx="unmounted",Ig="exited",Dg="entering",v0="entered",QD="exiting",Ou=function(i){yG(e,i);function e(r,s){var a;a=i.call(this,r,s)||this;var o=s,l=o&&!o.isMounting?r.enter:r.appear,u;return a.appearStatus=null,r.in?l?(u=Ig,a.appearStatus=Dg):u=v0:r.unmountOnExit||r.mountOnEnter?u=Fx:u=Ig,a.state={status:u},a.nextCallback=null,a}e.getDerivedStateFromProps=function(s,a){var o=s.in;return o&&a.status===Fx?{status:Ig}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var a=null;if(s!==this.props){var o=this.state.status;this.props.in?o!==Dg&&o!==v0&&(a=Dg):(o===Dg||o===v0)&&(a=QD)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,a,o,l;return a=o=l=s,s!=null&&typeof s!="number"&&(a=s.exit,o=s.enter,l=s.appear!==void 0?s.appear:o),{exit:a,enter:o,appear:l}},n.updateStatus=function(s,a){if(s===void 0&&(s=!1),a!==null)if(this.cancelNextCallback(),a===Dg){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:_w.findDOMNode(this);o&&Plt(o)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ig&&this.setState({status:Fx})},n.performEnter=function(s){var a=this,o=this.props.enter,l=this.context?this.context.isMounting:s,u=this.props.nodeRef?[l]:[_w.findDOMNode(this),l],f=u[0],d=u[1],m=this.getTimeouts(),y=l?m.appear:m.enter;if(!s&&!o||zB.disabled){this.safeSetState({status:v0},function(){a.props.onEntered(f)});return}this.props.onEnter(f,d),this.safeSetState({status:Dg},function(){a.props.onEntering(f,d),a.onTransitionEnd(y,function(){a.safeSetState({status:v0},function(){a.props.onEntered(f,d)})})})},n.performExit=function(){var s=this,a=this.props.exit,o=this.getTimeouts(),l=this.props.nodeRef?void 0:_w.findDOMNode(this);if(!a||zB.disabled){this.safeSetState({status:Ig},function(){s.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:QD},function(){s.props.onExiting(l),s.onTransitionEnd(o.exit,function(){s.safeSetState({status:Ig},function(){s.props.onExited(l)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,a){a=this.setNextCallback(a),this.setState(s,a)},n.setNextCallback=function(s){var a=this,o=!0;return this.nextCallback=function(l){o&&(o=!1,a.nextCallback=null,s(l))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(s,a){this.setNextCallback(a);var o=this.props.nodeRef?this.props.nodeRef.current:_w.findDOMNode(this),l=s==null&&!this.props.addEndListener;if(!o||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],f=u[0],d=u[1];this.props.addEndListener(f,d)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Fx)return null;var a=this.props,o=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var l=gG(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return pn.createElement(AM.Provider,{value:null},typeof o=="function"?o(s,l):pn.cloneElement(pn.Children.only(o),l))},e}(pn.Component);Ou.contextType=AM;Ou.propTypes={};function s0(){}Ou.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:s0,onEntering:s0,onEntered:s0,onExit:s0,onExiting:s0,onExited:s0};Ou.UNMOUNTED=Fx;Ou.EXITED=Ig;Ou.ENTERING=Dg;Ou.ENTERED=v0;Ou.EXITING=QD;function Nlt(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function j3(i,e){var n=function(a){return e&&tt.isValidElement(a)?e(a):a},r=Object.create(null);return i&&tt.Children.map(i,function(s){return s}).forEach(function(s){r[s.key]=n(s)}),r}function Llt(i,e){i=i||{},e=e||{};function n(d){return d in e?e[d]:i[d]}var r=Object.create(null),s=[];for(var a in i)a in e?s.length&&(r[a]=s,s=[]):s.push(a);var o,l={};for(var u in e){if(r[u])for(o=0;o<r[u].length;o++){var f=r[u][o];l[r[u][o]]=n(f)}l[u]=n(u)}for(o=0;o<s.length;o++)l[s[o]]=n(s[o]);return l}function Vg(i,e,n){return n[e]!=null?n[e]:i.props[e]}function Ult(i,e){return j3(i.children,function(n){return tt.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Vg(n,"appear",i),enter:Vg(n,"enter",i),exit:Vg(n,"exit",i)})})}function klt(i,e,n){var r=j3(i.children),s=Llt(e,r);return Object.keys(s).forEach(function(a){var o=s[a];if(tt.isValidElement(o)){var l=a in e,u=a in r,f=e[a],d=tt.isValidElement(f)&&!f.props.in;u&&(!l||d)?s[a]=tt.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Vg(o,"exit",i),enter:Vg(o,"enter",i)}):!u&&l&&!d?s[a]=tt.cloneElement(o,{in:!1}):u&&l&&tt.isValidElement(f)&&(s[a]=tt.cloneElement(o,{onExited:n.bind(null,o),in:f.props.in,exit:Vg(o,"exit",i),enter:Vg(o,"enter",i)}))}}),s}var zlt=Object.values||function(i){return Object.keys(i).map(function(e){return i[e]})},Blt={component:"div",childFactory:function(e){return e}},q3=function(i){yG(e,i);function e(r,s){var a;a=i.call(this,r,s)||this;var o=a.handleExited.bind(Nlt(a));return a.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},a}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,a){var o=a.children,l=a.handleExited,u=a.firstRender;return{children:u?Ult(s,l):klt(s,o,l),firstRender:!1}},n.handleExited=function(s,a){var o=j3(this.props.children);s.key in o||(s.props.onExited&&s.props.onExited(a),this.mounted&&this.setState(function(l){var u=$1({},l.children);return delete u[s.key],{children:u}}))},n.render=function(){var s=this.props,a=s.component,o=s.childFactory,l=gG(s,["component","childFactory"]),u=this.state.contextValue,f=zlt(this.state.children).map(o);return delete l.appear,delete l.enter,delete l.exit,a===null?pn.createElement(AM.Provider,{value:u},f):pn.createElement(AM.Provider,{value:u},pn.createElement(a,l,f))},e}(pn.Component);q3.propTypes={};q3.defaultProps=Blt;const $3=i=>i.scrollTop;function nm(i,e){const{timeout:n,easing:r,style:s={}}=i;return{duration:s.transitionDuration??(typeof n=="number"?n:n[e.mode]||0),easing:s.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:s.transitionDelay}}function JD(i){return`scale(${i}, ${i**2})`}const Flt={entering:{opacity:1,transform:JD(1)},entered:{opacity:1,transform:"none"}},bI=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),MM=tt.forwardRef(function(e,n){const{addEndListener:r,appear:s=!0,children:a,easing:o,in:l,onEnter:u,onEntered:f,onEntering:d,onExit:m,onExited:y,onExiting:_,style:x,timeout:S="auto",TransitionComponent:T=Ou,...b}=e,M=Fg(),R=tt.useRef(),A=L_(),I=tt.useRef(null),k=ss(I,My(a),n),N=J=>q=>{if(J){const W=I.current;q===void 0?J(W):J(W,q)}},L=N(d),U=N((J,q)=>{$3(J);const{duration:W,delay:K,easing:et}=nm({style:x,timeout:S,easing:o},{mode:"enter"});let Q;S==="auto"?(Q=A.transitions.getAutoHeightDuration(J.clientHeight),R.current=Q):Q=W,J.style.transition=[A.transitions.create("opacity",{duration:Q,delay:K}),A.transitions.create("transform",{duration:bI?Q:Q*.666,delay:K,easing:et})].join(","),u&&u(J,q)}),O=N(f),F=N(_),H=N(J=>{const{duration:q,delay:W,easing:K}=nm({style:x,timeout:S,easing:o},{mode:"exit"});let et;S==="auto"?(et=A.transitions.getAutoHeightDuration(J.clientHeight),R.current=et):et=q,J.style.transition=[A.transitions.create("opacity",{duration:et,delay:W}),A.transitions.create("transform",{duration:bI?et:et*.666,delay:bI?W:W||et*.333,easing:K})].join(","),J.style.opacity=0,J.style.transform=JD(.75),m&&m(J)}),V=N(y),X=J=>{S==="auto"&&M.start(R.current||0,J),r&&r(I.current,J)};return st.jsx(T,{appear:s,in:l,nodeRef:I,onEnter:U,onEntered:O,onEntering:L,onExit:H,onExited:V,onExiting:F,addEndListener:X,timeout:S==="auto"?null:S,...b,children:(J,{ownerState:q,...W})=>tt.cloneElement(a,{style:{opacity:0,transform:JD(.75),visibility:J==="exited"&&!l?"hidden":void 0,...Flt[J],...x,...a.props.style},ref:k,...W})})});MM&&(MM.muiSupportAuto=!0);function Vlt(i){const e=Fl(i);return e.body===i?Sc(i).innerWidth>e.documentElement.clientWidth:i.scrollHeight>i.clientHeight}function u1(i,e){e?i.setAttribute("aria-hidden","true"):i.removeAttribute("aria-hidden")}function BB(i){return parseInt(Sc(i).getComputedStyle(i).paddingRight,10)||0}function Hlt(i){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(i.tagName),r=i.tagName==="INPUT"&&i.getAttribute("type")==="hidden";return n||r}function FB(i,e,n,r,s){const a=[e,n,...r];[].forEach.call(i.children,o=>{const l=!a.includes(o),u=!Hlt(o);l&&u&&u1(o,s)})}function xI(i,e){let n=-1;return i.some((r,s)=>e(r)?(n=s,!0):!1),n}function Glt(i,e){const n=[],r=i.container;if(!e.disableScrollLock){if(Vlt(r)){const o=eG(Sc(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${BB(r)+o}px`;const l=Fl(r).querySelectorAll(".mui-fixed");[].forEach.call(l,u=>{n.push({value:u.style.paddingRight,property:"padding-right",el:u}),u.style.paddingRight=`${BB(u)+o}px`})}let a;if(r.parentNode instanceof DocumentFragment)a=Fl(r).body;else{const o=r.parentElement,l=Sc(r);a=(o==null?void 0:o.nodeName)==="HTML"&&l.getComputedStyle(o).overflowY==="scroll"?o:r}n.push({value:a.style.overflow,property:"overflow",el:a},{value:a.style.overflowX,property:"overflow-x",el:a},{value:a.style.overflowY,property:"overflow-y",el:a}),a.style.overflow="hidden"}return()=>{n.forEach(({value:a,el:o,property:l})=>{a?o.style.setProperty(l,a):o.style.removeProperty(l)})}}function jlt(i){const e=[];return[].forEach.call(i.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class qlt{constructor(){this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&u1(e.modalRef,!1);const s=jlt(n);FB(n,e.mount,e.modalRef,s,!0);const a=xI(this.containers,o=>o.container===n);return a!==-1?(this.containers[a].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:s}),r)}mount(e,n){const r=xI(this.containers,a=>a.modals.includes(e)),s=this.containers[r];s.restore||(s.restore=Glt(s,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const s=xI(this.containers,o=>o.modals.includes(e)),a=this.containers[s];if(a.modals.splice(a.modals.indexOf(e),1),this.modals.splice(r,1),a.modals.length===0)a.restore&&a.restore(),e.modalRef&&u1(e.modalRef,n),FB(a.container,e.mount,e.modalRef,a.hiddenSiblings,!1),this.containers.splice(s,1);else{const o=a.modals[a.modals.length-1];o.modalRef&&u1(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const $lt=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Wlt(i){const e=parseInt(i.getAttribute("tabindex")||"",10);return Number.isNaN(e)?i.contentEditable==="true"||(i.nodeName==="AUDIO"||i.nodeName==="VIDEO"||i.nodeName==="DETAILS")&&i.getAttribute("tabindex")===null?0:i.tabIndex:e}function Xlt(i){if(i.tagName!=="INPUT"||i.type!=="radio"||!i.name)return!1;const e=r=>i.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${i.name}"]:checked`);return n||(n=e(`[name="${i.name}"]`)),n!==i}function Ylt(i){return!(i.disabled||i.tagName==="INPUT"&&i.type==="hidden"||Xlt(i))}function Klt(i){const e=[],n=[];return Array.from(i.querySelectorAll($lt)).forEach((r,s)=>{const a=Wlt(r);a===-1||!Ylt(r)||(a===0?e.push(r):n.push({documentOrder:s,tabIndex:a,node:r}))}),n.sort((r,s)=>r.tabIndex===s.tabIndex?r.documentOrder-s.documentOrder:r.tabIndex-s.tabIndex).map(r=>r.node).concat(e)}function Zlt(){return!0}function Qlt(i){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:s=!1,getTabbable:a=Klt,isEnabled:o=Zlt,open:l}=i,u=tt.useRef(!1),f=tt.useRef(null),d=tt.useRef(null),m=tt.useRef(null),y=tt.useRef(null),_=tt.useRef(!1),x=tt.useRef(null),S=ss(My(e),x),T=tt.useRef(null);tt.useEffect(()=>{!l||!x.current||(_.current=!n)},[n,l]),tt.useEffect(()=>{if(!l||!x.current)return;const R=Fl(x.current);return x.current.contains(R.activeElement)||(x.current.hasAttribute("tabIndex")||x.current.setAttribute("tabIndex","-1"),_.current&&x.current.focus()),()=>{s||(m.current&&m.current.focus&&(u.current=!0,m.current.focus()),m.current=null)}},[l]),tt.useEffect(()=>{if(!l||!x.current)return;const R=Fl(x.current),A=N=>{T.current=N,!(r||!o()||N.key!=="Tab")&&R.activeElement===x.current&&N.shiftKey&&(u.current=!0,d.current&&d.current.focus())},I=()=>{var U,O;const N=x.current;if(N===null)return;if(!R.hasFocus()||!o()||u.current){u.current=!1;return}if(N.contains(R.activeElement)||r&&R.activeElement!==f.current&&R.activeElement!==d.current)return;if(R.activeElement!==y.current)y.current=null;else if(y.current!==null)return;if(!_.current)return;let L=[];if((R.activeElement===f.current||R.activeElement===d.current)&&(L=a(x.current)),L.length>0){const F=!!((U=T.current)!=null&&U.shiftKey&&((O=T.current)==null?void 0:O.key)==="Tab"),H=L[0],V=L[L.length-1];typeof H!="string"&&typeof V!="string"&&(F?V.focus():H.focus())}else N.focus()};R.addEventListener("focusin",I),R.addEventListener("keydown",A,!0);const k=setInterval(()=>{R.activeElement&&R.activeElement.tagName==="BODY"&&I()},50);return()=>{clearInterval(k),R.removeEventListener("focusin",I),R.removeEventListener("keydown",A,!0)}},[n,r,s,o,l,a]);const b=R=>{m.current===null&&(m.current=R.relatedTarget),_.current=!0,y.current=R.target;const A=e.props.onFocus;A&&A(R)},M=R=>{m.current===null&&(m.current=R.relatedTarget),_.current=!0};return st.jsxs(tt.Fragment,{children:[st.jsx("div",{tabIndex:l?0:-1,onFocus:M,ref:f,"data-testid":"sentinelStart"}),tt.cloneElement(e,{ref:S,onFocus:b}),st.jsx("div",{tabIndex:l?0:-1,onFocus:M,ref:d,"data-testid":"sentinelEnd"})]})}function Jlt(i){return typeof i=="function"?i():i}const _G=tt.forwardRef(function(e,n){const{children:r,container:s,disablePortal:a=!1}=e,[o,l]=tt.useState(null),u=ss(tt.isValidElement(r)?My(r):null,n);if(Hf(()=>{a||l(Jlt(s)||document.body)},[s,a]),Hf(()=>{if(o&&!a)return EB(n,o),()=>{EB(n,null)}},[n,o,a]),a){if(tt.isValidElement(r)){const f={ref:u};return tt.cloneElement(r,f)}return r}return o&&vG.createPortal(r,o)}),tut={entering:{opacity:1},entered:{opacity:1}},eut=tt.forwardRef(function(e,n){const r=L_(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:a,appear:o=!0,children:l,easing:u,in:f,onEnter:d,onEntered:m,onEntering:y,onExit:_,onExited:x,onExiting:S,style:T,timeout:b=s,TransitionComponent:M=Ou,...R}=e,A=tt.useRef(null),I=ss(A,My(l),n),k=X=>J=>{if(X){const q=A.current;J===void 0?X(q):X(q,J)}},N=k(y),L=k((X,J)=>{$3(X);const q=nm({style:T,timeout:b,easing:u},{mode:"enter"});X.style.webkitTransition=r.transitions.create("opacity",q),X.style.transition=r.transitions.create("opacity",q),d&&d(X,J)}),U=k(m),O=k(S),F=k(X=>{const J=nm({style:T,timeout:b,easing:u},{mode:"exit"});X.style.webkitTransition=r.transitions.create("opacity",J),X.style.transition=r.transitions.create("opacity",J),_&&_(X)}),H=k(x),V=X=>{a&&a(A.current,X)};return st.jsx(M,{appear:o,in:f,nodeRef:A,onEnter:L,onEntered:U,onEntering:N,onExit:F,onExited:H,onExiting:O,addEndListener:V,timeout:b,...R,children:(X,{ownerState:J,...q})=>tt.cloneElement(l,{style:{opacity:0,visibility:X==="exited"&&!f?"hidden":void 0,...tut[X],...T,...l.props.style},ref:I,...q})})});function nut(i){return Tn("MuiBackdrop",i)}_n("MuiBackdrop",["root","invisible"]);const iut=i=>{const{classes:e,invisible:n}=i;return wn({root:["root",n&&"invisible"]},nut,e)},rut=me("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,n.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),sut=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiBackdrop"}),{children:s,className:a,component:o="div",invisible:l=!1,open:u,components:f={},componentsProps:d={},slotProps:m={},slots:y={},TransitionComponent:_,transitionDuration:x,...S}=r,T={...r,component:o,invisible:l},b=iut(T),M={transition:_,root:f.Root,...y},R={...d,...m},A={slots:M,slotProps:R},[I,k]=gi("root",{elementType:rut,externalForwardedProps:A,className:je(b.root,a),ownerState:T}),[N,L]=gi("transition",{elementType:eut,externalForwardedProps:A,ownerState:T});return st.jsx(N,{in:u,timeout:x,...S,...L,children:st.jsx(I,{"aria-hidden":!0,...k,classes:b,ref:n,children:s})})});function aut(i){return typeof i=="function"?i():i}function out(i){return i?i.props.hasOwnProperty("in"):!1}const VB=()=>{},bw=new qlt;function lut(i){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:s=!1,onTransitionEnter:a,onTransitionExited:o,children:l,onClose:u,open:f,rootRef:d}=i,m=tt.useRef({}),y=tt.useRef(null),_=tt.useRef(null),x=ss(_,d),[S,T]=tt.useState(!f),b=out(l);let M=!0;(i["aria-hidden"]==="false"||i["aria-hidden"]===!1)&&(M=!1);const R=()=>Fl(y.current),A=()=>(m.current.modalRef=_.current,m.current.mount=y.current,m.current),I=()=>{bw.mount(A(),{disableScrollLock:r}),_.current&&(_.current.scrollTop=0)},k=ad(()=>{const J=aut(e)||R().body;bw.add(A(),J),_.current&&I()}),N=()=>bw.isTopModal(A()),L=ad(J=>{y.current=J,J&&(f&&N()?I():_.current&&u1(_.current,M))}),U=tt.useCallback(()=>{bw.remove(A(),M)},[M]);tt.useEffect(()=>()=>{U()},[U]),tt.useEffect(()=>{f?k():(!b||!s)&&U()},[f,U,b,s,k]);const O=J=>q=>{var W;(W=J.onKeyDown)==null||W.call(J,q),!(q.key!=="Escape"||q.which===229||!N())&&(n||(q.stopPropagation(),u&&u(q,"escapeKeyDown")))},F=J=>q=>{var W;(W=J.onClick)==null||W.call(J,q),q.target===q.currentTarget&&u&&u(q,"backdropClick")};return{getRootProps:(J={})=>{const q=iG(i);delete q.onTransitionEnter,delete q.onTransitionExited;const W={...q,...J};return{role:"presentation",...W,onKeyDown:O(W),ref:x}},getBackdropProps:(J={})=>{const q=J;return{"aria-hidden":!0,...q,onClick:F(q),open:f}},getTransitionProps:()=>{const J=()=>{T(!1),a&&a()},q=()=>{T(!0),o&&o(),s&&U()};return{onEnter:WD(J,(l==null?void 0:l.props.onEnter)??VB),onExited:WD(q,(l==null?void 0:l.props.onExited)??VB)}},rootRef:x,portalRef:L,isTopModal:N,exited:S,hasTransition:b}}function uut(i){return Tn("MuiModal",i)}_n("MuiModal",["root","hidden","backdrop"]);const cut=i=>{const{open:e,exited:n,classes:r}=i;return wn({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},uut,r)},fut=me("div",{name:"MuiModal",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,!n.open&&n.exited&&e.hidden]}})(En(({theme:i})=>({position:"fixed",zIndex:(i.vars||i).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),hut=me(sut,{name:"MuiModal",slot:"Backdrop",overridesResolver:(i,e)=>e.backdrop})({zIndex:-1}),dut=tt.forwardRef(function(e,n){const r=kn({name:"MuiModal",props:e}),{BackdropComponent:s=hut,BackdropProps:a,classes:o,className:l,closeAfterTransition:u=!1,children:f,container:d,component:m,components:y={},componentsProps:_={},disableAutoFocus:x=!1,disableEnforceFocus:S=!1,disableEscapeKeyDown:T=!1,disablePortal:b=!1,disableRestoreFocus:M=!1,disableScrollLock:R=!1,hideBackdrop:A=!1,keepMounted:I=!1,onBackdropClick:k,onClose:N,onTransitionEnter:L,onTransitionExited:U,open:O,slotProps:F={},slots:H={},theme:V,...X}=r,J={...r,closeAfterTransition:u,disableAutoFocus:x,disableEnforceFocus:S,disableEscapeKeyDown:T,disablePortal:b,disableRestoreFocus:M,disableScrollLock:R,hideBackdrop:A,keepMounted:I},{getRootProps:q,getBackdropProps:W,getTransitionProps:K,portalRef:et,isTopModal:Q,exited:dt,hasTransition:yt}=lut({...J,rootRef:n}),xt={...J,exited:dt},nt=cut(xt),ht={};if(f.props.tabIndex===void 0&&(ht.tabIndex="-1"),yt){const{onEnter:te,onExited:Pt}=K();ht.onEnter=te,ht.onExited=Pt}const ft={slots:{root:y.Root,backdrop:y.Backdrop,...H},slotProps:{..._,...F}},[gt,wt]=gi("root",{ref:n,elementType:fut,externalForwardedProps:{...ft,...X,component:m},getSlotProps:q,ownerState:xt,className:je(l,nt==null?void 0:nt.root,!xt.open&&xt.exited&&(nt==null?void 0:nt.hidden))}),[Kt,zt]=gi("backdrop",{ref:a==null?void 0:a.ref,elementType:s,externalForwardedProps:ft,shouldForwardComponentProp:!0,additionalProps:a,getSlotProps:te=>W({...te,onClick:Pt=>{k&&k(Pt),te!=null&&te.onClick&&te.onClick(Pt)}}),className:je(a==null?void 0:a.className,nt==null?void 0:nt.backdrop),ownerState:xt});return!I&&!O&&(!yt||dt)?null:st.jsx(_G,{ref:et,container:d,disablePortal:b,children:st.jsxs(gt,{...wt,children:[!A&&s?st.jsx(Kt,{...zt}):null,st.jsx(Qlt,{disableEnforceFocus:S,disableAutoFocus:x,disableRestoreFocus:M,isEnabled:Q,open:O,children:tt.cloneElement(f,ht)})]})})});function put(i){return Tn("MuiPaper",i)}_n("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const mut=i=>{const{square:e,elevation:n,variant:r,classes:s}=i,a={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return wn(a,put,s)},gut=me("div",{name:"MuiPaper",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(En(({theme:i})=>({backgroundColor:(i.vars||i).palette.background.paper,color:(i.vars||i).palette.text.primary,transition:i.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:i.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(i.vars||i).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),W3=tt.forwardRef(function(e,n){var _;const r=kn({props:e,name:"MuiPaper"}),s=L_(),{className:a,component:o="div",elevation:l=1,square:u=!1,variant:f="elevation",...d}=r,m={...r,component:o,elevation:l,square:u,variant:f},y=mut(m);return st.jsx(gut,{as:o,ownerState:m,className:je(y.root,a),ref:n,...d,style:{...f==="elevation"&&{"--Paper-shadow":(s.vars||s).shadows[l],...s.vars&&{"--Paper-overlay":(_=s.vars.overlays)==null?void 0:_[l]},...!s.vars&&s.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Os("#fff",YD(l))}, ${Os("#fff",YD(l))})`}},...d.style}})});function yut(i){return Tn("MuiPopover",i)}_n("MuiPopover",["root","paper"]);function HB(i,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=i.height/2:e==="bottom"&&(n=i.height),n}function GB(i,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=i.width/2:e==="right"&&(n=i.width),n}function jB(i){return[i.horizontal,i.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function xw(i){return typeof i=="function"?i():i}const vut=i=>{const{classes:e}=i;return wn({root:["root"],paper:["paper"]},yut,e)},_ut=me(dut,{name:"MuiPopover",slot:"Root",overridesResolver:(i,e)=>e.root})({}),bG=me(W3,{name:"MuiPopover",slot:"Paper",overridesResolver:(i,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),but=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiPopover"}),{action:s,anchorEl:a,anchorOrigin:o={vertical:"top",horizontal:"left"},anchorPosition:l,anchorReference:u="anchorEl",children:f,className:d,container:m,elevation:y=8,marginThreshold:_=16,open:x,PaperProps:S={},slots:T={},slotProps:b={},transformOrigin:M={vertical:"top",horizontal:"left"},TransitionComponent:R,transitionDuration:A="auto",TransitionProps:I={},disableScrollLock:k=!1,...N}=r,L=tt.useRef(),U={...r,anchorOrigin:o,anchorReference:u,elevation:y,marginThreshold:_,transformOrigin:M,TransitionComponent:R,transitionDuration:A,TransitionProps:I},O=vut(U),F=tt.useCallback(()=>{if(u==="anchorPosition")return l;const zt=xw(a),Pt=(zt&&zt.nodeType===1?zt:Fl(L.current).body).getBoundingClientRect();return{top:Pt.top+HB(Pt,o.vertical),left:Pt.left+GB(Pt,o.horizontal)}},[a,o.horizontal,o.vertical,l,u]),H=tt.useCallback(zt=>({vertical:HB(zt,M.vertical),horizontal:GB(zt,M.horizontal)}),[M.horizontal,M.vertical]),V=tt.useCallback(zt=>{const te={width:zt.offsetWidth,height:zt.offsetHeight},Pt=H(te);if(u==="none")return{top:null,left:null,transformOrigin:jB(Pt)};const Ht=F();let at=Ht.top-Pt.vertical,ue=Ht.left-Pt.horizontal;const Jt=at+te.height,se=ue+te.width,ae=Sc(xw(a)),Ce=ae.innerHeight-_,le=ae.innerWidth-_;if(_!==null&&at<_){const ct=at-_;at-=ct,Pt.vertical+=ct}else if(_!==null&&Jt>Ce){const ct=Jt-Ce;at-=ct,Pt.vertical+=ct}if(_!==null&&ue<_){const ct=ue-_;ue-=ct,Pt.horizontal+=ct}else if(se>le){const ct=se-le;ue-=ct,Pt.horizontal+=ct}return{top:`${Math.round(at)}px`,left:`${Math.round(ue)}px`,transformOrigin:jB(Pt)}},[a,u,F,H,_]),[X,J]=tt.useState(x),q=tt.useCallback(()=>{const zt=L.current;if(!zt)return;const te=V(zt);te.top!==null&&zt.style.setProperty("top",te.top),te.left!==null&&(zt.style.left=te.left),zt.style.transformOrigin=te.transformOrigin,J(!0)},[V]);tt.useEffect(()=>(k&&window.addEventListener("scroll",q),()=>window.removeEventListener("scroll",q)),[a,k,q]);const W=()=>{q()},K=()=>{J(!1)};tt.useEffect(()=>{x&&q()}),tt.useImperativeHandle(s,()=>x?{updatePosition:()=>{q()}}:null,[x,q]),tt.useEffect(()=>{if(!x)return;const zt=V3(()=>{q()}),te=Sc(xw(a));return te.addEventListener("resize",zt),()=>{zt.clear(),te.removeEventListener("resize",zt)}},[a,x,q]);let et=A;const Q={slots:{transition:R,...T},slotProps:{transition:I,paper:S,...b}},[dt,yt]=gi("transition",{elementType:MM,externalForwardedProps:Q,ownerState:U,getSlotProps:zt=>({...zt,onEntering:(te,Pt)=>{var Ht;(Ht=zt.onEntering)==null||Ht.call(zt,te,Pt),W()},onExited:te=>{var Pt;(Pt=zt.onExited)==null||Pt.call(zt,te),K()}}),additionalProps:{appear:!0,in:x}});A==="auto"&&!dt.muiSupportAuto&&(et=void 0);const xt=m||(a?Fl(xw(a)).body:void 0),[nt,{slots:ht,slotProps:ft,...gt}]=gi("root",{ref:n,elementType:_ut,externalForwardedProps:{...Q,...N},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:T.backdrop},slotProps:{backdrop:Ilt(typeof b.backdrop=="function"?b.backdrop(U):b.backdrop,{invisible:!0})},container:xt,open:x},ownerState:U,className:je(O.root,d)}),[wt,Kt]=gi("paper",{ref:L,className:O.paper,elementType:bG,externalForwardedProps:Q,shouldForwardComponentProp:!0,additionalProps:{elevation:y,style:X?void 0:{opacity:0}},ownerState:U});return st.jsx(nt,{...gt,...!KD(nt)&&{slots:ht,slotProps:ft,disableScrollLock:k},children:st.jsx(dt,{...yt,timeout:et,children:st.jsx(wt,{...Kt,children:f})})})});function xut(i){return Tn("MuiMenu",i)}_n("MuiMenu",["root","paper","list"]);const Sut={vertical:"top",horizontal:"right"},Eut={vertical:"top",horizontal:"left"},Tut=i=>{const{classes:e}=i;return wn({root:["root"],paper:["paper"],list:["list"]},xut,e)},wut=me(but,{shouldForwardProp:i=>xo(i)||i==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(i,e)=>e.root})({}),Aut=me(bG,{name:"MuiMenu",slot:"Paper",overridesResolver:(i,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Mut=me(Dlt,{name:"MuiMenu",slot:"List",overridesResolver:(i,e)=>e.list})({outline:0}),xG=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiMenu"}),{autoFocus:s=!0,children:a,className:o,disableAutoFocusItem:l=!1,MenuListProps:u={},onClose:f,open:d,PaperProps:m={},PopoverClasses:y,transitionDuration:_="auto",TransitionProps:{onEntering:x,...S}={},variant:T="selectedMenu",slots:b={},slotProps:M={},...R}=r,A=x2(),I={...r,autoFocus:s,disableAutoFocusItem:l,MenuListProps:u,onEntering:x,PaperProps:m,transitionDuration:_,TransitionProps:S,variant:T},k=Tut(I),N=s&&!l&&d,L=tt.useRef(null),U=(et,Q)=>{L.current&&L.current.adjustStyleForScrollbar(et,{direction:A?"rtl":"ltr"}),x&&x(et,Q)},O=et=>{et.key==="Tab"&&(et.preventDefault(),f&&f(et,"tabKeyDown"))};let F=-1;tt.Children.map(a,(et,Q)=>{tt.isValidElement(et)&&(et.props.disabled||(T==="selectedMenu"&&et.props.selected||F===-1)&&(F=Q))});const H={slots:b,slotProps:{list:u,transition:S,paper:m,...M}},V=aG({elementType:b.root,externalSlotProps:M.root,ownerState:I,className:[k.root,o]}),[X,J]=gi("paper",{className:k.paper,elementType:Aut,externalForwardedProps:H,shouldForwardComponentProp:!0,ownerState:I}),[q,W]=gi("list",{className:je(k.list,u.className),elementType:Mut,shouldForwardComponentProp:!0,externalForwardedProps:H,getSlotProps:et=>({...et,onKeyDown:Q=>{var dt;O(Q),(dt=et.onKeyDown)==null||dt.call(et,Q)}}),ownerState:I}),K=typeof H.slotProps.transition=="function"?H.slotProps.transition(I):H.slotProps.transition;return st.jsx(wut,{onClose:f,anchorOrigin:{vertical:"bottom",horizontal:A?"right":"left"},transformOrigin:A?Sut:Eut,slots:{root:b.root,paper:X,backdrop:b.backdrop,...b.transition&&{transition:b.transition}},slotProps:{root:V,paper:J,backdrop:typeof M.backdrop=="function"?M.backdrop(I):M.backdrop,transition:{...K,onEntering:(...et)=>{var Q;U(...et),(Q=K==null?void 0:K.onEntering)==null||Q.call(K,...et)}}},open:d,ref:n,transitionDuration:_,ownerState:I,...R,classes:y,children:st.jsx(q,{actions:L,autoFocus:s&&(F===-1||l),autoFocusItem:N,variant:T,...W,children:a})})});class CM{constructor(){jb(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new CM}static use(){const e=tG(CM.create).current,[n,r]=tt.useState(!1);return e.shouldMount=n,e.setShouldMount=r,tt.useEffect(e.mountEffect,[n]),e}mount(){return this.mounted||(this.mounted=Rut(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...e)})}stop(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...e)})}pulsate(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...e)})}}function Cut(){return CM.use()}function Rut(){let i,e;const n=new Promise((r,s)=>{i=r,e=s});return n.resolve=i,n.reject=e,n}function Out(i){const{className:e,classes:n,pulsate:r=!1,rippleX:s,rippleY:a,rippleSize:o,in:l,onExited:u,timeout:f}=i,[d,m]=tt.useState(!1),y=je(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),_={width:o,height:o,top:-(o/2)+a,left:-(o/2)+s},x=je(n.child,d&&n.childLeaving,r&&n.childPulsate);return!l&&!d&&m(!0),tt.useEffect(()=>{if(!l&&u!=null){const S=setTimeout(u,f);return()=>{clearTimeout(S)}}},[u,l,f]),st.jsx("span",{className:y,style:_,children:st.jsx("span",{className:x})})}const yu=_n("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),tP=550,Iut=80,Dut=gm`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Put=gm`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Nut=gm`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Lut=me("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Uut=me(Out,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${yu.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Dut};
    animation-duration: ${tP}ms;
    animation-timing-function: ${({theme:i})=>i.transitions.easing.easeInOut};
  }

  &.${yu.ripplePulsate} {
    animation-duration: ${({theme:i})=>i.transitions.duration.shorter}ms;
  }

  & .${yu.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${yu.childLeaving} {
    opacity: 0;
    animation-name: ${Put};
    animation-duration: ${tP}ms;
    animation-timing-function: ${({theme:i})=>i.transitions.easing.easeInOut};
  }

  & .${yu.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Nut};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:i})=>i.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,kut=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiTouchRipple"}),{center:s=!1,classes:a={},className:o,...l}=r,[u,f]=tt.useState([]),d=tt.useRef(0),m=tt.useRef(null);tt.useEffect(()=>{m.current&&(m.current(),m.current=null)},[u]);const y=tt.useRef(!1),_=Fg(),x=tt.useRef(null),S=tt.useRef(null),T=tt.useCallback(A=>{const{pulsate:I,rippleX:k,rippleY:N,rippleSize:L,cb:U}=A;f(O=>[...O,st.jsx(Uut,{classes:{ripple:je(a.ripple,yu.ripple),rippleVisible:je(a.rippleVisible,yu.rippleVisible),ripplePulsate:je(a.ripplePulsate,yu.ripplePulsate),child:je(a.child,yu.child),childLeaving:je(a.childLeaving,yu.childLeaving),childPulsate:je(a.childPulsate,yu.childPulsate)},timeout:tP,pulsate:I,rippleX:k,rippleY:N,rippleSize:L},d.current)]),d.current+=1,m.current=U},[a]),b=tt.useCallback((A={},I={},k=()=>{})=>{const{pulsate:N=!1,center:L=s||I.pulsate,fakeElement:U=!1}=I;if((A==null?void 0:A.type)==="mousedown"&&y.current){y.current=!1;return}(A==null?void 0:A.type)==="touchstart"&&(y.current=!0);const O=U?null:S.current,F=O?O.getBoundingClientRect():{width:0,height:0,left:0,top:0};let H,V,X;if(L||A===void 0||A.clientX===0&&A.clientY===0||!A.clientX&&!A.touches)H=Math.round(F.width/2),V=Math.round(F.height/2);else{const{clientX:J,clientY:q}=A.touches&&A.touches.length>0?A.touches[0]:A;H=Math.round(J-F.left),V=Math.round(q-F.top)}if(L)X=Math.sqrt((2*F.width**2+F.height**2)/3),X%2===0&&(X+=1);else{const J=Math.max(Math.abs((O?O.clientWidth:0)-H),H)*2+2,q=Math.max(Math.abs((O?O.clientHeight:0)-V),V)*2+2;X=Math.sqrt(J**2+q**2)}A!=null&&A.touches?x.current===null&&(x.current=()=>{T({pulsate:N,rippleX:H,rippleY:V,rippleSize:X,cb:k})},_.start(Iut,()=>{x.current&&(x.current(),x.current=null)})):T({pulsate:N,rippleX:H,rippleY:V,rippleSize:X,cb:k})},[s,T,_]),M=tt.useCallback(()=>{b({},{pulsate:!0})},[b]),R=tt.useCallback((A,I)=>{if(_.clear(),(A==null?void 0:A.type)==="touchend"&&x.current){x.current(),x.current=null,_.start(0,()=>{R(A,I)});return}x.current=null,f(k=>k.length>0?k.slice(1):k),m.current=I},[_]);return tt.useImperativeHandle(n,()=>({pulsate:M,start:b,stop:R}),[M,b,R]),st.jsx(Lut,{className:je(yu.root,a.root,o),ref:S,...l,children:st.jsx(q3,{component:null,exit:!0,children:u})})});function zut(i){return Tn("MuiButtonBase",i)}const But=_n("MuiButtonBase",["root","disabled","focusVisible"]),Fut=i=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:s}=i,o=wn({root:["root",e&&"disabled",n&&"focusVisible"]},zut,s);return n&&r&&(o.root+=` ${r}`),o},Vut=me("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(i,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${But.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),E2=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiButtonBase"}),{action:s,centerRipple:a=!1,children:o,className:l,component:u="button",disabled:f=!1,disableRipple:d=!1,disableTouchRipple:m=!1,focusRipple:y=!1,focusVisibleClassName:_,LinkComponent:x="a",onBlur:S,onClick:T,onContextMenu:b,onDragLeave:M,onFocus:R,onFocusVisible:A,onKeyDown:I,onKeyUp:k,onMouseDown:N,onMouseLeave:L,onMouseUp:U,onTouchEnd:O,onTouchMove:F,onTouchStart:H,tabIndex:V=0,TouchRippleProps:X,touchRippleRef:J,type:q,...W}=r,K=tt.useRef(null),et=Cut(),Q=ss(et.ref,J),[dt,yt]=tt.useState(!1);f&&dt&&yt(!1),tt.useImperativeHandle(s,()=>({focusVisible:()=>{yt(!0),K.current.focus()}}),[]);const xt=et.shouldMount&&!d&&!f;tt.useEffect(()=>{dt&&y&&!d&&et.pulsate()},[d,y,dt,et]);const nt=Uh(et,"start",N,m),ht=Uh(et,"stop",b,m),ft=Uh(et,"stop",M,m),gt=Uh(et,"stop",U,m),wt=Uh(et,"stop",G=>{dt&&G.preventDefault(),L&&L(G)},m),Kt=Uh(et,"start",H,m),zt=Uh(et,"stop",O,m),te=Uh(et,"stop",F,m),Pt=Uh(et,"stop",G=>{EM(G.target)||yt(!1),S&&S(G)},!1),Ht=ad(G=>{K.current||(K.current=G.currentTarget),EM(G.target)&&(yt(!0),A&&A(G)),R&&R(G)}),at=()=>{const G=K.current;return u&&u!=="button"&&!(G.tagName==="A"&&G.href)},ue=ad(G=>{y&&!G.repeat&&dt&&G.key===" "&&et.stop(G,()=>{et.start(G)}),G.target===G.currentTarget&&at()&&G.key===" "&&G.preventDefault(),I&&I(G),G.target===G.currentTarget&&at()&&G.key==="Enter"&&!f&&(G.preventDefault(),T&&T(G))}),Jt=ad(G=>{y&&G.key===" "&&dt&&!G.defaultPrevented&&et.stop(G,()=>{et.pulsate(G)}),k&&k(G),T&&G.target===G.currentTarget&&at()&&G.key===" "&&!G.defaultPrevented&&T(G)});let se=u;se==="button"&&(W.href||W.to)&&(se=x);const ae={};se==="button"?(ae.type=q===void 0?"button":q,ae.disabled=f):(!W.href&&!W.to&&(ae.role="button"),f&&(ae["aria-disabled"]=f));const Ce=ss(n,K),le={...r,centerRipple:a,component:u,disabled:f,disableRipple:d,disableTouchRipple:m,focusRipple:y,tabIndex:V,focusVisible:dt},ct=Fut(le);return st.jsxs(Vut,{as:se,className:je(ct.root,l),ownerState:le,onBlur:Pt,onClick:T,onContextMenu:ht,onFocus:Ht,onKeyDown:ue,onKeyUp:Jt,onMouseDown:nt,onMouseLeave:wt,onMouseUp:gt,onDragLeave:ft,onTouchEnd:zt,onTouchMove:te,onTouchStart:Kt,ref:Ce,tabIndex:f?-1:V,type:q,...ae,...W,children:[o,xt?st.jsx(kut,{ref:Q,center:a,...X}):null]})});function Uh(i,e,n,r=!1){return ad(s=>(n&&n(s),r||i[e](s),!0))}function Hut(i){return Tn("MuiDivider",i)}const qB=_n("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Gut=i=>{const{absolute:e,children:n,classes:r,flexItem:s,light:a,orientation:o,textAlign:l,variant:u}=i;return wn({root:["root",e&&"absolute",u,a&&"light",o==="vertical"&&"vertical",s&&"flexItem",n&&"withChildren",n&&o==="vertical"&&"withChildrenVertical",l==="right"&&o!=="vertical"&&"textAlignRight",l==="left"&&o!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",o==="vertical"&&"wrapperVertical"]},Hut,r)},jut=me("div",{name:"MuiDivider",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,n.orientation==="vertical"&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&n.orientation==="vertical"&&e.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&e.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&e.textAlignLeft]}})(En(({theme:i})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(i.vars||i).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:i.vars?`rgba(${i.vars.palette.dividerChannel} / 0.08)`:Os(i.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:i.spacing(2),marginRight:i.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:i.spacing(1),marginBottom:i.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&e.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(i.vars||i).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>e.orientation==="vertical"&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(i.vars||i).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>e.textAlign==="right"&&e.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>e.textAlign==="left"&&e.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),qut=me("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.wrapper,n.orientation==="vertical"&&e.wrapperVertical]}})(En(({theme:i})=>({display:"inline-block",paddingLeft:`calc(${i.spacing(1)} * 1.2)`,paddingRight:`calc(${i.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${i.spacing(1)} * 1.2)`,paddingBottom:`calc(${i.spacing(1)} * 1.2)`}}]}))),J1=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiDivider"}),{absolute:s=!1,children:a,className:o,orientation:l="horizontal",component:u=a||l==="vertical"?"div":"hr",flexItem:f=!1,light:d=!1,role:m=u!=="hr"?"separator":void 0,textAlign:y="center",variant:_="fullWidth",...x}=r,S={...r,absolute:s,component:u,flexItem:f,light:d,orientation:l,role:m,textAlign:y,variant:_},T=Gut(S);return st.jsx(jut,{as:u,className:je(T.root,o),role:m,ref:n,ownerState:S,"aria-orientation":m==="separator"&&(u!=="hr"||l==="vertical")?l:void 0,...x,children:a?st.jsx(qut,{className:T.wrapper,ownerState:S,children:a}):null})});J1&&(J1.muiSkipListHighlight=!0);function $ut(i){return Tn("MuiListItemIcon",i)}const $B=_n("MuiListItemIcon",["root","alignItemsFlexStart"]),Wut=i=>{const{alignItems:e,classes:n}=i;return wn({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},$ut,n)},Xut=me("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(En(({theme:i})=>({minWidth:56,color:(i.vars||i).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),dx=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiListItemIcon"}),{className:s,...a}=r,o=tt.useContext(wM),l={...r,alignItems:o.alignItems},u=Wut(l);return st.jsx(Xut,{className:je(u.root,s),ownerState:l,ref:n,...a})});function Yut(i){return typeof i.main=="string"}function Kut(i,e=[]){if(!Yut(i))return!1;for(const n of e)if(!i.hasOwnProperty(n)||typeof i[n]!="string")return!1;return!0}function Ds(i=[]){return([,e])=>e&&Kut(e,i)}function Zut(i){return Tn("MuiTypography",i)}_n("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Qut={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Jut=glt(),tct=i=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:s,variant:a,classes:o}=i,l={root:["root",a,i.align!=="inherit"&&`align${Fe(e)}`,n&&"gutterBottom",r&&"noWrap",s&&"paragraph"]};return wn(l,Zut,o)},ect=me("span",{name:"MuiTypography",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${Fe(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(En(({theme:i})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(i.typography).filter(([n,r])=>n!=="inherit"&&r&&typeof r=="object").map(([n,r])=>({props:{variant:n},style:r})),...Object.entries(i.palette).filter(Ds()).map(([n])=>({props:{color:n},style:{color:(i.vars||i).palette[n].main}})),...Object.entries(((e=i.palette)==null?void 0:e.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${Fe(n)}`},style:{color:(i.vars||i).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),WB={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},vc=tt.forwardRef(function(e,n){const{color:r,...s}=kn({props:e,name:"MuiTypography"}),a=!Qut[r],o=Jut({...s,...a&&{color:r}}),{align:l="inherit",className:u,component:f,gutterBottom:d=!1,noWrap:m=!1,paragraph:y=!1,variant:_="body1",variantMapping:x=WB,...S}=o,T={...o,align:l,color:r,className:u,component:f,gutterBottom:d,noWrap:m,paragraph:y,variant:_,variantMapping:x},b=f||(y?"p":x[_]||WB[_])||"span",M=tct(T);return st.jsx(ect,{as:b,ref:n,className:je(M.root,u),...S,ownerState:T,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...S.style}})}),XB=_n("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function nct(i){return Tn("MuiMenuItem",i)}const px=_n("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),ict=(i,e)=>{const{ownerState:n}=i;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},rct=i=>{const{disabled:e,dense:n,divider:r,disableGutters:s,selected:a,classes:o}=i,u=wn({root:["root",n&&"dense",e&&"disabled",!s&&"gutters",r&&"divider",a&&"selected"]},nct,o);return{...o,...u}},sct=me(E2,{shouldForwardProp:i=>xo(i)||i==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:ict})(En(({theme:i})=>({...i.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(i.vars||i).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${px.selected}`]:{backgroundColor:i.vars?`rgba(${i.vars.palette.primary.mainChannel} / ${i.vars.palette.action.selectedOpacity})`:Os(i.palette.primary.main,i.palette.action.selectedOpacity),[`&.${px.focusVisible}`]:{backgroundColor:i.vars?`rgba(${i.vars.palette.primary.mainChannel} / calc(${i.vars.palette.action.selectedOpacity} + ${i.vars.palette.action.focusOpacity}))`:Os(i.palette.primary.main,i.palette.action.selectedOpacity+i.palette.action.focusOpacity)}},[`&.${px.selected}:hover`]:{backgroundColor:i.vars?`rgba(${i.vars.palette.primary.mainChannel} / calc(${i.vars.palette.action.selectedOpacity} + ${i.vars.palette.action.hoverOpacity}))`:Os(i.palette.primary.main,i.palette.action.selectedOpacity+i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:i.vars?`rgba(${i.vars.palette.primary.mainChannel} / ${i.vars.palette.action.selectedOpacity})`:Os(i.palette.primary.main,i.palette.action.selectedOpacity)}},[`&.${px.focusVisible}`]:{backgroundColor:(i.vars||i).palette.action.focus},[`&.${px.disabled}`]:{opacity:(i.vars||i).palette.action.disabledOpacity},[`& + .${qB.root}`]:{marginTop:i.spacing(1),marginBottom:i.spacing(1)},[`& + .${qB.inset}`]:{marginLeft:52},[`& .${XB.root}`]:{marginTop:0,marginBottom:0},[`& .${XB.inset}`]:{paddingLeft:36},[`& .${$B.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(i.vars||i).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[i.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...i.typography.body2,[`& .${$B.root} svg`]:{fontSize:"1.25rem"}}}]}))),_0=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiMenuItem"}),{autoFocus:s=!1,component:a="li",dense:o=!1,divider:l=!1,disableGutters:u=!1,focusVisibleClassName:f,role:d="menuitem",tabIndex:m,className:y,..._}=r,x=tt.useContext(wM),S=tt.useMemo(()=>({dense:o||x.dense||!1,disableGutters:u}),[x.dense,o,u]),T=tt.useRef(null);Hf(()=>{s&&T.current&&T.current.focus()},[s]);const b={...r,dense:S.dense,divider:l,disableGutters:u},M=rct(r),R=ss(T,n);let A;return r.disabled||(A=m!==void 0?m:-1),st.jsx(wM.Provider,{value:S,children:st.jsx(sct,{ref:R,role:d,tabIndex:A,component:a,focusVisibleClassName:je(M.focusVisible,f),className:je(M.root,y),..._,ownerState:b,classes:M})})});function act(i){return Tn("MuiCircularProgress",i)}_n("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Tp=44,eP=gm`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,nP=gm`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,oct=typeof eP!="string"?P_`
        animation: ${eP} 1.4s linear infinite;
      `:null,lct=typeof nP!="string"?P_`
        animation: ${nP} 1.4s ease-in-out infinite;
      `:null,uct=i=>{const{classes:e,variant:n,color:r,disableShrink:s}=i,a={root:["root",n,`color${Fe(r)}`],svg:["svg"],circle:["circle",`circle${Fe(n)}`,s&&"circleDisableShrink"]};return wn(a,act,e)},cct=me("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,e[n.variant],e[`color${Fe(n.color)}`]]}})(En(({theme:i})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:i.transitions.create("transform")}},{props:{variant:"indeterminate"},style:oct||{animation:`${eP} 1.4s linear infinite`}},...Object.entries(i.palette).filter(Ds()).map(([e])=>({props:{color:e},style:{color:(i.vars||i).palette[e].main}}))]}))),fct=me("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(i,e)=>e.svg})({display:"block"}),hct=me("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.circle,e[`circle${Fe(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(En(({theme:i})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:i.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:lct||{animation:`${nP} 1.4s ease-in-out infinite`}}]}))),X3=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiCircularProgress"}),{className:s,color:a="primary",disableShrink:o=!1,size:l=40,style:u,thickness:f=3.6,value:d=0,variant:m="indeterminate",...y}=r,_={...r,color:a,disableShrink:o,size:l,thickness:f,value:d,variant:m},x=uct(_),S={},T={},b={};if(m==="determinate"){const M=2*Math.PI*((Tp-f)/2);S.strokeDasharray=M.toFixed(3),b["aria-valuenow"]=Math.round(d),S.strokeDashoffset=`${((100-d)/100*M).toFixed(3)}px`,T.transform="rotate(-90deg)"}return st.jsx(cct,{className:je(x.root,s),style:{width:l,height:l,...T,...u},ownerState:_,ref:n,role:"progressbar",...b,...y,children:st.jsx(fct,{className:x.svg,ownerState:_,viewBox:`${Tp/2} ${Tp/2} ${Tp} ${Tp}`,children:st.jsx(hct,{className:x.circle,style:S,ownerState:_,cx:Tp,cy:Tp,r:(Tp-f)/2,fill:"none",strokeWidth:f})})})});function dct(i){return Tn("MuiIconButton",i)}const YB=_n("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),pct=i=>{const{classes:e,disabled:n,color:r,edge:s,size:a,loading:o}=i,l={root:["root",o&&"loading",n&&"disabled",r!=="default"&&`color${Fe(r)}`,s&&`edge${Fe(s)}`,`size${Fe(a)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return wn(l,dct,e)},mct=me(E2,{name:"MuiIconButton",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,n.loading&&e.loading,n.color!=="default"&&e[`color${Fe(n.color)}`],n.edge&&e[`edge${Fe(n.edge)}`],e[`size${Fe(n.size)}`]]}})(En(({theme:i})=>({textAlign:"center",flex:"0 0 auto",fontSize:i.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(i.vars||i).palette.action.active,transition:i.transitions.create("background-color",{duration:i.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":i.vars?`rgba(${i.vars.palette.action.activeChannel} / ${i.vars.palette.action.hoverOpacity})`:Os(i.palette.action.active,i.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),En(({theme:i})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(i.palette).filter(Ds()).map(([e])=>({props:{color:e},style:{color:(i.vars||i).palette[e].main}})),...Object.entries(i.palette).filter(Ds()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":i.vars?`rgba(${(i.vars||i).palette[e].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:Os((i.vars||i).palette[e].main,i.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:i.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:i.typography.pxToRem(28)}}],[`&.${YB.disabled}`]:{backgroundColor:"transparent",color:(i.vars||i).palette.action.disabled},[`&.${YB.loading}`]:{color:"transparent"}}))),gct=me("span",{name:"MuiIconButton",slot:"LoadingIndicator",overridesResolver:(i,e)=>e.loadingIndicator})(({theme:i})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(i.vars||i).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),SG=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiIconButton"}),{edge:s=!1,children:a,className:o,color:l="default",disabled:u=!1,disableFocusRipple:f=!1,size:d="medium",id:m,loading:y=null,loadingIndicator:_,...x}=r,S=N_(m),T=_??st.jsx(X3,{"aria-labelledby":S,color:"inherit",size:16}),b={...r,edge:s,color:l,disabled:u,disableFocusRipple:f,loading:y,loadingIndicator:T,size:d},M=pct(b);return st.jsxs(mct,{id:y?S:m,className:je(M.root,o),centerRipple:!0,focusRipple:!f,disabled:u||y,ref:n,...x,ownerState:b,children:[typeof y=="boolean"&&st.jsx("span",{className:M.loadingWrapper,style:{display:"contents"},children:st.jsx(gct,{className:M.loadingIndicator,ownerState:b,children:y&&T})}),a]})}),yct=ga(st.jsx("path",{d:"M8.4 18.2c.38.5.6 1.12.6 1.8 0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3c.44 0 .85.09 1.23.26l1.41-1.77c-.92-1.03-1.29-2.39-1.09-3.69l-2.03-.68c-.54.83-1.46 1.38-2.52 1.38-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3c0 .07 0 .14-.01.21l2.03.68c.64-1.21 1.82-2.09 3.22-2.32V5.91C9.96 5.57 9 4.4 9 3c0-1.66 1.34-3 3-3s3 1.34 3 3c0 1.4-.96 2.57-2.25 2.91v2.16c1.4.23 2.58 1.11 3.22 2.32L18 9.71V9.5c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3c-1.06 0-1.98-.55-2.52-1.37l-2.03.68c.2 1.29-.16 2.65-1.09 3.69l1.41 1.77Q17.34 17 18 17c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3c0-.68.22-1.3.6-1.8l-1.41-1.77c-1.35.75-3.01.76-4.37 0z"}),"Hub");var el="top",Mu="bottom",Cu="right",nl="left",Y3="auto",GS=[el,Mu,Cu,nl],e_="start",tS="end",vct="clippingParents",EG="viewport",mx="popper",_ct="reference",KB=GS.reduce(function(i,e){return i.concat([e+"-"+e_,e+"-"+tS])},[]),TG=[].concat(GS,[Y3]).reduce(function(i,e){return i.concat([e,e+"-"+e_,e+"-"+tS])},[]),bct="beforeRead",xct="read",Sct="afterRead",Ect="beforeMain",Tct="main",wct="afterMain",Act="beforeWrite",Mct="write",Cct="afterWrite",Rct=[bct,xct,Sct,Ect,Tct,wct,Act,Mct,Cct];function Gf(i){return i?(i.nodeName||"").toLowerCase():null}function Vl(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var e=i.ownerDocument;return e&&e.defaultView||window}return i}function py(i){var e=Vl(i).Element;return i instanceof e||i instanceof Element}function Tu(i){var e=Vl(i).HTMLElement;return i instanceof e||i instanceof HTMLElement}function K3(i){if(typeof ShadowRoot>"u")return!1;var e=Vl(i).ShadowRoot;return i instanceof e||i instanceof ShadowRoot}function Oct(i){var e=i.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},a=e.elements[n];!Tu(a)||!Gf(a)||(Object.assign(a.style,r),Object.keys(s).forEach(function(o){var l=s[o];l===!1?a.removeAttribute(o):a.setAttribute(o,l===!0?"":l)}))})}function Ict(i){var e=i.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],a=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),l=o.reduce(function(u,f){return u[f]="",u},{});!Tu(s)||!Gf(s)||(Object.assign(s.style,l),Object.keys(a).forEach(function(u){s.removeAttribute(u)}))})}}const Dct={name:"applyStyles",enabled:!0,phase:"write",fn:Oct,effect:Ict,requires:["computeStyles"]};function Nf(i){return i.split("-")[0]}var Zg=Math.max,RM=Math.min,n_=Math.round;function iP(){var i=navigator.userAgentData;return i!=null&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function wG(){return!/^((?!chrome|android).)*safari/i.test(iP())}function i_(i,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=i.getBoundingClientRect(),s=1,a=1;e&&Tu(i)&&(s=i.offsetWidth>0&&n_(r.width)/i.offsetWidth||1,a=i.offsetHeight>0&&n_(r.height)/i.offsetHeight||1);var o=py(i)?Vl(i):window,l=o.visualViewport,u=!wG()&&n,f=(r.left+(u&&l?l.offsetLeft:0))/s,d=(r.top+(u&&l?l.offsetTop:0))/a,m=r.width/s,y=r.height/a;return{width:m,height:y,top:d,right:f+m,bottom:d+y,left:f,x:f,y:d}}function Z3(i){var e=i_(i),n=i.offsetWidth,r=i.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:i.offsetLeft,y:i.offsetTop,width:n,height:r}}function AG(i,e){var n=e.getRootNode&&e.getRootNode();if(i.contains(e))return!0;if(n&&K3(n)){var r=e;do{if(r&&i.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function md(i){return Vl(i).getComputedStyle(i)}function Pct(i){return["table","td","th"].indexOf(Gf(i))>=0}function ym(i){return((py(i)?i.ownerDocument:i.document)||window.document).documentElement}function T2(i){return Gf(i)==="html"?i:i.assignedSlot||i.parentNode||(K3(i)?i.host:null)||ym(i)}function ZB(i){return!Tu(i)||md(i).position==="fixed"?null:i.offsetParent}function Nct(i){var e=/firefox/i.test(iP()),n=/Trident/i.test(iP());if(n&&Tu(i)){var r=md(i);if(r.position==="fixed")return null}var s=T2(i);for(K3(s)&&(s=s.host);Tu(s)&&["html","body"].indexOf(Gf(s))<0;){var a=md(s);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return s;s=s.parentNode}return null}function jS(i){for(var e=Vl(i),n=ZB(i);n&&Pct(n)&&md(n).position==="static";)n=ZB(n);return n&&(Gf(n)==="html"||Gf(n)==="body"&&md(n).position==="static")?e:n||Nct(i)||e}function Q3(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function c1(i,e,n){return Zg(i,RM(e,n))}function Lct(i,e,n){var r=c1(i,e,n);return r>n?n:r}function MG(){return{top:0,right:0,bottom:0,left:0}}function CG(i){return Object.assign({},MG(),i)}function RG(i,e){return e.reduce(function(n,r){return n[r]=i,n},{})}var Uct=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,CG(typeof e!="number"?e:RG(e,GS))};function kct(i){var e,n=i.state,r=i.name,s=i.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,l=Nf(n.placement),u=Q3(l),f=[nl,Cu].indexOf(l)>=0,d=f?"height":"width";if(!(!a||!o)){var m=Uct(s.padding,n),y=Z3(a),_=u==="y"?el:nl,x=u==="y"?Mu:Cu,S=n.rects.reference[d]+n.rects.reference[u]-o[u]-n.rects.popper[d],T=o[u]-n.rects.reference[u],b=jS(a),M=b?u==="y"?b.clientHeight||0:b.clientWidth||0:0,R=S/2-T/2,A=m[_],I=M-y[d]-m[x],k=M/2-y[d]/2+R,N=c1(A,k,I),L=u;n.modifiersData[r]=(e={},e[L]=N,e.centerOffset=N-k,e)}}function zct(i){var e=i.state,n=i.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||AG(e.elements.popper,s)&&(e.elements.arrow=s))}const Bct={name:"arrow",enabled:!0,phase:"main",fn:kct,effect:zct,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function r_(i){return i.split("-")[1]}var Fct={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Vct(i,e){var n=i.x,r=i.y,s=e.devicePixelRatio||1;return{x:n_(n*s)/s||0,y:n_(r*s)/s||0}}function QB(i){var e,n=i.popper,r=i.popperRect,s=i.placement,a=i.variation,o=i.offsets,l=i.position,u=i.gpuAcceleration,f=i.adaptive,d=i.roundOffsets,m=i.isFixed,y=o.x,_=y===void 0?0:y,x=o.y,S=x===void 0?0:x,T=typeof d=="function"?d({x:_,y:S}):{x:_,y:S};_=T.x,S=T.y;var b=o.hasOwnProperty("x"),M=o.hasOwnProperty("y"),R=nl,A=el,I=window;if(f){var k=jS(n),N="clientHeight",L="clientWidth";if(k===Vl(n)&&(k=ym(n),md(k).position!=="static"&&l==="absolute"&&(N="scrollHeight",L="scrollWidth")),k=k,s===el||(s===nl||s===Cu)&&a===tS){A=Mu;var U=m&&k===I&&I.visualViewport?I.visualViewport.height:k[N];S-=U-r.height,S*=u?1:-1}if(s===nl||(s===el||s===Mu)&&a===tS){R=Cu;var O=m&&k===I&&I.visualViewport?I.visualViewport.width:k[L];_-=O-r.width,_*=u?1:-1}}var F=Object.assign({position:l},f&&Fct),H=d===!0?Vct({x:_,y:S},Vl(n)):{x:_,y:S};if(_=H.x,S=H.y,u){var V;return Object.assign({},F,(V={},V[A]=M?"0":"",V[R]=b?"0":"",V.transform=(I.devicePixelRatio||1)<=1?"translate("+_+"px, "+S+"px)":"translate3d("+_+"px, "+S+"px, 0)",V))}return Object.assign({},F,(e={},e[A]=M?S+"px":"",e[R]=b?_+"px":"",e.transform="",e))}function Hct(i){var e=i.state,n=i.options,r=n.gpuAcceleration,s=r===void 0?!0:r,a=n.adaptive,o=a===void 0?!0:a,l=n.roundOffsets,u=l===void 0?!0:l,f={placement:Nf(e.placement),variation:r_(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,QB(Object.assign({},f,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,QB(Object.assign({},f,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Gct={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Hct,data:{}};var Sw={passive:!0};function jct(i){var e=i.state,n=i.instance,r=i.options,s=r.scroll,a=s===void 0?!0:s,o=r.resize,l=o===void 0?!0:o,u=Vl(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&f.forEach(function(d){d.addEventListener("scroll",n.update,Sw)}),l&&u.addEventListener("resize",n.update,Sw),function(){a&&f.forEach(function(d){d.removeEventListener("scroll",n.update,Sw)}),l&&u.removeEventListener("resize",n.update,Sw)}}const qct={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:jct,data:{}};var $ct={left:"right",right:"left",bottom:"top",top:"bottom"};function uA(i){return i.replace(/left|right|bottom|top/g,function(e){return $ct[e]})}var Wct={start:"end",end:"start"};function JB(i){return i.replace(/start|end/g,function(e){return Wct[e]})}function J3(i){var e=Vl(i),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function tL(i){return i_(ym(i)).left+J3(i).scrollLeft}function Xct(i,e){var n=Vl(i),r=ym(i),s=n.visualViewport,a=r.clientWidth,o=r.clientHeight,l=0,u=0;if(s){a=s.width,o=s.height;var f=wG();(f||!f&&e==="fixed")&&(l=s.offsetLeft,u=s.offsetTop)}return{width:a,height:o,x:l+tL(i),y:u}}function Yct(i){var e,n=ym(i),r=J3(i),s=(e=i.ownerDocument)==null?void 0:e.body,a=Zg(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Zg(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),l=-r.scrollLeft+tL(i),u=-r.scrollTop;return md(s||n).direction==="rtl"&&(l+=Zg(n.clientWidth,s?s.clientWidth:0)-a),{width:a,height:o,x:l,y:u}}function eL(i){var e=md(i),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function OG(i){return["html","body","#document"].indexOf(Gf(i))>=0?i.ownerDocument.body:Tu(i)&&eL(i)?i:OG(T2(i))}function f1(i,e){var n;e===void 0&&(e=[]);var r=OG(i),s=r===((n=i.ownerDocument)==null?void 0:n.body),a=Vl(r),o=s?[a].concat(a.visualViewport||[],eL(r)?r:[]):r,l=e.concat(o);return s?l:l.concat(f1(T2(o)))}function rP(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function Kct(i,e){var n=i_(i,!1,e==="fixed");return n.top=n.top+i.clientTop,n.left=n.left+i.clientLeft,n.bottom=n.top+i.clientHeight,n.right=n.left+i.clientWidth,n.width=i.clientWidth,n.height=i.clientHeight,n.x=n.left,n.y=n.top,n}function tF(i,e,n){return e===EG?rP(Xct(i,n)):py(e)?Kct(e,n):rP(Yct(ym(i)))}function Zct(i){var e=f1(T2(i)),n=["absolute","fixed"].indexOf(md(i).position)>=0,r=n&&Tu(i)?jS(i):i;return py(r)?e.filter(function(s){return py(s)&&AG(s,r)&&Gf(s)!=="body"}):[]}function Qct(i,e,n,r){var s=e==="clippingParents"?Zct(i):[].concat(e),a=[].concat(s,[n]),o=a[0],l=a.reduce(function(u,f){var d=tF(i,f,r);return u.top=Zg(d.top,u.top),u.right=RM(d.right,u.right),u.bottom=RM(d.bottom,u.bottom),u.left=Zg(d.left,u.left),u},tF(i,o,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function IG(i){var e=i.reference,n=i.element,r=i.placement,s=r?Nf(r):null,a=r?r_(r):null,o=e.x+e.width/2-n.width/2,l=e.y+e.height/2-n.height/2,u;switch(s){case el:u={x:o,y:e.y-n.height};break;case Mu:u={x:o,y:e.y+e.height};break;case Cu:u={x:e.x+e.width,y:l};break;case nl:u={x:e.x-n.width,y:l};break;default:u={x:e.x,y:e.y}}var f=s?Q3(s):null;if(f!=null){var d=f==="y"?"height":"width";switch(a){case e_:u[f]=u[f]-(e[d]/2-n[d]/2);break;case tS:u[f]=u[f]+(e[d]/2-n[d]/2);break}}return u}function eS(i,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?i.placement:r,a=n.strategy,o=a===void 0?i.strategy:a,l=n.boundary,u=l===void 0?vct:l,f=n.rootBoundary,d=f===void 0?EG:f,m=n.elementContext,y=m===void 0?mx:m,_=n.altBoundary,x=_===void 0?!1:_,S=n.padding,T=S===void 0?0:S,b=CG(typeof T!="number"?T:RG(T,GS)),M=y===mx?_ct:mx,R=i.rects.popper,A=i.elements[x?M:y],I=Qct(py(A)?A:A.contextElement||ym(i.elements.popper),u,d,o),k=i_(i.elements.reference),N=IG({reference:k,element:R,placement:s}),L=rP(Object.assign({},R,N)),U=y===mx?L:k,O={top:I.top-U.top+b.top,bottom:U.bottom-I.bottom+b.bottom,left:I.left-U.left+b.left,right:U.right-I.right+b.right},F=i.modifiersData.offset;if(y===mx&&F){var H=F[s];Object.keys(O).forEach(function(V){var X=[Cu,Mu].indexOf(V)>=0?1:-1,J=[el,Mu].indexOf(V)>=0?"y":"x";O[V]+=H[J]*X})}return O}function Jct(i,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,a=n.rootBoundary,o=n.padding,l=n.flipVariations,u=n.allowedAutoPlacements,f=u===void 0?TG:u,d=r_(r),m=d?l?KB:KB.filter(function(x){return r_(x)===d}):GS,y=m.filter(function(x){return f.indexOf(x)>=0});y.length===0&&(y=m);var _=y.reduce(function(x,S){return x[S]=eS(i,{placement:S,boundary:s,rootBoundary:a,padding:o})[Nf(S)],x},{});return Object.keys(_).sort(function(x,S){return _[x]-_[S]})}function tft(i){if(Nf(i)===Y3)return[];var e=uA(i);return[JB(i),e,JB(e)]}function eft(i){var e=i.state,n=i.options,r=i.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,a=s===void 0?!0:s,o=n.altAxis,l=o===void 0?!0:o,u=n.fallbackPlacements,f=n.padding,d=n.boundary,m=n.rootBoundary,y=n.altBoundary,_=n.flipVariations,x=_===void 0?!0:_,S=n.allowedAutoPlacements,T=e.options.placement,b=Nf(T),M=b===T,R=u||(M||!x?[uA(T)]:tft(T)),A=[T].concat(R).reduce(function(nt,ht){return nt.concat(Nf(ht)===Y3?Jct(e,{placement:ht,boundary:d,rootBoundary:m,padding:f,flipVariations:x,allowedAutoPlacements:S}):ht)},[]),I=e.rects.reference,k=e.rects.popper,N=new Map,L=!0,U=A[0],O=0;O<A.length;O++){var F=A[O],H=Nf(F),V=r_(F)===e_,X=[el,Mu].indexOf(H)>=0,J=X?"width":"height",q=eS(e,{placement:F,boundary:d,rootBoundary:m,altBoundary:y,padding:f}),W=X?V?Cu:nl:V?Mu:el;I[J]>k[J]&&(W=uA(W));var K=uA(W),et=[];if(a&&et.push(q[H]<=0),l&&et.push(q[W]<=0,q[K]<=0),et.every(function(nt){return nt})){U=F,L=!1;break}N.set(F,et)}if(L)for(var Q=x?3:1,dt=function(ht){var ft=A.find(function(gt){var wt=N.get(gt);if(wt)return wt.slice(0,ht).every(function(Kt){return Kt})});if(ft)return U=ft,"break"},yt=Q;yt>0;yt--){var xt=dt(yt);if(xt==="break")break}e.placement!==U&&(e.modifiersData[r]._skip=!0,e.placement=U,e.reset=!0)}}const nft={name:"flip",enabled:!0,phase:"main",fn:eft,requiresIfExists:["offset"],data:{_skip:!1}};function eF(i,e,n){return n===void 0&&(n={x:0,y:0}),{top:i.top-e.height-n.y,right:i.right-e.width+n.x,bottom:i.bottom-e.height+n.y,left:i.left-e.width-n.x}}function nF(i){return[el,Cu,Mu,nl].some(function(e){return i[e]>=0})}function ift(i){var e=i.state,n=i.name,r=e.rects.reference,s=e.rects.popper,a=e.modifiersData.preventOverflow,o=eS(e,{elementContext:"reference"}),l=eS(e,{altBoundary:!0}),u=eF(o,r),f=eF(l,s,a),d=nF(u),m=nF(f);e.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:f,isReferenceHidden:d,hasPopperEscaped:m},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":m})}const rft={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ift};function sft(i,e,n){var r=Nf(i),s=[nl,el].indexOf(r)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},e,{placement:i})):n,o=a[0],l=a[1];return o=o||0,l=(l||0)*s,[nl,Cu].indexOf(r)>=0?{x:l,y:o}:{x:o,y:l}}function aft(i){var e=i.state,n=i.options,r=i.name,s=n.offset,a=s===void 0?[0,0]:s,o=TG.reduce(function(d,m){return d[m]=sft(m,e.rects,a),d},{}),l=o[e.placement],u=l.x,f=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=f),e.modifiersData[r]=o}const oft={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:aft};function lft(i){var e=i.state,n=i.name;e.modifiersData[n]=IG({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const uft={name:"popperOffsets",enabled:!0,phase:"read",fn:lft,data:{}};function cft(i){return i==="x"?"y":"x"}function fft(i){var e=i.state,n=i.options,r=i.name,s=n.mainAxis,a=s===void 0?!0:s,o=n.altAxis,l=o===void 0?!1:o,u=n.boundary,f=n.rootBoundary,d=n.altBoundary,m=n.padding,y=n.tether,_=y===void 0?!0:y,x=n.tetherOffset,S=x===void 0?0:x,T=eS(e,{boundary:u,rootBoundary:f,padding:m,altBoundary:d}),b=Nf(e.placement),M=r_(e.placement),R=!M,A=Q3(b),I=cft(A),k=e.modifiersData.popperOffsets,N=e.rects.reference,L=e.rects.popper,U=typeof S=="function"?S(Object.assign({},e.rects,{placement:e.placement})):S,O=typeof U=="number"?{mainAxis:U,altAxis:U}:Object.assign({mainAxis:0,altAxis:0},U),F=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,H={x:0,y:0};if(k){if(a){var V,X=A==="y"?el:nl,J=A==="y"?Mu:Cu,q=A==="y"?"height":"width",W=k[A],K=W+T[X],et=W-T[J],Q=_?-L[q]/2:0,dt=M===e_?N[q]:L[q],yt=M===e_?-L[q]:-N[q],xt=e.elements.arrow,nt=_&&xt?Z3(xt):{width:0,height:0},ht=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:MG(),ft=ht[X],gt=ht[J],wt=c1(0,N[q],nt[q]),Kt=R?N[q]/2-Q-wt-ft-O.mainAxis:dt-wt-ft-O.mainAxis,zt=R?-N[q]/2+Q+wt+gt+O.mainAxis:yt+wt+gt+O.mainAxis,te=e.elements.arrow&&jS(e.elements.arrow),Pt=te?A==="y"?te.clientTop||0:te.clientLeft||0:0,Ht=(V=F==null?void 0:F[A])!=null?V:0,at=W+Kt-Ht-Pt,ue=W+zt-Ht,Jt=c1(_?RM(K,at):K,W,_?Zg(et,ue):et);k[A]=Jt,H[A]=Jt-W}if(l){var se,ae=A==="x"?el:nl,Ce=A==="x"?Mu:Cu,le=k[I],ct=I==="y"?"height":"width",G=le+T[ae],lt=le-T[Ce],mt=[el,nl].indexOf(b)!==-1,Ct=(se=F==null?void 0:F[I])!=null?se:0,bt=mt?G:le-N[ct]-L[ct]-Ct+O.altAxis,Mt=mt?le+N[ct]+L[ct]-Ct-O.altAxis:lt,Lt=_&&mt?Lct(bt,le,Mt):c1(_?bt:G,le,_?Mt:lt);k[I]=Lt,H[I]=Lt-le}e.modifiersData[r]=H}}const hft={name:"preventOverflow",enabled:!0,phase:"main",fn:fft,requiresIfExists:["offset"]};function dft(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function pft(i){return i===Vl(i)||!Tu(i)?J3(i):dft(i)}function mft(i){var e=i.getBoundingClientRect(),n=n_(e.width)/i.offsetWidth||1,r=n_(e.height)/i.offsetHeight||1;return n!==1||r!==1}function gft(i,e,n){n===void 0&&(n=!1);var r=Tu(e),s=Tu(e)&&mft(e),a=ym(e),o=i_(i,s,n),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&((Gf(e)!=="body"||eL(a))&&(l=pft(e)),Tu(e)?(u=i_(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):a&&(u.x=tL(a))),{x:o.left+l.scrollLeft-u.x,y:o.top+l.scrollTop-u.y,width:o.width,height:o.height}}function yft(i){var e=new Map,n=new Set,r=[];i.forEach(function(a){e.set(a.name,a)});function s(a){n.add(a.name);var o=[].concat(a.requires||[],a.requiresIfExists||[]);o.forEach(function(l){if(!n.has(l)){var u=e.get(l);u&&s(u)}}),r.push(a)}return i.forEach(function(a){n.has(a.name)||s(a)}),r}function vft(i){var e=yft(i);return Rct.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function _ft(i){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(i())})})),e}}function bft(i){var e=i.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var iF={placement:"bottom",modifiers:[],strategy:"absolute"};function rF(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function xft(i){i===void 0&&(i={});var e=i,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,a=s===void 0?iF:s;return function(l,u,f){f===void 0&&(f=a);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},iF,a),modifiersData:{},elements:{reference:l,popper:u},attributes:{},styles:{}},m=[],y=!1,_={state:d,setOptions:function(b){var M=typeof b=="function"?b(d.options):b;S(),d.options=Object.assign({},a,d.options,M),d.scrollParents={reference:py(l)?f1(l):l.contextElement?f1(l.contextElement):[],popper:f1(u)};var R=vft(bft([].concat(r,d.options.modifiers)));return d.orderedModifiers=R.filter(function(A){return A.enabled}),x(),_.update()},forceUpdate:function(){if(!y){var b=d.elements,M=b.reference,R=b.popper;if(rF(M,R)){d.rects={reference:gft(M,jS(R),d.options.strategy==="fixed"),popper:Z3(R)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(O){return d.modifiersData[O.name]=Object.assign({},O.data)});for(var A=0;A<d.orderedModifiers.length;A++){if(d.reset===!0){d.reset=!1,A=-1;continue}var I=d.orderedModifiers[A],k=I.fn,N=I.options,L=N===void 0?{}:N,U=I.name;typeof k=="function"&&(d=k({state:d,options:L,name:U,instance:_})||d)}}}},update:_ft(function(){return new Promise(function(T){_.forceUpdate(),T(d)})}),destroy:function(){S(),y=!0}};if(!rF(l,u))return _;_.setOptions(f).then(function(T){!y&&f.onFirstUpdate&&f.onFirstUpdate(T)});function x(){d.orderedModifiers.forEach(function(T){var b=T.name,M=T.options,R=M===void 0?{}:M,A=T.effect;if(typeof A=="function"){var I=A({state:d,name:b,instance:_,options:R}),k=function(){};m.push(I||k)}})}function S(){m.forEach(function(T){return T()}),m=[]}return _}}var Sft=[qct,uft,Gct,Dct,oft,nft,hft,Bct,rft],Eft=xft({defaultModifiers:Sft});function Tft(i){return Tn("MuiPopper",i)}_n("MuiPopper",["root"]);function wft(i,e){if(e==="ltr")return i;switch(i){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return i}}function sP(i){return typeof i=="function"?i():i}function Aft(i){return i.nodeType!==void 0}const Mft=i=>{const{classes:e}=i;return wn({root:["root"]},Tft,e)},Cft={},Rft=tt.forwardRef(function(e,n){const{anchorEl:r,children:s,direction:a,disablePortal:o,modifiers:l,open:u,placement:f,popperOptions:d,popperRef:m,slotProps:y={},slots:_={},TransitionProps:x,ownerState:S,...T}=e,b=tt.useRef(null),M=ss(b,n),R=tt.useRef(null),A=ss(R,m),I=tt.useRef(A);Hf(()=>{I.current=A},[A]),tt.useImperativeHandle(m,()=>R.current,[]);const k=wft(f,a),[N,L]=tt.useState(k),[U,O]=tt.useState(sP(r));tt.useEffect(()=>{R.current&&R.current.forceUpdate()}),tt.useEffect(()=>{r&&O(sP(r))},[r]),Hf(()=>{if(!U||!u)return;const J=K=>{L(K.placement)};let q=[{name:"preventOverflow",options:{altBoundary:o}},{name:"flip",options:{altBoundary:o}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:K})=>{J(K)}}];l!=null&&(q=q.concat(l)),d&&d.modifiers!=null&&(q=q.concat(d.modifiers));const W=Eft(U,b.current,{placement:k,...d,modifiers:q});return I.current(W),()=>{W.destroy(),I.current(null)}},[U,o,l,u,d,k]);const F={placement:N};x!==null&&(F.TransitionProps=x);const H=Mft(e),V=_.root??"div",X=aG({elementType:V,externalSlotProps:y.root,externalForwardedProps:T,additionalProps:{role:"tooltip",ref:M},ownerState:e,className:H.root});return st.jsx(V,{...X,children:typeof s=="function"?s(F):s})}),Oft=tt.forwardRef(function(e,n){const{anchorEl:r,children:s,container:a,direction:o="ltr",disablePortal:l=!1,keepMounted:u=!1,modifiers:f,open:d,placement:m="bottom",popperOptions:y=Cft,popperRef:_,style:x,transition:S=!1,slotProps:T={},slots:b={},...M}=e,[R,A]=tt.useState(!0),I=()=>{A(!1)},k=()=>{A(!0)};if(!u&&!d&&(!S||R))return null;let N;if(a)N=a;else if(r){const O=sP(r);N=O&&Aft(O)?Fl(O).body:Fl(null).body}const L=!d&&u&&(!S||R)?"none":void 0,U=S?{in:d,onEnter:I,onExited:k}:void 0;return st.jsx(_G,{disablePortal:l,container:N,children:st.jsx(Rft,{anchorEl:r,direction:o,disablePortal:l,modifiers:f,ref:n,open:S?!R:d,placement:m,popperOptions:y,popperRef:_,slotProps:T,slots:b,...M,style:{position:"fixed",top:0,left:0,display:L,...x},TransitionProps:U,children:s})})}),Ift=me(Oft,{name:"MuiPopper",slot:"Root",overridesResolver:(i,e)=>e.root})({}),DG=tt.forwardRef(function(e,n){const r=x2(),s=kn({props:e,name:"MuiPopper"}),{anchorEl:a,component:o,components:l,componentsProps:u,container:f,disablePortal:d,keepMounted:m,modifiers:y,open:_,placement:x,popperOptions:S,popperRef:T,transition:b,slots:M,slotProps:R,...A}=s,I=(M==null?void 0:M.root)??(l==null?void 0:l.Root),k={anchorEl:a,container:f,disablePortal:d,keepMounted:m,modifiers:y,open:_,placement:x,popperOptions:S,popperRef:T,transition:b,...A};return st.jsx(Ift,{as:o,direction:r?"rtl":"ltr",slots:{root:I},slotProps:R??u,...k,ref:n})});function Dft(i){return Tn("MuiTooltip",i)}const qr=_n("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function Pft(i){return Math.round(i*1e5)/1e5}const Nft=i=>{const{classes:e,disableInteractive:n,arrow:r,touch:s,placement:a}=i,o={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",s&&"touch",`tooltipPlacement${Fe(a.split("-")[0])}`],arrow:["arrow"]};return wn(o,Dft,e)},Lft=me(DG,{name:"MuiTooltip",slot:"Popper",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(En(({theme:i})=>({zIndex:(i.vars||i).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:e})=>!e.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:e})=>!e,style:{pointerEvents:"none"}},{props:({ownerState:e})=>e.arrow,style:{[`&[data-popper-placement*="bottom"] .${qr.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${qr.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${qr.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${qr.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="right"] .${qr.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="right"] .${qr.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="left"] .${qr.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="left"] .${qr.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),Uft=me("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${Fe(n.placement.split("-")[0])}`]]}})(En(({theme:i})=>({backgroundColor:i.vars?i.vars.palette.Tooltip.bg:Os(i.palette.grey[700],.92),borderRadius:(i.vars||i).shape.borderRadius,color:(i.vars||i).palette.common.white,fontFamily:i.typography.fontFamily,padding:"4px 8px",fontSize:i.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:i.typography.fontWeightMedium,[`.${qr.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${qr.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${qr.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${qr.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:e})=>e.arrow,style:{position:"relative",margin:0}},{props:({ownerState:e})=>e.touch,style:{padding:"8px 16px",fontSize:i.typography.pxToRem(14),lineHeight:`${Pft(16/14)}em`,fontWeight:i.typography.fontWeightRegular}},{props:({ownerState:e})=>!e.isRtl,style:{[`.${qr.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${qr.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:e})=>!e.isRtl&&e.touch,style:{[`.${qr.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${qr.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:e})=>!!e.isRtl,style:{[`.${qr.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${qr.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:e})=>!!e.isRtl&&e.touch,style:{[`.${qr.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${qr.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${qr.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${qr.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),kft=me("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(i,e)=>e.arrow})(En(({theme:i})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:i.vars?i.vars.palette.Tooltip.bg:Os(i.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let Ew=!1;const sF=new b2;let gx={x:0,y:0};function Tw(i,e){return(n,...r)=>{e&&e(n,...r),i(n,...r)}}const zft=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiTooltip"}),{arrow:s=!1,children:a,classes:o,components:l={},componentsProps:u={},describeChild:f=!1,disableFocusListener:d=!1,disableHoverListener:m=!1,disableInteractive:y=!1,disableTouchListener:_=!1,enterDelay:x=100,enterNextDelay:S=0,enterTouchDelay:T=700,followCursor:b=!1,id:M,leaveDelay:R=0,leaveTouchDelay:A=1500,onClose:I,onOpen:k,open:N,placement:L="bottom",PopperComponent:U,PopperProps:O={},slotProps:F={},slots:H={},title:V,TransitionComponent:X,TransitionProps:J,...q}=r,W=tt.isValidElement(a)?a:st.jsx("span",{children:a}),K=L_(),et=x2(),[Q,dt]=tt.useState(),[yt,xt]=tt.useState(null),nt=tt.useRef(!1),ht=y||b,ft=Fg(),gt=Fg(),wt=Fg(),Kt=Fg(),[zt,te]=Z1({controlled:N,default:!1,name:"Tooltip",state:"open"});let Pt=zt;const Ht=N_(M),at=tt.useRef(),ue=ad(()=>{at.current!==void 0&&(document.body.style.WebkitUserSelect=at.current,at.current=void 0),Kt.clear()});tt.useEffect(()=>ue,[ue]);const Jt=ze=>{sF.clear(),Ew=!0,te(!0),k&&!Pt&&k(ze)},se=ad(ze=>{sF.start(800+R,()=>{Ew=!1}),te(!1),I&&Pt&&I(ze),ft.start(K.transitions.duration.shortest,()=>{nt.current=!1})}),ae=ze=>{nt.current&&ze.type!=="touchstart"||(Q&&Q.removeAttribute("title"),gt.clear(),wt.clear(),x||Ew&&S?gt.start(Ew?S:x,()=>{Jt(ze)}):Jt(ze))},Ce=ze=>{gt.clear(),wt.start(R,()=>{se(ze)})},[,le]=tt.useState(!1),ct=ze=>{EM(ze.target)||(le(!1),Ce(ze))},G=ze=>{Q||dt(ze.currentTarget),EM(ze.target)&&(le(!0),ae(ze))},lt=ze=>{nt.current=!0;const Qe=W.props;Qe.onTouchStart&&Qe.onTouchStart(ze)},mt=ze=>{lt(ze),wt.clear(),ft.clear(),ue(),at.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Kt.start(T,()=>{document.body.style.WebkitUserSelect=at.current,ae(ze)})},Ct=ze=>{W.props.onTouchEnd&&W.props.onTouchEnd(ze),ue(),wt.start(A,()=>{se(ze)})};tt.useEffect(()=>{if(!Pt)return;function ze(Qe){Qe.key==="Escape"&&se(Qe)}return document.addEventListener("keydown",ze),()=>{document.removeEventListener("keydown",ze)}},[se,Pt]);const bt=ss(My(W),dt,n);!V&&V!==0&&(Pt=!1);const Mt=tt.useRef(),Lt=ze=>{const Qe=W.props;Qe.onMouseMove&&Qe.onMouseMove(ze),gx={x:ze.clientX,y:ze.clientY},Mt.current&&Mt.current.update()},Qt={},Oe=typeof V=="string";f?(Qt.title=!Pt&&Oe&&!m?V:null,Qt["aria-describedby"]=Pt?Ht:null):(Qt["aria-label"]=Oe?V:null,Qt["aria-labelledby"]=Pt&&!Oe?Ht:null);const jt={...Qt,...q,...W.props,className:je(q.className,W.props.className),onTouchStart:lt,ref:bt,...b?{onMouseMove:Lt}:{}},ve={};_||(jt.onTouchStart=mt,jt.onTouchEnd=Ct),m||(jt.onMouseOver=Tw(ae,jt.onMouseOver),jt.onMouseLeave=Tw(Ce,jt.onMouseLeave),ht||(ve.onMouseOver=ae,ve.onMouseLeave=Ce)),d||(jt.onFocus=Tw(G,jt.onFocus),jt.onBlur=Tw(ct,jt.onBlur),ht||(ve.onFocus=G,ve.onBlur=ct));const we={...r,isRtl:et,arrow:s,disableInteractive:ht,placement:L,PopperComponentProp:U,touch:nt.current},Me=typeof F.popper=="function"?F.popper(we):F.popper,Zt=tt.useMemo(()=>{var Qe,Lr;let ze=[{name:"arrow",enabled:!!yt,options:{element:yt,padding:4}}];return(Qe=O.popperOptions)!=null&&Qe.modifiers&&(ze=ze.concat(O.popperOptions.modifiers)),(Lr=Me==null?void 0:Me.popperOptions)!=null&&Lr.modifiers&&(ze=ze.concat(Me.popperOptions.modifiers)),{...O.popperOptions,...Me==null?void 0:Me.popperOptions,modifiers:ze}},[yt,O.popperOptions,Me==null?void 0:Me.popperOptions]),Re=Nft(we),Ie=typeof F.transition=="function"?F.transition(we):F.transition,en={slots:{popper:l.Popper,transition:l.Transition??X,tooltip:l.Tooltip,arrow:l.Arrow,...H},slotProps:{arrow:F.arrow??u.arrow,popper:{...O,...Me??u.popper},tooltip:F.tooltip??u.tooltip,transition:{...J,...Ie??u.transition}}},[At,Te]=gi("popper",{elementType:Lft,externalForwardedProps:en,ownerState:we,className:je(Re.popper,O==null?void 0:O.className)}),[Xt,re]=gi("transition",{elementType:MM,externalForwardedProps:en,ownerState:we}),[Ae,Ee]=gi("tooltip",{elementType:Uft,className:Re.tooltip,externalForwardedProps:en,ownerState:we}),[sn,Wn]=gi("arrow",{elementType:kft,className:Re.arrow,externalForwardedProps:en,ownerState:we,ref:xt});return st.jsxs(tt.Fragment,{children:[tt.cloneElement(W,jt),st.jsx(At,{as:U??DG,placement:L,anchorEl:b?{getBoundingClientRect:()=>({top:gx.y,left:gx.x,right:gx.x,bottom:gx.y,width:0,height:0})}:Q,popperRef:Mt,open:Q?Pt:!1,id:Ht,transition:!0,...ve,...Te,popperOptions:Zt,children:({TransitionProps:ze})=>st.jsx(Xt,{timeout:K.transitions.duration.shorter,...ze,...re,children:st.jsxs(Ae,{...Ee,children:[V,s?st.jsx(sn,{...Wn}):null]})})})]})}),Bft=ga(st.jsx("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"}),"Login"),Fft=ga(st.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),Vft=ga(st.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout"),Hft=ga(st.jsx("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PersonOutlineOutlined"),gd=HS({palette:{background:{paper:"#fff",form:"#f3f3f3",formInput:"#000"},text:{titleBig:"#173A5E",primary:"#fff",secondary:"#46505A",white:"#fff"},action:{progress:"#001E3C",success:"#1976d2",deactivate:"#d32f2f"},success:{dark:"#009688"},canvas:{canvasBackgraundColor:"#002"},buttons:{buttonHomeScreen:"#f1f1f1"},formStyles:{containerBackgroundColor:"#f0f0f0",cardBackgroundColor:"#f9f9f9",cardBoxShadow:"0 10px 30px rgba(0,0,0,0.2)",buttonForm:"#001E3C",borderColor:"#ccc"}}}),PG=gd.palette.buttons.buttonHomeScreen,Gft={display:"flex",alignItems:"center",textAlign:"center",position:"absolute",zIndex:10,top:"30px",right:"30px"},jft={width:55,height:55,backgroundColor:"transparent",border:`2px solid ${PG}`},qft={color:PG,fontSize:"2.5rem"},yi=Drt((i,e)=>({isAddNodeActive:!1,setIsAddNodeActive:n=>i({isAddNodeActive:n}),isLoginWindowActive:!1,setIsLoginWindowActive:n=>i({isLoginWindowActive:n}),isLoadingFirestore:!1,setIsLoadingFirestore:n=>i({isLoadingFirestore:n}),isUploadFirestore:!1,setIsUploadFirestore:n=>i({isUploadFirestore:n}),userLoginData:{displayName:"",email:"",photoURL:""},setUserLoginDAta:n=>i({userLoginData:n}),isUserLogin:!1,setIsUserLogin:n=>i({isUserLogin:n}),showAlert:!1,alertMessage:"",alertSeverity:"success",triggerAlert:(n,r="success")=>{i({showAlert:!0,alertMessage:n,alertSeverity:r}),setTimeout(()=>i({showAlert:!1}),4e3)},activeStep:0,setActiveStep:n=>i({activeStep:n}),nextStep:()=>i(n=>({activeStep:n.activeStep+1})),prevStep:()=>i(n=>({activeStep:Math.max(0,n.activeStep-1)})),stepValidation:{step0:!1,step1:!1,step2:!1},validateFns:{},setValidateFn:(n,r)=>i(s=>({validateFns:{...s.validateFns,[n]:r}})),runValidation:async n=>{const r=e().validateFns[n];if(!r)return!1;const s=await r();return i(a=>({stepValidation:{...a.stepValidation,[n]:s}})),s},runSequentialValidation:async n=>{for(const r of n)if(!await e().runValidation(r))return!1;return!0}})),$ft=()=>{};var aF={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NG=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let s=i.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Wft=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const s=i[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=i[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=i[n++],o=i[n++],l=i[n++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=i[n++],o=i[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},LG={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<i.length;s+=3){const a=i[s],o=s+1<i.length,l=o?i[s+1]:0,u=s+2<i.length,f=u?i[s+2]:0,d=a>>2,m=(a&3)<<4|l>>4;let y=(l&15)<<2|f>>6,_=f&63;u||(_=64,o||(y=64)),r.push(n[d],n[m],n[y],n[_])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(NG(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Wft(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<i.length;){const a=n[i.charAt(s++)],l=s<i.length?n[i.charAt(s)]:0;++s;const f=s<i.length?n[i.charAt(s)]:64;++s;const m=s<i.length?n[i.charAt(s)]:64;if(++s,a==null||l==null||f==null||m==null)throw new Xft;const y=a<<2|l>>4;if(r.push(y),f!==64){const _=l<<4&240|f>>2;if(r.push(_),m!==64){const x=f<<6&192|m;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Xft extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Yft=function(i){const e=NG(i);return LG.encodeByteArray(e,!0)},OM=function(i){return Yft(i).replace(/\./g,"")},UG=function(i){try{return LG.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kft(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zft=()=>Kft().__FIREBASE_DEFAULTS__,Qft=()=>{if(typeof process>"u"||typeof aF>"u")return;const i=aF.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Jft=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&UG(i[1]);return e&&JSON.parse(e)},w2=()=>{try{return $ft()||Zft()||Qft()||Jft()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},kG=i=>{var e,n;return(n=(e=w2())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},tht=i=>{const e=kG(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zG=()=>{var i;return(i=w2())===null||i===void 0?void 0:i.config},BG=i=>{var e;return(e=w2())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eht{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nht(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=i.iat||0,a=i.sub||i.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},i);return[OM(JSON.stringify(n)),OM(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iht(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ha())}function rht(){var i;const e=(i=w2())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sht(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aht(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function oht(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lht(){const i=Ha();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function uht(){return!rht()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cht(){try{return typeof indexedDB=="object"}catch{return!1}}function fht(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hht="FirebaseError";class Td extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=hht,Object.setPrototypeOf(this,Td.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qS.prototype.create)}}class qS{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?dht(a,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Td(s,l,r)}}function dht(i,e){return i.replace(pht,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const pht=/\{\$([^}]+)}/g;function mht(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function my(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=i[s],o=e[s];if(oF(a)&&oF(o)){if(!my(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function oF(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ght(i,e){const n=new yht(i,e);return n.subscribe.bind(n)}class yht{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");vht(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=SI),s.error===void 0&&(s.error=SI),s.complete===void 0&&(s.complete=SI);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vht(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function SI(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(i){return i&&i._delegate?i._delegate:i}class gy{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ht{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new eht;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xht(e))try{this.getOrInitializeService({instanceIdentifier:Pg})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Pg){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pg){return this.instances.has(e)}getOptions(e=Pg){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bht(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pg){return this.component?this.component.multipleInstances?e:Pg:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bht(i){return i===Pg?void 0:i}function xht(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sht{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _ht(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ni;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ni||(ni={}));const Eht={debug:ni.DEBUG,verbose:ni.VERBOSE,info:ni.INFO,warn:ni.WARN,error:ni.ERROR,silent:ni.SILENT},Tht=ni.INFO,wht={[ni.DEBUG]:"log",[ni.VERBOSE]:"log",[ni.INFO]:"info",[ni.WARN]:"warn",[ni.ERROR]:"error"},Aht=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),s=wht[e];if(s)console[s](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nL{constructor(e){this.name=e,this._logLevel=Tht,this._logHandler=Aht,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ni))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Eht[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ni.DEBUG,...e),this._logHandler(this,ni.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ni.VERBOSE,...e),this._logHandler(this,ni.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ni.INFO,...e),this._logHandler(this,ni.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ni.WARN,...e),this._logHandler(this,ni.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ni.ERROR,...e),this._logHandler(this,ni.ERROR,...e)}}const Mht=(i,e)=>e.some(n=>i instanceof n);let lF,uF;function Cht(){return lF||(lF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rht(){return uF||(uF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FG=new WeakMap,aP=new WeakMap,VG=new WeakMap,EI=new WeakMap,iL=new WeakMap;function Oht(i){const e=new Promise((n,r)=>{const s=()=>{i.removeEventListener("success",a),i.removeEventListener("error",o)},a=()=>{n(jp(i.result)),s()},o=()=>{r(i.error),s()};i.addEventListener("success",a),i.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&FG.set(n,i)}).catch(()=>{}),iL.set(e,i),e}function Iht(i){if(aP.has(i))return;const e=new Promise((n,r)=>{const s=()=>{i.removeEventListener("complete",a),i.removeEventListener("error",o),i.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(i.error||new DOMException("AbortError","AbortError")),s()};i.addEventListener("complete",a),i.addEventListener("error",o),i.addEventListener("abort",o)});aP.set(i,e)}let oP={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return aP.get(i);if(e==="objectStoreNames")return i.objectStoreNames||VG.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jp(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Dht(i){oP=i(oP)}function Pht(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(TI(this),e,...n);return VG.set(r,e.sort?e.sort():[e]),jp(r)}:Rht().includes(i)?function(...e){return i.apply(TI(this),e),jp(FG.get(this))}:function(...e){return jp(i.apply(TI(this),e))}}function Nht(i){return typeof i=="function"?Pht(i):(i instanceof IDBTransaction&&Iht(i),Mht(i,Cht())?new Proxy(i,oP):i)}function jp(i){if(i instanceof IDBRequest)return Oht(i);if(EI.has(i))return EI.get(i);const e=Nht(i);return e!==i&&(EI.set(i,e),iL.set(e,i)),e}const TI=i=>iL.get(i);function Lht(i,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(i,e),l=jp(o);return r&&o.addEventListener("upgradeneeded",u=>{r(jp(o.result),u.oldVersion,u.newVersion,jp(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const Uht=["get","getKey","getAll","getAllKeys","count"],kht=["put","add","delete","clear"],wI=new Map;function cF(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(wI.get(e))return wI.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=kht.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Uht.includes(n)))return;const a=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&u.done]))[0]};return wI.set(e,a),a}Dht(i=>({...i,get:(e,n,r)=>cF(e,n)||i.get(e,n,r),has:(e,n)=>!!cF(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zht{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Bht(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Bht(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lP="@firebase/app",fF="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new nL("@firebase/app"),Fht="@firebase/app-compat",Vht="@firebase/analytics-compat",Hht="@firebase/analytics",Ght="@firebase/app-check-compat",jht="@firebase/app-check",qht="@firebase/auth",$ht="@firebase/auth-compat",Wht="@firebase/database",Xht="@firebase/data-connect",Yht="@firebase/database-compat",Kht="@firebase/functions",Zht="@firebase/functions-compat",Qht="@firebase/installations",Jht="@firebase/installations-compat",tdt="@firebase/messaging",edt="@firebase/messaging-compat",ndt="@firebase/performance",idt="@firebase/performance-compat",rdt="@firebase/remote-config",sdt="@firebase/remote-config-compat",adt="@firebase/storage",odt="@firebase/storage-compat",ldt="@firebase/firestore",udt="@firebase/vertexai",cdt="@firebase/firestore-compat",fdt="firebase",hdt="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP="[DEFAULT]",ddt={[lP]:"fire-core",[Fht]:"fire-core-compat",[Hht]:"fire-analytics",[Vht]:"fire-analytics-compat",[jht]:"fire-app-check",[Ght]:"fire-app-check-compat",[qht]:"fire-auth",[$ht]:"fire-auth-compat",[Wht]:"fire-rtdb",[Xht]:"fire-data-connect",[Yht]:"fire-rtdb-compat",[Kht]:"fire-fn",[Zht]:"fire-fn-compat",[Qht]:"fire-iid",[Jht]:"fire-iid-compat",[tdt]:"fire-fcm",[edt]:"fire-fcm-compat",[ndt]:"fire-perf",[idt]:"fire-perf-compat",[rdt]:"fire-rc",[sdt]:"fire-rc-compat",[adt]:"fire-gcs",[odt]:"fire-gcs-compat",[ldt]:"fire-fst",[cdt]:"fire-fst-compat",[udt]:"fire-vertex","fire-js":"fire-js",[fdt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM=new Map,pdt=new Map,cP=new Map;function hF(i,e){try{i.container.addComponent(e)}catch(n){yd.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function s_(i){const e=i.name;if(cP.has(e))return yd.debug(`There were multiple attempts to register component ${e}.`),!1;cP.set(e,i);for(const n of IM.values())hF(n,i);for(const n of pdt.values())hF(n,i);return!0}function rL(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function cc(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mdt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qp=new qS("app","Firebase",mdt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gdt{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gy("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qp.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=hdt;function HG(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:uP,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw qp.create("bad-app-name",{appName:String(s)});if(n||(n=zG()),!n)throw qp.create("no-options");const a=IM.get(s);if(a){if(my(n,a.options)&&my(r,a.config))return a;throw qp.create("duplicate-app",{appName:s})}const o=new Sht(s);for(const u of cP.values())o.addComponent(u);const l=new gdt(n,r,o);return IM.set(s,l),l}function GG(i=uP){const e=IM.get(i);if(!e&&i===uP&&zG())return HG();if(!e)throw qp.create("no-app",{appName:i});return e}function $p(i,e,n){var r;let s=(r=ddt[i])!==null&&r!==void 0?r:i;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${e}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yd.warn(l.join(" "));return}s_(new gy(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ydt="firebase-heartbeat-database",vdt=1,nS="firebase-heartbeat-store";let AI=null;function jG(){return AI||(AI=Lht(ydt,vdt,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(nS)}catch(n){console.warn(n)}}}}).catch(i=>{throw qp.create("idb-open",{originalErrorMessage:i.message})})),AI}async function _dt(i){try{const n=(await jG()).transaction(nS),r=await n.objectStore(nS).get(qG(i));return await n.done,r}catch(e){if(e instanceof Td)yd.warn(e.message);else{const n=qp.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yd.warn(n.message)}}}async function dF(i,e){try{const r=(await jG()).transaction(nS,"readwrite");await r.objectStore(nS).put(e,qG(i)),await r.done}catch(n){if(n instanceof Td)yd.warn(n.message);else{const r=qp.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});yd.warn(r.message)}}}function qG(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bdt=1024,xdt=30;class Sdt{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Tdt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=pF();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>xdt){const o=wdt(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){yd.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pF(),{heartbeatsToSend:r,unsentEntries:s}=Edt(this._heartbeatsCache.heartbeats),a=OM(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return yd.warn(n),""}}}function pF(){return new Date().toISOString().substring(0,10)}function Edt(i,e=bdt){const n=[];let r=i.slice();for(const s of i){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),mF(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),mF(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Tdt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cht()?fht().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _dt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return dF(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return dF(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function mF(i){return OM(JSON.stringify({version:2,heartbeats:i})).length}function wdt(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Adt(i){s_(new gy("platform-logger",e=>new zht(e),"PRIVATE")),s_(new gy("heartbeat",e=>new Sdt(e),"PRIVATE")),$p(lP,fF,i),$p(lP,fF,"esm2017"),$p("fire-js","")}Adt("");function sL(i,e){var n={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(n[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(i);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(i,r[s])&&(n[r[s]]=i[r[s]]);return n}function $G(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Mdt=$G,WG=new qS("auth","Firebase",$G());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=new nL("@firebase/auth");function Cdt(i,...e){DM.logLevel<=ni.WARN&&DM.warn(`Auth (${U_}): ${i}`,...e)}function cA(i,...e){DM.logLevel<=ni.ERROR&&DM.error(`Auth (${U_}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(i,...e){throw oL(i,...e)}function _c(i,...e){return oL(i,...e)}function aL(i,e,n){const r=Object.assign(Object.assign({},Mdt()),{[e]:n});return new qS("auth","Firebase",r).create(e,{appName:i.name})}function Qg(i){return aL(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rdt(i,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&jf(i,"argument-error"),aL(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function oL(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return WG.create(i,...e)}function yn(i,e,...n){if(!i)throw oL(e,...n)}function Jh(i){const e="INTERNAL ASSERTION FAILED: "+i;throw cA(e),new Error(e)}function vd(i,e){i||Jh(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function Odt(){return gF()==="http:"||gF()==="https:"}function gF(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Idt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Odt()||aht()||"connection"in navigator)?navigator.onLine:!0}function Ddt(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,n){this.shortDelay=e,this.longDelay=n,vd(n>e,"Short delay should be less than long delay!"),this.isMobile=iht()||oht()}get(){return Idt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(i,e){vd(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XG{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pdt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ndt=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ldt=new WS(3e4,6e4);function uL(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function k_(i,e,n,r,s={}){return YG(i,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const l=$S(Object.assign({key:i.config.apiKey},o)).slice(1),u=await i._getAdditionalHeaders();u["Content-Type"]="application/json",i.languageCode&&(u["X-Firebase-Locale"]=i.languageCode);const f=Object.assign({method:e,headers:u},a);return sht()||(f.referrerPolicy="no-referrer"),XG.fetch()(await KG(i,i.config.apiHost,n,l),f)})}async function YG(i,e,n){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},Pdt),e);try{const s=new kdt(i),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw ww(i,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[u,f]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ww(i,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw ww(i,"email-already-in-use",o);if(u==="USER_DISABLED")throw ww(i,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw aL(i,d,f);jf(i,d)}}catch(s){if(s instanceof Td)throw s;jf(i,"network-request-failed",{message:String(s)})}}async function Udt(i,e,n,r,s={}){const a=await k_(i,e,n,r,s);return"mfaPendingCredential"in a&&jf(i,"multi-factor-auth-required",{_serverResponse:a}),a}async function KG(i,e,n,r){const s=`${e}${n}?${r}`,a=i,o=a.config.emulator?lL(i.config,s):`${i.config.apiScheme}://${s}`;return Ndt.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}class kdt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_c(this.auth,"network-request-failed")),Ldt.get())})}}function ww(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=_c(i,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zdt(i,e){return k_(i,"POST","/v1/accounts:delete",e)}async function PM(i,e){return k_(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Bdt(i,e=!1){const n=ll(i),r=await n.getIdToken(e),s=cL(r);yn(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:h1(MI(s.auth_time)),issuedAtTime:h1(MI(s.iat)),expirationTime:h1(MI(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function MI(i){return Number(i)*1e3}function cL(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return cA("JWT malformed, contained fewer than 3 sections"),null;try{const s=UG(n);return s?JSON.parse(s):(cA("Failed to decode base64 JWT payload"),null)}catch(s){return cA("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function yF(i){const e=cL(i);return yn(e,"internal-error"),yn(typeof e.exp<"u","internal-error"),yn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iS(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Td&&Fdt(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function Fdt({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vdt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=h1(this.lastLoginAt),this.creationTime=h1(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(i){var e;const n=i.auth,r=await i.getIdToken(),s=await iS(i,PM(n,{idToken:r}));yn(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];i._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?ZG(a.providerUserInfo):[],l=Gdt(i.providerData,o),u=i.isAnonymous,f=!(i.email&&a.passwordHash)&&!(l!=null&&l.length),d=u?f:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new hP(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(i,m)}async function Hdt(i){const e=ll(i);await NM(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Gdt(i,e){return[...i.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ZG(i){return i.map(e=>{var{providerId:n}=e,r=sL(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jdt(i,e){const n=await YG(i,{},async()=>{const r=$S({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=i.config,o=await KG(i,s,"/v1/token",`key=${a}`),l=await i._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",XG.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qdt(i,e){return k_(i,"POST","/v2/accounts:revokeToken",uL(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){yn(e.idToken,"internal-error"),yn(typeof e.idToken<"u","internal-error"),yn(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){yn(e.length!==0,"internal-error");const n=yF(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(yn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await jdt(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new L0;return r&&(yn(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(yn(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(yn(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new L0,this.toJSON())}_performRefresh(){return Jh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(i,e){yn(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class mc{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=sL(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vdt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new hP(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await iS(this,this.stsTokenManager.getToken(this.auth,e));return yn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Bdt(this,e)}reload(){return Hdt(this)}_assign(e){this!==e&&(yn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new mc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){yn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await NM(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cc(this.auth.app))return Promise.reject(Qg(this.auth));const e=await this.getIdToken();return await iS(this,zdt(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,o,l,u,f,d;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(s=n.email)!==null&&s!==void 0?s:void 0,_=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(l=n.tenantId)!==null&&l!==void 0?l:void 0,T=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,b=(f=n.createdAt)!==null&&f!==void 0?f:void 0,M=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:R,emailVerified:A,isAnonymous:I,providerData:k,stsTokenManager:N}=n;yn(R&&N,e,"internal-error");const L=L0.fromJSON(this.name,N);yn(typeof R=="string",e,"internal-error"),wp(m,e.name),wp(y,e.name),yn(typeof A=="boolean",e,"internal-error"),yn(typeof I=="boolean",e,"internal-error"),wp(_,e.name),wp(x,e.name),wp(S,e.name),wp(T,e.name),wp(b,e.name),wp(M,e.name);const U=new mc({uid:R,auth:e,email:y,emailVerified:A,displayName:m,isAnonymous:I,photoURL:x,phoneNumber:_,tenantId:S,stsTokenManager:L,createdAt:b,lastLoginAt:M});return k&&Array.isArray(k)&&(U.providerData=k.map(O=>Object.assign({},O))),T&&(U._redirectEventId=T),U}static async _fromIdTokenResponse(e,n,r=!1){const s=new L0;s.updateFromServerResponse(n);const a=new mc({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await NM(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];yn(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?ZG(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new L0;l.updateFromIdToken(r);const u=new mc({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new hP(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,f),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=new Map;function td(i){vd(i instanceof Function,"Expected a class definition");let e=vF.get(i);return e?(vd(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,vF.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QG{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}QG.type="NONE";const _F=QG;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(i,e,n){return`firebase:${i}:${e}:${n}`}class U0{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=fA(this.userKey,s.apiKey,a),this.fullPersistenceKey=fA("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await PM(this.auth,{idToken:e}).catch(()=>{});return n?mc._fromGetAccountInfoResponse(this.auth,n,e):null}return mc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new U0(td(_F),e,r);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=s[0]||td(_F);const o=fA(r,e.config.apiKey,e.name);let l=null;for(const f of n)try{const d=await f._get(o);if(d){let m;if(typeof d=="string"){const y=await PM(e,{idToken:d}).catch(()=>{});if(!y)break;m=await mc._fromGetAccountInfoResponse(e,y,d)}else m=mc._fromJSON(e,d);f!==a&&(l=m),a=f;break}}catch{}const u=s.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new U0(a,e,r):(a=u[0],l&&await a._set(o,l.toJSON()),await Promise.all(n.map(async f=>{if(f!==a)try{await f._remove(o)}catch{}})),new U0(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bF(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(n7(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JG(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(r7(e))return"Blackberry";if(s7(e))return"Webos";if(t7(e))return"Safari";if((e.includes("chrome/")||e7(e))&&!e.includes("edge/"))return"Chrome";if(i7(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function JG(i=Ha()){return/firefox\//i.test(i)}function t7(i=Ha()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function e7(i=Ha()){return/crios\//i.test(i)}function n7(i=Ha()){return/iemobile/i.test(i)}function i7(i=Ha()){return/android/i.test(i)}function r7(i=Ha()){return/blackberry/i.test(i)}function s7(i=Ha()){return/webos/i.test(i)}function fL(i=Ha()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function $dt(i=Ha()){var e;return fL(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Wdt(){return lht()&&document.documentMode===10}function a7(i=Ha()){return fL(i)||i7(i)||s7(i)||r7(i)||/windows phone/i.test(i)||n7(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o7(i,e=[]){let n;switch(i){case"Browser":n=bF(Ha());break;case"Worker":n=`${bF(Ha())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${U_}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xdt{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,l)=>{try{const u=e(a);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ydt(i,e={}){return k_(i,"GET","/v2/passwordPolicy",uL(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kdt=6;class Zdt{constructor(e){var n,r,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Kdt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qdt{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xF(this),this.idTokenSubscription=new xF(this),this.beforeStateQueue=new Xdt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WG,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=td(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await U0.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await PM(this,{idToken:e}),r=await mc._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(cc(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return yn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await NM(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ddt()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cc(this.app))return Promise.reject(Qg(this));const n=e?ll(e):null;return n&&yn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&yn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cc(this.app)?Promise.reject(Qg(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cc(this.app)?Promise.reject(Qg(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(td(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ydt(this),n=new Zdt(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qS("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await qdt(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&td(e)||this._popupRedirectResolver;yn(n,this,"argument-error"),this.redirectPersistenceManager=await U0.create(this,[td(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(yn(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return yn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=o7(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(cc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Cdt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function A2(i){return ll(i)}class xF{constructor(e){this.auth=e,this.observer=null,this.addObserver=ght(n=>this.observer=n)}get next(){return yn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hL={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Jdt(i){hL=i}function tpt(i){return hL.loadJS(i)}function ept(){return hL.gapiScript}function npt(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ipt(i,e){const n=rL(i,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(my(a,e??{}))return s;jf(s,"already-initialized")}return n.initialize({options:e})}function rpt(i,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(td);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function spt(i,e,n){const r=A2(i);yn(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=l7(e),{host:o,port:l}=apt(e),u=l===null?"":`:${l}`,f={url:`${a}//${o}${u}/`},d=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){yn(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),yn(my(f,r.config.emulator)&&my(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,opt()}function l7(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function apt(i){const e=l7(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:SF(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:SF(o)}}}function SF(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function opt(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jh("not implemented")}_getIdTokenResponse(e){return Jh("not implemented")}_linkToIdToken(e,n){return Jh("not implemented")}_getReauthenticationResolver(e){return Jh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k0(i,e){return Udt(i,"POST","/v1/accounts:signInWithIdp",uL(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lpt="http://localhost";class yy extends u7{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new yy(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):jf("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=sL(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new yy(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return k0(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,k0(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,k0(e,n)}buildRequest(){const e={requestUri:lpt,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$S(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS extends dL{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np extends XS{constructor(){super("facebook.com")}static credential(e){return yy._fromParams({providerId:Np.PROVIDER_ID,signInMethod:Np.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Np.credentialFromTaggedObject(e)}static credentialFromError(e){return Np.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Np.credential(e.oauthAccessToken)}catch{return null}}}Np.FACEBOOK_SIGN_IN_METHOD="facebook.com";Np.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh extends XS{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return yy._fromParams({providerId:Yh.PROVIDER_ID,signInMethod:Yh.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yh.credentialFromTaggedObject(e)}static credentialFromError(e){return Yh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Yh.credential(n,r)}catch{return null}}}Yh.GOOGLE_SIGN_IN_METHOD="google.com";Yh.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp extends XS{constructor(){super("github.com")}static credential(e){return yy._fromParams({providerId:Lp.PROVIDER_ID,signInMethod:Lp.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lp.credentialFromTaggedObject(e)}static credentialFromError(e){return Lp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lp.credential(e.oauthAccessToken)}catch{return null}}}Lp.GITHUB_SIGN_IN_METHOD="github.com";Lp.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up extends XS{constructor(){super("twitter.com")}static credential(e,n){return yy._fromParams({providerId:Up.PROVIDER_ID,signInMethod:Up.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Up.credentialFromTaggedObject(e)}static credentialFromError(e){return Up.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Up.credential(n,r)}catch{return null}}}Up.TWITTER_SIGN_IN_METHOD="twitter.com";Up.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await mc._fromIdTokenResponse(e,r,s),o=EF(r);return new a_({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=EF(r);return new a_({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function EF(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM extends Td{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,LM.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new LM(e,n,r,s)}}function c7(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?LM._fromErrorAndOperation(i,a,e,r):a})}async function upt(i,e,n=!1){const r=await iS(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return a_._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cpt(i,e,n=!1){const{auth:r}=i;if(cc(r.app))return Promise.reject(Qg(r));const s="reauthenticate";try{const a=await iS(i,c7(r,s,e,i),n);yn(a.idToken,r,"internal-error");const o=cL(a.idToken);yn(o,r,"internal-error");const{sub:l}=o;return yn(i.uid===l,r,"user-mismatch"),a_._forOperation(i,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&jf(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fpt(i,e,n=!1){if(cc(i.app))return Promise.reject(Qg(i));const r="signIn",s=await c7(i,r,e),a=await a_._fromIdTokenResponse(i,r,s);return n||await i._updateCurrentUser(a.user),a}function hpt(i,e,n,r){return ll(i).onIdTokenChanged(e,n,r)}function dpt(i,e,n){return ll(i).beforeAuthStateChanged(e,n)}function ppt(i,e,n,r){return ll(i).onAuthStateChanged(e,n,r)}function mpt(i){return ll(i).signOut()}const UM="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(UM,"1"),this.storage.removeItem(UM),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gpt=1e3,ypt=10;class h7 extends f7{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a7(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);Wdt()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ypt):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},gpt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}h7.type="LOCAL";const vpt=h7;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7 extends f7{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}d7.type="SESSION";const p7=d7;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _pt(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new M2(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async f=>f(n.origin,a)),u=await _pt(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}M2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bpt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,u)=>{const f=pL("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const y=m;if(y.data.eventId===f)switch(y.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(y.data.response);break;default:clearTimeout(d),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(){return window}function xpt(i){Lf().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m7(){return typeof Lf().WorkerGlobalScope<"u"&&typeof Lf().importScripts=="function"}async function Spt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ept(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function Tpt(){return m7()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7="firebaseLocalStorageDb",wpt=1,kM="firebaseLocalStorage",y7="fbase_key";class YS{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function C2(i,e){return i.transaction([kM],e?"readwrite":"readonly").objectStore(kM)}function Apt(){const i=indexedDB.deleteDatabase(g7);return new YS(i).toPromise()}function dP(){const i=indexedDB.open(g7,wpt);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(kM,{keyPath:y7})}catch(s){n(s)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(kM)?e(r):(r.close(),await Apt(),e(await dP()))})})}async function TF(i,e,n){const r=C2(i,!0).put({[y7]:e,value:n});return new YS(r).toPromise()}async function Mpt(i,e){const n=C2(i,!1).get(e),r=await new YS(n).toPromise();return r===void 0?null:r.value}function wF(i,e){const n=C2(i,!0).delete(e);return new YS(n).toPromise()}const Cpt=800,Rpt=3;class v7{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dP(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Rpt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return m7()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=M2._getInstance(Tpt()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Spt(),!this.activeServiceWorker)return;this.sender=new bpt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ept()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dP();return await TF(e,UM,"1"),await wF(e,UM),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>TF(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Mpt(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wF(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=C2(s,!1).getAll();return new YS(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Cpt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}v7.type="LOCAL";const Opt=v7;new WS(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _7(i,e){return e?td(e):(yn(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL extends u7{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return k0(e,this._buildIdpRequest())}_linkToIdToken(e,n){return k0(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return k0(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Ipt(i){return fpt(i.auth,new mL(i),i.bypassAuthState)}function Dpt(i){const{auth:e,user:n}=i;return yn(n,e,"internal-error"),cpt(n,new mL(i),i.bypassAuthState)}async function Ppt(i){const{auth:e,user:n}=i;return yn(n,e,"internal-error"),upt(n,new mL(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ipt;case"linkViaPopup":case"linkViaRedirect":return Ppt;case"reauthViaPopup":case"reauthViaRedirect":return Dpt;default:jf(this.auth,"internal-error")}}resolve(e){vd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Npt=new WS(2e3,1e4);async function Lpt(i,e,n){if(cc(i.app))return Promise.reject(_c(i,"operation-not-supported-in-this-environment"));const r=A2(i);Rdt(i,e,dL);const s=_7(r,n);return new Hg(r,"signInViaPopup",e,s).executeNotNull()}class Hg extends b7{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Hg.currentPopupAction&&Hg.currentPopupAction.cancel(),Hg.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return yn(e,this.auth,"internal-error"),e}async onExecution(){vd(this.filter.length===1,"Popup operations only handle one event");const e=pL();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_c(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_c(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hg.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_c(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Npt.get())};e()}}Hg.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Upt="pendingRedirect",hA=new Map;class kpt extends b7{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=hA.get(this.auth._key());if(!e){try{const r=await zpt(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}hA.set(this.auth._key(),e)}return this.bypassAuthState||hA.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zpt(i,e){const n=Vpt(e),r=Fpt(i);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Bpt(i,e){hA.set(i._key(),e)}function Fpt(i){return td(i._redirectPersistence)}function Vpt(i){return fA(Upt,i.config.apiKey,i.name)}async function Hpt(i,e,n=!1){if(cc(i.app))return Promise.reject(Qg(i));const r=A2(i),s=_7(r,e),o=await new kpt(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gpt=10*60*1e3;class jpt{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qpt(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!x7(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(_c(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Gpt&&this.cachedEventUids.clear(),this.cachedEventUids.has(AF(e))}saveEventToCache(e){this.cachedEventUids.add(AF(e)),this.lastProcessedEventTime=Date.now()}}function AF(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function x7({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qpt(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return x7(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $pt(i,e={}){return k_(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wpt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xpt=/^https?/;async function Ypt(i){if(i.config.emulator)return;const{authorizedDomains:e}=await $pt(i);for(const n of e)try{if(Kpt(n))return}catch{}jf(i,"unauthorized-domain")}function Kpt(i){const e=fP(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const o=new URL(i);return o.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Xpt.test(n))return!1;if(Wpt.test(i))return r===i;const s=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zpt=new WS(3e4,6e4);function MF(){const i=Lf().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function Qpt(i){return new Promise((e,n)=>{var r,s,a;function o(){MF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{MF(),n(_c(i,"network-request-failed"))},timeout:Zpt.get()})}if(!((s=(r=Lf().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Lf().gapi)===null||a===void 0)&&a.load)o();else{const l=npt("iframefcb");return Lf()[l]=()=>{gapi.load?o():n(_c(i,"network-request-failed"))},tpt(`${ept()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw dA=null,e})}let dA=null;function Jpt(i){return dA=dA||Qpt(i),dA}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tmt=new WS(5e3,15e3),emt="__/auth/iframe",nmt="emulator/auth/iframe",imt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rmt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function smt(i){const e=i.config;yn(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?lL(e,nmt):`https://${i.config.authDomain}/${emt}`,r={apiKey:e.apiKey,appName:i.name,v:U_},s=rmt.get(i.config.apiHost);s&&(r.eid=s);const a=i._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${$S(r).slice(1)}`}async function amt(i){const e=await Jpt(i),n=Lf().gapi;return yn(n,i,"internal-error"),e.open({where:document.body,url:smt(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:imt,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=_c(i,"network-request-failed"),l=Lf().setTimeout(()=>{a(o)},tmt.get());function u(){Lf().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const omt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lmt=500,umt=600,cmt="_blank",fmt="http://localhost";class CF{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hmt(i,e,n,r=lmt,s=umt){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},omt),{width:r.toString(),height:s.toString(),top:a,left:o}),f=Ha().toLowerCase();n&&(l=e7(f)?cmt:n),JG(f)&&(e=e||fmt,u.scrollbars="yes");const d=Object.entries(u).reduce((y,[_,x])=>`${y}${_}=${x},`,"");if($dt(f)&&l!=="_self")return dmt(e||"",l),new CF(null);const m=window.open(e||"",l,d);yn(m,i,"popup-blocked");try{m.focus()}catch{}return new CF(m)}function dmt(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pmt="__/auth/handler",mmt="emulator/auth/handler",gmt=encodeURIComponent("fac");async function RF(i,e,n,r,s,a){yn(i.config.authDomain,i,"auth-domain-config-required"),yn(i.config.apiKey,i,"invalid-api-key");const o={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:U_,eventId:s};if(e instanceof dL){e.setDefaultLanguage(i.languageCode),o.providerId=e.providerId||"",mht(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))o[d]=m}if(e instanceof XS){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(o.scopes=d.join(","))}i.tenantId&&(o.tid=i.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await i._getAppCheckToken(),f=u?`#${gmt}=${encodeURIComponent(u)}`:"";return`${ymt(i)}?${$S(l).slice(1)}${f}`}function ymt({config:i}){return i.emulator?lL(i,mmt):`https://${i.authDomain}/${pmt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="webStorageSupport";class vmt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=p7,this._completeRedirectFn=Hpt,this._overrideRedirectResult=Bpt}async _openPopup(e,n,r,s){var a;vd((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await RF(e,n,r,fP(),s);return hmt(e,o,pL())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await RF(e,n,r,fP(),s);return xpt(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(vd(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await amt(e),r=new jpt(e);return n.register("authEvent",s=>(yn(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(CI,{type:CI},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[CI];o!==void 0&&n(!!o),jf(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ypt(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return a7()||t7()||fL()}}const _mt=vmt;var OF="@firebase/auth",IF="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bmt{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){yn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xmt(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Smt(i){s_(new gy("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;yn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:o7(i)},f=new Qdt(r,s,a,u);return rpt(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),s_(new gy("auth-internal",e=>{const n=A2(e.getProvider("auth").getImmediate());return(r=>new bmt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$p(OF,IF,xmt(i)),$p(OF,IF,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Emt=5*60,Tmt=BG("authIdTokenMaxAge")||Emt;let DF=null;const wmt=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Tmt)return;const s=n==null?void 0:n.token;DF!==s&&(DF=s,await fetch(i,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Amt(i=GG()){const e=rL(i,"auth");if(e.isInitialized())return e.getImmediate();const n=ipt(i,{popupRedirectResolver:_mt,persistence:[Opt,vpt,p7]}),r=BG("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=wmt(a.toString());dpt(n,o,()=>o(n.currentUser)),hpt(n,l=>o(l))}}const s=kG("auth");return s&&spt(n,`http://${s}`),n}function Mmt(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}Jdt({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=s=>{const a=_c("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",Mmt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Smt("Browser");var Cmt="firebase",Rmt="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$p(Cmt,Rmt,"app");var PF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wp,S7;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,L){function U(){}U.prototype=L.prototype,N.D=L.prototype,N.prototype=new U,N.prototype.constructor=N,N.C=function(O,F,H){for(var V=Array(arguments.length-2),X=2;X<arguments.length;X++)V[X-2]=arguments[X];return L.prototype[F].apply(O,V)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,L,U){U||(U=0);var O=Array(16);if(typeof L=="string")for(var F=0;16>F;++F)O[F]=L.charCodeAt(U++)|L.charCodeAt(U++)<<8|L.charCodeAt(U++)<<16|L.charCodeAt(U++)<<24;else for(F=0;16>F;++F)O[F]=L[U++]|L[U++]<<8|L[U++]<<16|L[U++]<<24;L=N.g[0],U=N.g[1],F=N.g[2];var H=N.g[3],V=L+(H^U&(F^H))+O[0]+3614090360&4294967295;L=U+(V<<7&4294967295|V>>>25),V=H+(F^L&(U^F))+O[1]+3905402710&4294967295,H=L+(V<<12&4294967295|V>>>20),V=F+(U^H&(L^U))+O[2]+606105819&4294967295,F=H+(V<<17&4294967295|V>>>15),V=U+(L^F&(H^L))+O[3]+3250441966&4294967295,U=F+(V<<22&4294967295|V>>>10),V=L+(H^U&(F^H))+O[4]+4118548399&4294967295,L=U+(V<<7&4294967295|V>>>25),V=H+(F^L&(U^F))+O[5]+1200080426&4294967295,H=L+(V<<12&4294967295|V>>>20),V=F+(U^H&(L^U))+O[6]+2821735955&4294967295,F=H+(V<<17&4294967295|V>>>15),V=U+(L^F&(H^L))+O[7]+4249261313&4294967295,U=F+(V<<22&4294967295|V>>>10),V=L+(H^U&(F^H))+O[8]+1770035416&4294967295,L=U+(V<<7&4294967295|V>>>25),V=H+(F^L&(U^F))+O[9]+2336552879&4294967295,H=L+(V<<12&4294967295|V>>>20),V=F+(U^H&(L^U))+O[10]+4294925233&4294967295,F=H+(V<<17&4294967295|V>>>15),V=U+(L^F&(H^L))+O[11]+2304563134&4294967295,U=F+(V<<22&4294967295|V>>>10),V=L+(H^U&(F^H))+O[12]+1804603682&4294967295,L=U+(V<<7&4294967295|V>>>25),V=H+(F^L&(U^F))+O[13]+4254626195&4294967295,H=L+(V<<12&4294967295|V>>>20),V=F+(U^H&(L^U))+O[14]+2792965006&4294967295,F=H+(V<<17&4294967295|V>>>15),V=U+(L^F&(H^L))+O[15]+1236535329&4294967295,U=F+(V<<22&4294967295|V>>>10),V=L+(F^H&(U^F))+O[1]+4129170786&4294967295,L=U+(V<<5&4294967295|V>>>27),V=H+(U^F&(L^U))+O[6]+3225465664&4294967295,H=L+(V<<9&4294967295|V>>>23),V=F+(L^U&(H^L))+O[11]+643717713&4294967295,F=H+(V<<14&4294967295|V>>>18),V=U+(H^L&(F^H))+O[0]+3921069994&4294967295,U=F+(V<<20&4294967295|V>>>12),V=L+(F^H&(U^F))+O[5]+3593408605&4294967295,L=U+(V<<5&4294967295|V>>>27),V=H+(U^F&(L^U))+O[10]+38016083&4294967295,H=L+(V<<9&4294967295|V>>>23),V=F+(L^U&(H^L))+O[15]+3634488961&4294967295,F=H+(V<<14&4294967295|V>>>18),V=U+(H^L&(F^H))+O[4]+3889429448&4294967295,U=F+(V<<20&4294967295|V>>>12),V=L+(F^H&(U^F))+O[9]+568446438&4294967295,L=U+(V<<5&4294967295|V>>>27),V=H+(U^F&(L^U))+O[14]+3275163606&4294967295,H=L+(V<<9&4294967295|V>>>23),V=F+(L^U&(H^L))+O[3]+4107603335&4294967295,F=H+(V<<14&4294967295|V>>>18),V=U+(H^L&(F^H))+O[8]+1163531501&4294967295,U=F+(V<<20&4294967295|V>>>12),V=L+(F^H&(U^F))+O[13]+2850285829&4294967295,L=U+(V<<5&4294967295|V>>>27),V=H+(U^F&(L^U))+O[2]+4243563512&4294967295,H=L+(V<<9&4294967295|V>>>23),V=F+(L^U&(H^L))+O[7]+1735328473&4294967295,F=H+(V<<14&4294967295|V>>>18),V=U+(H^L&(F^H))+O[12]+2368359562&4294967295,U=F+(V<<20&4294967295|V>>>12),V=L+(U^F^H)+O[5]+4294588738&4294967295,L=U+(V<<4&4294967295|V>>>28),V=H+(L^U^F)+O[8]+2272392833&4294967295,H=L+(V<<11&4294967295|V>>>21),V=F+(H^L^U)+O[11]+1839030562&4294967295,F=H+(V<<16&4294967295|V>>>16),V=U+(F^H^L)+O[14]+4259657740&4294967295,U=F+(V<<23&4294967295|V>>>9),V=L+(U^F^H)+O[1]+2763975236&4294967295,L=U+(V<<4&4294967295|V>>>28),V=H+(L^U^F)+O[4]+1272893353&4294967295,H=L+(V<<11&4294967295|V>>>21),V=F+(H^L^U)+O[7]+4139469664&4294967295,F=H+(V<<16&4294967295|V>>>16),V=U+(F^H^L)+O[10]+3200236656&4294967295,U=F+(V<<23&4294967295|V>>>9),V=L+(U^F^H)+O[13]+681279174&4294967295,L=U+(V<<4&4294967295|V>>>28),V=H+(L^U^F)+O[0]+3936430074&4294967295,H=L+(V<<11&4294967295|V>>>21),V=F+(H^L^U)+O[3]+3572445317&4294967295,F=H+(V<<16&4294967295|V>>>16),V=U+(F^H^L)+O[6]+76029189&4294967295,U=F+(V<<23&4294967295|V>>>9),V=L+(U^F^H)+O[9]+3654602809&4294967295,L=U+(V<<4&4294967295|V>>>28),V=H+(L^U^F)+O[12]+3873151461&4294967295,H=L+(V<<11&4294967295|V>>>21),V=F+(H^L^U)+O[15]+530742520&4294967295,F=H+(V<<16&4294967295|V>>>16),V=U+(F^H^L)+O[2]+3299628645&4294967295,U=F+(V<<23&4294967295|V>>>9),V=L+(F^(U|~H))+O[0]+4096336452&4294967295,L=U+(V<<6&4294967295|V>>>26),V=H+(U^(L|~F))+O[7]+1126891415&4294967295,H=L+(V<<10&4294967295|V>>>22),V=F+(L^(H|~U))+O[14]+2878612391&4294967295,F=H+(V<<15&4294967295|V>>>17),V=U+(H^(F|~L))+O[5]+4237533241&4294967295,U=F+(V<<21&4294967295|V>>>11),V=L+(F^(U|~H))+O[12]+1700485571&4294967295,L=U+(V<<6&4294967295|V>>>26),V=H+(U^(L|~F))+O[3]+2399980690&4294967295,H=L+(V<<10&4294967295|V>>>22),V=F+(L^(H|~U))+O[10]+4293915773&4294967295,F=H+(V<<15&4294967295|V>>>17),V=U+(H^(F|~L))+O[1]+2240044497&4294967295,U=F+(V<<21&4294967295|V>>>11),V=L+(F^(U|~H))+O[8]+1873313359&4294967295,L=U+(V<<6&4294967295|V>>>26),V=H+(U^(L|~F))+O[15]+4264355552&4294967295,H=L+(V<<10&4294967295|V>>>22),V=F+(L^(H|~U))+O[6]+2734768916&4294967295,F=H+(V<<15&4294967295|V>>>17),V=U+(H^(F|~L))+O[13]+1309151649&4294967295,U=F+(V<<21&4294967295|V>>>11),V=L+(F^(U|~H))+O[4]+4149444226&4294967295,L=U+(V<<6&4294967295|V>>>26),V=H+(U^(L|~F))+O[11]+3174756917&4294967295,H=L+(V<<10&4294967295|V>>>22),V=F+(L^(H|~U))+O[2]+718787259&4294967295,F=H+(V<<15&4294967295|V>>>17),V=U+(H^(F|~L))+O[9]+3951481745&4294967295,N.g[0]=N.g[0]+L&4294967295,N.g[1]=N.g[1]+(F+(V<<21&4294967295|V>>>11))&4294967295,N.g[2]=N.g[2]+F&4294967295,N.g[3]=N.g[3]+H&4294967295}r.prototype.u=function(N,L){L===void 0&&(L=N.length);for(var U=L-this.blockSize,O=this.B,F=this.h,H=0;H<L;){if(F==0)for(;H<=U;)s(this,N,H),H+=this.blockSize;if(typeof N=="string"){for(;H<L;)if(O[F++]=N.charCodeAt(H++),F==this.blockSize){s(this,O),F=0;break}}else for(;H<L;)if(O[F++]=N[H++],F==this.blockSize){s(this,O),F=0;break}}this.h=F,this.o+=L},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var L=1;L<N.length-8;++L)N[L]=0;var U=8*this.o;for(L=N.length-8;L<N.length;++L)N[L]=U&255,U/=256;for(this.u(N),N=Array(16),L=U=0;4>L;++L)for(var O=0;32>O;O+=8)N[U++]=this.g[L]>>>O&255;return N};function a(N,L){var U=l;return Object.prototype.hasOwnProperty.call(U,N)?U[N]:U[N]=L(N)}function o(N,L){this.h=L;for(var U=[],O=!0,F=N.length-1;0<=F;F--){var H=N[F]|0;O&&H==L||(U[F]=H,O=!1)}this.g=U}var l={};function u(N){return-128<=N&&128>N?a(N,function(L){return new o([L|0],0>L?-1:0)}):new o([N|0],0>N?-1:0)}function f(N){if(isNaN(N)||!isFinite(N))return m;if(0>N)return T(f(-N));for(var L=[],U=1,O=0;N>=U;O++)L[O]=N/U|0,U*=4294967296;return new o(L,0)}function d(N,L){if(N.length==0)throw Error("number format error: empty string");if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(N.charAt(0)=="-")return T(d(N.substring(1),L));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var U=f(Math.pow(L,8)),O=m,F=0;F<N.length;F+=8){var H=Math.min(8,N.length-F),V=parseInt(N.substring(F,F+H),L);8>H?(H=f(Math.pow(L,H)),O=O.j(H).add(f(V))):(O=O.j(U),O=O.add(f(V)))}return O}var m=u(0),y=u(1),_=u(16777216);i=o.prototype,i.m=function(){if(S(this))return-T(this).m();for(var N=0,L=1,U=0;U<this.g.length;U++){var O=this.i(U);N+=(0<=O?O:4294967296+O)*L,L*=4294967296}return N},i.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(x(this))return"0";if(S(this))return"-"+T(this).toString(N);for(var L=f(Math.pow(N,6)),U=this,O="";;){var F=A(U,L).g;U=b(U,F.j(L));var H=((0<U.g.length?U.g[0]:U.h)>>>0).toString(N);if(U=F,x(U))return H+O;for(;6>H.length;)H="0"+H;O=H+O}},i.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function x(N){if(N.h!=0)return!1;for(var L=0;L<N.g.length;L++)if(N.g[L]!=0)return!1;return!0}function S(N){return N.h==-1}i.l=function(N){return N=b(this,N),S(N)?-1:x(N)?0:1};function T(N){for(var L=N.g.length,U=[],O=0;O<L;O++)U[O]=~N.g[O];return new o(U,~N.h).add(y)}i.abs=function(){return S(this)?T(this):this},i.add=function(N){for(var L=Math.max(this.g.length,N.g.length),U=[],O=0,F=0;F<=L;F++){var H=O+(this.i(F)&65535)+(N.i(F)&65535),V=(H>>>16)+(this.i(F)>>>16)+(N.i(F)>>>16);O=V>>>16,H&=65535,V&=65535,U[F]=V<<16|H}return new o(U,U[U.length-1]&-2147483648?-1:0)};function b(N,L){return N.add(T(L))}i.j=function(N){if(x(this)||x(N))return m;if(S(this))return S(N)?T(this).j(T(N)):T(T(this).j(N));if(S(N))return T(this.j(T(N)));if(0>this.l(_)&&0>N.l(_))return f(this.m()*N.m());for(var L=this.g.length+N.g.length,U=[],O=0;O<2*L;O++)U[O]=0;for(O=0;O<this.g.length;O++)for(var F=0;F<N.g.length;F++){var H=this.i(O)>>>16,V=this.i(O)&65535,X=N.i(F)>>>16,J=N.i(F)&65535;U[2*O+2*F]+=V*J,M(U,2*O+2*F),U[2*O+2*F+1]+=H*J,M(U,2*O+2*F+1),U[2*O+2*F+1]+=V*X,M(U,2*O+2*F+1),U[2*O+2*F+2]+=H*X,M(U,2*O+2*F+2)}for(O=0;O<L;O++)U[O]=U[2*O+1]<<16|U[2*O];for(O=L;O<2*L;O++)U[O]=0;return new o(U,0)};function M(N,L){for(;(N[L]&65535)!=N[L];)N[L+1]+=N[L]>>>16,N[L]&=65535,L++}function R(N,L){this.g=N,this.h=L}function A(N,L){if(x(L))throw Error("division by zero");if(x(N))return new R(m,m);if(S(N))return L=A(T(N),L),new R(T(L.g),T(L.h));if(S(L))return L=A(N,T(L)),new R(T(L.g),L.h);if(30<N.g.length){if(S(N)||S(L))throw Error("slowDivide_ only works with positive integers.");for(var U=y,O=L;0>=O.l(N);)U=I(U),O=I(O);var F=k(U,1),H=k(O,1);for(O=k(O,2),U=k(U,2);!x(O);){var V=H.add(O);0>=V.l(N)&&(F=F.add(U),H=V),O=k(O,1),U=k(U,1)}return L=b(N,F.j(L)),new R(F,L)}for(F=m;0<=N.l(L);){for(U=Math.max(1,Math.floor(N.m()/L.m())),O=Math.ceil(Math.log(U)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),H=f(U),V=H.j(L);S(V)||0<V.l(N);)U-=O,H=f(U),V=H.j(L);x(H)&&(H=y),F=F.add(H),N=b(N,V)}return new R(F,N)}i.A=function(N){return A(this,N).h},i.and=function(N){for(var L=Math.max(this.g.length,N.g.length),U=[],O=0;O<L;O++)U[O]=this.i(O)&N.i(O);return new o(U,this.h&N.h)},i.or=function(N){for(var L=Math.max(this.g.length,N.g.length),U=[],O=0;O<L;O++)U[O]=this.i(O)|N.i(O);return new o(U,this.h|N.h)},i.xor=function(N){for(var L=Math.max(this.g.length,N.g.length),U=[],O=0;O<L;O++)U[O]=this.i(O)^N.i(O);return new o(U,this.h^N.h)};function I(N){for(var L=N.g.length+1,U=[],O=0;O<L;O++)U[O]=N.i(O)<<1|N.i(O-1)>>>31;return new o(U,N.h)}function k(N,L){var U=L>>5;L%=32;for(var O=N.g.length-U,F=[],H=0;H<O;H++)F[H]=0<L?N.i(H+U)>>>L|N.i(H+U+1)<<32-L:N.i(H+U);return new o(F,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,S7=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=d,Wp=o}).apply(typeof PF<"u"?PF:typeof self<"u"?self:typeof window<"u"?window:{});var Aw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var E7,Vx,T7,pA,pP,w7,A7,M7;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,j,Y){return C==Array.prototype||C==Object.prototype||(C[j]=Y.value),C};function n(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof Aw=="object"&&Aw];for(var j=0;j<C.length;++j){var Y=C[j];if(Y&&Y.Math==Math)return Y}throw Error("Cannot find global object")}var r=n(this);function s(C,j){if(j)t:{var Y=r;C=C.split(".");for(var ut=0;ut<C.length-1;ut++){var Rt=C[ut];if(!(Rt in Y))break t;Y=Y[Rt]}C=C[C.length-1],ut=Y[C],j=j(ut),j!=ut&&j!=null&&e(Y,C,{configurable:!0,writable:!0,value:j})}}function a(C,j){C instanceof String&&(C+="");var Y=0,ut=!1,Rt={next:function(){if(!ut&&Y<C.length){var Yt=Y++;return{value:j(Yt,C[Yt]),done:!1}}return ut=!0,{done:!0,value:void 0}}};return Rt[Symbol.iterator]=function(){return Rt},Rt}s("Array.prototype.values",function(C){return C||function(){return a(this,function(j,Y){return Y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(C){var j=typeof C;return j=j!="object"?j:C?Array.isArray(C)?"array":j:"null",j=="array"||j=="object"&&typeof C.length=="number"}function f(C){var j=typeof C;return j=="object"&&C!=null||j=="function"}function d(C,j,Y){return C.call.apply(C.bind,arguments)}function m(C,j,Y){if(!C)throw Error();if(2<arguments.length){var ut=Array.prototype.slice.call(arguments,2);return function(){var Rt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Rt,ut),C.apply(j,Rt)}}return function(){return C.apply(j,arguments)}}function y(C,j,Y){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,y.apply(null,arguments)}function _(C,j){var Y=Array.prototype.slice.call(arguments,1);return function(){var ut=Y.slice();return ut.push.apply(ut,arguments),C.apply(this,ut)}}function x(C,j){function Y(){}Y.prototype=j.prototype,C.aa=j.prototype,C.prototype=new Y,C.prototype.constructor=C,C.Qb=function(ut,Rt,Yt){for(var Se=Array(arguments.length-2),Xn=2;Xn<arguments.length;Xn++)Se[Xn-2]=arguments[Xn];return j.prototype[Rt].apply(ut,Se)}}function S(C){const j=C.length;if(0<j){const Y=Array(j);for(let ut=0;ut<j;ut++)Y[ut]=C[ut];return Y}return[]}function T(C,j){for(let Y=1;Y<arguments.length;Y++){const ut=arguments[Y];if(u(ut)){const Rt=C.length||0,Yt=ut.length||0;C.length=Rt+Yt;for(let Se=0;Se<Yt;Se++)C[Rt+Se]=ut[Se]}else C.push(ut)}}class b{constructor(j,Y){this.i=j,this.j=Y,this.h=0,this.g=null}get(){let j;return 0<this.h?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function M(C){return/^[\s\xa0]*$/.test(C)}function R(){var C=l.navigator;return C&&(C=C.userAgent)?C:""}function A(C){return A[" "](C),C}A[" "]=function(){};var I=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function k(C,j,Y){for(const ut in C)j.call(Y,C[ut],ut,C)}function N(C,j){for(const Y in C)j.call(void 0,C[Y],Y,C)}function L(C){const j={};for(const Y in C)j[Y]=C[Y];return j}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(C,j){let Y,ut;for(let Rt=1;Rt<arguments.length;Rt++){ut=arguments[Rt];for(Y in ut)C[Y]=ut[Y];for(let Yt=0;Yt<U.length;Yt++)Y=U[Yt],Object.prototype.hasOwnProperty.call(ut,Y)&&(C[Y]=ut[Y])}}function F(C){var j=1;C=C.split(":");const Y=[];for(;0<j&&C.length;)Y.push(C.shift()),j--;return C.length&&Y.push(C.join(":")),Y}function H(C){l.setTimeout(()=>{throw C},0)}function V(){var C=et;let j=null;return C.g&&(j=C.g,C.g=C.g.next,C.g||(C.h=null),j.next=null),j}class X{constructor(){this.h=this.g=null}add(j,Y){const ut=J.get();ut.set(j,Y),this.h?this.h.next=ut:this.g=ut,this.h=ut}}var J=new b(()=>new q,C=>C.reset());class q{constructor(){this.next=this.g=this.h=null}set(j,Y){this.h=j,this.g=Y,this.next=null}reset(){this.next=this.g=this.h=null}}let W,K=!1,et=new X,Q=()=>{const C=l.Promise.resolve(void 0);W=()=>{C.then(dt)}};var dt=()=>{for(var C;C=V();){try{C.h.call(C.g)}catch(Y){H(Y)}var j=J;j.j(C),100>j.h&&(j.h++,C.next=j.g,j.g=C)}K=!1};function yt(){this.s=this.s,this.C=this.C}yt.prototype.s=!1,yt.prototype.ma=function(){this.s||(this.s=!0,this.N())},yt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xt(C,j){this.type=C,this.g=this.target=j,this.defaultPrevented=!1}xt.prototype.h=function(){this.defaultPrevented=!0};var nt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var C=!1,j=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const Y=()=>{};l.addEventListener("test",Y,j),l.removeEventListener("test",Y,j)}catch{}return C}();function ht(C,j){if(xt.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var Y=this.type=C.type,ut=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=j,j=C.relatedTarget){if(I){t:{try{A(j.nodeName);var Rt=!0;break t}catch{}Rt=!1}Rt||(j=null)}}else Y=="mouseover"?j=C.fromElement:Y=="mouseout"&&(j=C.toElement);this.relatedTarget=j,ut?(this.clientX=ut.clientX!==void 0?ut.clientX:ut.pageX,this.clientY=ut.clientY!==void 0?ut.clientY:ut.pageY,this.screenX=ut.screenX||0,this.screenY=ut.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:ft[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&ht.aa.h.call(this)}}x(ht,xt);var ft={2:"touch",3:"pen",4:"mouse"};ht.prototype.h=function(){ht.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var gt="closure_listenable_"+(1e6*Math.random()|0),wt=0;function Kt(C,j,Y,ut,Rt){this.listener=C,this.proxy=null,this.src=j,this.type=Y,this.capture=!!ut,this.ha=Rt,this.key=++wt,this.da=this.fa=!1}function zt(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function te(C){this.src=C,this.g={},this.h=0}te.prototype.add=function(C,j,Y,ut,Rt){var Yt=C.toString();C=this.g[Yt],C||(C=this.g[Yt]=[],this.h++);var Se=Ht(C,j,ut,Rt);return-1<Se?(j=C[Se],Y||(j.fa=!1)):(j=new Kt(j,this.src,Yt,!!ut,Rt),j.fa=Y,C.push(j)),j};function Pt(C,j){var Y=j.type;if(Y in C.g){var ut=C.g[Y],Rt=Array.prototype.indexOf.call(ut,j,void 0),Yt;(Yt=0<=Rt)&&Array.prototype.splice.call(ut,Rt,1),Yt&&(zt(j),C.g[Y].length==0&&(delete C.g[Y],C.h--))}}function Ht(C,j,Y,ut){for(var Rt=0;Rt<C.length;++Rt){var Yt=C[Rt];if(!Yt.da&&Yt.listener==j&&Yt.capture==!!Y&&Yt.ha==ut)return Rt}return-1}var at="closure_lm_"+(1e6*Math.random()|0),ue={};function Jt(C,j,Y,ut,Rt){if(Array.isArray(j)){for(var Yt=0;Yt<j.length;Yt++)Jt(C,j[Yt],Y,ut,Rt);return null}return Y=Ct(Y),C&&C[gt]?C.K(j,Y,f(ut)?!!ut.capture:!1,Rt):se(C,j,Y,!1,ut,Rt)}function se(C,j,Y,ut,Rt,Yt){if(!j)throw Error("Invalid event type");var Se=f(Rt)?!!Rt.capture:!!Rt,Xn=lt(C);if(Xn||(C[at]=Xn=new te(C)),Y=Xn.add(j,Y,ut,Se,Yt),Y.proxy)return Y;if(ut=ae(),Y.proxy=ut,ut.src=C,ut.listener=Y,C.addEventListener)nt||(Rt=Se),Rt===void 0&&(Rt=!1),C.addEventListener(j.toString(),ut,Rt);else if(C.attachEvent)C.attachEvent(ct(j.toString()),ut);else if(C.addListener&&C.removeListener)C.addListener(ut);else throw Error("addEventListener and attachEvent are unavailable.");return Y}function ae(){function C(Y){return j.call(C.src,C.listener,Y)}const j=G;return C}function Ce(C,j,Y,ut,Rt){if(Array.isArray(j))for(var Yt=0;Yt<j.length;Yt++)Ce(C,j[Yt],Y,ut,Rt);else ut=f(ut)?!!ut.capture:!!ut,Y=Ct(Y),C&&C[gt]?(C=C.i,j=String(j).toString(),j in C.g&&(Yt=C.g[j],Y=Ht(Yt,Y,ut,Rt),-1<Y&&(zt(Yt[Y]),Array.prototype.splice.call(Yt,Y,1),Yt.length==0&&(delete C.g[j],C.h--)))):C&&(C=lt(C))&&(j=C.g[j.toString()],C=-1,j&&(C=Ht(j,Y,ut,Rt)),(Y=-1<C?j[C]:null)&&le(Y))}function le(C){if(typeof C!="number"&&C&&!C.da){var j=C.src;if(j&&j[gt])Pt(j.i,C);else{var Y=C.type,ut=C.proxy;j.removeEventListener?j.removeEventListener(Y,ut,C.capture):j.detachEvent?j.detachEvent(ct(Y),ut):j.addListener&&j.removeListener&&j.removeListener(ut),(Y=lt(j))?(Pt(Y,C),Y.h==0&&(Y.src=null,j[at]=null)):zt(C)}}}function ct(C){return C in ue?ue[C]:ue[C]="on"+C}function G(C,j){if(C.da)C=!0;else{j=new ht(j,this);var Y=C.listener,ut=C.ha||C.src;C.fa&&le(C),C=Y.call(ut,j)}return C}function lt(C){return C=C[at],C instanceof te?C:null}var mt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ct(C){return typeof C=="function"?C:(C[mt]||(C[mt]=function(j){return C.handleEvent(j)}),C[mt])}function bt(){yt.call(this),this.i=new te(this),this.M=this,this.F=null}x(bt,yt),bt.prototype[gt]=!0,bt.prototype.removeEventListener=function(C,j,Y,ut){Ce(this,C,j,Y,ut)};function Mt(C,j){var Y,ut=C.F;if(ut)for(Y=[];ut;ut=ut.F)Y.push(ut);if(C=C.M,ut=j.type||j,typeof j=="string")j=new xt(j,C);else if(j instanceof xt)j.target=j.target||C;else{var Rt=j;j=new xt(ut,C),O(j,Rt)}if(Rt=!0,Y)for(var Yt=Y.length-1;0<=Yt;Yt--){var Se=j.g=Y[Yt];Rt=Lt(Se,ut,!0,j)&&Rt}if(Se=j.g=C,Rt=Lt(Se,ut,!0,j)&&Rt,Rt=Lt(Se,ut,!1,j)&&Rt,Y)for(Yt=0;Yt<Y.length;Yt++)Se=j.g=Y[Yt],Rt=Lt(Se,ut,!1,j)&&Rt}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var C=this.i,j;for(j in C.g){for(var Y=C.g[j],ut=0;ut<Y.length;ut++)zt(Y[ut]);delete C.g[j],C.h--}}this.F=null},bt.prototype.K=function(C,j,Y,ut){return this.i.add(String(C),j,!1,Y,ut)},bt.prototype.L=function(C,j,Y,ut){return this.i.add(String(C),j,!0,Y,ut)};function Lt(C,j,Y,ut){if(j=C.i.g[String(j)],!j)return!0;j=j.concat();for(var Rt=!0,Yt=0;Yt<j.length;++Yt){var Se=j[Yt];if(Se&&!Se.da&&Se.capture==Y){var Xn=Se.listener,ar=Se.ha||Se.src;Se.fa&&Pt(C.i,Se),Rt=Xn.call(ar,ut)!==!1&&Rt}}return Rt&&!ut.defaultPrevented}function Qt(C,j,Y){if(typeof C=="function")Y&&(C=y(C,Y));else if(C&&typeof C.handleEvent=="function")C=y(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(j)?-1:l.setTimeout(C,j||0)}function Oe(C){C.g=Qt(()=>{C.g=null,C.i&&(C.i=!1,Oe(C))},C.l);const j=C.h;C.h=null,C.m.apply(null,j)}class jt extends yt{constructor(j,Y){super(),this.m=j,this.l=Y,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:Oe(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ve(C){yt.call(this),this.h=C,this.g={}}x(ve,yt);var we=[];function Me(C){k(C.g,function(j,Y){this.g.hasOwnProperty(Y)&&le(j)},C),C.g={}}ve.prototype.N=function(){ve.aa.N.call(this),Me(this)},ve.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zt=l.JSON.stringify,Re=l.JSON.parse,Ie=class{stringify(C){return l.JSON.stringify(C,void 0)}parse(C){return l.JSON.parse(C,void 0)}};function en(){}en.prototype.h=null;function At(C){return C.h||(C.h=C.i())}function Te(){}var Xt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function re(){xt.call(this,"d")}x(re,xt);function Ae(){xt.call(this,"c")}x(Ae,xt);var Ee={},sn=null;function Wn(){return sn=sn||new bt}Ee.La="serverreachability";function ze(C){xt.call(this,Ee.La,C)}x(ze,xt);function Qe(C){const j=Wn();Mt(j,new ze(j))}Ee.STAT_EVENT="statevent";function Lr(C,j){xt.call(this,Ee.STAT_EVENT,C),this.stat=j}x(Lr,xt);function Qn(C){const j=Wn();Mt(j,new Lr(j,C))}Ee.Ma="timingevent";function er(C,j){xt.call(this,Ee.Ma,C),this.size=j}x(er,xt);function qi(C,j){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){C()},j)}function fr(){this.g=!0}fr.prototype.xa=function(){this.g=!1};function ks(C,j,Y,ut,Rt,Yt){C.info(function(){if(C.g)if(Yt)for(var Se="",Xn=Yt.split("&"),ar=0;ar<Xn.length;ar++){var Yn=Xn[ar].split("=");if(1<Yn.length){var Sr=Yn[0];Yn=Yn[1];var zr=Sr.split("_");Se=2<=zr.length&&zr[1]=="type"?Se+(Sr+"="+Yn+"&"):Se+(Sr+"=redacted&")}}else Se=null;else Se=Yt;return"XMLHTTP REQ ("+ut+") [attempt "+Rt+"]: "+j+`
`+Y+`
`+Se})}function Qf(C,j,Y,ut,Rt,Yt,Se){C.info(function(){return"XMLHTTP RESP ("+ut+") [ attempt "+Rt+"]: "+j+`
`+Y+`
`+Yt+" "+Se})}function os(C,j,Y,ut){C.info(function(){return"XMLHTTP TEXT ("+j+"): "+qa(C,Y)+(ut?" "+ut:"")})}function Ss(C,j){C.info(function(){return"TIMEOUT: "+j})}fr.prototype.info=function(){};function qa(C,j){if(!C.g)return j;if(!j)return null;try{var Y=JSON.parse(j);if(Y){for(C=0;C<Y.length;C++)if(Array.isArray(Y[C])){var ut=Y[C];if(!(2>ut.length)){var Rt=ut[1];if(Array.isArray(Rt)&&!(1>Rt.length)){var Yt=Rt[0];if(Yt!="noop"&&Yt!="stop"&&Yt!="close")for(var Se=1;Se<Rt.length;Se++)Rt[Se]=""}}}}return Zt(Y)}catch{return j}}var ri={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},va={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ks;function $a(){}x($a,en),$a.prototype.g=function(){return new XMLHttpRequest},$a.prototype.i=function(){return{}},Ks=new $a;function ls(C,j,Y,ut){this.j=C,this.i=j,this.l=Y,this.R=ut||1,this.U=new ve(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nr}function nr(){this.i=null,this.g="",this.h=!1}var Iu={},ql={};function Zs(C,j,Y){C.L=1,C.v=rr(kr(j)),C.m=Y,C.P=!0,it(C,null)}function it(C,j){C.F=Date.now(),Vt(C),C.A=kr(C.v);var Y=C.A,ut=C.R;Array.isArray(ut)||(ut=[String(ut)]),Ad(Y.i,"t",ut),C.C=0,Y=C.j.J,C.h=new nr,C.g=Co(C.j,Y?j:null,!C.m),0<C.O&&(C.M=new jt(y(C.Y,C,C.g),C.O)),j=C.U,Y=C.g,ut=C.ca;var Rt="readystatechange";Array.isArray(Rt)||(Rt&&(we[0]=Rt.toString()),Rt=we);for(var Yt=0;Yt<Rt.length;Yt++){var Se=Jt(Y,Rt[Yt],ut||j.handleEvent,!1,j.h||j);if(!Se)break;j.g[Se.key]=Se}j=C.H?L(C.H):{},C.m?(C.u||(C.u="POST"),j["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,j)):(C.u="GET",C.g.ea(C.A,C.u,null,j)),Qe(),ks(C.i,C.u,C.A,C.l,C.R,C.m)}ls.prototype.ca=function(C){C=C.target;const j=this.M;j&&Xa(C)==3?j.j():this.Y(C)},ls.prototype.Y=function(C){try{if(C==this.g)t:{const zr=Xa(this.g);var j=this.g.Ba();const Er=this.g.Z();if(!(3>zr)&&(zr!=3||this.g&&(this.h.h||this.g.oa()||Em(this.g)))){this.J||zr!=4||j==7||(j==8||0>=Er?Qe(3):Qe(2)),he(this);var Y=this.g.Z();this.X=Y;e:if(St(this)){var ut=Em(this.g);C="";var Rt=ut.length,Yt=Xa(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xe(this),be(this);var Se="";break e}this.h.i=new l.TextDecoder}for(j=0;j<Rt;j++)this.h.h=!0,C+=this.h.i.decode(ut[j],{stream:!(Yt&&j==Rt-1)});ut.length=0,this.h.g+=C,this.C=0,Se=this.h.g}else Se=this.g.oa();if(this.o=Y==200,Qf(this.i,this.u,this.A,this.l,this.R,zr,Y),this.o){if(this.T&&!this.K){e:{if(this.g){var Xn,ar=this.g;if((Xn=ar.g?ar.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(Xn)){var Yn=Xn;break e}}Yn=null}if(Y=Yn)os(this.i,this.l,Y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Le(this,Y);else{this.o=!1,this.s=3,Qn(12),xe(this),be(this);break t}}if(this.P){Y=!0;let us;for(;!this.J&&this.C<Se.length;)if(us=Bt(this,Se),us==ql){zr==4&&(this.s=4,Qn(14),Y=!1),os(this.i,this.l,null,"[Incomplete Response]");break}else if(us==Iu){this.s=4,Qn(15),os(this.i,this.l,Se,"[Invalid Chunk]"),Y=!1;break}else os(this.i,this.l,us,null),Le(this,us);if(St(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zr!=4||Se.length!=0||this.h.h||(this.s=1,Qn(16),Y=!1),this.o=this.o&&Y,!Y)os(this.i,this.l,Se,"[Invalid Chunked Response]"),xe(this),be(this);else if(0<Se.length&&!this.W){this.W=!0;var Sr=this.j;Sr.g==this&&Sr.ba&&!Sr.M&&(Sr.j.info("Great, no buffering proxy detected. Bytes received: "+Se.length),Lu(Sr),Sr.M=!0,Qn(11))}}else os(this.i,this.l,Se,null),Le(this,Se);zr==4&&xe(this),this.o&&!this.J&&(zr==4?Rd(this.j,this):(this.o=!1,Vt(this)))}else j_(this.g),Y==400&&0<Se.indexOf("Unknown SID")?(this.s=3,Qn(12)):(this.s=0,Qn(13)),xe(this),be(this)}}}catch{}finally{}};function St(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function Bt(C,j){var Y=C.C,ut=j.indexOf(`
`,Y);return ut==-1?ql:(Y=Number(j.substring(Y,ut)),isNaN(Y)?Iu:(ut+=1,ut+Y>j.length?ql:(j=j.slice(ut,ut+Y),C.C=ut+Y,j)))}ls.prototype.cancel=function(){this.J=!0,xe(this)};function Vt(C){C.S=Date.now()+C.I,Ot(C,C.I)}function Ot(C,j){if(C.B!=null)throw Error("WatchDog timer not null");C.B=qi(y(C.ba,C),j)}function he(C){C.B&&(l.clearTimeout(C.B),C.B=null)}ls.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(Ss(this.i,this.A),this.L!=2&&(Qe(),Qn(17)),xe(this),this.s=2,be(this)):Ot(this,this.S-C)};function be(C){C.j.G==0||C.J||Rd(C.j,C)}function xe(C){he(C);var j=C.M;j&&typeof j.ma=="function"&&j.ma(),C.M=null,Me(C.U),C.g&&(j=C.g,C.g=null,j.abort(),j.ma())}function Le(C,j){try{var Y=C.j;if(Y.G!=0&&(Y.g==C||Gn(Y.h,C))){if(!C.K&&Gn(Y.h,C)&&Y.G==3){try{var ut=Y.Da.g.parse(j)}catch{ut=null}if(Array.isArray(ut)&&ut.length==3){var Rt=ut;if(Rt[0]==0){t:if(!Y.u){if(Y.g)if(Y.g.F+3e3<C.F)Uc(Y),nh(Y);else break t;ah(Y),Qn(18)}}else Y.za=Rt[1],0<Y.za-Y.T&&37500>Rt[2]&&Y.F&&Y.v==0&&!Y.C&&(Y.C=qi(y(Y.Za,Y),6e3));if(1>=On(Y.h)&&Y.ca){try{Y.ca()}catch{}Y.ca=void 0}}else Xl(Y,11)}else if((C.K||Y.g==C)&&Uc(Y),!M(j))for(Rt=Y.Da.g.parse(j),j=0;j<Rt.length;j++){let Yn=Rt[j];if(Y.T=Yn[0],Yn=Yn[1],Y.G==2)if(Yn[0]=="c"){Y.K=Yn[1],Y.ia=Yn[2];const Sr=Yn[3];Sr!=null&&(Y.la=Sr,Y.j.info("VER="+Y.la));const zr=Yn[4];zr!=null&&(Y.Aa=zr,Y.j.info("SVER="+Y.Aa));const Er=Yn[5];Er!=null&&typeof Er=="number"&&0<Er&&(ut=1.5*Er,Y.L=ut,Y.j.info("backChannelRequestTimeoutMs_="+ut)),ut=Y;const us=C.g;if(us){const Io=us.g?us.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Io){var Yt=ut.h;Yt.g||Io.indexOf("spdy")==-1&&Io.indexOf("quic")==-1&&Io.indexOf("h2")==-1||(Yt.j=Yt.l,Yt.g=new Set,Yt.h&&(Mi(Yt,Yt.h),Yt.h=null))}if(ut.D){const Pd=us.g?us.g.getResponseHeader("X-HTTP-Session-Id"):null;Pd&&(ut.ya=Pd,vn(ut.I,ut.D,Pd))}}Y.G=3,Y.l&&Y.l.ua(),Y.ba&&(Y.R=Date.now()-C.F,Y.j.info("Handshake RTT: "+Y.R+"ms")),ut=Y;var Se=C;if(ut.qa=Cm(ut,ut.J?ut.ia:null,ut.W),Se.K){Pn(ut.h,Se);var Xn=Se,ar=ut.L;ar&&(Xn.I=ar),Xn.B&&(he(Xn),Vt(Xn)),ut.g=Se}else Am(ut);0<Y.i.length&&ih(Y)}else Yn[0]!="stop"&&Yn[0]!="close"||Xl(Y,7);else Y.G==3&&(Yn[0]=="stop"||Yn[0]=="close"?Yn[0]=="stop"?Xl(Y,7):Cd(Y):Yn[0]!="noop"&&Y.l&&Y.l.ta(Yn),Y.v=0)}}Qe(4)}catch{}}var nn=class{constructor(C,j){this.g=C,this.map=j}};function Ye(C){this.l=C||10,l.PerformanceNavigationTiming?(C=l.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ge(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function On(C){return C.h?1:C.g?C.g.size:0}function Gn(C,j){return C.h?C.h==j:C.g?C.g.has(j):!1}function Mi(C,j){C.g?C.g.add(j):C.h=j}function Pn(C,j){C.h&&C.h==j?C.h=null:C.g&&C.g.has(j)&&C.g.delete(j)}Ye.prototype.cancel=function(){if(this.i=zn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function zn(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let j=C.i;for(const Y of C.g.values())j=j.concat(Y.D);return j}return S(C.i)}function Ke(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(u(C)){for(var j=[],Y=C.length,ut=0;ut<Y;ut++)j.push(C[ut]);return j}j=[],Y=0;for(ut in C)j[Y++]=C[ut];return j}function $i(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(u(C)||typeof C=="string"){var j=[];C=C.length;for(var Y=0;Y<C;Y++)j.push(Y);return j}j=[],Y=0;for(const ut in C)j[Y++]=ut;return j}}}function jn(C,j){if(C.forEach&&typeof C.forEach=="function")C.forEach(j,void 0);else if(u(C)||typeof C=="string")Array.prototype.forEach.call(C,j,void 0);else for(var Y=$i(C),ut=Ke(C),Rt=ut.length,Yt=0;Yt<Rt;Yt++)j.call(void 0,ut[Yt],Y&&Y[Yt],C)}var Ur=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Eo(C,j){if(C){C=C.split("&");for(var Y=0;Y<C.length;Y++){var ut=C[Y].indexOf("="),Rt=null;if(0<=ut){var Yt=C[Y].substring(0,ut);Rt=C[Y].substring(ut+1)}else Yt=C[Y];j(Yt,Rt?decodeURIComponent(Rt.replace(/\+/g," ")):"")}}}function Jn(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof Jn){this.h=C.h,si(this,C.j),this.o=C.o,this.g=C.g,hr(this,C.s),this.l=C.l;var j=C.i,Y=new $l;Y.i=j.i,j.g&&(Y.g=new Map(j.g),Y.h=j.h),ir(this,Y),this.m=C.m}else C&&(j=String(C).match(Ur))?(this.h=!1,si(this,j[1]||"",!0),this.o=xr(j[2]||""),this.g=xr(j[3]||"",!0),hr(this,j[4]),this.l=xr(j[5]||"",!0),ir(this,j[6]||"",!0),this.m=xr(j[7]||"")):(this.h=!1,this.i=new $l(null,this.h))}Jn.prototype.toString=function(){var C=[],j=this.j;j&&C.push(zs(j,Cc,!0),":");var Y=this.g;return(Y||j=="file")&&(C.push("//"),(j=this.o)&&C.push(zs(j,Cc,!0),"@"),C.push(encodeURIComponent(String(Y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Y=this.s,Y!=null&&C.push(":",String(Y))),(Y=this.l)&&(this.g&&Y.charAt(0)!="/"&&C.push("/"),C.push(zs(Y,Y.charAt(0)=="/"?bm:wd,!0))),(Y=this.i.toString())&&C.push("?",Y),(Y=this.m)&&C.push("#",zs(Y,th)),C.join("")};function kr(C){return new Jn(C)}function si(C,j,Y){C.j=Y?xr(j,!0):j,C.j&&(C.j=C.j.replace(/:$/,""))}function hr(C,j){if(j){if(j=Number(j),isNaN(j)||0>j)throw Error("Bad port number "+j);C.s=j}else C.s=null}function ir(C,j,Y){j instanceof $l?(C.i=j,xm(C.i,C.h)):(Y||(j=zs(j,Ny)),C.i=new $l(j,C.h))}function vn(C,j,Y){C.i.set(j,Y)}function rr(C){return vn(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function xr(C,j){return C?j?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function zs(C,j,Y){return typeof C=="string"?(C=encodeURI(C).replace(j,Jf),Y&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function Jf(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var Cc=/[#\/\?@]/g,wd=/[#\?:]/g,bm=/[#\?]/g,Ny=/[#\?@]/g,th=/#/g;function $l(C,j){this.h=this.g=null,this.i=C||null,this.j=!!j}function Wa(C){C.g||(C.g=new Map,C.h=0,C.i&&Eo(C.i,function(j,Y){C.add(decodeURIComponent(j.replace(/\+/g," ")),Y)}))}i=$l.prototype,i.add=function(C,j){Wa(this),this.i=null,C=To(this,C);var Y=this.g.get(C);return Y||this.g.set(C,Y=[]),Y.push(j),this.h+=1,this};function hl(C,j){Wa(C),j=To(C,j),C.g.has(j)&&(C.i=null,C.h-=C.g.get(j).length,C.g.delete(j))}function Wl(C,j){return Wa(C),j=To(C,j),C.g.has(j)}i.forEach=function(C,j){Wa(this),this.g.forEach(function(Y,ut){Y.forEach(function(Rt){C.call(j,Rt,ut,this)},this)},this)},i.na=function(){Wa(this);const C=Array.from(this.g.values()),j=Array.from(this.g.keys()),Y=[];for(let ut=0;ut<j.length;ut++){const Rt=C[ut];for(let Yt=0;Yt<Rt.length;Yt++)Y.push(j[ut])}return Y},i.V=function(C){Wa(this);let j=[];if(typeof C=="string")Wl(this,C)&&(j=j.concat(this.g.get(To(this,C))));else{C=Array.from(this.g.values());for(let Y=0;Y<C.length;Y++)j=j.concat(C[Y])}return j},i.set=function(C,j){return Wa(this),this.i=null,C=To(this,C),Wl(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[j]),this.h+=1,this},i.get=function(C,j){return C?(C=this.V(C),0<C.length?String(C[0]):j):j};function Ad(C,j,Y){hl(C,j),0<Y.length&&(C.i=null,C.g.set(To(C,j),S(Y)),C.h+=Y.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],j=Array.from(this.g.keys());for(var Y=0;Y<j.length;Y++){var ut=j[Y];const Yt=encodeURIComponent(String(ut)),Se=this.V(ut);for(ut=0;ut<Se.length;ut++){var Rt=Yt;Se[ut]!==""&&(Rt+="="+encodeURIComponent(String(Se[ut]))),C.push(Rt)}}return this.i=C.join("&")};function To(C,j){return j=String(j),C.j&&(j=j.toLowerCase()),j}function xm(C,j){j&&!C.j&&(Wa(C),C.i=null,C.g.forEach(function(Y,ut){var Rt=ut.toLowerCase();ut!=Rt&&(hl(this,ut),Ad(this,Rt,Y))},C)),C.j=j}function Rc(C,j){const Y=new fr;if(l.Image){const ut=new Image;ut.onload=_(_a,Y,"TestLoadImage: loaded",!0,j,ut),ut.onerror=_(_a,Y,"TestLoadImage: error",!1,j,ut),ut.onabort=_(_a,Y,"TestLoadImage: abort",!1,j,ut),ut.ontimeout=_(_a,Y,"TestLoadImage: timeout",!1,j,ut),l.setTimeout(function(){ut.ontimeout&&ut.ontimeout()},1e4),ut.src=C}else j(!1)}function wo(C,j){const Y=new fr,ut=new AbortController,Rt=setTimeout(()=>{ut.abort(),_a(Y,"TestPingServer: timeout",!1,j)},1e4);fetch(C,{signal:ut.signal}).then(Yt=>{clearTimeout(Rt),Yt.ok?_a(Y,"TestPingServer: ok",!0,j):_a(Y,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(Rt),_a(Y,"TestPingServer: error",!1,j)})}function _a(C,j,Y,ut,Rt){try{Rt&&(Rt.onload=null,Rt.onerror=null,Rt.onabort=null,Rt.ontimeout=null),ut(Y)}catch{}}function Oc(){this.g=new Ie}function dl(C,j,Y){const ut=Y||"";try{jn(C,function(Rt,Yt){let Se=Rt;f(Rt)&&(Se=Zt(Rt)),j.push(ut+Yt+"="+encodeURIComponent(Se))})}catch(Rt){throw j.push(ut+"type="+encodeURIComponent("_badmap")),Rt}}function Ic(C){this.l=C.Ub||null,this.j=C.eb||!1}x(Ic,en),Ic.prototype.g=function(){return new Du(this.l,this.j)},Ic.prototype.i=function(C){return function(){return C}}({});function Du(C,j){bt.call(this),this.D=C,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Du,bt),i=Du.prototype,i.open=function(C,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=j,this.readyState=1,Ao(this)},i.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const j={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(j.body=C),(this.D||l).fetch(new Request(this.A,j)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ba(this)),this.readyState=0},i.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,Ao(this)),this.g&&(this.readyState=3,Ao(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Md(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function Md(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}i.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var j=C.value?C.value:new Uint8Array(0);(j=this.v.decode(j,{stream:!C.done}))&&(this.response=this.responseText+=j)}C.done?ba(this):Ao(this),this.readyState==3&&Md(this)}},i.Ra=function(C){this.g&&(this.response=this.responseText=C,ba(this))},i.Qa=function(C){this.g&&(this.response=C,ba(this))},i.ga=function(){this.g&&ba(this)};function ba(C){C.readyState=4,C.l=null,C.j=null,C.v=null,Ao(C)}i.setRequestHeader=function(C,j){this.u.append(C,j)},i.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],j=this.h.entries();for(var Y=j.next();!Y.done;)Y=Y.value,C.push(Y[0]+": "+Y[1]),Y=j.next();return C.join(`\r
`)};function Ao(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(Du.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function Dc(C){let j="";return k(C,function(Y,ut){j+=ut,j+=":",j+=Y,j+=`\r
`}),j}function Yr(C,j,Y){t:{for(ut in Y){var ut=!1;break t}ut=!0}ut||(Y=Dc(Y),typeof C=="string"?Y!=null&&encodeURIComponent(String(Y)):vn(C,j,Y))}function pi(C){bt.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(pi,bt);var Pc=/^https?$/i,Nc=["POST","PUT"];i=pi.prototype,i.Ha=function(C){this.J=C},i.ea=function(C,j,Y,ut){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);j=j?j.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ks.g(),this.v=this.o?At(this.o):At(Ks),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(j,String(C),!0),this.B=!1}catch(Yt){Sm(this,Yt);return}if(C=Y||"",Y=new Map(this.headers),ut)if(Object.getPrototypeOf(ut)===Object.prototype)for(var Rt in ut)Y.set(Rt,ut[Rt]);else if(typeof ut.keys=="function"&&typeof ut.get=="function")for(const Yt of ut.keys())Y.set(Yt,ut.get(Yt));else throw Error("Unknown input type for opt_headers: "+String(ut));ut=Array.from(Y.keys()).find(Yt=>Yt.toLowerCase()=="content-type"),Rt=l.FormData&&C instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Nc,j,void 0))||ut||Rt||Y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Yt,Se]of Y)this.g.setRequestHeader(Yt,Se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Nu(this),this.u=!0,this.g.send(C),this.u=!1}catch(Yt){Sm(this,Yt)}};function Sm(C,j){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=j,C.m=5,Mo(C),pl(C)}function Mo(C){C.A||(C.A=!0,Mt(C,"complete"),Mt(C,"error"))}i.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,Mt(this,"complete"),Mt(this,"abort"),pl(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pl(this,!0)),pi.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Pu(this):this.bb())},i.bb=function(){Pu(this)};function Pu(C){if(C.h&&typeof o<"u"&&(!C.v[1]||Xa(C)!=4||C.Z()!=2)){if(C.u&&Xa(C)==4)Qt(C.Ea,0,C);else if(Mt(C,"readystatechange"),Xa(C)==4){C.h=!1;try{const Se=C.Z();t:switch(Se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break t;default:j=!1}var Y;if(!(Y=j)){var ut;if(ut=Se===0){var Rt=String(C.D).match(Ur)[1]||null;!Rt&&l.self&&l.self.location&&(Rt=l.self.location.protocol.slice(0,-1)),ut=!Pc.test(Rt?Rt.toLowerCase():"")}Y=ut}if(Y)Mt(C,"complete"),Mt(C,"success");else{C.m=6;try{var Yt=2<Xa(C)?C.g.statusText:""}catch{Yt=""}C.l=Yt+" ["+C.Z()+"]",Mo(C)}}finally{pl(C)}}}}function pl(C,j){if(C.g){Nu(C);const Y=C.g,ut=C.v[0]?()=>{}:null;C.g=null,C.v=null,j||Mt(C,"ready");try{Y.onreadystatechange=ut}catch{}}}function Nu(C){C.I&&(l.clearTimeout(C.I),C.I=null)}i.isActive=function(){return!!this.g};function Xa(C){return C.g?C.g.readyState:0}i.Z=function(){try{return 2<Xa(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(C){if(this.g){var j=this.g.responseText;return C&&j.indexOf(C)==0&&(j=j.substring(C.length)),Re(j)}};function Em(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function j_(C){const j={};C=(C.g&&2<=Xa(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let ut=0;ut<C.length;ut++){if(M(C[ut]))continue;var Y=F(C[ut]);const Rt=Y[0];if(Y=Y[1],typeof Y!="string")continue;Y=Y.trim();const Yt=j[Rt]||[];j[Rt]=Yt,Yt.push(Y)}N(j,function(ut){return ut.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sr(C,j,Y){return Y&&Y.internalChannelParams&&Y.internalChannelParams[C]||j}function eh(C){this.Aa=0,this.i=[],this.j=new fr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sr("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sr("baseRetryDelayMs",5e3,C),this.cb=sr("retryDelaySeedMs",1e4,C),this.Wa=sr("forwardChannelMaxRetries",2,C),this.wa=sr("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(C&&C.concurrentRequestLimit),this.Da=new Oc,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=eh.prototype,i.la=8,i.G=1,i.connect=function(C,j,Y,ut){Qn(0),this.W=C,this.H=j||{},Y&&ut!==void 0&&(this.H.OSID=Y,this.H.OAID=ut),this.F=this.X,this.I=Cm(this,null,this.W),ih(this)};function Cd(C){if(Tm(C),C.G==3){var j=C.U++,Y=kr(C.I);if(vn(Y,"SID",C.K),vn(Y,"RID",j),vn(Y,"TYPE","terminate"),Lc(C,Y),j=new ls(C,C.j,j),j.L=2,j.v=rr(kr(Y)),Y=!1,l.navigator&&l.navigator.sendBeacon)try{Y=l.navigator.sendBeacon(j.v.toString(),"")}catch{}!Y&&l.Image&&(new Image().src=j.v,Y=!0),Y||(j.g=Co(j.j,null),j.g.ea(j.v)),j.F=Date.now(),Vt(j)}Od(C)}function nh(C){C.g&&(Lu(C),C.g.cancel(),C.g=null)}function Tm(C){nh(C),C.u&&(l.clearTimeout(C.u),C.u=null),Uc(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&l.clearTimeout(C.s),C.s=null)}function ih(C){if(!Ge(C.h)&&!C.s){C.s=!0;var j=C.Ga;W||Q(),K||(W(),K=!0),et.add(j,C),C.B=0}}function rh(C,j){return On(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=j.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=qi(y(C.Ga,C,j),oh(C,C.B)),C.B++,!0)}i.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const Rt=new ls(this,this.j,C);let Yt=this.o;if(this.S&&(Yt?(Yt=L(Yt),O(Yt,this.S)):Yt=this.S),this.m!==null||this.O||(Rt.H=Yt,Yt=null),this.P)t:{for(var j=0,Y=0;Y<this.i.length;Y++){e:{var ut=this.i[Y];if("__data__"in ut.map&&(ut=ut.map.__data__,typeof ut=="string")){ut=ut.length;break e}ut=void 0}if(ut===void 0)break;if(j+=ut,4096<j){j=Y;break t}if(j===4096||Y===this.i.length-1){j=Y+1;break t}}j=1e3}else j=1e3;j=wm(this,Rt,j),Y=kr(this.I),vn(Y,"RID",C),vn(Y,"CVER",22),this.D&&vn(Y,"X-HTTP-Session-Id",this.D),Lc(this,Y),Yt&&(this.O?j="headers="+encodeURIComponent(String(Dc(Yt)))+"&"+j:this.m&&Yr(Y,this.m,Yt)),Mi(this.h,Rt),this.Ua&&vn(Y,"TYPE","init"),this.P?(vn(Y,"$req",j),vn(Y,"SID","null"),Rt.T=!0,Zs(Rt,Y,null)):Zs(Rt,Y,j),this.G=2}}else this.G==3&&(C?sh(this,C):this.i.length==0||Ge(this.h)||sh(this))};function sh(C,j){var Y;j?Y=j.l:Y=C.U++;const ut=kr(C.I);vn(ut,"SID",C.K),vn(ut,"RID",Y),vn(ut,"AID",C.T),Lc(C,ut),C.m&&C.o&&Yr(ut,C.m,C.o),Y=new ls(C,C.j,Y,C.B+1),C.m===null&&(Y.H=C.o),j&&(C.i=j.D.concat(C.i)),j=wm(C,Y,1e3),Y.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),Mi(C.h,Y),Zs(Y,ut,j)}function Lc(C,j){C.H&&k(C.H,function(Y,ut){vn(j,ut,Y)}),C.l&&jn({},function(Y,ut){vn(j,ut,Y)})}function wm(C,j,Y){Y=Math.min(C.i.length,Y);var ut=C.l?y(C.l.Na,C.l,C):null;t:{var Rt=C.i;let Yt=-1;for(;;){const Se=["count="+Y];Yt==-1?0<Y?(Yt=Rt[0].g,Se.push("ofs="+Yt)):Yt=0:Se.push("ofs="+Yt);let Xn=!0;for(let ar=0;ar<Y;ar++){let Yn=Rt[ar].g;const Sr=Rt[ar].map;if(Yn-=Yt,0>Yn)Yt=Math.max(0,Rt[ar].g-100),Xn=!1;else try{dl(Sr,Se,"req"+Yn+"_")}catch{ut&&ut(Sr)}}if(Xn){ut=Se.join("&");break t}}}return C=C.i.splice(0,Y),j.D=C,ut}function Am(C){if(!C.g&&!C.u){C.Y=1;var j=C.Fa;W||Q(),K||(W(),K=!0),et.add(j,C),C.v=0}}function ah(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=qi(y(C.Fa,C),oh(C,C.v)),C.v++,!0)}i.Fa=function(){if(this.u=null,Mm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=qi(y(this.ab,this),C)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qn(10),nh(this),Mm(this))};function Lu(C){C.A!=null&&(l.clearTimeout(C.A),C.A=null)}function Mm(C){C.g=new ls(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var j=kr(C.qa);vn(j,"RID","rpc"),vn(j,"SID",C.K),vn(j,"AID",C.T),vn(j,"CI",C.F?"0":"1"),!C.F&&C.ja&&vn(j,"TO",C.ja),vn(j,"TYPE","xmlhttp"),Lc(C,j),C.m&&C.o&&Yr(j,C.m,C.o),C.L&&(C.g.I=C.L);var Y=C.g;C=C.ia,Y.L=1,Y.v=rr(kr(j)),Y.m=null,Y.P=!0,it(Y,C)}i.Za=function(){this.C!=null&&(this.C=null,nh(this),ah(this),Qn(19))};function Uc(C){C.C!=null&&(l.clearTimeout(C.C),C.C=null)}function Rd(C,j){var Y=null;if(C.g==j){Uc(C),Lu(C),C.g=null;var ut=2}else if(Gn(C.h,j))Y=j.D,Pn(C.h,j),ut=1;else return;if(C.G!=0){if(j.o)if(ut==1){Y=j.m?j.m.length:0,j=Date.now()-j.F;var Rt=C.B;ut=Wn(),Mt(ut,new er(ut,Y)),ih(C)}else Am(C);else if(Rt=j.s,Rt==3||Rt==0&&0<j.X||!(ut==1&&rh(C,j)||ut==2&&ah(C)))switch(Y&&0<Y.length&&(j=C.h,j.i=j.i.concat(Y)),Rt){case 1:Xl(C,5);break;case 4:Xl(C,10);break;case 3:Xl(C,6);break;default:Xl(C,2)}}}function oh(C,j){let Y=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(Y*=2),Y*j}function Xl(C,j){if(C.j.info("Error code "+j),j==2){var Y=y(C.fb,C),ut=C.Xa;const Rt=!ut;ut=new Jn(ut||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||si(ut,"https"),rr(ut),Rt?Rc(ut.toString(),Y):wo(ut.toString(),Y)}else Qn(2);C.G=0,C.l&&C.l.sa(j),Od(C),Tm(C)}i.fb=function(C){C?(this.j.info("Successfully pinged google.com"),Qn(2)):(this.j.info("Failed to ping google.com"),Qn(1))};function Od(C){if(C.G=0,C.ka=[],C.l){const j=zn(C.h);(j.length!=0||C.i.length!=0)&&(T(C.ka,j),T(C.ka,C.i),C.h.i.length=0,S(C.i),C.i.length=0),C.l.ra()}}function Cm(C,j,Y){var ut=Y instanceof Jn?kr(Y):new Jn(Y);if(ut.g!="")j&&(ut.g=j+"."+ut.g),hr(ut,ut.s);else{var Rt=l.location;ut=Rt.protocol,j=j?j+"."+Rt.hostname:Rt.hostname,Rt=+Rt.port;var Yt=new Jn(null);ut&&si(Yt,ut),j&&(Yt.g=j),Rt&&hr(Yt,Rt),Y&&(Yt.l=Y),ut=Yt}return Y=C.D,j=C.ya,Y&&j&&vn(ut,Y,j),vn(ut,"VER",C.la),Lc(C,ut),ut}function Co(C,j,Y){if(j&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return j=C.Ca&&!C.pa?new pi(new Ic({eb:Y})):new pi(C.pa),j.Ha(C.J),j}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Id(){}i=Id.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Dd(){}Dd.prototype.g=function(C,j){return new Bs(C,j)};function Bs(C,j){bt.call(this),this.g=new eh(j),this.l=C,this.h=j&&j.messageUrlParams||null,C=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(C?C["X-WebChannel-Content-Type"]=j.messageContentType:C={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.va&&(C?C["X-WebChannel-Client-Profile"]=j.va:C={"X-WebChannel-Client-Profile":j.va}),this.g.S=C,(C=j&&j.Sb)&&!M(C)&&(this.g.m=C),this.v=j&&j.supportsCrossDomainXhr||!1,this.u=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!M(j)&&(this.g.D=j,C=this.h,C!==null&&j in C&&(C=this.h,j in C&&delete C[j])),this.j=new Oo(this)}x(Bs,bt),Bs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bs.prototype.close=function(){Cd(this.g)},Bs.prototype.o=function(C){var j=this.g;if(typeof C=="string"){var Y={};Y.__data__=C,C=Y}else this.u&&(Y={},Y.__data__=Zt(C),C=Y);j.i.push(new nn(j.Ya++,C)),j.G==3&&ih(j)},Bs.prototype.N=function(){this.g.l=null,delete this.j,Cd(this.g),delete this.g,Bs.aa.N.call(this)};function ml(C){re.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var j=C.__sm__;if(j){t:{for(const Y in j){C=Y;break t}C=void 0}(this.i=C)&&(C=this.i,j=j!==null&&C in j?j[C]:void 0),this.data=j}else this.data=C}x(ml,re);function Ro(){Ae.call(this),this.status=1}x(Ro,Ae);function Oo(C){this.g=C}x(Oo,Id),Oo.prototype.ua=function(){Mt(this.g,"a")},Oo.prototype.ta=function(C){Mt(this.g,new ml(C))},Oo.prototype.sa=function(C){Mt(this.g,new Ro)},Oo.prototype.ra=function(){Mt(this.g,"b")},Dd.prototype.createWebChannel=Dd.prototype.g,Bs.prototype.send=Bs.prototype.o,Bs.prototype.open=Bs.prototype.m,Bs.prototype.close=Bs.prototype.close,M7=function(){return new Dd},A7=function(){return Wn()},w7=Ee,pP={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ri.NO_ERROR=0,ri.TIMEOUT=8,ri.HTTP_ERROR=6,pA=ri,va.COMPLETE="complete",T7=va,Te.EventType=Xt,Xt.OPEN="a",Xt.CLOSE="b",Xt.ERROR="c",Xt.MESSAGE="d",bt.prototype.listen=bt.prototype.K,Vx=Te,pi.prototype.listenOnce=pi.prototype.L,pi.prototype.getLastError=pi.prototype.Ka,pi.prototype.getLastErrorCode=pi.prototype.Ba,pi.prototype.getStatus=pi.prototype.Z,pi.prototype.getResponseJson=pi.prototype.Oa,pi.prototype.getResponseText=pi.prototype.oa,pi.prototype.send=pi.prototype.ea,pi.prototype.setWithCredentials=pi.prototype.Ha,E7=pi}).apply(typeof Aw<"u"?Aw:typeof self<"u"?self:typeof window<"u"?window:{});const NF="@firebase/firestore",LF="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ua.UNAUTHENTICATED=new Ua(null),Ua.GOOGLE_CREDENTIALS=new Ua("google-credentials-uid"),Ua.FIRST_PARTY=new Ua("first-party-uid"),Ua.MOCK_USER=new Ua("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z_="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=new nL("@firebase/firestore");function b0(){return vy.logLevel}function Be(i,...e){if(vy.logLevel<=ni.DEBUG){const n=e.map(gL);vy.debug(`Firestore (${z_}): ${i}`,...n)}}function _d(i,...e){if(vy.logLevel<=ni.ERROR){const n=e.map(gL);vy.error(`Firestore (${z_}): ${i}`,...n)}}function o_(i,...e){if(vy.logLevel<=ni.WARN){const n=e.map(gL);vy.warn(`Firestore (${z_}): ${i}`,...n)}}function gL(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(i="Unexpected state"){const e=`FIRESTORE (${z_}) INTERNAL ASSERTION FAILED: `+i;throw _d(e),new Error(e)}function Di(i,e){i||mn()}function Rn(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends Td{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Omt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ua.UNAUTHENTICATED))}shutdown(){}}class Imt{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Dmt{constructor(e){this.t=e,this.currentUser=Ua.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Di(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new Xp;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Xp,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Xp)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Di(typeof r.accessToken=="string"),new C7(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Di(e===null||typeof e=="string"),new Ua(e)}}class Pmt{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ua.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Nmt{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Pmt(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ua.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class UF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lmt{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,cc(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){Di(this.o===void 0);const r=a=>{a.error!=null&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,Be("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new UF(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Di(typeof n.token=="string"),this.R=n.token,new UF(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Umt(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R7(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Umt(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function $n(i,e){return i<e?-1:i>e?1:0}function mP(i,e){let n=0;for(;n<i.length&&n<e.length;){const r=i.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return $n(r,s);{const a=R7(),o=kmt(a.encode(kF(i,n)),a.encode(kF(e,n)));return o!==0?o:$n(r,s)}}n+=r>65535?2:1}return $n(i.length,e.length)}function kF(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function kmt(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return $n(i[n],e[n]);return $n(i.length,e.length)}function l_(i,e,n){return i.length===e.length&&i.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF=-62135596800,BF=1e6;class Ps{static now(){return Ps.fromMillis(Date.now())}static fromDate(e){return Ps.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*BF);return new Ps(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new He(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new He(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<zF)throw new He(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/BF}_compareTo(e){return this.seconds===e.seconds?$n(this.nanoseconds,e.nanoseconds):$n(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-zF;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{static fromTimestamp(e){return new Sn(e)}static min(){return new Sn(new Ps(0,0))}static max(){return new Sn(new Ps(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF="__name__";class yf{constructor(e,n,r){n===void 0?n=0:n>e.length&&mn(),r===void 0?r=e.length-n:r>e.length-n&&mn(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return yf.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=yf.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return $n(e.length,n.length)}static compareSegments(e,n){const r=yf.isNumericId(e),s=yf.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?yf.extractNumericId(e).compare(yf.extractNumericId(n)):mP(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wp.fromString(e.substring(4,e.length-2))}}class cr extends yf{construct(e,n,r){return new cr(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new He(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new cr(n)}static emptyPath(){return new cr([])}}const zmt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ca extends yf{construct(e,n,r){return new ca(e,n,r)}static isValidIdentifier(e){return zmt.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ca.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===FF}static keyField(){return new ca([FF])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new He(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new He(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new He(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(a(),s++)}if(a(),o)throw new He(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ca(n)}static emptyPath(){return new ca([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.path=e}static fromPath(e){return new tn(cr.fromString(e))}static fromName(e){return new tn(cr.fromString(e).popFirst(5))}static empty(){return new tn(cr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&cr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return cr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tn(new cr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=-1;function Bmt(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,s=Sn.fromTimestamp(r===1e9?new Ps(n+1,0):new Ps(n,r));return new im(s,tn.empty(),e)}function Fmt(i){return new im(i.readTime,i.key,rS)}class im{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new im(Sn.min(),tn.empty(),rS)}static max(){return new im(Sn.max(),tn.empty(),rS)}}function Vmt(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=tn.comparator(i.documentKey,e.documentKey),n!==0?n:$n(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hmt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gmt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B_(i){if(i.code!==pe.FAILED_PRECONDITION||i.message!==Hmt)throw i;Be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&mn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new fe((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):fe.reject(n)}static resolve(e){return new fe((n,r)=>{n(e)})}static reject(e){return new fe((n,r)=>{r(e)})}static waitFor(e){return new fe((n,r)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&n()},u=>r(u))}),o=!0,a===s&&n()})}static or(e){let n=fe.resolve(!1);for(const r of e)n=n.next(s=>s?fe.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new fe((r,s)=>{const a=e.length,o=new Array(a);let l=0;for(let u=0;u<a;u++){const f=u;n(e[f]).next(d=>{o[f]=d,++l,l===a&&r(o)},d=>s(d))}})}static doWhile(e,n){return new fe((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function jmt(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function F_(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}R2.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=-1;function O2(i){return i==null}function zM(i){return i===0&&1/i==-1/0}function qmt(i){return typeof i=="number"&&Number.isInteger(i)&&!zM(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7="";function $mt(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=VF(e)),e=Wmt(i.get(n),e);return VF(e)}function Wmt(i,e){let n=e;const r=i.length;for(let s=0;s<r;s++){const a=i.charAt(s);switch(a){case"\0":n+="";break;case I7:n+="";break;default:n+=a}}return n}function VF(i){return i+I7+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HF(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Cy(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function D7(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n){this.comparator=e,this.root=n||oa.EMPTY}insert(e,n){return new Nr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,oa.BLACK,null,null))}remove(e){return new Nr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,oa.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mw(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mw(this.root,e,this.comparator,!0)}}class Mw{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class oa{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??oa.RED,this.left=s??oa.EMPTY,this.right=a??oa.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new oa(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return oa.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return oa.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,oa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,oa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mn();const e=this.left.check();if(e!==this.right.check())throw mn();return e+(this.isRed()?0:1)}}oa.EMPTY=null,oa.RED=!0,oa.BLACK=!1;oa.EMPTY=new class{constructor(){this.size=0}get key(){throw mn()}get value(){throw mn()}get color(){throw mn()}get left(){throw mn()}get right(){throw mn()}copy(e,n,r,s,a){return this}insert(e,n,r){return new oa(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.comparator=e,this.data=new Nr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new GF(this.data.getIterator())}getIteratorFrom(e){return new GF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ns)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ns(this.comparator);return n.data=e,n}}class GF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e){this.fields=e,e.sort(ca.comparator)}static empty(){return new gc([])}unionWith(e){let n=new Ns(ca.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new gc(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return l_(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new P7("Invalid base64 string: "+a):a}}(e);return new ma(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new ma(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $n(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ma.EMPTY_BYTE_STRING=new ma("");const Xmt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rm(i){if(Di(!!i),typeof i=="string"){let e=0;const n=Xmt.exec(i);if(Di(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:es(i.seconds),nanos:es(i.nanos)}}function es(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function sm(i){return typeof i=="string"?ma.fromBase64String(i):ma.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N7="server_timestamp",L7="__type__",U7="__previous_value__",k7="__local_write_time__";function vL(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[L7])===null||n===void 0?void 0:n.stringValue)===N7}function I2(i){const e=i.mapValue.fields[U7];return vL(e)?I2(e):e}function sS(i){const e=rm(i.mapValue.fields[k7].timestampValue);return new Ps(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ymt{constructor(e,n,r,s,a,o,l,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f}}const BM="(default)";class aS{constructor(e,n){this.projectId=e,this.database=n||BM}static empty(){return new aS("","")}get isDefaultDatabase(){return this.database===BM}isEqual(e){return e instanceof aS&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z7="__type__",Kmt="__max__",Cw={mapValue:{}},B7="__vector__",FM="value";function am(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?vL(i)?4:Qmt(i)?9007199254740991:Zmt(i)?10:11:mn()}function qf(i,e){if(i===e)return!0;const n=am(i);if(n!==am(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return sS(i).isEqual(sS(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=rm(s.timestampValue),l=rm(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(s,a){return sm(s.bytesValue).isEqual(sm(a.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,a){return es(s.geoPointValue.latitude)===es(a.geoPointValue.latitude)&&es(s.geoPointValue.longitude)===es(a.geoPointValue.longitude)}(i,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return es(s.integerValue)===es(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=es(s.doubleValue),l=es(a.doubleValue);return o===l?zM(o)===zM(l):isNaN(o)&&isNaN(l)}return!1}(i,e);case 9:return l_(i.arrayValue.values||[],e.arrayValue.values||[],qf);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(HF(o)!==HF(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!qf(o[u],l[u])))return!1;return!0}(i,e);default:return mn()}}function oS(i,e){return(i.values||[]).find(n=>qf(n,e))!==void 0}function u_(i,e){if(i===e)return 0;const n=am(i),r=am(e);if(n!==r)return $n(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $n(i.booleanValue,e.booleanValue);case 2:return function(a,o){const l=es(a.integerValue||a.doubleValue),u=es(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(i,e);case 3:return jF(i.timestampValue,e.timestampValue);case 4:return jF(sS(i),sS(e));case 5:return mP(i.stringValue,e.stringValue);case 6:return function(a,o){const l=sm(a),u=sm(o);return l.compareTo(u)}(i.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),u=o.split("/");for(let f=0;f<l.length&&f<u.length;f++){const d=$n(l[f],u[f]);if(d!==0)return d}return $n(l.length,u.length)}(i.referenceValue,e.referenceValue);case 8:return function(a,o){const l=$n(es(a.latitude),es(o.latitude));return l!==0?l:$n(es(a.longitude),es(o.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return qF(i.arrayValue,e.arrayValue);case 10:return function(a,o){var l,u,f,d;const m=a.fields||{},y=o.fields||{},_=(l=m[FM])===null||l===void 0?void 0:l.arrayValue,x=(u=y[FM])===null||u===void 0?void 0:u.arrayValue,S=$n(((f=_==null?void 0:_.values)===null||f===void 0?void 0:f.length)||0,((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0);return S!==0?S:qF(_,x)}(i.mapValue,e.mapValue);case 11:return function(a,o){if(a===Cw.mapValue&&o===Cw.mapValue)return 0;if(a===Cw.mapValue)return 1;if(o===Cw.mapValue)return-1;const l=a.fields||{},u=Object.keys(l),f=o.fields||{},d=Object.keys(f);u.sort(),d.sort();for(let m=0;m<u.length&&m<d.length;++m){const y=mP(u[m],d[m]);if(y!==0)return y;const _=u_(l[u[m]],f[d[m]]);if(_!==0)return _}return $n(u.length,d.length)}(i.mapValue,e.mapValue);default:throw mn()}}function jF(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return $n(i,e);const n=rm(i),r=rm(e),s=$n(n.seconds,r.seconds);return s!==0?s:$n(n.nanos,r.nanos)}function qF(i,e){const n=i.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=u_(n[s],r[s]);if(a)return a}return $n(n.length,r.length)}function c_(i){return gP(i)}function gP(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const r=rm(n);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return sm(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return tn.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=gP(a);return r+"]"}(i.arrayValue):"mapValue"in i?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${gP(n.fields[o])}`;return s+"}"}(i.mapValue):mn()}function mA(i){switch(am(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=I2(i);return e?16+mA(e):16;case 5:return 2*i.stringValue.length;case 6:return sm(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+mA(a),0)}(i.arrayValue);case 10:case 11:return function(r){let s=0;return Cy(r.fields,(a,o)=>{s+=a.length+mA(o)}),s}(i.mapValue);default:throw mn()}}function $F(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function yP(i){return!!i&&"integerValue"in i}function _L(i){return!!i&&"arrayValue"in i}function WF(i){return!!i&&"nullValue"in i}function XF(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function gA(i){return!!i&&"mapValue"in i}function Zmt(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[z7])===null||n===void 0?void 0:n.stringValue)===B7}function d1(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Cy(i.mapValue.fields,(n,r)=>e.mapValue.fields[n]=d1(r)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=d1(i.arrayValue.values[n]);return e}return Object.assign({},i)}function Qmt(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===Kmt}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e){this.value=e}static empty(){return new _u({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gA(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=d1(n)}setAll(e){let n=ca.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=d1(o):s.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());gA(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qf(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];gA(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Cy(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new _u(d1(this.value))}}function F7(i){const e=[];return Cy(i.fields,(n,r)=>{const s=new ca([n]);if(gA(r)){const a=F7(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new gc(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n,r,s,a,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ka(e,0,Sn.min(),Sn.min(),Sn.min(),_u.empty(),0)}static newFoundDocument(e,n,r,s){return new ka(e,1,n,Sn.min(),r,s,0)}static newNoDocument(e,n){return new ka(e,2,n,Sn.min(),Sn.min(),_u.empty(),0)}static newUnknownDocument(e,n){return new ka(e,3,n,Sn.min(),Sn.min(),_u.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Sn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_u.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_u.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Sn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ka&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ka(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,n){this.position=e,this.inclusive=n}}function YF(i,e,n){let r=0;for(let s=0;s<i.position.length;s++){const a=e[s],o=i.position[s];if(a.field.isKeyField()?r=tn.comparator(tn.fromName(o.referenceValue),n.key):r=u_(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function KF(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!qf(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,n="asc"){this.field=e,this.dir=n}}function Jmt(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{}class xs extends V7{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new egt(e,n,r):n==="array-contains"?new rgt(e,r):n==="in"?new sgt(e,r):n==="not-in"?new agt(e,r):n==="array-contains-any"?new ogt(e,r):new xs(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ngt(e,r):new igt(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(u_(n,this.value)):n!==null&&am(this.value)===am(n)&&this.matchesComparison(u_(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return mn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ec extends V7{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Ec(e,n)}matches(e){return H7(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function H7(i){return i.op==="and"}function G7(i){return tgt(i)&&H7(i)}function tgt(i){for(const e of i.filters)if(e instanceof Ec)return!1;return!0}function vP(i){if(i instanceof xs)return i.field.canonicalString()+i.op.toString()+c_(i.value);if(G7(i))return i.filters.map(e=>vP(e)).join(",");{const e=i.filters.map(n=>vP(n)).join(",");return`${i.op}(${e})`}}function j7(i,e){return i instanceof xs?function(r,s){return s instanceof xs&&r.op===s.op&&r.field.isEqual(s.field)&&qf(r.value,s.value)}(i,e):i instanceof Ec?function(r,s){return s instanceof Ec&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,l)=>a&&j7(o,s.filters[l]),!0):!1}(i,e):void mn()}function q7(i){return i instanceof xs?function(n){return`${n.field.canonicalString()} ${n.op} ${c_(n.value)}`}(i):i instanceof Ec?function(n){return n.op.toString()+" {"+n.getFilters().map(q7).join(" ,")+"}"}(i):"Filter"}class egt extends xs{constructor(e,n,r){super(e,n,r),this.key=tn.fromName(r.referenceValue)}matches(e){const n=tn.comparator(e.key,this.key);return this.matchesComparison(n)}}class ngt extends xs{constructor(e,n){super(e,"in",n),this.keys=$7("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class igt extends xs{constructor(e,n){super(e,"not-in",n),this.keys=$7("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $7(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>tn.fromName(r.referenceValue))}class rgt extends xs{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _L(n)&&oS(n.arrayValue,this.value)}}class sgt extends xs{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&oS(this.value.arrayValue,n)}}class agt extends xs{constructor(e,n){super(e,"not-in",n)}matches(e){if(oS(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!oS(this.value.arrayValue,n)}}class ogt extends xs{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_L(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>oS(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lgt{constructor(e,n=null,r=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.le=null}}function ZF(i,e=null,n=[],r=[],s=null,a=null,o=null){return new lgt(i,e,n,r,s,a,o)}function bL(i){const e=Rn(i);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>vP(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),O2(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>c_(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>c_(r)).join(",")),e.le=n}return e.le}function xL(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!Jmt(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!j7(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!KF(i.startAt,e.startAt)&&KF(i.endAt,e.endAt)}function _P(i){return tn.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,n=null,r=[],s=[],a=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function ugt(i,e,n,r,s,a,o,l){return new KS(i,e,n,r,s,a,o,l)}function W7(i){return new KS(i)}function QF(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function X7(i){return i.collectionGroup!==null}function p1(i){const e=Rn(i);if(e.he===null){e.he=[];const n=new Set;for(const a of e.explicitOrderBy)e.he.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ns(ca.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.he.push(new HM(a,r))}),n.has(ca.keyField().canonicalString())||e.he.push(new HM(ca.keyField(),r))}return e.he}function Uf(i){const e=Rn(i);return e.Pe||(e.Pe=cgt(e,p1(i))),e.Pe}function cgt(i,e){if(i.limitType==="F")return ZF(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new HM(s.field,a)});const n=i.endAt?new VM(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new VM(i.startAt.position,i.startAt.inclusive):null;return ZF(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function bP(i,e){const n=i.filters.concat([e]);return new KS(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function xP(i,e,n){return new KS(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function D2(i,e){return xL(Uf(i),Uf(e))&&i.limitType===e.limitType}function Y7(i){return`${bL(Uf(i))}|lt:${i.limitType}`}function x0(i){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>q7(s)).join(", ")}]`),O2(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>c_(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>c_(s)).join(",")),`Target(${r})`}(Uf(i))}; limitType=${i.limitType})`}function P2(i,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):tn.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(i,e)&&function(r,s){for(const a of p1(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(i,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(i,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const f=YF(o,l,u);return o.inclusive?f<=0:f<0}(r.startAt,p1(r),s)||r.endAt&&!function(o,l,u){const f=YF(o,l,u);return o.inclusive?f>=0:f>0}(r.endAt,p1(r),s))}(i,e)}function fgt(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function K7(i){return(e,n)=>{let r=!1;for(const s of p1(i)){const a=hgt(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function hgt(i,e,n){const r=i.field.isKeyField()?tn.comparator(e.key,n.key):function(a,o,l){const u=o.data.field(a),f=l.data.field(a);return u!==null&&f!==null?u_(u,f):mn()}(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return mn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Cy(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return D7(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dgt=new Nr(tn.comparator);function bd(){return dgt}const Z7=new Nr(tn.comparator);function Hx(...i){let e=Z7;for(const n of i)e=e.insert(n.key,n);return e}function Q7(i){let e=Z7;return i.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Gg(){return m1()}function J7(){return m1()}function m1(){return new Ry(i=>i.toString(),(i,e)=>i.isEqual(e))}const pgt=new Nr(tn.comparator),mgt=new Ns(tn.comparator);function ii(...i){let e=mgt;for(const n of i)e=e.add(n);return e}const ggt=new Ns($n);function ygt(){return ggt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zM(e)?"-0":e}}function tj(i){return{integerValue:""+i}}function vgt(i,e){return qmt(e)?tj(e):SL(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(){this._=void 0}}function _gt(i,e,n){return i instanceof GM?function(s,a){const o={fields:{[L7]:{stringValue:N7},[k7]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&vL(a)&&(a=I2(a)),a&&(o.fields[U7]=a),{mapValue:o}}(n,e):i instanceof lS?nj(i,e):i instanceof uS?ij(i,e):function(s,a){const o=ej(s,a),l=JF(o)+JF(s.Ie);return yP(o)&&yP(s.Ie)?tj(l):SL(s.serializer,l)}(i,e)}function bgt(i,e,n){return i instanceof lS?nj(i,e):i instanceof uS?ij(i,e):n}function ej(i,e){return i instanceof jM?function(r){return yP(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class GM extends N2{}class lS extends N2{constructor(e){super(),this.elements=e}}function nj(i,e){const n=rj(e);for(const r of i.elements)n.some(s=>qf(s,r))||n.push(r);return{arrayValue:{values:n}}}class uS extends N2{constructor(e){super(),this.elements=e}}function ij(i,e){let n=rj(e);for(const r of i.elements)n=n.filter(s=>!qf(s,r));return{arrayValue:{values:n}}}class jM extends N2{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function JF(i){return es(i.integerValue||i.doubleValue)}function rj(i){return _L(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function xgt(i,e){return i.field.isEqual(e.field)&&function(r,s){return r instanceof lS&&s instanceof lS||r instanceof uS&&s instanceof uS?l_(r.elements,s.elements,qf):r instanceof jM&&s instanceof jM?qf(r.Ie,s.Ie):r instanceof GM&&s instanceof GM}(i.transform,e.transform)}class Sgt{constructor(e,n){this.version=e,this.transformResults=n}}class od{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new od}static exists(e){return new od(void 0,e)}static updateTime(e){return new od(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yA(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class L2{}function sj(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new oj(i.key,od.none()):new ZS(i.key,i.data,od.none());{const n=i.data,r=_u.empty();let s=new Ns(ca.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new Oy(i.key,r,new gc(s.toArray()),od.none())}}function Egt(i,e,n){i instanceof ZS?function(s,a,o){const l=s.value.clone(),u=e5(s.fieldTransforms,a,o.transformResults);l.setAll(u),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(i,e,n):i instanceof Oy?function(s,a,o){if(!yA(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=e5(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(aj(s)),u.setAll(l),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(i,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function g1(i,e,n,r){return i instanceof ZS?function(a,o,l,u){if(!yA(a.precondition,o))return l;const f=a.value.clone(),d=n5(a.fieldTransforms,u,o);return f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null}(i,e,n,r):i instanceof Oy?function(a,o,l,u){if(!yA(a.precondition,o))return l;const f=n5(a.fieldTransforms,u,o),d=o.data;return d.setAll(aj(a)),d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(i,e,n,r):function(a,o,l){return yA(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(i,e,n)}function Tgt(i,e){let n=null;for(const r of i.fieldTransforms){const s=e.data.field(r.field),a=ej(r.transform,s||null);a!=null&&(n===null&&(n=_u.empty()),n.set(r.field,a))}return n||null}function t5(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&l_(r,s,(a,o)=>xgt(a,o))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ZS extends L2{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Oy extends L2{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function aj(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}}),e}function e5(i,e,n){const r=new Map;Di(i.length===n.length);for(let s=0;s<n.length;s++){const a=i[s],o=a.transform,l=e.data.field(a.field);r.set(a.field,bgt(o,l,n[s]))}return r}function n5(i,e,n){const r=new Map;for(const s of i){const a=s.transform,o=n.data.field(s.field);r.set(s.field,_gt(a,o,e))}return r}class oj extends L2{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wgt extends L2{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Agt{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Egt(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=g1(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=g1(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=J7();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=n.has(s.key)?null:l;const u=sj(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Sn.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ii())}isEqual(e){return this.batchId===e.batchId&&l_(this.mutations,e.mutations,(n,r)=>t5(n,r))&&l_(this.baseMutations,e.baseMutations,(n,r)=>t5(n,r))}}class EL{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Di(e.mutations.length===r.length);let s=function(){return pgt}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new EL(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mgt{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cgt{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gs,hi;function Rgt(i){switch(i){case pe.OK:return mn();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return mn()}}function lj(i){if(i===void 0)return _d("GRPC error has no .code"),pe.UNKNOWN;switch(i){case gs.OK:return pe.OK;case gs.CANCELLED:return pe.CANCELLED;case gs.UNKNOWN:return pe.UNKNOWN;case gs.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case gs.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case gs.INTERNAL:return pe.INTERNAL;case gs.UNAVAILABLE:return pe.UNAVAILABLE;case gs.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case gs.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case gs.NOT_FOUND:return pe.NOT_FOUND;case gs.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case gs.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case gs.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case gs.ABORTED:return pe.ABORTED;case gs.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case gs.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case gs.DATA_LOSS:return pe.DATA_LOSS;default:return mn()}}(hi=gs||(gs={}))[hi.OK=0]="OK",hi[hi.CANCELLED=1]="CANCELLED",hi[hi.UNKNOWN=2]="UNKNOWN",hi[hi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hi[hi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hi[hi.NOT_FOUND=5]="NOT_FOUND",hi[hi.ALREADY_EXISTS=6]="ALREADY_EXISTS",hi[hi.PERMISSION_DENIED=7]="PERMISSION_DENIED",hi[hi.UNAUTHENTICATED=16]="UNAUTHENTICATED",hi[hi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hi[hi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hi[hi.ABORTED=10]="ABORTED",hi[hi.OUT_OF_RANGE=11]="OUT_OF_RANGE",hi[hi.UNIMPLEMENTED=12]="UNIMPLEMENTED",hi[hi.INTERNAL=13]="INTERNAL",hi[hi.UNAVAILABLE=14]="UNAVAILABLE",hi[hi.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ogt=new Wp([4294967295,4294967295],0);function i5(i){const e=R7().encode(i),n=new S7;return n.update(e),new Uint8Array(n.digest())}function r5(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Wp([n,r],0),new Wp([s,a],0)]}class TL{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gx(`Invalid padding: ${n}`);if(r<0)throw new Gx(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gx(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gx(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Wp.fromNumber(this.Ee)}Ae(e,n,r){let s=e.add(n.multiply(Wp.fromNumber(r)));return s.compare(Ogt)===1&&(s=new Wp([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=i5(e),[r,s]=r5(n);for(let a=0;a<this.hashCount;a++){const o=this.Ae(r,s,a);if(!this.Re(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new TL(a,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ee===0)return;const n=i5(e),[r,s]=r5(n);for(let a=0;a<this.hashCount;a++){const o=this.Ae(r,s,a);this.Ve(o)}}Ve(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gx extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,QS.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new U2(Sn.min(),s,new Nr($n),bd(),ii())}}class QS{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new QS(r,n,ii(),ii(),ii())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,n,r,s){this.me=e,this.removedTargetIds=n,this.key=r,this.fe=s}}class uj{constructor(e,n){this.targetId=e,this.ge=n}}class cj{constructor(e,n,r=ma.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class s5{constructor(){this.pe=0,this.ye=a5(),this.we=ma.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=ii(),n=ii(),r=ii();return this.ye.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:mn()}}),new QS(this.we,this.Se,e,n,r)}Me(){this.be=!1,this.ye=a5()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Di(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class Igt{constructor(e){this.ke=e,this.qe=new Map,this.Qe=bd(),this.$e=Rw(),this.Ue=Rw(),this.Ke=new Nr($n)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(e.resumeToken));break;default:mn()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((r,s)=>{this.Je(s)&&n(s)})}Ze(e){const n=e.targetId,r=e.ge.count,s=this.Xe(n);if(s){const a=s.target;if(_P(a))if(r===0){const o=new tn(a.path);this.ze(n,o,ka.newNoDocument(o,Sn.min()))}else Di(r===1);else{const o=this.et(n);if(o!==r){const l=this.tt(e),u=l?this.nt(l,e,o):1;if(u!==0){this.Ye(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,f)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,l;try{o=sm(r).toUint8Array()}catch(u){if(u instanceof P7)return o_("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new TL(o,s,a)}catch(u){return o_(u instanceof Gx?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ee===0?null:l}nt(e,n,r){return n.ge.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.ke.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.ke.it(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.ze(n,a,null),s++)}),s}ot(e){const n=new Map;this.qe.forEach((a,o)=>{const l=this.Xe(o);if(l){if(a.current&&_P(l.target)){const u=new tn(l.target.path);this._t(u).has(o)||this.ut(o,u)||this.ze(o,u,ka.newNoDocument(u,e))}a.ve&&(n.set(o,a.Fe()),a.Me())}});let r=ii();this.Ue.forEach((a,o)=>{let l=!0;o.forEachWhile(u=>{const f=this.Xe(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.Qe.forEach((a,o)=>o.setReadTime(e));const s=new U2(e,n,this.Ke,this.Qe,r);return this.Qe=bd(),this.$e=Rw(),this.Ue=Rw(),this.Ke=new Nr($n),s}Ge(e,n){if(!this.Je(e))return;const r=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,n)?s.xe(n,1):s.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new s5,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Ns($n),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new Ns($n),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||Be("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new s5),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function Rw(){return new Nr(tn.comparator)}function a5(){return new Nr(tn.comparator)}const Dgt={asc:"ASCENDING",desc:"DESCENDING"},Pgt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ngt={and:"AND",or:"OR"};class Lgt{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function SP(i,e){return i.useProto3Json||O2(e)?e:{value:e}}function qM(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fj(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Ugt(i,e){return qM(i,e.toTimestamp())}function kf(i){return Di(!!i),Sn.fromTimestamp(function(n){const r=rm(n);return new Ps(r.seconds,r.nanos)}(i))}function wL(i,e){return EP(i,e).canonicalString()}function EP(i,e){const n=function(s){return new cr(["projects",s.projectId,"databases",s.database])}(i).child("documents");return e===void 0?n:n.child(e)}function hj(i){const e=cr.fromString(i);return Di(yj(e)),e}function TP(i,e){return wL(i.databaseId,e.path)}function RI(i,e){const n=hj(e);if(n.get(1)!==i.databaseId.projectId)throw new He(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new He(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new tn(pj(n))}function dj(i,e){return wL(i.databaseId,e)}function kgt(i){const e=hj(i);return e.length===4?cr.emptyPath():pj(e)}function wP(i){return new cr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function pj(i){return Di(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function o5(i,e,n){return{name:TP(i,e),fields:n.value.mapValue.fields}}function zgt(i,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:mn()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(f,d){return f.useProto3Json?(Di(d===void 0||typeof d=="string"),ma.fromBase64String(d||"")):(Di(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ma.fromUint8Array(d||new Uint8Array))}(i,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(f){const d=f.code===void 0?pe.UNKNOWN:lj(f.code);return new He(d,f.message||"")}(o);n=new cj(r,s,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=RI(i,r.document.name),a=kf(r.document.updateTime),o=r.document.createTime?kf(r.document.createTime):Sn.min(),l=new _u({mapValue:{fields:r.document.fields}}),u=ka.newFoundDocument(s,a,o,l),f=r.targetIds||[],d=r.removedTargetIds||[];n=new vA(f,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=RI(i,r.document),a=r.readTime?kf(r.readTime):Sn.min(),o=ka.newNoDocument(s,a),l=r.removedTargetIds||[];n=new vA([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=RI(i,r.document),a=r.removedTargetIds||[];n=new vA([],a,s,null)}else{if(!("filter"in e))return mn();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new Cgt(s,a),l=r.targetId;n=new uj(l,o)}}return n}function Bgt(i,e){let n;if(e instanceof ZS)n={update:o5(i,e.key,e.value)};else if(e instanceof oj)n={delete:TP(i,e.key)};else if(e instanceof Oy)n={update:o5(i,e.key,e.data),updateMask:Xgt(e.fieldMask)};else{if(!(e instanceof wgt))return mn();n={verify:TP(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const l=o.transform;if(l instanceof GM)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof lS)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof uS)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof jM)return{fieldPath:o.field.canonicalString(),increment:l.Ie};throw mn()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:Ugt(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:mn()}(i,e.precondition)),n}function Fgt(i,e){return i&&i.length>0?(Di(e!==void 0),i.map(n=>function(s,a){let o=s.updateTime?kf(s.updateTime):kf(a);return o.isEqual(Sn.min())&&(o=kf(a)),new Sgt(o,s.transformResults||[])}(n,e))):[]}function Vgt(i,e){return{documents:[dj(i,e.path)]}}function Hgt(i,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=dj(i,s);const a=function(f){if(f.length!==0)return gj(Ec.create(f,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(f){if(f.length!==0)return f.map(d=>function(y){return{field:S0(y.field),direction:qgt(y.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=SP(i,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ht:n,parent:s}}function Ggt(i){let e=kgt(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Di(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let a=[];n.where&&(a=function(m){const y=mj(m);return y instanceof Ec&&G7(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(y=>function(x){return new HM(E0(x.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(m){let y;return y=typeof m=="object"?m.value:m,O2(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(m){const y=!!m.before,_=m.values||[];return new VM(_,y)}(n.startAt));let f=null;return n.endAt&&(f=function(m){const y=!m.before,_=m.values||[];return new VM(_,y)}(n.endAt)),ugt(e,s,o,a,l,"F",u,f)}function jgt(i,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mn()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mj(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=E0(n.unaryFilter.field);return xs.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=E0(n.unaryFilter.field);return xs.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=E0(n.unaryFilter.field);return xs.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=E0(n.unaryFilter.field);return xs.create(o,"!=",{nullValue:"NULL_VALUE"});default:return mn()}}(i):i.fieldFilter!==void 0?function(n){return xs.create(E0(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mn()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Ec.create(n.compositeFilter.filters.map(r=>mj(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return mn()}}(n.compositeFilter.op))}(i):mn()}function qgt(i){return Dgt[i]}function $gt(i){return Pgt[i]}function Wgt(i){return Ngt[i]}function S0(i){return{fieldPath:i.canonicalString()}}function E0(i){return ca.fromServerFormat(i.fieldPath)}function gj(i){return i instanceof xs?function(n){if(n.op==="=="){if(XF(n.value))return{unaryFilter:{field:S0(n.field),op:"IS_NAN"}};if(WF(n.value))return{unaryFilter:{field:S0(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(XF(n.value))return{unaryFilter:{field:S0(n.field),op:"IS_NOT_NAN"}};if(WF(n.value))return{unaryFilter:{field:S0(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:S0(n.field),op:$gt(n.op),value:n.value}}}(i):i instanceof Ec?function(n){const r=n.getFilters().map(s=>gj(s));return r.length===1?r[0]:{compositeFilter:{op:Wgt(n.op),filters:r}}}(i):mn()}function Xgt(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function yj(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n,r,s,a=Sn.min(),o=Sn.min(),l=ma.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Bp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bp(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ygt{constructor(e){this.Tt=e}}function Kgt(i){const e=Ggt({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?xP(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zgt{constructor(){this.Tn=new Qgt}addToCollectionParentIndex(e,n){return this.Tn.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve(im.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve(im.min())}updateCollectionGroup(e,n,r){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class Qgt{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ns(cr.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ns(cr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vj=41943040;class Ko{static withCacheSize(e){return new Ko(e,Ko.DEFAULT_COLLECTION_PERCENTILE,Ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ko.DEFAULT_COLLECTION_PERCENTILE=10,Ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ko.DEFAULT=new Ko(vj,Ko.DEFAULT_COLLECTION_PERCENTILE,Ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ko.DISABLED=new Ko(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new f_(0)}static Kn(){return new f_(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5="LruGarbageCollector",Jgt=1048576;function c5([i,e],[n,r]){const s=$n(i,n);return s===0?$n(e,r):s}class tyt{constructor(e){this.Hn=e,this.buffer=new Ns(c5),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();c5(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class eyt{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Be(u5,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){F_(n)?Be(u5,"Ignoring IndexedDB error during garbage collection: ",n):await B_(n)}await this.er(3e5)})}}class nyt{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return fe.resolve(R2.ae);const r=new tyt(n);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.tr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(l5)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),l5):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let r,s,a,o,l,u,f;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(a=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(f=Date.now(),b0()<=ni.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${a} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(f-u)+`ms
Total Duration: ${f-d}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:m})))}}function iyt(i,e){return new nyt(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ryt{constructor(){this.changes=new Ry(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ka.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?fe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class syt{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ayt{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&g1(r.mutation,s,gc.empty(),Ps.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ii()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ii()){const s=Gg();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=Hx();return a.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Gg();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ii()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let a=bd();const o=m1(),l=function(){return m1()}();return n.forEach((u,f)=>{const d=r.get(f.key);s.has(f.key)&&(d===void 0||d.mutation instanceof Oy)?a=a.insert(f.key,f):d!==void 0?(o.set(f.key,d.mutation.getFieldMask()),g1(d.mutation,f,d.mutation.getFieldMask(),Ps.now())):o.set(f.key,gc.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((f,d)=>o.set(f,d)),n.forEach((f,d)=>{var m;return l.set(f,new syt(d,(m=o.get(f))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=m1();let s=new Nr((o,l)=>o-l),a=ii();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const f=n.get(u);if(f===null)return;let d=r.get(u)||gc.empty();d=l.applyToLocalView(f,d),r.set(u,d);const m=(s.get(l.batchId)||ii()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),f=u.key,d=u.value,m=J7();d.forEach(y=>{if(!a.has(y)){const _=sj(n.get(y),r.get(y));_!==null&&m.set(y,_),a=a.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,f,m))}return fe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return tn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):X7(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):fe.resolve(Gg());let l=rS,u=a;return o.next(f=>fe.forEach(f,(d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),a.get(d)?fe.resolve():this.remoteDocumentCache.getEntry(e,d).next(y=>{u=u.insert(d,y)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,u,f,ii())).next(d=>({batchId:l,changes:Q7(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new tn(n)).next(r=>{let s=Hx();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=Hx();return this.indexManager.getCollectionParents(e,a).next(l=>fe.forEach(l,u=>{const f=function(m,y){return new KS(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(d=>{d.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((u,f)=>{const d=f.getKey();o.get(d)===null&&(o=o.insert(d,ka.newInvalidDocument(d)))});let l=Hx();return o.forEach((u,f)=>{const d=a.get(u);d!==void 0&&g1(d.mutation,f,gc.empty(),Ps.now()),P2(n,f)&&(l=l.insert(u,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oyt{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return fe.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:kf(s.createTime)}}(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(s){return{name:s.name,query:Kgt(s.bundledQuery),readTime:kf(s.readTime)}}(n)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lyt{constructor(){this.overlays=new Nr(tn.comparator),this.Rr=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Gg();return fe.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.Et(e,n,a)}),fe.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(r)),fe.resolve()}getOverlaysForCollection(e,n,r){const s=Gg(),a=n.length+1,o=new tn(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===a&&u.largestBatchId>r&&s.set(u.getKey(),u)}return fe.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Nr((f,d)=>f-d);const o=this.overlays.getIterator();for(;o.hasNext();){const f=o.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let d=a.get(f.largestBatchId);d===null&&(d=Gg(),a=a.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=Gg(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,d)=>l.set(f,d)),!(l.size()>=s)););return fe.resolve(l)}Et(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Mgt(n,r));let a=this.Rr.get(n);a===void 0&&(a=ii(),this.Rr.set(n,a)),this.Rr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uyt{constructor(){this.sessionToken=ma.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(){this.Vr=new Ns($s.mr),this.gr=new Ns($s.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const r=new $s(e,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.wr(new $s(e,n))}Sr(e,n){e.forEach(r=>this.removeReference(r,n))}br(e){const n=new tn(new cr([])),r=new $s(n,e),s=new $s(n,e+1),a=[];return this.gr.forEachInRange([r,s],o=>{this.wr(o),a.push(o.key)}),a}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new tn(new cr([])),r=new $s(n,e),s=new $s(n,e+1);let a=ii();return this.gr.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new $s(e,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class $s{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return tn.comparator(e.key,n.key)||$n(e.Cr,n.Cr)}static pr(e,n){return $n(e.Cr,n.Cr)||tn.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cyt{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Ns($s.mr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Agt(a,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Mr=this.Mr.add(new $s(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return fe.resolve(o)}lookupMutationBatch(e,n){return fe.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Nr(r),a=s<0?0:s;return fe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?yL:this.Fr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $s(n,0),s=new $s(n,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([r,s],o=>{const l=this.Or(o.Cr);a.push(l)}),fe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ns($n);return n.forEach(s=>{const a=new $s(s,0),o=new $s(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,o],l=>{r=r.add(l.Cr)})}),fe.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;tn.isDocumentKey(a)||(a=a.child(""));const o=new $s(new tn(a),0);let l=new Ns($n);return this.Mr.forEachWhile(u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(u.Cr)),!0)},o),fe.resolve(this.Br(l))}Br(e){const n=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Di(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return fe.forEach(n.mutations,s=>{const a=new $s(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,n){const r=new $s(n,0),s=this.Mr.firstAfterOrEqual(r);return fe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fyt{constructor(e){this.kr=e,this.docs=function(){return new Nr(tn.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return fe.resolve(r?r.document.mutableCopy():ka.newInvalidDocument(n))}getEntries(e,n){let r=bd();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():ka.newInvalidDocument(s))}),fe.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=bd();const o=n.path,l=new tn(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:d}}=u.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||Vmt(Fmt(d),r)<=0||(s.has(d.key)||P2(n,d))&&(a=a.insert(d.key,d.mutableCopy()))}return fe.resolve(a)}getAllFromCollectionGroup(e,n,r,s){mn()}qr(e,n){return fe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new hyt(this)}getSize(e){return fe.resolve(this.size)}}class hyt extends ryt{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),fe.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dyt{constructor(e){this.persistence=e,this.Qr=new Ry(n=>bL(n),xL),this.lastRemoteSnapshotVersion=Sn.min(),this.highestTargetId=0,this.$r=0,this.Ur=new AL,this.targetCount=0,this.Kr=f_.Un()}forEachTarget(e,n){return this.Qr.forEach((r,s)=>n(s)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),fe.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new f_(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.zn(n),fe.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.Qr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Qr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),fe.waitFor(a).next(()=>s)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Qr.get(n)||null;return fe.resolve(r)}addMatchingKeys(e,n,r){return this.Ur.yr(n,r),fe.resolve()}removeMatchingKeys(e,n,r){this.Ur.Sr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),fe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ur.vr(n);return fe.resolve(r)}containsKey(e,n){return fe.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new R2(0),this.zr=!1,this.zr=!0,this.jr=new uyt,this.referenceDelegate=e(this),this.Hr=new dyt(this),this.indexManager=new Zgt,this.remoteDocumentCache=function(s){return new fyt(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new Ygt(n),this.Yr=new oyt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lyt,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Wr[e.toKey()];return r||(r=new cyt(n,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,r){Be("MemoryPersistence","Starting transaction:",e);const s=new pyt(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(a=>this.referenceDelegate.Xr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}ei(e,n){return fe.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,n)))}}class pyt extends Gmt{constructor(e){super(),this.currentSequenceNumber=e}}class ML{constructor(e){this.persistence=e,this.ti=new AL,this.ni=null}static ri(e){return new ML(e)}get ii(){if(this.ni)return this.ni;throw mn()}addReference(e,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),fe.resolve()}removeReference(e,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),fe.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.ii.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.ii,r=>{const s=tn.fromPath(r);return this.si(e,s).next(a=>{a||n.removeEntry(s,Sn.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return fe.or([()=>fe.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class $M{constructor(e,n){this.persistence=e,this.oi=new Ry(r=>$mt(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=iyt(this,n)}static ri(e,n){return new $M(e,n)}Zr(){}Xr(e){return fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}sr(e){let n=0;return this.rr(e,r=>{n++}).next(()=>n)}rr(e,n){return fe.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(a=>a?fe.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.qr(e,o=>this.ar(e,o,n).next(l=>{l||(r++,a.removeEntry(o,Sn.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),fe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),fe.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=mA(e.data.value)),n}ar(e,n,r){return fe.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.oi.get(n);return fe.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Hi=r,this.Ji=s}static Yi(e,n){let r=ii(),s=ii();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new CL(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class myt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gyt{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return uht()?8:jmt(Ha())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.rs(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ss(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new myt;return this._s(e,n,o).next(l=>{if(a.result=l,this.Xi)return this.us(e,n,o,l.size)})}).next(()=>a.result)}us(e,n,r,s){return r.documentReadCount<this.es?(b0()<=ni.DEBUG&&Be("QueryEngine","SDK will not create cache indexes for query:",x0(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),fe.resolve()):(b0()<=ni.DEBUG&&Be("QueryEngine","Query:",x0(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(b0()<=ni.DEBUG&&Be("QueryEngine","The SDK decides to create cache indexes for query:",x0(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Uf(n))):fe.resolve())}rs(e,n){if(QF(n))return fe.resolve(null);let r=Uf(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=xP(n,null,"F"),r=Uf(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=ii(...a);return this.ns.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const f=this.cs(n,l);return this.ls(n,f,o,u.readTime)?this.rs(e,xP(n,null,"F")):this.hs(e,f,n,u)}))})))}ss(e,n,r,s){return QF(n)||s.isEqual(Sn.min())?fe.resolve(null):this.ns.getDocuments(e,r).next(a=>{const o=this.cs(n,a);return this.ls(n,o,r,s)?fe.resolve(null):(b0()<=ni.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),x0(n)),this.hs(e,o,n,Bmt(s,rS)).next(l=>l))})}cs(e,n){let r=new Ns(K7(e));return n.forEach((s,a)=>{P2(e,a)&&(r=r.add(a))}),r}ls(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}_s(e,n,r){return b0()<=ni.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",x0(n)),this.ns.getDocumentsMatchingQuery(e,n,im.min(),r)}hs(e,n,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL="LocalStore",yyt=3e8;class vyt{constructor(e,n,r,s){this.persistence=e,this.Ps=n,this.serializer=s,this.Ts=new Nr($n),this.Is=new Ry(a=>bL(a),xL),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ayt(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function _yt(i,e,n,r){return new vyt(i,e,n,r)}async function bj(i,e){const n=Rn(i);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.As(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],l=[];let u=ii();for(const f of s){o.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}for(const f of a){l.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(f=>({Rs:f,removedBatchIds:o,addedBatchIds:l}))})})}function byt(i,e){const n=Rn(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.ds.newChangeBuffer({trackRemovals:!0});return function(l,u,f,d){const m=f.batch,y=m.keys();let _=fe.resolve();return y.forEach(x=>{_=_.next(()=>d.getEntry(u,x)).next(S=>{const T=f.docVersions.get(x);Di(T!==null),S.version.compareTo(T)<0&&(m.applyToRemoteDocument(S,f),S.isValidDocument()&&(S.setReadTime(f.commitVersion),d.addEntry(S)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ii();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function xj(i){const e=Rn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function xyt(i,e){const n=Rn(i),r=e.snapshotVersion;let s=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.ds.newChangeBuffer({trackRemovals:!0});s=n.Ts;const l=[];e.targetChanges.forEach((d,m)=>{const y=s.get(m);if(!y)return;l.push(n.Hr.removeMatchingKeys(a,d.removedDocuments,m).next(()=>n.Hr.addMatchingKeys(a,d.addedDocuments,m)));let _=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(ma.EMPTY_BYTE_STRING,Sn.min()).withLastLimboFreeSnapshotVersion(Sn.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,r)),s=s.insert(m,_),function(S,T,b){return S.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=yyt?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(y,_,d)&&l.push(n.Hr.updateTargetData(a,_))});let u=bd(),f=ii();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(Syt(a,o,e.documentUpdates).next(d=>{u=d.Vs,f=d.fs})),!r.isEqual(Sn.min())){const d=n.Hr.getLastRemoteSnapshotVersion(a).next(m=>n.Hr.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(d)}return fe.waitFor(l).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,f)).next(()=>u)}).then(a=>(n.Ts=s,a))}function Syt(i,e,n){let r=ii(),s=ii();return n.forEach(a=>r=r.add(a)),e.getEntries(i,r).next(a=>{let o=bd();return n.forEach((l,u)=>{const f=a.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Sn.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):Be(RL,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)}),{Vs:o,fs:s}})}function Eyt(i,e){const n=Rn(i);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=yL),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Tyt(i,e){const n=Rn(i);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Hr.getTargetData(r,e).next(a=>a?(s=a,fe.resolve(s)):n.Hr.allocateTargetId(r).next(o=>(s=new Bp(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(e,r.targetId)),r})}async function AP(i,e,n){const r=Rn(i),s=r.Ts.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!F_(o))throw o;Be(RL,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function f5(i,e,n){const r=Rn(i);let s=Sn.min(),a=ii();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,f,d){const m=Rn(u),y=m.Is.get(d);return y!==void 0?fe.resolve(m.Ts.get(y)):m.Hr.getTargetData(f,d)}(r,o,Uf(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(o,l.targetId).next(u=>{a=u})}).next(()=>r.Ps.getDocumentsMatchingQuery(o,e,n?s:Sn.min(),n?a:ii())).next(l=>(wyt(r,fgt(e),l),{documents:l,gs:a})))}function wyt(i,e,n){let r=i.Es.get(e)||Sn.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),i.Es.set(e,r)}class h5{constructor(){this.activeTargetIds=ygt()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ayt{constructor(){this.ho=new h5,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,r){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new h5,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Myt{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5="ConnectivityMonitor";class p5{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Be(d5,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Be(d5,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ow=null;function MP(){return Ow===null?Ow=function(){return 268435456+Math.round(2147483648*Math.random())}():Ow++,"0x"+Ow.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="RestConnection",Cyt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ryt{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===BM?`project_id=${r}`:`project_id=${r}&database_id=${s}`}So(e,n,r,s,a){const o=MP(),l=this.bo(e,n.toUriEncodedString());Be(OI,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,s,a),this.vo(e,l,u,r).then(f=>(Be(OI,`Received RPC '${e}' ${o}: `,f),f),f=>{throw o_(OI,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Co(e,n,r,s,a,o){return this.So(e,n,r,s,a)}Do(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+z_}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}bo(e,n){const r=Cyt[e];return`${this.po}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oyt{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="WebChannelConnection";class Iyt extends Ryt{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,s){const a=MP();return new Promise((o,l)=>{const u=new E7;u.setWithCredentials(!0),u.listenOnce(T7.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case pA.NO_ERROR:const d=u.getResponseJson();Be(Da,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case pA.TIMEOUT:Be(Da,`RPC '${e}' ${a} timed out`),l(new He(pe.DEADLINE_EXCEEDED,"Request time out"));break;case pA.HTTP_ERROR:const m=u.getStatus();if(Be(Da,`RPC '${e}' ${a} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const _=y==null?void 0:y.error;if(_&&_.status&&_.message){const x=function(T){const b=T.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(b)>=0?b:pe.UNKNOWN}(_.status);l(new He(x,_.message))}else l(new He(pe.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new He(pe.UNAVAILABLE,"Connection failed."));break;default:mn()}}finally{Be(Da,`RPC '${e}' ${a} completed.`)}});const f=JSON.stringify(s);Be(Da,`RPC '${e}' ${a} sending request:`,s),u.send(n,"POST",f,r,15)})}Wo(e,n,r){const s=MP(),a=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=M7(),l=A7(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=a.join("");Be(Da,`Creating RPC '${e}' stream ${s}: ${d}`,u);const m=o.createWebChannel(d,u);let y=!1,_=!1;const x=new Oyt({Fo:T=>{_?Be(Da,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(y||(Be(Da,`Opening RPC '${e}' stream ${s} transport.`),m.open(),y=!0),Be(Da,`RPC '${e}' stream ${s} sending:`,T),m.send(T))},Mo:()=>m.close()}),S=(T,b,M)=>{T.listen(b,R=>{try{M(R)}catch(A){setTimeout(()=>{throw A},0)}})};return S(m,Vx.EventType.OPEN,()=>{_||(Be(Da,`RPC '${e}' stream ${s} transport opened.`),x.Qo())}),S(m,Vx.EventType.CLOSE,()=>{_||(_=!0,Be(Da,`RPC '${e}' stream ${s} transport closed`),x.Uo())}),S(m,Vx.EventType.ERROR,T=>{_||(_=!0,o_(Da,`RPC '${e}' stream ${s} transport errored:`,T),x.Uo(new He(pe.UNAVAILABLE,"The operation could not be completed")))}),S(m,Vx.EventType.MESSAGE,T=>{var b;if(!_){const M=T.data[0];Di(!!M);const R=M,A=(R==null?void 0:R.error)||((b=R[0])===null||b===void 0?void 0:b.error);if(A){Be(Da,`RPC '${e}' stream ${s} received error:`,A);const I=A.status;let k=function(U){const O=gs[U];if(O!==void 0)return lj(O)}(I),N=A.message;k===void 0&&(k=pe.INTERNAL,N="Unknown error status: "+I+" with message "+A.message),_=!0,x.Uo(new He(k,N)),m.close()}else Be(Da,`RPC '${e}' stream ${s} received:`,M),x.Ko(M)}}),S(l,w7.STAT_EVENT,T=>{T.stat===pP.PROXY?Be(Da,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===pP.NOPROXY&&Be(Da,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.$o()},0),x}}function II(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(i){return new Lgt(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Ti=e,this.timerId=n,this.Go=r,this.zo=s,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,n-r);s>0&&Be("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5="PersistentStream";class Ej{constructor(e,n,r,s,a,o,l,u){this.Ti=e,this.n_=r,this.r_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Sj(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===pe.RESOURCE_EXHAUSTED?(_d(n.toString()),_d("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===n&&this.V_(r,s)},r=>{e(()=>{const s=new He(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,n){const r=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return Be(m5,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(Be(m5,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Dyt extends Ej{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=zgt(this.serializer,e),r=function(a){if(!("targetChange"in a))return Sn.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Sn.min():o.readTime?kf(o.readTime):Sn.min()}(e);return this.listener.p_(n,r)}y_(e){const n={};n.database=wP(this.serializer),n.addTarget=function(a,o){let l;const u=o.target;if(l=_P(u)?{documents:Vgt(a,u)}:{query:Hgt(a,u).ht},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=fj(a,o.resumeToken);const f=SP(a,o.expectedCount);f!==null&&(l.expectedCount=f)}else if(o.snapshotVersion.compareTo(Sn.min())>0){l.readTime=qM(a,o.snapshotVersion.toTimestamp());const f=SP(a,o.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,e);const r=jgt(this.serializer,e);r&&(n.labels=r),this.I_(n)}w_(e){const n={};n.database=wP(this.serializer),n.removeTarget=e,this.I_(n)}}class Pyt extends Ej{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return Di(!!e.streamToken),this.lastStreamToken=e.streamToken,Di(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Di(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=Fgt(e.writeResults,e.commitTime),r=kf(e.commitTime);return this.listener.v_(r,n)}C_(){const e={};e.database=wP(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Bgt(this.serializer,r))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nyt{}class Lyt extends Nyt{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new He(pe.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.So(e,EP(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new He(pe.UNKNOWN,a.toString())})}Co(e,n,r,s,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Co(e,EP(n,r),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new He(pe.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Uyt{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(_d(n),this.N_=!1):Be("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="RemoteStore";class kyt{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(o=>{r.enqueueAndForget(async()=>{Iy(this)&&(Be(_y,"Restarting streams for network reachability change."),await async function(u){const f=Rn(u);f.W_.add(4),await JS(f),f.j_.set("Unknown"),f.W_.delete(4),await z2(f)}(this))})}),this.j_=new Uyt(r,s)}}async function z2(i){if(Iy(i))for(const e of i.G_)await e(!0)}async function JS(i){for(const e of i.G_)await e(!1)}function Tj(i,e){const n=Rn(i);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),PL(n)?DL(n):V_(n).c_()&&IL(n,e))}function OL(i,e){const n=Rn(i),r=V_(n);n.K_.delete(e),r.c_()&&wj(n,e),n.K_.size===0&&(r.c_()?r.P_():Iy(n)&&n.j_.set("Unknown"))}function IL(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Sn.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}V_(i).y_(e)}function wj(i,e){i.H_.Ne(e),V_(i).w_(e)}function DL(i){i.H_=new Igt({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.K_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),V_(i).start(),i.j_.B_()}function PL(i){return Iy(i)&&!V_(i).u_()&&i.K_.size>0}function Iy(i){return Rn(i).W_.size===0}function Aj(i){i.H_=void 0}async function zyt(i){i.j_.set("Online")}async function Byt(i){i.K_.forEach((e,n)=>{IL(i,e)})}async function Fyt(i,e){Aj(i),PL(i)?(i.j_.q_(e),DL(i)):i.j_.set("Unknown")}async function Vyt(i,e,n){if(i.j_.set("Online"),e instanceof cj&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.K_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.K_.delete(l),s.H_.removeTarget(l))}(i,e)}catch(r){Be(_y,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await WM(i,r)}else if(e instanceof vA?i.H_.We(e):e instanceof uj?i.H_.Ze(e):i.H_.je(e),!n.isEqual(Sn.min()))try{const r=await xj(i.localStore);n.compareTo(r)>=0&&await function(a,o){const l=a.H_.ot(o);return l.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const d=a.K_.get(f);d&&a.K_.set(f,d.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,f)=>{const d=a.K_.get(u);if(!d)return;a.K_.set(u,d.withResumeToken(ma.EMPTY_BYTE_STRING,d.snapshotVersion)),wj(a,u);const m=new Bp(d.target,u,f,d.sequenceNumber);IL(a,m)}),a.remoteSyncer.applyRemoteEvent(l)}(i,n)}catch(r){Be(_y,"Failed to raise snapshot:",r),await WM(i,r)}}async function WM(i,e,n){if(!F_(e))throw e;i.W_.add(1),await JS(i),i.j_.set("Offline"),n||(n=()=>xj(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{Be(_y,"Retrying IndexedDB access"),await n(),i.W_.delete(1),await z2(i)})}function Mj(i,e){return e().catch(n=>WM(i,n,e))}async function B2(i){const e=Rn(i),n=om(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:yL;for(;Hyt(e);)try{const s=await Eyt(e.localStore,r);if(s===null){e.U_.length===0&&n.P_();break}r=s.batchId,Gyt(e,s)}catch(s){await WM(e,s)}Cj(e)&&Rj(e)}function Hyt(i){return Iy(i)&&i.U_.length<10}function Gyt(i,e){i.U_.push(e);const n=om(i);n.c_()&&n.S_&&n.b_(e.mutations)}function Cj(i){return Iy(i)&&!om(i).u_()&&i.U_.length>0}function Rj(i){om(i).start()}async function jyt(i){om(i).C_()}async function qyt(i){const e=om(i);for(const n of i.U_)e.b_(n.mutations)}async function $yt(i,e,n){const r=i.U_.shift(),s=EL.from(r,e,n);await Mj(i,()=>i.remoteSyncer.applySuccessfulWrite(s)),await B2(i)}async function Wyt(i,e){e&&om(i).S_&&await async function(r,s){if(function(o){return Rgt(o)&&o!==pe.ABORTED}(s.code)){const a=r.U_.shift();om(r).h_(),await Mj(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await B2(r)}}(i,e),Cj(i)&&Rj(i)}async function g5(i,e){const n=Rn(i);n.asyncQueue.verifyOperationInProgress(),Be(_y,"RemoteStore received new credentials");const r=Iy(n);n.W_.add(3),await JS(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await z2(n)}async function Xyt(i,e){const n=Rn(i);e?(n.W_.delete(2),await z2(n)):e||(n.W_.add(2),await JS(n),n.j_.set("Unknown"))}function V_(i){return i.J_||(i.J_=function(n,r,s){const a=Rn(n);return a.M_(),new Dyt(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(i.datastore,i.asyncQueue,{xo:zyt.bind(null,i),No:Byt.bind(null,i),Lo:Fyt.bind(null,i),p_:Vyt.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),PL(i)?DL(i):i.j_.set("Unknown")):(await i.J_.stop(),Aj(i))})),i.J_}function om(i){return i.Y_||(i.Y_=function(n,r,s){const a=Rn(n);return a.M_(),new Pyt(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:jyt.bind(null,i),Lo:Wyt.bind(null,i),D_:qyt.bind(null,i),v_:$yt.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await B2(i)):(await i.Y_.stop(),i.U_.length>0&&(Be(_y,`Stopping write stream with ${i.U_.length} pending writes`),i.U_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Xp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,l=new NL(e,n,o,s,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function LL(i,e){if(_d("AsyncQueue",`${e}: ${i}`),F_(i))return new He(pe.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{static emptySet(e){return new z0(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||tn.comparator(n.key,r.key):(n,r)=>tn.comparator(n.key,r.key),this.keyedMap=Hx(),this.sortedSet=new Nr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof z0)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new z0;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(){this.Z_=new Nr(tn.comparator)}track(e){const n=e.doc.key,r=this.Z_.get(n);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(n):e.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):mn():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class h_{constructor(e,n,r,s,a,o,l,u,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new h_(e,n,z0.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&D2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yyt{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class Kyt{constructor(){this.queries=v5(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){const s=Rn(n),a=s.queries;s.queries=v5(),a.forEach((o,l)=>{for(const u of l.ta)u.onError(r)})})(this,new He(pe.ABORTED,"Firestore shutting down"))}}function v5(){return new Ry(i=>Y7(i),D2)}async function Zyt(i,e){const n=Rn(i);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.na()&&e.ra()&&(r=2):(a=new Yyt,r=e.ra()?0:1);try{switch(r){case 0:a.ea=await n.onListen(s,!0);break;case 1:a.ea=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=LL(o,`Initialization of query '${x0(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,a),a.ta.push(e),e.sa(n.onlineState),a.ea&&e.oa(a.ea)&&UL(n)}async function Qyt(i,e){const n=Rn(i),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.ta.indexOf(e);o>=0&&(a.ta.splice(o,1),a.ta.length===0?s=e.ra()?0:1:!a.na()&&e.ra()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Jyt(i,e){const n=Rn(i);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const l of o.ta)l.oa(s)&&(r=!0);o.ea=s}}r&&UL(n)}function tvt(i,e,n){const r=Rn(i),s=r.queries.get(e);if(s)for(const a of s.ta)a.onError(n);r.queries.delete(e)}function UL(i){i.ia.forEach(e=>{e.next()})}var CP,_5;(_5=CP||(CP={}))._a="default",_5.Cache="cache";class evt{constructor(e,n,r){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new h_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const r=n!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=h_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==CP.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e){this.key=e}}class Ij{constructor(e){this.key=e}}class nvt{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ii(),this.mutatedKeys=ii(),this.ya=K7(e),this.wa=new z0(this.ya)}get Sa(){return this.fa}ba(e,n){const r=n?n.Da:new y5,s=n?n.wa:this.wa;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,m)=>{const y=s.get(d),_=P2(this.query,m)?m:null,x=!!y&&this.mutatedKeys.has(y.key),S=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let T=!1;y&&_?y.data.isEqual(_.data)?x!==S&&(r.track({type:3,doc:_}),T=!0):this.va(y,_)||(r.track({type:2,doc:_}),T=!0,(u&&this.ya(_,u)>0||f&&this.ya(_,f)<0)&&(l=!0)):!y&&_?(r.track({type:0,doc:_}),T=!0):y&&!_&&(r.track({type:1,doc:y}),T=!0,(u||f)&&(l=!0)),T&&(_?(o=o.add(_),a=S?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{wa:o,Da:r,ls:l,mutatedKeys:a}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((d,m)=>function(_,x){const S=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mn()}};return S(_)-S(x)}(d.type,m.type)||this.ya(d.doc,m.doc)),this.Ca(r),s=s!=null&&s;const l=n&&!s?this.Fa():[],u=this.pa.size===0&&this.current&&!s?1:0,f=u!==this.ga;return this.ga=u,o.length!==0||f?{snapshot:new h_(this.query,e.wa,a,o,e.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new y5,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=ii(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const n=[];return e.forEach(r=>{this.pa.has(r)||n.push(new Ij(r))}),this.pa.forEach(r=>{e.has(r)||n.push(new Oj(r))}),n}Oa(e){this.fa=e.gs,this.pa=ii();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return h_.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const kL="SyncEngine";class ivt{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class rvt{constructor(e){this.key=e,this.Ba=!1}}class svt{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Ry(l=>Y7(l),D2),this.qa=new Map,this.Qa=new Set,this.$a=new Nr(tn.comparator),this.Ua=new Map,this.Ka=new AL,this.Wa={},this.Ga=new Map,this.za=f_.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function avt(i,e,n=!0){const r=kj(i);let s;const a=r.ka.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Na()):s=await Dj(r,e,n,!0),s}async function ovt(i,e){const n=kj(i);await Dj(n,e,!0,!1)}async function Dj(i,e,n,r){const s=await Tyt(i.localStore,Uf(e)),a=s.targetId,o=i.sharedClientState.addLocalQueryTarget(a,n);let l;return r&&(l=await lvt(i,e,a,o==="current",s.resumeToken)),i.isPrimaryClient&&n&&Tj(i.remoteStore,s),l}async function lvt(i,e,n,r,s){i.Ha=(m,y,_)=>async function(S,T,b,M){let R=T.view.ba(b);R.ls&&(R=await f5(S.localStore,T.query,!1).then(({documents:N})=>T.view.ba(N,R)));const A=M&&M.targetChanges.get(T.targetId),I=M&&M.targetMismatches.get(T.targetId)!=null,k=T.view.applyChanges(R,S.isPrimaryClient,A,I);return x5(S,T.targetId,k.Ma),k.snapshot}(i,m,y,_);const a=await f5(i.localStore,e,!0),o=new nvt(e,a.gs),l=o.ba(a.documents),u=QS.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",s),f=o.applyChanges(l,i.isPrimaryClient,u);x5(i,n,f.Ma);const d=new ivt(e,n,o);return i.ka.set(e,d),i.qa.has(n)?i.qa.get(n).push(e):i.qa.set(n,[e]),f.snapshot}async function uvt(i,e,n){const r=Rn(i),s=r.ka.get(e),a=r.qa.get(s.targetId);if(a.length>1)return r.qa.set(s.targetId,a.filter(o=>!D2(o,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await AP(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&OL(r.remoteStore,s.targetId),RP(r,s.targetId)}).catch(B_)):(RP(r,s.targetId),await AP(r.localStore,s.targetId,!0))}async function cvt(i,e){const n=Rn(i),r=n.ka.get(e),s=n.qa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),OL(n.remoteStore,r.targetId))}async function fvt(i,e,n){const r=vvt(i);try{const s=await function(o,l){const u=Rn(o),f=Ps.now(),d=l.reduce((_,x)=>_.add(x.key),ii());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let x=bd(),S=ii();return u.ds.getEntries(_,d).next(T=>{x=T,x.forEach((b,M)=>{M.isValidDocument()||(S=S.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,x)).next(T=>{m=T;const b=[];for(const M of l){const R=Tgt(M,m.get(M.key).overlayedDocument);R!=null&&b.push(new Oy(M.key,R,F7(R.value.mapValue),od.exists(!0)))}return u.mutationQueue.addMutationBatch(_,f,b,l)}).next(T=>{y=T;const b=T.applyToLocalDocumentSet(m,S);return u.documentOverlayCache.saveOverlays(_,T.batchId,b)})}).then(()=>({batchId:y.batchId,changes:Q7(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let f=o.Wa[o.currentUser.toKey()];f||(f=new Nr($n)),f=f.insert(l,u),o.Wa[o.currentUser.toKey()]=f}(r,s.batchId,n),await tE(r,s.changes),await B2(r.remoteStore)}catch(s){const a=LL(s,"Failed to persist write");n.reject(a)}}async function Pj(i,e){const n=Rn(i);try{const r=await xyt(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Ua.get(a);o&&(Di(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ba=!0:s.modifiedDocuments.size>0?Di(o.Ba):s.removedDocuments.size>0&&(Di(o.Ba),o.Ba=!1))}),await tE(n,r,e)}catch(r){await B_(r)}}function b5(i,e,n){const r=Rn(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ka.forEach((a,o)=>{const l=o.view.sa(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Rn(o);u.onlineState=l;let f=!1;u.queries.forEach((d,m)=>{for(const y of m.ta)y.sa(l)&&(f=!0)}),f&&UL(u)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function hvt(i,e,n){const r=Rn(i);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ua.get(e),a=s&&s.key;if(a){let o=new Nr(tn.comparator);o=o.insert(a,ka.newNoDocument(a,Sn.min()));const l=ii().add(a),u=new U2(Sn.min(),new Map,new Nr($n),o,l);await Pj(r,u),r.$a=r.$a.remove(a),r.Ua.delete(e),zL(r)}else await AP(r.localStore,e,!1).then(()=>RP(r,e,n)).catch(B_)}async function dvt(i,e){const n=Rn(i),r=e.batch.batchId;try{const s=await byt(n.localStore,e);Lj(n,r,null),Nj(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await tE(n,s)}catch(s){await B_(s)}}async function pvt(i,e,n){const r=Rn(i);try{const s=await function(o,l){const u=Rn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let d;return u.mutationQueue.lookupMutationBatch(f,l).next(m=>(Di(m!==null),d=m.keys(),u.mutationQueue.removeMutationBatch(f,m))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d)).next(()=>u.localDocuments.getDocuments(f,d))})}(r.localStore,e);Lj(r,e,n),Nj(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await tE(r,s)}catch(s){await B_(s)}}function Nj(i,e){(i.Ga.get(e)||[]).forEach(n=>{n.resolve()}),i.Ga.delete(e)}function Lj(i,e,n){const r=Rn(i);let s=r.Wa[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function RP(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.qa.get(e))i.ka.delete(r),n&&i.La.Ja(r,n);i.qa.delete(e),i.isPrimaryClient&&i.Ka.br(e).forEach(r=>{i.Ka.containsKey(r)||Uj(i,r)})}function Uj(i,e){i.Qa.delete(e.path.canonicalString());const n=i.$a.get(e);n!==null&&(OL(i.remoteStore,n),i.$a=i.$a.remove(e),i.Ua.delete(n),zL(i))}function x5(i,e,n){for(const r of n)r instanceof Oj?(i.Ka.addReference(r.key,e),mvt(i,r)):r instanceof Ij?(Be(kL,"Document no longer in limbo: "+r.key),i.Ka.removeReference(r.key,e),i.Ka.containsKey(r.key)||Uj(i,r.key)):mn()}function mvt(i,e){const n=e.key,r=n.path.canonicalString();i.$a.get(n)||i.Qa.has(r)||(Be(kL,"New document in limbo: "+n),i.Qa.add(r),zL(i))}function zL(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const n=new tn(cr.fromString(e)),r=i.za.next();i.Ua.set(r,new rvt(n)),i.$a=i.$a.insert(n,r),Tj(i.remoteStore,new Bp(Uf(W7(n.path)),r,"TargetPurposeLimboResolution",R2.ae))}}async function tE(i,e,n){const r=Rn(i),s=[],a=[],o=[];r.ka.isEmpty()||(r.ka.forEach((l,u)=>{o.push(r.Ha(u,e,n).then(f=>{var d;if((f||n)&&r.isPrimaryClient){const m=f?!f.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(f){s.push(f);const m=CL.Yi(u.targetId,f);a.push(m)}}))}),await Promise.all(o),r.La.p_(s),await async function(u,f){const d=Rn(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>fe.forEach(f,y=>fe.forEach(y.Hi,_=>d.persistence.referenceDelegate.addReference(m,y.targetId,_)).next(()=>fe.forEach(y.Ji,_=>d.persistence.referenceDelegate.removeReference(m,y.targetId,_)))))}catch(m){if(!F_(m))throw m;Be(RL,"Failed to update sequence numbers: "+m)}for(const m of f){const y=m.targetId;if(!m.fromCache){const _=d.Ts.get(y),x=_.snapshotVersion,S=_.withLastLimboFreeSnapshotVersion(x);d.Ts=d.Ts.insert(y,S)}}}(r.localStore,a))}async function gvt(i,e){const n=Rn(i);if(!n.currentUser.isEqual(e)){Be(kL,"User change. New user:",e.toKey());const r=await bj(n.localStore,e);n.currentUser=e,function(a,o){a.Ga.forEach(l=>{l.forEach(u=>{u.reject(new He(pe.CANCELLED,o))})}),a.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await tE(n,r.Rs)}}function yvt(i,e){const n=Rn(i),r=n.Ua.get(e);if(r&&r.Ba)return ii().add(r.key);{let s=ii();const a=n.qa.get(e);if(!a)return s;for(const o of a){const l=n.ka.get(o);s=s.unionWith(l.view.Sa)}return s}}function kj(i){const e=Rn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yvt.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hvt.bind(null,e),e.La.p_=Jyt.bind(null,e.eventManager),e.La.Ja=tvt.bind(null,e.eventManager),e}function vvt(i){const e=Rn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dvt.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pvt.bind(null,e),e}class XM{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=k2(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return _yt(this.persistence,new gyt,e.initialUser,this.serializer)}Xa(e){return new _j(ML.ri,this.serializer)}Za(e){return new Ayt}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}XM.provider={build:()=>new XM};class _vt extends XM{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){Di(this.persistence.referenceDelegate instanceof $M);const r=this.persistence.referenceDelegate.garbageCollector;return new eyt(r,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Ko.withCacheSize(this.cacheSizeBytes):Ko.DEFAULT;return new _j(r=>$M.ri(r,n),this.serializer)}}class OP{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>b5(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=gvt.bind(null,this.syncEngine),await Xyt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Kyt}()}createDatastore(e){const n=k2(e.databaseInfo.databaseId),r=function(a){return new Iyt(a)}(e.databaseInfo);return function(a,o,l,u){return new Lyt(a,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,l){return new kyt(r,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>b5(this.syncEngine,n,0),function(){return p5.D()?new p5:new Myt}())}createSyncEngine(e,n){return function(s,a,o,l,u,f,d){const m=new svt(s,a,o,l,u,f);return d&&(m.ja=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=Rn(s);Be(_y,"RemoteStore shutting down."),a.W_.add(5),await JS(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}OP.provider={build:()=>new OP};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bvt{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):_d("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="FirestoreClient";class xvt{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ua.UNAUTHENTICATED,this.clientId=O7.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{Be(lm,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Be(lm,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=LL(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function DI(i,e){i.asyncQueue.verifyOperationInProgress(),Be(lm,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener(async s=>{r.isEqual(s)||(await bj(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function S5(i,e){i.asyncQueue.verifyOperationInProgress();const n=await Svt(i);Be(lm,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(r=>g5(e.remoteStore,r)),i.setAppCheckTokenChangeListener((r,s)=>g5(e.remoteStore,s)),i._onlineComponents=e}async function Svt(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Be(lm,"Using user provided OfflineComponentProvider");try{await DI(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===pe.FAILED_PRECONDITION||s.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;o_("Error using user provided cache. Falling back to memory cache: "+n),await DI(i,new XM)}}else Be(lm,"Using default OfflineComponentProvider"),await DI(i,new _vt(void 0));return i._offlineComponents}async function zj(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Be(lm,"Using user provided OnlineComponentProvider"),await S5(i,i._uninitializedComponentsProvider._online)):(Be(lm,"Using default OnlineComponentProvider"),await S5(i,new OP))),i._onlineComponents}function Evt(i){return zj(i).then(e=>e.syncEngine)}async function Tvt(i){const e=await zj(i),n=e.eventManager;return n.onListen=avt.bind(null,e.syncEngine),n.onUnlisten=uvt.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ovt.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=cvt.bind(null,e.syncEngine),n}function wvt(i,e,n={}){const r=new Xp;return i.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,f){const d=new bvt({next:y=>{d.su(),o.enqueueAndForget(()=>Qyt(a,m)),y.fromCache&&u.source==="server"?f.reject(new He(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(y)},error:y=>f.reject(y)}),m=new evt(l,d,{includeMetadataChanges:!0,Ta:!0});return Zyt(a,m)}(await Tvt(i),i.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(i,e,n){if(!n)throw new He(pe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Avt(i,e,n,r){if(e===!0&&r===!0)throw new He(pe.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function T5(i){if(!tn.isDocumentKey(i))throw new He(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function w5(i){if(tn.isDocumentKey(i))throw new He(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function F2(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":mn()}function YM(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new He(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=F2(i);throw new He(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj="firestore.googleapis.com",A5=!0;class M5{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new He(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vj,this.ssl=A5}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:A5;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vj;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Jgt)throw new He(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Avt("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bj((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new He(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new He(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new He(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class V2{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M5({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new He(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M5(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Omt;switch(r.type){case"firstParty":return new Nmt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new He(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=E5.get(n);r&&(Be("ComponentProvider","Removing Datastore"),E5.delete(n),r.terminate())}(this),Promise.resolve()}}function Mvt(i,e,n,r={}){var s;const a=(i=YM(i,V2))._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:i._getEmulatorOptions()}),l=`${e}:${n}`;a.host!==Vj&&a.host!==l&&o_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},a),{host:l,ssl:!1,emulatorOptions:r});if(!my(u,o)&&(i._setSettings(u),r.mockUserToken)){let f,d;if(typeof r.mockUserToken=="string")f=r.mockUserToken,d=Ua.MOCK_USER;else{f=nht(r.mockUserToken,(s=i._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new He(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ua(m)}i._authCredentials=new Imt(new C7(f,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new H_(this.firestore,e,this._query)}}class wu{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wu(this.firestore,e,this._key)}}class Yp extends H_{constructor(e,n,r){super(e,n,W7(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wu(this.firestore,null,new tn(e))}withConverter(e){return new Yp(this.firestore,e,this._path)}}function B0(i,e,...n){if(i=ll(i),Fj("collection","path",e),i instanceof V2){const r=cr.fromString(e,...n);return w5(r),new Yp(i,null,r)}{if(!(i instanceof wu||i instanceof Yp))throw new He(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(cr.fromString(e,...n));return w5(r),new Yp(i.firestore,null,r)}}function Cvt(i,e,...n){if(i=ll(i),arguments.length===1&&(e=O7.newId()),Fj("doc","path",e),i instanceof V2){const r=cr.fromString(e,...n);return T5(r),new wu(i,null,new tn(r))}{if(!(i instanceof wu||i instanceof Yp))throw new He(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(cr.fromString(e,...n));return T5(r),new wu(i.firestore,i instanceof Yp?i.converter:null,new tn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5="AsyncQueue";class R5{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Sj(this,"async_queue_retry"),this.Su=()=>{const r=II();r&&Be(C5,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const n=II();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=II();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Xp;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!F_(e))throw e;Be(C5,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw _d("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.bu=n,n}enqueueAfterDelay(e,n,r){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const s=NL.createAndSchedule(this,e,n,r,a=>this.Fu(a));return this.fu.push(s),s}Du(){this.gu&&mn()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}class BL extends V2{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new R5,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new R5(e),this._firestoreClient=void 0,await e}}}function Rvt(i,e){const n=typeof i=="object"?i:GG(),r=typeof i=="string"?i:BM,s=rL(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=tht("firestore");a&&Mvt(s,...a)}return s}function Hj(i){if(i._terminated)throw new He(pe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||Ovt(i),i._firestoreClient}function Ovt(i){var e,n,r;const s=i._freezeSettings(),a=function(l,u,f,d){return new Ymt(l,u,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Bj(d.experimentalLongPollingOptions),d.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,s);i._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),i._firestoreClient=new xvt(i._authCredentials,i._appCheckCredentials,i._queue,a,i._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e){this._byteString=e}static fromBase64String(e){try{return new d_(ma.fromBase64String(e))}catch(n){throw new He(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new d_(ma.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new He(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ca(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new He(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new He(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $n(this._lat,e._lat)||$n(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ivt=/^__.*__$/;class Dvt{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Oy(e,this.data,this.fieldMask,n,this.fieldTransforms):new ZS(e,this.data,n,this.fieldTransforms)}}function jj(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mn()}}class GL{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Bu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new GL(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Uu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return KM(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(jj(this.Lu)&&Ivt.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class Pvt{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||k2(e)}ju(e,n,r,s=!1){return new GL({Lu:e,methodName:n,zu:r,path:ca.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qj(i){const e=i._freezeSettings(),n=k2(i._databaseId);return new Pvt(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Nvt(i,e,n,r,s,a={}){const o=i.ju(a.merge||a.mergeFields?2:0,e,n,s);Xj("Data must be an object, but it was:",o,r);const l=$j(r,o);let u,f;if(a.merge)u=new gc(o.fieldMask),f=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const m of a.mergeFields){const y=Uvt(e,m,n);if(!o.contains(y))throw new He(pe.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);zvt(d,y)||d.push(y)}u=new gc(d),f=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,f=o.fieldTransforms;return new Dvt(new _u(l),u,f)}function Lvt(i,e,n,r=!1){return jL(n,i.ju(r?4:3,e))}function jL(i,e){if(Wj(i=ll(i)))return Xj("Unsupported field value:",e,i),$j(i,e);if(i instanceof Gj)return function(r,s){if(!jj(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const l of r){let u=jL(l,s.Ku(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(i,e)}return function(r,s){if((r=ll(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vgt(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ps.fromDate(r);return{timestampValue:qM(s.serializer,a)}}if(r instanceof Ps){const a=new Ps(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qM(s.serializer,a)}}if(r instanceof VL)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof d_)return{bytesValue:fj(s.serializer,r._byteString)};if(r instanceof wu){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:wL(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof HL)return function(o,l){return{mapValue:{fields:{[z7]:{stringValue:B7},[FM]:{arrayValue:{values:o.toArray().map(f=>{if(typeof f!="number")throw l.Wu("VectorValues must only contain numeric values.");return SL(l.serializer,f)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${F2(r)}`)}(i,e)}function $j(i,e){const n={};return D7(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cy(i,(r,s)=>{const a=jL(s,e.qu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function Wj(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ps||i instanceof VL||i instanceof d_||i instanceof wu||i instanceof Gj||i instanceof HL)}function Xj(i,e,n){if(!Wj(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=F2(n);throw r==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+r)}}function Uvt(i,e,n){if((e=ll(e))instanceof FL)return e._internalPath;if(typeof e=="string")return Yj(i,e);throw KM("Field path arguments must be of type string or ",i,!1,void 0,n)}const kvt=new RegExp("[~\\*/\\[\\]]");function Yj(i,e,n){if(e.search(kvt)>=0)throw KM(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new FL(...e.split("."))._internalPath}catch{throw KM(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function KM(i,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new He(pe.INVALID_ARGUMENT,l+i+u)}function zvt(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new wu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Bvt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qL("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Bvt extends Kj{data(){return super.data()}}function qL(i,e){return typeof e=="string"?Yj(i,e):e instanceof FL?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fvt(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new He(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $L{}class Vvt extends $L{}function Hvt(i,e,...n){let r=[];e instanceof $L&&r.push(e),r=r.concat(n),function(a){const o=a.filter(u=>u instanceof WL).length,l=a.filter(u=>u instanceof H2).length;if(o>1||o>0&&l>0)throw new He(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)i=s._apply(i);return i}class H2 extends Vvt{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new H2(e,n,r)}_apply(e){const n=this._parse(e);return Zj(e._query,n),new H_(e.firestore,e.converter,bP(e._query,n))}_parse(e){const n=qj(e.firestore);return function(a,o,l,u,f,d,m){let y;if(f.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new He(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){I5(m,d);const x=[];for(const S of m)x.push(O5(u,a,S));y={arrayValue:{values:x}}}else y=O5(u,a,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||I5(m,d),y=Lvt(l,o,m,d==="in"||d==="not-in");return xs.create(f,d,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Gvt(i,e,n){const r=e,s=qL("where",i);return H2._create(s,r,n)}class WL extends $L{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new WL(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ec.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let o=s;const l=a.getFlattenedFilters();for(const u of l)Zj(o,u),o=bP(o,u)}(e._query,n),new H_(e.firestore,e.converter,bP(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function O5(i,e,n){if(typeof(n=ll(n))=="string"){if(n==="")throw new He(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!X7(e)&&n.indexOf("/")!==-1)throw new He(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(cr.fromString(n));if(!tn.isDocumentKey(r))throw new He(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $F(i,new tn(r))}if(n instanceof wu)return $F(i,n._key);throw new He(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${F2(n)}.`)}function I5(i,e){if(!Array.isArray(i)||i.length===0)throw new He(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zj(i,e){const n=function(s,a){for(const o of s)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new He(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new He(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class jvt{convertValue(e,n="none"){switch(am(e)){case 0:return null;case 1:return e.booleanValue;case 2:return es(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(sm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw mn()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Cy(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[FM].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>es(o.doubleValue));return new HL(a)}convertGeoPoint(e){return new VL(es(e.latitude),es(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=I2(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(sS(e));default:return null}}convertTimestamp(e){const n=rm(e);return new Ps(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=cr.fromString(e);Di(yj(r));const s=new aS(r.get(1),r.get(3)),a=new tn(r.popFirst(5));return s.isEqual(n)||_d(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qvt(i,e,n){let r;return r=i?i.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $vt extends Kj{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _A(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(qL("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class _A extends $vt{data(e={}){return super.data(e)}}class Wvt{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Iw(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new _A(this._firestore,this._userDataWriter,r.key,r,new Iw(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new He(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new _A(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Iw(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const u=new _A(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Iw(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,d=-1;return l.type!==0&&(f=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:Xvt(l.type),doc:u,oldIndex:f,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Xvt(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mn()}}class Yvt extends jvt{constructor(e){super(),this.firestore=e}convertBytes(e){return new d_(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wu(this.firestore,null,n)}}function G2(i){i=YM(i,H_);const e=YM(i.firestore,BL),n=Hj(e),r=new Yvt(e);return Fvt(i._query),wvt(n,i._query).then(s=>new Wvt(e,r,i,s))}function D5(i,e){const n=YM(i.firestore,BL),r=Cvt(i),s=qvt(i.converter,e);return Kvt(n,[Nvt(qj(i.firestore),"addDoc",r._key,s,i.converter!==null,{}).toMutation(r._key,od.exists(!1))]).then(()=>r)}function Kvt(i,e){return function(r,s){const a=new Xp;return r.asyncQueue.enqueueAndForget(async()=>fvt(await Evt(r),s,a)),a.promise}(Hj(i),e)}(function(e,n=!0){(function(s){z_=s})(U_),s_(new gy("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new BL(new Dmt(r.getProvider("auth-internal")),new Lmt(o,r.getProvider("app-check-internal")),function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new He(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new aS(f.options.projectId,d)}(o,s),o);return a=Object.assign({useFetchStreams:n},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),$p(NF,LF,e),$p(NF,LF,"esm2017")})();const Zvt={apiKey:"AIzaSyD6drh2aoyblA6iwk80Ko26FHK2HK_cNmk",authDomain:"black-triangle-bjj.firebaseapp.com",projectId:"black-triangle-bjj",storageBucket:"black-triangle-bjj.firebasestorage.app",messagingSenderId:"128924794161",appId:"1:128924794161:web:7968a2a259fbc8899cc410",measurementId:"G-LBWF7DFVF5"},Qj=HG(Zvt),F0=Rvt(Qj),XL=Amt(Qj),Qvt=new Yh,Jvt={displayName:"",email:"",photoURL:""},t0t=async()=>{try{await mpt(XL),yi.setState({userLoginData:Jvt,isUserLogin:!1})}catch(i){console.error("Error al cerrar sesin:",i)}};function e0t(){const i=yi(d=>d.isUserLogin),e=yi(d=>d.userLoginData),[n,r]=tt.useState(null),s=!!n,a=yi(d=>d.triggerAlert),o=d=>{r(d.currentTarget)},l=()=>{r(null)},u=()=>{yi.setState({isLoginWindowActive:!0})},f=()=>{i?yi.setState({isAddNodeActive:!0}):a("Sesin Cerrada","warning")};return st.jsxs(tt.Fragment,{children:[st.jsx(bs,{sx:Gft,children:st.jsx(zft,{title:"Menu Usuario",children:st.jsx(SG,{onClick:o,size:"small","aria-controls":s?"menu-user":void 0,"aria-haspopup":"true","aria-expanded":s?"true":void 0,children:st.jsx(UB,{sx:jft,children:st.jsx(Hft,{sx:qft})})})})}),st.jsxs(xG,{anchorEl:n,id:"menu-user",open:s,onClose:l,onClick:l,slotProps:{paper:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&::before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[i?st.jsxs(_0,{onClick:l,children:[st.jsx(dx,{children:st.jsx(UB,{alt:e.displayName||"User",src:e.photoURL||void 0})}),e.displayName]}):st.jsxs(_0,{onClick:u,children:[st.jsx(dx,{children:st.jsx(Bft,{fontSize:"small"})}),"Iniciar sesin"]}),st.jsx(J1,{}),st.jsxs(_0,{onClick:f,children:[st.jsx(dx,{children:st.jsx(yct,{fontSize:"small"})}),"Agregar Nodo"]}),st.jsx(J1,{}),st.jsxs(_0,{onClick:l,children:[st.jsx(dx,{children:st.jsx(Fft,{fontSize:"small"})}),"Configuracin"]}),st.jsxs(_0,{onClick:t0t,children:[st.jsx(dx,{children:st.jsx(Vft,{fontSize:"small"})}),"Cerrar sesin"]})]})]})}function Jj(i,e,n){var r,s=1;i==null&&(i=0),e==null&&(e=0),n==null&&(n=0);function a(){var o,l=r.length,u,f=0,d=0,m=0;for(o=0;o<l;++o)u=r[o],f+=u.x||0,d+=u.y||0,m+=u.z||0;for(f=(f/l-i)*s,d=(d/l-e)*s,m=(m/l-n)*s,o=0;o<l;++o)u=r[o],f&&(u.x-=f),d&&(u.y-=d),m&&(u.z-=m)}return a.initialize=function(o){r=o},a.x=function(o){return arguments.length?(i=+o,a):i},a.y=function(o){return arguments.length?(e=+o,a):e},a.z=function(o){return arguments.length?(n=+o,a):n},a.strength=function(o){return arguments.length?(s=+o,a):s},a}function n0t(i){const e=+this._x.call(null,i);return tq(this.cover(e),e,i)}function tq(i,e,n){if(isNaN(e))return i;var r,s=i._root,a={data:n},o=i._x0,l=i._x1,u,f,d,m,y;if(!s)return i._root=a,i;for(;s.length;)if((d=e>=(u=(o+l)/2))?o=u:l=u,r=s,!(s=s[m=+d]))return r[m]=a,i;if(f=+i._x.call(null,s.data),e===f)return a.next=s,r?r[m]=a:i._root=a,i;do r=r?r[m]=new Array(2):i._root=new Array(2),(d=e>=(u=(o+l)/2))?o=u:l=u;while((m=+d)==(y=+(f>=u)));return r[y]=s,r[m]=a,i}function i0t(i){Array.isArray(i)||(i=Array.from(i));const e=i.length,n=new Float64Array(e);let r=1/0,s=-1/0;for(let a=0,o;a<e;++a)isNaN(o=+this._x.call(null,i[a]))||(n[a]=o,o<r&&(r=o),o>s&&(s=o));if(r>s)return this;this.cover(r).cover(s);for(let a=0;a<e;++a)tq(this,n[a],i[a]);return this}function r0t(i){if(isNaN(i=+i))return this;var e=this._x0,n=this._x1;if(isNaN(e))n=(e=Math.floor(i))+1;else{for(var r=n-e||1,s=this._root,a,o;e>i||i>=n;)switch(o=+(i<e),a=new Array(2),a[o]=s,s=a,r*=2,o){case 0:n=e+r;break;case 1:e=n-r;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._x1=n,this}function s0t(){var i=[];return this.visit(function(e){if(!e.length)do i.push(e.data);while(e=e.next)}),i}function a0t(i){return arguments.length?this.cover(+i[0][0]).cover(+i[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function ld(i,e,n){this.node=i,this.x0=e,this.x1=n}function o0t(i,e){var n,r=this._x0,s,a,o=this._x1,l=[],u=this._root,f,d;for(u&&l.push(new ld(u,r,o)),e==null?e=1/0:(r=i-e,o=i+e);f=l.pop();)if(!(!(u=f.node)||(s=f.x0)>o||(a=f.x1)<r))if(u.length){var m=(s+a)/2;l.push(new ld(u[1],m,a),new ld(u[0],s,m)),(d=+(i>=m))&&(f=l[l.length-1],l[l.length-1]=l[l.length-1-d],l[l.length-1-d]=f)}else{var y=Math.abs(i-+this._x.call(null,u.data));y<e&&(e=y,r=i-y,o=i+y,n=u.data)}return n}function l0t(i){if(isNaN(u=+this._x.call(null,i)))return this;var e,n=this._root,r,s,a,o=this._x0,l=this._x1,u,f,d,m,y;if(!n)return this;if(n.length)for(;;){if((d=u>=(f=(o+l)/2))?o=f:l=f,e=n,!(n=n[m=+d]))return this;if(!n.length)break;e[m+1&1]&&(r=e,y=m)}for(;n.data!==i;)if(s=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,s?(a?s.next=a:delete s.next,this):e?(a?e[m]=a:delete e[m],(n=e[0]||e[1])&&n===(e[1]||e[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=a,this)}function u0t(i){for(var e=0,n=i.length;e<n;++e)this.remove(i[e]);return this}function c0t(){return this._root}function f0t(){var i=0;return this.visit(function(e){if(!e.length)do++i;while(e=e.next)}),i}function h0t(i){var e=[],n,r=this._root,s,a,o;for(r&&e.push(new ld(r,this._x0,this._x1));n=e.pop();)if(!i(r=n.node,a=n.x0,o=n.x1)&&r.length){var l=(a+o)/2;(s=r[1])&&e.push(new ld(s,l,o)),(s=r[0])&&e.push(new ld(s,a,l))}return this}function d0t(i){var e=[],n=[],r;for(this._root&&e.push(new ld(this._root,this._x0,this._x1));r=e.pop();){var s=r.node;if(s.length){var a,o=r.x0,l=r.x1,u=(o+l)/2;(a=s[0])&&e.push(new ld(a,o,u)),(a=s[1])&&e.push(new ld(a,u,l))}n.push(r)}for(;r=n.pop();)i(r.node,r.x0,r.x1);return this}function p0t(i){return i[0]}function m0t(i){return arguments.length?(this._x=i,this):this._x}function eq(i,e){var n=new YL(e??p0t,NaN,NaN);return i==null?n:n.addAll(i)}function YL(i,e,n){this._x=i,this._x0=e,this._x1=n,this._root=void 0}function P5(i){for(var e={data:i.data},n=e;i=i.next;)n=n.next={data:i.data};return e}var fl=eq.prototype=YL.prototype;fl.copy=function(){var i=new YL(this._x,this._x0,this._x1),e=this._root,n,r;if(!e)return i;if(!e.length)return i._root=P5(e),i;for(n=[{source:e,target:i._root=new Array(2)}];e=n.pop();)for(var s=0;s<2;++s)(r=e.source[s])&&(r.length?n.push({source:r,target:e.target[s]=new Array(2)}):e.target[s]=P5(r));return i};fl.add=n0t;fl.addAll=i0t;fl.cover=r0t;fl.data=s0t;fl.extent=a0t;fl.find=o0t;fl.remove=l0t;fl.removeAll=u0t;fl.root=c0t;fl.size=f0t;fl.visit=h0t;fl.visitAfter=d0t;fl.x=m0t;function g0t(i){const e=+this._x.call(null,i),n=+this._y.call(null,i);return nq(this.cover(e,n),e,n,i)}function nq(i,e,n,r){if(isNaN(e)||isNaN(n))return i;var s,a=i._root,o={data:r},l=i._x0,u=i._y0,f=i._x1,d=i._y1,m,y,_,x,S,T,b,M;if(!a)return i._root=o,i;for(;a.length;)if((S=e>=(m=(l+f)/2))?l=m:f=m,(T=n>=(y=(u+d)/2))?u=y:d=y,s=a,!(a=a[b=T<<1|S]))return s[b]=o,i;if(_=+i._x.call(null,a.data),x=+i._y.call(null,a.data),e===_&&n===x)return o.next=a,s?s[b]=o:i._root=o,i;do s=s?s[b]=new Array(4):i._root=new Array(4),(S=e>=(m=(l+f)/2))?l=m:f=m,(T=n>=(y=(u+d)/2))?u=y:d=y;while((b=T<<1|S)===(M=(x>=y)<<1|_>=m));return s[M]=a,s[b]=o,i}function y0t(i){var e,n,r=i.length,s,a,o=new Array(r),l=new Array(r),u=1/0,f=1/0,d=-1/0,m=-1/0;for(n=0;n<r;++n)isNaN(s=+this._x.call(null,e=i[n]))||isNaN(a=+this._y.call(null,e))||(o[n]=s,l[n]=a,s<u&&(u=s),s>d&&(d=s),a<f&&(f=a),a>m&&(m=a));if(u>d||f>m)return this;for(this.cover(u,f).cover(d,m),n=0;n<r;++n)nq(this,o[n],l[n],i[n]);return this}function v0t(i,e){if(isNaN(i=+i)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,s=this._x1,a=this._y1;if(isNaN(n))s=(n=Math.floor(i))+1,a=(r=Math.floor(e))+1;else{for(var o=s-n||1,l=this._root,u,f;n>i||i>=s||r>e||e>=a;)switch(f=(e<r)<<1|i<n,u=new Array(4),u[f]=l,l=u,o*=2,f){case 0:s=n+o,a=r+o;break;case 1:n=s-o,a=r+o;break;case 2:s=n+o,r=a-o;break;case 3:n=s-o,r=a-o;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=s,this._y1=a,this}function _0t(){var i=[];return this.visit(function(e){if(!e.length)do i.push(e.data);while(e=e.next)}),i}function b0t(i){return arguments.length?this.cover(+i[0][0],+i[0][1]).cover(+i[1][0],+i[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function go(i,e,n,r,s){this.node=i,this.x0=e,this.y0=n,this.x1=r,this.y1=s}function x0t(i,e,n){var r,s=this._x0,a=this._y0,o,l,u,f,d=this._x1,m=this._y1,y=[],_=this._root,x,S;for(_&&y.push(new go(_,s,a,d,m)),n==null?n=1/0:(s=i-n,a=e-n,d=i+n,m=e+n,n*=n);x=y.pop();)if(!(!(_=x.node)||(o=x.x0)>d||(l=x.y0)>m||(u=x.x1)<s||(f=x.y1)<a))if(_.length){var T=(o+u)/2,b=(l+f)/2;y.push(new go(_[3],T,b,u,f),new go(_[2],o,b,T,f),new go(_[1],T,l,u,b),new go(_[0],o,l,T,b)),(S=(e>=b)<<1|i>=T)&&(x=y[y.length-1],y[y.length-1]=y[y.length-1-S],y[y.length-1-S]=x)}else{var M=i-+this._x.call(null,_.data),R=e-+this._y.call(null,_.data),A=M*M+R*R;if(A<n){var I=Math.sqrt(n=A);s=i-I,a=e-I,d=i+I,m=e+I,r=_.data}}return r}function S0t(i){if(isNaN(d=+this._x.call(null,i))||isNaN(m=+this._y.call(null,i)))return this;var e,n=this._root,r,s,a,o=this._x0,l=this._y0,u=this._x1,f=this._y1,d,m,y,_,x,S,T,b;if(!n)return this;if(n.length)for(;;){if((x=d>=(y=(o+u)/2))?o=y:u=y,(S=m>=(_=(l+f)/2))?l=_:f=_,e=n,!(n=n[T=S<<1|x]))return this;if(!n.length)break;(e[T+1&3]||e[T+2&3]||e[T+3&3])&&(r=e,b=T)}for(;n.data!==i;)if(s=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,s?(a?s.next=a:delete s.next,this):e?(a?e[T]=a:delete e[T],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[b]=n:this._root=n),this):(this._root=a,this)}function E0t(i){for(var e=0,n=i.length;e<n;++e)this.remove(i[e]);return this}function T0t(){return this._root}function w0t(){var i=0;return this.visit(function(e){if(!e.length)do++i;while(e=e.next)}),i}function A0t(i){var e=[],n,r=this._root,s,a,o,l,u;for(r&&e.push(new go(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!i(r=n.node,a=n.x0,o=n.y0,l=n.x1,u=n.y1)&&r.length){var f=(a+l)/2,d=(o+u)/2;(s=r[3])&&e.push(new go(s,f,d,l,u)),(s=r[2])&&e.push(new go(s,a,d,f,u)),(s=r[1])&&e.push(new go(s,f,o,l,d)),(s=r[0])&&e.push(new go(s,a,o,f,d))}return this}function M0t(i){var e=[],n=[],r;for(this._root&&e.push(new go(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var s=r.node;if(s.length){var a,o=r.x0,l=r.y0,u=r.x1,f=r.y1,d=(o+u)/2,m=(l+f)/2;(a=s[0])&&e.push(new go(a,o,l,d,m)),(a=s[1])&&e.push(new go(a,d,l,u,m)),(a=s[2])&&e.push(new go(a,o,m,d,f)),(a=s[3])&&e.push(new go(a,d,m,u,f))}n.push(r)}for(;r=n.pop();)i(r.node,r.x0,r.y0,r.x1,r.y1);return this}function C0t(i){return i[0]}function R0t(i){return arguments.length?(this._x=i,this):this._x}function O0t(i){return i[1]}function I0t(i){return arguments.length?(this._y=i,this):this._y}function iq(i,e,n){var r=new KL(e??C0t,n??O0t,NaN,NaN,NaN,NaN);return i==null?r:r.addAll(i)}function KL(i,e,n,r,s,a){this._x=i,this._y=e,this._x0=n,this._y0=r,this._x1=s,this._y1=a,this._root=void 0}function N5(i){for(var e={data:i.data},n=e;i=i.next;)n=n.next={data:i.data};return e}var So=iq.prototype=KL.prototype;So.copy=function(){var i=new KL(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return i;if(!e.length)return i._root=N5(e),i;for(n=[{source:e,target:i._root=new Array(4)}];e=n.pop();)for(var s=0;s<4;++s)(r=e.source[s])&&(r.length?n.push({source:r,target:e.target[s]=new Array(4)}):e.target[s]=N5(r));return i};So.add=g0t;So.addAll=y0t;So.cover=v0t;So.data=_0t;So.extent=b0t;So.find=x0t;So.remove=S0t;So.removeAll=E0t;So.root=T0t;So.size=w0t;So.visit=A0t;So.visitAfter=M0t;So.x=R0t;So.y=I0t;function D0t(i){const e=+this._x.call(null,i),n=+this._y.call(null,i),r=+this._z.call(null,i);return rq(this.cover(e,n,r),e,n,r,i)}function rq(i,e,n,r,s){if(isNaN(e)||isNaN(n)||isNaN(r))return i;var a,o=i._root,l={data:s},u=i._x0,f=i._y0,d=i._z0,m=i._x1,y=i._y1,_=i._z1,x,S,T,b,M,R,A,I,k,N,L;if(!o)return i._root=l,i;for(;o.length;)if((A=e>=(x=(u+m)/2))?u=x:m=x,(I=n>=(S=(f+y)/2))?f=S:y=S,(k=r>=(T=(d+_)/2))?d=T:_=T,a=o,!(o=o[N=k<<2|I<<1|A]))return a[N]=l,i;if(b=+i._x.call(null,o.data),M=+i._y.call(null,o.data),R=+i._z.call(null,o.data),e===b&&n===M&&r===R)return l.next=o,a?a[N]=l:i._root=l,i;do a=a?a[N]=new Array(8):i._root=new Array(8),(A=e>=(x=(u+m)/2))?u=x:m=x,(I=n>=(S=(f+y)/2))?f=S:y=S,(k=r>=(T=(d+_)/2))?d=T:_=T;while((N=k<<2|I<<1|A)===(L=(R>=T)<<2|(M>=S)<<1|b>=x));return a[L]=o,a[N]=l,i}function P0t(i){Array.isArray(i)||(i=Array.from(i));const e=i.length,n=new Float64Array(e),r=new Float64Array(e),s=new Float64Array(e);let a=1/0,o=1/0,l=1/0,u=-1/0,f=-1/0,d=-1/0;for(let m=0,y,_,x,S;m<e;++m)isNaN(_=+this._x.call(null,y=i[m]))||isNaN(x=+this._y.call(null,y))||isNaN(S=+this._z.call(null,y))||(n[m]=_,r[m]=x,s[m]=S,_<a&&(a=_),_>u&&(u=_),x<o&&(o=x),x>f&&(f=x),S<l&&(l=S),S>d&&(d=S));if(a>u||o>f||l>d)return this;this.cover(a,o,l).cover(u,f,d);for(let m=0;m<e;++m)rq(this,n[m],r[m],s[m],i[m]);return this}function N0t(i,e,n){if(isNaN(i=+i)||isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,s=this._y0,a=this._z0,o=this._x1,l=this._y1,u=this._z1;if(isNaN(r))o=(r=Math.floor(i))+1,l=(s=Math.floor(e))+1,u=(a=Math.floor(n))+1;else{for(var f=o-r||1,d=this._root,m,y;r>i||i>=o||s>e||e>=l||a>n||n>=u;)switch(y=(n<a)<<2|(e<s)<<1|i<r,m=new Array(8),m[y]=d,d=m,f*=2,y){case 0:o=r+f,l=s+f,u=a+f;break;case 1:r=o-f,l=s+f,u=a+f;break;case 2:o=r+f,s=l-f,u=a+f;break;case 3:r=o-f,s=l-f,u=a+f;break;case 4:o=r+f,l=s+f,a=u-f;break;case 5:r=o-f,l=s+f,a=u-f;break;case 6:o=r+f,s=l-f,a=u-f;break;case 7:r=o-f,s=l-f,a=u-f;break}this._root&&this._root.length&&(this._root=d)}return this._x0=r,this._y0=s,this._z0=a,this._x1=o,this._y1=l,this._z1=u,this}function L0t(){var i=[];return this.visit(function(e){if(!e.length)do i.push(e.data);while(e=e.next)}),i}function U0t(i){return arguments.length?this.cover(+i[0][0],+i[0][1],+i[0][2]).cover(+i[1][0],+i[1][1],+i[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Qi(i,e,n,r,s,a,o){this.node=i,this.x0=e,this.y0=n,this.z0=r,this.x1=s,this.y1=a,this.z1=o}function k0t(i,e,n,r){var s,a=this._x0,o=this._y0,l=this._z0,u,f,d,m,y,_,x=this._x1,S=this._y1,T=this._z1,b=[],M=this._root,R,A;for(M&&b.push(new Qi(M,a,o,l,x,S,T)),r==null?r=1/0:(a=i-r,o=e-r,l=n-r,x=i+r,S=e+r,T=n+r,r*=r);R=b.pop();)if(!(!(M=R.node)||(u=R.x0)>x||(f=R.y0)>S||(d=R.z0)>T||(m=R.x1)<a||(y=R.y1)<o||(_=R.z1)<l))if(M.length){var I=(u+m)/2,k=(f+y)/2,N=(d+_)/2;b.push(new Qi(M[7],I,k,N,m,y,_),new Qi(M[6],u,k,N,I,y,_),new Qi(M[5],I,f,N,m,k,_),new Qi(M[4],u,f,N,I,k,_),new Qi(M[3],I,k,d,m,y,N),new Qi(M[2],u,k,d,I,y,N),new Qi(M[1],I,f,d,m,k,N),new Qi(M[0],u,f,d,I,k,N)),(A=(n>=N)<<2|(e>=k)<<1|i>=I)&&(R=b[b.length-1],b[b.length-1]=b[b.length-1-A],b[b.length-1-A]=R)}else{var L=i-+this._x.call(null,M.data),U=e-+this._y.call(null,M.data),O=n-+this._z.call(null,M.data),F=L*L+U*U+O*O;if(F<r){var H=Math.sqrt(r=F);a=i-H,o=e-H,l=n-H,x=i+H,S=e+H,T=n+H,s=M.data}}return s}const z0t=(i,e,n,r,s,a)=>Math.sqrt((i-r)**2+(e-s)**2+(n-a)**2);function B0t(i,e,n,r){const s=[],a=i-r,o=e-r,l=n-r,u=i+r,f=e+r,d=n+r;return this.visit((m,y,_,x,S,T,b)=>{if(!m.length)do{const M=m.data;z0t(i,e,n,this._x(M),this._y(M),this._z(M))<=r&&s.push(M)}while(m=m.next);return y>u||_>f||x>d||S<a||T<o||b<l}),s}function F0t(i){if(isNaN(y=+this._x.call(null,i))||isNaN(_=+this._y.call(null,i))||isNaN(x=+this._z.call(null,i)))return this;var e,n=this._root,r,s,a,o=this._x0,l=this._y0,u=this._z0,f=this._x1,d=this._y1,m=this._z1,y,_,x,S,T,b,M,R,A,I,k;if(!n)return this;if(n.length)for(;;){if((M=y>=(S=(o+f)/2))?o=S:f=S,(R=_>=(T=(l+d)/2))?l=T:d=T,(A=x>=(b=(u+m)/2))?u=b:m=b,e=n,!(n=n[I=A<<2|R<<1|M]))return this;if(!n.length)break;(e[I+1&7]||e[I+2&7]||e[I+3&7]||e[I+4&7]||e[I+5&7]||e[I+6&7]||e[I+7&7])&&(r=e,k=I)}for(;n.data!==i;)if(s=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,s?(a?s.next=a:delete s.next,this):e?(a?e[I]=a:delete e[I],(n=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&n===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[k]=n:this._root=n),this):(this._root=a,this)}function V0t(i){for(var e=0,n=i.length;e<n;++e)this.remove(i[e]);return this}function H0t(){return this._root}function G0t(){var i=0;return this.visit(function(e){if(!e.length)do++i;while(e=e.next)}),i}function j0t(i){var e=[],n,r=this._root,s,a,o,l,u,f,d;for(r&&e.push(new Qi(r,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=e.pop();)if(!i(r=n.node,a=n.x0,o=n.y0,l=n.z0,u=n.x1,f=n.y1,d=n.z1)&&r.length){var m=(a+u)/2,y=(o+f)/2,_=(l+d)/2;(s=r[7])&&e.push(new Qi(s,m,y,_,u,f,d)),(s=r[6])&&e.push(new Qi(s,a,y,_,m,f,d)),(s=r[5])&&e.push(new Qi(s,m,o,_,u,y,d)),(s=r[4])&&e.push(new Qi(s,a,o,_,m,y,d)),(s=r[3])&&e.push(new Qi(s,m,y,l,u,f,_)),(s=r[2])&&e.push(new Qi(s,a,y,l,m,f,_)),(s=r[1])&&e.push(new Qi(s,m,o,l,u,y,_)),(s=r[0])&&e.push(new Qi(s,a,o,l,m,y,_))}return this}function q0t(i){var e=[],n=[],r;for(this._root&&e.push(new Qi(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();){var s=r.node;if(s.length){var a,o=r.x0,l=r.y0,u=r.z0,f=r.x1,d=r.y1,m=r.z1,y=(o+f)/2,_=(l+d)/2,x=(u+m)/2;(a=s[0])&&e.push(new Qi(a,o,l,u,y,_,x)),(a=s[1])&&e.push(new Qi(a,y,l,u,f,_,x)),(a=s[2])&&e.push(new Qi(a,o,_,u,y,d,x)),(a=s[3])&&e.push(new Qi(a,y,_,u,f,d,x)),(a=s[4])&&e.push(new Qi(a,o,l,x,y,_,m)),(a=s[5])&&e.push(new Qi(a,y,l,x,f,_,m)),(a=s[6])&&e.push(new Qi(a,o,_,x,y,d,m)),(a=s[7])&&e.push(new Qi(a,y,_,x,f,d,m))}n.push(r)}for(;r=n.pop();)i(r.node,r.x0,r.y0,r.z0,r.x1,r.y1,r.z1);return this}function $0t(i){return i[0]}function W0t(i){return arguments.length?(this._x=i,this):this._x}function X0t(i){return i[1]}function Y0t(i){return arguments.length?(this._y=i,this):this._y}function K0t(i){return i[2]}function Z0t(i){return arguments.length?(this._z=i,this):this._z}function sq(i,e,n,r){var s=new ZL(e??$0t,n??X0t,r??K0t,NaN,NaN,NaN,NaN,NaN,NaN);return i==null?s:s.addAll(i)}function ZL(i,e,n,r,s,a,o,l,u){this._x=i,this._y=e,this._z=n,this._x0=r,this._y0=s,this._z0=a,this._x1=o,this._y1=l,this._z1=u,this._root=void 0}function L5(i){for(var e={data:i.data},n=e;i=i.next;)n=n.next={data:i.data};return e}var ya=sq.prototype=ZL.prototype;ya.copy=function(){var i=new ZL(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,n,r;if(!e)return i;if(!e.length)return i._root=L5(e),i;for(n=[{source:e,target:i._root=new Array(8)}];e=n.pop();)for(var s=0;s<8;++s)(r=e.source[s])&&(r.length?n.push({source:r,target:e.target[s]=new Array(8)}):e.target[s]=L5(r));return i};ya.add=D0t;ya.addAll=P0t;ya.cover=N0t;ya.data=L0t;ya.extent=U0t;ya.find=k0t;ya.findAllWithinRadius=B0t;ya.remove=F0t;ya.removeAll=V0t;ya.root=H0t;ya.size=G0t;ya.visit=j0t;ya.visitAfter=q0t;ya.x=W0t;ya.y=Y0t;ya.z=Z0t;function ed(i){return function(){return i}}function qh(i){return(i()-.5)*1e-6}function Q0t(i){return i.index}function U5(i,e){var n=i.get(e);if(!n)throw new Error("node not found: "+e);return n}function aq(i){var e=Q0t,n=y,r,s=ed(30),a,o,l,u,f,d,m=1;i==null&&(i=[]);function y(b){return 1/Math.min(u[b.source.index],u[b.target.index])}function _(b){for(var M=0,R=i.length;M<m;++M)for(var A=0,I,k,N,L=0,U=0,O=0,F,H;A<R;++A)I=i[A],k=I.source,N=I.target,L=N.x+N.vx-k.x-k.vx||qh(d),l>1&&(U=N.y+N.vy-k.y-k.vy||qh(d)),l>2&&(O=N.z+N.vz-k.z-k.vz||qh(d)),F=Math.sqrt(L*L+U*U+O*O),F=(F-a[A])/F*b*r[A],L*=F,U*=F,O*=F,N.vx-=L*(H=f[A]),l>1&&(N.vy-=U*H),l>2&&(N.vz-=O*H),k.vx+=L*(H=1-H),l>1&&(k.vy+=U*H),l>2&&(k.vz+=O*H)}function x(){if(o){var b,M=o.length,R=i.length,A=new Map(o.map((k,N)=>[e(k,N,o),k])),I;for(b=0,u=new Array(M);b<R;++b)I=i[b],I.index=b,typeof I.source!="object"&&(I.source=U5(A,I.source)),typeof I.target!="object"&&(I.target=U5(A,I.target)),u[I.source.index]=(u[I.source.index]||0)+1,u[I.target.index]=(u[I.target.index]||0)+1;for(b=0,f=new Array(R);b<R;++b)I=i[b],f[b]=u[I.source.index]/(u[I.source.index]+u[I.target.index]);r=new Array(R),S(),a=new Array(R),T()}}function S(){if(o)for(var b=0,M=i.length;b<M;++b)r[b]=+n(i[b],b,i)}function T(){if(o)for(var b=0,M=i.length;b<M;++b)a[b]=+s(i[b],b,i)}return _.initialize=function(b,...M){o=b,d=M.find(R=>typeof R=="function")||Math.random,l=M.find(R=>[1,2,3].includes(R))||2,x()},_.links=function(b){return arguments.length?(i=b,x(),_):i},_.id=function(b){return arguments.length?(e=b,_):e},_.iterations=function(b){return arguments.length?(m=+b,_):m},_.strength=function(b){return arguments.length?(n=typeof b=="function"?b:ed(+b),S(),_):n},_.distance=function(b){return arguments.length?(s=typeof b=="function"?b:ed(+b),T(),_):s},_}var J0t={value:()=>{}};function eE(){for(var i=0,e=arguments.length,n={},r;i<e;++i){if(!(r=arguments[i]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new bA(n)}function bA(i){this._=i}function t_t(i,e){return i.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}bA.prototype=eE.prototype={constructor:bA,on:function(i,e){var n=this._,r=t_t(i+"",n),s,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((s=(i=r[a]).type)&&(s=e_t(n[s],i.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(s=(i=r[a]).type)n[s]=k5(n[s],i.name,e);else if(e==null)for(s in n)n[s]=k5(n[s],i.name,null);return this},copy:function(){var i={},e=this._;for(var n in e)i[n]=e[n].slice();return new bA(i)},call:function(i,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(a=this._[i],r=0,s=a.length;r<s;++r)a[r].value.apply(e,n)},apply:function(i,e,n){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var r=this._[i],s=0,a=r.length;s<a;++s)r[s].value.apply(e,n)}};function e_t(i,e){for(var n=0,r=i.length,s;n<r;++n)if((s=i[n]).name===e)return s.value}function k5(i,e,n){for(var r=0,s=i.length;r<s;++r)if(i[r].name===e){i[r]=J0t,i=i.slice(0,r).concat(i.slice(r+1));break}return n!=null&&i.push({name:e,value:n}),i}var p_=0,jx=0,yx=0,oq=1e3,ZM,qx,QM=0,by=0,j2=0,cS=typeof performance=="object"&&performance.now?performance:Date,lq=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function QL(){return by||(lq(n_t),by=cS.now()+j2)}function n_t(){by=0}function JM(){this._call=this._time=this._next=null}JM.prototype=JL.prototype={constructor:JM,restart:function(i,e,n){if(typeof i!="function")throw new TypeError("callback is not a function");n=(n==null?QL():+n)+(e==null?0:+e),!this._next&&qx!==this&&(qx?qx._next=this:ZM=this,qx=this),this._call=i,this._time=n,IP()},stop:function(){this._call&&(this._call=null,this._time=1/0,IP())}};function JL(i,e,n){var r=new JM;return r.restart(i,e,n),r}function i_t(){QL(),++p_;for(var i=ZM,e;i;)(e=by-i._time)>=0&&i._call.call(void 0,e),i=i._next;--p_}function z5(){by=(QM=cS.now())+j2,p_=jx=0;try{i_t()}finally{p_=0,s_t(),by=0}}function r_t(){var i=cS.now(),e=i-QM;e>oq&&(j2-=e,QM=i)}function s_t(){for(var i,e=ZM,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),i=e,e=e._next):(n=e._next,e._next=null,e=i?i._next=n:ZM=n);qx=i,IP(r)}function IP(i){if(!p_){jx&&(jx=clearTimeout(jx));var e=i-by;e>24?(i<1/0&&(jx=setTimeout(z5,i-cS.now()-j2)),yx&&(yx=clearInterval(yx))):(yx||(QM=cS.now(),yx=setInterval(r_t,oq)),p_=1,lq(z5))}}function B5(i,e,n){var r=new JM;return e=e==null?0:+e,r.restart(s=>{r.stop(),i(s+e)},e,n),r}const a_t=1664525,o_t=1013904223,F5=4294967296;function l_t(){let i=1;return()=>(i=(a_t*i+o_t)%F5)/F5}var V5=3;function PI(i){return i.x}function H5(i){return i.y}function u_t(i){return i.z}var c_t=10,f_t=Math.PI*(3-Math.sqrt(5)),h_t=Math.PI*20/(9+Math.sqrt(221));function uq(i,e){e=e||2;var n=Math.min(V5,Math.max(1,Math.round(e))),r,s=1,a=.001,o=1-Math.pow(a,1/300),l=0,u=.6,f=new Map,d=JL(_),m=eE("tick","end"),y=l_t();i==null&&(i=[]);function _(){x(),m.call("tick",r),s<a&&(d.stop(),m.call("end",r))}function x(b){var M,R=i.length,A;b===void 0&&(b=1);for(var I=0;I<b;++I)for(s+=(l-s)*o,f.forEach(function(k){k(s)}),M=0;M<R;++M)A=i[M],A.fx==null?A.x+=A.vx*=u:(A.x=A.fx,A.vx=0),n>1&&(A.fy==null?A.y+=A.vy*=u:(A.y=A.fy,A.vy=0)),n>2&&(A.fz==null?A.z+=A.vz*=u:(A.z=A.fz,A.vz=0));return r}function S(){for(var b=0,M=i.length,R;b<M;++b){if(R=i[b],R.index=b,R.fx!=null&&(R.x=R.fx),R.fy!=null&&(R.y=R.fy),R.fz!=null&&(R.z=R.fz),isNaN(R.x)||n>1&&isNaN(R.y)||n>2&&isNaN(R.z)){var A=c_t*(n>2?Math.cbrt(.5+b):n>1?Math.sqrt(.5+b):b),I=b*f_t,k=b*h_t;n===1?R.x=A:n===2?(R.x=A*Math.cos(I),R.y=A*Math.sin(I)):(R.x=A*Math.sin(I)*Math.cos(k),R.y=A*Math.cos(I),R.z=A*Math.sin(I)*Math.sin(k))}(isNaN(R.vx)||n>1&&isNaN(R.vy)||n>2&&isNaN(R.vz))&&(R.vx=0,n>1&&(R.vy=0),n>2&&(R.vz=0))}}function T(b){return b.initialize&&b.initialize(i,y,n),b}return S(),r={tick:x,restart:function(){return d.restart(_),r},stop:function(){return d.stop(),r},numDimensions:function(b){return arguments.length?(n=Math.min(V5,Math.max(1,Math.round(b))),f.forEach(T),r):n},nodes:function(b){return arguments.length?(i=b,S(),f.forEach(T),r):i},alpha:function(b){return arguments.length?(s=+b,r):s},alphaMin:function(b){return arguments.length?(a=+b,r):a},alphaDecay:function(b){return arguments.length?(o=+b,r):+o},alphaTarget:function(b){return arguments.length?(l=+b,r):l},velocityDecay:function(b){return arguments.length?(u=1-b,r):1-u},randomSource:function(b){return arguments.length?(y=b,f.forEach(T),r):y},force:function(b,M){return arguments.length>1?(M==null?f.delete(b):f.set(b,T(M)),r):f.get(b)},find:function(){var b=Array.prototype.slice.call(arguments),M=b.shift()||0,R=(n>1?b.shift():null)||0,A=(n>2?b.shift():null)||0,I=b.shift()||1/0,k=0,N=i.length,L,U,O,F,H,V;for(I*=I,k=0;k<N;++k)H=i[k],L=M-H.x,U=R-(H.y||0),O=A-(H.z||0),F=L*L+U*U+O*O,F<I&&(V=H,I=F);return V},on:function(b,M){return arguments.length>1?(m.on(b,M),r):m.on(b)}}}function cq(){var i,e,n,r,s,a=ed(-30),o,l=1,u=1/0,f=.81;function d(x){var S,T=i.length,b=(e===1?eq(i,PI):e===2?iq(i,PI,H5):e===3?sq(i,PI,H5,u_t):null).visitAfter(y);for(s=x,S=0;S<T;++S)n=i[S],b.visit(_)}function m(){if(i){var x,S=i.length,T;for(o=new Array(S),x=0;x<S;++x)T=i[x],o[T.index]=+a(T,x,i)}}function y(x){var S=0,T,b,M=0,R,A,I,k,N=x.length;if(N){for(R=A=I=k=0;k<N;++k)(T=x[k])&&(b=Math.abs(T.value))&&(S+=T.value,M+=b,R+=b*(T.x||0),A+=b*(T.y||0),I+=b*(T.z||0));S*=Math.sqrt(4/N),x.x=R/M,e>1&&(x.y=A/M),e>2&&(x.z=I/M)}else{T=x,T.x=T.data.x,e>1&&(T.y=T.data.y),e>2&&(T.z=T.data.z);do S+=o[T.data.index];while(T=T.next)}x.value=S}function _(x,S,T,b,M){if(!x.value)return!0;var R=[T,b,M][e-1],A=x.x-n.x,I=e>1?x.y-n.y:0,k=e>2?x.z-n.z:0,N=R-S,L=A*A+I*I+k*k;if(N*N/f<L)return L<u&&(A===0&&(A=qh(r),L+=A*A),e>1&&I===0&&(I=qh(r),L+=I*I),e>2&&k===0&&(k=qh(r),L+=k*k),L<l&&(L=Math.sqrt(l*L)),n.vx+=A*x.value*s/L,e>1&&(n.vy+=I*x.value*s/L),e>2&&(n.vz+=k*x.value*s/L)),!0;if(x.length||L>=u)return;(x.data!==n||x.next)&&(A===0&&(A=qh(r),L+=A*A),e>1&&I===0&&(I=qh(r),L+=I*I),e>2&&k===0&&(k=qh(r),L+=k*k),L<l&&(L=Math.sqrt(l*L)));do x.data!==n&&(N=o[x.data.index]*s/L,n.vx+=A*N,e>1&&(n.vy+=I*N),e>2&&(n.vz+=k*N));while(x=x.next)}return d.initialize=function(x,...S){i=x,r=S.find(T=>typeof T=="function")||Math.random,e=S.find(T=>[1,2,3].includes(T))||2,m()},d.strength=function(x){return arguments.length?(a=typeof x=="function"?x:ed(+x),m(),d):a},d.distanceMin=function(x){return arguments.length?(l=x*x,d):Math.sqrt(l)},d.distanceMax=function(x){return arguments.length?(u=x*x,d):Math.sqrt(u)},d.theta=function(x){return arguments.length?(f=x*x,d):Math.sqrt(f)},d}function fq(i,e,n,r){var s,a,o=ed(.1),l,u;typeof i!="function"&&(i=ed(+i)),e==null&&(e=0),n==null&&(n=0),r==null&&(r=0);function f(m){for(var y=0,_=s.length;y<_;++y){var x=s[y],S=x.x-e||1e-6,T=(x.y||0)-n||1e-6,b=(x.z||0)-r||1e-6,M=Math.sqrt(S*S+T*T+b*b),R=(u[y]-M)*l[y]*m/M;x.vx+=S*R,a>1&&(x.vy+=T*R),a>2&&(x.vz+=b*R)}}function d(){if(s){var m,y=s.length;for(l=new Array(y),u=new Array(y),m=0;m<y;++m)u[m]=+i(s[m],m,s),l[m]=isNaN(u[m])?0:+o(s[m],m,s)}}return f.initialize=function(m,...y){s=m,a=y.find(_=>[1,2,3].includes(_))||2,d()},f.strength=function(m){return arguments.length?(o=typeof m=="function"?m:ed(+m),d(),f):o},f.radius=function(m){return arguments.length?(i=typeof m=="function"?m:ed(+m),d(),f):i},f.x=function(m){return arguments.length?(e=+m,f):e},f.y=function(m){return arguments.length?(n=+m,f):n},f.z=function(m){return arguments.length?(r=+m,f):r},f}var NI,G5;function tU(){if(G5)return NI;G5=1,NI=function(r){e(r);var s=i(r);return r.on=s.on,r.off=s.off,r.fire=s.fire,r};function i(n){var r=Object.create(null);return{on:function(s,a,o){if(typeof a!="function")throw new Error("callback is expected to be a function");var l=r[s];return l||(l=r[s]=[]),l.push({callback:a,ctx:o}),n},off:function(s,a){var o=typeof s>"u";if(o)return r=Object.create(null),n;if(r[s]){var l=typeof a!="function";if(l)delete r[s];else for(var u=r[s],f=0;f<u.length;++f)u[f].callback===a&&u.splice(f,1)}return n},fire:function(s){var a=r[s];if(!a)return n;var o;arguments.length>1&&(o=Array.prototype.splice.call(arguments,1));for(var l=0;l<a.length;++l){var u=a[l];u.callback.apply(u.ctx,o)}return n}}}function e(n){if(!n)throw new Error("Eventify cannot use falsy object as events subject");for(var r=["on","fire","off"],s=0;s<r.length;++s)if(n.hasOwnProperty(r[s]))throw new Error("Subject cannot be eventified, since it already has property '"+r[s]+"'")}return NI}var LI,j5;function d_t(){if(j5)return LI;j5=1,LI=e;var i=tU();function e(o){if(o=o||{},"uniqueLinkId"in o&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),o.multigraph=o.uniqueLinkId),o.multigraph===void 0&&(o.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var l=new Map,u=new Map,f={},d=0,m=o.multigraph?O:U,y=[],_=yt,x=yt,S=yt,T=yt,b={version:20,addNode:I,addLink:L,removeLink:X,removeNode:N,getNode:k,getNodeCount:F,getLinkCount:H,getEdgeCount:H,getLinksCount:H,getNodesCount:F,getLinks:V,forEachNode:ht,forEachLinkedNode:et,forEachLink:K,beginUpdate:S,endUpdate:T,clear:W,hasLink:q,hasNode:k,getLink:q};return i(b),M(),b;function M(){var ft=b.on;b.on=gt;function gt(){return b.beginUpdate=S=xt,b.endUpdate=T=nt,_=R,x=A,b.on=ft,ft.apply(b,arguments)}}function R(ft,gt){y.push({link:ft,changeType:gt})}function A(ft,gt){y.push({node:ft,changeType:gt})}function I(ft,gt){if(ft===void 0)throw new Error("Invalid node identifier");S();var wt=k(ft);return wt?(wt.data=gt,x(wt,"update")):(wt=new n(ft,gt),x(wt,"add")),l.set(ft,wt),T(),wt}function k(ft){return l.get(ft)}function N(ft){var gt=k(ft);if(!gt)return!1;S();var wt=gt.links;return wt&&(wt.forEach(J),gt.links=null),l.delete(ft),x(gt,"remove"),T(),!0}function L(ft,gt,wt){S();var Kt=k(ft)||I(ft),zt=k(gt)||I(gt),te=m(ft,gt,wt),Pt=u.has(te.id);return u.set(te.id,te),r(Kt,te),ft!==gt&&r(zt,te),_(te,Pt?"update":"add"),T(),te}function U(ft,gt,wt){var Kt=a(ft,gt),zt=u.get(Kt);return zt?(zt.data=wt,zt):new s(ft,gt,wt,Kt)}function O(ft,gt,wt){var Kt=a(ft,gt),zt=f.hasOwnProperty(Kt);if(zt||q(ft,gt)){zt||(f[Kt]=0);var te="@"+ ++f[Kt];Kt=a(ft+te,gt+te)}return new s(ft,gt,wt,Kt)}function F(){return l.size}function H(){return u.size}function V(ft){var gt=k(ft);return gt?gt.links:null}function X(ft,gt){return gt!==void 0&&(ft=q(ft,gt)),J(ft)}function J(ft){if(!ft||!u.get(ft.id))return!1;S(),u.delete(ft.id);var gt=k(ft.fromId),wt=k(ft.toId);return gt&&gt.links.delete(ft),wt&&wt.links.delete(ft),_(ft,"remove"),T(),!0}function q(ft,gt){if(!(ft===void 0||gt===void 0))return u.get(a(ft,gt))}function W(){S(),ht(function(ft){N(ft.id)}),T()}function K(ft){if(typeof ft=="function")for(var gt=u.values(),wt=gt.next();!wt.done;){if(ft(wt.value))return!0;wt=gt.next()}}function et(ft,gt,wt){var Kt=k(ft);if(Kt&&Kt.links&&typeof gt=="function")return wt?dt(Kt.links,ft,gt):Q(Kt.links,ft,gt)}function Q(ft,gt,wt){for(var Kt,zt=ft.values(),te=zt.next();!te.done;){var Pt=te.value,Ht=Pt.fromId===gt?Pt.toId:Pt.fromId;if(Kt=wt(l.get(Ht),Pt),Kt)return!0;te=zt.next()}}function dt(ft,gt,wt){for(var Kt,zt=ft.values(),te=zt.next();!te.done;){var Pt=te.value;if(Pt.fromId===gt&&(Kt=wt(l.get(Pt.toId),Pt),Kt))return!0;te=zt.next()}}function yt(){}function xt(){d+=1}function nt(){d-=1,d===0&&y.length>0&&(b.fire("changed",y),y.length=0)}function ht(ft){if(typeof ft!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+ft);for(var gt=l.values(),wt=gt.next();!wt.done;){if(ft(wt.value))return!0;wt=gt.next()}}}function n(o,l){this.id=o,this.links=null,this.data=l}function r(o,l){o.links?o.links.add(l):o.links=new Set([l])}function s(o,l,u,f){this.fromId=o,this.toId=l,this.data=u,this.id=f}function a(o,l){return o.toString()+" "+l.toString()}return LI}var p_t=d_t();const m_t=fm(p_t);var Dw={exports:{}},a0={exports:{}},UI,q5;function hq(){return q5||(q5=1,UI=function(e){return e===0?"x":e===1?"y":e===2?"z":"c"+(e+1)}),UI}var kI,$5;function G_(){if($5)return kI;$5=1;const i=hq();return kI=function(n){return r;function r(s,a){let o=a&&a.indent||0,l=a&&a.join!==void 0?a.join:`
`,u=Array(o+1).join(" "),f=[];for(let d=0;d<n;++d){let m=i(d),y=d===0?"":u;f.push(y+s.replace(/{var}/g,m))}return f.join(l)}},kI}var W5;function g_t(){if(W5)return a0.exports;W5=1;const i=G_();a0.exports=e,a0.exports.generateCreateBodyFunctionBody=n,a0.exports.getVectorCode=s,a0.exports.getBodyCode=r;function e(a,o){let l=n(a,o),{Body:u}=new Function(l)();return u}function n(a,o){return`
${s(a,o)}
${r(a)}
return {Body: Body, Vector: Vector};
`}function r(a){let o=i(a),l=o("{var}",{join:", "});return`
function Body(${l}) {
  this.isPinned = false;
  this.pos = new Vector(${l});
  this.force = new Vector();
  this.velocity = new Vector();
  this.mass = 1;

  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.reset = function() {
  this.force.reset();
  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.setPosition = function (${l}) {
  ${o("this.pos.{var} = {var} || 0;",{indent:2})}
};`}function s(a,o){let l=i(a),u="";return o&&(u=`${l(`
	   var v{var};
	Object.defineProperty(this, '{var}', {
	  set: function(v) { 
	    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');
	    v{var} = v; 
	  },
	  get: function() { return v{var}; }
	});`)}`),`function Vector(${l("{var}",{join:", "})}) {
  ${u}
    if (typeof arguments[0] === 'object') {
      // could be another vector
      let v = arguments[0];
      ${l('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}
      ${l("this.{var} = v.{var};",{indent:4})}
    } else {
      ${l('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}
    }
  }
  
  Vector.prototype.reset = function () {
    ${l("this.{var} = ",{join:""})}0;
  };`}return a0.exports}var kh={exports:{}},X5;function y_t(){if(X5)return kh.exports;X5=1;const i=G_(),e=hq();kh.exports=n,kh.exports.generateQuadTreeFunctionBody=r,kh.exports.getInsertStackCode=u,kh.exports.getQuadNodeCode=l,kh.exports.isSamePosition=s,kh.exports.getChildBodyCode=o,kh.exports.setChildBodyCode=a;function n(f){let d=r(f);return new Function(d)()}function r(f){let d=i(f),m=Math.pow(2,f);return`
${u()}
${l(f)}
${s(f)}
${o(f)}
${a(f)}

function createQuadTree(options, random) {
  options = options || {};
  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;
  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;

  var gravity = options.gravity;
  var updateQueue = [];
  var insertStack = new InsertStack();
  var theta = options.theta;

  var nodesCache = [];
  var currentInCache = 0;
  var root = newNode();

  return {
    insertBodies: insertBodies,

    /**
     * Gets root node if it is present
     */
    getRoot: function() {
      return root;
    },

    updateBodyForce: update,

    options: function(newOptions) {
      if (newOptions) {
        if (typeof newOptions.gravity === 'number') {
          gravity = newOptions.gravity;
        }
        if (typeof newOptions.theta === 'number') {
          theta = newOptions.theta;
        }

        return this;
      }

      return {
        gravity: gravity,
        theta: theta
      };
    }
  };

  function newNode() {
    // To avoid pressure on GC we reuse nodes.
    var node = nodesCache[currentInCache];
    if (node) {
${S("      node.")}
      node.body = null;
      node.mass = ${d("node.mass_{var} = ",{join:""})}0;
      ${d("node.min_{var} = node.max_{var} = ",{join:""})}0;
    } else {
      node = new QuadNode();
      nodesCache[currentInCache] = node;
    }

    ++currentInCache;
    return node;
  }

  function update(sourceBody) {
    var queue = updateQueue;
    var v;
    ${d("var d{var};",{indent:4})}
    var r; 
    ${d("var f{var} = 0;",{indent:4})}
    var queueLength = 1;
    var shiftIdx = 0;
    var pushIdx = 1;

    queue[0] = root;

    while (queueLength) {
      var node = queue[shiftIdx];
      var body = node.body;

      queueLength -= 1;
      shiftIdx += 1;
      var differentBody = (body !== sourceBody);
      if (body && differentBody) {
        // If the current node is a leaf node (and it is not source body),
        // calculate the force exerted by the current node on body, and add this
        // amount to body's net force.
        ${d("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${d("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Poor man's protection against zero distance.
          ${d("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${d("d{var} * d{var}",{join:" + "})});
        }

        // This is standard gravitation force calculation but we divide
        // by r^3 to save two operations when normalizing force vector.
        v = gravity * body.mass * sourceBody.mass / (r * r * r);
        ${d("f{var} += v * d{var};",{indent:8})}
      } else if (differentBody) {
        // Otherwise, calculate the ratio s / r,  where s is the width of the region
        // represented by the internal node, and r is the distance between the body
        // and the node's center-of-mass
        ${d("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${d("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Sorry about code duplication. I don't want to create many functions
          // right away. Just want to see performance first.
          ${d("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${d("d{var} * d{var}",{join:" + "})});
        }
        // If s / r < , treat this internal node as a single body, and calculate the
        // force it exerts on sourceBody, and add this amount to sourceBody's net force.
        if ((node.max_${e(0)} - node.min_${e(0)}) / r < theta) {
          // in the if statement above we consider node's width only
          // because the region was made into square during tree creation.
          // Thus there is no difference between using width or height.
          v = gravity * node.mass * sourceBody.mass / (r * r * r);
          ${d("f{var} += v * d{var};",{indent:10})}
        } else {
          // Otherwise, run the procedure recursively on each of the current node's children.

          // I intentionally unfolded this loop, to save several CPU cycles.
${x()}
        }
      }
    }

    ${d("sourceBody.force.{var} += f{var};",{indent:4})}
  }

  function insertBodies(bodies) {
    ${d("var {var}min = Number.MAX_VALUE;",{indent:4})}
    ${d("var {var}max = Number.MIN_VALUE;",{indent:4})}
    var i = bodies.length;

    // To reduce quad tree depth we are looking for exact bounding box of all particles.
    while (i--) {
      var pos = bodies[i].pos;
      ${d("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}
      ${d("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}
    }

    // Makes the bounds square.
    var maxSideLength = -Infinity;
    ${d("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}

    currentInCache = 0;
    root = newNode();
    ${d("root.min_{var} = {var}min;",{indent:4})}
    ${d("root.max_{var} = {var}min + maxSideLength;",{indent:4})}

    i = bodies.length - 1;
    if (i >= 0) {
      root.body = bodies[i];
    }
    while (i--) {
      insert(bodies[i], root);
    }
  }

  function insert(newBody) {
    insertStack.reset();
    insertStack.push(root, newBody);

    while (!insertStack.isEmpty()) {
      var stackItem = insertStack.pop();
      var node = stackItem.node;
      var body = stackItem.body;

      if (!node.body) {
        // This is internal node. Update the total mass of the node and center-of-mass.
        ${d("var {var} = body.pos.{var};",{indent:8})}
        node.mass += body.mass;
        ${d("node.mass_{var} += body.mass * {var};",{indent:8})}

        // Recursively insert the body in the appropriate quadrant.
        // But first find the appropriate quadrant.
        var quadIdx = 0; // Assume we are in the 0's quad.
        ${d("var min_{var} = node.min_{var};",{indent:8})}
        ${d("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}

${_(8)}

        var child = getChild(node, quadIdx);

        if (!child) {
          // The node is internal but this quadrant is not taken. Add
          // subnode to it.
          child = newNode();
          ${d("child.min_{var} = min_{var};",{indent:10})}
          ${d("child.max_{var} = max_{var};",{indent:10})}
          child.body = body;

          setChild(node, quadIdx, child);
        } else {
          // continue searching in this quadrant.
          insertStack.push(child, body);
        }
      } else {
        // We are trying to add to the leaf node.
        // We have to convert current leaf into internal node
        // and continue adding two nodes.
        var oldBody = node.body;
        node.body = null; // internal nodes do not cary bodies

        if (isSamePosition(oldBody.pos, body.pos)) {
          // Prevent infinite subdivision by bumping one node
          // anywhere in this quadrant
          var retriesCount = 3;
          do {
            var offset = random.nextDouble();
            ${d("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}

            ${d("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}
            retriesCount -= 1;
            // Make sure we don't bump it out of the box. If we do, next iteration should fix it
          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));

          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {
            // This is very bad, we ran out of precision.
            // if we do not return from the method we'll get into
            // infinite loop here. So we sacrifice correctness of layout, and keep the app running
            // Next layout iteration should get larger bounding box in the first step and fix this
            return;
          }
        }
        // Next iteration should subdivide node further.
        insertStack.push(node, oldBody);
        insertStack.push(node, body);
      }
    }
  }
}
return createQuadTree;

`;function _(T){let b=[],M=Array(T+1).join(" ");for(let R=0;R<f;++R)b.push(M+`if (${e(R)} > max_${e(R)}) {`),b.push(M+`  quadIdx = quadIdx + ${Math.pow(2,R)};`),b.push(M+`  min_${e(R)} = max_${e(R)};`),b.push(M+`  max_${e(R)} = node.max_${e(R)};`),b.push(M+"}");return b.join(`
`)}function x(){let T=Array(11).join(" "),b=[];for(let M=0;M<m;++M)b.push(T+`if (node.quad${M}) {`),b.push(T+`  queue[pushIdx] = node.quad${M};`),b.push(T+"  queueLength += 1;"),b.push(T+"  pushIdx += 1;"),b.push(T+"}");return b.join(`
`)}function S(T){let b=[];for(let M=0;M<m;++M)b.push(`${T}quad${M} = null;`);return b.join(`
`)}}function s(f){let d=i(f);return`
  function isSamePosition(point1, point2) {
    ${d("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}
  
    return ${d("d{var} < 1e-8",{join:" && "})};
  }  
`}function a(f){var d=Math.pow(2,f);return`
function setChild(node, idx, child) {
  ${m()}
}`;function m(){let y=[];for(let _=0;_<d;++_){let x=_===0?"  ":"  else ";y.push(`${x}if (idx === ${_}) node.quad${_} = child;`)}return y.join(`
`)}}function o(f){return`function getChild(node, idx) {
${d()}
  return null;
}`;function d(){let m=[],y=Math.pow(2,f);for(let _=0;_<y;++_)m.push(`  if (idx === ${_}) return node.quad${_};`);return m.join(`
`)}}function l(f){let d=i(f),m=Math.pow(2,f);var y=`
function QuadNode() {
  // body stored inside this node. In quad tree only leaf nodes (by construction)
  // contain bodies:
  this.body = null;

  // Child nodes are stored in quads. Each quad is presented by number:
  // 0 | 1
  // -----
  // 2 | 3
${_("  this.")}

  // Total mass of current node
  this.mass = 0;

  // Center of mass coordinates
  ${d("this.mass_{var} = 0;",{indent:2})}

  // bounding box coordinates
  ${d("this.min_{var} = 0;",{indent:2})}
  ${d("this.max_{var} = 0;",{indent:2})}
}
`;return y;function _(x){let S=[];for(let T=0;T<m;++T)S.push(`${x}quad${T} = null;`);return S.join(`
`)}}function u(){return`
/**
 * Our implementation of QuadTree is non-recursive to avoid GC hit
 * This data structure represent stack of elements
 * which we are trying to insert into quad tree.
 */
function InsertStack () {
    this.stack = [];
    this.popIdx = 0;
}

InsertStack.prototype = {
    isEmpty: function() {
        return this.popIdx === 0;
    },
    push: function (node, body) {
        var item = this.stack[this.popIdx];
        if (!item) {
            // we are trying to avoid memory pressure: create new element
            // only when absolutely necessary
            this.stack[this.popIdx] = new InsertStackElement(node, body);
        } else {
            item.node = node;
            item.body = body;
        }
        ++this.popIdx;
    },
    pop: function () {
        if (this.popIdx > 0) {
            return this.stack[--this.popIdx];
        }
    },
    reset: function () {
        this.popIdx = 0;
    }
};

function InsertStackElement(node, body) {
    this.node = node; // QuadTree node
    this.body = body; // physical body which needs to be inserted to node
}
`}return kh.exports}var Pw={exports:{}},Y5;function v_t(){if(Y5)return Pw.exports;Y5=1,Pw.exports=e,Pw.exports.generateFunctionBody=n;const i=G_();function e(r){let s=n(r);return new Function("bodies","settings","random",s)}function n(r){let s=i(r);return`
  var boundingBox = {
    ${s("min_{var}: 0, max_{var}: 0,",{indent:4})}
  };

  return {
    box: boundingBox,

    update: updateBoundingBox,

    reset: resetBoundingBox,

    getBestNewPosition: function (neighbors) {
      var ${s("base_{var} = 0",{join:", "})};

      if (neighbors.length) {
        for (var i = 0; i < neighbors.length; ++i) {
          let neighborPos = neighbors[i].pos;
          ${s("base_{var} += neighborPos.{var};",{indent:10})}
        }

        ${s("base_{var} /= neighbors.length;",{indent:8})}
      } else {
        ${s("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}
      }

      var springLength = settings.springLength;
      return {
        ${s("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}
      };
    }
  };

  function updateBoundingBox() {
    var i = bodies.length;
    if (i === 0) return; // No bodies - no borders.

    ${s("var max_{var} = -Infinity;",{indent:4})}
    ${s("var min_{var} = Infinity;",{indent:4})}

    while(i--) {
      // this is O(n), it could be done faster with quadtree, if we check the root node bounds
      var bodyPos = bodies[i].pos;
      ${s("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}
      ${s("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}
    }

    ${s("boundingBox.min_{var} = min_{var};",{indent:4})}
    ${s("boundingBox.max_{var} = max_{var};",{indent:4})}
  }

  function resetBoundingBox() {
    ${s("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}
  }
`}return Pw.exports}var Nw={exports:{}},K5;function __t(){if(K5)return Nw.exports;K5=1;const i=G_();Nw.exports=e,Nw.exports.generateCreateDragForceFunctionBody=n;function e(r){let s=n(r);return new Function("options",s)}function n(r){return`
  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');

  return {
    update: function(body) {
      ${i(r)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}
    }
  };
`}return Nw.exports}var Lw={exports:{}},Z5;function b_t(){if(Z5)return Lw.exports;Z5=1;const i=G_();Lw.exports=e,Lw.exports.generateCreateSpringForceFunctionBody=n;function e(r){let s=n(r);return new Function("options","random",s)}function n(r){let s=i(r);return`
  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');
  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');

  return {
    /**
     * Updates forces acting on a spring
     */
    update: function (spring) {
      var body1 = spring.from;
      var body2 = spring.to;
      var length = spring.length < 0 ? options.springLength : spring.length;
      ${s("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}
      var r = Math.sqrt(${s("d{var} * d{var}",{join:" + "})});

      if (r === 0) {
        ${s("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}
        r = Math.sqrt(${s("d{var} * d{var}",{join:" + "})});
      }

      var d = r - length;
      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;

      ${s("body1.force.{var} += coefficient * d{var}",{indent:6})};
      body1.springCount += 1;
      body1.springLength += r;

      ${s("body2.force.{var} -= coefficient * d{var}",{indent:6})};
      body2.springCount += 1;
      body2.springLength += r;
    }
  };
`}return Lw.exports}var Uw={exports:{}},Q5;function x_t(){if(Q5)return Uw.exports;Q5=1;const i=G_();Uw.exports=e,Uw.exports.generateIntegratorFunctionBody=n;function e(r){let s=n(r);return new Function("bodies","timeStep","adaptiveTimeStepWeight",s)}function n(r){let s=i(r);return`
  var length = bodies.length;
  if (length === 0) return 0;

  ${s("var d{var} = 0, t{var} = 0;",{indent:2})}

  for (var i = 0; i < length; ++i) {
    var body = bodies[i];
    if (body.isPinned) continue;

    if (adaptiveTimeStepWeight && body.springCount) {
      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);
    }

    var coeff = timeStep / body.mass;

    ${s("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}
    ${s("var v{var} = body.velocity.{var};",{indent:4})}
    var v = Math.sqrt(${s("v{var} * v{var}",{join:" + "})});

    if (v > 1) {
      // We normalize it so that we move within timeStep range. 
      // for the case when v <= 1 - we let velocity to fade out.
      ${s("body.velocity.{var} = v{var} / v;",{indent:6})}
    }

    ${s("d{var} = timeStep * body.velocity.{var};",{indent:4})}

    ${s("body.pos.{var} += d{var};",{indent:4})}

    ${s("t{var} += Math.abs(d{var});",{indent:4})}
  }

  return (${s("t{var} * t{var}",{join:" + "})})/length;
`}return Uw.exports}var zI,J5;function S_t(){if(J5)return zI;J5=1,zI=i;function i(e,n,r,s){this.from=e,this.to=n,this.length=r,this.coefficient=s}return zI}var BI,tV;function E_t(){if(tV)return BI;tV=1,BI=i;function i(e,n){var r;if(e||(e={}),n){for(r in n)if(n.hasOwnProperty(r)){var s=e.hasOwnProperty(r),a=typeof n[r],o=!s||typeof e[r]!==a;o?e[r]=n[r]:a==="object"&&(e[r]=i(e[r],n[r]))}}return e}return BI}var vx={exports:{}},eV;function T_t(){if(eV)return vx.exports;eV=1,vx.exports=i,vx.exports.random=i,vx.exports.randomIterator=l;function i(u){var f=typeof u=="number"?u:+new Date;return new e(f)}function e(u){this.seed=u}e.prototype.next=o,e.prototype.nextDouble=a,e.prototype.uniform=a,e.prototype.gaussian=n,e.prototype.random=a;function n(){var u,f,d;do f=this.nextDouble()*2-1,d=this.nextDouble()*2-1,u=f*f+d*d;while(u>=1||u===0);return f*Math.sqrt(-2*Math.log(u)/u)}e.prototype.levy=r;function r(){var u=1.5,f=Math.pow(s(1+u)*Math.sin(Math.PI*u/2)/(s((1+u)/2)*u*Math.pow(2,(u-1)/2)),1/u);return this.gaussian()*f/Math.pow(Math.abs(this.gaussian()),1/u)}function s(u){return Math.sqrt(2*Math.PI/u)*Math.pow(1/Math.E*(u+1/(12*u-1/(10*u))),u)}function a(){var u=this.seed;return u=u+2127912214+(u<<12)&4294967295,u=(u^3345072700^u>>>19)&4294967295,u=u+374761393+(u<<5)&4294967295,u=(u+3550635116^u<<9)&4294967295,u=u+4251993797+(u<<3)&4294967295,u=(u^3042594569^u>>>16)&4294967295,this.seed=u,(u&268435455)/268435456}function o(u){return Math.floor(this.nextDouble()*u)}function l(u,f){var d=f||i();if(typeof d.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:y,shuffle:m};function m(){var _,x,S;for(_=u.length-1;_>0;--_)x=d.next(_+1),S=u[x],u[x]=u[_],u[_]=S;return u}function y(_){var x,S,T;for(x=u.length-1;x>0;--x)S=d.next(x+1),T=u[S],u[S]=u[x],u[x]=T,_(T);u.length&&_(u[0])}}return vx.exports}var FI,nV;function iV(){if(nV)return FI;nV=1,FI=l;var i=g_t(),e=y_t(),n=v_t(),r=__t(),s=b_t(),a=x_t(),o={};function l(d){var m=S_t(),y=E_t(),_=tU();if(d){if(d.springCoeff!==void 0)throw new Error("springCoeff was renamed to springCoefficient");if(d.dragCoeff!==void 0)throw new Error("dragCoeff was renamed to dragCoefficient")}d=y(d,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var x=o[d.dimensions];if(!x){var S=d.dimensions;x={Body:i(S,d.debug),createQuadTree:e(S),createBounds:n(S),createDragForce:r(S),createSpringForce:s(S),integrate:a(S)},o[S]=x}var T=x.Body,b=x.createQuadTree,M=x.createBounds,R=x.createDragForce,A=x.createSpringForce,I=x.integrate,k=ht=>new T(ht),N=T_t().random(42),L=[],U=[],O=b(d,N),F=M(L,d,N),H=A(d,N),V=R(d),X=0,J=[],q=new Map,W=0;Q("nbody",xt),Q("spring",nt);var K={bodies:L,quadTree:O,springs:U,settings:d,addForce:Q,removeForce:dt,getForces:yt,step:function(){for(var ht=0;ht<J.length;++ht)J[ht](W);var ft=I(L,d.timeStep,d.adaptiveTimeStepWeight);return W+=1,ft},addBody:function(ht){if(!ht)throw new Error("Body is required");return L.push(ht),ht},addBodyAt:function(ht){if(!ht)throw new Error("Body position is required");var ft=k(ht);return L.push(ft),ft},removeBody:function(ht){if(ht){var ft=L.indexOf(ht);if(!(ft<0))return L.splice(ft,1),L.length===0&&F.reset(),!0}},addSpring:function(ht,ft,gt,wt){if(!ht||!ft)throw new Error("Cannot add null spring to force simulator");typeof gt!="number"&&(gt=-1);var Kt=new m(ht,ft,gt,wt>=0?wt:-1);return U.push(Kt),Kt},getTotalMovement:function(){return X},removeSpring:function(ht){if(ht){var ft=U.indexOf(ht);if(ft>-1)return U.splice(ft,1),!0}},getBestNewBodyPosition:function(ht){return F.getBestNewPosition(ht)},getBBox:et,getBoundingBox:et,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(ht){return ht!==void 0?(d.gravity=ht,O.options({gravity:ht}),this):d.gravity},theta:function(ht){return ht!==void 0?(d.theta=ht,O.options({theta:ht}),this):d.theta},random:N};return u(d,K),_(K),K;function et(){return F.update(),F.box}function Q(ht,ft){if(q.has(ht))throw new Error("Force "+ht+" is already added");q.set(ht,ft),J.push(ft)}function dt(ht){var ft=J.indexOf(q.get(ht));ft<0||(J.splice(ft,1),q.delete(ht))}function yt(){return q}function xt(){if(L.length!==0){O.insertBodies(L);for(var ht=L.length;ht--;){var ft=L[ht];ft.isPinned||(ft.reset(),O.updateBodyForce(ft),V.update(ft))}}}function nt(){for(var ht=U.length;ht--;)H.update(U[ht])}}function u(d,m){for(var y in d)f(d,m,y)}function f(d,m,y){if(d.hasOwnProperty(y)&&typeof m[y]!="function"){var _=Number.isFinite(d[y]);_?m[y]=function(x){if(x!==void 0){if(!Number.isFinite(x))throw new Error("Value of "+y+" should be a valid number.");return d[y]=x,m}return d[y]}:m[y]=function(x){return x!==void 0?(d[y]=x,m):d[y]}}}return FI}var rV;function w_t(){if(rV)return Dw.exports;rV=1,Dw.exports=e,Dw.exports.simulator=iV();var i=tU();function e(r,s){if(!r)throw new Error("Graph structure cannot be undefined");var a=s&&s.createSimulator||iV(),o=a(s);if(Array.isArray(s))throw new Error("Physics settings is expected to be an object");var l=r.version>19?q:J;s&&typeof s.nodeMass=="function"&&(l=s.nodeMass);var u=new Map,f={},d=0,m=o.settings.springTransform||n;k(),R();var y=!1,_={step:function(){if(d===0)return x(!0),!0;var W=o.step();_.lastMove=W,_.fire("step");var K=W/d,et=K<=.01;return x(et),et},getNodePosition:function(W){return X(W).pos},setNodePosition:function(W){var K=X(W);K.setPosition.apply(K,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(W){var K=f[W];if(K)return{from:K.from.pos,to:K.to.pos}},getGraphRect:function(){return o.getBBox()},forEachBody:S,pinNode:function(W,K){var et=X(W.id);et.isPinned=!!K},isNodePinned:function(W){return X(W.id).isPinned},dispose:function(){r.off("changed",I),_.fire("disposed")},getBody:M,getSpring:b,getForceVectorLength:T,simulator:o,graph:r,lastMove:0};return i(_),_;function x(W){y!==W&&(y=W,A(W))}function S(W){u.forEach(W)}function T(){var W=0,K=0;return S(function(et){W+=Math.abs(et.force.x),K+=Math.abs(et.force.y)}),Math.sqrt(W*W+K*K)}function b(W,K){var et;if(K===void 0)typeof W!="object"?et=W:et=W.id;else{var Q=r.hasLink(W,K);if(!Q)return;et=Q.id}return f[et]}function M(W){return u.get(W)}function R(){r.on("changed",I)}function A(W){_.fire("stable",W)}function I(W){for(var K=0;K<W.length;++K){var et=W[K];et.changeType==="add"?(et.node&&N(et.node.id),et.link&&U(et.link)):et.changeType==="remove"&&(et.node&&L(et.node),et.link&&O(et.link))}d=r.getNodesCount()}function k(){d=0,r.forEachNode(function(W){N(W.id),d+=1}),r.forEachLink(U)}function N(W){var K=u.get(W);if(!K){var et=r.getNode(W);if(!et)throw new Error("initBody() was called with unknown node id");var Q=et.position;if(!Q){var dt=F(et);Q=o.getBestNewBodyPosition(dt)}K=o.addBodyAt(Q),K.id=W,u.set(W,K),H(W),V(et)&&(K.isPinned=!0)}}function L(W){var K=W.id,et=u.get(K);et&&(u.delete(K),o.removeBody(et))}function U(W){H(W.fromId),H(W.toId);var K=u.get(W.fromId),et=u.get(W.toId),Q=o.addSpring(K,et,W.length);m(W,Q),f[W.id]=Q}function O(W){var K=f[W.id];if(K){var et=r.getNode(W.fromId),Q=r.getNode(W.toId);et&&H(et.id),Q&&H(Q.id),delete f[W.id],o.removeSpring(K)}}function F(W){var K=[];if(!W.links)return K;for(var et=Math.min(W.links.length,2),Q=0;Q<et;++Q){var dt=W.links[Q],yt=dt.fromId!==W.id?u.get(dt.fromId):u.get(dt.toId);yt&&yt.pos&&K.push(yt)}return K}function H(W){var K=u.get(W);if(K.mass=l(W),Number.isNaN(K.mass))throw new Error("Node mass should be a number")}function V(W){return W&&(W.isPinned||W.data&&W.data.isPinned)}function X(W){var K=u.get(W);return K||(N(W),K=u.get(W)),K}function J(W){var K=r.getLinks(W);return K?1+K.length/3:1}function q(W){var K=r.getLinks(W);return K?1+K.size/3:1}}function n(){}return Dw.exports}var A_t=w_t();const M_t=fm(A_t);function tC(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var C_t=typeof global=="object"&&global&&global.Object===Object&&global,R_t=typeof self=="object"&&self&&self.Object===Object&&self,dq=C_t||R_t||Function("return this")(),VI=function(){return dq.Date.now()},O_t=/\s/;function I_t(i){for(var e=i.length;e--&&O_t.test(i.charAt(e)););return e}var D_t=/^\s+/;function P_t(i){return i&&i.slice(0,I_t(i)+1).replace(D_t,"")}var eC=dq.Symbol,pq=Object.prototype,N_t=pq.hasOwnProperty,L_t=pq.toString,_x=eC?eC.toStringTag:void 0;function U_t(i){var e=N_t.call(i,_x),n=i[_x];try{i[_x]=void 0;var r=!0}catch{}var s=L_t.call(i);return r&&(e?i[_x]=n:delete i[_x]),s}var k_t=Object.prototype,z_t=k_t.toString;function B_t(i){return z_t.call(i)}var F_t="[object Null]",V_t="[object Undefined]",sV=eC?eC.toStringTag:void 0;function H_t(i){return i==null?i===void 0?V_t:F_t:sV&&sV in Object(i)?U_t(i):B_t(i)}function G_t(i){return i!=null&&typeof i=="object"}var j_t="[object Symbol]";function q_t(i){return typeof i=="symbol"||G_t(i)&&H_t(i)==j_t}var aV=NaN,$_t=/^[-+]0x[0-9a-f]+$/i,W_t=/^0b[01]+$/i,X_t=/^0o[0-7]+$/i,Y_t=parseInt;function oV(i){if(typeof i=="number")return i;if(q_t(i))return aV;if(tC(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=tC(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=P_t(i);var n=W_t.test(i);return n||X_t.test(i)?Y_t(i.slice(2),n?2:8):$_t.test(i)?aV:+i}var K_t="Expected a function",Z_t=Math.max,Q_t=Math.min;function mq(i,e,n){var r,s,a,o,l,u,f=0,d=!1,m=!1,y=!0;if(typeof i!="function")throw new TypeError(K_t);e=oV(e)||0,tC(n)&&(d=!!n.leading,m="maxWait"in n,a=m?Z_t(oV(n.maxWait)||0,e):a,y="trailing"in n?!!n.trailing:y);function _(k){var N=r,L=s;return r=s=void 0,f=k,o=i.apply(L,N),o}function x(k){return f=k,l=setTimeout(b,e),d?_(k):o}function S(k){var N=k-u,L=k-f,U=e-N;return m?Q_t(U,a-L):U}function T(k){var N=k-u,L=k-f;return u===void 0||N>=e||N<0||m&&L>=a}function b(){var k=VI();if(T(k))return M(k);l=setTimeout(b,S(k))}function M(k){return l=void 0,y&&r?_(k):(r=s=void 0,o)}function R(){l!==void 0&&clearTimeout(l),f=0,r=u=s=l=void 0}function A(){return l===void 0?o:M(VI())}function I(){var k=VI(),N=T(k);if(r=arguments,s=this,u=k,N){if(l===void 0)return x(u);if(m)return clearTimeout(l),l=setTimeout(b,e),_(u)}return l===void 0&&(l=setTimeout(b,e)),o}return I.cancel=R,I.flush=A,I}function lV(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=Array(e);n<e;n++)r[n]=i[n];return r}function J_t(i){if(Array.isArray(i))return i}function tbt(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function ebt(i,e,n){return Object.defineProperty(i,"prototype",{writable:!1}),i}function nbt(i,e){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,f=!1;try{if(a=(n=n.call(i)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(d){f=!0,s=d}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw s}}return l}}function ibt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rbt(i,e){return J_t(i)||nbt(i,e)||sbt(i,e)||ibt()}function sbt(i,e){if(i){if(typeof i=="string")return lV(i,e);var n={}.toString.call(i).slice(8,-1);return n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set"?Array.from(i):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lV(i,e):void 0}}var abt=ebt(function i(e,n){var r=n.default,s=r===void 0?null:r,a=n.triggerUpdate,o=a===void 0?!0:a,l=n.onChange,u=l===void 0?function(f,d){}:l;tbt(this,i),this.name=e,this.defaultVal=s,this.triggerUpdate=o,this.onChange=u});function q2(i){var e=i.stateInit,n=e===void 0?function(){return{}}:e,r=i.props,s=r===void 0?{}:r,a=i.methods,o=a===void 0?{}:a,l=i.aliases,u=l===void 0?{}:l,f=i.init,d=f===void 0?function(){}:f,m=i.update,y=m===void 0?function(){}:m,_=Object.keys(s).map(function(x){return new abt(x,s[x])});return function x(){for(var S=arguments.length,T=new Array(S),b=0;b<S;b++)T[b]=arguments[b];var M=!!(this instanceof x&&this.constructor),R=M?T.shift():void 0,A=T[0],I=A===void 0?{}:A,k=Object.assign({},n instanceof Function?n(I):n,{initialised:!1}),N={};function L(F){return U(F,I),O(),L}var U=function(H,V){d.call(L,H,k,V),k.initialised=!0},O=mq(function(){k.initialised&&(y.call(L,k,N),N={})},1);return _.forEach(function(F){L[F.name]=H(F);function H(V){var X=V.name,J=V.triggerUpdate,q=J===void 0?!1:J,W=V.onChange,K=W===void 0?function(dt,yt){}:W,et=V.defaultVal,Q=et===void 0?null:et;return function(dt){var yt=k[X];if(!arguments.length)return yt;var xt=dt===void 0?Q:dt;return k[X]=xt,K.call(L,xt,k,yt),!N.hasOwnProperty(X)&&(N[X]=yt),q&&O(),L}}}),Object.keys(o).forEach(function(F){L[F]=function(){for(var H,V=arguments.length,X=new Array(V),J=0;J<V;J++)X[J]=arguments[J];return(H=o[F]).call.apply(H,[L,k].concat(X))}}),Object.entries(u).forEach(function(F){var H=rbt(F,2),V=H[0],X=H[1];return L[V]=L[X]}),L.resetProps=function(){return _.forEach(function(F){L[F.name](F.defaultVal)}),L},L.resetProps(),k._rerender=O,M&&R&&L(R),L}}var $e=function(i){return typeof i=="function"?i:typeof i=="string"?function(e){return e[i]}:function(e){return i}};class uV extends Map{constructor(e,n=ubt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(cV(this,e))}has(e){return super.has(cV(this,e))}set(e,n){return super.set(obt(this,e),n)}delete(e){return super.delete(lbt(this,e))}}function cV({_intern:i,_key:e},n){const r=e(n);return i.has(r)?i.get(r):n}function obt({_intern:i,_key:e},n){const r=e(n);return i.has(r)?i.get(r):(i.set(r,n),n)}function lbt({_intern:i,_key:e},n){const r=e(n);return i.has(r)&&(n=i.get(r),i.delete(r)),n}function ubt(i){return i!==null&&typeof i=="object"?i.valueOf():i}function DP(i,e){let n;if(e===void 0)for(const r of i)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let s of i)(s=e(s,++r,i))!=null&&(n<s||n===void 0&&s>=s)&&(n=s)}return n}function PP(i,e){let n;if(e===void 0)for(const r of i)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let s of i)(s=e(s,++r,i))!=null&&(n>s||n===void 0&&s>=s)&&(n=s)}return n}function cbt(i,e){let n=0;for(let r of i)(r=+r)&&(n+=r);return n}function NP(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=Array(e);n<e;n++)r[n]=i[n];return r}function fbt(i){if(Array.isArray(i))return i}function hbt(i){if(Array.isArray(i))return NP(i)}function gq(i,e,n){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function dbt(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function pbt(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Pa(i,e){return i.get(gq(i,e))}function o0(i,e,n){dbt(i,e),e.set(i,n)}function kw(i,e,n){return i.set(gq(i,e),n),n}function mbt(i,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,Tbt(r.key),r)}}function gbt(i,e,n){return e&&mbt(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function ybt(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function vbt(i,e){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,f=!1;try{if(a=(n=n.call(i)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(d){f=!0,s=d}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw s}}return l}}function _bt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bbt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xbt(i,e){return fbt(i)||vbt(i,e)||yq(i,e)||_bt()}function Sbt(i){return hbt(i)||ybt(i)||yq(i)||bbt()}function Ebt(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var r=n.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function Tbt(i){var e=Ebt(i,"string");return typeof e=="symbol"?e:e+""}function yq(i,e){if(i){if(typeof i=="string")return NP(i,e);var n={}.toString.call(i).slice(8,-1);return n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set"?Array.from(i):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?NP(i,e):void 0}}var l0=new WeakMap,bx=new WeakMap,u0=new WeakMap,HI=new WeakMap,GI=new WeakMap,jI=new WeakMap,wbt=function(){function i(){pbt(this,i),o0(this,l0,new Map),o0(this,bx,new Map),o0(this,u0,function(e){return e}),o0(this,HI,function(){return{}}),o0(this,GI,function(){}),o0(this,jI,function(){})}return gbt(i,[{key:"getObj",value:function(n){return Pa(l0,this).get(Pa(u0,this).call(this,n))}},{key:"getData",value:function(n){return Pa(bx,this).get(n)}},{key:"entries",value:function(){return Sbt(Pa(bx,this).entries()).map(function(n){var r=xbt(n,2),s=r[0],a=r[1];return[a,s]})}},{key:"id",value:function(n){return kw(u0,this,$e(n)),this}},{key:"onCreateObj",value:function(n){return kw(HI,this,n),this}},{key:"onUpdateObj",value:function(n){return kw(GI,this,n),this}},{key:"onRemoveObj",value:function(n){return kw(jI,this,n),this}},{key:"digest",value:function(n){var r=this;n.filter(function(a){return!Pa(l0,r).has(Pa(u0,r).call(r,a))}).forEach(function(a){var o=Pa(HI,r).call(r,a);Pa(l0,r).set(Pa(u0,r).call(r,a),o),Pa(bx,r).set(o,a)});var s=new Map(n.map(function(a){return[Pa(u0,r).call(r,a),a]}));return Pa(l0,this).forEach(function(a,o){s.has(o)?Pa(GI,r).call(r,a,s.get(o)):(Pa(jI,r).call(r,a,o),Pa(l0,r).delete(o),Pa(bx,r).delete(a))}),this}},{key:"clear",value:function(){return this.digest([]),this}}])}();function Abt(i,e){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(e).domain(i);break}return this}const fV=Symbol("implicit");function eU(){var i=new uV,e=[],n=[],r=fV;function s(a){let o=i.get(a);if(o===void 0){if(r!==fV)return r;i.set(a,o=e.push(a)-1)}return n[o%n.length]}return s.domain=function(a){if(!arguments.length)return e.slice();e=[],i=new uV;for(const o of a)i.has(o)||i.set(o,e.push(o)-1);return s},s.range=function(a){return arguments.length?(n=Array.from(a),s):n.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return eU(e,n).unknown(r)},Abt.apply(s,arguments),s}function nU(i,e,n){i.prototype=e.prototype=n,n.constructor=i}function vq(i,e){var n=Object.create(i.prototype);for(var r in e)n[r]=e[r];return n}function nE(){}var fS=.7,nC=1/fS,V0="\\s*([+-]?\\d+)\\s*",hS="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mbt=/^#([0-9a-f]{3,8})$/,Cbt=new RegExp(`^rgb\\(${V0},${V0},${V0}\\)$`),Rbt=new RegExp(`^rgb\\(${zf},${zf},${zf}\\)$`),Obt=new RegExp(`^rgba\\(${V0},${V0},${V0},${hS}\\)$`),Ibt=new RegExp(`^rgba\\(${zf},${zf},${zf},${hS}\\)$`),Dbt=new RegExp(`^hsl\\(${hS},${zf},${zf}\\)$`),Pbt=new RegExp(`^hsla\\(${hS},${zf},${zf},${hS}\\)$`),hV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nU(nE,dS,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:dV,formatHex:dV,formatHex8:Nbt,formatHsl:Lbt,formatRgb:pV,toString:pV});function dV(){return this.rgb().formatHex()}function Nbt(){return this.rgb().formatHex8()}function Lbt(){return _q(this).formatHsl()}function pV(){return this.rgb().formatRgb()}function dS(i){var e,n;return i=(i+"").trim().toLowerCase(),(e=Mbt.exec(i))?(n=e[1].length,e=parseInt(e[1],16),n===6?mV(e):n===3?new tl(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?zw(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?zw(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Cbt.exec(i))?new tl(e[1],e[2],e[3],1):(e=Rbt.exec(i))?new tl(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Obt.exec(i))?zw(e[1],e[2],e[3],e[4]):(e=Ibt.exec(i))?zw(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Dbt.exec(i))?vV(e[1],e[2]/100,e[3]/100,1):(e=Pbt.exec(i))?vV(e[1],e[2]/100,e[3]/100,e[4]):hV.hasOwnProperty(i)?mV(hV[i]):i==="transparent"?new tl(NaN,NaN,NaN,0):null}function mV(i){return new tl(i>>16&255,i>>8&255,i&255,1)}function zw(i,e,n,r){return r<=0&&(i=e=n=NaN),new tl(i,e,n,r)}function Ubt(i){return i instanceof nE||(i=dS(i)),i?(i=i.rgb(),new tl(i.r,i.g,i.b,i.opacity)):new tl}function LP(i,e,n,r){return arguments.length===1?Ubt(i):new tl(i,e,n,r??1)}function tl(i,e,n,r){this.r=+i,this.g=+e,this.b=+n,this.opacity=+r}nU(tl,LP,vq(nE,{brighter(i){return i=i==null?nC:Math.pow(nC,i),new tl(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?fS:Math.pow(fS,i),new tl(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new tl(Jg(this.r),Jg(this.g),Jg(this.b),iC(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gV,formatHex:gV,formatHex8:kbt,formatRgb:yV,toString:yV}));function gV(){return`#${jg(this.r)}${jg(this.g)}${jg(this.b)}`}function kbt(){return`#${jg(this.r)}${jg(this.g)}${jg(this.b)}${jg((isNaN(this.opacity)?1:this.opacity)*255)}`}function yV(){const i=iC(this.opacity);return`${i===1?"rgb(":"rgba("}${Jg(this.r)}, ${Jg(this.g)}, ${Jg(this.b)}${i===1?")":`, ${i})`}`}function iC(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function Jg(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function jg(i){return i=Jg(i),(i<16?"0":"")+i.toString(16)}function vV(i,e,n,r){return r<=0?i=e=n=NaN:n<=0||n>=1?i=e=NaN:e<=0&&(i=NaN),new fc(i,e,n,r)}function _q(i){if(i instanceof fc)return new fc(i.h,i.s,i.l,i.opacity);if(i instanceof nE||(i=dS(i)),!i)return new fc;if(i instanceof fc)return i;i=i.rgb();var e=i.r/255,n=i.g/255,r=i.b/255,s=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,l=a-s,u=(a+s)/2;return l?(e===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-e)/l+2:o=(e-n)/l+4,l/=u<.5?a+s:2-a-s,o*=60):l=u>0&&u<1?0:o,new fc(o,l,u,i.opacity)}function zbt(i,e,n,r){return arguments.length===1?_q(i):new fc(i,e,n,r??1)}function fc(i,e,n,r){this.h=+i,this.s=+e,this.l=+n,this.opacity=+r}nU(fc,zbt,vq(nE,{brighter(i){return i=i==null?nC:Math.pow(nC,i),new fc(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?fS:Math.pow(fS,i),new fc(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,e=isNaN(i)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new tl(qI(i>=240?i-240:i+120,s,r),qI(i,s,r),qI(i<120?i+240:i-120,s,r),this.opacity)},clamp(){return new fc(_V(this.h),Bw(this.s),Bw(this.l),iC(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=iC(this.opacity);return`${i===1?"hsl(":"hsla("}${_V(this.h)}, ${Bw(this.s)*100}%, ${Bw(this.l)*100}%${i===1?")":`, ${i})`}`}}));function _V(i){return i=(i||0)%360,i<0?i+360:i}function Bw(i){return Math.max(0,Math.min(1,i||0))}function qI(i,e,n){return(i<60?e+(n-e)*i/60:i<180?n:i<240?e+(n-e)*(240-i)/60:e)*255}const bq=i=>()=>i;function Bbt(i,e){return function(n){return i+n*e}}function Fbt(i,e,n){return i=Math.pow(i,n),e=Math.pow(e,n)-i,n=1/n,function(r){return Math.pow(i+r*e,n)}}function Vbt(i){return(i=+i)==1?xq:function(e,n){return n-e?Fbt(e,n,i):bq(isNaN(e)?n:e)}}function xq(i,e){var n=e-i;return n?Bbt(i,n):bq(isNaN(i)?e:i)}const bV=function i(e){var n=Vbt(e);function r(s,a){var o=n((s=LP(s)).r,(a=LP(a)).r),l=n(s.g,a.g),u=n(s.b,a.b),f=xq(s.opacity,a.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=u(d),s.opacity=f(d),s+""}}return r.gamma=i,r}(1);function Ip(i,e){return i=+i,e=+e,function(n){return i*(1-n)+e*n}}var UP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$I=new RegExp(UP.source,"g");function Hbt(i){return function(){return i}}function Gbt(i){return function(e){return i(e)+""}}function jbt(i,e){var n=UP.lastIndex=$I.lastIndex=0,r,s,a,o=-1,l=[],u=[];for(i=i+"",e=e+"";(r=UP.exec(i))&&(s=$I.exec(e));)(a=s.index)>n&&(a=e.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,u.push({i:o,x:Ip(r,s)})),n=$I.lastIndex;return n<e.length&&(a=e.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?u[0]?Gbt(u[0].x):Hbt(e):(e=u.length,function(f){for(var d=0,m;d<e;++d)l[(m=u[d]).i]=m.x(f);return l.join("")})}var xV=180/Math.PI,kP={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sq(i,e,n,r,s,a){var o,l,u;return(o=Math.sqrt(i*i+e*e))&&(i/=o,e/=o),(u=i*n+e*r)&&(n-=i*u,r-=e*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),i*r<e*n&&(i=-i,e=-e,u=-u,o=-o),{translateX:s,translateY:a,rotate:Math.atan2(e,i)*xV,skewX:Math.atan(u)*xV,scaleX:o,scaleY:l}}var Fw;function qbt(i){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(i+"");return e.isIdentity?kP:Sq(e.a,e.b,e.c,e.d,e.e,e.f)}function $bt(i){return i==null||(Fw||(Fw=document.createElementNS("http://www.w3.org/2000/svg","g")),Fw.setAttribute("transform",i),!(i=Fw.transform.baseVal.consolidate()))?kP:(i=i.matrix,Sq(i.a,i.b,i.c,i.d,i.e,i.f))}function Eq(i,e,n,r){function s(f){return f.length?f.pop()+" ":""}function a(f,d,m,y,_,x){if(f!==m||d!==y){var S=_.push("translate(",null,e,null,n);x.push({i:S-4,x:Ip(f,m)},{i:S-2,x:Ip(d,y)})}else(m||y)&&_.push("translate("+m+e+y+n)}function o(f,d,m,y){f!==d?(f-d>180?d+=360:d-f>180&&(f+=360),y.push({i:m.push(s(m)+"rotate(",null,r)-2,x:Ip(f,d)})):d&&m.push(s(m)+"rotate("+d+r)}function l(f,d,m,y){f!==d?y.push({i:m.push(s(m)+"skewX(",null,r)-2,x:Ip(f,d)}):d&&m.push(s(m)+"skewX("+d+r)}function u(f,d,m,y,_,x){if(f!==m||d!==y){var S=_.push(s(_)+"scale(",null,",",null,")");x.push({i:S-4,x:Ip(f,m)},{i:S-2,x:Ip(d,y)})}else(m!==1||y!==1)&&_.push(s(_)+"scale("+m+","+y+")")}return function(f,d){var m=[],y=[];return f=i(f),d=i(d),a(f.translateX,f.translateY,d.translateX,d.translateY,m,y),o(f.rotate,d.rotate,m,y),l(f.skewX,d.skewX,m,y),u(f.scaleX,f.scaleY,d.scaleX,d.scaleY,m,y),f=d=null,function(_){for(var x=-1,S=y.length,T;++x<S;)m[(T=y[x]).i]=T.x(_);return m.join("")}}}var Wbt=Eq(qbt,"px, ","px)","deg)"),Xbt=Eq($bt,", ",")",")"),Ybt=1e-12;function SV(i){return((i=Math.exp(i))+1/i)/2}function Kbt(i){return((i=Math.exp(i))-1/i)/2}function Zbt(i){return((i=Math.exp(2*i))-1)/(i+1)}const Qbt=function i(e,n,r){function s(a,o){var l=a[0],u=a[1],f=a[2],d=o[0],m=o[1],y=o[2],_=d-l,x=m-u,S=_*_+x*x,T,b;if(S<Ybt)b=Math.log(y/f)/e,T=function(N){return[l+N*_,u+N*x,f*Math.exp(e*N*b)]};else{var M=Math.sqrt(S),R=(y*y-f*f+r*S)/(2*f*n*M),A=(y*y-f*f-r*S)/(2*y*n*M),I=Math.log(Math.sqrt(R*R+1)-R),k=Math.log(Math.sqrt(A*A+1)-A);b=(k-I)/e,T=function(N){var L=N*b,U=SV(I),O=f/(n*M)*(U*Zbt(e*L+I)-Kbt(I));return[l+O*_,u+O*x,f*U/SV(e*L+I)]}}return T.duration=b*1e3*e/Math.SQRT2,T}return s.rho=function(a){var o=Math.max(.001,+a),l=o*o,u=l*l;return i(o,l,u)},s}(Math.SQRT2,2,4);function Jbt(i){for(var e=i.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+i.slice(r*6,++r*6);return n}const Tq=Jbt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function rC(i){"@babel/helpers - typeof";return rC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rC(i)}var txt=/^\s+/,ext=/\s+$/;function We(i,e){if(i=i||"",e=e||{},i instanceof We)return i;if(!(this instanceof We))return new We(i,e);var n=nxt(i);this._originalInput=i,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}We.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),n,r,s,a,o,l;return n=e.r/255,r=e.g/255,s=e.b/255,n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),s<=.03928?l=s/12.92:l=Math.pow((s+.055)/1.055,2.4),.2126*a+.7152*o+.0722*l},setAlpha:function(e){return this._a=wq(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=TV(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=TV(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),s=Math.round(e.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+s+"%)":"hsva("+n+", "+r+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var e=EV(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=EV(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),s=Math.round(e.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+s+"%)":"hsla("+n+", "+r+"%, "+s+"%, "+this._roundA+")"},toHex:function(e){return wV(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return axt(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(vr(this._r,255)*100)+"%",g:Math.round(vr(this._g,255)*100)+"%",b:Math.round(vr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(vr(this._r,255)*100)+"%, "+Math.round(vr(this._g,255)*100)+"%, "+Math.round(vr(this._b,255)*100)+"%)":"rgba("+Math.round(vr(this._r,255)*100)+"%, "+Math.round(vr(this._g,255)*100)+"%, "+Math.round(vr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:vxt[wV(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var n="#"+AV(this._r,this._g,this._b,this._a),r=n,s=this._gradientType?"GradientType = 1, ":"";if(e){var a=We(e);r="#"+AV(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+n+",endColorstr="+r+")"},toString:function(e){var n=!!e;e=e||this._format;var r=!1,s=this._a<1&&this._a>=0,a=!n&&s&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return a?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return We(this.toString())},_applyModification:function(e,n){var r=e.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(cxt,arguments)},brighten:function(){return this._applyModification(fxt,arguments)},darken:function(){return this._applyModification(hxt,arguments)},desaturate:function(){return this._applyModification(oxt,arguments)},saturate:function(){return this._applyModification(lxt,arguments)},greyscale:function(){return this._applyModification(uxt,arguments)},spin:function(){return this._applyModification(dxt,arguments)},_applyCombination:function(e,n){return e.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(gxt,arguments)},complement:function(){return this._applyCombination(pxt,arguments)},monochromatic:function(){return this._applyCombination(yxt,arguments)},splitcomplement:function(){return this._applyCombination(mxt,arguments)},triad:function(){return this._applyCombination(MV,[3])},tetrad:function(){return this._applyCombination(MV,[4])}};We.fromRatio=function(i,e){if(rC(i)=="object"){var n={};for(var r in i)i.hasOwnProperty(r)&&(r==="a"?n[r]=i[r]:n[r]=$x(i[r]));i=n}return We(i,e)};function nxt(i){var e={r:0,g:0,b:0},n=1,r=null,s=null,a=null,o=!1,l=!1;return typeof i=="string"&&(i=Sxt(i)),rC(i)=="object"&&(zh(i.r)&&zh(i.g)&&zh(i.b)?(e=ixt(i.r,i.g,i.b),o=!0,l=String(i.r).substr(-1)==="%"?"prgb":"rgb"):zh(i.h)&&zh(i.s)&&zh(i.v)?(r=$x(i.s),s=$x(i.v),e=sxt(i.h,r,s),o=!0,l="hsv"):zh(i.h)&&zh(i.s)&&zh(i.l)&&(r=$x(i.s),a=$x(i.l),e=rxt(i.h,r,a),o=!0,l="hsl"),i.hasOwnProperty("a")&&(n=i.a)),n=wq(n),{ok:o,format:i.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}function ixt(i,e,n){return{r:vr(i,255)*255,g:vr(e,255)*255,b:vr(n,255)*255}}function EV(i,e,n){i=vr(i,255),e=vr(e,255),n=vr(n,255);var r=Math.max(i,e,n),s=Math.min(i,e,n),a,o,l=(r+s)/2;if(r==s)a=o=0;else{var u=r-s;switch(o=l>.5?u/(2-r-s):u/(r+s),r){case i:a=(e-n)/u+(e<n?6:0);break;case e:a=(n-i)/u+2;break;case n:a=(i-e)/u+4;break}a/=6}return{h:a,s:o,l}}function rxt(i,e,n){var r,s,a;i=vr(i,360),e=vr(e,100),n=vr(n,100);function o(f,d,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?f+(d-f)*6*m:m<1/2?d:m<2/3?f+(d-f)*(2/3-m)*6:f}if(e===0)r=s=a=n;else{var l=n<.5?n*(1+e):n+e-n*e,u=2*n-l;r=o(u,l,i+1/3),s=o(u,l,i),a=o(u,l,i-1/3)}return{r:r*255,g:s*255,b:a*255}}function TV(i,e,n){i=vr(i,255),e=vr(e,255),n=vr(n,255);var r=Math.max(i,e,n),s=Math.min(i,e,n),a,o,l=r,u=r-s;if(o=r===0?0:u/r,r==s)a=0;else{switch(r){case i:a=(e-n)/u+(e<n?6:0);break;case e:a=(n-i)/u+2;break;case n:a=(i-e)/u+4;break}a/=6}return{h:a,s:o,v:l}}function sxt(i,e,n){i=vr(i,360)*6,e=vr(e,100),n=vr(n,100);var r=Math.floor(i),s=i-r,a=n*(1-e),o=n*(1-s*e),l=n*(1-(1-s)*e),u=r%6,f=[n,o,a,a,l,n][u],d=[l,n,n,o,a,a][u],m=[a,a,l,n,n,o][u];return{r:f*255,g:d*255,b:m*255}}function wV(i,e,n,r){var s=[yc(Math.round(i).toString(16)),yc(Math.round(e).toString(16)),yc(Math.round(n).toString(16))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function axt(i,e,n,r,s){var a=[yc(Math.round(i).toString(16)),yc(Math.round(e).toString(16)),yc(Math.round(n).toString(16)),yc(Aq(r))];return s&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function AV(i,e,n,r){var s=[yc(Aq(r)),yc(Math.round(i).toString(16)),yc(Math.round(e).toString(16)),yc(Math.round(n).toString(16))];return s.join("")}We.equals=function(i,e){return!i||!e?!1:We(i).toRgbString()==We(e).toRgbString()};We.random=function(){return We.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function oxt(i,e){e=e===0?0:e||10;var n=We(i).toHsl();return n.s-=e/100,n.s=$2(n.s),We(n)}function lxt(i,e){e=e===0?0:e||10;var n=We(i).toHsl();return n.s+=e/100,n.s=$2(n.s),We(n)}function uxt(i){return We(i).desaturate(100)}function cxt(i,e){e=e===0?0:e||10;var n=We(i).toHsl();return n.l+=e/100,n.l=$2(n.l),We(n)}function fxt(i,e){e=e===0?0:e||10;var n=We(i).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),We(n)}function hxt(i,e){e=e===0?0:e||10;var n=We(i).toHsl();return n.l-=e/100,n.l=$2(n.l),We(n)}function dxt(i,e){var n=We(i).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,We(n)}function pxt(i){var e=We(i).toHsl();return e.h=(e.h+180)%360,We(e)}function MV(i,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=We(i).toHsl(),r=[We(i)],s=360/e,a=1;a<e;a++)r.push(We({h:(n.h+a*s)%360,s:n.s,l:n.l}));return r}function mxt(i){var e=We(i).toHsl(),n=e.h;return[We(i),We({h:(n+72)%360,s:e.s,l:e.l}),We({h:(n+216)%360,s:e.s,l:e.l})]}function gxt(i,e,n){e=e||6,n=n||30;var r=We(i).toHsl(),s=360/n,a=[We(i)];for(r.h=(r.h-(s*e>>1)+720)%360;--e;)r.h=(r.h+s)%360,a.push(We(r));return a}function yxt(i,e){e=e||6;for(var n=We(i).toHsv(),r=n.h,s=n.s,a=n.v,o=[],l=1/e;e--;)o.push(We({h:r,s,v:a})),a=(a+l)%1;return o}We.mix=function(i,e,n){n=n===0?0:n||50;var r=We(i).toRgb(),s=We(e).toRgb(),a=n/100,o={r:(s.r-r.r)*a+r.r,g:(s.g-r.g)*a+r.g,b:(s.b-r.b)*a+r.b,a:(s.a-r.a)*a+r.a};return We(o)};We.readability=function(i,e){var n=We(i),r=We(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};We.isReadable=function(i,e,n){var r=We.readability(i,e),s,a;switch(a=!1,s=Ext(n),s.level+s.size){case"AAsmall":case"AAAlarge":a=r>=4.5;break;case"AAlarge":a=r>=3;break;case"AAAsmall":a=r>=7;break}return a};We.mostReadable=function(i,e,n){var r=null,s=0,a,o,l,u;n=n||{},o=n.includeFallbackColors,l=n.level,u=n.size;for(var f=0;f<e.length;f++)a=We.readability(i,e[f]),a>s&&(s=a,r=We(e[f]));return We.isReadable(i,r,{level:l,size:u})||!o?r:(n.includeFallbackColors=!1,We.mostReadable(i,["#fff","#000"],n))};var zP=We.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},vxt=We.hexNames=_xt(zP);function _xt(i){var e={};for(var n in i)i.hasOwnProperty(n)&&(e[i[n]]=n);return e}function wq(i){return i=parseFloat(i),(isNaN(i)||i<0||i>1)&&(i=1),i}function vr(i,e){bxt(i)&&(i="100%");var n=xxt(i);return i=Math.min(e,Math.max(0,parseFloat(i))),n&&(i=parseInt(i*e,10)/100),Math.abs(i-e)<1e-6?1:i%e/parseFloat(e)}function $2(i){return Math.min(1,Math.max(0,i))}function Ol(i){return parseInt(i,16)}function bxt(i){return typeof i=="string"&&i.indexOf(".")!=-1&&parseFloat(i)===1}function xxt(i){return typeof i=="string"&&i.indexOf("%")!=-1}function yc(i){return i.length==1?"0"+i:""+i}function $x(i){return i<=1&&(i=i*100+"%"),i}function Aq(i){return Math.round(parseFloat(i)*255).toString(16)}function CV(i){return Ol(i)/255}var ac=function(){var i="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+i+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",s="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function zh(i){return!!ac.CSS_UNIT.exec(i)}function Sxt(i){i=i.replace(txt,"").replace(ext,"").toLowerCase();var e=!1;if(zP[i])i=zP[i],e=!0;else if(i=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=ac.rgb.exec(i))?{r:n[1],g:n[2],b:n[3]}:(n=ac.rgba.exec(i))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=ac.hsl.exec(i))?{h:n[1],s:n[2],l:n[3]}:(n=ac.hsla.exec(i))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=ac.hsv.exec(i))?{h:n[1],s:n[2],v:n[3]}:(n=ac.hsva.exec(i))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=ac.hex8.exec(i))?{r:Ol(n[1]),g:Ol(n[2]),b:Ol(n[3]),a:CV(n[4]),format:e?"name":"hex8"}:(n=ac.hex6.exec(i))?{r:Ol(n[1]),g:Ol(n[2]),b:Ol(n[3]),format:e?"name":"hex"}:(n=ac.hex4.exec(i))?{r:Ol(n[1]+""+n[1]),g:Ol(n[2]+""+n[2]),b:Ol(n[3]+""+n[3]),a:CV(n[4]+""+n[4]),format:e?"name":"hex8"}:(n=ac.hex3.exec(i))?{r:Ol(n[1]+""+n[1]),g:Ol(n[2]+""+n[2]),b:Ol(n[3]+""+n[3]),format:e?"name":"hex"}:!1}function Ext(i){var e,n;return i=i||{level:"AA",size:"small"},e=(i.level||"AA").toUpperCase(),n=(i.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:e,size:n}}function BP(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=Array(e);n<e;n++)r[n]=i[n];return r}function Txt(i){if(Array.isArray(i))return i}function wxt(i){if(Array.isArray(i))return BP(i)}function Mq(i,e,n){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function Axt(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Cq(i,e,n){return e=m_(e),Nxt(i,iU()?Reflect.construct(e,n||[],m_(i).constructor):e.apply(i,n))}function Mxt(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Rq(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function WI(i,e){return i.get(Mq(i,e))}function RV(i,e,n){Mxt(i,e),e.set(i,n)}function OV(i,e,n){return i.set(Mq(i,e),n),n}function Oq(i,e,n){if(iU())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var s=new(i.bind.apply(i,r));return s}function Cxt(i,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,Pq(r.key),r)}}function Iq(i,e,n){return e&&Cxt(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function W2(i,e,n){return(e=Pq(e))in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function FP(){return FP=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(i,e,n){var r=Lxt(i,e);if(r){var s=Object.getOwnPropertyDescriptor(r,e);return s.get?s.get.call(arguments.length<3?i:n):s.value}},FP.apply(null,arguments)}function m_(i){return m_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m_(i)}function Dq(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&VP(i,e)}function iU(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iU=function(){return!!i})()}function Rxt(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Oxt(i,e){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,f=!1;try{if(a=(n=n.call(i)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(d){f=!0,s=d}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw s}}return l}}function Ixt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dxt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IV(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),n.push.apply(n,r)}return n}function Pxt(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IV(Object(n),!0).forEach(function(r){W2(i,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):IV(Object(n)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(n,r))})}return i}function Nxt(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Axt(i)}function VP(i,e){return VP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},VP(i,e)}function y1(i,e){return Txt(i)||Oxt(i,e)||Nq(i,e)||Ixt()}function Lxt(i,e){for(;!{}.hasOwnProperty.call(i,e)&&(i=m_(i))!==null;);return i}function XI(i,e,n,r){var s=FP(m_(i.prototype),e,n);return typeof s=="function"?function(a){return s.apply(n,a)}:s}function lc(i){return wxt(i)||Rxt(i)||Nq(i)||Dxt()}function Uxt(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var r=n.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function Pq(i){var e=Uxt(i,"string");return typeof e=="symbol"?e:e+""}function HP(i){"@babel/helpers - typeof";return HP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HP(i)}function Nq(i,e){if(i){if(typeof i=="string")return BP(i,e);var n={}.toString.call(i).slice(8,-1);return n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set"?Array.from(i):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?BP(i,e):void 0}}var Lq=function(e){e instanceof Array?e.forEach(Lq):(e.map&&e.map.dispose(),e.dispose())},Uq=function(e){e.geometry&&e.geometry.dispose(),e.material&&Lq(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(Uq)},GP=function(e){for(;e.children.length;){var n=e.children[0];e.remove(n),Uq(n)}},YI=new WeakMap,Vw=new WeakMap,xx=function(i){function e(n){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.dataBindAttr,o=a===void 0?"__data":a,l=s.objBindAttr,u=l===void 0?"__threeObj":l;return Rq(this,e),r=Cq(this,e),W2(r,"scene",void 0),RV(r,YI,void 0),RV(r,Vw,void 0),r.scene=n,OV(YI,r,o),OV(Vw,r,u),r.onRemoveObj(function(){}),r}return Dq(e,i),Iq(e,[{key:"onCreateObj",value:function(r){var s=this;return XI(e,"onCreateObj",this)([function(a){var o=r(a);return a[WI(Vw,s)]=o,o[WI(YI,s)]=a,s.scene.add(o),o}]),this}},{key:"onRemoveObj",value:function(r){var s=this;return XI(e,"onRemoveObj",this)([function(a,o){var l=XI(e,"getData",s)([a]);r(a,o),s.scene.remove(a),GP(a),delete l[WI(Vw,s)]}]),this}}])}(wbt),Sx=function(e){return isNaN(e)?parseInt(We(e).toHex(),16):e},KI=function(e){return isNaN(e)?We(e).getAlpha():1},kxt=eU(Tq);function DV(i,e,n){!e||typeof n!="string"||i.filter(function(r){return!r[n]}).forEach(function(r){r[n]=kxt(e(r))})}function zxt(i,e){var n=i.nodes,r=i.links,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=s.nodeFilter,o=a===void 0?function(){return!0}:a,l=s.onLoopError,u=l===void 0?function(_){throw"Invalid DAG structure! Found cycle in node path: ".concat(_.join(" -> "),".")}:l,f={};n.forEach(function(_){return f[e(_)]={data:_,out:[],depth:-1,skip:!o(_)}}),r.forEach(function(_){var x=_.source,S=_.target,T=A(x),b=A(S);if(!f.hasOwnProperty(T))throw"Missing source node with id: ".concat(T);if(!f.hasOwnProperty(b))throw"Missing target node with id: ".concat(b);var M=f[T],R=f[b];M.out.push(R);function A(I){return HP(I)==="object"?e(I):I}});var d=[];y(Object.values(f));var m=Object.assign.apply(Object,[{}].concat(lc(Object.entries(f).filter(function(_){var x=y1(_,2),S=x[1];return!S.skip}).map(function(_){var x=y1(_,2),S=x[0],T=x[1];return W2({},S,T.depth)}))));return m;function y(_){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,T=function(){var A=_[b];if(x.indexOf(A)!==-1){var I=[].concat(lc(x.slice(x.indexOf(A))),[A]).map(function(k){return e(k.data)});return d.some(function(k){return k.length===I.length&&k.every(function(N,L){return N===I[L]})})||(d.push(I),u(I)),1}S>A.depth&&(A.depth=S,y(A.out,[].concat(lc(x),[A]),S+(A.skip?0:1)))},b=0,M=_.length;b<M;b++)T()}}var un=window.THREE?window.THREE:{Group:Kh,Mesh:$r,MeshLambertMaterial:l3,Color:ke,BufferGeometry:Un,BufferAttribute:zi,Matrix4:cn,Vector3:pt,SphereGeometry:Ty,CylinderGeometry:Ey,TubeGeometry:PS,ConeGeometry:IS,Line:hd,LineBasicMaterial:ja,QuadraticBezierCurve3:jC,CubicBezierCurve3:r3,Box3:ha},PV={graph:m_t,forcelayout:M_t},Bxt=2,ZI=new un.BufferGeometry().setAttribute?"setAttribute":"addAttribute",Hw=new un.BufferGeometry().applyMatrix4?"applyMatrix4":"applyMatrix",Fxt=q2({props:{jsonUrl:{onChange:function(e,n){var r=this;e&&!n.fetchingJson&&(n.fetchingJson=!0,n.onLoading(),fetch(e).then(function(s){return s.json()}).then(function(s){n.fetchingJson=!1,n.onFinishLoading(s),r.graphData(s)}))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,n){n.engineRunning=!1}},numDimensions:{default:3,onChange:function(e,n){var r=n.d3ForceLayout.force("charge");r&&r.strength(e>2?-60:-30),e<3&&s(n.graphData.nodes,"z"),e<2&&s(n.graphData.nodes,"y");function s(a,o){a.forEach(function(l){delete l[o],delete l["v".concat(o)]})}}},dagMode:{onChange:function(e,n){!e&&n.forceEngine==="d3"&&(n.graphData.nodes||[]).forEach(function(r){return r.fx=r.fy=r.fz=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,n){n.d3ForceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,n){n.d3ForceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,n){n.d3ForceLayout.velocityDecay(e)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(e){return e._flushObjects=!0,e._rerender(),this},d3Force:function(e,n,r){return r===void 0?e.d3ForceLayout.force(n):(e.d3ForceLayout.force(n,r),this)},d3ReheatSimulation:function(e){return e.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},tickFrame:function(e){var n=e.forceEngine!=="ngraph";return e.engineRunning&&r(),s(),a(),this;function r(){++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||n&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.layout[n?"tick":"step"](),e.onEngineTick());var o=$e(e.nodeThreeObjectExtend);e.nodeDataMapper.entries().forEach(function(y){var _=y1(y,2),x=_[0],S=_[1];if(S){var T=n?x:e.layout.getNodePosition(x[e.nodeId]),b=o(x);(!e.nodePositionUpdate||!e.nodePositionUpdate(b?S.children[0]:S,{x:T.x,y:T.y,z:T.z},x)||b)&&(S.position.x=T.x,S.position.y=T.y||0,S.position.z=T.z||0)}});var l=$e(e.linkWidth),u=$e(e.linkCurvature),f=$e(e.linkCurveRotation),d=$e(e.linkThreeObjectExtend);e.linkDataMapper.entries().forEach(function(y){var _=y1(y,2),x=_[0],S=_[1];if(S){var T=n?x:e.layout.getLinkPosition(e.layout.graph.getLink(x.source,x.target).id),b=T[n?"source":"from"],M=T[n?"target":"to"];if(!(!b||!M||!b.hasOwnProperty("x")||!M.hasOwnProperty("x"))){m(x);var R=d(x);if(!(e.linkPositionUpdate&&e.linkPositionUpdate(R?S.children[1]:S,{start:{x:b.x,y:b.y,z:b.z},end:{x:M.x,y:M.y,z:M.z}},x)&&!R)){var A=30,I=x.__curve,k=S.children.length?S.children[0]:S;if(k.type==="Line"){if(I){var L=I.getPoints(A);k.geometry.getAttribute("position").array.length!==L.length*3&&k.geometry[ZI]("position",new un.BufferAttribute(new Float32Array(L.length*3),3)),k.geometry.setFromPoints(L)}else{var N=k.geometry.getAttribute("position");(!N||!N.array||N.array.length!==6)&&k.geometry[ZI]("position",N=new un.BufferAttribute(new Float32Array(2*3),3)),N.array[0]=b.x,N.array[1]=b.y||0,N.array[2]=b.z||0,N.array[3]=M.x,N.array[4]=M.y||0,N.array[5]=M.z||0,N.needsUpdate=!0}k.geometry.computeBoundingSphere()}else if(k.type==="Mesh")if(I){k.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(k.position.set(0,0,0),k.rotation.set(0,0,0),k.scale.set(1,1,1));var J=Math.ceil(l(x)*10)/10,q=J/2,W=new un.TubeGeometry(I,A,q,e.linkResolution,!1);k.geometry.dispose(),k.geometry=W}else{if(!k.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var U=Math.ceil(l(x)*10)/10,O=U/2,F=new un.CylinderGeometry(O,O,1,e.linkResolution,1,!1);F[Hw](new un.Matrix4().makeTranslation(0,1/2,0)),F[Hw](new un.Matrix4().makeRotationX(Math.PI/2)),k.geometry.dispose(),k.geometry=F}var H=new un.Vector3(b.x,b.y||0,b.z||0),V=new un.Vector3(M.x,M.y||0,M.z||0),X=H.distanceTo(V);k.position.x=H.x,k.position.y=H.y,k.position.z=H.z,k.scale.z=X,k.parent.localToWorld(V),k.lookAt(V)}}}}});function m(y){var _=n?y:e.layout.getLinkPosition(e.layout.graph.getLink(y.source,y.target).id),x=_[n?"source":"from"],S=_[n?"target":"to"];if(!(!x||!S||!x.hasOwnProperty("x")||!S.hasOwnProperty("x"))){var T=u(y);if(!T)y.__curve=null;else{var b=new un.Vector3(x.x,x.y||0,x.z||0),M=new un.Vector3(S.x,S.y||0,S.z||0),R=b.distanceTo(M),A,I=f(y);if(R>0){var k=S.x-x.x,N=S.y-x.y||0,L=new un.Vector3().subVectors(M,b),U=L.clone().multiplyScalar(T).cross(k!==0||N!==0?new un.Vector3(0,0,1):new un.Vector3(0,1,0)).applyAxisAngle(L.normalize(),I).add(new un.Vector3().addVectors(b,M).divideScalar(2));A=new un.QuadraticBezierCurve3(b,U,M)}else{var O=T*70,F=-I,H=F+Math.PI/2;A=new un.CubicBezierCurve3(b,new un.Vector3(O*Math.cos(H),O*Math.sin(H),0).add(b),new un.Vector3(O*Math.cos(F),O*Math.sin(F),0).add(b),M)}y.__curve=A}}}}function s(){var o=$e(e.linkDirectionalArrowRelPos),l=$e(e.linkDirectionalArrowLength),u=$e(e.nodeVal);e.arrowDataMapper.entries().forEach(function(f){var d=y1(f,2),m=d[0],y=d[1];if(y){var _=n?m:e.layout.getLinkPosition(e.layout.graph.getLink(m.source,m.target).id),x=_[n?"source":"from"],S=_[n?"target":"to"];if(!(!x||!S||!x.hasOwnProperty("x")||!S.hasOwnProperty("x"))){var T=Math.cbrt(Math.max(0,u(x)||1))*e.nodeRelSize,b=Math.cbrt(Math.max(0,u(S)||1))*e.nodeRelSize,M=l(m),R=o(m),A=m.__curve?function(O){return m.__curve.getPoint(O)}:function(O){var F=function(V,X,J,q){return X[V]+(J[V]-X[V])*q||0};return{x:F("x",x,S,O),y:F("y",x,S,O),z:F("z",x,S,O)}},I=m.__curve?m.__curve.getLength():Math.sqrt(["x","y","z"].map(function(O){return Math.pow((S[O]||0)-(x[O]||0),2)}).reduce(function(O,F){return O+F},0)),k=T+M+(I-T-b-M)*R,N=A(k/I),L=A((k-M)/I);["x","y","z"].forEach(function(O){return y.position[O]=L[O]});var U=Oq(un.Vector3,lc(["x","y","z"].map(function(O){return N[O]})));y.parent.localToWorld(U),y.lookAt(U)}}})}function a(){var o=$e(e.linkDirectionalParticleSpeed);e.graphData.links.forEach(function(l){var u=e.particlesDataMapper.getObj(l),f=u&&u.children,d=l.__singleHopPhotonsObj&&l.__singleHopPhotonsObj.children;if(!((!d||!d.length)&&(!f||!f.length))){var m=n?l:e.layout.getLinkPosition(e.layout.graph.getLink(l.source,l.target).id),y=m[n?"source":"from"],_=m[n?"target":"to"];if(!(!y||!_||!y.hasOwnProperty("x")||!_.hasOwnProperty("x"))){var x=o(l),S=l.__curve?function(b){return l.__curve.getPoint(b)}:function(b){var M=function(A,I,k,N){return I[A]+(k[A]-I[A])*N||0};return{x:M("x",y,_,b),y:M("y",y,_,b),z:M("z",y,_,b)}},T=[].concat(lc(f||[]),lc(d||[]));T.forEach(function(b,M){var R=b.parent.__linkThreeObjType==="singleHopPhotons";if(b.hasOwnProperty("__progressRatio")||(b.__progressRatio=R?0:M/f.length),b.__progressRatio+=x,b.__progressRatio>=1)if(!R)b.__progressRatio=b.__progressRatio%1;else{b.parent.remove(b),GP(b);return}var A=b.__progressRatio,I=S(A);["x","y","z"].forEach(function(k){return b.position[k]=I[k]})})}}})}},emitParticle:function(e,n){if(n&&e.graphData.links.includes(n)){if(!n.__singleHopPhotonsObj){var r=new un.Group;r.__linkThreeObjType="singleHopPhotons",n.__singleHopPhotonsObj=r,e.graphScene.add(r)}var s=$e(e.linkDirectionalParticleWidth),a=Math.ceil(s(n)*10)/10/2,o=e.linkDirectionalParticleResolution,l=new un.SphereGeometry(a,o,o),u=$e(e.linkColor),f=$e(e.linkDirectionalParticleColor),d=f(n)||u(n)||"#f0f0f0",m=new un.Color(Sx(d)),y=e.linkOpacity*3,_=new un.MeshLambertMaterial({color:m,transparent:!0,opacity:y});n.__singleHopPhotonsObj.add(new un.Mesh(l,_))}return this},getGraphBbox:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};if(!e.initialised)return null;var r=function s(a){var o=[];if(a.geometry){a.geometry.computeBoundingBox();var l=new un.Box3;l.copy(a.geometry.boundingBox).applyMatrix4(a.matrixWorld),o.push(l)}return o.concat.apply(o,lc((a.children||[]).filter(function(u){return!u.hasOwnProperty("__graphObjType")||u.__graphObjType==="node"&&n(u.__data)}).map(s)))}(e.graphScene);return r.length?Object.assign.apply(Object,lc(["x","y","z"].map(function(s){return W2({},s,[PP(r,function(a){return a.min[s]}),DP(r,function(a){return a.max[s]})])}))):null}},stateInit:function(){return{d3ForceLayout:uq().force("link",aq()).force("charge",cq()).force("center",Jj()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,n){n.graphScene=e,n.nodeDataMapper=new xx(e,{objBindAttr:"__threeObj"}),n.linkDataMapper=new xx(e,{objBindAttr:"__lineObj"}),n.arrowDataMapper=new xx(e,{objBindAttr:"__arrowObj"}),n.particlesDataMapper=new xx(e,{objBindAttr:"__photonsObj"})},update:function(e,n){var r=function(ht){return ht.some(function(ft){return n.hasOwnProperty(ft)})};if(e.engineRunning=!1,typeof e.onUpdate=="function"&&e.onUpdate(),e.nodeAutoColorBy!==null&&r(["nodeAutoColorBy","graphData","nodeColor"])&&DV(e.graphData.nodes,$e(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&r(["linkAutoColorBy","graphData","linkColor"])&&DV(e.graphData.links,$e(e.linkAutoColorBy),e.linkColor),e._flushObjects||r(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var s=$e(e.nodeThreeObject),a=$e(e.nodeThreeObjectExtend),o=$e(e.nodeVal),l=$e(e.nodeColor),u=$e(e.nodeVisibility),f={},d={};(e._flushObjects||r(["nodeThreeObject","nodeThreeObjectExtend"]))&&e.nodeDataMapper.clear(),e.nodeDataMapper.onCreateObj(function(nt){var ht=s(nt),ft=a(nt);ht&&e.nodeThreeObject===ht&&(ht=ht.clone());var gt;return ht&&!ft?gt=ht:(gt=new un.Mesh,gt.__graphDefaultObj=!0,ht&&ft&&gt.add(ht)),gt.__graphObjType="node",gt}).onUpdateObj(function(nt,ht){if(nt.__graphDefaultObj){var ft=o(ht)||1,gt=Math.cbrt(ft)*e.nodeRelSize,wt=e.nodeResolution;(!nt.geometry.type.match(/^Sphere(Buffer)?Geometry$/)||nt.geometry.parameters.radius!==gt||nt.geometry.parameters.widthSegments!==wt)&&(f.hasOwnProperty(ft)||(f[ft]=new un.SphereGeometry(gt,wt,wt)),nt.geometry.dispose(),nt.geometry=f[ft]);var Kt=l(ht),zt=new un.Color(Sx(Kt||"#ffffaa")),te=e.nodeOpacity*KI(Kt);(nt.material.type!=="MeshLambertMaterial"||!nt.material.color.equals(zt)||nt.material.opacity!==te)&&(d.hasOwnProperty(Kt)||(d[Kt]=new un.MeshLambertMaterial({color:zt,transparent:!0,opacity:te})),nt.material.dispose(),nt.material=d[Kt])}}).digest(e.graphData.nodes.filter(u))}if(e._flushObjects||r(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var m=$e(e.linkThreeObject),y=$e(e.linkThreeObjectExtend),_=$e(e.linkMaterial),x=$e(e.linkVisibility),S=$e(e.linkColor),T=$e(e.linkWidth),b={},M={},R={},A=e.graphData.links.filter(x);if((e._flushObjects||r(["linkThreeObject","linkThreeObjectExtend","linkWidth"]))&&e.linkDataMapper.clear(),e.linkDataMapper.onRemoveObj(function(nt){var ht=nt.__data&&nt.__data.__singleHopPhotonsObj;ht&&(ht.parent.remove(ht),GP(ht),delete nt.__data.__singleHopPhotonsObj)}).onCreateObj(function(nt){var ht=m(nt),ft=y(nt);ht&&e.linkThreeObject===ht&&(ht=ht.clone());var gt;if(!ht||ft){var wt=!!T(nt);if(wt)gt=new un.Mesh;else{var Kt=new un.BufferGeometry;Kt[ZI]("position",new un.BufferAttribute(new Float32Array(2*3),3)),gt=new un.Line(Kt)}}var zt;return ht?ft?(zt=new un.Group,zt.__graphDefaultObj=!0,zt.add(gt),zt.add(ht)):zt=ht:(zt=gt,zt.__graphDefaultObj=!0),zt.renderOrder=10,zt.__graphObjType="link",zt}).onUpdateObj(function(nt,ht){if(nt.__graphDefaultObj){var ft=nt.children.length?nt.children[0]:nt,gt=Math.ceil(T(ht)*10)/10,wt=!!gt;if(wt){var Kt=gt/2,zt=e.linkResolution;if(!ft.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||ft.geometry.parameters.radiusTop!==Kt||ft.geometry.parameters.radialSegments!==zt){if(!b.hasOwnProperty(gt)){var te=new un.CylinderGeometry(Kt,Kt,1,zt,1,!1);te[Hw](new un.Matrix4().makeTranslation(0,1/2,0)),te[Hw](new un.Matrix4().makeRotationX(Math.PI/2)),b[gt]=te}ft.geometry.dispose(),ft.geometry=b[gt]}}var Pt=_(ht);if(Pt)ft.material=Pt;else{var Ht=S(ht),at=new un.Color(Sx(Ht||"#f0f0f0")),ue=e.linkOpacity*KI(Ht),Jt=wt?"MeshLambertMaterial":"LineBasicMaterial";if(ft.material.type!==Jt||!ft.material.color.equals(at)||ft.material.opacity!==ue){var se=wt?M:R;se.hasOwnProperty(Ht)||(se[Ht]=new un[Jt]({color:at,transparent:ue<1,opacity:ue,depthWrite:ue>=1})),ft.material.dispose(),ft.material=se[Ht]}}}}).digest(A),e.linkDirectionalArrowLength||n.hasOwnProperty("linkDirectionalArrowLength")){var I=$e(e.linkDirectionalArrowLength),k=$e(e.linkDirectionalArrowColor);e.arrowDataMapper.onCreateObj(function(){var nt=new un.Mesh(void 0,new un.MeshLambertMaterial({transparent:!0}));return nt.__linkThreeObjType="arrow",nt}).onUpdateObj(function(nt,ht){var ft=I(ht),gt=e.linkDirectionalArrowResolution;if(!nt.geometry.type.match(/^Cone(Buffer)?Geometry$/)||nt.geometry.parameters.height!==ft||nt.geometry.parameters.radialSegments!==gt){var wt=new un.ConeGeometry(ft*.25,ft,gt);wt.translate(0,ft/2,0),wt.rotateX(Math.PI/2),nt.geometry.dispose(),nt.geometry=wt}var Kt=k(ht)||S(ht)||"#f0f0f0";nt.material.color=new un.Color(Sx(Kt)),nt.material.opacity=e.linkOpacity*3*KI(Kt)}).digest(A.filter(I))}if(e.linkDirectionalParticles||n.hasOwnProperty("linkDirectionalParticles")){var N=$e(e.linkDirectionalParticles),L=$e(e.linkDirectionalParticleWidth),U=$e(e.linkDirectionalParticleColor),O={},F={};e.particlesDataMapper.onCreateObj(function(){var nt=new un.Group;return nt.__linkThreeObjType="photons",nt.__photonDataMapper=new xx(nt),nt}).onUpdateObj(function(nt,ht){var ft=Math.round(Math.abs(N(ht))),gt=!!nt.children.length&&nt.children[0],wt=Math.ceil(L(ht)*10)/10/2,Kt=e.linkDirectionalParticleResolution,zt;gt&&gt.geometry.parameters.radius===wt&&gt.geometry.parameters.widthSegments===Kt?zt=gt.geometry:(F.hasOwnProperty(wt)||(F[wt]=new un.SphereGeometry(wt,Kt,Kt)),zt=F[wt],gt&&gt.geometry.dispose());var te=U(ht)||S(ht)||"#f0f0f0",Pt=new un.Color(Sx(te)),Ht=e.linkOpacity*3,at;gt&&gt.material.color.equals(Pt)&&gt.material.opacity===Ht?at=gt.material:(O.hasOwnProperty(te)||(O[te]=new un.MeshLambertMaterial({color:Pt,transparent:!0,opacity:Ht})),at=O[te],gt&&gt.material.dispose()),nt.__photonDataMapper.id(function(ue){return ue.idx}).onCreateObj(function(){return new un.Mesh(zt,at)}).onUpdateObj(function(ue){ue.geometry=zt,ue.material=at}).digest(lc(new Array(ft)).map(function(ue,Jt){return{idx:Jt}}))}).digest(A.filter(N))}}if(e._flushObjects=!1,r(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){e.engineRunning=!1,e.graphData.links.forEach(function(nt){nt.source=nt[e.linkSource],nt.target=nt[e.linkTarget]});var H=e.forceEngine!=="ngraph",V;if(H){(V=e.d3ForceLayout).stop().alpha(1).numDimensions(e.numDimensions).nodes(e.graphData.nodes);var X=e.d3ForceLayout.force("link");X&&X.id(function(nt){return nt[e.nodeId]}).links(e.graphData.links);var J=e.dagMode&&zxt(e.graphData,function(nt){return nt[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),q=Math.max.apply(Math,lc(Object.values(J||[]))),W=e.dagLevelDistance||e.graphData.nodes.length/(q||1)*Bxt*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu","zin","zout"].includes(n.dagMode)){var K=["lr","rl"].includes(n.dagMode)?"fx":["td","bu"].includes(n.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(nt){return delete nt[K]})}if(["lr","rl","td","bu","zin","zout"].includes(e.dagMode)){var et=["rl","td","zout"].includes(e.dagMode),Q=function(ht){return(J[ht[e.nodeId]]-q/2)*W*(et?-1:1)},dt=["lr","rl"].includes(e.dagMode)?"fx":["td","bu"].includes(e.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(nt){return nt[dt]=Q(nt)})}e.d3ForceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?fq(function(nt){var ht=J[nt[e.nodeId]]||-1;return(e.dagMode==="radialin"?q-ht:ht)*W}).strength(function(nt){return e.dagNodeFilter(nt)?1:0}):null)}else{var yt=PV.graph();e.graphData.nodes.forEach(function(nt){yt.addNode(nt[e.nodeId])}),e.graphData.links.forEach(function(nt){yt.addLink(nt.source,nt.target)}),V=PV.forcelayout(yt,Pxt({dimensions:e.numDimensions},e.ngraphPhysics)),V.graph=yt}for(var xt=0;xt<e.warmupTicks&&!(H&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin);xt++)V[H?"tick":"step"]();e.layout=V,this.resetCountdown()}e.engineRunning=!0,e.onFinishUpdate()}});function Vxt(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=function(s){function a(){var o;Rq(this,a);for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];return o=Cq(this,a,[].concat(u)),o.__kapsuleInstance=Oq(i,[].concat(lc(n?[o]:[]),u)),o}return Dq(a,s),Iq(a)}(e);return Object.keys(i()).forEach(function(s){return r.prototype[s]=function(){var a,o=(a=this.__kapsuleInstance)[s].apply(a,arguments);return o===this.__kapsuleInstance?this:o}}),r}var Hxt=window.THREE?window.THREE:{Group:Kh},Gxt=Vxt(Fxt,Hxt.Group,!0);function jxt(i,e){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,f=!1;try{if(a=(n=n.call(i)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(d){f=!0,s=d}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw s}}return l}}function qxt(i,e,n){return e=Jxt(e),e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function NV(i,e){return Xxt(i)||jxt(i,e)||kq(i,e)||Zxt()}function $xt(i){return Wxt(i)||Yxt(i)||kq(i)||Kxt()}function Wxt(i){if(Array.isArray(i))return jP(i)}function Xxt(i){if(Array.isArray(i))return i}function Yxt(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function kq(i,e){if(i){if(typeof i=="string")return jP(i,e);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jP(i,e)}}function jP(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=i[n];return r}function Kxt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zxt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qxt(i,e){if(typeof i!="object"||i===null)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var r=n.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function Jxt(i){var e=Qxt(i,"string");return typeof e=="symbol"?e:String(e)}var zq=function(e,n){var r=new Set(n);return Object.assign.apply(Object,[{}].concat($xt(Object.entries(e).filter(function(s){var a=NV(s,1),o=a[0];return!r.has(o)}).map(function(s){var a=NV(s,2),o=a[0],l=a[1];return qxt({},o,l)}))))};function qP(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=Array(e);n<e;n++)r[n]=i[n];return r}function t1t(i){if(Array.isArray(i))return i}function e1t(i){if(Array.isArray(i))return qP(i)}function n1t(i,e,n){return(e=f1t(e))in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function i1t(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function r1t(i,e){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,f=!1;try{if(a=(n=n.call(i)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(d){f=!0,s=d}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw s}}return l}}function s1t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a1t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LV(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),n.push.apply(n,r)}return n}function sC(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LV(Object(n),!0).forEach(function(r){n1t(i,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):LV(Object(n)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(n,r))})}return i}function o1t(i,e){if(i==null)return{};var n,r,s=l1t(i,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(i,n)&&(s[n]=i[n])}return s}function l1t(i,e){if(i==null)return{};var n={};for(var r in i)if({}.hasOwnProperty.call(i,r)){if(e.indexOf(r)!==-1)continue;n[r]=i[r]}return n}function u1t(i,e){return t1t(i)||r1t(i,e)||Bq(i,e)||s1t()}function QI(i){return e1t(i)||i1t(i)||Bq(i)||a1t()}function c1t(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var r=n.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function f1t(i){var e=c1t(i,"string");return typeof e=="symbol"?e:e+""}function Bq(i,e){if(i){if(typeof i=="string")return qP(i,e);var n={}.toString.call(i).slice(8,-1);return n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set"?Array.from(i):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qP(i,e):void 0}}function h1t(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.methodNames,r=n===void 0?[]:n,s=e.initPropNames,a=s===void 0?[]:s;return tt.forwardRef(function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=arguments.length>1?arguments[1]:void 0,u=tt.useMemo(function(){return new i(Object.fromEntries(a.filter(function(y){return o.hasOwnProperty(y)}).map(function(y){return[y,o[y]]})))},[]);tt.useEffect(function(){return u._destructor instanceof Function?u._destructor:void 0},[u]);var f=tt.useCallback(function(y){for(var _=arguments.length,x=new Array(_>1?_-1:0),S=1;S<_;S++)x[S-1]=arguments[S];return u[y]instanceof Function?u[y].apply(u,x):void 0},[u]),d=Object.fromEntries(Object.entries(o).filter(function(y){var _=u1t(y,1),x=_[0];return!u[x]||!(u[x]instanceof Function)})),m=tt.useRef({});return Object.keys(zq(o,[].concat(QI(r),QI(a),QI(Object.keys(d))))).filter(function(y){return m.current[y]!==o[y]}).forEach(function(y){return f(y,o[y])}),m.current=o,tt.useImperativeHandle(l,function(){return Object.fromEntries(r.map(function(y){return[y,function(){for(var _=arguments.length,x=new Array(_),S=0;S<_;S++)x[S]=arguments[S];return f.apply(void 0,[y].concat(x))}]}))}),tt.createElement("primitive",sC(sC({},d),{},{object:u}))})}var d1t=["onNodeHover","onLinkHover","onNodeClick","onLinkClick"],p1t=h1t(Gxt,{initPropNames:[],methodNames:["emitParticle","getGraphBbox","d3ReheatSimulation","d3Force","resetCountdown","tickFrame","refresh"]}),UV=function(e){var n,r=e.intersections,s=function(o){return o?o.hasOwnProperty("__graphObjType")?o:s(o.parent):null};return s((n=r.find(function(a){return s(a.object)}))===null||n===void 0?void 0:n.object)},Gw=function(e){return e==null?void 0:e.__data},m1t=tt.forwardRef(function(i,e){var n=i.onNodeHover,r=i.onLinkHover,s=i.onNodeClick,a=i.onLinkClick,o=o1t(i,d1t),l=tt.useRef(null),u=tt.useCallback(function(d){if(!(!n&&!r)){var m=UV(d);if(m!==l.current){var y=l.current;l.current=m,y&&(!m||m.__graphObjType!==y.__graphObjType)&&({node:n,link:r}[y==null?void 0:y.__graphObjType]||function(){})(null,Gw(y)),({node:n,link:r}[m==null?void 0:m.__graphObjType]||function(){})(Gw(m),(m==null?void 0:m.__graphObjType)===(y==null?void 0:y.__graphObjType)?Gw(y):null)}}},[n,r]),f=tt.useCallback(function(d){var m=UV(d),y={node:s,link:a}[m==null?void 0:m.__graphObjType];m&&y&&(y(Gw(m),d),d.stopPropagation())},[s,a]);return tt.createElement(p1t,sC(sC({},o),{},{ref:e,onPointerMove:u,onClick:f}))});function jh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Fq(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var zl={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},g_={duration:.5,overwrite:!1,delay:0},rU,pa,_r,Bf=1e8,Fa=1/Bf,$P=Math.PI*2,g1t=$P/4,y1t=0,Vq=Math.sqrt,v1t=Math.cos,_1t=Math.sin,Ys=function(e){return typeof e=="string"},Wr=function(e){return typeof e=="function"},xd=function(e){return typeof e=="number"},sU=function(e){return typeof e>"u"},$f=function(e){return typeof e=="object"},il=function(e){return e!==!1},aU=function(){return typeof window<"u"},jw=function(e){return Wr(e)||Ys(e)},Hq=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Va=Array.isArray,WP=/(?:-?\.?\d|\.)+/gi,Gq=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,C0=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,JI=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,jq=/[+-]=-?[.\d]+/,qq=/[^,'"\[\]\s]+/gi,b1t=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Ir,vf,XP,oU,Hl={},aC={},$q,Wq=function(e){return(aC=y_(e,Hl))&&ul},lU=function(e,n){return console.warn("Invalid property",e,"set to",n,"Missing plugin? gsap.registerPlugin()")},pS=function(e,n){return!n&&console.warn(e)},Xq=function(e,n){return e&&(Hl[e]=n)&&aC&&(aC[e]=n)||Hl},mS=function(){return 0},x1t={suppressEvents:!0,isStart:!0,kill:!1},xA={suppressEvents:!0,kill:!1},S1t={suppressEvents:!0},uU={},Kp=[],YP={},Yq,Il={},tD={},kV=30,SA=[],cU="",fU=function(e){var n=e[0],r,s;if($f(n)||Wr(n)||(e=[e]),!(r=(n._gsap||{}).harness)){for(s=SA.length;s--&&!SA[s].targetTest(n););r=SA[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new _$(e[s],r)))||e.splice(s,1);return e},ty=function(e){return e._gsap||fU(Eu(e))[0]._gsap},Kq=function(e,n,r){return(r=e[n])&&Wr(r)?e[n]():sU(r)&&e.getAttribute&&e.getAttribute(n)||r},rl=function(e,n){return(e=e.split(",")).forEach(n)||e},ns=function(e){return Math.round(e*1e5)/1e5||0},vs=function(e){return Math.round(e*1e7)/1e7||0},H0=function(e,n){var r=n.charAt(0),s=parseFloat(n.substr(2));return e=parseFloat(e),r==="+"?e+s:r==="-"?e-s:r==="*"?e*s:e/s},E1t=function(e,n){for(var r=n.length,s=0;e.indexOf(n[s])<0&&++s<r;);return s<r},oC=function(){var e=Kp.length,n=Kp.slice(0),r,s;for(YP={},Kp.length=0,r=0;r<e;r++)s=n[r],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},Zq=function(e,n,r,s){Kp.length&&!pa&&oC(),e.render(n,r,pa&&n<0&&(e._initted||e._startAt)),Kp.length&&!pa&&oC()},Qq=function(e){var n=parseFloat(e);return(n||n===0)&&(e+"").match(qq).length<2?n:Ys(e)?e.trim():e},Jq=function(e){return e},Gl=function(e,n){for(var r in n)r in e||(e[r]=n[r]);return e},T1t=function(e){return function(n,r){for(var s in r)s in n||s==="duration"&&e||s==="ease"||(n[s]=r[s])}},y_=function(e,n){for(var r in n)e[r]=n[r];return e},zV=function i(e,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=$f(n[r])?i(e[r]||(e[r]={}),n[r]):n[r]);return e},lC=function(e,n){var r={},s;for(s in e)s in n||(r[s]=e[s]);return r},v1=function(e){var n=e.parent||Ir,r=e.keyframes?T1t(Va(e.keyframes)):Gl;if(il(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},w1t=function(e,n){for(var r=e.length,s=r===n.length;s&&r--&&e[r]===n[r];);return r<0},t$=function(e,n,r,s,a){var o=e[s],l;if(a)for(l=n[a];o&&o[a]>l;)o=o._prev;return o?(n._next=o._next,o._next=n):(n._next=e[r],e[r]=n),n._next?n._next._prev=n:e[s]=n,n._prev=o,n.parent=n._dp=e,n},X2=function(e,n,r,s){r===void 0&&(r="_first"),s===void 0&&(s="_last");var a=n._prev,o=n._next;a?a._next=o:e[r]===n&&(e[r]=o),o?o._prev=a:e[s]===n&&(e[s]=a),n._next=n._prev=n.parent=null},um=function(e,n){e.parent&&(!n||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},ey=function(e,n){if(e&&(!n||n._end>e._dur||n._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},A1t=function(e){for(var n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e},KP=function(e,n,r,s){return e._startAt&&(pa?e._startAt.revert(xA):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(n,!0,s))},M1t=function i(e){return!e||e._ts&&i(e.parent)},BV=function(e){return e._repeat?v_(e._tTime,e=e.duration()+e._rDelay)*e:0},v_=function(e,n){var r=Math.floor(e=vs(e/n));return e&&r===e?r-1:r},uC=function(e,n){return(e-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},Y2=function(e){return e._end=vs(e._start+(e._tDur/Math.abs(e._ts||e._rts||Fa)||0))},K2=function(e,n){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=vs(r._time-(e._ts>0?n/e._ts:((e._dirty?e.totalDuration():e._tDur)-n)/-e._ts)),Y2(e),r._dirty||ey(r,e)),e},e$=function(e,n){var r;if((n._time||!n._dur&&n._initted||n._start<e._time&&(n._dur||!n.add))&&(r=uC(e.rawTime(),n),(!n._dur||iE(0,n.totalDuration(),r)-n._tTime>Fa)&&n.render(r,!0)),ey(e,n)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-1e-8}},wf=function(e,n,r,s){return n.parent&&um(n),n._start=vs((xd(r)?r:r||e!==Ir?mu(e,r,n):e._time)+n._delay),n._end=vs(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),t$(e,n,"_first","_last",e._sort?"_start":0),ZP(n)||(e._recent=n),s||e$(e,n),e._ts<0&&K2(e,e._tTime),e},n$=function(e,n){return(Hl.ScrollTrigger||lU("scrollTrigger",n))&&Hl.ScrollTrigger.create(n,e)},i$=function(e,n,r,s,a){if(dU(e,n,a),!e._initted)return 1;if(!r&&e._pt&&!pa&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Yq!==Nl.frame)return Kp.push(e),e._lazy=[a,s],1},C1t=function i(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||i(n))},ZP=function(e){var n=e.data;return n==="isFromStart"||n==="isStart"},R1t=function(e,n,r,s){var a=e.ratio,o=n<0||!n&&(!e._start&&C1t(e)&&!(!e._initted&&ZP(e))||(e._ts<0||e._dp._ts<0)&&!ZP(e))?0:1,l=e._rDelay,u=0,f,d,m;if(l&&e._repeat&&(u=iE(0,e._tDur,n),d=v_(u,l),e._yoyo&&d&1&&(o=1-o),d!==v_(e._tTime,l)&&(a=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==a||pa||s||e._zTime===Fa||!n&&e._zTime){if(!e._initted&&i$(e,n,s,r,u))return;for(m=e._zTime,e._zTime=n||(r?Fa:0),r||(r=n&&!m),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=u,f=e._pt;f;)f.r(o,f.d),f=f._next;n<0&&KP(e,n,r,!0),e._onUpdate&&!r&&Ll(e,"onUpdate"),u&&e._repeat&&!r&&e.parent&&Ll(e,"onRepeat"),(n>=e._tDur||n<0)&&e.ratio===o&&(o&&um(e,1),!r&&!pa&&(Ll(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=n)},O1t=function(e,n,r){var s;if(r>n)for(s=e._first;s&&s._start<=r;){if(s.data==="isPause"&&s._start>n)return s;s=s._next}else for(s=e._last;s&&s._start>=r;){if(s.data==="isPause"&&s._start<n)return s;s=s._prev}},__=function(e,n,r,s){var a=e._repeat,o=vs(n)||0,l=e._tTime/e._tDur;return l&&!s&&(e._time*=o/e._dur),e._dur=o,e._tDur=a?a<0?1e10:vs(o*(a+1)+e._rDelay*a):o,l>0&&!s&&K2(e,e._tTime=e._tDur*l),e.parent&&Y2(e),r||ey(e.parent,e),e},FV=function(e){return e instanceof yo?ey(e):__(e,e._dur)},I1t={_start:0,endTime:mS,totalDuration:mS},mu=function i(e,n,r){var s=e.labels,a=e._recent||I1t,o=e.duration()>=Bf?a.endTime(!1):e._dur,l,u,f;return Ys(n)&&(isNaN(n)||n in s)?(u=n.charAt(0),f=n.substr(-1)==="%",l=n.indexOf("="),u==="<"||u===">"?(l>=0&&(n=n.replace(/=/,"")),(u==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(n.substr(1))||0)*(f?(l<0?a:r).totalDuration()/100:1)):l<0?(n in s||(s[n]=o),s[n]):(u=parseFloat(n.charAt(l-1)+n.substr(l+1)),f&&r&&(u=u/100*(Va(r)?r[0]:r).totalDuration()),l>1?i(e,n.substr(0,l-1),r)+u:o+u)):n==null?o:+n},_1=function(e,n,r){var s=xd(n[1]),a=(s?2:1)+(e<2?0:1),o=n[a],l,u;if(s&&(o.duration=n[1]),o.parent=r,e){for(l=o,u=r;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=il(u.vars.inherit)&&u.parent;o.immediateRender=il(l.immediateRender),e<2?o.runBackwards=1:o.startAt=n[a-1]}return new ys(n[0],o,n[a+1])},vm=function(e,n){return e||e===0?n(e):n},iE=function(e,n,r){return r<e?e:r>n?n:r},za=function(e,n){return!Ys(e)||!(n=b1t.exec(e))?"":n[1]},D1t=function(e,n,r){return vm(r,function(s){return iE(e,n,s)})},QP=[].slice,r$=function(e,n){return e&&$f(e)&&"length"in e&&(!n&&!e.length||e.length-1 in e&&$f(e[0]))&&!e.nodeType&&e!==vf},P1t=function(e,n,r){return r===void 0&&(r=[]),e.forEach(function(s){var a;return Ys(s)&&!n||r$(s,1)?(a=r).push.apply(a,Eu(s)):r.push(s)})||r},Eu=function(e,n,r){return _r&&!n&&_r.selector?_r.selector(e):Ys(e)&&!r&&(XP||!b_())?QP.call((n||oU).querySelectorAll(e),0):Va(e)?P1t(e,r):r$(e)?QP.call(e,0):e?[e]:[]},JP=function(e){return e=Eu(e)[0]||pS("Invalid scope")||{},function(n){var r=e.current||e.nativeElement||e;return Eu(n,r.querySelectorAll?r:r===e?pS("Invalid scope")||oU.createElement("div"):e)}},s$=function(e){return e.sort(function(){return .5-Math.random()})},a$=function(e){if(Wr(e))return e;var n=$f(e)?e:{each:e},r=ny(n.ease),s=n.from||0,a=parseFloat(n.base)||0,o={},l=s>0&&s<1,u=isNaN(s)||l,f=n.axis,d=s,m=s;return Ys(s)?d=m={center:.5,edges:.5,end:1}[s]||0:!l&&u&&(d=s[0],m=s[1]),function(y,_,x){var S=(x||n).length,T=o[S],b,M,R,A,I,k,N,L,U;if(!T){if(U=n.grid==="auto"?0:(n.grid||[1,Bf])[1],!U){for(N=-1e8;N<(N=x[U++].getBoundingClientRect().left)&&U<S;);U<S&&U--}for(T=o[S]=[],b=u?Math.min(U,S)*d-.5:s%U,M=U===Bf?0:u?S*m/U-.5:s/U|0,N=0,L=Bf,k=0;k<S;k++)R=k%U-b,A=M-(k/U|0),T[k]=I=f?Math.abs(f==="y"?A:R):Vq(R*R+A*A),I>N&&(N=I),I<L&&(L=I);s==="random"&&s$(T),T.max=N-L,T.min=L,T.v=S=(parseFloat(n.amount)||parseFloat(n.each)*(U>S?S-1:f?f==="y"?S/U:U:Math.max(U,S/U))||0)*(s==="edges"?-1:1),T.b=S<0?a-S:a,T.u=za(n.amount||n.each)||0,r=r&&S<0?g$(r):r}return S=(T[y]-T.min)/T.max||0,vs(T.b+(r?r(S):S)*T.v)+T.u}},tN=function(e){var n=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var s=vs(Math.round(parseFloat(r)/e)*e*n);return(s-s%1)/n+(xd(r)?0:za(r))}},o$=function(e,n){var r=Va(e),s,a;return!r&&$f(e)&&(s=r=e.radius||Bf,e.values?(e=Eu(e.values),(a=!xd(e[0]))&&(s*=s)):e=tN(e.increment)),vm(n,r?Wr(e)?function(o){return a=e(o),Math.abs(a-o)<=s?a:o}:function(o){for(var l=parseFloat(a?o.x:o),u=parseFloat(a?o.y:0),f=Bf,d=0,m=e.length,y,_;m--;)a?(y=e[m].x-l,_=e[m].y-u,y=y*y+_*_):y=Math.abs(e[m]-l),y<f&&(f=y,d=m);return d=!s||f<=s?e[d]:o,a||d===o||xd(o)?d:d+za(o)}:tN(e))},l$=function(e,n,r,s){return vm(Va(e)?!n:r===!0?!!(r=0):!s,function(){return Va(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(s=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(n-e+r*.99))/r)*r*s)/s})},N1t=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(s){return n.reduce(function(a,o){return o(a)},s)}},L1t=function(e,n){return function(r){return e(parseFloat(r))+(n||za(r))}},U1t=function(e,n,r){return c$(e,n,0,1,r)},u$=function(e,n,r){return vm(r,function(s){return e[~~n(s)]})},k1t=function i(e,n,r){var s=n-e;return Va(e)?u$(e,i(0,e.length),n):vm(r,function(a){return(s+(a-e)%s)%s+e})},z1t=function i(e,n,r){var s=n-e,a=s*2;return Va(e)?u$(e,i(0,e.length-1),n):vm(r,function(o){return o=(a+(o-e)%a)%a||0,e+(o>s?a-o:o)})},gS=function(e){for(var n=0,r="",s,a,o,l;~(s=e.indexOf("random(",n));)o=e.indexOf(")",s),l=e.charAt(s+7)==="[",a=e.substr(s+7,o-s-7).match(l?qq:WP),r+=e.substr(n,s-n)+l$(l?a:+a[0],l?0:+a[1],+a[2]||1e-5),n=o+1;return r+e.substr(n,e.length-n)},c$=function(e,n,r,s,a){var o=n-e,l=s-r;return vm(a,function(u){return r+((u-e)/o*l||0)})},B1t=function i(e,n,r,s){var a=isNaN(e+n)?0:function(_){return(1-_)*e+_*n};if(!a){var o=Ys(e),l={},u,f,d,m,y;if(r===!0&&(s=1)&&(r=null),o)e={p:e},n={p:n};else if(Va(e)&&!Va(n)){for(d=[],m=e.length,y=m-2,f=1;f<m;f++)d.push(i(e[f-1],e[f]));m--,a=function(x){x*=m;var S=Math.min(y,~~x);return d[S](x-S)},r=n}else s||(e=y_(Va(e)?[]:{},e));if(!d){for(u in n)hU.call(l,e,u,"get",n[u]);a=function(x){return gU(x,l)||(o?e.p:e)}}}return vm(r,a)},VV=function(e,n,r){var s=e.labels,a=Bf,o,l,u;for(o in s)l=s[o]-n,l<0==!!r&&l&&a>(l=Math.abs(l))&&(u=o,a=l);return u},Ll=function(e,n,r){var s=e.vars,a=s[n],o=_r,l=e._ctx,u,f,d;if(a)return u=s[n+"Params"],f=s.callbackScope||e,r&&Kp.length&&oC(),l&&(_r=l),d=u?a.apply(f,u):a.call(f),_r=o,d},Wx=function(e){return um(e),e.scrollTrigger&&e.scrollTrigger.kill(!!pa),e.progress()<1&&Ll(e,"onInterrupt"),e},R0,f$=[],h$=function(e){if(e)if(e=!e.name&&e.default||e,aU()||e.headless){var n=e.name,r=Wr(e),s=n&&!r&&e.init?function(){this._props=[]}:e,a={init:mS,render:gU,add:hU,kill:eSt,modifier:tSt,rawVars:0},o={targetTest:0,get:0,getSetter:mU,aliases:{},register:0};if(b_(),e!==s){if(Il[n])return;Gl(s,Gl(lC(e,a),o)),y_(s.prototype,y_(a,lC(e,o))),Il[s.prop=n]=s,e.targetTest&&(SA.push(s),uU[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}Xq(n,s),e.register&&e.register(ul,s,sl)}else f$.push(e)},Zi=255,Xx={aqua:[0,Zi,Zi],lime:[0,Zi,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Zi],navy:[0,0,128],white:[Zi,Zi,Zi],olive:[128,128,0],yellow:[Zi,Zi,0],orange:[Zi,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Zi,0,0],pink:[Zi,192,203],cyan:[0,Zi,Zi],transparent:[Zi,Zi,Zi,0]},eD=function(e,n,r){return e+=e<0?1:e>1?-1:0,(e*6<1?n+(r-n)*e*6:e<.5?r:e*3<2?n+(r-n)*(2/3-e)*6:n)*Zi+.5|0},d$=function(e,n,r){var s=e?xd(e)?[e>>16,e>>8&Zi,e&Zi]:0:Xx.black,a,o,l,u,f,d,m,y,_,x;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Xx[e])s=Xx[e];else if(e.charAt(0)==="#"){if(e.length<6&&(a=e.charAt(1),o=e.charAt(2),l=e.charAt(3),e="#"+a+a+o+o+l+l+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&Zi,s&Zi,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&Zi,e&Zi]}else if(e.substr(0,3)==="hsl"){if(s=x=e.match(WP),!n)u=+s[0]%360/360,f=+s[1]/100,d=+s[2]/100,o=d<=.5?d*(f+1):d+f-d*f,a=d*2-o,s.length>3&&(s[3]*=1),s[0]=eD(u+1/3,a,o),s[1]=eD(u,a,o),s[2]=eD(u-1/3,a,o);else if(~e.indexOf("="))return s=e.match(Gq),r&&s.length<4&&(s[3]=1),s}else s=e.match(WP)||Xx.transparent;s=s.map(Number)}return n&&!x&&(a=s[0]/Zi,o=s[1]/Zi,l=s[2]/Zi,m=Math.max(a,o,l),y=Math.min(a,o,l),d=(m+y)/2,m===y?u=f=0:(_=m-y,f=d>.5?_/(2-m-y):_/(m+y),u=m===a?(o-l)/_+(o<l?6:0):m===o?(l-a)/_+2:(a-o)/_+4,u*=60),s[0]=~~(u+.5),s[1]=~~(f*100+.5),s[2]=~~(d*100+.5)),r&&s.length<4&&(s[3]=1),s},p$=function(e){var n=[],r=[],s=-1;return e.split(Zp).forEach(function(a){var o=a.match(C0)||[];n.push.apply(n,o),r.push(s+=o.length+1)}),n.c=r,n},HV=function(e,n,r){var s="",a=(e+s).match(Zp),o=n?"hsla(":"rgba(",l=0,u,f,d,m;if(!a)return e;if(a=a.map(function(y){return(y=d$(y,n,1))&&o+(n?y[0]+","+y[1]+"%,"+y[2]+"%,"+y[3]:y.join(","))+")"}),r&&(d=p$(e),u=r.c,u.join(s)!==d.c.join(s)))for(f=e.replace(Zp,"1").split(C0),m=f.length-1;l<m;l++)s+=f[l]+(~u.indexOf(l)?a.shift()||o+"0,0,0,0)":(d.length?d:a.length?a:r).shift());if(!f)for(f=e.split(Zp),m=f.length-1;l<m;l++)s+=f[l]+a[l];return s+f[m]},Zp=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Xx)i+="|"+e+"\\b";return new RegExp(i+")","gi")}(),F1t=/hsl[a]?\(/,m$=function(e){var n=e.join(" "),r;if(Zp.lastIndex=0,Zp.test(n))return r=F1t.test(n),e[1]=HV(e[1],r),e[0]=HV(e[0],r,p$(e[1])),!0},yS,Nl=function(){var i=Date.now,e=500,n=33,r=i(),s=r,a=1e3/240,o=a,l=[],u,f,d,m,y,_,x=function S(T){var b=i()-s,M=T===!0,R,A,I,k;if((b>e||b<0)&&(r+=b-n),s+=b,I=s-r,R=I-o,(R>0||M)&&(k=++m.frame,y=I-m.time*1e3,m.time=I=I/1e3,o+=R+(R>=a?4:a-R),A=1),M||(u=f(S)),A)for(_=0;_<l.length;_++)l[_](I,y,k,T)};return m={time:0,frame:0,tick:function(){x(!0)},deltaRatio:function(T){return y/(1e3/(T||60))},wake:function(){$q&&(!XP&&aU()&&(vf=XP=window,oU=vf.document||{},Hl.gsap=ul,(vf.gsapVersions||(vf.gsapVersions=[])).push(ul.version),Wq(aC||vf.GreenSockGlobals||!vf.gsap&&vf||{}),f$.forEach(h$)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&m.sleep(),f=d||function(T){return setTimeout(T,o-m.time*1e3+1|0)},yS=1,x(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(u),yS=0,f=mS},lagSmoothing:function(T,b){e=T||1/0,n=Math.min(b||33,e)},fps:function(T){a=1e3/(T||240),o=m.time*1e3+a},add:function(T,b,M){var R=b?function(A,I,k,N){T(A,I,k,N),m.remove(R)}:T;return m.remove(T),l[M?"unshift":"push"](R),b_(),R},remove:function(T,b){~(b=l.indexOf(T))&&l.splice(b,1)&&_>=b&&_--},_listeners:l},m}(),b_=function(){return!yS&&Nl.wake()},ui={},V1t=/^[\d.\-M][\d.\-,\s]/,H1t=/["']/g,G1t=function(e){for(var n={},r=e.substr(1,e.length-3).split(":"),s=r[0],a=1,o=r.length,l,u,f;a<o;a++)u=r[a],l=a!==o-1?u.lastIndexOf(","):u.length,f=u.substr(0,l),n[s]=isNaN(f)?f.replace(H1t,"").trim():+f,s=u.substr(l+1).trim();return n},j1t=function(e){var n=e.indexOf("(")+1,r=e.indexOf(")"),s=e.indexOf("(",n);return e.substring(n,~s&&s<r?e.indexOf(")",r+1):r)},q1t=function(e){var n=(e+"").split("("),r=ui[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[G1t(n[1])]:j1t(e).split(",").map(Qq)):ui._CE&&V1t.test(e)?ui._CE("",e):r},g$=function(e){return function(n){return 1-e(1-n)}},y$=function i(e,n){for(var r=e._first,s;r;)r instanceof yo?i(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?i(r.timeline,n):(s=r._ease,r._ease=r._yEase,r._yEase=s,r._yoyo=n)),r=r._next},ny=function(e,n){return e&&(Wr(e)?e:ui[e]||q1t(e))||n},Dy=function(e,n,r,s){r===void 0&&(r=function(u){return 1-n(1-u)}),s===void 0&&(s=function(u){return u<.5?n(u*2)/2:1-n((1-u)*2)/2});var a={easeIn:n,easeOut:r,easeInOut:s},o;return rl(e,function(l){ui[l]=Hl[l]=a,ui[o=l.toLowerCase()]=r;for(var u in a)ui[o+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=ui[l+"."+u]=a[u]}),a},v$=function(e){return function(n){return n<.5?(1-e(1-n*2))/2:.5+e((n-.5)*2)/2}},nD=function i(e,n,r){var s=n>=1?n:1,a=(r||(e?.3:.45))/(n<1?n:1),o=a/$P*(Math.asin(1/s)||0),l=function(d){return d===1?1:s*Math.pow(2,-10*d)*_1t((d-o)*a)+1},u=e==="out"?l:e==="in"?function(f){return 1-l(1-f)}:v$(l);return a=$P/a,u.config=function(f,d){return i(e,f,d)},u},iD=function i(e,n){n===void 0&&(n=1.70158);var r=function(o){return o?--o*o*((n+1)*o+n)+1:0},s=e==="out"?r:e==="in"?function(a){return 1-r(1-a)}:v$(r);return s.config=function(a){return i(e,a)},s};rl("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,e){var n=e<5?e+1:e;Dy(i+",Power"+(n-1),e?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})});ui.Linear.easeNone=ui.none=ui.Linear.easeIn;Dy("Elastic",nD("in"),nD("out"),nD());(function(i,e){var n=1/e,r=2*n,s=2.5*n,a=function(l){return l<n?i*l*l:l<r?i*Math.pow(l-1.5/e,2)+.75:l<s?i*(l-=2.25/e)*l+.9375:i*Math.pow(l-2.625/e,2)+.984375};Dy("Bounce",function(o){return 1-a(1-o)},a)})(7.5625,2.75);Dy("Expo",function(i){return Math.pow(2,10*(i-1))*i+i*i*i*i*i*i*(1-i)});Dy("Circ",function(i){return-(Vq(1-i*i)-1)});Dy("Sine",function(i){return i===1?1:-v1t(i*g1t)+1});Dy("Back",iD("in"),iD("out"),iD());ui.SteppedEase=ui.steps=Hl.SteppedEase={config:function(e,n){e===void 0&&(e=1);var r=1/e,s=e+(n?0:1),a=n?1:0,o=1-Fa;return function(l){return((s*iE(0,o,l)|0)+a)*r}}};g_.ease=ui["quad.out"];rl("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return cU+=i+","+i+"Params,"});var _$=function(e,n){this.id=y1t++,e._gsap=this,this.target=e,this.harness=n,this.get=n?n.get:Kq,this.set=n?n.getSetter:mU},vS=function(){function i(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,__(this,+n.duration,1,1),this.data=n.data,_r&&(this._ctx=_r,_r.data.push(this)),yS||Nl.wake()}var e=i.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,__(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,s){if(b_(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(K2(this,r),!a._dp||a.parent||e$(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&wf(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===Fa||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),Zq(this,r,s)),this},e.time=function(r,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+BV(this))%(this._dur+this._rDelay)||(r?this._dur:0),s):this._time},e.totalProgress=function(r,s){return arguments.length?this.totalTime(this.totalDuration()*r,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+BV(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,s){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*a,s):this._repeat?v_(this._tTime,a)+1:1},e.timeScale=function(r,s){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===r)return this;var a=this.parent&&this._ts?uC(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-1e-8?0:this._rts,this.totalTime(iE(-Math.abs(this._delay),this._tDur,a),s!==!1),Y2(this),A1t(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(b_(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Fa&&(this._tTime-=Fa)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&wf(s,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(il(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var s=this.parent||this._dp;return s?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?uC(s.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=S1t);var s=pa;return pa=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),pa=s,this},e.globalTime=function(r){for(var s=this,a=arguments.length?r:s.rawTime();s;)a=s._start+a/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(r):a},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,FV(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var s=this._time;return this._rDelay=r,FV(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,s){return this.totalTime(mu(this,r),il(s))},e.restart=function(r,s){return this.play().totalTime(r?-this._delay:0,il(s)),this._dur||(this._zTime=-1e-8),this},e.play=function(r,s){return r!=null&&this.seek(r,s),this.reversed(!1).paused(!1)},e.reverse=function(r,s){return r!=null&&this.seek(r||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(r,s){return r!=null&&this.seek(r,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var r=this.parent||this._dp,s=this._start,a;return!!(!r||this._ts&&this._initted&&r.isActive()&&(a=r.rawTime(!0))>=s&&a<this.endTime(!0)-Fa)},e.eventCallback=function(r,s,a){var o=this.vars;return arguments.length>1?(s?(o[r]=s,a&&(o[r+"Params"]=a),r==="onUpdate"&&(this._onUpdate=s)):delete o[r],this):o[r]},e.then=function(r){var s=this;return new Promise(function(a){var o=Wr(r)?r:Jq,l=function(){var f=s.then;s.then=null,Wr(o)&&(o=o(s))&&(o.then||o===s)&&(s.then=f),a(o),s.then=f};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?l():s._prom=l})},e.kill=function(){Wx(this)},i}();Gl(vS.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var yo=function(i){Fq(e,i);function e(r,s){var a;return r===void 0&&(r={}),a=i.call(this,r)||this,a.labels={},a.smoothChildTiming=!!r.smoothChildTiming,a.autoRemoveChildren=!!r.autoRemoveChildren,a._sort=il(r.sortChildren),Ir&&wf(r.parent||Ir,jh(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),r.scrollTrigger&&n$(jh(a),r.scrollTrigger),a}var n=e.prototype;return n.to=function(s,a,o){return _1(0,arguments,this),this},n.from=function(s,a,o){return _1(1,arguments,this),this},n.fromTo=function(s,a,o,l){return _1(2,arguments,this),this},n.set=function(s,a,o){return a.duration=0,a.parent=this,v1(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new ys(s,a,mu(this,o),1),this},n.call=function(s,a,o){return wf(this,ys.delayedCall(0,s,a),o)},n.staggerTo=function(s,a,o,l,u,f,d){return o.duration=a,o.stagger=o.stagger||l,o.onComplete=f,o.onCompleteParams=d,o.parent=this,new ys(s,o,mu(this,u)),this},n.staggerFrom=function(s,a,o,l,u,f,d){return o.runBackwards=1,v1(o).immediateRender=il(o.immediateRender),this.staggerTo(s,a,o,l,u,f,d)},n.staggerFromTo=function(s,a,o,l,u,f,d,m){return l.startAt=o,v1(l).immediateRender=il(l.immediateRender),this.staggerTo(s,a,l,u,f,d,m)},n.render=function(s,a,o){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,f=this._dur,d=s<=0?0:vs(s),m=this._zTime<0!=s<0&&(this._initted||!f),y,_,x,S,T,b,M,R,A,I,k,N;if(this!==Ir&&d>u&&s>=0&&(d=u),d!==this._tTime||o||m){if(l!==this._time&&f&&(d+=this._time-l,s+=this._time-l),y=d,A=this._start,R=this._ts,b=!R,m&&(f||(l=this._zTime),(s||!a)&&(this._zTime=s)),this._repeat){if(k=this._yoyo,T=f+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(T*100+s,a,o);if(y=vs(d%T),d===u?(S=this._repeat,y=f):(I=vs(d/T),S=~~I,S&&S===I&&(y=f,S--),y>f&&(y=f)),I=v_(this._tTime,T),!l&&this._tTime&&I!==S&&this._tTime-I*T-this._dur<=0&&(I=S),k&&S&1&&(y=f-y,N=1),S!==I&&!this._lock){var L=k&&I&1,U=L===(k&&S&1);if(S<I&&(L=!L),l=L?0:d%f?f:d,this._lock=1,this.render(l||(N?0:vs(S*T)),a,!f)._lock=0,this._tTime=d,!a&&this.parent&&Ll(this,"onRepeat"),this.vars.repeatRefresh&&!N&&(this.invalidate()._lock=1),l&&l!==this._time||b!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(f=this._dur,u=this._tDur,U&&(this._lock=2,l=L?f:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!N&&this.invalidate()),this._lock=0,!this._ts&&!b)return this;y$(this,N)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(M=O1t(this,vs(l),vs(y)),M&&(d-=y-(y=M._start))),this._tTime=d,this._time=y,this._act=!R,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,l=0),!l&&y&&!a&&!S&&(Ll(this,"onStart"),this._tTime!==d))return this;if(y>=l&&s>=0)for(_=this._first;_;){if(x=_._next,(_._act||y>=_._start)&&_._ts&&M!==_){if(_.parent!==this)return this.render(s,a,o);if(_.render(_._ts>0?(y-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(y-_._start)*_._ts,a,o),y!==this._time||!this._ts&&!b){M=0,x&&(d+=this._zTime=-1e-8);break}}_=x}else{_=this._last;for(var O=s<0?s:y;_;){if(x=_._prev,(_._act||O<=_._end)&&_._ts&&M!==_){if(_.parent!==this)return this.render(s,a,o);if(_.render(_._ts>0?(O-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(O-_._start)*_._ts,a,o||pa&&(_._initted||_._startAt)),y!==this._time||!this._ts&&!b){M=0,x&&(d+=this._zTime=O?-1e-8:Fa);break}}_=x}}if(M&&!a&&(this.pause(),M.render(y>=l?0:-1e-8)._zTime=y>=l?1:-1,this._ts))return this._start=A,Y2(this),this.render(s,a,o);this._onUpdate&&!a&&Ll(this,"onUpdate",!0),(d===u&&this._tTime>=this.totalDuration()||!d&&l)&&(A===this._start||Math.abs(R)!==Math.abs(this._ts))&&(this._lock||((s||!f)&&(d===u&&this._ts>0||!d&&this._ts<0)&&um(this,1),!a&&!(s<0&&!l)&&(d||l||!u)&&(Ll(this,d===u&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<u&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(s,a){var o=this;if(xd(a)||(a=mu(this,a,s)),!(s instanceof vS)){if(Va(s))return s.forEach(function(l){return o.add(l,a)}),this;if(Ys(s))return this.addLabel(s,a);if(Wr(s))s=ys.delayedCall(0,s);else return this}return this!==s?wf(this,s,a):this},n.getChildren=function(s,a,o,l){s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=!0),l===void 0&&(l=-1e8);for(var u=[],f=this._first;f;)f._start>=l&&(f instanceof ys?a&&u.push(f):(o&&u.push(f),s&&u.push.apply(u,f.getChildren(!0,a,o)))),f=f._next;return u},n.getById=function(s){for(var a=this.getChildren(1,1,1),o=a.length;o--;)if(a[o].vars.id===s)return a[o]},n.remove=function(s){return Ys(s)?this.removeLabel(s):Wr(s)?this.killTweensOf(s):(s.parent===this&&X2(this,s),s===this._recent&&(this._recent=this._last),ey(this))},n.totalTime=function(s,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=vs(Nl.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),i.prototype.totalTime.call(this,s,a),this._forcing=0,this):this._tTime},n.addLabel=function(s,a){return this.labels[s]=mu(this,a),this},n.removeLabel=function(s){return delete this.labels[s],this},n.addPause=function(s,a,o){var l=ys.delayedCall(0,a||mS,o);return l.data="isPause",this._hasPause=1,wf(this,l,mu(this,s))},n.removePause=function(s){var a=this._first;for(s=mu(this,s);a;)a._start===s&&a.data==="isPause"&&um(a),a=a._next},n.killTweensOf=function(s,a,o){for(var l=this.getTweensOf(s,o),u=l.length;u--;)Fp!==l[u]&&l[u].kill(s,a);return this},n.getTweensOf=function(s,a){for(var o=[],l=Eu(s),u=this._first,f=xd(a),d;u;)u instanceof ys?E1t(u._targets,l)&&(f?(!Fp||u._initted&&u._ts)&&u.globalTime(0)<=a&&u.globalTime(u.totalDuration())>a:!a||u.isActive())&&o.push(u):(d=u.getTweensOf(l,a)).length&&o.push.apply(o,d),u=u._next;return o},n.tweenTo=function(s,a){a=a||{};var o=this,l=mu(o,s),u=a,f=u.startAt,d=u.onStart,m=u.onStartParams,y=u.immediateRender,_,x=ys.to(o,Gl({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:a.duration||Math.abs((l-(f&&"time"in f?f.time:o._time))/o.timeScale())||Fa,onStart:function(){if(o.pause(),!_){var T=a.duration||Math.abs((l-(f&&"time"in f?f.time:o._time))/o.timeScale());x._dur!==T&&__(x,T,0,1).render(x._time,!0,!0),_=1}d&&d.apply(x,m||[])}},a));return y?x.render(0):x},n.tweenFromTo=function(s,a,o){return this.tweenTo(a,Gl({startAt:{time:mu(this,s)}},o))},n.recent=function(){return this._recent},n.nextLabel=function(s){return s===void 0&&(s=this._time),VV(this,mu(this,s))},n.previousLabel=function(s){return s===void 0&&(s=this._time),VV(this,mu(this,s),1)},n.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+Fa)},n.shiftChildren=function(s,a,o){o===void 0&&(o=0);for(var l=this._first,u=this.labels,f;l;)l._start>=o&&(l._start+=s,l._end+=s),l=l._next;if(a)for(f in u)u[f]>=o&&(u[f]+=s);return ey(this)},n.invalidate=function(s){var a=this._first;for(this._lock=0;a;)a.invalidate(s),a=a._next;return i.prototype.invalidate.call(this,s)},n.clear=function(s){s===void 0&&(s=!0);for(var a=this._first,o;a;)o=a._next,this.remove(a),a=o;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),ey(this)},n.totalDuration=function(s){var a=0,o=this,l=o._last,u=Bf,f,d,m;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-s:s));if(o._dirty){for(m=o.parent;l;)f=l._prev,l._dirty&&l.totalDuration(),d=l._start,d>u&&o._sort&&l._ts&&!o._lock?(o._lock=1,wf(o,l,d-l._delay,1)._lock=0):u=d,d<0&&l._ts&&(a-=d,(!m&&!o._dp||m&&m.smoothChildTiming)&&(o._start+=d/o._ts,o._time-=d,o._tTime-=d),o.shiftChildren(-d,!1,-1/0),u=0),l._end>a&&l._ts&&(a=l._end),l=f;__(o,o===Ir&&o._time>a?o._time:a,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(s){if(Ir._ts&&(Zq(Ir,uC(s,Ir)),Yq=Nl.frame),Nl.frame>=kV){kV+=zl.autoSleep||120;var a=Ir._first;if((!a||!a._ts)&&zl.autoSleep&&Nl._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||Nl.sleep()}}},e}(vS);Gl(yo.prototype,{_lock:0,_hasPause:0,_forcing:0});var $1t=function(e,n,r,s,a,o,l){var u=new sl(this._pt,e,n,0,1,w$,null,a),f=0,d=0,m,y,_,x,S,T,b,M;for(u.b=r,u.e=s,r+="",s+="",(b=~s.indexOf("random("))&&(s=gS(s)),o&&(M=[r,s],o(M,e,n),r=M[0],s=M[1]),y=r.match(JI)||[];m=JI.exec(s);)x=m[0],S=s.substring(f,m.index),_?_=(_+1)%5:S.substr(-5)==="rgba("&&(_=1),x!==y[d++]&&(T=parseFloat(y[d-1])||0,u._pt={_next:u._pt,p:S||d===1?S:",",s:T,c:x.charAt(1)==="="?H0(T,x)-T:parseFloat(x)-T,m:_&&_<4?Math.round:0},f=JI.lastIndex);return u.c=f<s.length?s.substring(f,s.length):"",u.fp=l,(jq.test(s)||b)&&(u.e=0),this._pt=u,u},hU=function(e,n,r,s,a,o,l,u,f,d){Wr(s)&&(s=s(a||0,e,o));var m=e[n],y=r!=="get"?r:Wr(m)?f?e[n.indexOf("set")||!Wr(e["get"+n.substr(3)])?n:"get"+n.substr(3)](f):e[n]():m,_=Wr(m)?f?Z1t:E$:pU,x;if(Ys(s)&&(~s.indexOf("random(")&&(s=gS(s)),s.charAt(1)==="="&&(x=H0(y,s)+(za(y)||0),(x||x===0)&&(s=x))),!d||y!==s||eN)return!isNaN(y*s)&&s!==""?(x=new sl(this._pt,e,n,+y||0,s-(y||0),typeof m=="boolean"?J1t:T$,0,_),f&&(x.fp=f),l&&x.modifier(l,this,e),this._pt=x):(!m&&!(n in e)&&lU(n,s),$1t.call(this,e,n,y,s,_,u||zl.stringFilter,f))},W1t=function(e,n,r,s,a){if(Wr(e)&&(e=b1(e,a,n,r,s)),!$f(e)||e.style&&e.nodeType||Va(e)||Hq(e))return Ys(e)?b1(e,a,n,r,s):e;var o={},l;for(l in e)o[l]=b1(e[l],a,n,r,s);return o},b$=function(e,n,r,s,a,o){var l,u,f,d;if(Il[e]&&(l=new Il[e]).init(a,l.rawVars?n[e]:W1t(n[e],s,a,o,r),r,s,o)!==!1&&(r._pt=u=new sl(r._pt,a,e,0,1,l.render,l,0,l.priority),r!==R0))for(f=r._ptLookup[r._targets.indexOf(a)],d=l._props.length;d--;)f[l._props[d]]=u;return l},Fp,eN,dU=function i(e,n,r){var s=e.vars,a=s.ease,o=s.startAt,l=s.immediateRender,u=s.lazy,f=s.onUpdate,d=s.runBackwards,m=s.yoyoEase,y=s.keyframes,_=s.autoRevert,x=e._dur,S=e._startAt,T=e._targets,b=e.parent,M=b&&b.data==="nested"?b.vars.targets:T,R=e._overwrite==="auto"&&!rU,A=e.timeline,I,k,N,L,U,O,F,H,V,X,J,q,W;if(A&&(!y||!a)&&(a="none"),e._ease=ny(a,g_.ease),e._yEase=m?g$(ny(m===!0?a:m,g_.ease)):0,m&&e._yoyo&&!e._repeat&&(m=e._yEase,e._yEase=e._ease,e._ease=m),e._from=!A&&!!s.runBackwards,!A||y&&!s.stagger){if(H=T[0]?ty(T[0]).harness:0,q=H&&s[H.prop],I=lC(s,uU),S&&(S._zTime<0&&S.progress(1),n<0&&d&&l&&!_?S.render(-1,!0):S.revert(d&&x?xA:x1t),S._lazy=0),o){if(um(e._startAt=ys.set(T,Gl({data:"isStart",overwrite:!1,parent:b,immediateRender:!0,lazy:!S&&il(u),startAt:null,delay:0,onUpdate:f&&function(){return Ll(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(pa||!l&&!_)&&e._startAt.revert(xA),l&&x&&n<=0&&r<=0){n&&(e._zTime=n);return}}else if(d&&x&&!S){if(n&&(l=!1),N=Gl({overwrite:!1,data:"isFromStart",lazy:l&&!S&&il(u),immediateRender:l,stagger:0,parent:b},I),q&&(N[H.prop]=q),um(e._startAt=ys.set(T,N)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(pa?e._startAt.revert(xA):e._startAt.render(-1,!0)),e._zTime=n,!l)i(e._startAt,Fa,Fa);else if(!n)return}for(e._pt=e._ptCache=0,u=x&&il(u)||u&&!x,k=0;k<T.length;k++){if(U=T[k],F=U._gsap||fU(T)[k]._gsap,e._ptLookup[k]=X={},YP[F.id]&&Kp.length&&oC(),J=M===T?k:M.indexOf(U),H&&(V=new H).init(U,q||I,e,J,M)!==!1&&(e._pt=L=new sl(e._pt,U,V.name,0,1,V.render,V,0,V.priority),V._props.forEach(function(K){X[K]=L}),V.priority&&(O=1)),!H||q)for(N in I)Il[N]&&(V=b$(N,I,e,J,U,M))?V.priority&&(O=1):X[N]=L=hU.call(e,U,N,"get",I[N],J,M,0,s.stringFilter);e._op&&e._op[k]&&e.kill(U,e._op[k]),R&&e._pt&&(Fp=e,Ir.killTweensOf(U,X,e.globalTime(n)),W=!e.parent,Fp=0),e._pt&&u&&(YP[F.id]=1)}O&&A$(e),e._onInit&&e._onInit(e)}e._onUpdate=f,e._initted=(!e._op||e._pt)&&!W,y&&n<=0&&A.render(Bf,!0,!0)},X1t=function(e,n,r,s,a,o,l,u){var f=(e._pt&&e._ptCache||(e._ptCache={}))[n],d,m,y,_;if(!f)for(f=e._ptCache[n]=[],y=e._ptLookup,_=e._targets.length;_--;){if(d=y[_][n],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==n&&d.fp!==n;)d=d._next;if(!d)return eN=1,e.vars[n]="+=0",dU(e,l),eN=0,u?pS(n+" not eligible for reset"):1;f.push(d)}for(_=f.length;_--;)m=f[_],d=m._pt||m,d.s=(s||s===0)&&!a?s:d.s+(s||0)+o*d.c,d.c=r-d.s,m.e&&(m.e=ns(r)+za(m.e)),m.b&&(m.b=d.s+za(m.b))},Y1t=function(e,n){var r=e[0]?ty(e[0]).harness:0,s=r&&r.aliases,a,o,l,u;if(!s)return n;a=y_({},n);for(o in s)if(o in a)for(u=s[o].split(","),l=u.length;l--;)a[u[l]]=a[o];return a},K1t=function(e,n,r,s){var a=n.ease||s||"power1.inOut",o,l;if(Va(n))l=r[e]||(r[e]=[]),n.forEach(function(u,f){return l.push({t:f/(n.length-1)*100,v:u,e:a})});else for(o in n)l=r[o]||(r[o]=[]),o==="ease"||l.push({t:parseFloat(e),v:n[o],e:a})},b1=function(e,n,r,s,a){return Wr(e)?e.call(n,r,s,a):Ys(e)&&~e.indexOf("random(")?gS(e):e},x$=cU+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",S$={};rl(x$+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return S$[i]=1});var ys=function(i){Fq(e,i);function e(r,s,a,o){var l;typeof s=="number"&&(a.duration=s,s=a,a=null),l=i.call(this,o?s:v1(s))||this;var u=l.vars,f=u.duration,d=u.delay,m=u.immediateRender,y=u.stagger,_=u.overwrite,x=u.keyframes,S=u.defaults,T=u.scrollTrigger,b=u.yoyoEase,M=s.parent||Ir,R=(Va(r)||Hq(r)?xd(r[0]):"length"in s)?[r]:Eu(r),A,I,k,N,L,U,O,F;if(l._targets=R.length?fU(R):pS("GSAP target "+r+" not found. https://gsap.com",!zl.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=_,x||y||jw(f)||jw(d)){if(s=l.vars,A=l.timeline=new yo({data:"nested",defaults:S||{},targets:M&&M.data==="nested"?M.vars.targets:R}),A.kill(),A.parent=A._dp=jh(l),A._start=0,y||jw(f)||jw(d)){if(N=R.length,O=y&&a$(y),$f(y))for(L in y)~x$.indexOf(L)&&(F||(F={}),F[L]=y[L]);for(I=0;I<N;I++)k=lC(s,S$),k.stagger=0,b&&(k.yoyoEase=b),F&&y_(k,F),U=R[I],k.duration=+b1(f,jh(l),I,U,R),k.delay=(+b1(d,jh(l),I,U,R)||0)-l._delay,!y&&N===1&&k.delay&&(l._delay=d=k.delay,l._start+=d,k.delay=0),A.to(U,k,O?O(I,U,R):0),A._ease=ui.none;A.duration()?f=d=0:l.timeline=0}else if(x){v1(Gl(A.vars.defaults,{ease:"none"})),A._ease=ny(x.ease||s.ease||"none");var H=0,V,X,J;if(Va(x))x.forEach(function(q){return A.to(R,q,">")}),A.duration();else{k={};for(L in x)L==="ease"||L==="easeEach"||K1t(L,x[L],k,x.easeEach);for(L in k)for(V=k[L].sort(function(q,W){return q.t-W.t}),H=0,I=0;I<V.length;I++)X=V[I],J={ease:X.e,duration:(X.t-(I?V[I-1].t:0))/100*f},J[L]=X.v,A.to(R,J,H),H+=J.duration;A.duration()<f&&A.to({},{duration:f-A.duration()})}}f||l.duration(f=A.duration())}else l.timeline=0;return _===!0&&!rU&&(Fp=jh(l),Ir.killTweensOf(R),Fp=0),wf(M,jh(l),a),s.reversed&&l.reverse(),s.paused&&l.paused(!0),(m||!f&&!x&&l._start===vs(M._time)&&il(m)&&M1t(jh(l))&&M.data!=="nested")&&(l._tTime=-1e-8,l.render(Math.max(0,-d)||0)),T&&n$(jh(l),T),l}var n=e.prototype;return n.render=function(s,a,o){var l=this._time,u=this._tDur,f=this._dur,d=s<0,m=s>u-Fa&&!d?u:s<Fa?0:s,y,_,x,S,T,b,M,R,A;if(!f)R1t(this,s,a,o);else if(m!==this._tTime||!s||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(y=m,R=this.timeline,this._repeat){if(S=f+this._rDelay,this._repeat<-1&&d)return this.totalTime(S*100+s,a,o);if(y=vs(m%S),m===u?(x=this._repeat,y=f):(T=vs(m/S),x=~~T,x&&x===T?(y=f,x--):y>f&&(y=f)),b=this._yoyo&&x&1,b&&(A=this._yEase,y=f-y),T=v_(this._tTime,S),y===l&&!o&&this._initted&&x===T)return this._tTime=m,this;x!==T&&(R&&this._yEase&&y$(R,b),this.vars.repeatRefresh&&!b&&!this._lock&&y!==S&&this._initted&&(this._lock=o=1,this.render(vs(S*x),!0).invalidate()._lock=0))}if(!this._initted){if(i$(this,d?s:y,o,a,m))return this._tTime=0,this;if(l!==this._time&&!(o&&this.vars.repeatRefresh&&x!==T))return this;if(f!==this._dur)return this.render(s,a,o)}if(this._tTime=m,this._time=y,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=M=(A||this._ease)(y/f),this._from&&(this.ratio=M=1-M),y&&!l&&!a&&!x&&(Ll(this,"onStart"),this._tTime!==m))return this;for(_=this._pt;_;)_.r(M,_.d),_=_._next;R&&R.render(s<0?s:R._dur*R._ease(y/this._dur),a,o)||this._startAt&&(this._zTime=s),this._onUpdate&&!a&&(d&&KP(this,s,a,o),Ll(this,"onUpdate")),this._repeat&&x!==T&&this.vars.onRepeat&&!a&&this.parent&&Ll(this,"onRepeat"),(m===this._tDur||!m)&&this._tTime===m&&(d&&!this._onUpdate&&KP(this,s,!0,!0),(s||!f)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&um(this,1),!a&&!(d&&!l)&&(m||l||b)&&(Ll(this,m===u?"onComplete":"onReverseComplete",!0),this._prom&&!(m<u&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),i.prototype.invalidate.call(this,s)},n.resetTo=function(s,a,o,l,u){yS||Nl.wake(),this._ts||this.play();var f=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||dU(this,f),d=this._ease(f/this._dur),X1t(this,s,a,o,l,d,f,u)?this.resetTo(s,a,o,l,1):(K2(this,0),this.parent||t$(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(s,a){if(a===void 0&&(a="all"),!s&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?Wx(this):this.scrollTrigger&&this.scrollTrigger.kill(!!pa),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(s,a,Fp&&Fp.vars.overwrite!==!0)._first||Wx(this),this.parent&&o!==this.timeline.totalDuration()&&__(this,this._dur*this.timeline._tDur/o,0,1),this}var l=this._targets,u=s?Eu(s):l,f=this._ptLookup,d=this._pt,m,y,_,x,S,T,b;if((!a||a==="all")&&w1t(l,u))return a==="all"&&(this._pt=0),Wx(this);for(m=this._op=this._op||[],a!=="all"&&(Ys(a)&&(S={},rl(a,function(M){return S[M]=1}),a=S),a=Y1t(l,a)),b=l.length;b--;)if(~u.indexOf(l[b])){y=f[b],a==="all"?(m[b]=a,x=y,_={}):(_=m[b]=m[b]||{},x=a);for(S in x)T=y&&y[S],T&&((!("kill"in T.d)||T.d.kill(S)===!0)&&X2(this,T,"_pt"),delete y[S]),_!=="all"&&(_[S]=1)}return this._initted&&!this._pt&&d&&Wx(this),this},e.to=function(s,a){return new e(s,a,arguments[2])},e.from=function(s,a){return _1(1,arguments)},e.delayedCall=function(s,a,o,l){return new e(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:a,onReverseComplete:a,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:l})},e.fromTo=function(s,a,o){return _1(2,arguments)},e.set=function(s,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new e(s,a)},e.killTweensOf=function(s,a,o){return Ir.killTweensOf(s,a,o)},e}(vS);Gl(ys.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});rl("staggerTo,staggerFrom,staggerFromTo",function(i){ys[i]=function(){var e=new yo,n=QP.call(arguments,0);return n.splice(i==="staggerFromTo"?5:4,0,0),e[i].apply(e,n)}});var pU=function(e,n,r){return e[n]=r},E$=function(e,n,r){return e[n](r)},Z1t=function(e,n,r,s){return e[n](s.fp,r)},Q1t=function(e,n,r){return e.setAttribute(n,r)},mU=function(e,n){return Wr(e[n])?E$:sU(e[n])&&e.setAttribute?Q1t:pU},T$=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e6)/1e6,n)},J1t=function(e,n){return n.set(n.t,n.p,!!(n.s+n.c*e),n)},w$=function(e,n){var r=n._pt,s="";if(!e&&n.b)s=n.b;else if(e===1&&n.e)s=n.e;else{for(;r;)s=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+s,r=r._next;s+=n.c}n.set(n.t,n.p,s,n)},gU=function(e,n){for(var r=n._pt;r;)r.r(e,r.d),r=r._next},tSt=function(e,n,r,s){for(var a=this._pt,o;a;)o=a._next,a.p===s&&a.modifier(e,n,r),a=o},eSt=function(e){for(var n=this._pt,r,s;n;)s=n._next,n.p===e&&!n.op||n.op===e?X2(this,n,"_pt"):n.dep||(r=1),n=s;return!r},nSt=function(e,n,r,s){s.mSet(e,n,s.m.call(s.tween,r,s.mt),s)},A$=function(e){for(var n=e._pt,r,s,a,o;n;){for(r=n._next,s=a;s&&s.pr>n.pr;)s=s._next;(n._prev=s?s._prev:o)?n._prev._next=n:a=n,(n._next=s)?s._prev=n:o=n,n=r}e._pt=a},sl=function(){function i(n,r,s,a,o,l,u,f,d){this.t=r,this.s=a,this.c=o,this.p=s,this.r=l||T$,this.d=u||this,this.set=f||pU,this.pr=d||0,this._next=n,n&&(n._prev=this)}var e=i.prototype;return e.modifier=function(r,s,a){this.mSet=this.mSet||this.set,this.set=nSt,this.m=r,this.mt=a,this.tween=s},i}();rl(cU+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return uU[i]=1});Hl.TweenMax=Hl.TweenLite=ys;Hl.TimelineLite=Hl.TimelineMax=yo;Ir=new yo({sortChildren:!1,defaults:g_,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});zl.stringFilter=m$;var iy=[],EA={},iSt=[],GV=0,rSt=0,rD=function(e){return(EA[e]||iSt).map(function(n){return n()})},nN=function(){var e=Date.now(),n=[];e-GV>2&&(rD("matchMediaInit"),iy.forEach(function(r){var s=r.queries,a=r.conditions,o,l,u,f;for(l in s)o=vf.matchMedia(s[l]).matches,o&&(u=1),o!==a[l]&&(a[l]=o,f=1);f&&(r.revert(),u&&n.push(r))}),rD("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r,function(s){return r.add(null,s)})}),GV=e,rD("matchMedia"))},M$=function(){function i(n,r){this.selector=r&&JP(r),this.data=[],this._r=[],this.isReverted=!1,this.id=rSt++,n&&this.add(n)}var e=i.prototype;return e.add=function(r,s,a){Wr(r)&&(a=s,s=r,r=Wr);var o=this,l=function(){var f=_r,d=o.selector,m;return f&&f!==o&&f.data.push(o),a&&(o.selector=JP(a)),_r=o,m=s.apply(o,arguments),Wr(m)&&o._r.push(m),_r=f,o.selector=d,o.isReverted=!1,m};return o.last=l,r===Wr?l(o,function(u){return o.add(null,u)}):r?o[r]=l:l},e.ignore=function(r){var s=_r;_r=null,r(this),_r=s},e.getTweens=function(){var r=[];return this.data.forEach(function(s){return s instanceof i?r.push.apply(r,s.getTweens()):s instanceof ys&&!(s.parent&&s.parent.data==="nested")&&r.push(s)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,s){var a=this;if(r?function(){for(var l=a.getTweens(),u=a.data.length,f;u--;)f=a.data[u],f.data==="isFlip"&&(f.revert(),f.getChildren(!0,!0,!1).forEach(function(d){return l.splice(l.indexOf(d),1)}));for(l.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,m){return m.g-d.g||-1/0}).forEach(function(d){return d.t.revert(r)}),u=a.data.length;u--;)f=a.data[u],f instanceof yo?f.data!=="nested"&&(f.scrollTrigger&&f.scrollTrigger.revert(),f.kill()):!(f instanceof ys)&&f.revert&&f.revert(r);a._r.forEach(function(d){return d(r,a)}),a.isReverted=!0}():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),s)for(var o=iy.length;o--;)iy[o].id===this.id&&iy.splice(o,1)},e.revert=function(r){this.kill(r||{})},i}(),sSt=function(){function i(n){this.contexts=[],this.scope=n,_r&&_r.data.push(this)}var e=i.prototype;return e.add=function(r,s,a){$f(r)||(r={matches:r});var o=new M$(0,a||this.scope),l=o.conditions={},u,f,d;_r&&!o.selector&&(o.selector=_r.selector),this.contexts.push(o),s=o.add("onMatch",s),o.queries=r;for(f in r)f==="all"?d=1:(u=vf.matchMedia(r[f]),u&&(iy.indexOf(o)<0&&iy.push(o),(l[f]=u.matches)&&(d=1),u.addListener?u.addListener(nN):u.addEventListener("change",nN)));return d&&s(o,function(m){return o.add(null,m)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(s){return s.kill(r,!0)})},i}(),cC={registerPlugin:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(s){return h$(s)})},timeline:function(e){return new yo(e)},getTweensOf:function(e,n){return Ir.getTweensOf(e,n)},getProperty:function(e,n,r,s){Ys(e)&&(e=Eu(e)[0]);var a=ty(e||{}).get,o=r?Jq:Qq;return r==="native"&&(r=""),e&&(n?o((Il[n]&&Il[n].get||a)(e,n,r,s)):function(l,u,f){return o((Il[l]&&Il[l].get||a)(e,l,u,f))})},quickSetter:function(e,n,r){if(e=Eu(e),e.length>1){var s=e.map(function(d){return ul.quickSetter(d,n,r)}),a=s.length;return function(d){for(var m=a;m--;)s[m](d)}}e=e[0]||{};var o=Il[n],l=ty(e),u=l.harness&&(l.harness.aliases||{})[n]||n,f=o?function(d){var m=new o;R0._pt=0,m.init(e,r?d+r:d,R0,0,[e]),m.render(1,m),R0._pt&&gU(1,R0)}:l.set(e,u);return o?f:function(d){return f(e,u,r?d+r:d,l,1)}},quickTo:function(e,n,r){var s,a=ul.to(e,Gl((s={},s[n]="+=0.1",s.paused=!0,s.stagger=0,s),r||{})),o=function(u,f,d){return a.resetTo(n,u,f,d)};return o.tween=a,o},isTweening:function(e){return Ir.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=ny(e.ease,g_.ease)),zV(g_,e||{})},config:function(e){return zV(zl,e||{})},registerEffect:function(e){var n=e.name,r=e.effect,s=e.plugins,a=e.defaults,o=e.extendTimeline;(s||"").split(",").forEach(function(l){return l&&!Il[l]&&!Hl[l]&&pS(n+" effect requires "+l+" plugin.")}),tD[n]=function(l,u,f){return r(Eu(l),Gl(u||{},a),f)},o&&(yo.prototype[n]=function(l,u,f){return this.add(tD[n](l,$f(u)?u:(f=u)&&{},this),f)})},registerEase:function(e,n){ui[e]=ny(n)},parseEase:function(e,n){return arguments.length?ny(e,n):ui},getById:function(e){return Ir.getById(e)},exportRoot:function(e,n){e===void 0&&(e={});var r=new yo(e),s,a;for(r.smoothChildTiming=il(e.smoothChildTiming),Ir.remove(r),r._dp=0,r._time=r._tTime=Ir._time,s=Ir._first;s;)a=s._next,(n||!(!s._dur&&s instanceof ys&&s.vars.onComplete===s._targets[0]))&&wf(r,s,s._start-s._delay),s=a;return wf(Ir,r,0),r},context:function(e,n){return e?new M$(e,n):_r},matchMedia:function(e){return new sSt(e)},matchMediaRefresh:function(){return iy.forEach(function(e){var n=e.conditions,r,s;for(s in n)n[s]&&(n[s]=!1,r=1);r&&e.revert()})||nN()},addEventListener:function(e,n){var r=EA[e]||(EA[e]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(e,n){var r=EA[e],s=r&&r.indexOf(n);s>=0&&r.splice(s,1)},utils:{wrap:k1t,wrapYoyo:z1t,distribute:a$,random:l$,snap:o$,normalize:U1t,getUnit:za,clamp:D1t,splitColor:d$,toArray:Eu,selector:JP,mapRange:c$,pipe:N1t,unitize:L1t,interpolate:B1t,shuffle:s$},install:Wq,effects:tD,ticker:Nl,updateRoot:yo.updateRoot,plugins:Il,globalTimeline:Ir,core:{PropTween:sl,globals:Xq,Tween:ys,Timeline:yo,Animation:vS,getCache:ty,_removeLinkedListItem:X2,reverting:function(){return pa},context:function(e){return e&&_r&&(_r.data.push(e),e._ctx=_r),_r},suppressOverwrites:function(e){return rU=e}}};rl("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return cC[i]=ys[i]});Nl.add(yo.updateRoot);R0=cC.to({},{duration:0});var aSt=function(e,n){for(var r=e._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},oSt=function(e,n){var r=e._targets,s,a,o;for(s in n)for(a=r.length;a--;)o=e._ptLookup[a][s],o&&(o=o.d)&&(o._pt&&(o=aSt(o,s)),o&&o.modifier&&o.modifier(n[s],e,r[a],s))},sD=function(e,n){return{name:e,rawVars:1,init:function(s,a,o){o._onInit=function(l){var u,f;if(Ys(a)&&(u={},rl(a,function(d){return u[d]=1}),a=u),n){u={};for(f in a)u[f]=n(a[f]);a=u}oSt(l,a)}}}},ul=cC.registerPlugin({name:"attr",init:function(e,n,r,s,a){var o,l,u;this.tween=r;for(o in n)u=e.getAttribute(o)||"",l=this.add(e,"setAttribute",(u||0)+"",n[o],s,a,0,0,o),l.op=o,l.b=u,this._props.push(o)},render:function(e,n){for(var r=n._pt;r;)pa?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,n){for(var r=n.length;r--;)this.add(e,r,e[r]||0,n[r],0,0,0,0,0,1)}},sD("roundProps",tN),sD("modifiers"),sD("snap",o$))||cC;ys.version=yo.version=ul.version="3.12.7";$q=1;aU()&&b_();ui.Power0;ui.Power1;ui.Power2;ui.Power3;ui.Power4;ui.Linear;ui.Quad;ui.Cubic;ui.Quart;ui.Quint;ui.Strong;ui.Elastic;ui.Back;ui.SteppedEase;ui.Bounce;ui.Sine;ui.Expo;ui.Circ;/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var jV,Vp,G0,yU,qg,qV,vU,lSt=function(){return typeof window<"u"},Sd={},Ng=180/Math.PI,j0=Math.PI/180,c0=Math.atan2,$V=1e8,_U=/([A-Z])/g,uSt=/(left|right|width|margin|padding|x)/i,cSt=/[\s,\(]\S/,Mf={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},iN=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},fSt=function(e,n){return n.set(n.t,n.p,e===1?n.e:Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},hSt=function(e,n){return n.set(n.t,n.p,e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},dSt=function(e,n){var r=n.s+n.c*e;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},C$=function(e,n){return n.set(n.t,n.p,e?n.e:n.b,n)},R$=function(e,n){return n.set(n.t,n.p,e!==1?n.b:n.e,n)},pSt=function(e,n,r){return e.style[n]=r},mSt=function(e,n,r){return e.style.setProperty(n,r)},gSt=function(e,n,r){return e._gsap[n]=r},ySt=function(e,n,r){return e._gsap.scaleX=e._gsap.scaleY=r},vSt=function(e,n,r,s,a){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(a,o)},_St=function(e,n,r,s,a){var o=e._gsap;o[n]=r,o.renderTransform(a,o)},Pr="transform",al=Pr+"Origin",bSt=function i(e,n){var r=this,s=this.target,a=s.style,o=s._gsap;if(e in Sd&&a){if(this.tfm=this.tfm||{},e!=="transform")e=Mf[e]||e,~e.indexOf(",")?e.split(",").forEach(function(l){return r.tfm[l]=$h(s,l)}):this.tfm[e]=o.x?o[e]:$h(s,e),e===al&&(this.tfm.zOrigin=o.zOrigin);else return Mf.transform.split(",").forEach(function(l){return i.call(r,l,n)});if(this.props.indexOf(Pr)>=0)return;o.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(al,n,"")),e=Pr}(a||n)&&this.props.push(e,n,a[e])},O$=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},xSt=function(){var e=this.props,n=this.target,r=n.style,s=n._gsap,a,o;for(a=0;a<e.length;a+=3)e[a+1]?e[a+1]===2?n[e[a]](e[a+2]):n[e[a]]=e[a+2]:e[a+2]?r[e[a]]=e[a+2]:r.removeProperty(e[a].substr(0,2)==="--"?e[a]:e[a].replace(_U,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)s[o]=this.tfm[o];s.svg&&(s.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),a=vU(),(!a||!a.isStart)&&!r[Pr]&&(O$(r),s.zOrigin&&r[al]&&(r[al]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},I$=function(e,n){var r={target:e,props:[],revert:xSt,save:bSt};return e._gsap||ul.core.getCache(e),n&&e.style&&e.nodeType&&n.split(",").forEach(function(s){return r.save(s)}),r},D$,rN=function(e,n){var r=Vp.createElementNS?Vp.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Vp.createElement(e);return r&&r.style?r:Vp.createElement(e)},Ff=function i(e,n,r){var s=getComputedStyle(e);return s[n]||s.getPropertyValue(n.replace(_U,"-$1").toLowerCase())||s.getPropertyValue(n)||!r&&i(e,x_(n)||n,1)||""},WV="O,Moz,ms,Ms,Webkit".split(","),x_=function(e,n,r){var s=n||qg,a=s.style,o=5;if(e in a&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(WV[o]+e in a););return o<0?null:(o===3?"ms":o>=0?WV[o]:"")+e},sN=function(){lSt()&&window.document&&(jV=window,Vp=jV.document,G0=Vp.documentElement,qg=rN("div")||{style:{}},rN("div"),Pr=x_(Pr),al=Pr+"Origin",qg.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",D$=!!x_("perspective"),vU=ul.core.reverting,yU=1)},XV=function(e){var n=e.ownerSVGElement,r=rN("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=e.cloneNode(!0),a;s.style.display="block",r.appendChild(s),G0.appendChild(r);try{a=s.getBBox()}catch{}return r.removeChild(s),G0.removeChild(r),a},YV=function(e,n){for(var r=n.length;r--;)if(e.hasAttribute(n[r]))return e.getAttribute(n[r])},P$=function(e){var n,r;try{n=e.getBBox()}catch{n=XV(e),r=1}return n&&(n.width||n.height)||r||(n=XV(e)),n&&!n.width&&!n.x&&!n.y?{x:+YV(e,["x","cx","x1"])||0,y:+YV(e,["y","cy","y1"])||0,width:0,height:0}:n},N$=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&P$(e))},xy=function(e,n){if(n){var r=e.style,s;n in Sd&&n!==al&&(n=Pr),r.removeProperty?(s=n.substr(0,2),(s==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(s==="--"?n:n.replace(_U,"-$1").toLowerCase())):r.removeAttribute(n)}},Hp=function(e,n,r,s,a,o){var l=new sl(e._pt,n,r,0,1,o?R$:C$);return e._pt=l,l.b=s,l.e=a,e._props.push(r),l},KV={deg:1,rad:1,turn:1},SSt={grid:1,flex:1},cm=function i(e,n,r,s){var a=parseFloat(r)||0,o=(r+"").trim().substr((a+"").length)||"px",l=qg.style,u=uSt.test(n),f=e.tagName.toLowerCase()==="svg",d=(f?"client":"offset")+(u?"Width":"Height"),m=100,y=s==="px",_=s==="%",x,S,T,b;if(s===o||!a||KV[s]||KV[o])return a;if(o!=="px"&&!y&&(a=i(e,n,r,"px")),b=e.getCTM&&N$(e),(_||o==="%")&&(Sd[n]||~n.indexOf("adius")))return x=b?e.getBBox()[u?"width":"height"]:e[d],ns(_?a/x*m:a/100*x);if(l[u?"width":"height"]=m+(y?o:s),S=s!=="rem"&&~n.indexOf("adius")||s==="em"&&e.appendChild&&!f?e:e.parentNode,b&&(S=(e.ownerSVGElement||{}).parentNode),(!S||S===Vp||!S.appendChild)&&(S=Vp.body),T=S._gsap,T&&_&&T.width&&u&&T.time===Nl.time&&!T.uncache)return ns(a/T.width*m);if(_&&(n==="height"||n==="width")){var M=e.style[n];e.style[n]=m+s,x=e[d],M?e.style[n]=M:xy(e,n)}else(_||o==="%")&&!SSt[Ff(S,"display")]&&(l.position=Ff(e,"position")),S===e&&(l.position="static"),S.appendChild(qg),x=qg[d],S.removeChild(qg),l.position="absolute";return u&&_&&(T=ty(S),T.time=Nl.time,T.width=S[d]),ns(y?x*a/m:x&&a?m/x*a:0)},$h=function(e,n,r,s){var a;return yU||sN(),n in Mf&&n!=="transform"&&(n=Mf[n],~n.indexOf(",")&&(n=n.split(",")[0])),Sd[n]&&n!=="transform"?(a=bS(e,s),a=n!=="transformOrigin"?a[n]:a.svg?a.origin:hC(Ff(e,al))+" "+a.zOrigin+"px"):(a=e.style[n],(!a||a==="auto"||s||~(a+"").indexOf("calc("))&&(a=fC[n]&&fC[n](e,n,r)||Ff(e,n)||Kq(e,n)||(n==="opacity"?1:0))),r&&!~(a+"").trim().indexOf(" ")?cm(e,n,a,r)+r:a},ESt=function(e,n,r,s){if(!r||r==="none"){var a=x_(n,e,1),o=a&&Ff(e,a,1);o&&o!==r?(n=a,r=o):n==="borderColor"&&(r=Ff(e,"borderTopColor"))}var l=new sl(this._pt,e.style,n,0,1,w$),u=0,f=0,d,m,y,_,x,S,T,b,M,R,A,I;if(l.b=r,l.e=s,r+="",s+="",s==="auto"&&(S=e.style[n],e.style[n]=s,s=Ff(e,n)||s,S?e.style[n]=S:xy(e,n)),d=[r,s],m$(d),r=d[0],s=d[1],y=r.match(C0)||[],I=s.match(C0)||[],I.length){for(;m=C0.exec(s);)T=m[0],M=s.substring(u,m.index),x?x=(x+1)%5:(M.substr(-5)==="rgba("||M.substr(-5)==="hsla(")&&(x=1),T!==(S=y[f++]||"")&&(_=parseFloat(S)||0,A=S.substr((_+"").length),T.charAt(1)==="="&&(T=H0(_,T)+A),b=parseFloat(T),R=T.substr((b+"").length),u=C0.lastIndex-R.length,R||(R=R||zl.units[n]||A,u===s.length&&(s+=R,l.e+=R)),A!==R&&(_=cm(e,n,S,R)||0),l._pt={_next:l._pt,p:M||f===1?M:",",s:_,c:b-_,m:x&&x<4||n==="zIndex"?Math.round:0});l.c=u<s.length?s.substring(u,s.length):""}else l.r=n==="display"&&s==="none"?R$:C$;return jq.test(s)&&(l.e=0),this._pt=l,l},ZV={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},TSt=function(e){var n=e.split(" "),r=n[0],s=n[1]||"50%";return(r==="top"||r==="bottom"||s==="left"||s==="right")&&(e=r,r=s,s=e),n[0]=ZV[r]||r,n[1]=ZV[s]||s,n.join(" ")},wSt=function(e,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,s=r.style,a=n.u,o=r._gsap,l,u,f;if(a==="all"||a===!0)s.cssText="",u=1;else for(a=a.split(","),f=a.length;--f>-1;)l=a[f],Sd[l]&&(u=1,l=l==="transformOrigin"?al:Pr),xy(r,l);u&&(xy(r,Pr),o&&(o.svg&&r.removeAttribute("transform"),s.scale=s.rotate=s.translate="none",bS(r,1),o.uncache=1,O$(s)))}},fC={clearProps:function(e,n,r,s,a){if(a.data!=="isFromStart"){var o=e._pt=new sl(e._pt,n,r,0,0,wSt);return o.u=s,o.pr=-10,o.tween=a,e._props.push(r),1}}},_S=[1,0,0,1,0,0],L$={},U$=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},QV=function(e){var n=Ff(e,Pr);return U$(n)?_S:n.substr(7).match(Gq).map(ns)},bU=function(e,n){var r=e._gsap||ty(e),s=e.style,a=QV(e),o,l,u,f;return r.svg&&e.getAttribute("transform")?(u=e.transform.baseVal.consolidate().matrix,a=[u.a,u.b,u.c,u.d,u.e,u.f],a.join(",")==="1,0,0,1,0,0"?_S:a):(a===_S&&!e.offsetParent&&e!==G0&&!r.svg&&(u=s.display,s.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(f=1,l=e.nextElementSibling,G0.appendChild(e)),a=QV(e),u?s.display=u:xy(e,"display"),f&&(l?o.insertBefore(e,l):o?o.appendChild(e):G0.removeChild(e))),n&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},aN=function(e,n,r,s,a,o){var l=e._gsap,u=a||bU(e,!0),f=l.xOrigin||0,d=l.yOrigin||0,m=l.xOffset||0,y=l.yOffset||0,_=u[0],x=u[1],S=u[2],T=u[3],b=u[4],M=u[5],R=n.split(" "),A=parseFloat(R[0])||0,I=parseFloat(R[1])||0,k,N,L,U;r?u!==_S&&(N=_*T-x*S)&&(L=A*(T/N)+I*(-S/N)+(S*M-T*b)/N,U=A*(-x/N)+I*(_/N)-(_*M-x*b)/N,A=L,I=U):(k=P$(e),A=k.x+(~R[0].indexOf("%")?A/100*k.width:A),I=k.y+(~(R[1]||R[0]).indexOf("%")?I/100*k.height:I)),s||s!==!1&&l.smooth?(b=A-f,M=I-d,l.xOffset=m+(b*_+M*S)-b,l.yOffset=y+(b*x+M*T)-M):l.xOffset=l.yOffset=0,l.xOrigin=A,l.yOrigin=I,l.smooth=!!s,l.origin=n,l.originIsAbsolute=!!r,e.style[al]="0px 0px",o&&(Hp(o,l,"xOrigin",f,A),Hp(o,l,"yOrigin",d,I),Hp(o,l,"xOffset",m,l.xOffset),Hp(o,l,"yOffset",y,l.yOffset)),e.setAttribute("data-svg-origin",A+" "+I)},bS=function(e,n){var r=e._gsap||new _$(e);if("x"in r&&!n&&!r.uncache)return r;var s=e.style,a=r.scaleX<0,o="px",l="deg",u=getComputedStyle(e),f=Ff(e,al)||"0",d,m,y,_,x,S,T,b,M,R,A,I,k,N,L,U,O,F,H,V,X,J,q,W,K,et,Q,dt,yt,xt,nt,ht;return d=m=y=S=T=b=M=R=A=0,_=x=1,r.svg=!!(e.getCTM&&N$(e)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(s[Pr]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[Pr]!=="none"?u[Pr]:"")),s.scale=s.rotate=s.translate="none"),N=bU(e,r.svg),r.svg&&(r.uncache?(K=e.getBBox(),f=r.xOrigin-K.x+"px "+(r.yOrigin-K.y)+"px",W=""):W=!n&&e.getAttribute("data-svg-origin"),aN(e,W||f,!!W||r.originIsAbsolute,r.smooth!==!1,N)),I=r.xOrigin||0,k=r.yOrigin||0,N!==_S&&(F=N[0],H=N[1],V=N[2],X=N[3],d=J=N[4],m=q=N[5],N.length===6?(_=Math.sqrt(F*F+H*H),x=Math.sqrt(X*X+V*V),S=F||H?c0(H,F)*Ng:0,M=V||X?c0(V,X)*Ng+S:0,M&&(x*=Math.abs(Math.cos(M*j0))),r.svg&&(d-=I-(I*F+k*V),m-=k-(I*H+k*X))):(ht=N[6],xt=N[7],Q=N[8],dt=N[9],yt=N[10],nt=N[11],d=N[12],m=N[13],y=N[14],L=c0(ht,yt),T=L*Ng,L&&(U=Math.cos(-L),O=Math.sin(-L),W=J*U+Q*O,K=q*U+dt*O,et=ht*U+yt*O,Q=J*-O+Q*U,dt=q*-O+dt*U,yt=ht*-O+yt*U,nt=xt*-O+nt*U,J=W,q=K,ht=et),L=c0(-V,yt),b=L*Ng,L&&(U=Math.cos(-L),O=Math.sin(-L),W=F*U-Q*O,K=H*U-dt*O,et=V*U-yt*O,nt=X*O+nt*U,F=W,H=K,V=et),L=c0(H,F),S=L*Ng,L&&(U=Math.cos(L),O=Math.sin(L),W=F*U+H*O,K=J*U+q*O,H=H*U-F*O,q=q*U-J*O,F=W,J=K),T&&Math.abs(T)+Math.abs(S)>359.9&&(T=S=0,b=180-b),_=ns(Math.sqrt(F*F+H*H+V*V)),x=ns(Math.sqrt(q*q+ht*ht)),L=c0(J,q),M=Math.abs(L)>2e-4?L*Ng:0,A=nt?1/(nt<0?-nt:nt):0),r.svg&&(W=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!U$(Ff(e,Pr)),W&&e.setAttribute("transform",W))),Math.abs(M)>90&&Math.abs(M)<270&&(a?(_*=-1,M+=S<=0?180:-180,S+=S<=0?180:-180):(x*=-1,M+=M<=0?180:-180)),n=n||r.uncache,r.x=d-((r.xPercent=d&&(!n&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=m-((r.yPercent=m&&(!n&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-m)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=y+o,r.scaleX=ns(_),r.scaleY=ns(x),r.rotation=ns(S)+l,r.rotationX=ns(T)+l,r.rotationY=ns(b)+l,r.skewX=M+l,r.skewY=R+l,r.transformPerspective=A+o,(r.zOrigin=parseFloat(f.split(" ")[2])||!n&&r.zOrigin||0)&&(s[al]=hC(f)),r.xOffset=r.yOffset=0,r.force3D=zl.force3D,r.renderTransform=r.svg?MSt:D$?k$:ASt,r.uncache=0,r},hC=function(e){return(e=e.split(" "))[0]+" "+e[1]},aD=function(e,n,r){var s=za(n);return ns(parseFloat(n)+parseFloat(cm(e,"x",r+"px",s)))+s},ASt=function(e,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,k$(e,n)},Eg="0deg",Ex="0px",Tg=") ",k$=function(e,n){var r=n||this,s=r.xPercent,a=r.yPercent,o=r.x,l=r.y,u=r.z,f=r.rotation,d=r.rotationY,m=r.rotationX,y=r.skewX,_=r.skewY,x=r.scaleX,S=r.scaleY,T=r.transformPerspective,b=r.force3D,M=r.target,R=r.zOrigin,A="",I=b==="auto"&&e&&e!==1||b===!0;if(R&&(m!==Eg||d!==Eg)){var k=parseFloat(d)*j0,N=Math.sin(k),L=Math.cos(k),U;k=parseFloat(m)*j0,U=Math.cos(k),o=aD(M,o,N*U*-R),l=aD(M,l,-Math.sin(k)*-R),u=aD(M,u,L*U*-R+R)}T!==Ex&&(A+="perspective("+T+Tg),(s||a)&&(A+="translate("+s+"%, "+a+"%) "),(I||o!==Ex||l!==Ex||u!==Ex)&&(A+=u!==Ex||I?"translate3d("+o+", "+l+", "+u+") ":"translate("+o+", "+l+Tg),f!==Eg&&(A+="rotate("+f+Tg),d!==Eg&&(A+="rotateY("+d+Tg),m!==Eg&&(A+="rotateX("+m+Tg),(y!==Eg||_!==Eg)&&(A+="skew("+y+", "+_+Tg),(x!==1||S!==1)&&(A+="scale("+x+", "+S+Tg),M.style[Pr]=A||"translate(0, 0)"},MSt=function(e,n){var r=n||this,s=r.xPercent,a=r.yPercent,o=r.x,l=r.y,u=r.rotation,f=r.skewX,d=r.skewY,m=r.scaleX,y=r.scaleY,_=r.target,x=r.xOrigin,S=r.yOrigin,T=r.xOffset,b=r.yOffset,M=r.forceCSS,R=parseFloat(o),A=parseFloat(l),I,k,N,L,U;u=parseFloat(u),f=parseFloat(f),d=parseFloat(d),d&&(d=parseFloat(d),f+=d,u+=d),u||f?(u*=j0,f*=j0,I=Math.cos(u)*m,k=Math.sin(u)*m,N=Math.sin(u-f)*-y,L=Math.cos(u-f)*y,f&&(d*=j0,U=Math.tan(f-d),U=Math.sqrt(1+U*U),N*=U,L*=U,d&&(U=Math.tan(d),U=Math.sqrt(1+U*U),I*=U,k*=U)),I=ns(I),k=ns(k),N=ns(N),L=ns(L)):(I=m,L=y,k=N=0),(R&&!~(o+"").indexOf("px")||A&&!~(l+"").indexOf("px"))&&(R=cm(_,"x",o,"px"),A=cm(_,"y",l,"px")),(x||S||T||b)&&(R=ns(R+x-(x*I+S*N)+T),A=ns(A+S-(x*k+S*L)+b)),(s||a)&&(U=_.getBBox(),R=ns(R+s/100*U.width),A=ns(A+a/100*U.height)),U="matrix("+I+","+k+","+N+","+L+","+R+","+A+")",_.setAttribute("transform",U),M&&(_.style[Pr]=U)},CSt=function(e,n,r,s,a){var o=360,l=Ys(a),u=parseFloat(a)*(l&&~a.indexOf("rad")?Ng:1),f=u-s,d=s+f+"deg",m,y;return l&&(m=a.split("_")[1],m==="short"&&(f%=o,f!==f%(o/2)&&(f+=f<0?o:-360)),m==="cw"&&f<0?f=(f+o*$V)%o-~~(f/o)*o:m==="ccw"&&f>0&&(f=(f-o*$V)%o-~~(f/o)*o)),e._pt=y=new sl(e._pt,n,r,s,f,fSt),y.e=d,y.u="deg",e._props.push(r),y},JV=function(e,n){for(var r in n)e[r]=n[r];return e},RSt=function(e,n,r){var s=JV({},r._gsap),a="perspective,force3D,transformOrigin,svgOrigin",o=r.style,l,u,f,d,m,y,_,x;s.svg?(f=r.getAttribute("transform"),r.setAttribute("transform",""),o[Pr]=n,l=bS(r,1),xy(r,Pr),r.setAttribute("transform",f)):(f=getComputedStyle(r)[Pr],o[Pr]=n,l=bS(r,1),o[Pr]=f);for(u in Sd)f=s[u],d=l[u],f!==d&&a.indexOf(u)<0&&(_=za(f),x=za(d),m=_!==x?cm(r,u,f,x):parseFloat(f),y=parseFloat(d),e._pt=new sl(e._pt,l,u,m,y-m,iN),e._pt.u=x||0,e._props.push(u));JV(l,s)};rl("padding,margin,Width,Radius",function(i,e){var n="Top",r="Right",s="Bottom",a="Left",o=(e<3?[n,r,s,a]:[n+a,n+r,s+r,s+a]).map(function(l){return e<2?i+l:"border"+l+i});fC[e>1?"border"+i:i]=function(l,u,f,d,m){var y,_;if(arguments.length<4)return y=o.map(function(x){return $h(l,x,f)}),_=y.join(" "),_.split(y[0]).length===5?y[0]:_;y=(d+"").split(" "),_={},o.forEach(function(x,S){return _[x]=y[S]=y[S]||y[(S-1)/2|0]}),l.init(u,_,m)}});var z$={name:"css",register:sN,targetTest:function(e){return e.style&&e.nodeType},init:function(e,n,r,s,a){var o=this._props,l=e.style,u=r.vars.startAt,f,d,m,y,_,x,S,T,b,M,R,A,I,k,N,L;yU||sN(),this.styles=this.styles||I$(e),L=this.styles.props,this.tween=r;for(S in n)if(S!=="autoRound"&&(d=n[S],!(Il[S]&&b$(S,n,r,s,e,a)))){if(_=typeof d,x=fC[S],_==="function"&&(d=d.call(r,s,e,a),_=typeof d),_==="string"&&~d.indexOf("random(")&&(d=gS(d)),x)x(this,e,S,d,r)&&(N=1);else if(S.substr(0,2)==="--")f=(getComputedStyle(e).getPropertyValue(S)+"").trim(),d+="",Zp.lastIndex=0,Zp.test(f)||(T=za(f),b=za(d)),b?T!==b&&(f=cm(e,S,f,b)+b):T&&(d+=T),this.add(l,"setProperty",f,d,s,a,0,0,S),o.push(S),L.push(S,0,l[S]);else if(_!=="undefined"){if(u&&S in u?(f=typeof u[S]=="function"?u[S].call(r,s,e,a):u[S],Ys(f)&&~f.indexOf("random(")&&(f=gS(f)),za(f+"")||f==="auto"||(f+=zl.units[S]||za($h(e,S))||""),(f+"").charAt(1)==="="&&(f=$h(e,S))):f=$h(e,S),y=parseFloat(f),M=_==="string"&&d.charAt(1)==="="&&d.substr(0,2),M&&(d=d.substr(2)),m=parseFloat(d),S in Mf&&(S==="autoAlpha"&&(y===1&&$h(e,"visibility")==="hidden"&&m&&(y=0),L.push("visibility",0,l.visibility),Hp(this,l,"visibility",y?"inherit":"hidden",m?"inherit":"hidden",!m)),S!=="scale"&&S!=="transform"&&(S=Mf[S],~S.indexOf(",")&&(S=S.split(",")[0]))),R=S in Sd,R){if(this.styles.save(S),A||(I=e._gsap,I.renderTransform&&!n.parseTransform||bS(e,n.parseTransform),k=n.smoothOrigin!==!1&&I.smooth,A=this._pt=new sl(this._pt,l,Pr,0,1,I.renderTransform,I,0,-1),A.dep=1),S==="scale")this._pt=new sl(this._pt,I,"scaleY",I.scaleY,(M?H0(I.scaleY,M+m):m)-I.scaleY||0,iN),this._pt.u=0,o.push("scaleY",S),S+="X";else if(S==="transformOrigin"){L.push(al,0,l[al]),d=TSt(d),I.svg?aN(e,d,0,k,0,this):(b=parseFloat(d.split(" ")[2])||0,b!==I.zOrigin&&Hp(this,I,"zOrigin",I.zOrigin,b),Hp(this,l,S,hC(f),hC(d)));continue}else if(S==="svgOrigin"){aN(e,d,1,k,0,this);continue}else if(S in L$){CSt(this,I,S,y,M?H0(y,M+d):d);continue}else if(S==="smoothOrigin"){Hp(this,I,"smooth",I.smooth,d);continue}else if(S==="force3D"){I[S]=d;continue}else if(S==="transform"){RSt(this,d,e);continue}}else S in l||(S=x_(S)||S);if(R||(m||m===0)&&(y||y===0)&&!cSt.test(d)&&S in l)T=(f+"").substr((y+"").length),m||(m=0),b=za(d)||(S in zl.units?zl.units[S]:T),T!==b&&(y=cm(e,S,f,b)),this._pt=new sl(this._pt,R?I:l,S,y,(M?H0(y,M+m):m)-y,!R&&(b==="px"||S==="zIndex")&&n.autoRound!==!1?dSt:iN),this._pt.u=b||0,T!==b&&b!=="%"&&(this._pt.b=f,this._pt.r=hSt);else if(S in l)ESt.call(this,e,S,f,M?M+d:d);else if(S in e)this.add(e,S,f||e[S],M?M+d:d,s,a);else if(S!=="parseTransform"){lU(S,d);continue}R||(S in l?L.push(S,0,l[S]):typeof e[S]=="function"?L.push(S,2,e[S]()):L.push(S,1,f||e[S])),o.push(S)}}N&&A$(this)},render:function(e,n){if(n.tween._time||!vU())for(var r=n._pt;r;)r.r(e,r.d),r=r._next;else n.styles.revert()},get:$h,aliases:Mf,getSetter:function(e,n,r){var s=Mf[n];return s&&s.indexOf(",")<0&&(n=s),n in Sd&&n!==al&&(e._gsap.x||$h(e,"x"))?r&&qV===r?n==="scale"?ySt:gSt:(qV=r||{})&&(n==="scale"?vSt:_St):e.style&&!sU(e.style[n])?pSt:~n.indexOf("-")?mSt:mU(e,n)},core:{_removeProperty:xy,_getMatrix:bU}};ul.utils.checkPrefix=x_;ul.core.getStyleSaver=I$;(function(i,e,n,r){var s=rl(i+","+e+","+n,function(a){Sd[a]=1});rl(e,function(a){zl.units[a]="deg",L$[a]=1}),Mf[s[13]]=i+","+e,rl(r,function(a){var o=a.split(":");Mf[o[1]]=s[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");rl("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){zl.units[i]="px"});ul.registerPlugin(z$);var B$=ul.registerPlugin(z$)||ul;B$.core.Tween;const OSt=(i,e,n=50)=>{if(!i)return;const r=new pt;i.getPosition(r);const s=new pt().subVectors(r,e).normalize(),a=new pt().copy(e).addScaledVector(s,n);B$.to(r,{x:a.x,y:a.y,z:a.z,duration:1.5,ease:"power2.out",onUpdate:()=>{i.setLookAt(r.x,r.y,r.z,e.x,e.y,e.z,!0)}})};function oN(i="debug",...e){}const xU=async i=>{try{const n=(await G2(B0(F0,i))).docs.map(r=>{const s=r.data();return{id:s.index,index:s.index,name:s.name,position:s.position}});return oN("debug","Documentos obtenidos desde firestone: ",n),n.length==0&&(F$(Qh.nodes,Qh.links,1,"Escoja Nodo de origen","",1,""),xU(Qh.nodes)),n}catch(e){console.error("Error obteniendo documentos desde Firestore:",e)}},ISt=async i=>{try{const n=(await G2(B0(F0,i))).docs.map(s=>s.data().index);return Math.max(...n.filter(s=>typeof s=="number"))}catch(e){return console.error("Error obteniendo el valor index: ",e),0}},F$=async(i,e,n,r,s,a,o)=>{try{const l=B0(F0,i),u=Hvt(l,Gvt("name","==",r));if(!(await G2(u)).empty)return console.error(" Error: Ya existe un documento con este `name`."),{success:!1,message:"El link ya est registrado."};await D5(B0(F0,i),{name:r,index:n,position:s,uploadedDate:o}),a!==1&&await D5(B0(F0,e),{target:n,source:a}),yi.setState({isUploadFirestore:!1}),oN("info","Nodo agregado:",r,n),oN("info","Link  agregado: Source:",a!==1?a:"Nodo sin conexcin {1}")}catch(l){console.error("Error al agregar documento:",l)}},DSt=()=>{const[i,e]=tt.useState({nodes:[],links:[]});return tt.useEffect(()=>{yi.setState({isLoadingFirestore:!0}),(async()=>{try{const s=(await xU(Qh.nodes)).filter(l=>l.id!==1),o=(await G2(B0(F0,Qh.links))).docs.map(l=>{const u=l.data();return{source:u.source,target:u.target}});e({nodes:s,links:o})}catch(r){console.error("Error obteniendo datos:",r)}finally{yi.setState({isLoadingFirestore:!1})}})()},[]),i};function lN(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=Array(e);n<e;n++)r[n]=i[n];return r}function PSt(i){if(Array.isArray(i))return i}function NSt(i){if(Array.isArray(i))return lN(i)}function LSt(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function USt(i,e,n){return e=dC(e),qSt(i,V$()?Reflect.construct(e,n||[],dC(i).constructor):e.apply(i,n))}function kSt(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function zSt(i,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,WSt(r.key),r)}}function BSt(i,e,n){return e&&zSt(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function dC(i){return dC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dC(i)}function FSt(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&uN(i,e)}function V$(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V$=function(){return!!i})()}function VSt(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function HSt(i,e){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,f=!1;try{if(a=(n=n.call(i)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(d){f=!0,s=d}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw s}}return l}}function GSt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jSt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qSt(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LSt(i)}function uN(i,e){return uN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},uN(i,e)}function t6(i,e){return PSt(i)||HSt(i,e)||H$(i,e)||GSt()}function qw(i){return NSt(i)||VSt(i)||H$(i)||jSt()}function $St(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var r=n.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function WSt(i){var e=$St(i,"string");return typeof e=="symbol"?e:e+""}function H$(i,e){if(i){if(typeof i=="string")return lN(i,e);var n={}.toString.call(i).slice(8,-1);return n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set"?Array.from(i):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lN(i,e):void 0}}var Tx=typeof window<"u"&&window.THREE?window.THREE:{CanvasTexture:p8,Sprite:QN,SpriteMaterial:FC,SRGBColorSpace:la},XSt=function(i){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"rgba(255, 255, 255, 1)";return kSt(this,e),n=USt(this,e,[new Tx.SpriteMaterial]),n._text="".concat(r),n._textHeight=s,n._color=a,n._backgroundColor=!1,n._padding=0,n._borderWidth=0,n._borderRadius=0,n._borderColor="white",n._strokeWidth=0,n._strokeColor="white",n._fontFace="system-ui",n._fontSize=90,n._fontWeight="normal",n._canvas=document.createElement("canvas"),n._genCanvas(),n}return FSt(e,i),BSt(e,[{key:"text",get:function(){return this._text},set:function(r){this._text=r,this._genCanvas()}},{key:"textHeight",get:function(){return this._textHeight},set:function(r){this._textHeight=r,this._genCanvas()}},{key:"color",get:function(){return this._color},set:function(r){this._color=r,this._genCanvas()}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(r){this._backgroundColor=r,this._genCanvas()}},{key:"padding",get:function(){return this._padding},set:function(r){this._padding=r,this._genCanvas()}},{key:"borderWidth",get:function(){return this._borderWidth},set:function(r){this._borderWidth=r,this._genCanvas()}},{key:"borderRadius",get:function(){return this._borderRadius},set:function(r){this._borderRadius=r,this._genCanvas()}},{key:"borderColor",get:function(){return this._borderColor},set:function(r){this._borderColor=r,this._genCanvas()}},{key:"fontFace",get:function(){return this._fontFace},set:function(r){this._fontFace=r,this._genCanvas()}},{key:"fontSize",get:function(){return this._fontSize},set:function(r){this._fontSize=r,this._genCanvas()}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(r){this._fontWeight=r,this._genCanvas()}},{key:"strokeWidth",get:function(){return this._strokeWidth},set:function(r){this._strokeWidth=r,this._genCanvas()}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(r){this._strokeColor=r,this._genCanvas()}},{key:"_genCanvas",value:function(){var r=this,s=this._canvas,a=s.getContext("2d"),o=1/this.textHeight,l=Array.isArray(this.borderWidth)?this.borderWidth:[this.borderWidth,this.borderWidth],u=l.map(function(L){return L*r.fontSize*o}),f=Array.isArray(this.borderRadius)?this.borderRadius:[this.borderRadius,this.borderRadius,this.borderRadius,this.borderRadius],d=f.map(function(L){return L*r.fontSize*o}),m=Array.isArray(this.padding)?this.padding:[this.padding,this.padding],y=m.map(function(L){return L*r.fontSize*o}),_=this.text.split(`
`),x="".concat(this.fontWeight," ").concat(this.fontSize,"px ").concat(this.fontFace);a.font=x;var S=Math.max.apply(Math,qw(_.map(function(L){return a.measureText(L).width}))),T=this.fontSize*_.length;if(s.width=S+u[0]*2+y[0]*2,s.height=T+u[1]*2+y[1]*2,this.borderWidth){if(a.strokeStyle=this.borderColor,u[0]){var b=u[0]/2;a.lineWidth=u[0],a.beginPath(),a.moveTo(b,d[0]),a.lineTo(b,s.height-d[3]),a.moveTo(s.width-b,d[1]),a.lineTo(s.width-b,s.height-d[2]),a.stroke()}if(u[1]){var M=u[1]/2;a.lineWidth=u[1],a.beginPath(),a.moveTo(Math.max(u[0],d[0]),M),a.lineTo(s.width-Math.max(u[0],d[1]),M),a.moveTo(Math.max(u[0],d[3]),s.height-M),a.lineTo(s.width-Math.max(u[0],d[2]),s.height-M),a.stroke()}if(this.borderRadius){var R=Math.max.apply(Math,qw(u)),A=R/2;a.lineWidth=R,a.beginPath(),[!!d[0]&&[d[0],A,A,d[0]],!!d[1]&&[s.width-d[1],s.width-A,A,d[1]],!!d[2]&&[s.width-d[2],s.width-A,s.height-A,s.height-d[2]],!!d[3]&&[d[3],A,s.height-A,s.height-d[3]]].filter(function(L){return L}).forEach(function(L){var U=t6(L,4),O=U[0],F=U[1],H=U[2],V=U[3];a.moveTo(O,H),a.quadraticCurveTo(F,H,F,V)}),a.stroke()}}this.backgroundColor&&(a.fillStyle=this.backgroundColor,this.borderRadius?(a.beginPath(),a.moveTo(u[0],d[0]),[[u[0],d[0],s.width-d[1],u[1],u[1],u[1]],[s.width-u[0],s.width-u[0],s.width-u[0],u[1],d[1],s.height-d[2]],[s.width-u[0],s.width-d[2],d[3],s.height-u[1],s.height-u[1],s.height-u[1]],[u[0],u[0],u[0],s.height-u[1],s.height-d[3],d[0]]].forEach(function(L){var U=t6(L,6),O=U[0],F=U[1],H=U[2],V=U[3],X=U[4],J=U[5];a.quadraticCurveTo(O,V,F,X),a.lineTo(H,J)}),a.closePath(),a.fill()):a.fillRect(u[0],u[1],s.width-u[0]*2,s.height-u[1]*2)),a.translate.apply(a,qw(u)),a.translate.apply(a,qw(y)),a.font=x,a.fillStyle=this.color,a.textBaseline="bottom";var I=this.strokeWidth>0;I&&(a.lineWidth=this.strokeWidth*this.fontSize/10,a.strokeStyle=this.strokeColor),_.forEach(function(L,U){var O=(S-a.measureText(L).width)/2,F=(U+1)*r.fontSize;I&&a.strokeText(L,O,F),a.fillText(L,O,F)}),this.material.map&&this.material.map.dispose();var k=this.material.map=new Tx.CanvasTexture(s);k.colorSpace=Tx.SRGBColorSpace;var N=this.textHeight*_.length+l[1]*2+m[1]*2;this.scale.set(N*s.width/s.height,N,0)}},{key:"clone",value:function(){return new this.constructor(this.text,this.textHeight,this.color).copy(this)}},{key:"copy",value:function(r){return Tx.Sprite.prototype.copy.call(this,r),this.color=r.color,this.backgroundColor=r.backgroundColor,this.padding=r.padding,this.borderWidth=r.borderWidth,this.borderColor=r.borderColor,this.fontFace=r.fontFace,this.fontSize=r.fontSize,this.fontWeight=r.fontWeight,this.strokeWidth=r.strokeWidth,this.strokeColor=r.strokeColor,this}}])}(Tx.Sprite);const YSt=({cameraControlsRef:i})=>{const e=tt.useRef(void 0);M3(()=>{var s;return(s=e.current)==null?void 0:s.tickFrame()});const n=DSt(),r=tt.useCallback(s=>{if(!s)return;i.current||console.error("cameraControlsRef no est inicializado.");const a=new pt(s.x||0,s.y||0,s.z||0);OSt(i.current,a,30)},[i]);return st.jsx(m1t,{ref:e,graphData:n,linkWidth:2,linkCurvature:.05,linkDirectionalParticles:4,linkColor:"#000",linkDirectionalParticleWidth:2,onNodeClick:r,nodeAutoColorBy:s=>s.position?J4[s.position]:"gray",nodeThreeObject:s=>{const a=new Kh,o=J4[s.position||"default"]||"gray",l=new Ty(5,5),u=new n2({color:o}),f=new $r(l,u),d=new XSt(`${s.name} {${s.id}}`||`Node ${s.id}`);return d.color="white",d.textHeight=3,d.position.set(0,7,0),d.backgroundColor="#000",a.add(f),a.add(d),a}})},KSt=({cameraControlsRef:i})=>st.jsxs(st.Fragment,{children:[st.jsx(Vrt,{radius:Jv.radius,depth:Jv.depth,count:Jv.count,factor:Jv.factor,saturation:Jv.saturation,fade:!0,speed:Jv.speed}),st.jsx(YSt,{cameraControlsRef:i}),st.jsx("ambientLight",{intensity:.9}),st.jsx("directionalLight",{position:[100,20,10],color:"yellow"})]});function ZSt(i){return Tn("MuiCollapse",i)}_n("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const QSt=i=>{const{orientation:e,classes:n}=i,r={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return wn(r,ZSt,n)},JSt=me("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(En(({theme:i})=>({height:0,overflow:"hidden",transition:i.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:i.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>e.state==="exited"&&!e.in&&e.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),tEt=me("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(i,e)=>e.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),eEt=me("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(i,e)=>e.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),cN=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiCollapse"}),{addEndListener:s,children:a,className:o,collapsedSize:l="0px",component:u,easing:f,in:d,onEnter:m,onEntered:y,onEntering:_,onExit:x,onExited:S,onExiting:T,orientation:b="vertical",style:M,timeout:R=uG.standard,TransitionComponent:A=Ou,...I}=r,k={...r,orientation:b,collapsedSize:l},N=QSt(k),L=L_(),U=Fg(),O=tt.useRef(null),F=tt.useRef(),H=typeof l=="number"?`${l}px`:l,V=b==="horizontal",X=V?"width":"height",J=tt.useRef(null),q=ss(n,J),W=ft=>gt=>{if(ft){const wt=J.current;gt===void 0?ft(wt):ft(wt,gt)}},K=()=>O.current?O.current[V?"clientWidth":"clientHeight"]:0,et=W((ft,gt)=>{O.current&&V&&(O.current.style.position="absolute"),ft.style[X]=H,m&&m(ft,gt)}),Q=W((ft,gt)=>{const wt=K();O.current&&V&&(O.current.style.position="");const{duration:Kt,easing:zt}=nm({style:M,timeout:R,easing:f},{mode:"enter"});if(R==="auto"){const te=L.transitions.getAutoHeightDuration(wt);ft.style.transitionDuration=`${te}ms`,F.current=te}else ft.style.transitionDuration=typeof Kt=="string"?Kt:`${Kt}ms`;ft.style[X]=`${wt}px`,ft.style.transitionTimingFunction=zt,_&&_(ft,gt)}),dt=W((ft,gt)=>{ft.style[X]="auto",y&&y(ft,gt)}),yt=W(ft=>{ft.style[X]=`${K()}px`,x&&x(ft)}),xt=W(S),nt=W(ft=>{const gt=K(),{duration:wt,easing:Kt}=nm({style:M,timeout:R,easing:f},{mode:"exit"});if(R==="auto"){const zt=L.transitions.getAutoHeightDuration(gt);ft.style.transitionDuration=`${zt}ms`,F.current=zt}else ft.style.transitionDuration=typeof wt=="string"?wt:`${wt}ms`;ft.style[X]=H,ft.style.transitionTimingFunction=Kt,T&&T(ft)}),ht=ft=>{R==="auto"&&U.start(F.current||0,ft),s&&s(J.current,ft)};return st.jsx(A,{in:d,onEnter:et,onEntered:dt,onEntering:Q,onExit:yt,onExited:xt,onExiting:nt,addEndListener:ht,nodeRef:J,timeout:R==="auto"?null:R,...I,children:(ft,{ownerState:gt,...wt})=>st.jsx(JSt,{as:u,className:je(N.root,o,{entered:N.entered,exited:!d&&H==="0px"&&N.hidden}[ft]),style:{[V?"minWidth":"minHeight"]:H,...M},ref:q,ownerState:{...k,state:ft},...wt,children:st.jsx(tEt,{ownerState:{...k,state:ft},className:N.wrapper,ref:O,children:st.jsx(eEt,{ownerState:{...k,state:ft},className:N.wrapperInner,children:a})})})})});cN&&(cN.muiSupportAuto=!0);function nEt(i){return Tn("MuiAlert",i)}const e6=_n("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),iEt=ga(st.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),rEt=ga(st.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),sEt=ga(st.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),aEt=ga(st.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),oEt=ga(st.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),lEt=i=>{const{variant:e,color:n,severity:r,classes:s}=i,a={root:["root",`color${Fe(n||r)}`,`${e}${Fe(n||r)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return wn(a,nEt,s)},uEt=me(W3,{name:"MuiAlert",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,e[n.variant],e[`${n.variant}${Fe(n.color||n.severity)}`]]}})(En(({theme:i})=>{const e=i.palette.mode==="light"?J0:t_,n=i.palette.mode==="light"?t_:J0;return{...i.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(i.palette).filter(Ds(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:i.vars?i.vars.palette.Alert[`${r}Color`]:e(i.palette[r].light,.6),backgroundColor:i.vars?i.vars.palette.Alert[`${r}StandardBg`]:n(i.palette[r].light,.9),[`& .${e6.icon}`]:i.vars?{color:i.vars.palette.Alert[`${r}IconColor`]}:{color:i.palette[r].main}}})),...Object.entries(i.palette).filter(Ds(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:i.vars?i.vars.palette.Alert[`${r}Color`]:e(i.palette[r].light,.6),border:`1px solid ${(i.vars||i).palette[r].light}`,[`& .${e6.icon}`]:i.vars?{color:i.vars.palette.Alert[`${r}IconColor`]}:{color:i.palette[r].main}}})),...Object.entries(i.palette).filter(Ds(["dark"])).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:{fontWeight:i.typography.fontWeightMedium,...i.vars?{color:i.vars.palette.Alert[`${r}FilledColor`],backgroundColor:i.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:i.palette.mode==="dark"?i.palette[r].dark:i.palette[r].main,color:i.palette.getContrastText(i.palette[r].main)}}}))]}})),cEt=me("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(i,e)=>e.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),fEt=me("div",{name:"MuiAlert",slot:"Message",overridesResolver:(i,e)=>e.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),hEt=me("div",{name:"MuiAlert",slot:"Action",overridesResolver:(i,e)=>e.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),n6={success:st.jsx(iEt,{fontSize:"inherit"}),warning:st.jsx(rEt,{fontSize:"inherit"}),error:st.jsx(sEt,{fontSize:"inherit"}),info:st.jsx(aEt,{fontSize:"inherit"})},dEt=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiAlert"}),{action:s,children:a,className:o,closeText:l="Close",color:u,components:f={},componentsProps:d={},icon:m,iconMapping:y=n6,onClose:_,role:x="alert",severity:S="success",slotProps:T={},slots:b={},variant:M="standard",...R}=r,A={...r,color:u,severity:S,variant:M,colorSeverity:u||S},I=lEt(A),k={slots:{closeButton:f.CloseButton,closeIcon:f.CloseIcon,...b},slotProps:{...d,...T}},[N,L]=gi("root",{ref:n,shouldForwardComponentProp:!0,className:je(I.root,o),elementType:uEt,externalForwardedProps:{...k,...R},ownerState:A,additionalProps:{role:x,elevation:0}}),[U,O]=gi("icon",{className:I.icon,elementType:cEt,externalForwardedProps:k,ownerState:A}),[F,H]=gi("message",{className:I.message,elementType:fEt,externalForwardedProps:k,ownerState:A}),[V,X]=gi("action",{className:I.action,elementType:hEt,externalForwardedProps:k,ownerState:A}),[J,q]=gi("closeButton",{elementType:SG,externalForwardedProps:k,ownerState:A}),[W,K]=gi("closeIcon",{elementType:oEt,externalForwardedProps:k,ownerState:A});return st.jsxs(N,{...L,children:[m!==!1?st.jsx(U,{...O,children:m||y[S]||n6[S]}):null,st.jsx(F,{...H,children:a}),s!=null?st.jsx(V,{...X,children:s}):null,s==null&&_?st.jsx(V,{...X,children:st.jsx(J,{size:"small","aria-label":l,title:l,color:"inherit",onClick:_,...q,children:st.jsx(W,{fontSize:"small",...K})})}):null]})});function $w(i){return parseInt(i,10)||0}const pEt={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function mEt(i){for(const e in i)return!1;return!0}function i6(i){return mEt(i)||i.outerHeightStyle===0&&!i.overflowing}const gEt=tt.forwardRef(function(e,n){const{onChange:r,maxRows:s,minRows:a=1,style:o,value:l,...u}=e,{current:f}=tt.useRef(l!=null),d=tt.useRef(null),m=ss(n,d),y=tt.useRef(null),_=tt.useRef(null),x=tt.useCallback(()=>{const R=d.current,A=_.current;if(!R||!A)return;const k=Sc(R).getComputedStyle(R);if(k.width==="0px")return{outerHeightStyle:0,overflowing:!1};A.style.width=k.width,A.value=R.value||e.placeholder||"x",A.value.slice(-1)===`
`&&(A.value+=" ");const N=k.boxSizing,L=$w(k.paddingBottom)+$w(k.paddingTop),U=$w(k.borderBottomWidth)+$w(k.borderTopWidth),O=A.scrollHeight;A.value="x";const F=A.scrollHeight;let H=O;a&&(H=Math.max(Number(a)*F,H)),s&&(H=Math.min(Number(s)*F,H)),H=Math.max(H,F);const V=H+(N==="border-box"?L+U:0),X=Math.abs(H-O)<=1;return{outerHeightStyle:V,overflowing:X}},[s,a,e.placeholder]),S=ad(()=>{const R=d.current,A=x();if(!R||!A||i6(A))return!1;const I=A.outerHeightStyle;return y.current!=null&&y.current!==I}),T=tt.useCallback(()=>{const R=d.current,A=x();if(!R||!A||i6(A))return;const I=A.outerHeightStyle;y.current!==I&&(y.current=I,R.style.height=`${I}px`),R.style.overflow=A.overflowing?"hidden":""},[x]),b=tt.useRef(-1);Hf(()=>{const R=V3(T),A=d==null?void 0:d.current;if(!A)return;const I=Sc(A);I.addEventListener("resize",R);let k;return typeof ResizeObserver<"u"&&(k=new ResizeObserver(()=>{S()&&(k.unobserve(A),cancelAnimationFrame(b.current),T(),b.current=requestAnimationFrame(()=>{k.observe(A)}))}),k.observe(A)),()=>{R.clear(),cancelAnimationFrame(b.current),I.removeEventListener("resize",R),k&&k.disconnect()}},[x,T,S]),Hf(()=>{T()});const M=R=>{f||T(),r&&r(R)};return st.jsxs(tt.Fragment,{children:[st.jsx("textarea",{value:l,onChange:M,ref:m,rows:a,style:o,...u}),st.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:_,tabIndex:-1,style:{...pEt.shadow,...o,paddingTop:0,paddingBottom:0}})]})});function _m({props:i,states:e,muiFormControl:n}){return e.reduce((r,s)=>(r[s]=i[s],n&&typeof i[s]>"u"&&(r[s]=n[s]),r),{})}const SU=tt.createContext(void 0);function Kf(){return tt.useContext(SU)}function r6(i){return i!=null&&!(Array.isArray(i)&&i.length===0)}function pC(i,e=!1){return i&&(r6(i.value)&&i.value!==""||e&&r6(i.defaultValue)&&i.defaultValue!=="")}function yEt(i){return i.startAdornment}function vEt(i){return Tn("MuiInputBase",i)}const S_=_n("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var s6;const Z2=(i,e)=>{const{ownerState:n}=i;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${Fe(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},Q2=(i,e)=>{const{ownerState:n}=i;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},_Et=i=>{const{classes:e,color:n,disabled:r,error:s,endAdornment:a,focused:o,formControl:l,fullWidth:u,hiddenLabel:f,multiline:d,readOnly:m,size:y,startAdornment:_,type:x}=i,S={root:["root",`color${Fe(n)}`,r&&"disabled",s&&"error",u&&"fullWidth",o&&"focused",l&&"formControl",y&&y!=="medium"&&`size${Fe(y)}`,d&&"multiline",_&&"adornedStart",a&&"adornedEnd",f&&"hiddenLabel",m&&"readOnly"],input:["input",r&&"disabled",x==="search"&&"inputTypeSearch",d&&"inputMultiline",y==="small"&&"inputSizeSmall",f&&"inputHiddenLabel",_&&"inputAdornedStart",a&&"inputAdornedEnd",m&&"readOnly"]};return wn(S,vEt,e)},J2=me("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Z2})(En(({theme:i})=>({...i.typography.body1,color:(i.vars||i).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${S_.disabled}`]:{color:(i.vars||i).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:n})=>e.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),tR=me("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Q2})(En(({theme:i})=>{const e=i.palette.mode==="light",n={color:"currentColor",...i.vars?{opacity:i.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:i.transitions.create("opacity",{duration:i.transitions.duration.shorter})},r={opacity:"0 !important"},s=i.vars?{opacity:i.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${S_.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${S_.disabled}`]:{opacity:1,WebkitTextFillColor:(i.vars||i).palette.text.disabled},variants:[{props:({ownerState:a})=>!a.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:a})=>a.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),a6=mlt({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),EU=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:a,autoFocus:o,className:l,color:u,components:f={},componentsProps:d={},defaultValue:m,disabled:y,disableInjectingGlobalStyles:_,endAdornment:x,error:S,fullWidth:T=!1,id:b,inputComponent:M="input",inputProps:R={},inputRef:A,margin:I,maxRows:k,minRows:N,multiline:L=!1,name:U,onBlur:O,onChange:F,onClick:H,onFocus:V,onKeyDown:X,onKeyUp:J,placeholder:q,readOnly:W,renderSuffix:K,rows:et,size:Q,slotProps:dt={},slots:yt={},startAdornment:xt,type:nt="text",value:ht,...ft}=r,gt=R.value!=null?R.value:ht,{current:wt}=tt.useRef(gt!=null),Kt=tt.useRef(),zt=tt.useCallback(jt=>{},[]),te=ss(Kt,A,R.ref,zt),[Pt,Ht]=tt.useState(!1),at=Kf(),ue=_m({props:r,muiFormControl:at,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ue.focused=at?at.focused:Pt,tt.useEffect(()=>{!at&&y&&Pt&&(Ht(!1),O&&O())},[at,y,Pt,O]);const Jt=at&&at.onFilled,se=at&&at.onEmpty,ae=tt.useCallback(jt=>{pC(jt)?Jt&&Jt():se&&se()},[Jt,se]);Hf(()=>{wt&&ae({value:gt})},[gt,ae,wt]);const Ce=jt=>{V&&V(jt),R.onFocus&&R.onFocus(jt),at&&at.onFocus?at.onFocus(jt):Ht(!0)},le=jt=>{O&&O(jt),R.onBlur&&R.onBlur(jt),at&&at.onBlur?at.onBlur(jt):Ht(!1)},ct=(jt,...ve)=>{if(!wt){const we=jt.target||Kt.current;if(we==null)throw new Error(pd(1));ae({value:we.value})}R.onChange&&R.onChange(jt,...ve),F&&F(jt,...ve)};tt.useEffect(()=>{ae(Kt.current)},[]);const G=jt=>{Kt.current&&jt.currentTarget===jt.target&&Kt.current.focus(),H&&H(jt)};let lt=M,mt=R;L&&lt==="input"&&(et?mt={type:void 0,minRows:et,maxRows:et,...mt}:mt={type:void 0,maxRows:k,minRows:N,...mt},lt=gEt);const Ct=jt=>{ae(jt.animationName==="mui-auto-fill-cancel"?Kt.current:{value:"x"})};tt.useEffect(()=>{at&&at.setAdornedStart(!!xt)},[at,xt]);const bt={...r,color:ue.color||"primary",disabled:ue.disabled,endAdornment:x,error:ue.error,focused:ue.focused,formControl:at,fullWidth:T,hiddenLabel:ue.hiddenLabel,multiline:L,size:ue.size,startAdornment:xt,type:nt},Mt=_Et(bt),Lt=yt.root||f.Root||J2,Qt=dt.root||d.root||{},Oe=yt.input||f.Input||tR;return mt={...mt,...dt.input??d.input},st.jsxs(tt.Fragment,{children:[!_&&typeof a6=="function"&&(s6||(s6=st.jsx(a6,{}))),st.jsxs(Lt,{...Qt,ref:n,onClick:G,...ft,...!KD(Lt)&&{ownerState:{...bt,...Qt.ownerState}},className:je(Mt.root,Qt.className,l,W&&"MuiInputBase-readOnly"),children:[xt,st.jsx(SU.Provider,{value:null,children:st.jsx(Oe,{"aria-invalid":ue.error,"aria-describedby":s,autoComplete:a,autoFocus:o,defaultValue:m,disabled:ue.disabled,id:b,onAnimationStart:Ct,name:U,placeholder:q,readOnly:W,required:ue.required,rows:et,value:gt,onKeyDown:X,onKeyUp:J,type:nt,...mt,...!KD(Oe)&&{as:lt,ownerState:{...bt,...mt.ownerState}},ref:te,className:je(Mt.input,mt.className,W&&"MuiInputBase-readOnly"),onBlur:le,onChange:ct,onFocus:Ce})}),x,K?K({...ue,startAdornment:xt}):null]})]})});function bEt(i){return Tn("MuiInput",i)}const wx={...S_,..._n("MuiInput",["root","underline","input"])};function xEt(i){return Tn("MuiOutlinedInput",i)}const mf={...S_,..._n("MuiOutlinedInput",["root","notchedOutline","input"])};function SEt(i){return Tn("MuiFilledInput",i)}const wg={...S_,..._n("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},EEt=ga(st.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function TEt(i){return Tn("MuiButton",i)}const Ag=_n("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),wEt=tt.createContext({}),AEt=tt.createContext(void 0),MEt=i=>{const{color:e,disableElevation:n,fullWidth:r,size:s,variant:a,loading:o,loadingPosition:l,classes:u}=i,f={root:["root",o&&"loading",a,`${a}${Fe(e)}`,`size${Fe(s)}`,`${a}Size${Fe(s)}`,`color${Fe(e)}`,n&&"disableElevation",r&&"fullWidth",o&&`loadingPosition${Fe(l)}`],startIcon:["icon","startIcon",`iconSize${Fe(s)}`],endIcon:["icon","endIcon",`iconSize${Fe(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},d=wn(f,TEt,u);return{...u,...d}},G$=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],CEt=me(E2,{shouldForwardProp:i=>xo(i)||i==="classes",name:"MuiButton",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,e[n.variant],e[`${n.variant}${Fe(n.color)}`],e[`size${Fe(n.size)}`],e[`${n.variant}Size${Fe(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth,n.loading&&e.loading]}})(En(({theme:i})=>{const e=i.palette.mode==="light"?i.palette.grey[300]:i.palette.grey[800],n=i.palette.mode==="light"?i.palette.grey.A100:i.palette.grey[700];return{...i.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create(["background-color","box-shadow","border-color","color"],{duration:i.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Ag.disabled}`]:{color:(i.vars||i).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(i.vars||i).shadows[2],"&:hover":{boxShadow:(i.vars||i).shadows[4],"@media (hover: none)":{boxShadow:(i.vars||i).shadows[2]}},"&:active":{boxShadow:(i.vars||i).shadows[8]},[`&.${Ag.focusVisible}`]:{boxShadow:(i.vars||i).shadows[6]},[`&.${Ag.disabled}`]:{color:(i.vars||i).palette.action.disabled,boxShadow:(i.vars||i).shadows[0],backgroundColor:(i.vars||i).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Ag.disabled}`]:{border:`1px solid ${(i.vars||i).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(i.palette).filter(Ds()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(i.vars||i).palette[r].main,"--variant-outlinedColor":(i.vars||i).palette[r].main,"--variant-outlinedBorder":i.vars?`rgba(${i.vars.palette[r].mainChannel} / 0.5)`:Os(i.palette[r].main,.5),"--variant-containedColor":(i.vars||i).palette[r].contrastText,"--variant-containedBg":(i.vars||i).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(i.vars||i).palette[r].dark,"--variant-textBg":i.vars?`rgba(${i.vars.palette[r].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:Os(i.palette[r].main,i.palette.action.hoverOpacity),"--variant-outlinedBorder":(i.vars||i).palette[r].main,"--variant-outlinedBg":i.vars?`rgba(${i.vars.palette[r].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:Os(i.palette[r].main,i.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":i.vars?i.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":i.vars?i.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":i.vars?`rgba(${i.vars.palette.text.primaryChannel} / ${i.vars.palette.action.hoverOpacity})`:Os(i.palette.text.primary,i.palette.action.hoverOpacity),"--variant-outlinedBg":i.vars?`rgba(${i.vars.palette.text.primaryChannel} / ${i.vars.palette.action.hoverOpacity})`:Os(i.palette.text.primary,i.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:i.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:i.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:i.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:i.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:i.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:i.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Ag.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Ag.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:i.transitions.create(["background-color","box-shadow","border-color"],{duration:i.transitions.duration.short}),[`&.${Ag.loading}`]:{color:"transparent"}}}]}})),REt=me("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.startIcon,n.loading&&e.startIconLoadingStart,e[`iconSize${Fe(n.size)}`]]}})(({theme:i})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:i.transitions.create(["opacity"],{duration:i.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...G$]})),OEt=me("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.endIcon,n.loading&&e.endIconLoadingEnd,e[`iconSize${Fe(n.size)}`]]}})(({theme:i})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:i.transitions.create(["opacity"],{duration:i.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...G$]})),IEt=me("span",{name:"MuiButton",slot:"LoadingIndicator",overridesResolver:(i,e)=>e.loadingIndicator})(({theme:i})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(i.vars||i).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),o6=me("span",{name:"MuiButton",slot:"LoadingIconPlaceholder",overridesResolver:(i,e)=>e.loadingIconPlaceholder})({display:"inline-block",width:"1em",height:"1em"}),O0=tt.forwardRef(function(e,n){const r=tt.useContext(wEt),s=tt.useContext(AEt),a=K1(r,e),o=kn({props:a,name:"MuiButton"}),{children:l,color:u="primary",component:f="button",className:d,disabled:m=!1,disableElevation:y=!1,disableFocusRipple:_=!1,endIcon:x,focusVisibleClassName:S,fullWidth:T=!1,id:b,loading:M=null,loadingIndicator:R,loadingPosition:A="center",size:I="medium",startIcon:k,type:N,variant:L="text",...U}=o,O=N_(b),F=R??st.jsx(X3,{"aria-labelledby":O,color:"inherit",size:16}),H={...o,color:u,component:f,disabled:m,disableElevation:y,disableFocusRipple:_,fullWidth:T,loading:M,loadingIndicator:F,loadingPosition:A,size:I,type:N,variant:L},V=MEt(H),X=(k||M&&A==="start")&&st.jsx(REt,{className:V.startIcon,ownerState:H,children:k||st.jsx(o6,{className:V.loadingIconPlaceholder,ownerState:H})}),J=(x||M&&A==="end")&&st.jsx(OEt,{className:V.endIcon,ownerState:H,children:x||st.jsx(o6,{className:V.loadingIconPlaceholder,ownerState:H})}),q=s||"",W=typeof M=="boolean"?st.jsx("span",{className:V.loadingWrapper,style:{display:"contents"},children:M&&st.jsx(IEt,{className:V.loadingIndicator,ownerState:H,children:F})}):null;return st.jsxs(CEt,{ownerState:H,className:je(r.className,V.root,d,q),component:f,disabled:m||M,focusRipple:!_,focusVisibleClassName:je(V.focusVisible,S),ref:n,type:N,id:M?O:b,...U,classes:V,children:[X,A!=="end"&&W,l,A==="end"&&W,J]})});function DEt(i){return Tn("MuiCard",i)}_n("MuiCard",["root"]);const PEt=i=>{const{classes:e}=i;return wn({root:["root"]},DEt,e)},NEt=me(W3,{name:"MuiCard",slot:"Root",overridesResolver:(i,e)=>e.root})({overflow:"hidden"}),LEt=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiCard"}),{className:s,raised:a=!1,...o}=r,l={...r,raised:a},u=PEt(l);return st.jsx(NEt,{className:je(u.root,s),elevation:a?8:void 0,ref:n,ownerState:l,...o})});function UEt(i){return Tn("PrivateSwitchBase",i)}_n("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const kEt=i=>{const{classes:e,checked:n,disabled:r,edge:s}=i,a={root:["root",n&&"checked",r&&"disabled",s&&`edge${Fe(s)}`],input:["input"]};return wn(a,UEt,e)},zEt=me(E2)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:i,ownerState:e})=>i==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:i,ownerState:e})=>i==="end"&&e.size!=="small",style:{marginRight:-12}}]}),BEt=me("input",{shouldForwardProp:xo})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),FEt=tt.forwardRef(function(e,n){const{autoFocus:r,checked:s,checkedIcon:a,defaultChecked:o,disabled:l,disableFocusRipple:u=!1,edge:f=!1,icon:d,id:m,inputProps:y,inputRef:_,name:x,onBlur:S,onChange:T,onFocus:b,readOnly:M,required:R=!1,tabIndex:A,type:I,value:k,slots:N={},slotProps:L={},...U}=e,[O,F]=Z1({controlled:s,default:!!o,name:"SwitchBase",state:"checked"}),H=Kf(),V=ht=>{b&&b(ht),H&&H.onFocus&&H.onFocus(ht)},X=ht=>{S&&S(ht),H&&H.onBlur&&H.onBlur(ht)},J=ht=>{if(ht.nativeEvent.defaultPrevented)return;const ft=ht.target.checked;F(ft),T&&T(ht,ft)};let q=l;H&&typeof q>"u"&&(q=H.disabled);const W=I==="checkbox"||I==="radio",K={...e,checked:O,disabled:q,disableFocusRipple:u,edge:f},et=kEt(K),Q={slots:N,slotProps:{input:y,...L}},[dt,yt]=gi("root",{ref:n,elementType:zEt,className:et.root,shouldForwardComponentProp:!0,externalForwardedProps:{...Q,component:"span",...U},getSlotProps:ht=>({...ht,onFocus:ft=>{var gt;(gt=ht.onFocus)==null||gt.call(ht,ft),V(ft)},onBlur:ft=>{var gt;(gt=ht.onBlur)==null||gt.call(ht,ft),X(ft)}}),ownerState:K,additionalProps:{centerRipple:!0,focusRipple:!u,disabled:q,role:void 0,tabIndex:null}}),[xt,nt]=gi("input",{ref:_,elementType:BEt,className:et.input,externalForwardedProps:Q,getSlotProps:ht=>({onChange:ft=>{var gt;(gt=ht.onChange)==null||gt.call(ht,ft),J(ft)}}),ownerState:K,additionalProps:{autoFocus:r,checked:s,defaultChecked:o,disabled:q,id:W?m:void 0,name:x,readOnly:M,required:R,tabIndex:A,type:I,...I==="checkbox"&&k===void 0?{}:{value:k}}});return st.jsxs(dt,{...yt,children:[st.jsx(xt,{...nt}),O?a:d]})});function VEt(i,e,n){const r=e.getBoundingClientRect(),s=n&&n.getBoundingClientRect(),a=Sc(e);let o;if(e.fakeTransform)o=e.fakeTransform;else{const f=a.getComputedStyle(e);o=f.getPropertyValue("-webkit-transform")||f.getPropertyValue("transform")}let l=0,u=0;if(o&&o!=="none"&&typeof o=="string"){const f=o.split("(")[1].split(")")[0].split(",");l=parseInt(f[4],10),u=parseInt(f[5],10)}return i==="left"?s?`translateX(${s.right+l-r.left}px)`:`translateX(${a.innerWidth+l-r.left}px)`:i==="right"?s?`translateX(-${r.right-s.left-l}px)`:`translateX(-${r.left+r.width-l}px)`:i==="up"?s?`translateY(${s.bottom+u-r.top}px)`:`translateY(${a.innerHeight+u-r.top}px)`:s?`translateY(-${r.top-s.top+r.height-u}px)`:`translateY(-${r.top+r.height-u}px)`}function HEt(i){return typeof i=="function"?i():i}function Ww(i,e,n){const r=HEt(n),s=VEt(i,e,r);s&&(e.style.webkitTransform=s,e.style.transform=s)}const GEt=tt.forwardRef(function(e,n){const r=L_(),s={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},a={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:l=!0,children:u,container:f,direction:d="down",easing:m=s,in:y,onEnter:_,onEntered:x,onEntering:S,onExit:T,onExited:b,onExiting:M,style:R,timeout:A=a,TransitionComponent:I=Ou,...k}=e,N=tt.useRef(null),L=ss(My(u),N,n),U=K=>et=>{K&&(et===void 0?K(N.current):K(N.current,et))},O=U((K,et)=>{Ww(d,K,f),$3(K),_&&_(K,et)}),F=U((K,et)=>{const Q=nm({timeout:A,style:R,easing:m},{mode:"enter"});K.style.webkitTransition=r.transitions.create("-webkit-transform",{...Q}),K.style.transition=r.transitions.create("transform",{...Q}),K.style.webkitTransform="none",K.style.transform="none",S&&S(K,et)}),H=U(x),V=U(M),X=U(K=>{const et=nm({timeout:A,style:R,easing:m},{mode:"exit"});K.style.webkitTransition=r.transitions.create("-webkit-transform",et),K.style.transition=r.transitions.create("transform",et),Ww(d,K,f),T&&T(K)}),J=U(K=>{K.style.webkitTransition="",K.style.transition="",b&&b(K)}),q=K=>{o&&o(N.current,K)},W=tt.useCallback(()=>{N.current&&Ww(d,N.current,f)},[d,f]);return tt.useEffect(()=>{if(y||d==="down"||d==="right")return;const K=V3(()=>{N.current&&Ww(d,N.current,f)}),et=Sc(N.current);return et.addEventListener("resize",K),()=>{K.clear(),et.removeEventListener("resize",K)}},[d,y,f]),tt.useEffect(()=>{y||W()},[y,W]),st.jsx(I,{nodeRef:N,onEnter:O,onEntered:H,onEntering:F,onExit:X,onExited:J,onExiting:V,addEndListener:q,appear:l,in:y,timeout:A,...k,children:(K,{ownerState:et,...Q})=>tt.cloneElement(u,{ref:L,style:{visibility:K==="exited"&&!y?"hidden":void 0,...R,...u.props.style},...Q})})}),jEt=i=>{const{classes:e,disableUnderline:n,startAdornment:r,endAdornment:s,size:a,hiddenLabel:o,multiline:l}=i,u={root:["root",!n&&"underline",r&&"adornedStart",s&&"adornedEnd",a==="small"&&`size${Fe(a)}`,o&&"hiddenLabel",l&&"multiline"],input:["input"]},f=wn(u,SEt,e);return{...e,...f}},qEt=me(J2,{shouldForwardProp:i=>xo(i)||i==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[...Z2(i,e),!n.disableUnderline&&e.underline]}})(En(({theme:i})=>{const e=i.palette.mode==="light",n=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:i.vars?i.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(i.vars||i).shape.borderRadius,borderTopRightRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create("background-color",{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut}),"&:hover":{backgroundColor:i.vars?i.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:i.vars?i.vars.palette.FilledInput.bg:r}},[`&.${wg.focused}`]:{backgroundColor:i.vars?i.vars.palette.FilledInput.bg:r},[`&.${wg.disabled}`]:{backgroundColor:i.vars?i.vars.palette.FilledInput.disabledBg:a},variants:[{props:({ownerState:o})=>!o.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:i.transitions.create("transform",{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${wg.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${wg.error}`]:{"&::before, &::after":{borderBottomColor:(i.vars||i).palette.error.main}},"&::before":{borderBottom:`1px solid ${i.vars?`rgba(${i.vars.palette.common.onBackgroundChannel} / ${i.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:i.transitions.create("border-bottom-color",{duration:i.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${wg.disabled}, .${wg.error}):before`]:{borderBottom:`1px solid ${(i.vars||i).palette.text.primary}`},[`&.${wg.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(i.palette).filter(Ds()).map(([o])=>{var l;return{props:{disableUnderline:!1,color:o},style:{"&::after":{borderBottom:`2px solid ${(l=(i.vars||i).palette[o])==null?void 0:l.main}`}}}}),{props:({ownerState:o})=>o.startAdornment,style:{paddingLeft:12}},{props:({ownerState:o})=>o.endAdornment,style:{paddingRight:12}},{props:({ownerState:o})=>o.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:o,size:l})=>o.multiline&&l==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel&&o.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),$Et=me(tR,{name:"MuiFilledInput",slot:"Input",overridesResolver:Q2})(En(({theme:i})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!i.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:i.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:i.palette.mode==="light"?null:"#fff",caretColor:i.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...i.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[i.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),TU=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiFilledInput"}),{disableUnderline:s=!1,components:a={},componentsProps:o,fullWidth:l=!1,hiddenLabel:u,inputComponent:f="input",multiline:d=!1,slotProps:m,slots:y={},type:_="text",...x}=r,S={...r,disableUnderline:s,fullWidth:l,inputComponent:f,multiline:d,type:_},T=jEt(r),b={root:{ownerState:S},input:{ownerState:S}},M=m??o?Xs(b,m??o):b,R=y.root??a.Root??qEt,A=y.input??a.Input??$Et;return st.jsx(EU,{slots:{root:R,input:A},slotProps:M,fullWidth:l,inputComponent:f,multiline:d,ref:n,type:_,...x,classes:T})});TU.muiName="Input";function WEt(i){return Tn("MuiFormControl",i)}_n("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const XEt=i=>{const{classes:e,margin:n,fullWidth:r}=i,s={root:["root",n!=="none"&&`margin${Fe(n)}`,r&&"fullWidth"]};return wn(s,WEt,e)},YEt=me("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,e[`margin${Fe(n.margin)}`],n.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),wU=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiFormControl"}),{children:s,className:a,color:o="primary",component:l="div",disabled:u=!1,error:f=!1,focused:d,fullWidth:m=!1,hiddenLabel:y=!1,margin:_="none",required:x=!1,size:S="medium",variant:T="outlined",...b}=r,M={...r,color:o,component:l,disabled:u,error:f,fullWidth:m,hiddenLabel:y,margin:_,required:x,size:S,variant:T},R=XEt(M),[A,I]=tt.useState(()=>{let J=!1;return s&&tt.Children.forEach(s,q=>{if(!gI(q,["Input","Select"]))return;const W=gI(q,["Select"])?q.props.input:q;W&&yEt(W.props)&&(J=!0)}),J}),[k,N]=tt.useState(()=>{let J=!1;return s&&tt.Children.forEach(s,q=>{gI(q,["Input","Select"])&&(pC(q.props,!0)||pC(q.props.inputProps,!0))&&(J=!0)}),J}),[L,U]=tt.useState(!1);u&&L&&U(!1);const O=d!==void 0&&!u?d:L;let F;tt.useRef(!1);const H=tt.useCallback(()=>{N(!0)},[]),V=tt.useCallback(()=>{N(!1)},[]),X=tt.useMemo(()=>({adornedStart:A,setAdornedStart:I,color:o,disabled:u,error:f,filled:k,focused:O,fullWidth:m,hiddenLabel:y,size:S,onBlur:()=>{U(!1)},onFocus:()=>{U(!0)},onEmpty:V,onFilled:H,registerEffect:F,required:x,variant:T}),[A,o,u,f,k,O,m,y,F,V,H,x,S,T]);return st.jsx(SU.Provider,{value:X,children:st.jsx(YEt,{as:l,ownerState:M,className:je(R.root,a),ref:n,...b,children:s})})});function KEt(i){return Tn("MuiFormControlLabel",i)}const Yx=_n("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),ZEt=i=>{const{classes:e,disabled:n,labelPlacement:r,error:s,required:a}=i,o={root:["root",n&&"disabled",`labelPlacement${Fe(r)}`,s&&"error",a&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",s&&"error"]};return wn(o,KEt,e)},QEt=me("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[{[`& .${Yx.label}`]:e.label},e.root,e[`labelPlacement${Fe(n.labelPlacement)}`]]}})(En(({theme:i})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Yx.disabled}`]:{cursor:"default"},[`& .${Yx.label}`]:{[`&.${Yx.disabled}`]:{color:(i.vars||i).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:e})=>e==="start"||e==="top"||e==="bottom",style:{marginLeft:16}}]}))),JEt=me("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(i,e)=>e.asterisk})(En(({theme:i})=>({[`&.${Yx.error}`]:{color:(i.vars||i).palette.error.main}}))),f0=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiFormControlLabel"}),{checked:s,className:a,componentsProps:o={},control:l,disabled:u,disableTypography:f,inputRef:d,label:m,labelPlacement:y="end",name:_,onChange:x,required:S,slots:T={},slotProps:b={},value:M,...R}=r,A=Kf(),I=u??l.props.disabled??(A==null?void 0:A.disabled),k=S??l.props.required,N={disabled:I,required:k};["checked","name","onChange","value","inputRef"].forEach(J=>{typeof l.props[J]>"u"&&typeof r[J]<"u"&&(N[J]=r[J])});const L=_m({props:r,muiFormControl:A,states:["error"]}),U={...r,disabled:I,labelPlacement:y,required:k,error:L.error},O=ZEt(U),F={slots:T,slotProps:{...o,...b}},[H,V]=gi("typography",{elementType:vc,externalForwardedProps:F,ownerState:U});let X=m;return X!=null&&X.type!==vc&&!f&&(X=st.jsx(H,{component:"span",...V,className:je(O.label,V==null?void 0:V.className),children:X})),st.jsxs(QEt,{className:je(O.root,a),ownerState:U,ref:n,...R,children:[tt.cloneElement(l,N),k?st.jsxs("div",{children:[X,st.jsxs(JEt,{ownerState:U,"aria-hidden":!0,className:O.asterisk,children:["","*"]})]}):X]})});function tTt(i){return Tn("MuiFormGroup",i)}_n("MuiFormGroup",["root","row","error"]);const eTt=i=>{const{classes:e,row:n,error:r}=i;return wn({root:["root",n&&"row",r&&"error"]},tTt,e)},nTt=me("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,n.row&&e.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),iTt=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiFormGroup"}),{className:s,row:a=!1,...o}=r,l=Kf(),u=_m({props:r,muiFormControl:l,states:["error"]}),f={...r,row:a,error:u.error},d=eTt(f);return st.jsx(nTt,{className:je(d.root,s),ownerState:f,ref:n,...o})});function rTt(i){return Tn("MuiFormHelperText",i)}const l6=_n("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var u6;const sTt=i=>{const{classes:e,contained:n,size:r,disabled:s,error:a,filled:o,focused:l,required:u}=i,f={root:["root",s&&"disabled",a&&"error",r&&`size${Fe(r)}`,n&&"contained",l&&"focused",o&&"filled",u&&"required"]};return wn(f,rTt,e)},aTt=me("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,n.size&&e[`size${Fe(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(En(({theme:i})=>({color:(i.vars||i).palette.text.secondary,...i.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${l6.disabled}`]:{color:(i.vars||i).palette.text.disabled},[`&.${l6.error}`]:{color:(i.vars||i).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),oTt=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiFormHelperText"}),{children:s,className:a,component:o="p",disabled:l,error:u,filled:f,focused:d,margin:m,required:y,variant:_,...x}=r,S=Kf(),T=_m({props:r,muiFormControl:S,states:["variant","size","disabled","error","filled","focused","required"]}),b={...r,component:o,contained:T.variant==="filled"||T.variant==="outlined",variant:T.variant,size:T.size,disabled:T.disabled,error:T.error,filled:T.filled,focused:T.focused,required:T.required};delete b.ownerState;const M=sTt(b);return st.jsx(aTt,{as:o,className:je(M.root,a),ref:n,...x,ownerState:b,children:s===" "?u6||(u6=st.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):s})});function lTt(i){return Tn("MuiFormLabel",i)}const x1=_n("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),uTt=i=>{const{classes:e,color:n,focused:r,disabled:s,error:a,filled:o,required:l}=i,u={root:["root",`color${Fe(n)}`,s&&"disabled",a&&"error",o&&"filled",r&&"focused",l&&"required"],asterisk:["asterisk",a&&"error"]};return wn(u,lTt,e)},cTt=me("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,n.color==="secondary"&&e.colorSecondary,n.filled&&e.filled]}})(En(({theme:i})=>({color:(i.vars||i).palette.text.secondary,...i.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(i.palette).filter(Ds()).map(([e])=>({props:{color:e},style:{[`&.${x1.focused}`]:{color:(i.vars||i).palette[e].main}}})),{props:{},style:{[`&.${x1.disabled}`]:{color:(i.vars||i).palette.text.disabled},[`&.${x1.error}`]:{color:(i.vars||i).palette.error.main}}}]}))),fTt=me("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(i,e)=>e.asterisk})(En(({theme:i})=>({[`&.${x1.error}`]:{color:(i.vars||i).palette.error.main}}))),AU=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiFormLabel"}),{children:s,className:a,color:o,component:l="label",disabled:u,error:f,filled:d,focused:m,required:y,..._}=r,x=Kf(),S=_m({props:r,muiFormControl:x,states:["color","required","focused","disabled","error","filled"]}),T={...r,color:S.color||"primary",component:l,disabled:S.disabled,error:S.error,filled:S.filled,focused:S.focused,required:S.required},b=uTt(T);return st.jsxs(cTt,{as:l,ownerState:T,className:je(b.root,a),ref:n,..._,children:[s,S.required&&st.jsxs(fTt,{ownerState:T,"aria-hidden":!0,className:b.asterisk,children:["","*"]})]})}),hTt=i=>{const{classes:e,disableUnderline:n}=i,s=wn({root:["root",!n&&"underline"],input:["input"]},bEt,e);return{...e,...s}},dTt=me(J2,{shouldForwardProp:i=>xo(i)||i==="classes",name:"MuiInput",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[...Z2(i,e),!n.disableUnderline&&e.underline]}})(En(({theme:i})=>{let n=i.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return i.vars&&(n=`rgba(${i.vars.palette.common.onBackgroundChannel} / ${i.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:i.transitions.create("transform",{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${wx.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${wx.error}`]:{"&::before, &::after":{borderBottomColor:(i.vars||i).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:i.transitions.create("border-bottom-color",{duration:i.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${wx.disabled}, .${wx.error}):before`]:{borderBottom:`2px solid ${(i.vars||i).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${wx.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(i.palette).filter(Ds()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(i.vars||i).palette[r].main}`}}}))]}})),pTt=me(tR,{name:"MuiInput",slot:"Input",overridesResolver:Q2})({}),MU=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiInput"}),{disableUnderline:s=!1,components:a={},componentsProps:o,fullWidth:l=!1,inputComponent:u="input",multiline:f=!1,slotProps:d,slots:m={},type:y="text",..._}=r,x=hTt(r),T={root:{ownerState:{disableUnderline:s}}},b=d??o?Xs(d??o,T):T,M=m.root??a.Root??dTt,R=m.input??a.Input??pTt;return st.jsx(EU,{slots:{root:M,input:R},slotProps:b,fullWidth:l,inputComponent:u,multiline:f,ref:n,type:y,..._,classes:x})});MU.muiName="Input";function mTt(i){return Tn("MuiInputLabel",i)}_n("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const gTt=i=>{const{classes:e,formControl:n,size:r,shrink:s,disableAnimation:a,variant:o,required:l}=i,u={root:["root",n&&"formControl",!a&&"animated",s&&"shrink",r&&r!=="normal"&&`size${Fe(r)}`,o],asterisk:[l&&"asterisk"]},f=wn(u,mTt,e);return{...e,...f}},yTt=me(AU,{shouldForwardProp:i=>xo(i)||i==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[{[`& .${x1.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(En(({theme:i})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:i.transitions.create(["color","transform","max-width"],{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:n,size:r})=>e==="filled"&&n.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),vTt=tt.forwardRef(function(e,n){const r=kn({name:"MuiInputLabel",props:e}),{disableAnimation:s=!1,margin:a,shrink:o,variant:l,className:u,...f}=r,d=Kf();let m=o;typeof m>"u"&&d&&(m=d.filled||d.focused||d.adornedStart);const y=_m({props:r,muiFormControl:d,states:["size","variant","required","focused"]}),_={...r,disableAnimation:s,formControl:d,shrink:m,size:y.size,variant:y.variant,required:y.required,focused:y.focused},x=gTt(_);return st.jsx(yTt,{"data-shrink":m,ref:n,className:je(x.root,u),...f,ownerState:_,classes:x})});function _Tt(i){return Tn("MuiLinearProgress",i)}_n("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const fN=4,hN=gm`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,bTt=typeof hN!="string"?P_`
        animation: ${hN} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,dN=gm`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,xTt=typeof dN!="string"?P_`
        animation: ${dN} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,pN=gm`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,STt=typeof pN!="string"?P_`
        animation: ${pN} 3s infinite linear;
      `:null,ETt=i=>{const{classes:e,variant:n,color:r}=i,s={root:["root",`color${Fe(r)}`,n],dashed:["dashed",`dashedColor${Fe(r)}`],bar1:["bar","bar1",`barColor${Fe(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar","bar2",n!=="buffer"&&`barColor${Fe(r)}`,n==="buffer"&&`color${Fe(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return wn(s,_Tt,e)},CU=(i,e)=>i.vars?i.vars.palette.LinearProgress[`${e}Bg`]:i.palette.mode==="light"?t_(i.palette[e].main,.62):J0(i.palette[e].main,.5),TTt=me("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,e[`color${Fe(n.color)}`],e[n.variant]]}})(En(({theme:i})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(i.palette).filter(Ds()).map(([e])=>({props:{color:e},style:{backgroundColor:CU(i,e)}})),{props:({ownerState:e})=>e.color==="inherit"&&e.variant!=="buffer",style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),wTt=me("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.dashed,e[`dashedColor${Fe(n.color)}`]]}})(En(({theme:i})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(i.palette).filter(Ds()).map(([e])=>{const n=CU(i,e);return{props:{color:e},style:{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`}}})]})),STt||{animation:`${pN} 3s infinite linear`}),ATt=me("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.bar,e.bar1,e[`barColor${Fe(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar1Indeterminate,n.variant==="determinate"&&e.bar1Determinate,n.variant==="buffer"&&e.bar1Buffer]}})(En(({theme:i})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(i.palette).filter(Ds()).map(([e])=>({props:{color:e},style:{backgroundColor:(i.vars||i).palette[e].main}})),{props:{variant:"determinate"},style:{transition:`transform .${fN}s linear`}},{props:{variant:"buffer"},style:{zIndex:1,transition:`transform .${fN}s linear`}},{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:{width:"auto"}},{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:bTt||{animation:`${hN} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),MTt=me("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.bar,e.bar2,e[`barColor${Fe(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar2Indeterminate,n.variant==="buffer"&&e.bar2Buffer]}})(En(({theme:i})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(i.palette).filter(Ds()).map(([e])=>({props:{color:e},style:{"--LinearProgressBar2-barColor":(i.vars||i).palette[e].main}})),{props:({ownerState:e})=>e.variant!=="buffer"&&e.color!=="inherit",style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:e})=>e.variant!=="buffer"&&e.color==="inherit",style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(i.palette).filter(Ds()).map(([e])=>({props:{color:e,variant:"buffer"},style:{backgroundColor:CU(i,e),transition:`transform .${fN}s linear`}})),{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:{width:"auto"}},{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:xTt||{animation:`${dN} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),h0=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiLinearProgress"}),{className:s,color:a="primary",value:o,valueBuffer:l,variant:u="indeterminate",...f}=r,d={...r,color:a,variant:u},m=ETt(d),y=x2(),_={},x={bar1:{},bar2:{}};if((u==="determinate"||u==="buffer")&&o!==void 0){_["aria-valuenow"]=Math.round(o),_["aria-valuemin"]=0,_["aria-valuemax"]=100;let S=o-100;y&&(S=-S),x.bar1.transform=`translateX(${S}%)`}if(u==="buffer"&&l!==void 0){let S=(l||0)-100;y&&(S=-S),x.bar2.transform=`translateX(${S}%)`}return st.jsxs(TTt,{className:je(m.root,s),ownerState:d,role:"progressbar",..._,ref:n,...f,children:[u==="buffer"?st.jsx(wTt,{className:m.dashed,ownerState:d}):null,st.jsx(ATt,{className:m.bar1,ownerState:d,style:x.bar1}),u==="determinate"?null:st.jsx(MTt,{className:m.bar2,ownerState:d,style:x.bar2})]})});function CTt(i){return Tn("MuiNativeSelect",i)}const RU=_n("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),RTt=i=>{const{classes:e,variant:n,disabled:r,multiple:s,open:a,error:o}=i,l={select:["select",n,r&&"disabled",s&&"multiple",o&&"error"],icon:["icon",`icon${Fe(n)}`,a&&"iconOpen",r&&"disabled"]};return wn(l,CTt,e)},j$=me("select")(({theme:i})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${RU.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(i.vars||i).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(i.vars||i).shape.borderRadius,"&:focus":{borderRadius:(i.vars||i).shape.borderRadius},"&&&":{paddingRight:32}}}]})),OTt=me(j$,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:xo,overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.select,e[n.variant],n.error&&e.error,{[`&.${RU.multiple}`]:e.multiple}]}})({}),q$=me("svg")(({theme:i})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(i.vars||i).palette.action.active,[`&.${RU.disabled}`]:{color:(i.vars||i).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),ITt=me(q$,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.icon,n.variant&&e[`icon${Fe(n.variant)}`],n.open&&e.iconOpen]}})({}),DTt=tt.forwardRef(function(e,n){const{className:r,disabled:s,error:a,IconComponent:o,inputRef:l,variant:u="standard",...f}=e,d={...e,disabled:s,variant:u,error:a},m=RTt(d);return st.jsxs(tt.Fragment,{children:[st.jsx(OTt,{ownerState:d,className:je(m.select,r),disabled:s,ref:l||n,...f}),e.multiple?null:st.jsx(ITt,{as:o,ownerState:d,className:m.icon})]})});var c6;const PTt=me("fieldset",{shouldForwardProp:xo})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),NTt=me("legend",{shouldForwardProp:xo})(En(({theme:i})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:i.transitions.create("width",{duration:150,easing:i.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:i.transitions.create("max-width",{duration:50,easing:i.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:i.transitions.create("max-width",{duration:100,easing:i.transitions.easing.easeOut,delay:50})}}]})));function LTt(i){const{children:e,classes:n,className:r,label:s,notched:a,...o}=i,l=s!=null&&s!=="",u={...i,notched:a,withLabel:l};return st.jsx(PTt,{"aria-hidden":!0,className:r,ownerState:u,...o,children:st.jsx(NTt,{ownerState:u,children:l?st.jsx("span",{children:s}):c6||(c6=st.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const UTt=i=>{const{classes:e}=i,r=wn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},xEt,e);return{...e,...r}},kTt=me(J2,{shouldForwardProp:i=>xo(i)||i==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Z2})(En(({theme:i})=>{const e=i.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(i.vars||i).shape.borderRadius,[`&:hover .${mf.notchedOutline}`]:{borderColor:(i.vars||i).palette.text.primary},"@media (hover: none)":{[`&:hover .${mf.notchedOutline}`]:{borderColor:i.vars?`rgba(${i.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${mf.focused} .${mf.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(i.palette).filter(Ds()).map(([n])=>({props:{color:n},style:{[`&.${mf.focused} .${mf.notchedOutline}`]:{borderColor:(i.vars||i).palette[n].main}}})),{props:{},style:{[`&.${mf.error} .${mf.notchedOutline}`]:{borderColor:(i.vars||i).palette.error.main},[`&.${mf.disabled} .${mf.notchedOutline}`]:{borderColor:(i.vars||i).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:r})=>n.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),zTt=me(LTt,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(i,e)=>e.notchedOutline})(En(({theme:i})=>{const e=i.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:i.vars?`rgba(${i.vars.palette.common.onBackgroundChannel} / 0.23)`:e}})),BTt=me(tR,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Q2})(En(({theme:i})=>({padding:"16.5px 14px",...!i.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:i.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:i.palette.mode==="light"?null:"#fff",caretColor:i.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...i.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[i.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),OU=tt.forwardRef(function(e,n){var r;const s=kn({props:e,name:"MuiOutlinedInput"}),{components:a={},fullWidth:o=!1,inputComponent:l="input",label:u,multiline:f=!1,notched:d,slots:m={},type:y="text",..._}=s,x=UTt(s),S=Kf(),T=_m({props:s,muiFormControl:S,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),b={...s,color:T.color||"primary",disabled:T.disabled,error:T.error,focused:T.focused,formControl:S,fullWidth:o,hiddenLabel:T.hiddenLabel,multiline:f,size:T.size,type:y},M=m.root??a.Root??kTt,R=m.input??a.Input??BTt;return st.jsx(EU,{slots:{root:M,input:R},renderSuffix:A=>st.jsx(zTt,{ownerState:b,className:x.notchedOutline,label:u!=null&&u!==""&&T.required?r||(r=st.jsxs(tt.Fragment,{children:[u,"","*"]})):u,notched:typeof d<"u"?d:!!(A.startAdornment||A.filled||A.focused)}),fullWidth:o,inputComponent:l,multiline:f,ref:n,type:y,..._,classes:{...x,notchedOutline:null}})});OU.muiName="Input";const FTt=ga(st.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),VTt=ga(st.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),HTt=me("span",{shouldForwardProp:xo})({position:"relative",display:"flex"}),GTt=me(FTt)({transform:"scale(1)"}),jTt=me(VTt)(En(({theme:i})=>({left:0,position:"absolute",transform:"scale(0)",transition:i.transitions.create("transform",{easing:i.transitions.easing.easeIn,duration:i.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:i.transitions.create("transform",{easing:i.transitions.easing.easeOut,duration:i.transitions.duration.shortest})}}]})));function $$(i){const{checked:e=!1,classes:n={},fontSize:r}=i,s={...i,checked:e};return st.jsxs(HTt,{className:n.root,ownerState:s,children:[st.jsx(GTt,{fontSize:r,className:n.background,ownerState:s}),st.jsx(jTt,{fontSize:r,className:n.dot,ownerState:s})]})}const W$=tt.createContext(void 0);function qTt(){return tt.useContext(W$)}function $Tt(i){return Tn("MuiRadio",i)}const f6=_n("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),WTt=i=>{const{classes:e,color:n,size:r}=i,s={root:["root",`color${Fe(n)}`,r!=="medium"&&`size${Fe(r)}`]};return{...e,...wn(s,$Tt,e)}},XTt=me(FEt,{shouldForwardProp:i=>xo(i)||i==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,n.size!=="medium"&&e[`size${Fe(n.size)}`],e[`color${Fe(n.color)}`]]}})(En(({theme:i})=>({color:(i.vars||i).palette.text.secondary,[`&.${f6.disabled}`]:{color:(i.vars||i).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:i.vars?`rgba(${i.vars.palette.action.activeChannel} / ${i.vars.palette.action.hoverOpacity})`:Os(i.palette.action.active,i.palette.action.hoverOpacity)}}},...Object.entries(i.palette).filter(Ds()).map(([e])=>({props:{color:e,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:i.vars?`rgba(${i.vars.palette[e].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:Os(i.palette[e].main,i.palette.action.hoverOpacity)}}})),...Object.entries(i.palette).filter(Ds()).map(([e])=>({props:{color:e,disabled:!1},style:{[`&.${f6.checked}`]:{color:(i.vars||i).palette[e].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function YTt(i,e){return typeof e=="object"&&e!==null?i===e:String(i)===String(e)}const KTt=st.jsx($$,{checked:!0}),ZTt=st.jsx($$,{}),d0=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiRadio"}),{checked:s,checkedIcon:a=KTt,color:o="primary",icon:l=ZTt,name:u,onChange:f,size:d="medium",className:m,disabled:y,disableRipple:_=!1,slots:x={},slotProps:S={},inputProps:T,...b}=r,M=Kf();let R=y;M&&typeof R>"u"&&(R=M.disabled),R??(R=!1);const A={...r,disabled:R,disableRipple:_,color:o,size:d},I=WTt(A),k=qTt();let N=s;const L=WD(f,k&&k.onChange);let U=u;k&&(typeof N>"u"&&(N=YTt(k.value,r.value)),typeof U>"u"&&(U=k.name));const O=S.input??T,[F,H]=gi("root",{ref:n,elementType:XTt,className:je(I.root,m),shouldForwardComponentProp:!0,externalForwardedProps:{slots:x,slotProps:S,...b},getSlotProps:V=>({...V,onChange:(X,...J)=>{var q;(q=V.onChange)==null||q.call(V,X,...J),L(X,...J)}}),ownerState:A,additionalProps:{type:"radio",icon:tt.cloneElement(l,{fontSize:l.props.fontSize??d}),checkedIcon:tt.cloneElement(a,{fontSize:a.props.fontSize??d}),disabled:R,name:U,checked:N,slots:x,slotProps:{input:typeof O=="function"?O(A):O}}});return st.jsx(F,{...H,classes:I})});function QTt(i){return Tn("MuiRadioGroup",i)}_n("MuiRadioGroup",["root","row","error"]);const JTt=i=>{const{classes:e,row:n,error:r}=i;return wn({root:["root",n&&"row",r&&"error"]},QTt,e)},twt=tt.forwardRef(function(e,n){const{actions:r,children:s,className:a,defaultValue:o,name:l,onChange:u,value:f,...d}=e,m=tt.useRef(null),y=JTt(e),[_,x]=Z1({controlled:f,default:o,name:"RadioGroup"});tt.useImperativeHandle(r,()=>({focus:()=>{let M=m.current.querySelector("input:not(:disabled):checked");M||(M=m.current.querySelector("input:not(:disabled)")),M&&M.focus()}}),[]);const S=ss(n,m),T=N_(l),b=tt.useMemo(()=>({name:T,onChange(M){x(M.target.value),u&&u(M,M.target.value)},value:_}),[T,u,x,_]);return st.jsx(W$.Provider,{value:b,children:st.jsx(iTt,{role:"radiogroup",ref:S,className:je(y.root,a),...d,children:s})})});function X$(i){return Tn("MuiSelect",i)}const Ax=_n("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var h6;const ewt=me(j$,{name:"MuiSelect",slot:"Select",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[{[`&.${Ax.select}`]:e.select},{[`&.${Ax.select}`]:e[n.variant]},{[`&.${Ax.error}`]:e.error},{[`&.${Ax.multiple}`]:e.multiple}]}})({[`&.${Ax.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),nwt=me(q$,{name:"MuiSelect",slot:"Icon",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.icon,n.variant&&e[`icon${Fe(n.variant)}`],n.open&&e.iconOpen]}})({}),iwt=me("input",{shouldForwardProp:i=>pG(i)&&i!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(i,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function d6(i,e){return typeof e=="object"&&e!==null?i===e:String(i)===String(e)}function rwt(i){return i==null||typeof i=="string"&&!i.trim()}const swt=i=>{const{classes:e,variant:n,disabled:r,multiple:s,open:a,error:o}=i,l={select:["select",n,r&&"disabled",s&&"multiple",o&&"error"],icon:["icon",`icon${Fe(n)}`,a&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return wn(l,X$,e)},awt=tt.forwardRef(function(e,n){var Me;const{"aria-describedby":r,"aria-label":s,autoFocus:a,autoWidth:o,children:l,className:u,defaultOpen:f,defaultValue:d,disabled:m,displayEmpty:y,error:_=!1,IconComponent:x,inputRef:S,labelId:T,MenuProps:b={},multiple:M,name:R,onBlur:A,onChange:I,onClose:k,onFocus:N,onOpen:L,open:U,readOnly:O,renderValue:F,required:H,SelectDisplayProps:V={},tabIndex:X,type:J,value:q,variant:W="standard",...K}=e,[et,Q]=Z1({controlled:q,default:d,name:"Select"}),[dt,yt]=Z1({controlled:U,default:f,name:"Select"}),xt=tt.useRef(null),nt=tt.useRef(null),[ht,ft]=tt.useState(null),{current:gt}=tt.useRef(U!=null),[wt,Kt]=tt.useState(),zt=ss(n,S),te=tt.useCallback(Zt=>{nt.current=Zt,Zt&&ft(Zt)},[]),Pt=ht==null?void 0:ht.parentNode;tt.useImperativeHandle(zt,()=>({focus:()=>{nt.current.focus()},node:xt.current,value:et}),[et]),tt.useEffect(()=>{f&&dt&&ht&&!gt&&(Kt(o?null:Pt.clientWidth),nt.current.focus())},[ht,o]),tt.useEffect(()=>{a&&nt.current.focus()},[a]),tt.useEffect(()=>{if(!T)return;const Zt=Fl(nt.current).getElementById(T);if(Zt){const Re=()=>{getSelection().isCollapsed&&nt.current.focus()};return Zt.addEventListener("click",Re),()=>{Zt.removeEventListener("click",Re)}}},[T]);const Ht=(Zt,Re)=>{Zt?L&&L(Re):k&&k(Re),gt||(Kt(o?null:Pt.clientWidth),yt(Zt))},at=Zt=>{Zt.button===0&&(Zt.preventDefault(),nt.current.focus(),Ht(!0,Zt))},ue=Zt=>{Ht(!1,Zt)},Jt=tt.Children.toArray(l),se=Zt=>{const Re=Jt.find(Ie=>Ie.props.value===Zt.target.value);Re!==void 0&&(Q(Re.props.value),I&&I(Zt,Re))},ae=Zt=>Re=>{let Ie;if(Re.currentTarget.hasAttribute("tabindex")){if(M){Ie=Array.isArray(et)?et.slice():[];const en=et.indexOf(Zt.props.value);en===-1?Ie.push(Zt.props.value):Ie.splice(en,1)}else Ie=Zt.props.value;if(Zt.props.onClick&&Zt.props.onClick(Re),et!==Ie&&(Q(Ie),I)){const en=Re.nativeEvent||Re,At=new en.constructor(en.type,en);Object.defineProperty(At,"target",{writable:!0,value:{value:Ie,name:R}}),I(At,Zt)}M||Ht(!1,Re)}},Ce=Zt=>{O||[" ","ArrowUp","ArrowDown","Enter"].includes(Zt.key)&&(Zt.preventDefault(),Ht(!0,Zt))},le=ht!==null&&dt,ct=Zt=>{!le&&A&&(Object.defineProperty(Zt,"target",{writable:!0,value:{value:et,name:R}}),A(Zt))};delete K["aria-invalid"];let G,lt;const mt=[];let Ct=!1;(pC({value:et})||y)&&(F?G=F(et):Ct=!0);const bt=Jt.map(Zt=>{if(!tt.isValidElement(Zt))return null;let Re;if(M){if(!Array.isArray(et))throw new Error(pd(2));Re=et.some(Ie=>d6(Ie,Zt.props.value)),Re&&Ct&&mt.push(Zt.props.children)}else Re=d6(et,Zt.props.value),Re&&Ct&&(lt=Zt.props.children);return tt.cloneElement(Zt,{"aria-selected":Re?"true":"false",onClick:ae(Zt),onKeyUp:Ie=>{Ie.key===" "&&Ie.preventDefault(),Zt.props.onKeyUp&&Zt.props.onKeyUp(Ie)},role:"option",selected:Re,value:void 0,"data-value":Zt.props.value})});Ct&&(M?mt.length===0?G=null:G=mt.reduce((Zt,Re,Ie)=>(Zt.push(Re),Ie<mt.length-1&&Zt.push(", "),Zt),[]):G=lt);let Mt=wt;!o&&gt&&ht&&(Mt=Pt.clientWidth);let Lt;typeof X<"u"?Lt=X:Lt=m?null:0;const Qt=V.id||(R?`mui-component-select-${R}`:void 0),Oe={...e,variant:W,value:et,open:le,error:_},jt=swt(Oe),ve={...b.PaperProps,...(Me=b.slotProps)==null?void 0:Me.paper},we=N_();return st.jsxs(tt.Fragment,{children:[st.jsx(ewt,{as:"div",ref:te,tabIndex:Lt,role:"combobox","aria-controls":le?we:void 0,"aria-disabled":m?"true":void 0,"aria-expanded":le?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[T,Qt].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":H?"true":void 0,"aria-invalid":_?"true":void 0,onKeyDown:Ce,onMouseDown:m||O?null:at,onBlur:ct,onFocus:N,...V,ownerState:Oe,className:je(V.className,jt.select,u),id:Qt,children:rwt(G)?h6||(h6=st.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):G}),st.jsx(iwt,{"aria-invalid":_,value:Array.isArray(et)?et.join(","):et,name:R,ref:xt,"aria-hidden":!0,onChange:se,tabIndex:-1,disabled:m,className:jt.nativeInput,autoFocus:a,required:H,...K,ownerState:Oe}),st.jsx(nwt,{as:x,className:jt.icon,ownerState:Oe}),st.jsx(xG,{id:`menu-${R||""}`,anchorEl:Pt,open:le,onClose:ue,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...b,slotProps:{...b.slotProps,list:{"aria-labelledby":T,role:"listbox","aria-multiselectable":M?"true":void 0,disableListWrap:!0,id:we,...b.MenuListProps},paper:{...ve,style:{minWidth:Mt,...ve!=null?ve.style:null}}},children:bt})]})}),owt=i=>{const{classes:e}=i,r=wn({root:["root"]},X$,e);return{...e,...r}},IU={name:"MuiSelect",overridesResolver:(i,e)=>e.root,shouldForwardProp:i=>xo(i)&&i!=="variant",slot:"Root"},lwt=me(MU,IU)(""),uwt=me(OU,IU)(""),cwt=me(TU,IU)(""),DU=tt.forwardRef(function(e,n){const r=kn({name:"MuiSelect",props:e}),{autoWidth:s=!1,children:a,classes:o={},className:l,defaultOpen:u=!1,displayEmpty:f=!1,IconComponent:d=EEt,id:m,input:y,inputProps:_,label:x,labelId:S,MenuProps:T,multiple:b=!1,native:M=!1,onClose:R,onOpen:A,open:I,renderValue:k,SelectDisplayProps:N,variant:L="outlined",...U}=r,O=M?DTt:awt,F=Kf(),H=_m({props:r,muiFormControl:F,states:["variant","error"]}),V=H.variant||L,X={...r,variant:V,classes:o},J=owt(X),{root:q,...W}=J,K=y||{standard:st.jsx(lwt,{ownerState:X}),outlined:st.jsx(uwt,{label:x,ownerState:X}),filled:st.jsx(cwt,{ownerState:X})}[V],et=ss(n,My(K));return st.jsx(tt.Fragment,{children:tt.cloneElement(K,{inputComponent:O,inputProps:{children:a,error:H.error,IconComponent:d,variant:V,type:void 0,multiple:b,...M?{id:m}:{autoWidth:s,defaultOpen:u,displayEmpty:f,labelId:S,MenuProps:T,onClose:R,onOpen:A,open:I,renderValue:k,SelectDisplayProps:{id:m,...N}},..._,classes:_?Xs(W,_.classes):W,...y?y.props.inputProps:{}},...(b&&M||f)&&V==="outlined"?{notched:!0}:{},ref:et,className:je(K.props.className,l,J.root),...!y&&{variant:V},...U})})});DU.muiName="Select";const fwt=Lot({createStyledComponent:me("div",{name:"MuiStack",slot:"Root",overridesResolver:(i,e)=>e.root}),useThemeProps:i=>kn({props:i,name:"MuiStack"})}),eR=tt.createContext({}),PU=tt.createContext({});function hwt(i){return Tn("MuiStep",i)}_n("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const dwt=i=>{const{classes:e,orientation:n,alternativeLabel:r,completed:s}=i;return wn({root:["root",n,r&&"alternativeLabel",s&&"completed"]},hwt,e)},pwt=me("div",{name:"MuiStep",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,e[n.orientation],n.alternativeLabel&&e.alternativeLabel,n.completed&&e.completed]}})({variants:[{props:{orientation:"horizontal"},style:{paddingLeft:8,paddingRight:8}},{props:{alternativeLabel:!0},style:{flex:1,position:"relative"}}]}),mwt=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiStep"}),{active:s,children:a,className:o,component:l="div",completed:u,disabled:f,expanded:d=!1,index:m,last:y,..._}=r,{activeStep:x,connector:S,alternativeLabel:T,orientation:b,nonLinear:M}=tt.useContext(eR);let[R=!1,A=!1,I=!1]=[s,u,f];x===m?R=s!==void 0?s:!0:!M&&x>m?A=u!==void 0?u:!0:!M&&x<m&&(I=f!==void 0?f:!0);const k=tt.useMemo(()=>({index:m,last:y,expanded:d,icon:m+1,active:R,completed:A,disabled:I}),[m,y,d,R,A,I]),N={...r,active:R,orientation:b,alternativeLabel:T,completed:A,disabled:I,expanded:d,component:l},L=dwt(N),U=st.jsxs(pwt,{as:l,className:je(L.root,o),ref:n,ownerState:N,..._,children:[S&&T&&m!==0?S:null,a]});return st.jsx(PU.Provider,{value:k,children:S&&!T&&m!==0?st.jsxs(tt.Fragment,{children:[S,U]}):U})}),gwt=ga(st.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),ywt=ga(st.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function vwt(i){return Tn("MuiStepIcon",i)}const oD=_n("MuiStepIcon",["root","active","completed","error","text"]);var p6;const _wt=i=>{const{classes:e,active:n,completed:r,error:s}=i;return wn({root:["root",n&&"active",r&&"completed",s&&"error"],text:["text"]},vwt,e)},lD=me(TM,{name:"MuiStepIcon",slot:"Root",overridesResolver:(i,e)=>e.root})(En(({theme:i})=>({display:"block",transition:i.transitions.create("color",{duration:i.transitions.duration.shortest}),color:(i.vars||i).palette.text.disabled,[`&.${oD.completed}`]:{color:(i.vars||i).palette.primary.main},[`&.${oD.active}`]:{color:(i.vars||i).palette.primary.main},[`&.${oD.error}`]:{color:(i.vars||i).palette.error.main}}))),bwt=me("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(i,e)=>e.text})(En(({theme:i})=>({fill:(i.vars||i).palette.primary.contrastText,fontSize:i.typography.caption.fontSize,fontFamily:i.typography.fontFamily}))),xwt=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiStepIcon"}),{active:s=!1,className:a,completed:o=!1,error:l=!1,icon:u,...f}=r,d={...r,active:s,completed:o,error:l},m=_wt(d);if(typeof u=="number"||typeof u=="string"){const y=je(a,m.root);return l?st.jsx(lD,{as:ywt,className:y,ref:n,ownerState:d,...f}):o?st.jsx(lD,{as:gwt,className:y,ref:n,ownerState:d,...f}):st.jsxs(lD,{className:y,ref:n,ownerState:d,...f,children:[p6||(p6=st.jsx("circle",{cx:"12",cy:"12",r:"12"})),st.jsx(bwt,{className:m.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:d,children:u})]})}return u});function Swt(i){return Tn("MuiStepLabel",i)}const Gp=_n("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),Ewt=i=>{const{classes:e,orientation:n,active:r,completed:s,error:a,disabled:o,alternativeLabel:l}=i;return wn({root:["root",n,a&&"error",o&&"disabled",l&&"alternativeLabel"],label:["label",r&&"active",s&&"completed",a&&"error",o&&"disabled",l&&"alternativeLabel"],iconContainer:["iconContainer",r&&"active",s&&"completed",a&&"error",o&&"disabled",l&&"alternativeLabel"],labelContainer:["labelContainer",l&&"alternativeLabel"]},Swt,e)},Twt=me("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,e[n.orientation]]}})({display:"flex",alignItems:"center",[`&.${Gp.alternativeLabel}`]:{flexDirection:"column"},[`&.${Gp.disabled}`]:{cursor:"default"},variants:[{props:{orientation:"vertical"},style:{textAlign:"left",padding:"8px 0"}}]}),wwt=me("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(i,e)=>e.label})(En(({theme:i})=>({...i.typography.body2,display:"block",transition:i.transitions.create("color",{duration:i.transitions.duration.shortest}),[`&.${Gp.active}`]:{color:(i.vars||i).palette.text.primary,fontWeight:500},[`&.${Gp.completed}`]:{color:(i.vars||i).palette.text.primary,fontWeight:500},[`&.${Gp.alternativeLabel}`]:{marginTop:16},[`&.${Gp.error}`]:{color:(i.vars||i).palette.error.main}}))),Awt=me("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(i,e)=>e.iconContainer})({flexShrink:0,display:"flex",paddingRight:8,[`&.${Gp.alternativeLabel}`]:{paddingRight:0}}),Mwt=me("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(i,e)=>e.labelContainer})(En(({theme:i})=>({width:"100%",color:(i.vars||i).palette.text.secondary,[`&.${Gp.alternativeLabel}`]:{textAlign:"center"}}))),Y$=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiStepLabel"}),{children:s,className:a,componentsProps:o={},error:l=!1,icon:u,optional:f,slots:d={},slotProps:m={},StepIconComponent:y,StepIconProps:_,...x}=r,{alternativeLabel:S,orientation:T}=tt.useContext(eR),{active:b,disabled:M,completed:R,icon:A}=tt.useContext(PU),I=u||A;let k=y;I&&!k&&(k=xwt);const N={...r,active:b,alternativeLabel:S,completed:R,disabled:M,error:l,orientation:T},L=Ewt(N),U={slots:d,slotProps:{stepIcon:_,...o,...m}},[O,F]=gi("root",{elementType:Twt,externalForwardedProps:{...U,...x},ownerState:N,ref:n,className:je(L.root,a)}),[H,V]=gi("label",{elementType:wwt,externalForwardedProps:U,ownerState:N}),[X,J]=gi("stepIcon",{elementType:k,externalForwardedProps:U,ownerState:N});return st.jsxs(O,{...F,children:[I||X?st.jsx(Awt,{className:L.iconContainer,ownerState:N,children:st.jsx(X,{completed:R,active:b,error:l,icon:I,...J})}):null,st.jsxs(Mwt,{className:L.labelContainer,ownerState:N,children:[s?st.jsx(H,{...V,className:je(L.label,V==null?void 0:V.className),children:s}):null,f]})]})});Y$.muiName="StepLabel";function Cwt(i){return Tn("MuiStepConnector",i)}_n("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const Rwt=i=>{const{classes:e,orientation:n,alternativeLabel:r,active:s,completed:a,disabled:o}=i,l={root:["root",n,r&&"alternativeLabel",s&&"active",a&&"completed",o&&"disabled"],line:["line",`line${Fe(n)}`]};return wn(l,Cwt,e)},Owt=me("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,e[n.orientation],n.alternativeLabel&&e.alternativeLabel,n.completed&&e.completed]}})({flex:"1 1 auto",variants:[{props:{orientation:"vertical"},style:{marginLeft:12}},{props:{alternativeLabel:!0},style:{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"}}]}),Iwt=me("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.line,e[`line${Fe(n.orientation)}`]]}})(En(({theme:i})=>{const e=i.palette.mode==="light"?i.palette.grey[400]:i.palette.grey[600];return{display:"block",borderColor:i.vars?i.vars.palette.StepConnector.border:e,variants:[{props:{orientation:"horizontal"},style:{borderTopStyle:"solid",borderTopWidth:1}},{props:{orientation:"vertical"},style:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}]}})),Dwt=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiStepConnector"}),{className:s,...a}=r,{alternativeLabel:o,orientation:l="horizontal"}=tt.useContext(eR),{active:u,disabled:f,completed:d}=tt.useContext(PU),m={...r,alternativeLabel:o,orientation:l,active:u,completed:d,disabled:f},y=Rwt(m);return st.jsx(Owt,{className:je(y.root,s),ref:n,ownerState:m,...a,children:st.jsx(Iwt,{className:y.line,ownerState:m})})});function Pwt(i){return Tn("MuiStepper",i)}_n("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const Nwt=i=>{const{orientation:e,nonLinear:n,alternativeLabel:r,classes:s}=i;return wn({root:["root",e,n&&"nonLinear",r&&"alternativeLabel"]},Pwt,s)},Lwt=me("div",{name:"MuiStepper",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:n}=i;return[e.root,e[n.orientation],n.alternativeLabel&&e.alternativeLabel,n.nonLinear&&e.nonLinear]}})({display:"flex",variants:[{props:{orientation:"horizontal"},style:{flexDirection:"row",alignItems:"center"}},{props:{orientation:"vertical"},style:{flexDirection:"column"}},{props:{alternativeLabel:!0},style:{alignItems:"flex-start"}}]}),Uwt=st.jsx(Dwt,{}),kwt=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiStepper"}),{activeStep:s=0,alternativeLabel:a=!1,children:o,className:l,component:u="div",connector:f=Uwt,nonLinear:d=!1,orientation:m="horizontal",...y}=r,_={...r,nonLinear:d,alternativeLabel:a,orientation:m,component:u},x=Nwt(_),S=tt.Children.toArray(o).filter(Boolean),T=S.map((M,R)=>tt.cloneElement(M,{index:R,last:R+1===S.length,...M.props})),b=tt.useMemo(()=>({activeStep:s,alternativeLabel:a,connector:f,nonLinear:d,orientation:m}),[s,a,f,d,m]);return st.jsx(eR.Provider,{value:b,children:st.jsx(Lwt,{as:u,ownerState:_,className:je(x.root,l),ref:n,...y,children:T})})});function zwt(i){return Tn("MuiTextField",i)}_n("MuiTextField",["root"]);const Bwt={standard:MU,filled:TU,outlined:OU},Fwt=i=>{const{classes:e}=i;return wn({root:["root"]},zwt,e)},Vwt=me(wU,{name:"MuiTextField",slot:"Root",overridesResolver:(i,e)=>e.root})({}),Hwt=tt.forwardRef(function(e,n){const r=kn({props:e,name:"MuiTextField"}),{autoComplete:s,autoFocus:a=!1,children:o,className:l,color:u="primary",defaultValue:f,disabled:d=!1,error:m=!1,FormHelperTextProps:y,fullWidth:_=!1,helperText:x,id:S,InputLabelProps:T,inputProps:b,InputProps:M,inputRef:R,label:A,maxRows:I,minRows:k,multiline:N=!1,name:L,onBlur:U,onChange:O,onFocus:F,placeholder:H,required:V=!1,rows:X,select:J=!1,SelectProps:q,slots:W={},slotProps:K={},type:et,value:Q,variant:dt="outlined",...yt}=r,xt={...r,autoFocus:a,color:u,disabled:d,error:m,fullWidth:_,multiline:N,required:V,select:J,variant:dt},nt=Fwt(xt),ht=N_(S),ft=x&&ht?`${ht}-helper-text`:void 0,gt=A&&ht?`${ht}-label`:void 0,wt=Bwt[dt],Kt={slots:W,slotProps:{input:M,inputLabel:T,htmlInput:b,formHelperText:y,select:q,...K}},zt={},te=Kt.slotProps.inputLabel;dt==="outlined"&&(te&&typeof te.shrink<"u"&&(zt.notched=te.shrink),zt.label=A),J&&((!q||!q.native)&&(zt.id=void 0),zt["aria-describedby"]=void 0);const[Pt,Ht]=gi("root",{elementType:Vwt,shouldForwardComponentProp:!0,externalForwardedProps:{...Kt,...yt},ownerState:xt,className:je(nt.root,l),ref:n,additionalProps:{disabled:d,error:m,fullWidth:_,required:V,color:u,variant:dt}}),[at,ue]=gi("input",{elementType:wt,externalForwardedProps:Kt,additionalProps:zt,ownerState:xt}),[Jt,se]=gi("inputLabel",{elementType:vTt,externalForwardedProps:Kt,ownerState:xt}),[ae,Ce]=gi("htmlInput",{elementType:"input",externalForwardedProps:Kt,ownerState:xt}),[le,ct]=gi("formHelperText",{elementType:oTt,externalForwardedProps:Kt,ownerState:xt}),[G,lt]=gi("select",{elementType:DU,externalForwardedProps:Kt,ownerState:xt}),mt=st.jsx(at,{"aria-describedby":ft,autoComplete:s,autoFocus:a,defaultValue:f,fullWidth:_,multiline:N,name:L,rows:X,maxRows:I,minRows:k,type:et,value:Q,id:ht,inputRef:R,onBlur:U,onChange:O,onFocus:F,placeholder:H,inputProps:Ce,slots:{input:W.htmlInput?ae:void 0},...ue});return st.jsxs(Pt,{...Ht,children:[A!=null&&A!==""&&st.jsx(Jt,{htmlFor:ht,id:gt,...se,children:A}),J?st.jsx(G,{"aria-describedby":ft,id:ht,labelId:gt,value:Q,input:mt,...lt,children:o}):mt,x&&st.jsx(le,{id:ft,...ct,children:x})]})}),K$=gd.palette,nR=K$.formStyles,iR=K$.text,Gwt={position:"absolute",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:10,width:"100%",height:"100%",backgroundColor:nR.containerBackgroundColor,top:"0"},jwt={backgroundColor:nR.cardBackgroundColor,width:"80%",maxWidth:"400px",borderRadius:"1rem",padding:"2rem",marginTop:"4rem"},qwt={color:iR.secondary,fontSize:"1.5rem",fontWeight:700,marginBottom:"2rem",textAlign:"center"};nR.buttonForm,iR.primary;iR.secondary;const $wt={display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",padding:"0.5rem",border:`1px solid ${nR.borderColor}`,borderRadius:"0.5rem",backgroundColor:"#fff",cursor:"pointer","& img":{width:"20px",height:"20px"}},Wwt={color:iR.secondary,fontWeight:"500",fontSize:"0.9rem"},Xwt=gd.palette,Ywt=Xwt.text,Kwt={display:"flex",alignItems:"center",justifyContent:"center"},Zwt={color:Ywt.titleBig,fontSize:"2rem",lineHeight:"1",fontWeight:600,fontFamily:"Poppins",fontStyle:"italic"},Qwt={width:"120px",marginRight:"20px"};function Z$(){return st.jsxs(bs,{sx:Kwt,children:[st.jsx("img",{src:"./logoApp.svg",alt:"Black Triangle BJJ Logo",style:Qwt}),st.jsxs(vc,{sx:Zwt,children:["BLACK ",st.jsx("br",{})," TRIANGLE BJJ"]})]})}const Jwt=ga(st.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"CloseOutlined"),uD=gd,Q$=({buttonFunction:i,isUploadFirestore:e})=>st.jsx(O0,{size:"medium",disabled:e,onClick:i,sx:{position:"absolute",top:10,right:10,backgroundColor:uD.palette.formStyles.containerBackgroundColor,"&:hover":{backgroundColor:uD.palette.formStyles.cardBackgroundColor,opacity:.8},color:uD.palette.action.deactivate},children:st.jsx(Jwt,{})});function tAt(){const i=Qvt,e=XL,n=()=>{yi.setState({isLoginWindowActive:!1})},r=async()=>{try{const a=(await Lpt(e,i)).user;console.log("Usuario autenticado:",a)}catch(s){console.error("Error al iniciar sesin con Google:",s)}};return st.jsxs(bs,{sx:Gwt,children:[st.jsx(Q$,{buttonFunction:n,isUploadFirestore:!1}),st.jsx(Z$,{}),st.jsxs(LEt,{elevation:10,sx:jwt,children:[st.jsx(vc,{sx:qwt,children:"Login"}),st.jsxs(bs,{children:[st.jsx(J1,{sx:{width:"100%",my:"1em",mx:"auto"},orientation:"horizontal",variant:"middle"}),st.jsxs(O0,{onClick:r,sx:$wt,children:[st.jsx("img",{src:"./google-logo.png",alt:"Google"}),st.jsx(vc,{sx:Wwt,children:"Iniciar sesin con Google"})]})]})]})]})}var rE=i=>i.type==="checkbox",$g=i=>i instanceof Date,po=i=>i==null;const J$=i=>typeof i=="object";var rs=i=>!po(i)&&!Array.isArray(i)&&J$(i)&&!$g(i),tW=i=>rs(i)&&i.target?rE(i.target)?i.target.checked:i.target.value:i,eAt=i=>i.substring(0,i.search(/\.\d+(\.|$)/))||i,eW=(i,e)=>i.has(eAt(e)),nAt=i=>{const e=i.constructor&&i.constructor.prototype;return rs(e)&&e.hasOwnProperty("isPrototypeOf")},NU=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function aa(i){let e;const n=Array.isArray(i),r=typeof FileList<"u"?i instanceof FileList:!1;if(i instanceof Date)e=new Date(i);else if(i instanceof Set)e=new Set(i);else if(!(NU&&(i instanceof Blob||r))&&(n||rs(i)))if(e=n?[]:{},!n&&!nAt(i))e=i;else for(const s in i)i.hasOwnProperty(s)&&(e[s]=aa(i[s]));else return i;return e}var rR=i=>Array.isArray(i)?i.filter(Boolean):[],is=i=>i===void 0,Ne=(i,e,n)=>{if(!e||!rs(i))return n;const r=rR(e.split(/[,[\].]+?/)).reduce((s,a)=>po(s)?s:s[a],i);return is(r)||r===i?is(i[e])?n:i[e]:r},Dl=i=>typeof i=="boolean",LU=i=>/^\w*$/.test(i),nW=i=>rR(i.replace(/["|']|\]/g,"").split(/\.|\[/)),Ii=(i,e,n)=>{let r=-1;const s=LU(e)?[e]:nW(e),a=s.length,o=a-1;for(;++r<a;){const l=s[r];let u=n;if(r!==o){const f=i[l];u=rs(f)||Array.isArray(f)?f:isNaN(+s[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;i[l]=u,i=i[l]}};const mC={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},hc={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Bh={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},iAt=pn.createContext(null),UU=()=>pn.useContext(iAt);var iW=(i,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const a in i)Object.defineProperty(s,a,{get:()=>{const o=a;return e._proxyFormState[o]!==hc.all&&(e._proxyFormState[o]=!r||hc.all),n&&(n[o]=!0),i[o]}});return s};function rAt(i){const e=UU(),{control:n=e.control,disabled:r,name:s,exact:a}=i||{},[o,l]=pn.useState(n._formState),u=pn.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),f=pn.useRef(s);return f.current=s,pn.useEffect(()=>n._subscribe({name:f.current,formState:u.current,exact:a,callback:d=>{!r&&l({...n._formState,...d})}}),[n,r,a]),pn.useEffect(()=>{u.current.isValid&&n._setValid(!0)},[n]),pn.useMemo(()=>iW(o,n,u.current,!1),[o,n])}var Cf=i=>typeof i=="string",rW=(i,e,n,r,s)=>Cf(i)?(r&&e.watch.add(i),Ne(n,i,s)):Array.isArray(i)?i.map(a=>(r&&e.watch.add(a),Ne(n,a))):(r&&(e.watchAll=!0),n);function sAt(i){const e=UU(),{control:n=e.control,name:r,defaultValue:s,disabled:a,exact:o}=i||{},l=pn.useRef(r),u=pn.useRef(s);l.current=r,pn.useEffect(()=>n._subscribe({name:l.current,formState:{values:!0},exact:o,callback:m=>!a&&d(rW(l.current,n._names,m.values||n._formValues,!1,u.current))}),[n,a,o]);const[f,d]=pn.useState(n._getWatch(r,s));return pn.useEffect(()=>n._removeUnmounted()),f}function aAt(i){const e=UU(),{name:n,disabled:r,control:s=e.control,shouldUnregister:a}=i,o=eW(s._names.array,n),l=sAt({control:s,name:n,defaultValue:Ne(s._formValues,n,Ne(s._defaultValues,n,i.defaultValue)),exact:!0}),u=rAt({control:s,name:n,exact:!0}),f=pn.useRef(i),d=pn.useRef(s.register(n,{...i.rules,value:l,...Dl(i.disabled)?{disabled:i.disabled}:{}})),m=pn.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ne(u.errors,n)},isDirty:{enumerable:!0,get:()=>!!Ne(u.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Ne(u.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Ne(u.validatingFields,n)},error:{enumerable:!0,get:()=>Ne(u.errors,n)}}),[u,n]),y=pn.useCallback(T=>d.current.onChange({target:{value:tW(T),name:n},type:mC.CHANGE}),[n]),_=pn.useCallback(()=>d.current.onBlur({target:{value:Ne(s._formValues,n),name:n},type:mC.BLUR}),[n,s._formValues]),x=pn.useCallback(T=>{const b=Ne(s._fields,n);b&&T&&(b._f.ref={focus:()=>T.focus(),select:()=>T.select(),setCustomValidity:M=>T.setCustomValidity(M),reportValidity:()=>T.reportValidity()})},[s._fields,n]),S=pn.useMemo(()=>({name:n,value:l,...Dl(r)||u.disabled?{disabled:u.disabled||r}:{},onChange:y,onBlur:_,ref:x}),[n,r,u.disabled,y,_,x,l]);return pn.useEffect(()=>{const T=s._options.shouldUnregister||a;s.register(n,{...f.current.rules,...Dl(f.current.disabled)?{disabled:f.current.disabled}:{}});const b=(M,R)=>{const A=Ne(s._fields,M);A&&A._f&&(A._f.mount=R)};if(b(n,!0),T){const M=aa(Ne(s._options.defaultValues,n));Ii(s._defaultValues,n,M),is(Ne(s._formValues,n))&&Ii(s._formValues,n,M)}return!o&&s.register(n),()=>{(o?T&&!s._state.action:T)?s.unregister(n):b(n,!1)}},[n,s,o,a]),pn.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),pn.useMemo(()=>({field:S,formState:u,fieldState:m}),[S,u,m])}const mN=i=>i.render(aAt(i));var sW=(i,e,n,r,s)=>e?{...n[i],types:{...n[i]&&n[i].types?n[i].types:{},[r]:s||!0}}:{},S1=i=>Array.isArray(i)?i:[i],m6=()=>{let i=[];return{get observers(){return i},next:s=>{for(const a of i)a.next&&a.next(s)},subscribe:s=>(i.push(s),{unsubscribe:()=>{i=i.filter(a=>a!==s)}}),unsubscribe:()=>{i=[]}}},gN=i=>po(i)||!J$(i);function kp(i,e){if(gN(i)||gN(e))return i===e;if($g(i)&&$g(e))return i.getTime()===e.getTime();const n=Object.keys(i),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const a=i[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=e[s];if($g(a)&&$g(o)||rs(a)&&rs(o)||Array.isArray(a)&&Array.isArray(o)?!kp(a,o):a!==o)return!1}}return!0}var ho=i=>rs(i)&&!Object.keys(i).length,kU=i=>i.type==="file",dc=i=>typeof i=="function",gC=i=>{if(!NU)return!1;const e=i?i.ownerDocument:0;return i instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},aW=i=>i.type==="select-multiple",zU=i=>i.type==="radio",oAt=i=>zU(i)||rE(i),cD=i=>gC(i)&&i.isConnected;function lAt(i,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)i=is(i)?r++:i[e[r++]];return i}function uAt(i){for(const e in i)if(i.hasOwnProperty(e)&&!is(i[e]))return!1;return!0}function Rs(i,e){const n=Array.isArray(e)?e:LU(e)?[e]:nW(e),r=n.length===1?i:lAt(i,n),s=n.length-1,a=n[s];return r&&delete r[a],s!==0&&(rs(r)&&ho(r)||Array.isArray(r)&&uAt(r))&&Rs(i,n.slice(0,-1)),i}var oW=i=>{for(const e in i)if(dc(i[e]))return!0;return!1};function yC(i,e={}){const n=Array.isArray(i);if(rs(i)||n)for(const r in i)Array.isArray(i[r])||rs(i[r])&&!oW(i[r])?(e[r]=Array.isArray(i[r])?[]:{},yC(i[r],e[r])):po(i[r])||(e[r]=!0);return e}function lW(i,e,n){const r=Array.isArray(i);if(rs(i)||r)for(const s in i)Array.isArray(i[s])||rs(i[s])&&!oW(i[s])?is(e)||gN(n[s])?n[s]=Array.isArray(i[s])?yC(i[s],[]):{...yC(i[s])}:lW(i[s],po(e)?{}:e[s],n[s]):n[s]=!kp(i[s],e[s]);return n}var Mx=(i,e)=>lW(i,e,yC(e));const g6={value:!1,isValid:!1},y6={value:!0,isValid:!0};var uW=i=>{if(Array.isArray(i)){if(i.length>1){const e=i.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return i[0].checked&&!i[0].disabled?i[0].attributes&&!is(i[0].attributes.value)?is(i[0].value)||i[0].value===""?y6:{value:i[0].value,isValid:!0}:y6:g6}return g6},cW=(i,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>is(i)?i:e?i===""?NaN:i&&+i:n&&Cf(i)?new Date(i):r?r(i):i;const v6={isValid:!1,value:null};var fW=i=>Array.isArray(i)?i.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,v6):v6;function _6(i){const e=i.ref;return kU(e)?e.files:zU(e)?fW(i.refs).value:aW(e)?[...e.selectedOptions].map(({value:n})=>n):rE(e)?uW(i.refs).value:cW(is(e.value)?i.ref.value:e.value,i)}var cAt=(i,e,n,r)=>{const s={};for(const a of i){const o=Ne(e,a);o&&Ii(s,a,o._f)}return{criteriaMode:n,names:[...i],fields:s,shouldUseNativeValidation:r}},vC=i=>i instanceof RegExp,Cx=i=>is(i)?i:vC(i)?i.source:rs(i)?vC(i.value)?i.value.source:i.value:i,b6=i=>({isOnSubmit:!i||i===hc.onSubmit,isOnBlur:i===hc.onBlur,isOnChange:i===hc.onChange,isOnAll:i===hc.all,isOnTouch:i===hc.onTouched});const x6="AsyncFunction";var fAt=i=>!!i&&!!i.validate&&!!(dc(i.validate)&&i.validate.constructor.name===x6||rs(i.validate)&&Object.values(i.validate).find(e=>e.constructor.name===x6)),hAt=i=>i.mount&&(i.required||i.min||i.max||i.maxLength||i.minLength||i.pattern||i.validate),S6=(i,e,n)=>!n&&(e.watchAll||e.watch.has(i)||[...e.watch].some(r=>i.startsWith(r)&&/^\.\w+/.test(i.slice(r.length))));const E1=(i,e,n,r)=>{for(const s of n||Object.keys(i)){const a=Ne(i,s);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(E1(l,e))break}else if(rs(l)&&E1(l,e))break}}};function E6(i,e,n){const r=Ne(i,n);if(r||LU(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const a=s.join("."),o=Ne(e,a),l=Ne(i,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};s.pop()}return{name:n}}var dAt=(i,e,n,r)=>{n(i);const{name:s,...a}=i;return ho(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!r||hc.all))},pAt=(i,e,n)=>!i||!e||i===e||S1(i).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),mAt=(i,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||i):(n?r.isOnBlur:s.isOnBlur)?!i:(n?r.isOnChange:s.isOnChange)?i:!0,gAt=(i,e)=>!rR(Ne(i,e)).length&&Rs(i,e),yAt=(i,e,n)=>{const r=S1(Ne(i,n));return Ii(r,"root",e[n]),Ii(i,n,r),i},TA=i=>Cf(i);function T6(i,e,n="validate"){if(TA(i)||Array.isArray(i)&&i.every(TA)||Dl(i)&&!i)return{type:n,message:TA(i)?i:"",ref:e}}var p0=i=>rs(i)&&!vC(i)?i:{value:i,message:""},w6=async(i,e,n,r,s,a)=>{const{ref:o,refs:l,required:u,maxLength:f,minLength:d,min:m,max:y,pattern:_,validate:x,name:S,valueAsNumber:T,mount:b}=i._f,M=Ne(n,S);if(!b||e.has(S))return{};const R=l?l[0]:o,A=H=>{s&&R.reportValidity&&(R.setCustomValidity(Dl(H)?"":H||""),R.reportValidity())},I={},k=zU(o),N=rE(o),L=k||N,U=(T||kU(o))&&is(o.value)&&is(M)||gC(o)&&o.value===""||M===""||Array.isArray(M)&&!M.length,O=sW.bind(null,S,r,I),F=(H,V,X,J=Bh.maxLength,q=Bh.minLength)=>{const W=H?V:X;I[S]={type:H?J:q,message:W,ref:o,...O(H?J:q,W)}};if(a?!Array.isArray(M)||!M.length:u&&(!L&&(U||po(M))||Dl(M)&&!M||N&&!uW(l).isValid||k&&!fW(l).isValid)){const{value:H,message:V}=TA(u)?{value:!!u,message:u}:p0(u);if(H&&(I[S]={type:Bh.required,message:V,ref:R,...O(Bh.required,V)},!r))return A(V),I}if(!U&&(!po(m)||!po(y))){let H,V;const X=p0(y),J=p0(m);if(!po(M)&&!isNaN(M)){const q=o.valueAsNumber||M&&+M;po(X.value)||(H=q>X.value),po(J.value)||(V=q<J.value)}else{const q=o.valueAsDate||new Date(M),W=Q=>new Date(new Date().toDateString()+" "+Q),K=o.type=="time",et=o.type=="week";Cf(X.value)&&M&&(H=K?W(M)>W(X.value):et?M>X.value:q>new Date(X.value)),Cf(J.value)&&M&&(V=K?W(M)<W(J.value):et?M<J.value:q<new Date(J.value))}if((H||V)&&(F(!!H,X.message,J.message,Bh.max,Bh.min),!r))return A(I[S].message),I}if((f||d)&&!U&&(Cf(M)||a&&Array.isArray(M))){const H=p0(f),V=p0(d),X=!po(H.value)&&M.length>+H.value,J=!po(V.value)&&M.length<+V.value;if((X||J)&&(F(X,H.message,V.message),!r))return A(I[S].message),I}if(_&&!U&&Cf(M)){const{value:H,message:V}=p0(_);if(vC(H)&&!M.match(H)&&(I[S]={type:Bh.pattern,message:V,ref:o,...O(Bh.pattern,V)},!r))return A(V),I}if(x){if(dc(x)){const H=await x(M,n),V=T6(H,R);if(V&&(I[S]={...V,...O(Bh.validate,V.message)},!r))return A(V.message),I}else if(rs(x)){let H={};for(const V in x){if(!ho(H)&&!r)break;const X=T6(await x[V](M,n),R,V);X&&(H={...X,...O(V,X.message)},A(X.message),r&&(I[S]=H))}if(!ho(H)&&(I[S]={ref:R,...H},!r))return I}}return A(!0),I};const vAt={mode:hc.onSubmit,reValidateMode:hc.onChange,shouldFocusError:!0};function _At(i={}){let e={...vAt,...i},n={submitCount:0,isDirty:!1,isLoading:dc(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let s=rs(e.defaultValues)||rs(e.values)?aa(e.values||e.defaultValues)||{}:{},a=e.shouldUnregister?{}:aa(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,f=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...d};const y={array:m6(),state:m6()},_=b6(e.mode),x=b6(e.reValidateMode),S=e.criteriaMode===hc.all,T=G=>lt=>{clearTimeout(f),f=setTimeout(G,lt)},b=async G=>{if(!e.disabled&&(d.isValid||m.isValid||G)){const lt=e.resolver?ho((await U()).errors):await F(r,!0);lt!==n.isValid&&y.state.next({isValid:lt})}},M=(G,lt)=>{!e.disabled&&(d.isValidating||d.validatingFields||m.isValidating||m.validatingFields)&&((G||Array.from(l.mount)).forEach(mt=>{mt&&(lt?Ii(n.validatingFields,mt,lt):Rs(n.validatingFields,mt))}),y.state.next({validatingFields:n.validatingFields,isValidating:!ho(n.validatingFields)}))},R=(G,lt=[],mt,Ct,bt=!0,Mt=!0)=>{if(Ct&&mt&&!e.disabled){if(o.action=!0,Mt&&Array.isArray(Ne(r,G))){const Lt=mt(Ne(r,G),Ct.argA,Ct.argB);bt&&Ii(r,G,Lt)}if(Mt&&Array.isArray(Ne(n.errors,G))){const Lt=mt(Ne(n.errors,G),Ct.argA,Ct.argB);bt&&Ii(n.errors,G,Lt),gAt(n.errors,G)}if((d.touchedFields||m.touchedFields)&&Mt&&Array.isArray(Ne(n.touchedFields,G))){const Lt=mt(Ne(n.touchedFields,G),Ct.argA,Ct.argB);bt&&Ii(n.touchedFields,G,Lt)}(d.dirtyFields||m.dirtyFields)&&(n.dirtyFields=Mx(s,a)),y.state.next({name:G,isDirty:V(G,lt),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Ii(a,G,lt)},A=(G,lt)=>{Ii(n.errors,G,lt),y.state.next({errors:n.errors})},I=G=>{n.errors=G,y.state.next({errors:n.errors,isValid:!1})},k=(G,lt,mt,Ct)=>{const bt=Ne(r,G);if(bt){const Mt=Ne(a,G,is(mt)?Ne(s,G):mt);is(Mt)||Ct&&Ct.defaultChecked||lt?Ii(a,G,lt?Mt:_6(bt._f)):q(G,Mt),o.mount&&b()}},N=(G,lt,mt,Ct,bt)=>{let Mt=!1,Lt=!1;const Qt={name:G};if(!e.disabled){if(!mt||Ct){(d.isDirty||m.isDirty)&&(Lt=n.isDirty,n.isDirty=Qt.isDirty=V(),Mt=Lt!==Qt.isDirty);const Oe=kp(Ne(s,G),lt);Lt=!!Ne(n.dirtyFields,G),Oe?Rs(n.dirtyFields,G):Ii(n.dirtyFields,G,!0),Qt.dirtyFields=n.dirtyFields,Mt=Mt||(d.dirtyFields||m.dirtyFields)&&Lt!==!Oe}if(mt){const Oe=Ne(n.touchedFields,G);Oe||(Ii(n.touchedFields,G,mt),Qt.touchedFields=n.touchedFields,Mt=Mt||(d.touchedFields||m.touchedFields)&&Oe!==mt)}Mt&&bt&&y.state.next(Qt)}return Mt?Qt:{}},L=(G,lt,mt,Ct)=>{const bt=Ne(n.errors,G),Mt=(d.isValid||m.isValid)&&Dl(lt)&&n.isValid!==lt;if(e.delayError&&mt?(u=T(()=>A(G,mt)),u(e.delayError)):(clearTimeout(f),u=null,mt?Ii(n.errors,G,mt):Rs(n.errors,G)),(mt?!kp(bt,mt):bt)||!ho(Ct)||Mt){const Lt={...Ct,...Mt&&Dl(lt)?{isValid:lt}:{},errors:n.errors,name:G};n={...n,...Lt},y.state.next(Lt)}},U=async G=>{M(G,!0);const lt=await e.resolver(a,e.context,cAt(G||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return M(G),lt},O=async G=>{const{errors:lt}=await U(G);if(G)for(const mt of G){const Ct=Ne(lt,mt);Ct?Ii(n.errors,mt,Ct):Rs(n.errors,mt)}else n.errors=lt;return lt},F=async(G,lt,mt={valid:!0})=>{for(const Ct in G){const bt=G[Ct];if(bt){const{_f:Mt,...Lt}=bt;if(Mt){const Qt=l.array.has(Mt.name),Oe=bt._f&&fAt(bt._f);Oe&&d.validatingFields&&M([Ct],!0);const jt=await w6(bt,l.disabled,a,S,e.shouldUseNativeValidation&&!lt,Qt);if(Oe&&d.validatingFields&&M([Ct]),jt[Mt.name]&&(mt.valid=!1,lt))break;!lt&&(Ne(jt,Mt.name)?Qt?yAt(n.errors,jt,Mt.name):Ii(n.errors,Mt.name,jt[Mt.name]):Rs(n.errors,Mt.name))}!ho(Lt)&&await F(Lt,lt,mt)}}return mt.valid},H=()=>{for(const G of l.unMount){const lt=Ne(r,G);lt&&(lt._f.refs?lt._f.refs.every(mt=>!cD(mt)):!cD(lt._f.ref))&&Kt(G)}l.unMount=new Set},V=(G,lt)=>!e.disabled&&(G&&lt&&Ii(a,G,lt),!kp(yt(),s)),X=(G,lt,mt)=>rW(G,l,{...o.mount?a:is(lt)?s:Cf(G)?{[G]:lt}:lt},mt,lt),J=G=>rR(Ne(o.mount?a:s,G,e.shouldUnregister?Ne(s,G,[]):[])),q=(G,lt,mt={})=>{const Ct=Ne(r,G);let bt=lt;if(Ct){const Mt=Ct._f;Mt&&(!Mt.disabled&&Ii(a,G,cW(lt,Mt)),bt=gC(Mt.ref)&&po(lt)?"":lt,aW(Mt.ref)?[...Mt.ref.options].forEach(Lt=>Lt.selected=bt.includes(Lt.value)):Mt.refs?rE(Mt.ref)?Mt.refs.length>1?Mt.refs.forEach(Lt=>(!Lt.defaultChecked||!Lt.disabled)&&(Lt.checked=Array.isArray(bt)?!!bt.find(Qt=>Qt===Lt.value):bt===Lt.value)):Mt.refs[0]&&(Mt.refs[0].checked=!!bt):Mt.refs.forEach(Lt=>Lt.checked=Lt.value===bt):kU(Mt.ref)?Mt.ref.value="":(Mt.ref.value=bt,Mt.ref.type||y.state.next({name:G,values:aa(a)})))}(mt.shouldDirty||mt.shouldTouch)&&N(G,bt,mt.shouldTouch,mt.shouldDirty,!0),mt.shouldValidate&&dt(G)},W=(G,lt,mt)=>{for(const Ct in lt){const bt=lt[Ct],Mt=`${G}.${Ct}`,Lt=Ne(r,Mt);(l.array.has(G)||rs(bt)||Lt&&!Lt._f)&&!$g(bt)?W(Mt,bt,mt):q(Mt,bt,mt)}},K=(G,lt,mt={})=>{const Ct=Ne(r,G),bt=l.array.has(G),Mt=aa(lt);Ii(a,G,Mt),bt?(y.array.next({name:G,values:aa(a)}),(d.isDirty||d.dirtyFields||m.isDirty||m.dirtyFields)&&mt.shouldDirty&&y.state.next({name:G,dirtyFields:Mx(s,a),isDirty:V(G,Mt)})):Ct&&!Ct._f&&!po(Mt)?W(G,Mt,mt):q(G,Mt,mt),S6(G,l)&&y.state.next({...n}),y.state.next({name:o.mount?G:void 0,values:aa(a)})},et=async G=>{o.mount=!0;const lt=G.target;let mt=lt.name,Ct=!0;const bt=Ne(r,mt),Mt=Lt=>{Ct=Number.isNaN(Lt)||$g(Lt)&&isNaN(Lt.getTime())||kp(Lt,Ne(a,mt,Lt))};if(bt){let Lt,Qt;const Oe=lt.type?_6(bt._f):tW(G),jt=G.type===mC.BLUR||G.type===mC.FOCUS_OUT,ve=!hAt(bt._f)&&!e.resolver&&!Ne(n.errors,mt)&&!bt._f.deps||mAt(jt,Ne(n.touchedFields,mt),n.isSubmitted,x,_),we=S6(mt,l,jt);Ii(a,mt,Oe),jt?(bt._f.onBlur&&bt._f.onBlur(G),u&&u(0)):bt._f.onChange&&bt._f.onChange(G);const Me=N(mt,Oe,jt),Zt=!ho(Me)||we;if(!jt&&y.state.next({name:mt,type:G.type,values:aa(a)}),ve)return(d.isValid||m.isValid)&&(e.mode==="onBlur"?jt&&b():jt||b()),Zt&&y.state.next({name:mt,...we?{}:Me});if(!jt&&we&&y.state.next({...n}),e.resolver){const{errors:Re}=await U([mt]);if(Mt(Oe),Ct){const Ie=E6(n.errors,r,mt),en=E6(Re,r,Ie.name||mt);Lt=en.error,mt=en.name,Qt=ho(Re)}}else M([mt],!0),Lt=(await w6(bt,l.disabled,a,S,e.shouldUseNativeValidation))[mt],M([mt]),Mt(Oe),Ct&&(Lt?Qt=!1:(d.isValid||m.isValid)&&(Qt=await F(r,!0)));Ct&&(bt._f.deps&&dt(bt._f.deps),L(mt,Qt,Lt,Me))}},Q=(G,lt)=>{if(Ne(n.errors,lt)&&G.focus)return G.focus(),1},dt=async(G,lt={})=>{let mt,Ct;const bt=S1(G);if(e.resolver){const Mt=await O(is(G)?G:bt);mt=ho(Mt),Ct=G?!bt.some(Lt=>Ne(Mt,Lt)):mt}else G?(Ct=(await Promise.all(bt.map(async Mt=>{const Lt=Ne(r,Mt);return await F(Lt&&Lt._f?{[Mt]:Lt}:Lt)}))).every(Boolean),!(!Ct&&!n.isValid)&&b()):Ct=mt=await F(r);return y.state.next({...!Cf(G)||(d.isValid||m.isValid)&&mt!==n.isValid?{}:{name:G},...e.resolver||!G?{isValid:mt}:{},errors:n.errors}),lt.shouldFocus&&!Ct&&E1(r,Q,G?bt:l.mount),Ct},yt=G=>{const lt={...o.mount?a:s};return is(G)?lt:Cf(G)?Ne(lt,G):G.map(mt=>Ne(lt,mt))},xt=(G,lt)=>({invalid:!!Ne((lt||n).errors,G),isDirty:!!Ne((lt||n).dirtyFields,G),error:Ne((lt||n).errors,G),isValidating:!!Ne(n.validatingFields,G),isTouched:!!Ne((lt||n).touchedFields,G)}),nt=G=>{G&&S1(G).forEach(lt=>Rs(n.errors,lt)),y.state.next({errors:G?n.errors:{}})},ht=(G,lt,mt)=>{const Ct=(Ne(r,G,{_f:{}})._f||{}).ref,bt=Ne(n.errors,G)||{},{ref:Mt,message:Lt,type:Qt,...Oe}=bt;Ii(n.errors,G,{...Oe,...lt,ref:Ct}),y.state.next({name:G,errors:n.errors,isValid:!1}),mt&&mt.shouldFocus&&Ct&&Ct.focus&&Ct.focus()},ft=(G,lt)=>dc(G)?y.state.subscribe({next:mt=>G(X(void 0,lt),mt)}):X(G,lt,!0),gt=G=>y.state.subscribe({next:lt=>{pAt(G.name,lt.name,G.exact)&&dAt(lt,G.formState||d,Ce,G.reRenderRoot)&&G.callback({values:{...a},...n,...lt})}}).unsubscribe,wt=G=>(o.mount=!0,m={...m,...G.formState},gt({...G,formState:m})),Kt=(G,lt={})=>{for(const mt of G?S1(G):l.mount)l.mount.delete(mt),l.array.delete(mt),lt.keepValue||(Rs(r,mt),Rs(a,mt)),!lt.keepError&&Rs(n.errors,mt),!lt.keepDirty&&Rs(n.dirtyFields,mt),!lt.keepTouched&&Rs(n.touchedFields,mt),!lt.keepIsValidating&&Rs(n.validatingFields,mt),!e.shouldUnregister&&!lt.keepDefaultValue&&Rs(s,mt);y.state.next({values:aa(a)}),y.state.next({...n,...lt.keepDirty?{isDirty:V()}:{}}),!lt.keepIsValid&&b()},zt=({disabled:G,name:lt})=>{(Dl(G)&&o.mount||G||l.disabled.has(lt))&&(G?l.disabled.add(lt):l.disabled.delete(lt))},te=(G,lt={})=>{let mt=Ne(r,G);const Ct=Dl(lt.disabled)||Dl(e.disabled);return Ii(r,G,{...mt||{},_f:{...mt&&mt._f?mt._f:{ref:{name:G}},name:G,mount:!0,...lt}}),l.mount.add(G),mt?zt({disabled:Dl(lt.disabled)?lt.disabled:e.disabled,name:G}):k(G,!0,lt.value),{...Ct?{disabled:lt.disabled||e.disabled}:{},...e.progressive?{required:!!lt.required,min:Cx(lt.min),max:Cx(lt.max),minLength:Cx(lt.minLength),maxLength:Cx(lt.maxLength),pattern:Cx(lt.pattern)}:{},name:G,onChange:et,onBlur:et,ref:bt=>{if(bt){te(G,lt),mt=Ne(r,G);const Mt=is(bt.value)&&bt.querySelectorAll&&bt.querySelectorAll("input,select,textarea")[0]||bt,Lt=oAt(Mt),Qt=mt._f.refs||[];if(Lt?Qt.find(Oe=>Oe===Mt):Mt===mt._f.ref)return;Ii(r,G,{_f:{...mt._f,...Lt?{refs:[...Qt.filter(cD),Mt,...Array.isArray(Ne(s,G))?[{}]:[]],ref:{type:Mt.type,name:G}}:{ref:Mt}}}),k(G,!1,void 0,Mt)}else mt=Ne(r,G,{}),mt._f&&(mt._f.mount=!1),(e.shouldUnregister||lt.shouldUnregister)&&!(eW(l.array,G)&&o.action)&&l.unMount.add(G)}}},Pt=()=>e.shouldFocusError&&E1(r,Q,l.mount),Ht=G=>{Dl(G)&&(y.state.next({disabled:G}),E1(r,(lt,mt)=>{const Ct=Ne(r,mt);Ct&&(lt.disabled=Ct._f.disabled||G,Array.isArray(Ct._f.refs)&&Ct._f.refs.forEach(bt=>{bt.disabled=Ct._f.disabled||G}))},0,!1))},at=(G,lt)=>async mt=>{let Ct;mt&&(mt.preventDefault&&mt.preventDefault(),mt.persist&&mt.persist());let bt=aa(a);if(y.state.next({isSubmitting:!0}),e.resolver){const{errors:Mt,values:Lt}=await U();n.errors=Mt,bt=Lt}else await F(r);if(l.disabled.size)for(const Mt of l.disabled)Ii(bt,Mt,void 0);if(Rs(n.errors,"root"),ho(n.errors)){y.state.next({errors:{}});try{await G(bt,mt)}catch(Mt){Ct=Mt}}else lt&&await lt({...n.errors},mt),Pt(),setTimeout(Pt);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ho(n.errors)&&!Ct,submitCount:n.submitCount+1,errors:n.errors}),Ct)throw Ct},ue=(G,lt={})=>{Ne(r,G)&&(is(lt.defaultValue)?K(G,aa(Ne(s,G))):(K(G,lt.defaultValue),Ii(s,G,aa(lt.defaultValue))),lt.keepTouched||Rs(n.touchedFields,G),lt.keepDirty||(Rs(n.dirtyFields,G),n.isDirty=lt.defaultValue?V(G,aa(Ne(s,G))):V()),lt.keepError||(Rs(n.errors,G),d.isValid&&b()),y.state.next({...n}))},Jt=(G,lt={})=>{const mt=G?aa(G):s,Ct=aa(mt),bt=ho(G),Mt=bt?s:Ct;if(lt.keepDefaultValues||(s=mt),!lt.keepValues){if(lt.keepDirtyValues){const Lt=new Set([...l.mount,...Object.keys(Mx(s,a))]);for(const Qt of Array.from(Lt))Ne(n.dirtyFields,Qt)?Ii(Mt,Qt,Ne(a,Qt)):K(Qt,Ne(Mt,Qt))}else{if(NU&&is(G))for(const Lt of l.mount){const Qt=Ne(r,Lt);if(Qt&&Qt._f){const Oe=Array.isArray(Qt._f.refs)?Qt._f.refs[0]:Qt._f.ref;if(gC(Oe)){const jt=Oe.closest("form");if(jt){jt.reset();break}}}}for(const Lt of l.mount)K(Lt,Ne(Mt,Lt))}a=aa(Mt),y.array.next({values:{...Mt}}),y.state.next({values:{...Mt}})}l={mount:lt.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!lt.keepIsValid||!!lt.keepDirtyValues,o.watch=!!e.shouldUnregister,y.state.next({submitCount:lt.keepSubmitCount?n.submitCount:0,isDirty:bt?!1:lt.keepDirty?n.isDirty:!!(lt.keepDefaultValues&&!kp(G,s)),isSubmitted:lt.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:bt?{}:lt.keepDirtyValues?lt.keepDefaultValues&&a?Mx(s,a):n.dirtyFields:lt.keepDefaultValues&&G?Mx(s,G):lt.keepDirty?n.dirtyFields:{},touchedFields:lt.keepTouched?n.touchedFields:{},errors:lt.keepErrors?n.errors:{},isSubmitSuccessful:lt.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},se=(G,lt)=>Jt(dc(G)?G(a):G,lt),ae=(G,lt={})=>{const mt=Ne(r,G),Ct=mt&&mt._f;if(Ct){const bt=Ct.refs?Ct.refs[0]:Ct.ref;bt.focus&&(bt.focus(),lt.shouldSelect&&dc(bt.select)&&bt.select())}},Ce=G=>{n={...n,...G}},ct={control:{register:te,unregister:Kt,getFieldState:xt,handleSubmit:at,setError:ht,_subscribe:gt,_runSchema:U,_getWatch:X,_getDirty:V,_setValid:b,_setFieldArray:R,_setDisabledField:zt,_setErrors:I,_getFieldArray:J,_reset:Jt,_resetDefaultValues:()=>dc(e.defaultValues)&&e.defaultValues().then(G=>{se(G,e.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:H,_disableForm:Ht,_subjects:y,_proxyFormState:d,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(G){o=G},get _defaultValues(){return s},get _names(){return l},set _names(G){l=G},get _formState(){return n},get _options(){return e},set _options(G){e={...e,...G}}},subscribe:wt,trigger:dt,register:te,handleSubmit:at,watch:ft,setValue:K,getValues:yt,reset:se,resetField:ue,clearErrors:nt,unregister:Kt,setError:ht,setFocus:ae,getFieldState:xt};return{...ct,formControl:ct}}function bAt(i={}){const e=pn.useRef(void 0),n=pn.useRef(void 0),[r,s]=pn.useState({isDirty:!1,isValidating:!1,isLoading:dc(i.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:i.errors||{},disabled:i.disabled||!1,defaultValues:dc(i.defaultValues)?void 0:i.defaultValues});e.current||(e.current={...i.formControl?i.formControl:_At(i),formState:r},i.formControl&&i.defaultValues&&!dc(i.defaultValues)&&i.formControl.reset(i.defaultValues,i.resetOptions));const a=e.current.control;return a._options=i,pn.useLayoutEffect(()=>a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0}),[a]),pn.useEffect(()=>a._disableForm(i.disabled),[a,i.disabled]),pn.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),pn.useEffect(()=>{i.values&&!kp(i.values,n.current)?(a._reset(i.values,a._options.resetOptions),n.current=i.values,s(o=>({...o}))):a._resetDefaultValues()},[i.values,a]),pn.useEffect(()=>{i.errors&&!ho(i.errors)&&a._setErrors(i.errors)},[i.errors,a]),pn.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),pn.useEffect(()=>{i.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[i.shouldUnregister,a]),e.current.formState=iW(r,a),e.current}const A6=(i,e,n)=>{if(i&&"reportValidity"in i){const r=Ne(n,e);i.setCustomValidity(r&&r.message||""),i.reportValidity()}},hW=(i,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?A6(r.ref,n,i):r&&r.refs&&r.refs.forEach(s=>A6(s,n,i))}},xAt=(i,e)=>{e.shouldUseNativeValidation&&hW(i,e);const n={};for(const r in i){const s=Ne(e.fields,r),a=Object.assign(i[r]||{},{ref:s&&s.ref});if(SAt(e.names||Object.keys(i),r)){const o=Object.assign({},Ne(n,r));Ii(o,"root",a),Ii(n,r,o)}else Ii(n,r,a)}return n},SAt=(i,e)=>{const n=M6(e);return i.some(r=>M6(r).match(`^${n}\\.\\d+`))};function M6(i){return i.replace(/\]|\[/g,"")}function EAt(i,e,n){return n===void 0&&(n={}),function(r,s,a){try{return Promise.resolve(function(o,l){try{var u=(e!=null&&e.context,Promise.resolve(i[n.mode==="sync"?"validateSync":"validate"](r,Object.assign({abortEarly:!1},e,{context:s}))).then(function(f){return a.shouldUseNativeValidation&&hW({},a),{values:n.raw?Object.assign({},r):f,errors:{}}}))}catch(f){return l(f)}return u&&u.then?u.then(void 0,l):u}(0,function(o){if(!o.inner)throw o;return{values:{},errors:xAt((l=o,u=!a.shouldUseNativeValidation&&a.criteriaMode==="all",(l.inner||[]).reduce(function(f,d){if(f[d.path]||(f[d.path]={message:d.message,type:d.type}),u){var m=f[d.path].types,y=m&&m[d.type];f[d.path]=sW(d.path,u,f,d.type,y?[].concat(y,d.message):d.message)}return f},{})),a)};var l,u}))}catch(o){return Promise.reject(o)}}}var fD,C6;function TAt(){if(C6)return fD;C6=1;function i(b){this._maxSize=b,this.clear()}i.prototype.clear=function(){this._size=0,this._values=Object.create(null)},i.prototype.get=function(b){return this._values[b]},i.prototype.set=function(b,M){return this._size>=this._maxSize&&this.clear(),b in this._values||this._size++,this._values[b]=M};var e=/[^.^\]^[]+|(?=\[\]|\.\.)/g,n=/^\d+$/,r=/^\d/,s=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,a=/^\s*(['"]?)(.*?)(\1)\s*$/,o=512,l=new i(o),u=new i(o),f=new i(o);fD={Cache:i,split:m,normalizePath:d,setter:function(b){var M=d(b);return u.get(b)||u.set(b,function(A,I){for(var k=0,N=M.length,L=A;k<N-1;){var U=M[k];if(U==="__proto__"||U==="constructor"||U==="prototype")return A;L=L[M[k++]]}L[M[k]]=I})},getter:function(b,M){var R=d(b);return f.get(b)||f.set(b,function(I){for(var k=0,N=R.length;k<N;)if(I!=null||!M)I=I[R[k++]];else return;return I})},join:function(b){return b.reduce(function(M,R){return M+(_(R)||n.test(R)?"["+R+"]":(M?".":"")+R)},"")},forEach:function(b,M,R){y(Array.isArray(b)?b:m(b),M,R)}};function d(b){return l.get(b)||l.set(b,m(b).map(function(M){return M.replace(a,"$2")}))}function m(b){return b.match(e)||[""]}function y(b,M,R){var A=b.length,I,k,N,L;for(k=0;k<A;k++)I=b[k],I&&(T(I)&&(I='"'+I+'"'),L=_(I),N=!L&&/^\d+$/.test(I),M.call(R,I,L,N,k,b))}function _(b){return typeof b=="string"&&b&&["'",'"'].indexOf(b.charAt(0))!==-1}function x(b){return b.match(r)&&!b.match(n)}function S(b){return s.test(b)}function T(b){return!_(b)&&(x(b)||S(b))}return fD}var ry=TAt(),hD,R6;function wAt(){if(R6)return hD;R6=1;const i=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,e=d=>d.match(i)||[],n=d=>d[0].toUpperCase()+d.slice(1),r=(d,m)=>e(d).join(m).toLowerCase(),s=d=>e(d).reduce((m,y)=>`${m}${m?y[0].toUpperCase()+y.slice(1).toLowerCase():y.toLowerCase()}`,"");return hD={words:e,upperFirst:n,camelCase:s,pascalCase:d=>n(s(d)),snakeCase:d=>r(d,"_"),kebabCase:d=>r(d,"-"),sentenceCase:d=>n(r(d," ")),titleCase:d=>e(d).map(n).join(" ")},hD}var dD=wAt(),Xw={exports:{}},O6;function AAt(){if(O6)return Xw.exports;O6=1,Xw.exports=function(s){return i(e(s),s)},Xw.exports.array=i;function i(s,a){var o=s.length,l=new Array(o),u={},f=o,d=n(a),m=r(s);for(a.forEach(function(_){if(!m.has(_[0])||!m.has(_[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});f--;)u[f]||y(s[f],f,new Set);return l;function y(_,x,S){if(S.has(_)){var T;try{T=", node was:"+JSON.stringify(_)}catch{T=""}throw new Error("Cyclic dependency"+T)}if(!m.has(_))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(_));if(!u[x]){u[x]=!0;var b=d.get(_)||new Set;if(b=Array.from(b),x=b.length){S.add(_);do{var M=b[--x];y(M,m.get(M),S)}while(x);S.delete(_)}l[--o]=_}}}function e(s){for(var a=new Set,o=0,l=s.length;o<l;o++){var u=s[o];a.add(u[0]),a.add(u[1])}return Array.from(a)}function n(s){for(var a=new Map,o=0,l=s.length;o<l;o++){var u=s[o];a.has(u[0])||a.set(u[0],new Set),a.has(u[1])||a.set(u[1],new Set),a.get(u[0]).add(u[1])}return a}function r(s){for(var a=new Map,o=0,l=s.length;o<l;o++)a.set(s[o],o);return a}return Xw.exports}var MAt=AAt();const CAt=fm(MAt),RAt=Object.prototype.toString,OAt=Error.prototype.toString,IAt=RegExp.prototype.toString,DAt=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",PAt=/^Symbol\((.*)\)(.*)$/;function NAt(i){return i!=+i?"NaN":i===0&&1/i<0?"-0":""+i}function I6(i,e=!1){if(i==null||i===!0||i===!1)return""+i;const n=typeof i;if(n==="number")return NAt(i);if(n==="string")return e?`"${i}"`:i;if(n==="function")return"[Function "+(i.name||"anonymous")+"]";if(n==="symbol")return DAt.call(i).replace(PAt,"Symbol($1)");const r=RAt.call(i).slice(8,-1);return r==="Date"?isNaN(i.getTime())?""+i:i.toISOString(i):r==="Error"||i instanceof Error?"["+OAt.call(i)+"]":r==="RegExp"?IAt.call(i):null}function Qp(i,e){let n=I6(i,e);return n!==null?n:JSON.stringify(i,function(r,s){let a=I6(this[r],e);return a!==null?a:s},2)}function dW(i){return i==null?[]:[].concat(i)}let pW,mW,gW,LAt=/\$\{\s*(\w+)\s*\}/g;pW=Symbol.toStringTag;class D6{constructor(e,n,r,s){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[pW]="Error",this.name="ValidationError",this.value=n,this.path=r,this.type=s,this.errors=[],this.inner=[],dW(e).forEach(a=>{if(Zo.isError(a)){this.errors.push(...a.errors);const o=a.inner.length?a.inner:[a];this.inner.push(...o)}else this.errors.push(a)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}mW=Symbol.hasInstance;gW=Symbol.toStringTag;class Zo extends Error{static formatError(e,n){const r=n.label||n.path||"this";return n=Object.assign({},n,{path:r,originalPath:n.path}),typeof e=="string"?e.replace(LAt,(s,a)=>Qp(n[a])):typeof e=="function"?e(n):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,n,r,s,a){const o=new D6(e,n,r,s);if(a)return o;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[gW]="Error",this.name=o.name,this.message=o.message,this.type=o.type,this.value=o.value,this.path=o.path,this.errors=o.errors,this.inner=o.inner,Error.captureStackTrace&&Error.captureStackTrace(this,Zo)}static[mW](e){return D6[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let _f={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:i,type:e,value:n,originalValue:r})=>{const s=r!=null&&r!==n?` (cast from the value \`${Qp(r,!0)}\`).`:".";return e!=="mixed"?`${i} must be a \`${e}\` type, but the final value was: \`${Qp(n,!0)}\``+s:`${i} must match the configured type. The validated value was: \`${Qp(n,!0)}\``+s}},Xo={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},Rp={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},yN={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},UAt={isValue:"${path} field must be ${value}"},wA={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},kAt={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},zAt={notType:i=>{const{path:e,value:n,spec:r}=i,s=r.types.length;if(Array.isArray(n)){if(n.length<s)return`${e} tuple value has too few items, expected a length of ${s} but got ${n.length} for value: \`${Qp(n,!0)}\``;if(n.length>s)return`${e} tuple value has too many items, expected a length of ${s} but got ${n.length} for value: \`${Qp(n,!0)}\``}return Zo.formatError(_f.notType,i)}};Object.assign(Object.create(null),{mixed:_f,string:Xo,number:Rp,date:yN,object:wA,array:kAt,boolean:UAt,tuple:zAt});const BU=i=>i&&i.__isYupSchema__;class _C{static fromOptions(e,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:s,otherwise:a}=n,o=typeof r=="function"?r:(...l)=>l.every(u=>u===r);return new _C(e,(l,u)=>{var f;let d=o(...l)?s:a;return(f=d==null?void 0:d(u))!=null?f:u})}constructor(e,n){this.fn=void 0,this.refs=e,this.refs=e,this.fn=n}resolve(e,n){let r=this.refs.map(a=>a.getValue(n==null?void 0:n.value,n==null?void 0:n.parent,n==null?void 0:n.context)),s=this.fn(r,e,n);if(s===void 0||s===e)return e;if(!BU(s))throw new TypeError("conditions must return a schema object");return s.resolve(n)}}const Yw={context:"$",value:"."};class Py{constructor(e,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Yw.context,this.isValue=this.key[0]===Yw.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?Yw.context:this.isValue?Yw.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&ry.getter(this.path,!0),this.map=n.map}getValue(e,n,r){let s=this.isContext?r:this.isValue?e:n;return this.getter&&(s=this.getter(s||{})),this.map&&(s=this.map(s)),s}cast(e,n){return this.getValue(e,n==null?void 0:n.parent,n==null?void 0:n.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}Py.prototype.__isYupRef=!0;const nd=i=>i==null;function m0(i){function e({value:n,path:r="",options:s,originalValue:a,schema:o},l,u){const{name:f,test:d,params:m,message:y,skipAbsent:_}=i;let{parent:x,context:S,abortEarly:T=o.spec.abortEarly,disableStackTrace:b=o.spec.disableStackTrace}=s;function M(F){return Py.isRef(F)?F.getValue(n,x,S):F}function R(F={}){const H=Object.assign({value:n,originalValue:a,label:o.spec.label,path:F.path||r,spec:o.spec,disableStackTrace:F.disableStackTrace||b},m,F.params);for(const X of Object.keys(H))H[X]=M(H[X]);const V=new Zo(Zo.formatError(F.message||y,H),n,H.path,F.type||f,H.disableStackTrace);return V.params=H,V}const A=T?l:u;let I={path:r,parent:x,type:f,from:s.from,createError:R,resolve:M,options:s,originalValue:a,schema:o};const k=F=>{Zo.isError(F)?A(F):F?u(null):A(R())},N=F=>{Zo.isError(F)?A(F):l(F)};if(_&&nd(n))return k(!0);let U;try{var O;if(U=d.call(I,n,I),typeof((O=U)==null?void 0:O.then)=="function"){if(s.sync)throw new Error(`Validation test of type: "${I.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(U).then(k,N)}}catch(F){N(F);return}k(U)}return e.OPTIONS=i,e}function BAt(i,e,n,r=n){let s,a,o;return e?(ry.forEach(e,(l,u,f)=>{let d=u?l.slice(1,l.length-1):l;i=i.resolve({context:r,parent:s,value:n});let m=i.type==="tuple",y=f?parseInt(d,10):0;if(i.innerType||m){if(m&&!f)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${o}" must contain an index to the tuple element, e.g. "${o}[0]"`);if(n&&y>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${l}, in the path: ${e}. because there is no value at that index. `);s=n,n=n&&n[y],i=m?i.spec.types[y]:i.innerType}if(!f){if(!i.fields||!i.fields[d])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${o} which is a type: "${i.type}")`);s=n,n=n&&n[d],i=i.fields[d]}a=d,o=u?"["+l+"]":"."+l}),{schema:i,parent:s,parentPath:a}):{parent:s,parentPath:e,schema:i}}class bC extends Set{describe(){const e=[];for(const n of this.values())e.push(Py.isRef(n)?n.describe():n);return e}resolveAll(e){let n=[];for(const r of this.values())n.push(e(r));return n}clone(){return new bC(this.values())}merge(e,n){const r=this.clone();return e.forEach(s=>r.add(s)),n.forEach(s=>r.delete(s)),r}}function I0(i,e=new Map){if(BU(i)||!i||typeof i!="object")return i;if(e.has(i))return e.get(i);let n;if(i instanceof Date)n=new Date(i.getTime()),e.set(i,n);else if(i instanceof RegExp)n=new RegExp(i),e.set(i,n);else if(Array.isArray(i)){n=new Array(i.length),e.set(i,n);for(let r=0;r<i.length;r++)n[r]=I0(i[r],e)}else if(i instanceof Map){n=new Map,e.set(i,n);for(const[r,s]of i.entries())n.set(r,I0(s,e))}else if(i instanceof Set){n=new Set,e.set(i,n);for(const r of i)n.add(I0(r,e))}else if(i instanceof Object){n={},e.set(i,n);for(const[r,s]of Object.entries(i))n[r]=I0(s,e)}else throw Error(`Unable to clone ${i}`);return n}class Tc{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new bC,this._blacklist=new bC,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(_f.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e==null?void 0:e.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=I0(Object.assign({},this.spec,e)),n}label(e){let n=this.clone();return n.spec.label=e,n}meta(...e){if(e.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},e[0]),n}withMutation(e){let n=this._mutate;this._mutate=!0;let r=e(this);return this._mutate=n,r}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let n=this,r=e.clone();const s=Object.assign({},n.spec,r.spec);return r.spec=s,r.internalTests=Object.assign({},n.internalTests,r.internalTests),r._whitelist=n._whitelist.merge(e._whitelist,e._blacklist),r._blacklist=n._blacklist.merge(e._blacklist,e._whitelist),r.tests=n.tests,r.exclusiveTests=n.exclusiveTests,r.withMutation(a=>{e.tests.forEach(o=>{a.test(o.OPTIONS)})}),r.transforms=[...n.transforms,...r.transforms],r}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let n=this;if(n.conditions.length){let r=n.conditions;n=n.clone(),n.conditions=[],n=r.reduce((s,a)=>a.resolve(s,e),n),n=n.resolve(e)}return n}resolveOptions(e){var n,r,s,a;return Object.assign({},e,{from:e.from||[],strict:(n=e.strict)!=null?n:this.spec.strict,abortEarly:(r=e.abortEarly)!=null?r:this.spec.abortEarly,recursive:(s=e.recursive)!=null?s:this.spec.recursive,disableStackTrace:(a=e.disableStackTrace)!=null?a:this.spec.disableStackTrace})}cast(e,n={}){let r=this.resolve(Object.assign({value:e},n)),s=n.assert==="ignore-optionality",a=r._cast(e,n);if(n.assert!==!1&&!r.isType(a)){if(s&&nd(a))return a;let o=Qp(e),l=Qp(a);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${o} 
`+(l!==o?`result of cast: ${l}`:""))}return a}_cast(e,n){let r=e===void 0?e:this.transforms.reduce((s,a)=>a.call(this,s,e,this),e);return r===void 0&&(r=this.getDefault(n)),r}_validate(e,n={},r,s){let{path:a,originalValue:o=e,strict:l=this.spec.strict}=n,u=e;l||(u=this._cast(u,Object.assign({assert:!1},n)));let f=[];for(let d of Object.values(this.internalTests))d&&f.push(d);this.runTests({path:a,value:u,originalValue:o,options:n,tests:f},r,d=>{if(d.length)return s(d,u);this.runTests({path:a,value:u,originalValue:o,options:n,tests:this.tests},r,s)})}runTests(e,n,r){let s=!1,{tests:a,value:o,originalValue:l,path:u,options:f}=e,d=S=>{s||(s=!0,n(S,o))},m=S=>{s||(s=!0,r(S,o))},y=a.length,_=[];if(!y)return m([]);let x={value:o,originalValue:l,path:u,options:f,schema:this};for(let S=0;S<a.length;S++){const T=a[S];T(x,d,function(M){M&&(Array.isArray(M)?_.push(...M):_.push(M)),--y<=0&&m(_)})}}asNestedTest({key:e,index:n,parent:r,parentPath:s,originalParent:a,options:o}){const l=e??n;if(l==null)throw TypeError("Must include `key` or `index` for nested validations");const u=typeof l=="number";let f=r[l];const d=Object.assign({},o,{strict:!0,parent:r,value:f,originalValue:a[l],key:void 0,[u?"index":"key"]:l,path:u||l.includes(".")?`${s||""}[${u?l:`"${l}"`}]`:(s?`${s}.`:"")+e});return(m,y,_)=>this.resolve(d)._validate(f,d,y,_)}validate(e,n){var r;let s=this.resolve(Object.assign({},n,{value:e})),a=(r=n==null?void 0:n.disableStackTrace)!=null?r:s.spec.disableStackTrace;return new Promise((o,l)=>s._validate(e,n,(u,f)=>{Zo.isError(u)&&(u.value=f),l(u)},(u,f)=>{u.length?l(new Zo(u,f,void 0,void 0,a)):o(f)}))}validateSync(e,n){var r;let s=this.resolve(Object.assign({},n,{value:e})),a,o=(r=n==null?void 0:n.disableStackTrace)!=null?r:s.spec.disableStackTrace;return s._validate(e,Object.assign({},n,{sync:!0}),(l,u)=>{throw Zo.isError(l)&&(l.value=u),l},(l,u)=>{if(l.length)throw new Zo(l,e,void 0,void 0,o);a=u}),a}isValid(e,n){return this.validate(e,n).then(()=>!0,r=>{if(Zo.isError(r))return!1;throw r})}isValidSync(e,n){try{return this.validateSync(e,n),!0}catch(r){if(Zo.isError(r))return!1;throw r}}_getDefault(e){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,e):I0(n)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,n){const r=this.clone({nullable:e});return r.internalTests.nullable=m0({message:n,name:"nullable",test(s){return s===null?this.schema.spec.nullable:!0}}),r}optionality(e,n){const r=this.clone({optional:e});return r.internalTests.optionality=m0({message:n,name:"optionality",test(s){return s===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(e=_f.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=_f.notNull){return this.nullability(!1,e)}required(e=_f.required){return this.clone().withMutation(n=>n.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let n=this.clone();return n.transforms.push(e),n}test(...e){let n;if(e.length===1?typeof e[0]=="function"?n={test:e[0]}:n=e[0]:e.length===2?n={name:e[0],test:e[1]}:n={name:e[0],message:e[1],test:e[2]},n.message===void 0&&(n.message=_f.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),s=m0(n),a=n.exclusive||n.name&&r.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(r.exclusiveTests[n.name]=!!n.exclusive),r.tests=r.tests.filter(o=>!(o.OPTIONS.name===n.name&&(a||o.OPTIONS.test===s.OPTIONS.test))),r.tests.push(s),r}when(e,n){!Array.isArray(e)&&typeof e!="string"&&(n=e,e=".");let r=this.clone(),s=dW(e).map(a=>new Py(a));return s.forEach(a=>{a.isSibling&&r.deps.push(a.key)}),r.conditions.push(typeof n=="function"?new _C(s,n):_C.fromOptions(s,n)),r}typeError(e){let n=this.clone();return n.internalTests.typeError=m0({message:e,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(e,n=_f.oneOf){let r=this.clone();return e.forEach(s=>{r._whitelist.add(s),r._blacklist.delete(s)}),r.internalTests.whiteList=m0({message:n,name:"oneOf",skipAbsent:!0,test(s){let a=this.schema._whitelist,o=a.resolveAll(this.resolve);return o.includes(s)?!0:this.createError({params:{values:Array.from(a).join(", "),resolved:o}})}}),r}notOneOf(e,n=_f.notOneOf){let r=this.clone();return e.forEach(s=>{r._blacklist.add(s),r._whitelist.delete(s)}),r.internalTests.blacklist=m0({message:n,name:"notOneOf",test(s){let a=this.schema._blacklist,o=a.resolveAll(this.resolve);return o.includes(s)?this.createError({params:{values:Array.from(a).join(", "),resolved:o}}):!0}}),r}strip(e=!0){let n=this.clone();return n.spec.strip=e,n}describe(e){const n=(e?this.resolve(e):this).clone(),{label:r,meta:s,optional:a,nullable:o}=n.spec;return{meta:s,label:r,optional:a,nullable:o,default:n.getDefault(e),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.map(u=>({name:u.OPTIONS.name,params:u.OPTIONS.params})).filter((u,f,d)=>d.findIndex(m=>m.name===u.name)===f)}}}Tc.prototype.__isYupSchema__=!0;for(const i of["validate","validateSync"])Tc.prototype[`${i}At`]=function(e,n,r={}){const{parent:s,parentPath:a,schema:o}=BAt(this,e,n,r.context);return o[i](s&&s[a],Object.assign({},r,{parent:s,path:e}))};for(const i of["equals","is"])Tc.prototype[i]=Tc.prototype.oneOf;for(const i of["not","nope"])Tc.prototype[i]=Tc.prototype.notOneOf;const FAt=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function VAt(i){const e=vN(i);if(!e)return Date.parse?Date.parse(i):Number.NaN;if(e.z===void 0&&e.plusMinus===void 0)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let n=0;return e.z!=="Z"&&e.plusMinus!==void 0&&(n=e.hourOffset*60+e.minuteOffset,e.plusMinus==="+"&&(n=0-n)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+n,e.second,e.millisecond)}function vN(i){var e,n;const r=FAt.exec(i);return r?{year:Fh(r[1]),month:Fh(r[2],1)-1,day:Fh(r[3],1),hour:Fh(r[4]),minute:Fh(r[5]),second:Fh(r[6]),millisecond:r[7]?Fh(r[7].substring(0,3)):0,precision:(e=(n=r[7])==null?void 0:n.length)!=null?e:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:Fh(r[10]),minuteOffset:Fh(r[11])}:null}function Fh(i,e=0){return Number(i)||e}let HAt=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,GAt=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,jAt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,qAt="^\\d{4}-\\d{2}-\\d{2}",$At="\\d{2}:\\d{2}:\\d{2}",WAt="(([+-]\\d{2}(:?\\d{2})?)|Z)",XAt=new RegExp(`${qAt}T${$At}(\\.\\d+)?${WAt}$`),YAt=i=>nd(i)||i===i.trim(),KAt={}.toString();function _N(){return new yW}class yW extends Tc{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,n,r)=>{if(!r.spec.coerce||r.isType(e)||Array.isArray(e))return e;const s=e!=null&&e.toString?e.toString():e;return s===KAt?e:s})})}required(e){return super.required(e).withMutation(n=>n.test({message:e||_f.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(n=>n.OPTIONS.name!=="required"),e))}length(e,n=Xo.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,n=Xo.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,n=Xo.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}matches(e,n){let r=!1,s,a;return n&&(typeof n=="object"?{excludeEmptyString:r=!1,message:s,name:a}=n:s=n),this.test({name:a||"matches",message:s||Xo.matches,params:{regex:e},skipAbsent:!0,test:o=>o===""&&r||o.search(e)!==-1})}email(e=Xo.email){return this.matches(HAt,{name:"email",message:e,excludeEmptyString:!0})}url(e=Xo.url){return this.matches(GAt,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=Xo.uuid){return this.matches(jAt,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let n="",r,s;return e&&(typeof e=="object"?{message:n="",allowOffset:r=!1,precision:s=void 0}=e:n=e),this.matches(XAt,{name:"datetime",message:n||Xo.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||Xo.datetime_offset,params:{allowOffset:r},skipAbsent:!0,test:a=>{if(!a||r)return!0;const o=vN(a);return o?!!o.z:!1}}).test({name:"datetime_precision",message:n||Xo.datetime_precision,params:{precision:s},skipAbsent:!0,test:a=>{if(!a||s==null)return!0;const o=vN(a);return o?o.precision===s:!1}})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=Xo.trim){return this.transform(n=>n!=null?n.trim():n).test({message:e,name:"trim",test:YAt})}lowercase(e=Xo.lowercase){return this.transform(n=>nd(n)?n:n.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>nd(n)||n===n.toLowerCase()})}uppercase(e=Xo.uppercase){return this.transform(n=>nd(n)?n:n.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>nd(n)||n===n.toUpperCase()})}}_N.prototype=yW.prototype;let ZAt=i=>i!=+i;function bN(){return new vW}class vW extends Tc{constructor(){super({type:"number",check(e){return e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&!ZAt(e)}}),this.withMutation(()=>{this.transform((e,n,r)=>{if(!r.spec.coerce)return e;let s=e;if(typeof s=="string"){if(s=s.replace(/\s/g,""),s==="")return NaN;s=+s}return r.isType(s)||s===null?s:parseFloat(s)})})}min(e,n=Rp.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r>=this.resolve(e)}})}max(e,n=Rp.max){return this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(r){return r<=this.resolve(e)}})}lessThan(e,n=Rp.lessThan){return this.test({message:n,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test(r){return r<this.resolve(e)}})}moreThan(e,n=Rp.moreThan){return this.test({message:n,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test(r){return r>this.resolve(e)}})}positive(e=Rp.positive){return this.moreThan(0,e)}negative(e=Rp.negative){return this.lessThan(0,e)}integer(e=Rp.integer){return this.test({name:"integer",message:e,skipAbsent:!0,test:n=>Number.isInteger(n)})}truncate(){return this.transform(e=>nd(e)?e:e|0)}round(e){var n;let r=["ceil","floor","round","trunc"];if(e=((n=e)==null?void 0:n.toLowerCase())||"round",e==="trunc")return this.truncate();if(r.indexOf(e.toLowerCase())===-1)throw new TypeError("Only valid options for round() are: "+r.join(", "));return this.transform(s=>nd(s)?s:Math[e](s))}}bN.prototype=vW.prototype;let QAt=new Date(""),JAt=i=>Object.prototype.toString.call(i)==="[object Date]";class FU extends Tc{constructor(){super({type:"date",check(e){return JAt(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,n,r)=>!r.spec.coerce||r.isType(e)||e===null?e:(e=VAt(e),isNaN(e)?FU.INVALID_DATE:new Date(e)))})}prepareParam(e,n){let r;if(Py.isRef(e))r=e;else{let s=this.cast(e);if(!this._typeCheck(s))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);r=s}return r}min(e,n=yN.min){let r=this.prepareParam(e,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(s){return s>=this.resolve(r)}})}max(e,n=yN.max){let r=this.prepareParam(e,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(s){return s<=this.resolve(r)}})}}FU.INVALID_DATE=QAt;function tMt(i,e=[]){let n=[],r=new Set,s=new Set(e.map(([o,l])=>`${o}-${l}`));function a(o,l){let u=ry.split(o)[0];r.add(u),s.has(`${l}-${u}`)||n.push([l,u])}for(const o of Object.keys(i)){let l=i[o];r.add(o),Py.isRef(l)&&l.isSibling?a(l.path,o):BU(l)&&"deps"in l&&l.deps.forEach(u=>a(u,o))}return CAt.array(Array.from(r),n).reverse()}function P6(i,e){let n=1/0;return i.some((r,s)=>{var a;if((a=e.path)!=null&&a.includes(r))return n=s,!0}),n}function _W(i){return(e,n)=>P6(i,e)-P6(i,n)}const eMt=(i,e,n)=>{if(typeof i!="string")return i;let r=i;try{r=JSON.parse(i)}catch{}return n.isType(r)?r:i};function AA(i){if("fields"in i){const e={};for(const[n,r]of Object.entries(i.fields))e[n]=AA(r);return i.setFields(e)}if(i.type==="array"){const e=i.optional();return e.innerType&&(e.innerType=AA(e.innerType)),e}return i.type==="tuple"?i.optional().clone({types:i.spec.types.map(AA)}):"optional"in i?i.optional():i}const nMt=(i,e)=>{const n=[...ry.normalizePath(e)];if(n.length===1)return n[0]in i;let r=n.pop(),s=ry.getter(ry.join(n),!0)(i);return!!(s&&r in s)};let N6=i=>Object.prototype.toString.call(i)==="[object Object]";function L6(i,e){let n=Object.keys(i.fields);return Object.keys(e).filter(r=>n.indexOf(r)===-1)}const iMt=_W([]);function bW(i){return new xW(i)}class xW extends Tc{constructor(e){super({type:"object",check(n){return N6(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=iMt,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,n={}){var r;let s=super._cast(e,n);if(s===void 0)return this.getDefault(n);if(!this._typeCheck(s))return s;let a=this.fields,o=(r=n.stripUnknown)!=null?r:this.spec.noUnknown,l=[].concat(this._nodes,Object.keys(s).filter(m=>!this._nodes.includes(m))),u={},f=Object.assign({},n,{parent:u,__validating:n.__validating||!1}),d=!1;for(const m of l){let y=a[m],_=m in s;if(y){let x,S=s[m];f.path=(n.path?`${n.path}.`:"")+m,y=y.resolve({value:S,context:n.context,parent:u});let T=y instanceof Tc?y.spec:void 0,b=T==null?void 0:T.strict;if(T!=null&&T.strip){d=d||m in s;continue}x=!n.__validating||!b?y.cast(s[m],f):s[m],x!==void 0&&(u[m]=x)}else _&&!o&&(u[m]=s[m]);(_!==m in u||u[m]!==s[m])&&(d=!0)}return d?u:s}_validate(e,n={},r,s){let{from:a=[],originalValue:o=e,recursive:l=this.spec.recursive}=n;n.from=[{schema:this,value:o},...a],n.__validating=!0,n.originalValue=o,super._validate(e,n,r,(u,f)=>{if(!l||!N6(f)){s(u,f);return}o=o||f;let d=[];for(let m of this._nodes){let y=this.fields[m];!y||Py.isRef(y)||d.push(y.asNestedTest({options:n,key:m,parent:f,parentPath:n.path,originalParent:o}))}this.runTests({tests:d,value:f,originalValue:o,options:n},r,m=>{s(m.sort(this._sortErrors).concat(u),f)})})}clone(e){const n=super.clone(e);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(e){let n=super.concat(e),r=n.fields;for(let[s,a]of Object.entries(this.fields)){const o=r[s];r[s]=o===void 0?a:o}return n.withMutation(s=>s.setFields(r,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let n={};return this._nodes.forEach(r=>{var s;const a=this.fields[r];let o=e;(s=o)!=null&&s.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[r]})),n[r]=a&&"getDefault"in a?a.getDefault(o):void 0}),n}setFields(e,n){let r=this.clone();return r.fields=e,r._nodes=tMt(e,n),r._sortErrors=_W(Object.keys(e)),n&&(r._excludedEdges=n),r}shape(e,n=[]){return this.clone().withMutation(r=>{let s=r._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),s=[...r._excludedEdges,...n]),r.setFields(Object.assign(r.fields,e),s)})}partial(){const e={};for(const[n,r]of Object.entries(this.fields))e[n]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(e)}deepPartial(){return AA(this)}pick(e){const n={};for(const r of e)this.fields[r]&&(n[r]=this.fields[r]);return this.setFields(n,this._excludedEdges.filter(([r,s])=>e.includes(r)&&e.includes(s)))}omit(e){const n=[];for(const r of Object.keys(this.fields))e.includes(r)||n.push(r);return this.pick(n)}from(e,n,r){let s=ry.getter(e,!0);return this.transform(a=>{if(!a)return a;let o=a;return nMt(a,e)&&(o=Object.assign({},a),r||delete o[e],o[n]=s(a)),o})}json(){return this.transform(eMt)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||wA.exact,test(n){if(n==null)return!0;const r=L6(this.schema,n);return r.length===0||this.createError({params:{properties:r.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(e=!0,n=wA.noUnknown){typeof e!="boolean"&&(n=e,e=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:n,test(s){if(s==null)return!0;const a=L6(this.schema,s);return!e||a.length===0||this.createError({params:{unknown:a.join(", ")}})}});return r.spec.noUnknown=e,r}unknown(e=!0,n=wA.noUnknown){return this.noUnknown(!e,n)}transformKeys(e){return this.transform(n=>{if(!n)return n;const r={};for(const s of Object.keys(n))r[e(s)]=n[s];return r})}camelCase(){return this.transformKeys(dD.camelCase)}snakeCase(){return this.transformKeys(dD.snakeCase)}constantCase(){return this.transformKeys(e=>dD.snakeCase(e).toUpperCase())}describe(e){const n=(e?this.resolve(e):this).clone(),r=super.describe(e);r.fields={};for(const[a,o]of Object.entries(n.fields)){var s;let l=e;(s=l)!=null&&s.value&&(l=Object.assign({},l,{parent:l.value,value:l.value[a]})),r.fields[a]=o.describe(l)}return r}}bW.prototype=xW.prototype;const U6=(i,e,n,r)=>{n+1===r.length?(e(),i()):e()},Rx=["Estas creando un nuevo nodo","Conecta el nodo"],rMt=({onValidate:i,onHandleSubmit:e})=>{const n=yi(m=>m.isUploadFirestore),r=yi(m=>m.activeStep),s=yi(m=>m.nextStep),a=yi(m=>m.prevStep),o=m=>m===1,l=async()=>{const m=i?await i():!0;(Array.isArray(m)?m[r]:m)&&U6(e,s,r,Rx)},u=()=>{a()},f=()=>{yi.getState().setActiveStep(0)},d=()=>{U6(e,s,r,Rx)};return st.jsxs(bs,{sx:{paddingLeft:"1rem",paddingRight:"1rem",marginBottom:"1rem"},children:[r===Rx.length?st.jsxs(tt.Fragment,{children:[st.jsx(vc,{sx:{mt:2,mb:1},children:"Todos los pasos completados"}),st.jsxs(bs,{sx:{display:"flex",flexDirection:"row",pt:2},children:[st.jsx(bs,{sx:{flex:"1 1 auto"}}),st.jsx(O0,{disabled:n,onClick:f,children:"Volver"})]})]}):st.jsxs(tt.Fragment,{children:[st.jsxs(vc,{sx:{mt:2,mb:1},children:["Paso ",r+1]}),st.jsxs(bs,{sx:{display:"flex",flexDirection:"row",pt:2},children:[st.jsx(O0,{color:"inherit",disabled:r===0,onClick:u,sx:{mr:1,color:gd.palette.action.success},children:"Retroceder"}),st.jsx(bs,{sx:{flex:"1 1 auto"}}),o(r)&&st.jsx(O0,{color:"inherit",onClick:d,sx:{mr:1,color:gd.palette.action.success},children:"Saltar"}),st.jsx(O0,{onClick:l,children:r===Rx.length-1?"Finalizar":"Siguiente"})]})]}),st.jsx(kwt,{activeStep:r,children:Rx.map((m,y)=>{const _={},x={};return o(y)&&(x.optional=st.jsx(vc,{variant:"caption",children:"Opcional"})),st.jsx(mwt,{..._,children:st.jsx(Y$,{...x,children:m})},m)})})]})},vo=gd,SW={display:"flex",justifyContent:"center",flexDirection:"column",height:"100%",alignItems:"center",backgroundColor:vo.palette.background.form,borderTop:`1px solid ${vo.palette.formStyles.borderColor}`,borderBottom:`1px solid ${vo.palette.formStyles.borderColor}`,"& .MuiFormLabel-root":{marginBottom:"3rem"},"& .MuiInputBase-root":{backgroundColor:vo.palette.formStyles.cardBackgroundColor}},sMt={backgroundColor:vo.palette.formStyles.cardBackgroundColor,padding:"40px",border:`2px solid ${vo.palette.formStyles.borderColor}`,borderRadius:"4px",marginTop:"20px","& .MuiFormGroup-root":{color:vo.palette.text.secondary,fontWeight:"600"}},aMt={fontSize:"1.5rem",fontWeight:"600",marginBottom:"2rem"},oMt=i=>({color:i?vo.palette.action.deactivate:vo.palette.text.secondary,border:`1px solid ${i?vo.palette.action.deactivate:"grey"}`,borderRadius:1,"&.Mui-focused":{borderColor:"blue",boxShadow:"none"},"& .MuiOutlinedInput-notchedOutline":{border:"none"}}),lMt=i=>({display:"flex",flexDirection:"column-reverse","& .MuiTypography-root":{fontSize:"0.75rem",textAlign:"center",display:i?"block":"none",color:vo.palette.action.deactivate,marginTop:"3px",fontWeight:"400"}}),uMt={display:"flex",fontSize:"15px",borderTop:`1px solid ${vo.palette.formStyles.borderColor}`,borderBottom:`1px solid ${vo.palette.formStyles.borderColor}`,flexDirection:"column",background:"#f3f3f3",width:"100%",height:"100%"},cMt=i=>({display:i?"none":"block","& .MuiLinearProgress-root":{marginTop:"1.8em",marginLeft:"2em",height:"1em",borderRadius:"5px"}}),fMt=i=>({display:i?"block":"none","& p":{marginTop:"1.8em",height:"1em",color:vo.palette.text.secondary}," & div":{paddingLeft:"2em",paddingTop:"1em",color:vo.palette.text.secondary}}),hMt=i=>({display:i?"none":"block",margin:"auto","& .MuiCircularProgress-root":{width:"100px !important",height:"100px !important"}}),dMt=i=>({display:i?"block":"none",margin:"auto"});function xN(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=Array(e);n<e;n++)r[n]=i[n];return r}function pMt(i){if(Array.isArray(i))return i}function mMt(i){if(Array.isArray(i))return xN(i)}function gMt(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function yMt(i,e){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,f=!1;try{if(a=(n=n.call(i)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(d){f=!0,s=d}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw s}}return l}}function vMt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Mt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bMt(i,e){return pMt(i)||yMt(i,e)||EW(i,e)||vMt()}function k6(i){return mMt(i)||gMt(i)||EW(i)||_Mt()}function EW(i,e){if(i){if(typeof i=="string")return xN(i,e);var n={}.toString.call(i).slice(8,-1);return n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set"?Array.from(i):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xN(i,e):void 0}}function xMt(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.wrapperElementType,r=n===void 0?"div":n,s=e.nodeMapper,a=s===void 0?function(d){return d}:s,o=e.methodNames,l=o===void 0?[]:o,u=e.initPropNames,f=u===void 0?[]:u;return tt.forwardRef(function(d,m){var y=tt.useRef(),_=tt.useMemo(function(){var T=Object.fromEntries(f.filter(function(b){return d.hasOwnProperty(b)}).map(function(b){return[b,d[b]]}));return i(T)},[]);z6(function(){_(a(y.current))},tt.useLayoutEffect),z6(function(){return _._destructor instanceof Function?_._destructor:void 0});var x=tt.useCallback(function(T){for(var b=arguments.length,M=new Array(b>1?b-1:0),R=1;R<b;R++)M[R-1]=arguments[R];return _[T]instanceof Function?_[T].apply(_,M):void 0},[_]),S=tt.useRef({});return Object.keys(zq(d,[].concat(k6(l),k6(f)))).filter(function(T){return S.current[T]!==d[T]}).forEach(function(T){return x(T,d[T])}),S.current=d,tt.useImperativeHandle(m,function(){return Object.fromEntries(l.map(function(T){return[T,function(){for(var b=arguments.length,M=new Array(b),R=0;R<b;R++)M[R]=arguments[R];return x.apply(void 0,[T].concat(M))}]}))},[x]),pn.createElement(r,{ref:y})})}function z6(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tt.useEffect,n=tt.useRef(),r=tt.useRef(!1),s=tt.useRef(!1),a=tt.useState(0),o=bMt(a,2);o[0];var l=o[1];r.current&&(s.current=!0),e(function(){return r.current||(n.current=i(),r.current=!0),l(function(u){return u+1}),function(){s.current&&n.current&&n.current()}},[])}var SN="http://www.w3.org/1999/xhtml";const B6={svg:"http://www.w3.org/2000/svg",xhtml:SN,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function sR(i){var e=i+="",n=e.indexOf(":");return n>=0&&(e=i.slice(0,n))!=="xmlns"&&(i=i.slice(n+1)),B6.hasOwnProperty(e)?{space:B6[e],local:i}:i}function SMt(i){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===SN&&e.documentElement.namespaceURI===SN?e.createElement(i):e.createElementNS(n,i)}}function EMt(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}function TW(i){var e=sR(i);return(e.local?EMt:SMt)(e)}function TMt(){}function VU(i){return i==null?TMt:function(){return this.querySelector(i)}}function wMt(i){typeof i!="function"&&(i=VU(i));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],o=a.length,l=r[s]=new Array(o),u,f,d=0;d<o;++d)(u=a[d])&&(f=i.call(u,u.__data__,d,a))&&("__data__"in u&&(f.__data__=u.__data__),l[d]=f);return new jl(r,this._parents)}function AMt(i){return i==null?[]:Array.isArray(i)?i:Array.from(i)}function MMt(){return[]}function wW(i){return i==null?MMt:function(){return this.querySelectorAll(i)}}function CMt(i){return function(){return AMt(i.apply(this,arguments))}}function RMt(i){typeof i=="function"?i=CMt(i):i=wW(i);for(var e=this._groups,n=e.length,r=[],s=[],a=0;a<n;++a)for(var o=e[a],l=o.length,u,f=0;f<l;++f)(u=o[f])&&(r.push(i.call(u,u.__data__,f,o)),s.push(u));return new jl(r,s)}function AW(i){return function(){return this.matches(i)}}function MW(i){return function(e){return e.matches(i)}}var OMt=Array.prototype.find;function IMt(i){return function(){return OMt.call(this.children,i)}}function DMt(){return this.firstElementChild}function PMt(i){return this.select(i==null?DMt:IMt(typeof i=="function"?i:MW(i)))}var NMt=Array.prototype.filter;function LMt(){return Array.from(this.children)}function UMt(i){return function(){return NMt.call(this.children,i)}}function kMt(i){return this.selectAll(i==null?LMt:UMt(typeof i=="function"?i:MW(i)))}function zMt(i){typeof i!="function"&&(i=AW(i));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],o=a.length,l=r[s]=[],u,f=0;f<o;++f)(u=a[f])&&i.call(u,u.__data__,f,a)&&l.push(u);return new jl(r,this._parents)}function CW(i){return new Array(i.length)}function BMt(){return new jl(this._enter||this._groups.map(CW),this._parents)}function xC(i,e){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=e}xC.prototype={constructor:xC,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,e){return this._parent.insertBefore(i,e)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};function FMt(i){return function(){return i}}function VMt(i,e,n,r,s,a){for(var o=0,l,u=e.length,f=a.length;o<f;++o)(l=e[o])?(l.__data__=a[o],r[o]=l):n[o]=new xC(i,a[o]);for(;o<u;++o)(l=e[o])&&(s[o]=l)}function HMt(i,e,n,r,s,a,o){var l,u,f=new Map,d=e.length,m=a.length,y=new Array(d),_;for(l=0;l<d;++l)(u=e[l])&&(y[l]=_=o.call(u,u.__data__,l,e)+"",f.has(_)?s[l]=u:f.set(_,u));for(l=0;l<m;++l)_=o.call(i,a[l],l,a)+"",(u=f.get(_))?(r[l]=u,u.__data__=a[l],f.delete(_)):n[l]=new xC(i,a[l]);for(l=0;l<d;++l)(u=e[l])&&f.get(y[l])===u&&(s[l]=u)}function GMt(i){return i.__data__}function jMt(i,e){if(!arguments.length)return Array.from(this,GMt);var n=e?HMt:VMt,r=this._parents,s=this._groups;typeof i!="function"&&(i=FMt(i));for(var a=s.length,o=new Array(a),l=new Array(a),u=new Array(a),f=0;f<a;++f){var d=r[f],m=s[f],y=m.length,_=qMt(i.call(d,d&&d.__data__,f,r)),x=_.length,S=l[f]=new Array(x),T=o[f]=new Array(x),b=u[f]=new Array(y);n(d,m,S,T,b,_,e);for(var M=0,R=0,A,I;M<x;++M)if(A=S[M]){for(M>=R&&(R=M+1);!(I=T[R])&&++R<x;);A._next=I||null}}return o=new jl(o,r),o._enter=l,o._exit=u,o}function qMt(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function $Mt(){return new jl(this._exit||this._groups.map(CW),this._parents)}function WMt(i,e,n){var r=this.enter(),s=this,a=this.exit();return typeof i=="function"?(r=i(r),r&&(r=r.selection())):r=r.append(i+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?a.remove():n(a),r&&s?r.merge(s).order():s}function XMt(i){for(var e=i.selection?i.selection():i,n=this._groups,r=e._groups,s=n.length,a=r.length,o=Math.min(s,a),l=new Array(s),u=0;u<o;++u)for(var f=n[u],d=r[u],m=f.length,y=l[u]=new Array(m),_,x=0;x<m;++x)(_=f[x]||d[x])&&(y[x]=_);for(;u<s;++u)l[u]=n[u];return new jl(l,this._parents)}function YMt(){for(var i=this._groups,e=-1,n=i.length;++e<n;)for(var r=i[e],s=r.length-1,a=r[s],o;--s>=0;)(o=r[s])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function KMt(i){i||(i=ZMt);function e(m,y){return m&&y?i(m.__data__,y.__data__):!m-!y}for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a){for(var o=n[a],l=o.length,u=s[a]=new Array(l),f,d=0;d<l;++d)(f=o[d])&&(u[d]=f);u.sort(e)}return new jl(s,this._parents).order()}function ZMt(i,e){return i<e?-1:i>e?1:i>=e?0:NaN}function QMt(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this}function JMt(){return Array.from(this)}function tCt(){for(var i=this._groups,e=0,n=i.length;e<n;++e)for(var r=i[e],s=0,a=r.length;s<a;++s){var o=r[s];if(o)return o}return null}function eCt(){let i=0;for(const e of this)++i;return i}function nCt(){return!this.node()}function iCt(i){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],a=0,o=s.length,l;a<o;++a)(l=s[a])&&i.call(l,l.__data__,a,s);return this}function rCt(i){return function(){this.removeAttribute(i)}}function sCt(i){return function(){this.removeAttributeNS(i.space,i.local)}}function aCt(i,e){return function(){this.setAttribute(i,e)}}function oCt(i,e){return function(){this.setAttributeNS(i.space,i.local,e)}}function lCt(i,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(i):this.setAttribute(i,n)}}function uCt(i,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,n)}}function cCt(i,e){var n=sR(i);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?sCt:rCt:typeof e=="function"?n.local?uCt:lCt:n.local?oCt:aCt)(n,e))}function RW(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView}function fCt(i){return function(){this.style.removeProperty(i)}}function hCt(i,e,n){return function(){this.style.setProperty(i,e,n)}}function dCt(i,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(i):this.style.setProperty(i,r,n)}}function pCt(i,e,n){return arguments.length>1?this.each((e==null?fCt:typeof e=="function"?dCt:hCt)(i,e,n??"")):E_(this.node(),i)}function E_(i,e){return i.style.getPropertyValue(e)||RW(i).getComputedStyle(i,null).getPropertyValue(e)}function mCt(i){return function(){delete this[i]}}function gCt(i,e){return function(){this[i]=e}}function yCt(i,e){return function(){var n=e.apply(this,arguments);n==null?delete this[i]:this[i]=n}}function vCt(i,e){return arguments.length>1?this.each((e==null?mCt:typeof e=="function"?yCt:gCt)(i,e)):this.node()[i]}function OW(i){return i.trim().split(/^|\s+/)}function HU(i){return i.classList||new IW(i)}function IW(i){this._node=i,this._names=OW(i.getAttribute("class")||"")}IW.prototype={add:function(i){var e=this._names.indexOf(i);e<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var e=this._names.indexOf(i);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};function DW(i,e){for(var n=HU(i),r=-1,s=e.length;++r<s;)n.add(e[r])}function PW(i,e){for(var n=HU(i),r=-1,s=e.length;++r<s;)n.remove(e[r])}function _Ct(i){return function(){DW(this,i)}}function bCt(i){return function(){PW(this,i)}}function xCt(i,e){return function(){(e.apply(this,arguments)?DW:PW)(this,i)}}function SCt(i,e){var n=OW(i+"");if(arguments.length<2){for(var r=HU(this.node()),s=-1,a=n.length;++s<a;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?xCt:e?_Ct:bCt)(n,e))}function ECt(){this.textContent=""}function TCt(i){return function(){this.textContent=i}}function wCt(i){return function(){var e=i.apply(this,arguments);this.textContent=e??""}}function ACt(i){return arguments.length?this.each(i==null?ECt:(typeof i=="function"?wCt:TCt)(i)):this.node().textContent}function MCt(){this.innerHTML=""}function CCt(i){return function(){this.innerHTML=i}}function RCt(i){return function(){var e=i.apply(this,arguments);this.innerHTML=e??""}}function OCt(i){return arguments.length?this.each(i==null?MCt:(typeof i=="function"?RCt:CCt)(i)):this.node().innerHTML}function ICt(){this.nextSibling&&this.parentNode.appendChild(this)}function DCt(){return this.each(ICt)}function PCt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function NCt(){return this.each(PCt)}function LCt(i){var e=typeof i=="function"?i:TW(i);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function UCt(){return null}function kCt(i,e){var n=typeof i=="function"?i:TW(i),r=e==null?UCt:typeof e=="function"?e:VU(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function zCt(){var i=this.parentNode;i&&i.removeChild(this)}function BCt(){return this.each(zCt)}function FCt(){var i=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function VCt(){var i=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function HCt(i){return this.select(i?VCt:FCt)}function GCt(i){return arguments.length?this.property("__data__",i):this.node().__data__}function jCt(i){return function(e){i.call(this,e,this.__data__)}}function qCt(i){return i.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function $Ct(i){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,a;n<s;++n)a=e[n],(!i.type||a.type===i.type)&&a.name===i.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function WCt(i,e,n){return function(){var r=this.__on,s,a=jCt(e);if(r){for(var o=0,l=r.length;o<l;++o)if((s=r[o]).type===i.type&&s.name===i.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=e;return}}this.addEventListener(i.type,a,n),s={type:i.type,name:i.name,value:e,listener:a,options:n},r?r.push(s):this.__on=[s]}}function XCt(i,e,n){var r=qCt(i+""),s,a=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,f=l.length,d;u<f;++u)for(s=0,d=l[u];s<a;++s)if((o=r[s]).type===d.type&&o.name===d.name)return d.value}return}for(l=e?WCt:$Ct,s=0;s<a;++s)this.each(l(r[s],e,n));return this}function NW(i,e,n){var r=RW(i),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),i.dispatchEvent(s)}function YCt(i,e){return function(){return NW(this,i,e)}}function KCt(i,e){return function(){return NW(this,i,e.apply(this,arguments))}}function ZCt(i,e){return this.each((typeof e=="function"?KCt:YCt)(i,e))}function*QCt(){for(var i=this._groups,e=0,n=i.length;e<n;++e)for(var r=i[e],s=0,a=r.length,o;s<a;++s)(o=r[s])&&(yield o)}var LW=[null];function jl(i,e){this._groups=i,this._parents=e}function sE(){return new jl([[document.documentElement]],LW)}function JCt(){return this}jl.prototype=sE.prototype={constructor:jl,select:wMt,selectAll:RMt,selectChild:PMt,selectChildren:kMt,filter:zMt,data:jMt,enter:BMt,exit:$Mt,join:WMt,merge:XMt,selection:JCt,order:YMt,sort:KMt,call:QMt,nodes:JMt,node:tCt,size:eCt,empty:nCt,each:iCt,attr:cCt,style:pCt,property:vCt,classed:SCt,text:ACt,html:OCt,raise:DCt,lower:NCt,append:LCt,insert:kCt,remove:BCt,clone:HCt,datum:GCt,on:XCt,dispatch:ZCt,[Symbol.iterator]:QCt};function bu(i){return typeof i=="string"?new jl([[document.querySelector(i)]],[document.documentElement]):new jl([[i]],LW)}function t2t(i){let e;for(;e=i.sourceEvent;)i=e;return i}function bf(i,e){if(i=t2t(i),e===void 0&&(e=i.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=i.clientX,r.y=i.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[i.clientX-s.left-e.clientLeft,i.clientY-s.top-e.clientTop]}}return[i.pageX,i.pageY]}const e2t={passive:!1},xS={capture:!0,passive:!1};function pD(i){i.stopImmediatePropagation()}function q0(i){i.preventDefault(),i.stopImmediatePropagation()}function UW(i){var e=i.document.documentElement,n=bu(i).on("dragstart.drag",q0,xS);"onselectstart"in e?n.on("selectstart.drag",q0,xS):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function kW(i,e){var n=i.document.documentElement,r=bu(i).on("dragstart.drag",null);e&&(r.on("click.drag",q0,xS),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Kw=i=>()=>i;function EN(i,{sourceEvent:e,subject:n,target:r,identifier:s,active:a,x:o,y:l,dx:u,dy:f,dispatch:d}){Object.defineProperties(this,{type:{value:i,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:d}})}EN.prototype.on=function(){var i=this._.on.apply(this._,arguments);return i===this._?this:i};function n2t(i){return!i.ctrlKey&&!i.button}function i2t(){return this.parentNode}function r2t(i,e){return e??{x:i.x,y:i.y}}function s2t(){return navigator.maxTouchPoints||"ontouchstart"in this}function a2t(){var i=n2t,e=i2t,n=r2t,r=s2t,s={},a=eE("start","drag","end"),o=0,l,u,f,d,m=0;function y(A){A.on("mousedown.drag",_).filter(r).on("touchstart.drag",T).on("touchmove.drag",b,e2t).on("touchend.drag touchcancel.drag",M).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(A,I){if(!(d||!i.call(this,A,I))){var k=R(this,e.call(this,A,I),A,I,"mouse");k&&(bu(A.view).on("mousemove.drag",x,xS).on("mouseup.drag",S,xS),UW(A.view),pD(A),f=!1,l=A.clientX,u=A.clientY,k("start",A))}}function x(A){if(q0(A),!f){var I=A.clientX-l,k=A.clientY-u;f=I*I+k*k>m}s.mouse("drag",A)}function S(A){bu(A.view).on("mousemove.drag mouseup.drag",null),kW(A.view,f),q0(A),s.mouse("end",A)}function T(A,I){if(i.call(this,A,I)){var k=A.changedTouches,N=e.call(this,A,I),L=k.length,U,O;for(U=0;U<L;++U)(O=R(this,N,A,I,k[U].identifier,k[U]))&&(pD(A),O("start",A,k[U]))}}function b(A){var I=A.changedTouches,k=I.length,N,L;for(N=0;N<k;++N)(L=s[I[N].identifier])&&(q0(A),L("drag",A,I[N]))}function M(A){var I=A.changedTouches,k=I.length,N,L;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),N=0;N<k;++N)(L=s[I[N].identifier])&&(pD(A),L("end",A,I[N]))}function R(A,I,k,N,L,U){var O=a.copy(),F=bf(U||k,I),H,V,X;if((X=n.call(A,new EN("beforestart",{sourceEvent:k,target:y,identifier:L,active:o,x:F[0],y:F[1],dx:0,dy:0,dispatch:O}),N))!=null)return H=X.x-F[0]||0,V=X.y-F[1]||0,function J(q,W,K){var et=F,Q;switch(q){case"start":s[L]=J,Q=o++;break;case"end":delete s[L],--o;case"drag":F=bf(K||W,I),Q=o;break}O.call(q,A,new EN(q,{sourceEvent:W,subject:X,target:y,identifier:L,active:Q,x:F[0]+H,y:F[1]+V,dx:F[0]-et[0],dy:F[1]-et[1],dispatch:O}),N)}}return y.filter=function(A){return arguments.length?(i=typeof A=="function"?A:Kw(!!A),y):i},y.container=function(A){return arguments.length?(e=typeof A=="function"?A:Kw(A),y):e},y.subject=function(A){return arguments.length?(n=typeof A=="function"?A:Kw(A),y):n},y.touchable=function(A){return arguments.length?(r=typeof A=="function"?A:Kw(!!A),y):r},y.on=function(){var A=a.on.apply(a,arguments);return A===a?y:A},y.clickDistance=function(A){return arguments.length?(m=(A=+A)*A,y):Math.sqrt(m)},y}var o2t=eE("start","end","cancel","interrupt"),l2t=[],zW=0,F6=1,TN=2,MA=3,V6=4,wN=5,CA=6;function aR(i,e,n,r,s,a){var o=i.__transition;if(!o)i.__transition={};else if(n in o)return;u2t(i,n,{name:e,index:r,group:s,on:o2t,tween:l2t,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:zW})}function GU(i,e){var n=Mc(i,e);if(n.state>zW)throw new Error("too late; already scheduled");return n}function Zf(i,e){var n=Mc(i,e);if(n.state>MA)throw new Error("too late; already running");return n}function Mc(i,e){var n=i.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function u2t(i,e,n){var r=i.__transition,s;r[e]=n,n.timer=JL(a,0,n.time);function a(f){n.state=F6,n.timer.restart(o,n.delay,n.time),n.delay<=f&&o(f-n.delay)}function o(f){var d,m,y,_;if(n.state!==F6)return u();for(d in r)if(_=r[d],_.name===n.name){if(_.state===MA)return B5(o);_.state===V6?(_.state=CA,_.timer.stop(),_.on.call("interrupt",i,i.__data__,_.index,_.group),delete r[d]):+d<e&&(_.state=CA,_.timer.stop(),_.on.call("cancel",i,i.__data__,_.index,_.group),delete r[d])}if(B5(function(){n.state===MA&&(n.state=V6,n.timer.restart(l,n.delay,n.time),l(f))}),n.state=TN,n.on.call("start",i,i.__data__,n.index,n.group),n.state===TN){for(n.state=MA,s=new Array(y=n.tween.length),d=0,m=-1;d<y;++d)(_=n.tween[d].value.call(i,i.__data__,n.index,n.group))&&(s[++m]=_);s.length=m+1}}function l(f){for(var d=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(u),n.state=wN,1),m=-1,y=s.length;++m<y;)s[m].call(i,d);n.state===wN&&(n.on.call("end",i,i.__data__,n.index,n.group),u())}function u(){n.state=CA,n.timer.stop(),delete r[e];for(var f in r)return;delete i.__transition}}function RA(i,e){var n=i.__transition,r,s,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}s=r.state>TN&&r.state<wN,r.state=CA,r.timer.stop(),r.on.call(s?"interrupt":"cancel",i,i.__data__,r.index,r.group),delete n[o]}a&&delete i.__transition}}function c2t(i){return this.each(function(){RA(this,i)})}function f2t(i,e){var n,r;return function(){var s=Zf(this,i),a=s.tween;if(a!==n){r=n=a;for(var o=0,l=r.length;o<l;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}s.tween=r}}function h2t(i,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var a=Zf(this,i),o=a.tween;if(o!==r){s=(r=o).slice();for(var l={name:e,value:n},u=0,f=s.length;u<f;++u)if(s[u].name===e){s[u]=l;break}u===f&&s.push(l)}a.tween=s}}function d2t(i,e){var n=this._id;if(i+="",arguments.length<2){for(var r=Mc(this.node(),n).tween,s=0,a=r.length,o;s<a;++s)if((o=r[s]).name===i)return o.value;return null}return this.each((e==null?f2t:h2t)(n,i,e))}function jU(i,e,n){var r=i._id;return i.each(function(){var s=Zf(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return Mc(s,r).value[e]}}function BW(i,e){var n;return(typeof e=="number"?Ip:e instanceof dS?bV:(n=dS(e))?(e=n,bV):jbt)(i,e)}function p2t(i){return function(){this.removeAttribute(i)}}function m2t(i){return function(){this.removeAttributeNS(i.space,i.local)}}function g2t(i,e,n){var r,s=n+"",a;return function(){var o=this.getAttribute(i);return o===s?null:o===r?a:a=e(r=o,n)}}function y2t(i,e,n){var r,s=n+"",a;return function(){var o=this.getAttributeNS(i.space,i.local);return o===s?null:o===r?a:a=e(r=o,n)}}function v2t(i,e,n){var r,s,a;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(i):(o=this.getAttribute(i),u=l+"",o===u?null:o===r&&u===s?a:(s=u,a=e(r=o,l)))}}function _2t(i,e,n){var r,s,a;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(i.space,i.local):(o=this.getAttributeNS(i.space,i.local),u=l+"",o===u?null:o===r&&u===s?a:(s=u,a=e(r=o,l)))}}function b2t(i,e){var n=sR(i),r=n==="transform"?Xbt:BW;return this.attrTween(i,typeof e=="function"?(n.local?_2t:v2t)(n,r,jU(this,"attr."+i,e)):e==null?(n.local?m2t:p2t)(n):(n.local?y2t:g2t)(n,r,e))}function x2t(i,e){return function(n){this.setAttribute(i,e.call(this,n))}}function S2t(i,e){return function(n){this.setAttributeNS(i.space,i.local,e.call(this,n))}}function E2t(i,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&S2t(i,a)),n}return s._value=e,s}function T2t(i,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&x2t(i,a)),n}return s._value=e,s}function w2t(i,e){var n="attr."+i;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=sR(i);return this.tween(n,(r.local?E2t:T2t)(r,e))}function A2t(i,e){return function(){GU(this,i).delay=+e.apply(this,arguments)}}function M2t(i,e){return e=+e,function(){GU(this,i).delay=e}}function C2t(i){var e=this._id;return arguments.length?this.each((typeof i=="function"?A2t:M2t)(e,i)):Mc(this.node(),e).delay}function R2t(i,e){return function(){Zf(this,i).duration=+e.apply(this,arguments)}}function O2t(i,e){return e=+e,function(){Zf(this,i).duration=e}}function I2t(i){var e=this._id;return arguments.length?this.each((typeof i=="function"?R2t:O2t)(e,i)):Mc(this.node(),e).duration}function D2t(i,e){if(typeof e!="function")throw new Error;return function(){Zf(this,i).ease=e}}function P2t(i){var e=this._id;return arguments.length?this.each(D2t(e,i)):Mc(this.node(),e).ease}function N2t(i,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Zf(this,i).ease=n}}function L2t(i){if(typeof i!="function")throw new Error;return this.each(N2t(this._id,i))}function U2t(i){typeof i!="function"&&(i=AW(i));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],o=a.length,l=r[s]=[],u,f=0;f<o;++f)(u=a[f])&&i.call(u,u.__data__,f,a)&&l.push(u);return new Ed(r,this._parents,this._name,this._id)}function k2t(i){if(i._id!==this._id)throw new Error;for(var e=this._groups,n=i._groups,r=e.length,s=n.length,a=Math.min(r,s),o=new Array(r),l=0;l<a;++l)for(var u=e[l],f=n[l],d=u.length,m=o[l]=new Array(d),y,_=0;_<d;++_)(y=u[_]||f[_])&&(m[_]=y);for(;l<r;++l)o[l]=e[l];return new Ed(o,this._parents,this._name,this._id)}function z2t(i){return(i+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function B2t(i,e,n){var r,s,a=z2t(e)?GU:Zf;return function(){var o=a(this,i),l=o.on;l!==r&&(s=(r=l).copy()).on(e,n),o.on=s}}function F2t(i,e){var n=this._id;return arguments.length<2?Mc(this.node(),n).on.on(i):this.each(B2t(n,i,e))}function V2t(i){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==i)return;e&&e.removeChild(this)}}function H2t(){return this.on("end.remove",V2t(this._id))}function G2t(i){var e=this._name,n=this._id;typeof i!="function"&&(i=VU(i));for(var r=this._groups,s=r.length,a=new Array(s),o=0;o<s;++o)for(var l=r[o],u=l.length,f=a[o]=new Array(u),d,m,y=0;y<u;++y)(d=l[y])&&(m=i.call(d,d.__data__,y,l))&&("__data__"in d&&(m.__data__=d.__data__),f[y]=m,aR(f[y],e,n,y,f,Mc(d,n)));return new Ed(a,this._parents,e,n)}function j2t(i){var e=this._name,n=this._id;typeof i!="function"&&(i=wW(i));for(var r=this._groups,s=r.length,a=[],o=[],l=0;l<s;++l)for(var u=r[l],f=u.length,d,m=0;m<f;++m)if(d=u[m]){for(var y=i.call(d,d.__data__,m,u),_,x=Mc(d,n),S=0,T=y.length;S<T;++S)(_=y[S])&&aR(_,e,n,S,y,x);a.push(y),o.push(d)}return new Ed(a,o,e,n)}var q2t=sE.prototype.constructor;function $2t(){return new q2t(this._groups,this._parents)}function W2t(i,e){var n,r,s;return function(){var a=E_(this,i),o=(this.style.removeProperty(i),E_(this,i));return a===o?null:a===n&&o===r?s:s=e(n=a,r=o)}}function FW(i){return function(){this.style.removeProperty(i)}}function X2t(i,e,n){var r,s=n+"",a;return function(){var o=E_(this,i);return o===s?null:o===r?a:a=e(r=o,n)}}function Y2t(i,e,n){var r,s,a;return function(){var o=E_(this,i),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(i),E_(this,i))),o===u?null:o===r&&u===s?a:(s=u,a=e(r=o,l))}}function K2t(i,e){var n,r,s,a="style."+e,o="end."+a,l;return function(){var u=Zf(this,i),f=u.on,d=u.value[a]==null?l||(l=FW(e)):void 0;(f!==n||s!==d)&&(r=(n=f).copy()).on(o,s=d),u.on=r}}function Z2t(i,e,n){var r=(i+="")=="transform"?Wbt:BW;return e==null?this.styleTween(i,W2t(i,r)).on("end.style."+i,FW(i)):typeof e=="function"?this.styleTween(i,Y2t(i,r,jU(this,"style."+i,e))).each(K2t(this._id,i)):this.styleTween(i,X2t(i,r,e),n).on("end.style."+i,null)}function Q2t(i,e,n){return function(r){this.style.setProperty(i,e.call(this,r),n)}}function J2t(i,e,n){var r,s;function a(){var o=e.apply(this,arguments);return o!==s&&(r=(s=o)&&Q2t(i,o,n)),r}return a._value=e,a}function tRt(i,e,n){var r="style."+(i+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,J2t(i,e,n??""))}function eRt(i){return function(){this.textContent=i}}function nRt(i){return function(){var e=i(this);this.textContent=e??""}}function iRt(i){return this.tween("text",typeof i=="function"?nRt(jU(this,"text",i)):eRt(i==null?"":i+""))}function rRt(i){return function(e){this.textContent=i.call(this,e)}}function sRt(i){var e,n;function r(){var s=i.apply(this,arguments);return s!==n&&(e=(n=s)&&rRt(s)),e}return r._value=i,r}function aRt(i){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(i==null)return this.tween(e,null);if(typeof i!="function")throw new Error;return this.tween(e,sRt(i))}function oRt(){for(var i=this._name,e=this._id,n=VW(),r=this._groups,s=r.length,a=0;a<s;++a)for(var o=r[a],l=o.length,u,f=0;f<l;++f)if(u=o[f]){var d=Mc(u,e);aR(u,i,n,f,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ed(r,this._parents,i,n)}function lRt(){var i,e,n=this,r=n._id,s=n.size();return new Promise(function(a,o){var l={value:o},u={value:function(){--s===0&&a()}};n.each(function(){var f=Zf(this,r),d=f.on;d!==i&&(e=(i=d).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),f.on=e}),s===0&&a()})}var uRt=0;function Ed(i,e,n,r){this._groups=i,this._parents=e,this._name=n,this._id=r}function VW(){return++uRt}var Vh=sE.prototype;Ed.prototype={constructor:Ed,select:G2t,selectAll:j2t,selectChild:Vh.selectChild,selectChildren:Vh.selectChildren,filter:U2t,merge:k2t,selection:$2t,transition:oRt,call:Vh.call,nodes:Vh.nodes,node:Vh.node,size:Vh.size,empty:Vh.empty,each:Vh.each,on:F2t,attr:b2t,attrTween:w2t,style:Z2t,styleTween:tRt,text:iRt,textTween:aRt,remove:H2t,tween:d2t,delay:C2t,duration:I2t,ease:P2t,easeVarying:L2t,end:lRt,[Symbol.iterator]:Vh[Symbol.iterator]};function cRt(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var fRt={time:null,delay:0,duration:250,ease:cRt};function hRt(i,e){for(var n;!(n=i.__transition)||!(n=n[e]);)if(!(i=i.parentNode))throw new Error(`transition ${e} not found`);return n}function dRt(i){var e,n;i instanceof Ed?(e=i._id,i=i._name):(e=VW(),(n=fRt).time=QL(),i=i==null?null:i+"");for(var r=this._groups,s=r.length,a=0;a<s;++a)for(var o=r[a],l=o.length,u,f=0;f<l;++f)(u=o[f])&&aR(u,i,e,f,o,n||hRt(u,e));return new Ed(r,this._parents,i,e)}sE.prototype.interrupt=c2t;sE.prototype.transition=dRt;const Zw=i=>()=>i;function pRt(i,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:i,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function id(i,e,n){this.k=i,this.x=e,this.y=n}id.prototype={constructor:id,scale:function(i){return i===1?this:new id(this.k*i,this.x,this.y)},translate:function(i,e){return i===0&e===0?this:new id(this.k,this.x+this.k*i,this.y+this.k*e)},apply:function(i){return[i[0]*this.k+this.x,i[1]*this.k+this.y]},applyX:function(i){return i*this.k+this.x},applyY:function(i){return i*this.k+this.y},invert:function(i){return[(i[0]-this.x)/this.k,(i[1]-this.y)/this.k]},invertX:function(i){return(i-this.x)/this.k},invertY:function(i){return(i-this.y)/this.k},rescaleX:function(i){return i.copy().domain(i.range().map(this.invertX,this).map(i.invert,i))},rescaleY:function(i){return i.copy().domain(i.range().map(this.invertY,this).map(i.invert,i))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qU=new id(1,0,0);gf.prototype=id.prototype;function gf(i){for(;!i.__zoom;)if(!(i=i.parentNode))return qU;return i.__zoom}function mD(i){i.stopImmediatePropagation()}function Ox(i){i.preventDefault(),i.stopImmediatePropagation()}function mRt(i){return(!i.ctrlKey||i.type==="wheel")&&!i.button}function gRt(){var i=this;return i instanceof SVGElement?(i=i.ownerSVGElement||i,i.hasAttribute("viewBox")?(i=i.viewBox.baseVal,[[i.x,i.y],[i.x+i.width,i.y+i.height]]):[[0,0],[i.width.baseVal.value,i.height.baseVal.value]]):[[0,0],[i.clientWidth,i.clientHeight]]}function H6(){return this.__zoom||qU}function yRt(i){return-i.deltaY*(i.deltaMode===1?.05:i.deltaMode?1:.002)*(i.ctrlKey?10:1)}function vRt(){return navigator.maxTouchPoints||"ontouchstart"in this}function _Rt(i,e,n){var r=i.invertX(e[0][0])-n[0][0],s=i.invertX(e[1][0])-n[1][0],a=i.invertY(e[0][1])-n[0][1],o=i.invertY(e[1][1])-n[1][1];return i.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function bRt(){var i=mRt,e=gRt,n=_Rt,r=yRt,s=vRt,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Qbt,f=eE("start","zoom","end"),d,m,y,_=500,x=150,S=0,T=10;function b(X){X.property("__zoom",H6).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",O).filter(s).on("touchstart.zoom",F).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(X,J,q,W){var K=X.selection?X.selection():X;K.property("__zoom",H6),X!==K?I(X,J,q,W):K.interrupt().each(function(){k(this,arguments).event(W).start().zoom(null,typeof J=="function"?J.apply(this,arguments):J).end()})},b.scaleBy=function(X,J,q,W){b.scaleTo(X,function(){var K=this.__zoom.k,et=typeof J=="function"?J.apply(this,arguments):J;return K*et},q,W)},b.scaleTo=function(X,J,q,W){b.transform(X,function(){var K=e.apply(this,arguments),et=this.__zoom,Q=q==null?A(K):typeof q=="function"?q.apply(this,arguments):q,dt=et.invert(Q),yt=typeof J=="function"?J.apply(this,arguments):J;return n(R(M(et,yt),Q,dt),K,o)},q,W)},b.translateBy=function(X,J,q,W){b.transform(X,function(){return n(this.__zoom.translate(typeof J=="function"?J.apply(this,arguments):J,typeof q=="function"?q.apply(this,arguments):q),e.apply(this,arguments),o)},null,W)},b.translateTo=function(X,J,q,W,K){b.transform(X,function(){var et=e.apply(this,arguments),Q=this.__zoom,dt=W==null?A(et):typeof W=="function"?W.apply(this,arguments):W;return n(qU.translate(dt[0],dt[1]).scale(Q.k).translate(typeof J=="function"?-J.apply(this,arguments):-J,typeof q=="function"?-q.apply(this,arguments):-q),et,o)},W,K)};function M(X,J){return J=Math.max(a[0],Math.min(a[1],J)),J===X.k?X:new id(J,X.x,X.y)}function R(X,J,q){var W=J[0]-q[0]*X.k,K=J[1]-q[1]*X.k;return W===X.x&&K===X.y?X:new id(X.k,W,K)}function A(X){return[(+X[0][0]+ +X[1][0])/2,(+X[0][1]+ +X[1][1])/2]}function I(X,J,q,W){X.on("start.zoom",function(){k(this,arguments).event(W).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(W).end()}).tween("zoom",function(){var K=this,et=arguments,Q=k(K,et).event(W),dt=e.apply(K,et),yt=q==null?A(dt):typeof q=="function"?q.apply(K,et):q,xt=Math.max(dt[1][0]-dt[0][0],dt[1][1]-dt[0][1]),nt=K.__zoom,ht=typeof J=="function"?J.apply(K,et):J,ft=u(nt.invert(yt).concat(xt/nt.k),ht.invert(yt).concat(xt/ht.k));return function(gt){if(gt===1)gt=ht;else{var wt=ft(gt),Kt=xt/wt[2];gt=new id(Kt,yt[0]-wt[0]*Kt,yt[1]-wt[1]*Kt)}Q.zoom(null,gt)}})}function k(X,J,q){return!q&&X.__zooming||new N(X,J)}function N(X,J){this.that=X,this.args=J,this.active=0,this.sourceEvent=null,this.extent=e.apply(X,J),this.taps=0}N.prototype={event:function(X){return X&&(this.sourceEvent=X),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(X,J){return this.mouse&&X!=="mouse"&&(this.mouse[1]=J.invert(this.mouse[0])),this.touch0&&X!=="touch"&&(this.touch0[1]=J.invert(this.touch0[0])),this.touch1&&X!=="touch"&&(this.touch1[1]=J.invert(this.touch1[0])),this.that.__zoom=J,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(X){var J=bu(this.that).datum();f.call(X,this.that,new pRt(X,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:f}),J)}};function L(X,...J){if(!i.apply(this,arguments))return;var q=k(this,J).event(X),W=this.__zoom,K=Math.max(a[0],Math.min(a[1],W.k*Math.pow(2,r.apply(this,arguments)))),et=bf(X);if(q.wheel)(q.mouse[0][0]!==et[0]||q.mouse[0][1]!==et[1])&&(q.mouse[1]=W.invert(q.mouse[0]=et)),clearTimeout(q.wheel);else{if(W.k===K)return;q.mouse=[et,W.invert(et)],RA(this),q.start()}Ox(X),q.wheel=setTimeout(Q,x),q.zoom("mouse",n(R(M(W,K),q.mouse[0],q.mouse[1]),q.extent,o));function Q(){q.wheel=null,q.end()}}function U(X,...J){if(y||!i.apply(this,arguments))return;var q=X.currentTarget,W=k(this,J,!0).event(X),K=bu(X.view).on("mousemove.zoom",yt,!0).on("mouseup.zoom",xt,!0),et=bf(X,q),Q=X.clientX,dt=X.clientY;UW(X.view),mD(X),W.mouse=[et,this.__zoom.invert(et)],RA(this),W.start();function yt(nt){if(Ox(nt),!W.moved){var ht=nt.clientX-Q,ft=nt.clientY-dt;W.moved=ht*ht+ft*ft>S}W.event(nt).zoom("mouse",n(R(W.that.__zoom,W.mouse[0]=bf(nt,q),W.mouse[1]),W.extent,o))}function xt(nt){K.on("mousemove.zoom mouseup.zoom",null),kW(nt.view,W.moved),Ox(nt),W.event(nt).end()}}function O(X,...J){if(i.apply(this,arguments)){var q=this.__zoom,W=bf(X.changedTouches?X.changedTouches[0]:X,this),K=q.invert(W),et=q.k*(X.shiftKey?.5:2),Q=n(R(M(q,et),W,K),e.apply(this,J),o);Ox(X),l>0?bu(this).transition().duration(l).call(I,Q,W,X):bu(this).call(b.transform,Q,W,X)}}function F(X,...J){if(i.apply(this,arguments)){var q=X.touches,W=q.length,K=k(this,J,X.changedTouches.length===W).event(X),et,Q,dt,yt;for(mD(X),Q=0;Q<W;++Q)dt=q[Q],yt=bf(dt,this),yt=[yt,this.__zoom.invert(yt),dt.identifier],K.touch0?!K.touch1&&K.touch0[2]!==yt[2]&&(K.touch1=yt,K.taps=0):(K.touch0=yt,et=!0,K.taps=1+!!d);d&&(d=clearTimeout(d)),et&&(K.taps<2&&(m=yt[0],d=setTimeout(function(){d=null},_)),RA(this),K.start())}}function H(X,...J){if(this.__zooming){var q=k(this,J).event(X),W=X.changedTouches,K=W.length,et,Q,dt,yt;for(Ox(X),et=0;et<K;++et)Q=W[et],dt=bf(Q,this),q.touch0&&q.touch0[2]===Q.identifier?q.touch0[0]=dt:q.touch1&&q.touch1[2]===Q.identifier&&(q.touch1[0]=dt);if(Q=q.that.__zoom,q.touch1){var xt=q.touch0[0],nt=q.touch0[1],ht=q.touch1[0],ft=q.touch1[1],gt=(gt=ht[0]-xt[0])*gt+(gt=ht[1]-xt[1])*gt,wt=(wt=ft[0]-nt[0])*wt+(wt=ft[1]-nt[1])*wt;Q=M(Q,Math.sqrt(gt/wt)),dt=[(xt[0]+ht[0])/2,(xt[1]+ht[1])/2],yt=[(nt[0]+ft[0])/2,(nt[1]+ft[1])/2]}else if(q.touch0)dt=q.touch0[0],yt=q.touch0[1];else return;q.zoom("touch",n(R(Q,dt,yt),q.extent,o))}}function V(X,...J){if(this.__zooming){var q=k(this,J).event(X),W=X.changedTouches,K=W.length,et,Q;for(mD(X),y&&clearTimeout(y),y=setTimeout(function(){y=null},_),et=0;et<K;++et)Q=W[et],q.touch0&&q.touch0[2]===Q.identifier?delete q.touch0:q.touch1&&q.touch1[2]===Q.identifier&&delete q.touch1;if(q.touch1&&!q.touch0&&(q.touch0=q.touch1,delete q.touch1),q.touch0)q.touch0[1]=this.__zoom.invert(q.touch0[0]);else if(q.end(),q.taps===2&&(Q=bf(Q,this),Math.hypot(m[0]-Q[0],m[1]-Q[1])<T)){var dt=bu(this).on("dblclick.zoom");dt&&dt.apply(this,arguments)}}}return b.wheelDelta=function(X){return arguments.length?(r=typeof X=="function"?X:Zw(+X),b):r},b.filter=function(X){return arguments.length?(i=typeof X=="function"?X:Zw(!!X),b):i},b.touchable=function(X){return arguments.length?(s=typeof X=="function"?X:Zw(!!X),b):s},b.extent=function(X){return arguments.length?(e=typeof X=="function"?X:Zw([[+X[0][0],+X[0][1]],[+X[1][0],+X[1][1]]]),b):e},b.scaleExtent=function(X){return arguments.length?(a[0]=+X[0],a[1]=+X[1],b):[a[0],a[1]]},b.translateExtent=function(X){return arguments.length?(o[0][0]=+X[0][0],o[1][0]=+X[1][0],o[0][1]=+X[0][1],o[1][1]=+X[1][1],b):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},b.constrain=function(X){return arguments.length?(n=X,b):n},b.duration=function(X){return arguments.length?(l=+X,b):l},b.interpolate=function(X){return arguments.length?(u=X,b):u},b.on=function(){var X=f.on.apply(f,arguments);return X===f?b:X},b.clickDistance=function(X){return arguments.length?(S=(X=+X)*X,b):Math.sqrt(S)},b.tapDistance=function(X){return arguments.length?(T=+X,b):T},b}var xRt="Expected a function";function SRt(i,e,n){var r=!0,s=!0;if(typeof i!="function")throw new TypeError(xRt);return tC(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),mq(i,e,{leading:r,maxWait:e,trailing:s})}var sy=Object.freeze({Linear:Object.freeze({None:function(i){return i},In:function(i){return i},Out:function(i){return i},InOut:function(i){return i}}),Quadratic:Object.freeze({In:function(i){return i*i},Out:function(i){return i*(2-i)},InOut:function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}}),Cubic:Object.freeze({In:function(i){return i*i*i},Out:function(i){return--i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)}}),Quartic:Object.freeze({In:function(i){return i*i*i*i},Out:function(i){return 1- --i*i*i*i},InOut:function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)}}),Quintic:Object.freeze({In:function(i){return i*i*i*i*i},Out:function(i){return--i*i*i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)}}),Sinusoidal:Object.freeze({In:function(i){return 1-Math.sin((1-i)*Math.PI/2)},Out:function(i){return Math.sin(i*Math.PI/2)},InOut:function(i){return .5*(1-Math.sin(Math.PI*(.5-i)))}}),Exponential:Object.freeze({In:function(i){return i===0?0:Math.pow(1024,i-1)},Out:function(i){return i===1?1:1-Math.pow(2,-10*i)},InOut:function(i){return i===0?0:i===1?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(-Math.pow(2,-10*(i-1))+2)}}),Circular:Object.freeze({In:function(i){return 1-Math.sqrt(1-i*i)},Out:function(i){return Math.sqrt(1- --i*i)},InOut:function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)}}),Elastic:Object.freeze({In:function(i){return i===0?0:i===1?1:-Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI)},Out:function(i){return i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i-.1)*5*Math.PI)+1},InOut:function(i){return i===0?0:i===1?1:(i*=2,i<1?-.5*Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI):.5*Math.pow(2,-10*(i-1))*Math.sin((i-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(i){var e=1.70158;return i===1?1:i*i*((e+1)*i-e)},Out:function(i){var e=1.70158;return i===0?0:--i*i*((e+1)*i+e)+1},InOut:function(i){var e=2.5949095;return(i*=2)<1?.5*(i*i*((e+1)*i-e)):.5*((i-=2)*i*((e+1)*i+e)+2)}}),Bounce:Object.freeze({In:function(i){return 1-sy.Bounce.Out(1-i)},Out:function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},InOut:function(i){return i<.5?sy.Bounce.In(i*2)*.5:sy.Bounce.Out(i*2-1)*.5+.5}}),generatePow:function(i){return i===void 0&&(i=4),i=i<Number.EPSILON?Number.EPSILON:i,i=i>1e4?1e4:i,{In:function(e){return Math.pow(e,i)},Out:function(e){return 1-Math.pow(1-e,i)},InOut:function(e){return e<.5?Math.pow(e*2,i)/2:(1-Math.pow(2-e*2,i))/2+.5}}}}),Kx=function(){return performance.now()},HW=function(){function i(){this._tweens={},this._tweensAddedDuringUpdate={}}return i.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(n){return e._tweens[n]})},i.prototype.removeAll=function(){this._tweens={}},i.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},i.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},i.prototype.update=function(e,n){e===void 0&&(e=Kx()),n===void 0&&(n=!1);var r=Object.keys(this._tweens);if(r.length===0)return!1;for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<r.length;s++){var a=this._tweens[r[s]],o=!n;a&&a.update(e,o)===!1&&!n&&delete this._tweens[r[s]]}r=Object.keys(this._tweensAddedDuringUpdate)}return!0},i}(),AN={Linear:function(i,e){var n=i.length-1,r=n*e,s=Math.floor(r),a=AN.Utils.Linear;return e<0?a(i[0],i[1],r):e>1?a(i[n],i[n-1],n-r):a(i[s],i[s+1>n?n:s+1],r-s)},Utils:{Linear:function(i,e,n){return(e-i)*n+i}}},GW=function(){function i(){}return i.nextId=function(){return i._nextId++},i._nextId=0,i}(),MN=new HW,G6=function(){function i(e,n){n===void 0&&(n=MN),this._object=e,this._group=n,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=sy.Linear.None,this._interpolationFunction=AN.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=GW.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return i.prototype.getId=function(){return this._id},i.prototype.isPlaying=function(){return this._isPlaying},i.prototype.isPaused=function(){return this._isPaused},i.prototype.getDuration=function(){return this._duration},i.prototype.to=function(e,n){if(n===void 0&&(n=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=n<0?0:n,this},i.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},i.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},i.prototype.start=function(e,n){if(e===void 0&&(e=Kx()),n===void 0&&(n=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var r in this._valuesStartRepeat)this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||n){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var a in this._valuesEnd)s[a]=this._valuesEnd[a];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n)}return this},i.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},i.prototype._setupProperties=function(e,n,r,s,a){for(var o in r){var l=e[o],u=Array.isArray(l),f=u?"array":typeof l,d=!u&&Array.isArray(r[o]);if(!(f==="undefined"||f==="function")){if(d){var m=r[o];if(m.length===0)continue;for(var y=[l],_=0,x=m.length;_<x;_+=1){var S=this._handleRelativeValue(l,m[_]);if(isNaN(S)){d=!1,console.warn("Found invalid interpolation list. Skipping.");break}y.push(S)}d&&(r[o]=y)}if((f==="object"||u)&&l&&!d){n[o]=u?[]:{};var T=l;for(var b in T)n[o][b]=T[b];s[o]=u?[]:{};var m=r[o];if(!this._isDynamic){var M={};for(var b in m)M[b]=m[b];r[o]=m=M}this._setupProperties(T,n[o],m,s[o],a)}else(typeof n[o]>"u"||a)&&(n[o]=l),u||(n[o]*=1),d?s[o]=r[o].slice().reverse():s[o]=n[o]||0}}},i.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},i.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},i.prototype.pause=function(e){return e===void 0&&(e=Kx()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},i.prototype.resume=function(e){return e===void 0&&(e=Kx()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},i.prototype.stopChainedTweens=function(){for(var e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this},i.prototype.group=function(e){return e===void 0&&(e=MN),this._group=e,this},i.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},i.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},i.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},i.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},i.prototype.easing=function(e){return e===void 0&&(e=sy.Linear.None),this._easingFunction=e,this},i.prototype.interpolation=function(e){return e===void 0&&(e=AN.Linear),this._interpolationFunction=e,this},i.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._chainedTweens=e,this},i.prototype.onStart=function(e){return this._onStartCallback=e,this},i.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},i.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},i.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},i.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},i.prototype.onStop=function(e){return this._onStopCallback=e,this},i.prototype.update=function(e,n){var r=this,s;if(e===void 0&&(e=Kx()),n===void 0&&(n=!0),this._isPaused)return!0;var a,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>o)return!1;n&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var l=e-this._startTime,u=this._duration+((s=this._repeatDelayTime)!==null&&s!==void 0?s:this._delayTime),f=this._duration+this._repeat*u,d=function(){if(r._duration===0||l>f)return 1;var T=Math.trunc(l/u),b=l-T*u,M=Math.min(b/r._duration,1);return M===0&&l===r._duration?1:M},m=d(),y=this._easingFunction(m);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,y),this._onUpdateCallback&&this._onUpdateCallback(this._object,m),this._duration===0||l>=this._duration)if(this._repeat>0){var _=Math.min(Math.trunc((l-this._duration)/u)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=_);for(a in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[a]=="string"&&(this._valuesStartRepeat[a]=this._valuesStartRepeat[a]+parseFloat(this._valuesEnd[a])),this._yoyo&&this._swapEndStartRepeatValues(a),this._valuesStart[a]=this._valuesStartRepeat[a];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=u*_,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var x=0,S=this._chainedTweens.length;x<S;x++)this._chainedTweens[x].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},i.prototype._updateProperties=function(e,n,r,s){for(var a in r)if(n[a]!==void 0){var o=n[a]||0,l=r[a],u=Array.isArray(e[a]),f=Array.isArray(l),d=!u&&f;d?e[a]=this._interpolationFunction(l,s):typeof l=="object"&&l?this._updateProperties(e[a],o,l,s):(l=this._handleRelativeValue(o,l),typeof l=="number"&&(e[a]=o+(l-o)*s))}},i.prototype._handleRelativeValue=function(e,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?e+parseFloat(n):parseFloat(n)},i.prototype._swapEndStartRepeatValues=function(e){var n=this._valuesStartRepeat[e],r=this._valuesEnd[e];typeof r=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(r):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n},i}();GW.nextId;var Wf=MN;Wf.getAll.bind(Wf);Wf.removeAll.bind(Wf);Wf.add.bind(Wf);Wf.remove.bind(Wf);Wf.update.bind(Wf);function CN(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=Array(e);n<e;n++)r[n]=i[n];return r}function ERt(i){if(Array.isArray(i))return CN(i)}function jW(i,e,n){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function TRt(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function wRt(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function pu(i,e){return i.get(jW(i,e))}function j6(i,e,n){TRt(i,e),e.set(i,n)}function q6(i,e,n){return i.set(jW(i,e),n),n}function ARt(i,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,DRt(r.key),r)}}function MRt(i,e,n){return e&&ARt(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function CRt(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function RRt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ORt(i){return ERt(i)||CRt(i)||PRt(i)||RRt()}function IRt(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var r=n.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function DRt(i){var e=IRt(i,"string");return typeof e=="symbol"?e:e+""}function PRt(i,e){if(i){if(typeof i=="string")return CN(i,e);var n={}.toString.call(i).slice(8,-1);return n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set"?Array.from(i):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?CN(i,e):void 0}}var NRt=123,LRt=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},qW=function(e,n,r){return(e<<16)+(n<<8)+r},URt=function(e){var n=We(e).toRgb(),r=n.r,s=n.g,a=n.b;return qW(r,s,a)},$6=function(e,n){return e*NRt%Math.pow(2,n)},Mg=new WeakMap,Hh=new WeakMap,kRt=function(){function i(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;wRt(this,i),j6(this,Mg,void 0),j6(this,Hh,void 0),q6(Hh,this,e),this.reset()}return MRt(i,[{key:"reset",value:function(){q6(Mg,this,["__reserved for background__"])}},{key:"register",value:function(n){if(pu(Mg,this).length>=Math.pow(2,24-pu(Hh,this)))return null;var r=pu(Mg,this).length,s=$6(r,pu(Hh,this)),a=LRt(r+(s<<24-pu(Hh,this)));return pu(Mg,this).push(n),a}},{key:"lookup",value:function(n){if(!n)return null;var r=typeof n=="string"?URt(n):qW.apply(void 0,ORt(n));if(!r)return null;var s=r&Math.pow(2,24-pu(Hh,this))-1,a=r>>24-pu(Hh,this)&Math.pow(2,pu(Hh,this))-1;return $6(s,pu(Hh,this))!==a||s>=pu(Mg,this).length?null:pu(Mg,this)[s]}}])}(),aE,br,$W,WW,Ug,W6,XW,YW,KW,$U,RN,ON,SS={},ZW=[],zRt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,oR=Array.isArray;function Rf(i,e){for(var n in e)i[n]=e[n];return i}function WU(i){i&&i.parentNode&&i.parentNode.removeChild(i)}function BRt(i,e,n){var r,s,a,o={};for(a in e)a=="key"?r=e[a]:a=="ref"?s=e[a]:o[a]=e[a];if(arguments.length>2&&(o.children=arguments.length>3?aE.call(arguments,2):n),typeof i=="function"&&i.defaultProps!=null)for(a in i.defaultProps)o[a]==null&&(o[a]=i.defaultProps[a]);return T1(i,o,r,s,null)}function T1(i,e,n,r,s){var a={type:i,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++$W,__i:-1,__u:0};return s==null&&br.vnode!=null&&br.vnode(a),a}function lR(i){return i.children}function OA(i,e){this.props=i,this.context=e}function T_(i,e){if(e==null)return i.__?T_(i.__,i.__i+1):null;for(var n;e<i.__k.length;e++)if((n=i.__k[e])!=null&&n.__e!=null)return n.__e;return typeof i.type=="function"?T_(i):null}function QW(i){var e,n;if((i=i.__)!=null&&i.__c!=null){for(i.__e=i.__c.base=null,e=0;e<i.__k.length;e++)if((n=i.__k[e])!=null&&n.__e!=null){i.__e=i.__c.base=n.__e;break}return QW(i)}}function X6(i){(!i.__d&&(i.__d=!0)&&Ug.push(i)&&!SC.__r++||W6!=br.debounceRendering)&&((W6=br.debounceRendering)||XW)(SC)}function SC(){for(var i,e,n,r,s,a,o,l=1;Ug.length;)Ug.length>l&&Ug.sort(YW),i=Ug.shift(),l=Ug.length,i.__d&&(n=void 0,s=(r=(e=i).__v).__e,a=[],o=[],e.__P&&((n=Rf({},r)).__v=r.__v+1,br.vnode&&br.vnode(n),XU(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[s]:null,a,s??T_(r),!!(32&r.__u),o),n.__v=r.__v,n.__.__k[n.__i]=n,eX(a,n,o),n.__e!=s&&QW(n)));SC.__r=0}function JW(i,e,n,r,s,a,o,l,u,f,d){var m,y,_,x,S,T,b=r&&r.__k||ZW,M=e.length;for(u=FRt(n,e,b,u,M),m=0;m<M;m++)(_=n.__k[m])!=null&&(y=_.__i==-1?SS:b[_.__i]||SS,_.__i=m,T=XU(i,_,y,s,a,o,l,u,f,d),x=_.__e,_.ref&&y.ref!=_.ref&&(y.ref&&YU(y.ref,null,_),d.push(_.ref,_.__c||x,_)),S==null&&x!=null&&(S=x),4&_.__u||y.__k===_.__k?u=tX(_,u,i):typeof _.type=="function"&&T!==void 0?u=T:x&&(u=x.nextSibling),_.__u&=-7);return n.__e=S,u}function FRt(i,e,n,r,s){var a,o,l,u,f,d=n.length,m=d,y=0;for(i.__k=new Array(s),a=0;a<s;a++)(o=e[a])!=null&&typeof o!="boolean"&&typeof o!="function"?(u=a+y,(o=i.__k[a]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?T1(null,o,null,null,null):oR(o)?T1(lR,{children:o},null,null,null):o.constructor==null&&o.__b>0?T1(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=i,o.__b=i.__b+1,l=null,(f=o.__i=VRt(o,n,u,m))!=-1&&(m--,(l=n[f])&&(l.__u|=2)),l==null||l.__v==null?(f==-1&&(s>d?y--:s<d&&y++),typeof o.type!="function"&&(o.__u|=4)):f!=u&&(f==u-1?y--:f==u+1?y++:(f>u?y--:y++,o.__u|=4))):i.__k[a]=null;if(m)for(a=0;a<d;a++)(l=n[a])!=null&&(2&l.__u)==0&&(l.__e==r&&(r=T_(l)),iX(l,l));return r}function tX(i,e,n){var r,s;if(typeof i.type=="function"){for(r=i.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=i,e=tX(r[s],e,n));return e}i.__e!=e&&(e&&i.type&&!n.contains(e)&&(e=T_(i)),n.insertBefore(i.__e,e||null),e=i.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function VRt(i,e,n,r){var s,a,o=i.key,l=i.type,u=e[n];if(u===null&&i.key==null||u&&o==u.key&&l==u.type&&(2&u.__u)==0)return n;if(r>(u!=null&&(2&u.__u)==0?1:0))for(s=n-1,a=n+1;s>=0||a<e.length;){if(s>=0){if((u=e[s])&&(2&u.__u)==0&&o==u.key&&l==u.type)return s;s--}if(a<e.length){if((u=e[a])&&(2&u.__u)==0&&o==u.key&&l==u.type)return a;a++}}return-1}function Y6(i,e,n){e[0]=="-"?i.setProperty(e,n??""):i[e]=n==null?"":typeof n!="number"||zRt.test(e)?n:n+"px"}function Qw(i,e,n,r,s){var a;t:if(e=="style")if(typeof n=="string")i.style.cssText=n;else{if(typeof r=="string"&&(i.style.cssText=r=""),r)for(e in r)n&&e in n||Y6(i.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||Y6(i.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")a=e!=(e=e.replace(KW,"$1")),e=e.toLowerCase()in i||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),i.l||(i.l={}),i.l[e+a]=n,n?r?n.u=r.u:(n.u=$U,i.addEventListener(e,a?ON:RN,a)):i.removeEventListener(e,a?ON:RN,a);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in i)try{i[e]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?i.removeAttribute(e):i.setAttribute(e,e=="popover"&&n==1?"":n))}}function K6(i){return function(e){if(this.l){var n=this.l[e.type+i];if(e.t==null)e.t=$U++;else if(e.t<n.u)return;return n(br.event?br.event(e):e)}}}function XU(i,e,n,r,s,a,o,l,u,f){var d,m,y,_,x,S,T,b,M,R,A,I,k,N,L,U,O,F=e.type;if(e.constructor!=null)return null;128&n.__u&&(u=!!(32&n.__u),a=[l=e.__e=n.__e]),(d=br.__b)&&d(e);t:if(typeof F=="function")try{if(b=e.props,M="prototype"in F&&F.prototype.render,R=(d=F.contextType)&&r[d.__c],A=d?R?R.props.value:d.__:r,n.__c?T=(m=e.__c=n.__c).__=m.__E:(M?e.__c=m=new F(b,A):(e.__c=m=new OA(b,A),m.constructor=F,m.render=GRt),R&&R.sub(m),m.props=b,m.state||(m.state={}),m.context=A,m.__n=r,y=m.__d=!0,m.__h=[],m._sb=[]),M&&m.__s==null&&(m.__s=m.state),M&&F.getDerivedStateFromProps!=null&&(m.__s==m.state&&(m.__s=Rf({},m.__s)),Rf(m.__s,F.getDerivedStateFromProps(b,m.__s))),_=m.props,x=m.state,m.__v=e,y)M&&F.getDerivedStateFromProps==null&&m.componentWillMount!=null&&m.componentWillMount(),M&&m.componentDidMount!=null&&m.__h.push(m.componentDidMount);else{if(M&&F.getDerivedStateFromProps==null&&b!==_&&m.componentWillReceiveProps!=null&&m.componentWillReceiveProps(b,A),!m.__e&&m.shouldComponentUpdate!=null&&m.shouldComponentUpdate(b,m.__s,A)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(m.props=b,m.state=m.__s,m.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(H){H&&(H.__=e)}),I=0;I<m._sb.length;I++)m.__h.push(m._sb[I]);m._sb=[],m.__h.length&&o.push(m);break t}m.componentWillUpdate!=null&&m.componentWillUpdate(b,m.__s,A),M&&m.componentDidUpdate!=null&&m.__h.push(function(){m.componentDidUpdate(_,x,S)})}if(m.context=A,m.props=b,m.__P=i,m.__e=!1,k=br.__r,N=0,M){for(m.state=m.__s,m.__d=!1,k&&k(e),d=m.render(m.props,m.state,m.context),L=0;L<m._sb.length;L++)m.__h.push(m._sb[L]);m._sb=[]}else do m.__d=!1,k&&k(e),d=m.render(m.props,m.state,m.context),m.state=m.__s;while(m.__d&&++N<25);m.state=m.__s,m.getChildContext!=null&&(r=Rf(Rf({},r),m.getChildContext())),M&&!y&&m.getSnapshotBeforeUpdate!=null&&(S=m.getSnapshotBeforeUpdate(_,x)),U=d,d!=null&&d.type===lR&&d.key==null&&(U=nX(d.props.children)),l=JW(i,oR(U)?U:[U],e,n,r,s,a,o,l,u,f),m.base=e.__e,e.__u&=-161,m.__h.length&&o.push(m),T&&(m.__E=m.__=null)}catch(H){if(e.__v=null,u||a!=null)if(H.then){for(e.__u|=u?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;a[a.indexOf(l)]=null,e.__e=l}else for(O=a.length;O--;)WU(a[O]);else e.__e=n.__e,e.__k=n.__k;br.__e(H,e,n)}else a==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):l=e.__e=HRt(n.__e,e,n,r,s,a,o,u,f);return(d=br.diffed)&&d(e),128&e.__u?void 0:l}function eX(i,e,n){for(var r=0;r<n.length;r++)YU(n[r],n[++r],n[++r]);br.__c&&br.__c(e,i),i.some(function(s){try{i=s.__h,s.__h=[],i.some(function(a){a.call(s)})}catch(a){br.__e(a,s.__v)}})}function nX(i){return typeof i!="object"||i==null||i.__b&&i.__b>0?i:oR(i)?i.map(nX):Rf({},i)}function HRt(i,e,n,r,s,a,o,l,u){var f,d,m,y,_,x,S,T=n.props,b=e.props,M=e.type;if(M=="svg"?s="http://www.w3.org/2000/svg":M=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),a!=null){for(f=0;f<a.length;f++)if((_=a[f])&&"setAttribute"in _==!!M&&(M?_.localName==M:_.nodeType==3)){i=_,a[f]=null;break}}if(i==null){if(M==null)return document.createTextNode(b);i=document.createElementNS(s,M,b.is&&b),l&&(br.__m&&br.__m(e,a),l=!1),a=null}if(M==null)T===b||l&&i.data==b||(i.data=b);else{if(a=a&&aE.call(i.childNodes),T=n.props||SS,!l&&a!=null)for(T={},f=0;f<i.attributes.length;f++)T[(_=i.attributes[f]).name]=_.value;for(f in T)if(_=T[f],f!="children"){if(f=="dangerouslySetInnerHTML")m=_;else if(!(f in b)){if(f=="value"&&"defaultValue"in b||f=="checked"&&"defaultChecked"in b)continue;Qw(i,f,null,_,s)}}for(f in b)_=b[f],f=="children"?y=_:f=="dangerouslySetInnerHTML"?d=_:f=="value"?x=_:f=="checked"?S=_:l&&typeof _!="function"||T[f]===_||Qw(i,f,_,T[f],s);if(d)l||m&&(d.__html==m.__html||d.__html==i.innerHTML)||(i.innerHTML=d.__html),e.__k=[];else if(m&&(i.innerHTML=""),JW(e.type=="template"?i.content:i,oR(y)?y:[y],e,n,r,M=="foreignObject"?"http://www.w3.org/1999/xhtml":s,a,o,a?a[0]:n.__k&&T_(n,0),l,u),a!=null)for(f=a.length;f--;)WU(a[f]);l||(f="value",M=="progress"&&x==null?i.removeAttribute("value"):x!=null&&(x!==i[f]||M=="progress"&&!x||M=="option"&&x!=T[f])&&Qw(i,f,x,T[f],s),f="checked",S!=null&&S!=i[f]&&Qw(i,f,S,T[f],s))}return i}function YU(i,e,n){try{if(typeof i=="function"){var r=typeof i.__u=="function";r&&i.__u(),r&&e==null||(i.__u=i(e))}else i.current=e}catch(s){br.__e(s,n)}}function iX(i,e,n){var r,s;if(br.unmount&&br.unmount(i),(r=i.ref)&&(r.current&&r.current!=i.__e||YU(r,null,e)),(r=i.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){br.__e(a,e)}r.base=r.__P=null}if(r=i.__k)for(s=0;s<r.length;s++)r[s]&&iX(r[s],e,n||typeof i.type!="function");n||WU(i.__e),i.__c=i.__=i.__e=void 0}function GRt(i,e,n){return this.constructor(i,n)}function jRt(i,e,n){var r,s,a,o;e==document&&(e=document.documentElement),br.__&&br.__(i,e),s=(r=!1)?null:e.__k,a=[],o=[],XU(e,i=e.__k=BRt(lR,null,[i]),s||SS,SS,e.namespaceURI,s?null:e.firstChild?aE.call(e.childNodes):null,a,s?s.__e:e.firstChild,r,o),eX(a,i,o)}function rX(i,e,n){var r,s,a,o,l=Rf({},i.props);for(a in i.type&&i.type.defaultProps&&(o=i.type.defaultProps),e)a=="key"?r=e[a]:a=="ref"?s=e[a]:l[a]=e[a]==null&&o!=null?o[a]:e[a];return arguments.length>2&&(l.children=arguments.length>3?aE.call(arguments,2):n),T1(i.type,l,r||i.key,s||i.ref,null)}aE=ZW.slice,br={__e:function(i,e,n,r){for(var s,a,o;e=e.__;)if((s=e.__c)&&!s.__)try{if((a=s.constructor)&&a.getDerivedStateFromError!=null&&(s.setState(a.getDerivedStateFromError(i)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(i,r||{}),o=s.__d),o)return s.__E=s}catch(l){i=l}throw i}},$W=0,WW=function(i){return i!=null&&i.constructor==null},OA.prototype.setState=function(i,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Rf({},this.state),typeof i=="function"&&(i=i(Rf({},n),this.props)),i&&Rf(n,i),i!=null&&this.__v&&(e&&this._sb.push(e),X6(this))},OA.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),X6(this))},OA.prototype.render=lR,Ug=[],XW=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,YW=function(i,e){return i.__v.__b-e.__v.__b},SC.__r=0,KW=/(PointerCapture)$|Capture$/i,$U=0,RN=K6(!1),ON=K6(!0);function Z6(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=Array(e);n<e;n++)r[n]=i[n];return r}function qRt(i){if(Array.isArray(i))return i}function $Rt(i,e,n){return(e=QRt(e))in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function WRt(i,e){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,f=!1;try{if(a=(n=n.call(i)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(d){f=!0,s=d}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw s}}return l}}function XRt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q6(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),n.push.apply(n,r)}return n}function YRt(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q6(Object(n),!0).forEach(function(r){$Rt(i,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):Q6(Object(n)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(n,r))})}return i}function KRt(i,e){return qRt(i)||WRt(i,e)||JRt(i,e)||XRt()}function ZRt(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var r=n.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function QRt(i){var e=ZRt(i,"string");return typeof e=="symbol"?e:e+""}function EC(i){"@babel/helpers - typeof";return EC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EC(i)}function JRt(i,e){if(i){if(typeof i=="string")return Z6(i,e);var n={}.toString.call(i).slice(8,-1);return n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set"?Array.from(i):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z6(i,e):void 0}}var IN=function(e){if(EC(e)!=="object")return e;var n=rX(e);if(n.props){var r;n.props=YRt({},n.props),n!=null&&(r=n.props)!==null&&r!==void 0&&r.children&&(n.props.children=Array.isArray(n.props.children)?n.props.children.map(IN):IN(n.props.children))}return n},tOt=function(e){return WW(rX(e))},eOt=function(e,n){delete n.__k,jRt(IN(e),n)};function nOt(i,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=i:s.appendChild(document.createTextNode(i))}}var iOt=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;nOt(iOt);var rOt=q2({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.style,a=s===void 0?{}:s,o=!!e&&EC(e)==="object"&&!!e.node&&typeof e.node=="function",l=bu(o?e.node():e);l.style("position")==="static"&&l.style("position","relative"),n.tooltipEl=l.append("div").attr("class","float-tooltip-kap"),Object.entries(a).forEach(function(f){var d=KRt(f,2),m=d[0],y=d[1];return n.tooltipEl.style(m,y)}),n.tooltipEl.style("left","-10000px").style("display","none");var u="tooltip-".concat(Math.round(Math.random()*1e12));n.mouseInside=!1,l.on("mousemove.".concat(u),function(f){n.mouseInside=!0;var d=bf(f),m=l.node(),y=m.offsetWidth,_=m.offsetHeight,x=[n.offsetX===null||n.offsetX===void 0?"-".concat(d[0]/y*100,"%"):typeof n.offsetX=="number"?"calc(-50% + ".concat(n.offsetX,"px)"):n.offsetX,n.offsetY===null||n.offsetY===void 0?_>130&&_-d[1]<100?"calc(-100% - 6px)":"21px":typeof n.offsetY=="number"?n.offsetY<0?"calc(-100% - ".concat(Math.abs(n.offsetY),"px)"):"".concat(n.offsetY,"px"):n.offsetY];n.tooltipEl.style("left",d[0]+"px").style("top",d[1]+"px").style("transform","translate(".concat(x.join(","),")")),n.content&&n.tooltipEl.style("display","inline")}),l.on("mouseover.".concat(u),function(){n.mouseInside=!0,n.content&&n.tooltipEl.style("display","inline")}),l.on("mouseout.".concat(u),function(){n.mouseInside=!1,n.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):tOt(e.content)?(e.tooltipEl.text(""),eOt(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});const{abs:Ix,cos:Gh,sin:g0,acos:sOt,atan2:Dx,sqrt:Ap,pow:gu}=Math;function Px(i){return i<0?-gu(-i,1/3):gu(i,1/3)}const sX=Math.PI,Jw=2*sX,Mp=sX/2,aOt=1e-6,gD=Number.MAX_SAFE_INTEGER||9007199254740991,yD=Number.MIN_SAFE_INTEGER||-9007199254740991,oOt={x:0,y:0,z:0},_e={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(i,e){const n=e(i);let r=n.x*n.x+n.y*n.y;return typeof n.z<"u"&&(r+=n.z*n.z),Ap(r)},compute:function(i,e,n){if(i===0)return e[0].t=0,e[0];const r=e.length-1;if(i===1)return e[r].t=1,e[r];const s=1-i;let a=e;if(r===0)return e[0].t=i,e[0];if(r===1){const l={x:s*a[0].x+i*a[1].x,y:s*a[0].y+i*a[1].y,t:i};return n&&(l.z=s*a[0].z+i*a[1].z),l}if(r<4){let l=s*s,u=i*i,f,d,m,y=0;r===2?(a=[a[0],a[1],a[2],oOt],f=l,d=s*i*2,m=u):r===3&&(f=l*s,d=l*i*3,m=s*u*3,y=i*u);const _={x:f*a[0].x+d*a[1].x+m*a[2].x+y*a[3].x,y:f*a[0].y+d*a[1].y+m*a[2].y+y*a[3].y,t:i};return n&&(_.z=f*a[0].z+d*a[1].z+m*a[2].z+y*a[3].z),_}const o=JSON.parse(JSON.stringify(e));for(;o.length>1;){for(let l=0;l<o.length-1;l++)o[l]={x:o[l].x+(o[l+1].x-o[l].x)*i,y:o[l].y+(o[l+1].y-o[l].y)*i},typeof o[l].z<"u"&&(o[l].z=o[l].z+(o[l+1].z-o[l].z)*i);o.splice(o.length-1,1)}return o[0].t=i,o[0]},computeWithRatios:function(i,e,n,r){const s=1-i,a=n,o=e;let l=a[0],u=a[1],f=a[2],d=a[3],m;if(l*=s,u*=i,o.length===2)return m=l+u,{x:(l*o[0].x+u*o[1].x)/m,y:(l*o[0].y+u*o[1].y)/m,z:r?(l*o[0].z+u*o[1].z)/m:!1,t:i};if(l*=s,u*=2*s,f*=i*i,o.length===3)return m=l+u+f,{x:(l*o[0].x+u*o[1].x+f*o[2].x)/m,y:(l*o[0].y+u*o[1].y+f*o[2].y)/m,z:r?(l*o[0].z+u*o[1].z+f*o[2].z)/m:!1,t:i};if(l*=s,u*=1.5*s,f*=3*s,d*=i*i*i,o.length===4)return m=l+u+f+d,{x:(l*o[0].x+u*o[1].x+f*o[2].x+d*o[3].x)/m,y:(l*o[0].y+u*o[1].y+f*o[2].y+d*o[3].y)/m,z:r?(l*o[0].z+u*o[1].z+f*o[2].z+d*o[3].z)/m:!1,t:i}},derive:function(i,e){const n=[];for(let r=i,s=r.length,a=s-1;s>1;s--,a--){const o=[];for(let l=0,u;l<a;l++)u={x:a*(r[l+1].x-r[l].x),y:a*(r[l+1].y-r[l].y)},e&&(u.z=a*(r[l+1].z-r[l].z)),o.push(u);n.push(o),r=o}return n},between:function(i,e,n){return e<=i&&i<=n||_e.approximately(i,e)||_e.approximately(i,n)},approximately:function(i,e,n){return Ix(i-e)<=(n||aOt)},length:function(i){const n=_e.Tvalues.length;let r=0;for(let s=0,a;s<n;s++)a=.5*_e.Tvalues[s]+.5,r+=_e.Cvalues[s]*_e.arcfn(a,i);return .5*r},map:function(i,e,n,r,s){const a=n-e,o=s-r,l=i-e,u=l/a;return r+o*u},lerp:function(i,e,n){const r={x:e.x+i*(n.x-e.x),y:e.y+i*(n.y-e.y)};return e.z!==void 0&&n.z!==void 0&&(r.z=e.z+i*(n.z-e.z)),r},pointToString:function(i){let e=i.x+"/"+i.y;return typeof i.z<"u"&&(e+="/"+i.z),e},pointsToString:function(i){return"["+i.map(_e.pointToString).join(", ")+"]"},copy:function(i){return JSON.parse(JSON.stringify(i))},angle:function(i,e,n){const r=e.x-i.x,s=e.y-i.y,a=n.x-i.x,o=n.y-i.y,l=r*o-s*a,u=r*a+s*o;return Dx(l,u)},round:function(i,e){const n=""+i,r=n.indexOf(".");return parseFloat(n.substring(0,r+1+e))},dist:function(i,e){const n=i.x-e.x,r=i.y-e.y;return Ap(n*n+r*r)},closest:function(i,e){let n=gu(2,63),r,s;return i.forEach(function(a,o){s=_e.dist(e,a),s<n&&(n=s,r=o)}),{mdist:n,mpos:r}},abcratio:function(i,e){if(e!==2&&e!==3)return!1;if(typeof i>"u")i=.5;else if(i===0||i===1)return i;const n=gu(i,e)+gu(1-i,e),r=n-1;return Ix(r/n)},projectionratio:function(i,e){if(e!==2&&e!==3)return!1;if(typeof i>"u")i=.5;else if(i===0||i===1)return i;const n=gu(1-i,e),r=gu(i,e)+n;return n/r},lli8:function(i,e,n,r,s,a,o,l){const u=(i*r-e*n)*(s-o)-(i-n)*(s*l-a*o),f=(i*r-e*n)*(a-l)-(e-r)*(s*l-a*o),d=(i-n)*(a-l)-(e-r)*(s-o);return d==0?!1:{x:u/d,y:f/d}},lli4:function(i,e,n,r){const s=i.x,a=i.y,o=e.x,l=e.y,u=n.x,f=n.y,d=r.x,m=r.y;return _e.lli8(s,a,o,l,u,f,d,m)},lli:function(i,e){return _e.lli4(i,i.c,e,e.c)},makeline:function(i,e){return new ur(i.x,i.y,(i.x+e.x)/2,(i.y+e.y)/2,e.x,e.y)},findbbox:function(i){let e=gD,n=gD,r=yD,s=yD;return i.forEach(function(a){const o=a.bbox();e>o.x.min&&(e=o.x.min),n>o.y.min&&(n=o.y.min),r<o.x.max&&(r=o.x.max),s<o.y.max&&(s=o.y.max)}),{x:{min:e,mid:(e+r)/2,max:r,size:r-e},y:{min:n,mid:(n+s)/2,max:s,size:s-n}}},shapeintersections:function(i,e,n,r,s){if(!_e.bboxoverlap(e,r))return[];const a=[],o=[i.startcap,i.forward,i.back,i.endcap],l=[n.startcap,n.forward,n.back,n.endcap];return o.forEach(function(u){u.virtual||l.forEach(function(f){if(f.virtual)return;const d=u.intersects(f,s);d.length>0&&(d.c1=u,d.c2=f,d.s1=i,d.s2=n,a.push(d))})}),a},makeshape:function(i,e,n){const r=e.points.length,s=i.points.length,a=_e.makeline(e.points[r-1],i.points[0]),o=_e.makeline(i.points[s-1],e.points[0]),l={startcap:a,forward:i,back:e,endcap:o,bbox:_e.findbbox([a,i,e,o])};return l.intersections=function(u){return _e.shapeintersections(l,l.bbox,u,u.bbox,n)},l},getminmax:function(i,e,n){if(!n)return{min:0,max:0};let r=gD,s=yD,a,o;n.indexOf(0)===-1&&(n=[0].concat(n)),n.indexOf(1)===-1&&n.push(1);for(let l=0,u=n.length;l<u;l++)a=n[l],o=i.get(a),o[e]<r&&(r=o[e]),o[e]>s&&(s=o[e]);return{min:r,mid:(r+s)/2,max:s,size:s-r}},align:function(i,e){const n=e.p1.x,r=e.p1.y,s=-Dx(e.p2.y-r,e.p2.x-n),a=function(o){return{x:(o.x-n)*Gh(s)-(o.y-r)*g0(s),y:(o.x-n)*g0(s)+(o.y-r)*Gh(s)}};return i.map(a)},roots:function(i,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=i.length-1,r=_e.align(i,e),s=function(N){return 0<=N&&N<=1};if(n===2){const N=r[0].y,L=r[1].y,U=r[2].y,O=N-2*L+U;if(O!==0){const F=-Ap(L*L-N*U),H=-N+L,V=-(F+H)/O,X=-(-F+H)/O;return[V,X].filter(s)}else if(L!==U&&O===0)return[(2*L-U)/(2*L-2*U)].filter(s);return[]}const a=r[0].y,o=r[1].y,l=r[2].y,u=r[3].y;let f=-a+3*o-3*l+u,d=3*a-6*o+3*l,m=-3*a+3*o,y=a;if(_e.approximately(f,0)){if(_e.approximately(d,0))return _e.approximately(m,0)?[]:[-y/m].filter(s);const N=Ap(m*m-4*d*y),L=2*d;return[(N-m)/L,(-m-N)/L].filter(s)}d/=f,m/=f,y/=f;const _=(3*m-d*d)/3,x=_/3,S=(2*d*d*d-9*d*m+27*y)/27,T=S/2,b=T*T+x*x*x;let M,R,A,I,k;if(b<0){const N=-_/3,L=N*N*N,U=Ap(L),O=-S/(2*U),F=O<-1?-1:O>1?1:O,H=sOt(F),V=Px(U),X=2*V;return A=X*Gh(H/3)-d/3,I=X*Gh((H+Jw)/3)-d/3,k=X*Gh((H+2*Jw)/3)-d/3,[A,I,k].filter(s)}else{if(b===0)return M=T<0?Px(-T):-Px(T),A=2*M-d/3,I=-M-d/3,[A,I].filter(s);{const N=Ap(b);return M=Px(-T+N),R=Px(T+N),[M-R-d/3].filter(s)}}},droots:function(i){if(i.length===3){const e=i[0],n=i[1],r=i[2],s=e-2*n+r;if(s!==0){const a=-Ap(n*n-e*r),o=-e+n,l=-(a+o)/s,u=-(-a+o)/s;return[l,u]}else if(n!==r&&s===0)return[(2*n-r)/(2*(n-r))];return[]}if(i.length===2){const e=i[0],n=i[1];return e!==n?[e/(e-n)]:[]}return[]},curvature:function(i,e,n,r,s){let a,o,l,u,f=0,d=0;const m=_e.compute(i,e),y=_e.compute(i,n),_=m.x*m.x+m.y*m.y;if(r?(a=Ap(gu(m.y*y.z-y.y*m.z,2)+gu(m.z*y.x-y.z*m.x,2)+gu(m.x*y.y-y.x*m.y,2)),o=gu(_+m.z*m.z,3/2)):(a=m.x*y.y-m.y*y.x,o=gu(_,3/2)),a===0||o===0)return{k:0,r:0};if(f=a/o,d=o/a,!s){const x=_e.curvature(i-.001,e,n,r,!0).k,S=_e.curvature(i+.001,e,n,r,!0).k;u=(S-f+(f-x))/2,l=(Ix(S-f)+Ix(f-x))/2}return{k:f,r:d,dk:u,adk:l}},inflections:function(i){if(i.length<4)return[];const e=_e.align(i,{p1:i[0],p2:i.slice(-1)[0]}),n=e[2].x*e[1].y,r=e[3].x*e[1].y,s=e[1].x*e[2].y,a=e[3].x*e[2].y,o=18*(-3*n+2*r+3*s-a),l=18*(3*n-r-3*s),u=18*(s-n);if(_e.approximately(o,0)){if(!_e.approximately(l,0)){let y=-u/l;if(0<=y&&y<=1)return[y]}return[]}const f=2*o;if(_e.approximately(f,0))return[];const d=l*l-4*o*u;if(d<0)return[];const m=Math.sqrt(d);return[(m-l)/f,-(l+m)/f].filter(function(y){return 0<=y&&y<=1})},bboxoverlap:function(i,e){const n=["x","y"],r=n.length;for(let s=0,a,o,l,u;s<r;s++)if(a=n[s],o=i[a].mid,l=e[a].mid,u=(i[a].size+e[a].size)/2,Ix(o-l)>=u)return!1;return!0},expandbox:function(i,e){e.x.min<i.x.min&&(i.x.min=e.x.min),e.y.min<i.y.min&&(i.y.min=e.y.min),e.z&&e.z.min<i.z.min&&(i.z.min=e.z.min),e.x.max>i.x.max&&(i.x.max=e.x.max),e.y.max>i.y.max&&(i.y.max=e.y.max),e.z&&e.z.max>i.z.max&&(i.z.max=e.z.max),i.x.mid=(i.x.min+i.x.max)/2,i.y.mid=(i.y.min+i.y.max)/2,i.z&&(i.z.mid=(i.z.min+i.z.max)/2),i.x.size=i.x.max-i.x.min,i.y.size=i.y.max-i.y.min,i.z&&(i.z.size=i.z.max-i.z.min)},pairiteration:function(i,e,n){const r=i.bbox(),s=e.bbox(),a=1e5,o=n||.5;if(r.x.size+r.y.size<o&&s.x.size+s.y.size<o)return[(a*(i._t1+i._t2)/2|0)/a+"/"+(a*(e._t1+e._t2)/2|0)/a];let l=i.split(.5),u=e.split(.5),f=[{left:l.left,right:u.left},{left:l.left,right:u.right},{left:l.right,right:u.right},{left:l.right,right:u.left}];f=f.filter(function(m){return _e.bboxoverlap(m.left.bbox(),m.right.bbox())});let d=[];return f.length===0||(f.forEach(function(m){d=d.concat(_e.pairiteration(m.left,m.right,o))}),d=d.filter(function(m,y){return d.indexOf(m)===y})),d},getccenter:function(i,e,n){const r=e.x-i.x,s=e.y-i.y,a=n.x-e.x,o=n.y-e.y,l=r*Gh(Mp)-s*g0(Mp),u=r*g0(Mp)+s*Gh(Mp),f=a*Gh(Mp)-o*g0(Mp),d=a*g0(Mp)+o*Gh(Mp),m=(i.x+e.x)/2,y=(i.y+e.y)/2,_=(e.x+n.x)/2,x=(e.y+n.y)/2,S=m+l,T=y+u,b=_+f,M=x+d,R=_e.lli8(m,y,S,T,_,x,b,M),A=_e.dist(R,i);let I=Dx(i.y-R.y,i.x-R.x),k=Dx(e.y-R.y,e.x-R.x),N=Dx(n.y-R.y,n.x-R.x),L;return I<N?((I>k||k>N)&&(I+=Jw),I>N&&(L=N,N=I,I=L)):N<k&&k<I?(L=N,N=I,I=L):N+=Jw,R.s=I,R.e=N,R.r=A,R},numberSort:function(i,e){return i-e}};class w1{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return _e.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,n){return e+n})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var n=e[0].bbox(),r=1;r<e.length;r++)_e.expandbox(n,e[r].bbox());return n}offset(e){const n=[];return this.curves.forEach(function(r){n.push(...r.offset(e))}),new w1(n)}}const{abs:Nx,min:J6,max:tH,cos:lOt,sin:uOt,acos:cOt,sqrt:Lx}=Math,fOt=Math.PI;class ur{constructor(e){let n=e&&e.forEach?e:Array.from(arguments).slice(),r=!1;if(typeof n[0]=="object"){r=n.length;const _=[];n.forEach(function(x){["x","y","z"].forEach(function(S){typeof x[S]<"u"&&_.push(x[S])})}),n=_}let s=!1;const a=n.length;if(r){if(r>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");s=!0}}else if(a!==6&&a!==8&&a!==9&&a!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const o=this._3d=!s&&(a===9||a===12)||e&&e[0]&&typeof e[0].z<"u",l=this.points=[];for(let _=0,x=o?3:2;_<a;_+=x){var u={x:n[_],y:n[_+1]};o&&(u.z=n[_+2]),l.push(u)}const f=this.order=l.length-1,d=this.dims=["x","y"];o&&d.push("z"),this.dimlen=d.length;const m=_e.align(l,{p1:l[0],p2:l[f]}),y=_e.dist(l[0],l[f]);this._linear=m.reduce((_,x)=>_+Nx(x.y),0)<y/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,n,r,s){if(typeof s>"u"&&(s=.5),s===0)return new ur(n,n,r);if(s===1)return new ur(e,n,n);const a=ur.getABC(2,e,n,r,s);return new ur(e,a.A,r)}static cubicFromPoints(e,n,r,s,a){typeof s>"u"&&(s=.5);const o=ur.getABC(3,e,n,r,s);typeof a>"u"&&(a=_e.dist(n,o.C));const l=a*(1-s)/s,u=_e.dist(e,r),f=(r.x-e.x)/u,d=(r.y-e.y)/u,m=a*f,y=a*d,_=l*f,x=l*d,S={x:n.x-m,y:n.y-y},T={x:n.x+_,y:n.y+x},b=o.A,M={x:b.x+(S.x-b.x)/(1-s),y:b.y+(S.y-b.y)/(1-s)},R={x:b.x+(T.x-b.x)/s,y:b.y+(T.y-b.y)/s},A={x:e.x+(M.x-e.x)/s,y:e.y+(M.y-e.y)/s},I={x:r.x+(R.x-r.x)/(1-s),y:r.y+(R.y-r.y)/(1-s)};return new ur(e,A,I,r)}static getUtils(){return _e}getUtils(){return ur.getUtils()}static get PolyBezier(){return w1}valueOf(){return this.toString()}toString(){return _e.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,n=e[0].x,r=e[0].y,s=["M",n,r,this.order===2?"Q":"C"];for(let a=1,o=e.length;a<o;a++)s.push(e[a].x),s.push(e[a].y);return s.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,n){return""+n+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=_e.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,n=_e.angle(e[0],e[this.order],e[1]);this.clockwise=n>0}length(){return _e.length(this.derivative.bind(this))}static getABC(e=2,n,r,s,a=.5){const o=_e.projectionratio(a,e),l=1-o,u={x:o*n.x+l*s.x,y:o*n.y+l*s.y},f=_e.abcratio(a,e);return{A:{x:r.x+(r.x-u.x)/f,y:r.y+(r.y-u.y)/f},B:r,C:u,S:n,E:s}}getABC(e,n){n=n||this.get(e);let r=this.points[0],s=this.points[this.order];return ur.getABC(this.order,r,n,s,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let n=0,r,s;n<e;n++)s=n/(e-1),r=this.compute(s),r.t=s,this._lut.push(r);return this._lut}on(e,n){n=n||5;const r=this.getLUT(),s=[];for(let a=0,o,l=0;a<r.length;a++)o=r[a],_e.dist(o,e)<n&&(s.push(o),l+=a/r.length);return s.length?t/=s.length:!1}project(e){const n=this.getLUT(),r=n.length-1,s=_e.closest(n,e),a=s.mpos,o=(a-1)/r,l=(a+1)/r,u=.1/r;let f=s.mdist,d=o,m=d,y;f+=1;for(let _;d<l+u;d+=u)y=this.compute(d),_=_e.dist(e,y),_<f&&(f=_,m=d);return m=m<0?0:m>1?1:m,y=this.compute(m),y.t=m,y.d=f,y}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?_e.computeWithRatios(e,this.points,this.ratios,this._3d):_e.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,n=[e[0]],r=e.length;for(let s=1,a,o;s<r;s++)a=e[s],o=e[s-1],n[s]={x:(r-s)/r*a.x+s/r*o.x,y:(r-s)/r*a.y+s/r*o.y};return n[r]=e[r-1],new ur(n)}derivative(e){return _e.compute(e,this.dpoints[0],this._3d)}dderivative(e){return _e.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new ur(_e.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return _e.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return _e.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const n=this.derivative(e),r=Lx(n.x*n.x+n.y*n.y);return{t:e,x:-n.y/r,y:n.x/r}}__normal3(e){const n=this.derivative(e),r=this.derivative(e+.01),s=Lx(n.x*n.x+n.y*n.y+n.z*n.z),a=Lx(r.x*r.x+r.y*r.y+r.z*r.z);n.x/=s,n.y/=s,n.z/=s,r.x/=a,r.y/=a,r.z/=a;const o={x:r.y*n.z-r.z*n.y,y:r.z*n.x-r.x*n.z,z:r.x*n.y-r.y*n.x},l=Lx(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=l,o.y/=l,o.z/=l;const u=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{t:e,x:u[0]*n.x+u[1]*n.y+u[2]*n.z,y:u[3]*n.x+u[4]*n.y+u[5]*n.z,z:u[6]*n.x+u[7]*n.y+u[8]*n.z}}hull(e){let n=this.points,r=[],s=[],a=0;for(s[a++]=n[0],s[a++]=n[1],s[a++]=n[2],this.order===3&&(s[a++]=n[3]);n.length>1;){r=[];for(let o=0,l,u=n.length-1;o<u;o++)l=_e.lerp(e,n[o],n[o+1]),s[a++]=l,r.push(l);n=r}return s}split(e,n){if(e===0&&n)return this.split(n).left;if(n===1)return this.split(e).right;const r=this.hull(e),s={left:this.order===2?new ur([r[0],r[3],r[5]]):new ur([r[0],r[4],r[7],r[9]]),right:this.order===2?new ur([r[5],r[4],r[2]]):new ur([r[9],r[8],r[6],r[3]]),span:r};return s.left._t1=_e.map(0,0,1,this._t1,this._t2),s.left._t2=_e.map(e,0,1,this._t1,this._t2),s.right._t1=_e.map(e,0,1,this._t1,this._t2),s.right._t2=_e.map(1,0,1,this._t1,this._t2),n?(n=_e.map(n,e,1,0,1),s.right.split(n).left):s}extrema(){const e={};let n=[];return this.dims.forEach((function(r){let s=function(o){return o[r]},a=this.dpoints[0].map(s);e[r]=_e.droots(a),this.order===3&&(a=this.dpoints[1].map(s),e[r]=e[r].concat(_e.droots(a))),e[r]=e[r].filter(function(o){return o>=0&&o<=1}),n=n.concat(e[r].sort(_e.numberSort))}).bind(this)),e.values=n.sort(_e.numberSort).filter(function(r,s){return n.indexOf(r)===s}),e}bbox(){const e=this.extrema(),n={};return this.dims.forEach((function(r){n[r]=_e.getminmax(this,r,e[r])}).bind(this)),n}overlaps(e){const n=this.bbox(),r=e.bbox();return _e.bboxoverlap(n,r)}offset(e,n){if(typeof n<"u"){const r=this.get(e),s=this.normal(e),a={c:r,n:s,x:r.x+s.x*n,y:r.y+s.y*n};return this._3d&&(a.z=r.z+s.z*n),a}if(this._linear){const r=this.normal(0),s=this.points.map(function(a){const o={x:a.x+e*r.x,y:a.y+e*r.y};return a.z&&r.z&&(o.z=a.z+e*r.z),o});return[new ur(s)]}return this.reduce().map(function(r){return r._linear?r.offset(e)[0]:r.scale(e)})}simple(){if(this.order===3){const s=_e.angle(this.points[0],this.points[3],this.points[1]),a=_e.angle(this.points[0],this.points[3],this.points[2]);if(s>0&&a<0||s<0&&a>0)return!1}const e=this.normal(0),n=this.normal(1);let r=e.x*n.x+e.y*n.y;return this._3d&&(r+=e.z*n.z),Nx(cOt(r))<fOt/3}reduce(){let e,n=0,r=0,s=.01,a,o=[],l=[],u=this.extrema().values;for(u.indexOf(0)===-1&&(u=[0].concat(u)),u.indexOf(1)===-1&&u.push(1),n=u[0],e=1;e<u.length;e++)r=u[e],a=this.split(n,r),a._t1=n,a._t2=r,o.push(a),n=r;return o.forEach(function(f){for(n=0,r=0;r<=1;)for(r=n+s;r<=1+s;r+=s)if(a=f.split(n,r),!a.simple()){if(r-=s,Nx(n-r)<s)return[];a=f.split(n,r),a._t1=_e.map(n,0,1,f._t1,f._t2),a._t2=_e.map(r,0,1,f._t1,f._t2),l.push(a),n=r;break}n<1&&(a=f.split(n,1),a._t1=_e.map(n,0,1,f._t1,f._t2),a._t2=f._t2,l.push(a))}),l}translate(e,n,r){r=typeof r=="number"?r:n;const s=this.order;let a=this.points.map((o,l)=>(1-l/s)*n+l/s*r);return new ur(this.points.map((o,l)=>({x:o.x+e.x*a[l],y:o.y+e.y*a[l]})))}scale(e){const n=this.order;let r=!1;if(typeof e=="function"&&(r=e),r&&n===2)return this.raise().scale(r);const s=this.clockwise,a=this.points;if(this._linear)return this.translate(this.normal(0),r?r(0):e,r?r(1):e);const o=r?r(0):e,l=r?r(1):e,u=[this.offset(0,10),this.offset(1,10)],f=[],d=_e.lli4(u[0],u[0].c,u[1],u[1].c);if(!d)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(m){const y=f[m*n]=_e.copy(a[m*n]);y.x+=(m?l:o)*u[m].n.x,y.y+=(m?l:o)*u[m].n.y}),r?([0,1].forEach(function(m){if(!(n===2&&m)){var y=a[m+1],_={x:y.x-d.x,y:y.y-d.y},x=r?r((m+1)/n):e;r&&!s&&(x=-x);var S=Lx(_.x*_.x+_.y*_.y);_.x/=S,_.y/=S,f[m+1]={x:y.x+x*_.x,y:y.y+x*_.y}}}),new ur(f)):([0,1].forEach(m=>{if(n===2&&m)return;const y=f[m*n],_=this.derivative(m),x={x:y.x+_.x,y:y.y+_.y};f[m+1]=_e.lli4(y,x,d,a[m+1])}),new ur(f))}outline(e,n,r,s){if(n=n===void 0?e:n,this._linear){const I=this.normal(0),k=this.points[0],N=this.points[this.points.length-1];let L,U,O;r===void 0&&(r=e,s=n),L={x:k.x+I.x*e,y:k.y+I.y*e},O={x:N.x+I.x*r,y:N.y+I.y*r},U={x:(L.x+O.x)/2,y:(L.y+O.y)/2};const F=[L,U,O];L={x:k.x-I.x*n,y:k.y-I.y*n},O={x:N.x-I.x*s,y:N.y-I.y*s},U={x:(L.x+O.x)/2,y:(L.y+O.y)/2};const H=[O,U,L],V=_e.makeline(H[2],F[0]),X=_e.makeline(F[2],H[0]),J=[V,new ur(F),X,new ur(H)];return new w1(J)}const a=this.reduce(),o=a.length,l=[];let u=[],f,d=0,m=this.length();const y=typeof r<"u"&&typeof s<"u";function _(I,k,N,L,U){return function(O){const F=L/N,H=(L+U)/N,V=k-I;return _e.map(O,0,1,I+F*V,I+H*V)}}a.forEach(function(I){const k=I.length();y?(l.push(I.scale(_(e,r,m,d,k))),u.push(I.scale(_(-n,-s,m,d,k)))):(l.push(I.scale(e)),u.push(I.scale(-n))),d+=k}),u=u.map(function(I){return f=I.points,f[3]?I.points=[f[3],f[2],f[1],f[0]]:I.points=[f[2],f[1],f[0]],I}).reverse();const x=l[0].points[0],S=l[o-1].points[l[o-1].points.length-1],T=u[o-1].points[u[o-1].points.length-1],b=u[0].points[0],M=_e.makeline(T,x),R=_e.makeline(S,b),A=[M].concat(l).concat([R]).concat(u);return new w1(A)}outlineshapes(e,n,r){n=n||e;const s=this.outline(e,n).curves,a=[];for(let o=1,l=s.length;o<l/2;o++){const u=_e.makeshape(s[o],s[l-o],r);u.startcap.virtual=o>1,u.endcap.virtual=o<l/2-1,a.push(u)}return a}intersects(e,n){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof ur&&(e=e.reduce()),this.curveintersects(this.reduce(),e,n)):this.selfintersects(n)}lineIntersects(e){const n=J6(e.p1.x,e.p2.x),r=J6(e.p1.y,e.p2.y),s=tH(e.p1.x,e.p2.x),a=tH(e.p1.y,e.p2.y);return _e.roots(this.points,e).filter(o=>{var l=this.get(o);return _e.between(l.x,n,s)&&_e.between(l.y,r,a)})}selfintersects(e){const n=this.reduce(),r=n.length-2,s=[];for(let a=0,o,l,u;a<r;a++)l=n.slice(a,a+1),u=n.slice(a+2),o=this.curveintersects(l,u,e),s.push(...o);return s}curveintersects(e,n,r){const s=[];e.forEach(function(o){n.forEach(function(l){o.overlaps(l)&&s.push({left:o,right:l})})});let a=[];return s.forEach(function(o){const l=_e.pairiteration(o.left,o.right,r);l.length>0&&(a=a.concat(l))}),a}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,n,r,s){const a=(s-r)/4,o=this.get(r+a),l=this.get(s-a),u=_e.dist(e,n),f=_e.dist(e,o),d=_e.dist(e,l);return Nx(f-u)+Nx(d-u)}_iterate(e,n){let r=0,s=1,a;do{a=0,s=1;let o=this.get(r),l,u,f,d,m=!1,y=!1,_,x=s,S=1;do if(y=m,d=f,x=(r+s)/2,l=this.get(x),u=this.get(s),f=_e.getccenter(o,l,u),f.interval={start:r,end:s},m=this._error(f,o,r,s)<=e,_=y&&!m,_||(S=s),m){if(s>=1){if(f.interval.end=S=1,d=f,s>1){let b={x:f.x+f.r*lOt(f.e),y:f.y+f.r*uOt(f.e)};f.e+=_e.angle({x:f.x,y:f.y},b,this.get(1))}break}s=s+(s-r)/2}else s=x;while(!_&&a++<100);if(a>=100)break;d=d||f,n.push(d),r=S}while(s<1);return n}}function DN(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=Array(e);n<e;n++)r[n]=i[n];return r}function hOt(i){if(Array.isArray(i))return i}function dOt(i){if(Array.isArray(i))return DN(i)}function pOt(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function mOt(i,e){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,f=!1;try{if(a=(n=n.call(i)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(d){f=!0,s=d}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw s}}return l}}function gOt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yOt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vOt(i,e){if(i==null)return{};var n,r,s=_Ot(i,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(r=0;r<a.length;r++)n=a[r],e.includes(n)||{}.propertyIsEnumerable.call(i,n)&&(s[n]=i[n])}return s}function _Ot(i,e){if(i==null)return{};var n={};for(var r in i)if({}.hasOwnProperty.call(i,r)){if(e.includes(r))continue;n[r]=i[r]}return n}function bOt(i,e){return hOt(i)||mOt(i,e)||aX(i,e)||gOt()}function xOt(i){return dOt(i)||pOt(i)||aX(i)||yOt()}function SOt(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var r=n.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function EOt(i){var e=SOt(i,"string");return typeof e=="symbol"?e:e+""}function aX(i,e){if(i){if(typeof i=="string")return DN(i,e);var n={}.toString.call(i).slice(8,-1);return n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set"?Array.from(i):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?DN(i,e):void 0}}var TOt=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(l){return{keyAccessor:l,isProp:!(l instanceof Function)}}),a=i.reduce(function(l,u){var f=l,d=u;return s.forEach(function(m,y){var _=m.keyAccessor,x=m.isProp,S;if(x){var T=d,b=T[_],M=vOt(T,[_].map(EOt));S=b,d=M}else S=_(d,y);y+1<s.length?(f.hasOwnProperty(S)||(f[S]={}),f=f[S]):n?(f.hasOwnProperty(S)||(f[S]=[]),f[S].push(d)):f[S]=d}),l},{});n instanceof Function&&function l(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;f===s.length?Object.keys(u).forEach(function(d){return u[d]=n(u[d])}):Object.values(u).forEach(function(d){return l(d,f+1)})}(a);var o=a;return r&&(o=[],function l(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];f.length===s.length?o.push({keys:f,vals:u}):Object.entries(u).forEach(function(d){var m=bOt(d,2),y=m[0],_=m[1];return l(_,[].concat(xOt(f),[y]))})}(a),e instanceof Array&&e.length===0&&o.length===1&&(o[0].keys=[])),o};function wOt(i,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=i:s.appendChild(document.createTextNode(i))}}var AOt=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;wOt(AOt);function PN(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=Array(e);n<e;n++)r[n]=i[n];return r}function MOt(i){if(Array.isArray(i))return i}function COt(i){if(Array.isArray(i))return PN(i)}function eH(i,e,n){if(oX())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var s=new(i.bind.apply(i,r));return s}function ES(i,e,n){return(e=NOt(e))in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function oX(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oX=function(){return!!i})()}function ROt(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function OOt(i,e){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var r,s,a,o,l=[],u=!0,f=!1;try{if(a=(n=n.call(i)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(d){f=!0,s=d}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw s}}return l}}function IOt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DOt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nH(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),n.push.apply(n,r)}return n}function y0(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nH(Object(n),!0).forEach(function(r){ES(i,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):nH(Object(n)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(n,r))})}return i}function A1(i,e){return MOt(i)||OOt(i,e)||lX(i,e)||IOt()}function xu(i){return COt(i)||ROt(i)||lX(i)||DOt()}function POt(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var r=n.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function NOt(i){var e=POt(i,"string");return typeof e=="symbol"?e:e+""}function NN(i){"@babel/helpers - typeof";return NN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NN(i)}function lX(i,e){if(i){if(typeof i=="string")return PN(i,e);var n={}.toString.call(i).slice(8,-1);return n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set"?Array.from(i):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?PN(i,e):void 0}}var LOt=eU(Tq);function iH(i,e,n){!e||typeof n!="string"||i.filter(function(r){return!r[n]}).forEach(function(r){r[n]=LOt(e(r))})}function UOt(i,e){var n=i.nodes,r=i.links,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=s.nodeFilter,o=a===void 0?function(){return!0}:a,l=s.onLoopError,u=l===void 0?function(_){throw"Invalid DAG structure! Found cycle in node path: ".concat(_.join(" -> "),".")}:l,f={};n.forEach(function(_){return f[e(_)]={data:_,out:[],depth:-1,skip:!o(_)}}),r.forEach(function(_){var x=_.source,S=_.target,T=A(x),b=A(S);if(!f.hasOwnProperty(T))throw"Missing source node with id: ".concat(T);if(!f.hasOwnProperty(b))throw"Missing target node with id: ".concat(b);var M=f[T],R=f[b];M.out.push(R);function A(I){return NN(I)==="object"?e(I):I}});var d=[];y(Object.values(f));var m=Object.assign.apply(Object,[{}].concat(xu(Object.entries(f).filter(function(_){var x=A1(_,2),S=x[1];return!S.skip}).map(function(_){var x=A1(_,2),S=x[0],T=x[1];return ES({},S,T.depth)}))));return m;function y(_){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,T=function(){var A=_[b];if(x.indexOf(A)!==-1){var I=[].concat(xu(x.slice(x.indexOf(A))),[A]).map(function(k){return e(k.data)});return d.some(function(k){return k.length===I.length&&k.every(function(N,L){return N===I[L]})})||(d.push(I),u(I)),1}S>A.depth&&(A.depth=S,y(A.out,[].concat(xu(x),[A]),S+(A.skip?0:1)))},b=0,M=_.length;b<M;b++)T()}}var kOt=2,Na=function(e,n){return n.onNeedsRedraw&&n.onNeedsRedraw()},rH=function(e,n){if(!n.isShadow){var r=$e(n.linkDirectionalParticles);n.graphData.links.forEach(function(s){var a=Math.round(Math.abs(r(s)));a?s.__photons=xu(Array(a)).map(function(){return{}}):delete s.__photons})}},TC=q2({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,n){n.engineRunning=!1,rH(e,n)}},dagMode:{onChange:function(e,n){!e&&(n.graphData.nodes||[]).forEach(function(r){return r.fx=r.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:Na},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:Na},nodeColor:{default:"color",triggerUpdate:!1,onChange:Na},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:Na},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Na},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:Na},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:Na},linkColor:{default:"color",triggerUpdate:!1,onChange:Na},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:Na},linkWidth:{default:1,triggerUpdate:!1,onChange:Na},linkCurvature:{default:0,triggerUpdate:!1,onChange:Na},linkCanvasObject:{triggerUpdate:!1,onChange:Na},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Na},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:Na},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:Na},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:Na},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:rH},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,n){n.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,n){n.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,n){n.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,n,r){return r===void 0?e.forceLayout.force(n):(e.forceLayout.force(n,r),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&n(),s(),!e.isShadow&&a(),!e.isShadow&&o(),r(),this;function n(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function r(){var l=$e(e.nodeVisibility),u=$e(e.nodeVal),f=$e(e.nodeColor),d=$e(e.nodeCanvasObjectMode),m=e.ctx,y=e.isShadow/e.globalScale,_=e.graphData.nodes.filter(l);m.save(),_.forEach(function(x){var S=d(x);if(e.nodeCanvasObject&&(S==="before"||S==="replace")&&(e.nodeCanvasObject(x,m,e.globalScale),S==="replace")){m.restore();return}var T=Math.sqrt(Math.max(0,u(x)||1))*e.nodeRelSize+y;m.beginPath(),m.arc(x.x,x.y,T,0,2*Math.PI,!1),m.fillStyle=f(x)||"rgba(31, 120, 180, 0.92)",m.fill(),e.nodeCanvasObject&&S==="after"&&e.nodeCanvasObject(x,e.ctx,e.globalScale)}),m.restore()}function s(){var l=$e(e.linkVisibility),u=$e(e.linkColor),f=$e(e.linkWidth),d=$e(e.linkLineDash),m=$e(e.linkCurvature),y=$e(e.linkCanvasObjectMode),_=e.ctx,x=e.isShadow*2,S=e.graphData.links.filter(l);S.forEach(k);var T=[],b=[],M=S;if(e.linkCanvasObject){var R=[],A=[];S.forEach(function(N){return({before:T,after:b,replace:R}[y(N)]||A).push(N)}),M=[].concat(xu(T),b,A),T=T.concat(R)}_.save(),T.forEach(function(N){return e.linkCanvasObject(N,_,e.globalScale)}),_.restore();var I=TOt(M,[u,f,d]);_.save(),Object.entries(I).forEach(function(N){var L=A1(N,2),U=L[0],O=L[1],F=!U||U==="undefined"?"rgba(0,0,0,0.15)":U;Object.entries(O).forEach(function(H){var V=A1(H,2),X=V[0],J=V[1],q=(X||1)/e.globalScale+x;Object.entries(J).forEach(function(W){var K=A1(W,2);K[0];var et=K[1],Q=d(et[0]);_.beginPath(),et.forEach(function(dt){var yt=dt.source,xt=dt.target;if(!(!yt||!xt||!yt.hasOwnProperty("x")||!xt.hasOwnProperty("x"))){_.moveTo(yt.x,yt.y);var nt=dt.__controlPoints;nt?_[nt.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(_,xu(nt).concat([xt.x,xt.y])):_.lineTo(xt.x,xt.y)}}),_.strokeStyle=F,_.lineWidth=q,_.setLineDash(Q||[]),_.stroke()})})}),_.restore(),_.save(),b.forEach(function(N){return e.linkCanvasObject(N,_,e.globalScale)}),_.restore();function k(N){var L=m(N);if(!L){N.__controlPoints=null;return}var U=N.source,O=N.target;if(!(!U||!O||!U.hasOwnProperty("x")||!O.hasOwnProperty("x"))){var F=Math.sqrt(Math.pow(O.x-U.x,2)+Math.pow(O.y-U.y,2));if(F>0){var H=Math.atan2(O.y-U.y,O.x-U.x),V=F*L,X={x:(U.x+O.x)/2+V*Math.cos(H-Math.PI/2),y:(U.y+O.y)/2+V*Math.sin(H-Math.PI/2)};N.__controlPoints=[X.x,X.y]}else{var J=L*70;N.__controlPoints=[O.x,O.y-J,O.x+J,O.y]}}}}function a(){var l=1.6,u=.2,f=$e(e.linkDirectionalArrowLength),d=$e(e.linkDirectionalArrowRelPos),m=$e(e.linkVisibility),y=$e(e.linkDirectionalArrowColor||e.linkColor),_=$e(e.nodeVal),x=e.ctx;x.save(),e.graphData.links.filter(m).forEach(function(S){var T=f(S);if(!(!T||T<0)){var b=S.source,M=S.target;if(!(!b||!M||!b.hasOwnProperty("x")||!M.hasOwnProperty("x"))){var R=Math.sqrt(Math.max(0,_(b)||1))*e.nodeRelSize,A=Math.sqrt(Math.max(0,_(M)||1))*e.nodeRelSize,I=Math.min(1,Math.max(0,d(S))),k=y(S)||"rgba(0,0,0,0.28)",N=T/l/2,L=S.__controlPoints&&eH(ur,[b.x,b.y].concat(xu(S.__controlPoints),[M.x,M.y])),U=L?function(q){return L.get(q)}:function(q){return{x:b.x+(M.x-b.x)*q||0,y:b.y+(M.y-b.y)*q||0}},O=L?L.length():Math.sqrt(Math.pow(M.x-b.x,2)+Math.pow(M.y-b.y,2)),F=R+T+(O-R-A-T)*I,H=U(F/O),V=U((F-T)/O),X=U((F-T*(1-u))/O),J=Math.atan2(H.y-V.y,H.x-V.x)-Math.PI/2;x.beginPath(),x.moveTo(H.x,H.y),x.lineTo(V.x+N*Math.cos(J),V.y+N*Math.sin(J)),x.lineTo(X.x,X.y),x.lineTo(V.x-N*Math.cos(J),V.y-N*Math.sin(J)),x.fillStyle=k,x.fill()}}}),x.restore()}function o(){var l=$e(e.linkDirectionalParticles),u=$e(e.linkDirectionalParticleSpeed),f=$e(e.linkDirectionalParticleWidth),d=$e(e.linkVisibility),m=$e(e.linkDirectionalParticleColor||e.linkColor),y=e.ctx;y.save(),e.graphData.links.filter(d).forEach(function(_){var x=l(_);if(!(!_.hasOwnProperty("__photons")||!_.__photons.length)){var S=_.source,T=_.target;if(!(!S||!T||!S.hasOwnProperty("x")||!T.hasOwnProperty("x"))){var b=u(_),M=_.__photons||[],R=Math.max(0,f(_)/2)/Math.sqrt(e.globalScale),A=m(_)||"rgba(0,0,0,0.28)";y.fillStyle=A;var I=_.__controlPoints?eH(ur,[S.x,S.y].concat(xu(_.__controlPoints),[T.x,T.y])):null,k=0,N=!1;M.forEach(function(L){var U=!!L.__singleHop;if(L.hasOwnProperty("__progressRatio")||(L.__progressRatio=U?0:k/x),!U&&k++,L.__progressRatio+=b,L.__progressRatio>=1)if(!U)L.__progressRatio=L.__progressRatio%1;else{N=!0;return}var O=L.__progressRatio,F=I?I.get(O):{x:S.x+(T.x-S.x)*O||0,y:S.y+(T.y-S.y)*O||0};y.beginPath(),y.arc(F.x,F.y,R,0,2*Math.PI,!1),y.fill()}),N&&(_.__photons=_.__photons.filter(function(L){return!L.__singleHop||L.__progressRatio<=1}))}}}),y.restore()}},emitParticle:function(e,n){return n&&(!n.__photons&&(n.__photons=[]),n.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:uq().force("link",aq()).force("charge",cq()).force("center",Jj()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,n){n.ctx=e},update:function(e,n){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&iH(e.graphData.nodes,$e(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&iH(e.graphData.links,$e(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(y){y.source=y[e.linkSource],y.target=y[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var r=e.forceLayout.force("link");r&&r.id(function(y){return y[e.nodeId]}).links(e.graphData.links);var s=e.dagMode&&UOt(e.graphData,function(y){return y[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),a=Math.max.apply(Math,xu(Object.values(s||[]))),o=e.dagLevelDistance||e.graphData.nodes.length/(a||1)*kOt*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(n.dagMode)){var l=["lr","rl"].includes(n.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(y){return delete y[l]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var u=["rl","bu"].includes(e.dagMode),f=function(_){return(s[_[e.nodeId]]-a/2)*o*(u?-1:1)},d=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(y){return y[d]=f(y)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?fq(function(y){var _=s[y[e.nodeId]]||-1;return(e.dagMode==="radialin"?a-_:_)*o}).strength(function(y){return e.dagNodeFilter(y)?1:0}):null);for(var m=0;m<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);m++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function uX(i,e){var n=i instanceof Array?i:[i],r=new e;return r._destructor&&r._destructor(),{linkProp:function(a){return{default:r[a](),onChange:function(l,u){n.forEach(function(f){return u[f][a](l)})},triggerUpdate:!1}},linkMethod:function(a){return function(o){for(var l=arguments.length,u=new Array(l>1?l-1:0),f=1;f<l;f++)u[f-1]=arguments[f];var d=[];return n.forEach(function(m){var y=o[m],_=y[a].apply(y,u);_!==y&&d.push(_)}),d.length?d[0]:this}}}}var zOt=800,BOt=4,FOt=5,cX=uX("forceGraph",TC),VOt=uX(["forceGraph","shadowGraph"],TC),HOt=Object.assign.apply(Object,xu(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(i){return ES({},i,cX.linkProp(i))})).concat(xu(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(i){return ES({},i,VOt.linkProp(i))})))),GOt=Object.assign.apply(Object,xu(["d3Force","d3ReheatSimulation","emitParticle"].map(function(i){return ES({},i,cX.linkMethod(i))})));function vD(i){if(i.canvas){var e=i.canvas.width,n=i.canvas.height;e===300&&n===150&&(e=n=0);var r=window.devicePixelRatio;e/=r,n/=r,[i.canvas,i.shadowCanvas].forEach(function(a){a.style.width="".concat(i.width,"px"),a.style.height="".concat(i.height,"px"),a.width=i.width*r,a.height=i.height*r,!e&&!n&&a.getContext("2d").scale(r,r)});var s=gf(i.canvas).k;i.zoom.translateBy(i.zoom.__baseElem,(i.width-e)/2/s,(i.height-n)/2/s),i.needsRedraw=!0}}function fX(i){var e=window.devicePixelRatio;i.setTransform(e,0,0,e,0,0)}function sH(i,e,n){i.save(),fX(i),i.clearRect(0,0,e,n),i.restore()}var jOt=q2({props:y0({width:{default:window.innerWidth,onChange:function(e,n){return vD(n)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,n){return vD(n)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,n){[e.nodes,e.links].every(function(s){return(s||[]).every(function(a){return!a.hasOwnProperty("__indexColor")})})&&n.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(r),n.forceGraph.graphData(e),n.shadowGraph.graphData(e);function r(s){var a=s.type,o=s.objs;o.filter(function(l){if(!l.hasOwnProperty("__indexColor"))return!0;var u=n.colorTracker.lookup(l.__indexColor);return!u||!u.hasOwnProperty("d")||u.d!==l}).forEach(function(l){l.__indexColor=n.colorTracker.register({type:a,d:l})})}},triggerUpdate:!1},backgroundColor:{onChange:function(e,n){n.canvas&&e&&(n.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,n){n.shadowGraph.nodeCanvasObject(e?function(r,s,a){return e(r,r.__indexColor,s,a)}:null),n.flushShadowCanvas&&n.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,n){n.shadowGraph.linkCanvasObject(e?function(r,s,a){return e(r,r.__indexColor,s,a)}:null),n.flushShadowCanvas&&n.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,n){n.zoom.scaleExtent([e,n.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,n){n.zoom.scaleExtent([n.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,n){n.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},HOt),aliases:{stopAnimation:"pauseAnimation"},methods:y0({graph2ScreenCoords:function(e,n,r){var s=gf(e.canvas);return{x:n*s.k+s.x,y:r*s.k+s.y}},screen2GraphCoords:function(e,n,r){var s=gf(e.canvas);return{x:(n-s.x)/s.k,y:(r-s.y)/s.k}},centerAt:function(e,n,r,s){if(!e.canvas)return null;if(n!==void 0||r!==void 0){var a=Object.assign({},n!==void 0?{x:n}:{},r!==void 0?{y:r}:{});return s?e.tweenGroup.add(new G6(o()).to(a,s).easing(sy.Quadratic.Out).onUpdate(l).start()):l(a),this}return o();function o(){var u=gf(e.canvas);return{x:(e.width/2-u.x)/u.k,y:(e.height/2-u.y)/u.k}}function l(u){var f=u.x,d=u.y;e.zoom.translateTo(e.zoom.__baseElem,f===void 0?o().x:f,d===void 0?o().y:d),e.needsRedraw=!0}},zoom:function(e,n,r){if(!e.canvas)return null;if(n!==void 0)return r?e.tweenGroup.add(new G6({k:s()}).to({k:n},r).easing(sy.Quadratic.Out).onUpdate(function(o){var l=o.k;return a(l)}).start()):a(n),this;return s();function s(){return gf(e.canvas).k}function a(o){e.zoom.scaleTo(e.zoom.__baseElem,o),e.needsRedraw=!0}},zoomToFit:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,s=arguments.length,a=new Array(s>3?s-3:0),o=3;o<s;o++)a[o-3]=arguments[o];var l=this.getGraphBbox.apply(this,a);if(l){var u={x:(l.x[0]+l.x[1])/2,y:(l.y[0]+l.y[1])/2},f=Math.max(1e-12,Math.min(1e12,(e.width-r*2)/(l.x[1]-l.x[0]),(e.height-r*2)/(l.y[1]-l.y[0])));this.centerAt(u.x,u.y,n),this.zoom(f,n)}return this},getGraphBbox:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},r=$e(e.nodeVal),s=function(l){return Math.sqrt(Math.max(0,r(l)||1))*e.nodeRelSize},a=e.graphData.nodes.filter(n).map(function(o){return{x:o.x,y:o.y,r:s(o)}});return a.length?{x:[PP(a,function(o){return o.x-o.r}),DP(a,function(o){return o.x+o.r})],y:[PP(a,function(o){return o.y-o.r}),DP(a,function(o){return o.y+o.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},GOt),stateInit:function(){return{lastSetZoom:1,zoom:bRt(),forceGraph:new TC,shadowGraph:new TC().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new kRt,tweenGroup:new HW}},init:function(e,n){var r=this;e.innerHTML="";var s=document.createElement("div");s.classList.add("force-graph-container"),s.style.position="relative",e.appendChild(s),n.canvas=document.createElement("canvas"),n.backgroundColor&&(n.canvas.style.background=n.backgroundColor),s.appendChild(n.canvas),n.shadowCanvas=document.createElement("canvas");var a=n.canvas.getContext("2d"),o=n.shadowCanvas.getContext("2d",{willReadFrequently:!0}),l={x:-1e12,y:-1e12},u=function(){var m=null,y=window.devicePixelRatio,_=l.x>0&&l.y>0?o.getImageData(l.x*y,l.y*y,1,1):null;return _&&(m=n.colorTracker.lookup(_.data)),m};bu(n.canvas).call(a2t().subject(function(){if(!n.enableNodeDrag)return null;var d=u();return d&&d.type==="Node"?d.d:null}).on("start",function(d){var m=d.subject;m.__initialDragPos={x:m.x,y:m.y,fx:m.fx,fy:m.fy},d.active||(m.fx=m.x,m.fy=m.y),n.canvas.classList.add("grabbable")}).on("drag",function(d){var m=d.subject,y=m.__initialDragPos,_=d,x=gf(n.canvas).k,S={x:y.x+(_.x-y.x)/x-m.x,y:y.y+(_.y-y.y)/x-m.y};["x","y"].forEach(function(T){return m["f".concat(T)]=m[T]=y[T]+(_[T]-y[T])/x}),!(!m.__dragged&&FOt>=Math.sqrt(cbt(["x","y"].map(function(T){return Math.pow(d[T]-y[T],2)}))))&&(n.forceGraph.d3AlphaTarget(.3).resetCountdown(),n.isPointerDragging=!0,m.__dragged=!0,n.onNodeDrag(m,S))}).on("end",function(d){var m=d.subject,y=m.__initialDragPos,_={x:m.x-y.x,y:m.y-y.y};y.fx===void 0&&(m.fx=void 0),y.fy===void 0&&(m.fy=void 0),delete m.__initialDragPos,n.forceGraph.d3AlphaTarget()&&n.forceGraph.d3AlphaTarget(0).resetCountdown(),n.canvas.classList.remove("grabbable"),n.isPointerDragging=!1,m.__dragged&&(delete m.__dragged,n.onNodeDragEnd(m,_))})),n.zoom(n.zoom.__baseElem=bu(n.canvas)),n.zoom.__baseElem.on("dblclick.zoom",null),n.zoom.filter(function(d){return!d.button&&n.enableZoomPanInteraction&&(d.type!=="wheel"||$e(n.enableZoomInteraction)(d))&&(d.type==="wheel"||$e(n.enablePanInteraction)(d))}).on("zoom",function(d){var m=d.transform;[a,o].forEach(function(y){fX(y),y.translate(m.x,m.y),y.scale(m.k,m.k)}),n.isPointerDragging=!0,n.onZoom&&n.onZoom(y0(y0({},m),r.centerAt())),n.needsRedraw=!0}).on("end",function(d){n.isPointerDragging=!1,n.onZoomEnd&&n.onZoomEnd(y0(y0({},d.transform),r.centerAt()))}),vD(n),n.forceGraph.onNeedsRedraw(function(){return n.needsRedraw=!0}).onFinishUpdate(function(){gf(n.canvas).k===n.lastSetZoom&&n.graphData.nodes.length&&(n.zoom.scaleTo(n.zoom.__baseElem,n.lastSetZoom=BOt/Math.cbrt(n.graphData.nodes.length)),n.needsRedraw=!0)}),n.tooltip=new rOt(s),["pointermove","pointerdown"].forEach(function(d){return s.addEventListener(d,function(m){d==="pointerdown"&&(n.isPointerPressed=!0,n.pointerDownEvent=m),!n.isPointerDragging&&m.type==="pointermove"&&n.onBackgroundClick&&(m.pressure>0||n.isPointerPressed)&&(m.pointerType!=="touch"||m.movementX===void 0||[m.movementX,m.movementY].some(function(x){return Math.abs(x)>1}))&&(n.isPointerDragging=!0);var y=_(s);l.x=m.pageX-y.left,l.y=m.pageY-y.top;function _(x){var S=x.getBoundingClientRect(),T=window.pageXOffset||document.documentElement.scrollLeft,b=window.pageYOffset||document.documentElement.scrollTop;return{top:S.top+b,left:S.left+T}}},{passive:!0})}),s.addEventListener("pointerup",function(d){if(n.isPointerPressed=!1,n.isPointerDragging){n.isPointerDragging=!1;return}var m=[d,n.pointerDownEvent];requestAnimationFrame(function(){if(d.button===0)if(n.hoverObj){var y=n["on".concat(n.hoverObj.type,"Click")];y&&y.apply(void 0,[n.hoverObj.d].concat(m))}else n.onBackgroundClick&&n.onBackgroundClick.apply(n,m);if(d.button===2)if(n.hoverObj){var _=n["on".concat(n.hoverObj.type,"RightClick")];_&&_.apply(void 0,[n.hoverObj.d].concat(m))}else n.onBackgroundRightClick&&n.onBackgroundRightClick.apply(n,m)})},{passive:!0}),s.addEventListener("contextmenu",function(d){return!n.onBackgroundRightClick&&!n.onNodeRightClick&&!n.onLinkRightClick?!0:(d.preventDefault(),!1)}),n.forceGraph(a),n.shadowGraph(o);var f=SRt(function(){sH(o,n.width,n.height),n.shadowGraph.linkWidth(function(m){return $e(n.linkWidth)(m)+n.linkHoverPrecision});var d=gf(n.canvas);n.shadowGraph.globalScale(d.k).tickFrame()},zOt);n.flushShadowCanvas=f.flush,(this._animationCycle=function d(){var m=!n.autoPauseRedraw||!!n.needsRedraw||n.forceGraph.isEngineRunning()||n.graphData.links.some(function(R){return R.__photons&&R.__photons.length});if(n.needsRedraw=!1,n.enablePointerInteraction){var y=n.isPointerDragging?null:u();if(y!==n.hoverObj){var _=n.hoverObj,x=_?_.type:null,S=y?y.type:null;if(x&&x!==S){var T=n["on".concat(x,"Hover")];T&&T(null,_.d)}if(S){var b=n["on".concat(S,"Hover")];b&&b(y.d,x===S?_.d:null)}n.tooltip.content(y&&$e(n["".concat(y.type.toLowerCase(),"Label")])(y.d)||null),n.canvas.classList[y&&n["on".concat(S,"Click")]||!y&&n.onBackgroundClick?"add":"remove"]("clickable"),n.hoverObj=y}m&&f()}if(m){sH(a,n.width,n.height);var M=gf(n.canvas).k;n.onRenderFramePre&&n.onRenderFramePre(a,M),n.forceGraph.globalScale(M).tickFrame(),n.onRenderFramePost&&n.onRenderFramePost(a,M)}n.tweenGroup.update(),n.animationFrameRequestId=requestAnimationFrame(d)})()},update:function(e){}});const uR={width:It.number,height:It.number,graphData:It.shape({nodes:It.arrayOf(It.object).isRequired,links:It.arrayOf(It.object).isRequired}),backgroundColor:It.string,nodeRelSize:It.number,nodeId:It.string,nodeLabel:It.oneOfType([It.string,It.func]),nodeVal:It.oneOfType([It.number,It.string,It.func]),nodeVisibility:It.oneOfType([It.bool,It.string,It.func]),nodeColor:It.oneOfType([It.string,It.func]),nodeAutoColorBy:It.oneOfType([It.string,It.func]),onNodeHover:It.func,onNodeClick:It.func,linkSource:It.string,linkTarget:It.string,linkLabel:It.oneOfType([It.string,It.func]),linkVisibility:It.oneOfType([It.bool,It.string,It.func]),linkColor:It.oneOfType([It.string,It.func]),linkAutoColorBy:It.oneOfType([It.string,It.func]),linkWidth:It.oneOfType([It.number,It.string,It.func]),linkCurvature:It.oneOfType([It.number,It.string,It.func]),linkDirectionalArrowLength:It.oneOfType([It.number,It.string,It.func]),linkDirectionalArrowColor:It.oneOfType([It.string,It.func]),linkDirectionalArrowRelPos:It.oneOfType([It.number,It.string,It.func]),linkDirectionalParticles:It.oneOfType([It.number,It.string,It.func]),linkDirectionalParticleSpeed:It.oneOfType([It.number,It.string,It.func]),linkDirectionalParticleWidth:It.oneOfType([It.number,It.string,It.func]),linkDirectionalParticleColor:It.oneOfType([It.string,It.func]),onLinkHover:It.func,onLinkClick:It.func,dagMode:It.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:It.number,dagNodeFilter:It.func,onDagError:It.func,d3AlphaMin:It.number,d3AlphaDecay:It.number,d3VelocityDecay:It.number,warmupTicks:It.number,cooldownTicks:It.number,cooldownTime:It.number,onEngineTick:It.func,onEngineStop:It.func,getGraphBbox:It.func},hX={zoomToFit:It.func,onNodeRightClick:It.func,onNodeDrag:It.func,onNodeDragEnd:It.func,onLinkRightClick:It.func,linkHoverPrecision:It.number,onBackgroundClick:It.func,onBackgroundRightClick:It.func,enablePointerInteraction:It.bool,enableNodeDrag:It.bool},KU={showNavInfo:It.bool,nodeOpacity:It.number,nodeResolution:It.number,nodeThreeObject:It.oneOfType([It.object,It.string,It.func]),nodeThreeObjectExtend:It.oneOfType([It.bool,It.string,It.func]),linkOpacity:It.number,linkResolution:It.number,linkCurveRotation:It.oneOfType([It.number,It.string,It.func]),linkMaterial:It.oneOfType([It.object,It.string,It.func]),linkThreeObject:It.oneOfType([It.object,It.string,It.func]),linkThreeObjectExtend:It.oneOfType([It.bool,It.string,It.func]),linkPositionUpdate:It.func,linkDirectionalArrowResolution:It.number,linkDirectionalParticleResolution:It.number,forceEngine:It.oneOf(["d3","ngraph"]),ngraphPhysics:It.object,numDimensions:It.oneOf([1,2,3])},qOt=Object.assign({},uR,hX,{linkLineDash:It.oneOfType([It.arrayOf(It.number),It.string,It.func]),nodeCanvasObjectMode:It.oneOfType([It.string,It.func]),nodeCanvasObject:It.func,nodePointerAreaPaint:It.func,linkCanvasObjectMode:It.oneOfType([It.string,It.func]),linkCanvasObject:It.func,linkPointerAreaPaint:It.func,autoPauseRedraw:It.bool,minZoom:It.number,maxZoom:It.number,enableZoomInteraction:It.oneOfType([It.bool,It.func]),enablePanInteraction:It.oneOfType([It.bool,It.func]),onZoom:It.func,onZoomEnd:It.func,onRenderFramePre:It.func,onRenderFramePost:It.func});Object.assign({},uR,hX,KU,{enableNavigationControls:It.bool,controlType:It.oneOf(["trackball","orbit","fly"]),rendererConfig:It.object,extraRenderers:It.arrayOf(It.shape({render:It.func.isRequired}))});Object.assign({},uR,KU,{nodeDesc:It.oneOfType([It.string,It.func]),linkDesc:It.oneOfType([It.string,It.func])});Object.assign({},uR,KU,{markerAttrs:It.object,yOffset:It.number,glScale:It.number});const ZU=xMt(jOt,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});ZU.displayName="ForceGraph2D";ZU.propTypes=qOt;const $Ot=({graphStepFinalData:i,isUploadFirestore:e})=>{const n=tt.useRef(null);return tt.useEffect(()=>{var r;if(n.current&&((r=i==null?void 0:i.nodes)==null?void 0:r.length)>=2){const[s,a]=i.nodes,o=s.x!==void 0&&a.x!==void 0?(s.x+a.x)/2:0,l=s.y!==void 0&&a.y!==void 0?(s.y+a.y)/2:0;setTimeout(()=>{n.current.centerAt(o,l,1500)},300),setTimeout(()=>{n.current.zoom(8,1e3)},1800)}},[i]),st.jsxs(st.Fragment,{children:[st.jsx(bs,{sx:hMt(e),children:st.jsx(X3,{})}),st.jsx(bs,{sx:dMt(e),children:st.jsx(ZU,{ref:n,graphData:i,nodeRelSize:3,linkWidth:10,dagMode:"td",enablePanInteraction:!1,enablePointerInteraction:!1,enableZoomInteraction:!1,minZoom:8,linkCurvature:.1,linkDirectionalParticles:4,height:150,nodeCanvasObject:(r,s,a)=>{const o=r.name,l=18/a,u=6;s.save(),s.translate(r.x,r.y),s.beginPath(),s.arc(0,0,u,0,2*Math.PI,!1),s.fillStyle="#1976d2",s.fill(),s.lineWidth=.4,s.strokeStyle="black",s.stroke(),s.font=`${l}px Sans-Serif`,s.textAlign="center",s.textBaseline="middle",s.strokeStyle="black",s.lineWidth=.2,s.strokeText(o,0,0),s.fillStyle="white",s.fillText(o,0,0),s.restore()}})})]})},aH=gd,WOt=()=>{yi.setState({isAddNodeActive:!1}),yi.setState({activeStep:0})},XOt="Agregando nodo",YOt="Nodo Agregado",QU=()=>{const i=yi(n=>n.activeStep),e=yi(n=>n.isUploadFirestore);return st.jsx(st.Fragment,{children:st.jsxs(bs,{sx:{display:"flex",flexDirection:"column"},children:[st.jsx(Q$,{buttonFunction:WOt,isUploadFirestore:e}),st.jsx("h1",{style:{color:i==2?aH.palette.action.success:aH.palette.text.secondary,textAlign:"center"},children:i==2?YOt:XOt})]})})},KOt=({control:i,errors:e})=>st.jsxs(bs,{sx:SW,children:[st.jsx(QU,{}),st.jsx(mN,{name:"name",control:i,rules:{required:"El nombre es obligatorio"},render:({field:n})=>{var r;return st.jsx(Hwt,{...n,label:"Nombre del nodo",error:!!e.name,helperText:typeof((r=e.name)==null?void 0:r.message)=="string"?e.name.message:void 0})}}),st.jsx(mN,{name:"position",control:i,render:({field:n})=>{var r;return st.jsxs(wU,{sx:sMt,children:[st.jsx(AU,{style:aMt,children:"Tipo de nodo"}),st.jsxs(twt,{...n,children:[st.jsx(f0,{value:"guard",control:st.jsx(d0,{}),label:"Guardia"}),st.jsx(f0,{value:"pass",control:st.jsx(d0,{}),label:"Pasaje"}),st.jsx(f0,{value:"submission",control:st.jsx(d0,{}),label:"Sumisin"}),st.jsx(f0,{value:"switch",control:st.jsx(d0,{}),label:"Raspado"}),st.jsx(f0,{value:"transition",control:st.jsx(d0,{}),label:"Transicin"}),st.jsx(f0,{value:"control",control:st.jsx(d0,{}),label:"Control"})]}),e.position&&st.jsx(vc,{color:"error",variant:"caption",children:typeof((r=e.position)==null?void 0:r.message)=="string"?e.position.message:""})]})}})]}),ZOt=({control:i,errors:e,nodeOptions:n,isNot1Step2:r})=>st.jsxs(bs,{sx:SW,children:[st.jsx(QU,{}),st.jsx(AU,{children:"Seleccionar nodo origen"}),st.jsx(mN,{name:"nodeSourceIndex",control:i,render:({field:s})=>{var a;return st.jsxs(wU,{error:!!e.nodeSource,children:[st.jsxs(bs,{sx:lMt(r==1),children:[st.jsx(vc,{children:"Elige una conexin de origen o presion en saltar"}),st.jsx(DU,{sx:oMt(r==1),...s,children:n.filter(o=>o.name&&o.name.trim()!=="").map((o,l)=>st.jsx(_0,{value:o.index,children:`${o.name}: ${o.index}`},l))})]}),e.nodeSource&&st.jsx(vc,{color:"error",variant:"caption",children:typeof((a=e.nodeSource)==null?void 0:a.message)=="string"?e.nodeSource.message:""})]})}})]}),QOt=({newNodeData:i,selectedSourceNodeData:e})=>{const n=!yi(s=>s.isUploadFirestore),r={nodes:[{id:i.index,name:i.name},{id:i.nodeSourceIndex,name:e.name}],links:[{source:i.nodeSourceIndex,target:i.index}]};return st.jsxs(bs,{sx:uMt,children:[st.jsx(QU,{}),st.jsxs(bs,{sx:cMt(n),children:[st.jsx(h0,{sx:{width:"60%"}}),st.jsx(h0,{sx:{width:"25%"}}),st.jsx(h0,{sx:{width:"32%"}}),st.jsx(h0,{sx:{width:"20%"}}),st.jsx(h0,{sx:{width:"50%"}}),st.jsx(h0,{sx:{width:"54%"}})]}),st.jsx(bs,{sx:fMt(n),children:st.jsxs("div",{children:[st.jsx("h3",{children:"Resumen del Nodo"}),st.jsxs("p",{children:[st.jsx("strong",{children:"ndice:"})," ",i.index]}),st.jsxs("p",{children:[st.jsx("strong",{children:"Nombre:"})," ",i.name]}),st.jsxs("p",{children:[st.jsx("strong",{children:"Posicin:"})," ",i.position]}),st.jsxs("p",{children:[st.jsx("strong",{children:"Nodo Origen:"})," "," {"+i.nodeSourceIndex+"}"]}),st.jsxs("p",{children:[st.jsx("strong",{children:"Fecha de subida:"})," ",i.uploadedDate??"Sin fecha an"]})]})}),st.jsx($Ot,{graphStepFinalData:r,isUploadFirestore:n})]})},JOt=gd,tIt={color:JOt.palette.text.primary,zIndex:20,width:"100%",height:"100%",position:"absolute",background:"#ffffff",overflow:"auto",top:0,flexDirection:"column",justifyContent:"space-between",display:"flex"},eIt=bW({index:bN().required(),name:_N().min(3,"El nombre debe tener al menos 3 caracteres").required("El nombre es obligatorio"),position:_N().required("La posicin es obligatoria"),nodeSourceIndex:bN().required("El nodo origen es obligatorio")}),nIt=()=>{const[i,e]=tt.useState({index:0,name:"",position:"",nodeSourceIndex:1}),[n,r]=tt.useState({id:0,index:0,name:"",position:""}),{control:s,trigger:a,watch:o,reset:l,handleSubmit:u,formState:{errors:f}}=bAt({resolver:EAt(eIt),mode:"onChange",defaultValues:{index:0,name:"",position:"",nodeSourceIndex:1}}),d=yi(S=>S.activeStep),[m,y]=tt.useState([]);pn.useEffect(()=>{(async()=>{try{const T=await xU(Qh.nodes);y(T||[])}catch(T){console.error("Error al obtener nodos desde Firestore:",T),y([])}})()},[]);const _=async S=>{yi.setState({isUploadFirestore:!0});const T=await ISt(Qh.nodes)+1,b=new Date,M=new Date(b),R=S.nodeSourceIndex,A=m.find(I=>I.index===R);F$(Qh.nodes,Qh.links,S.index=T,S.name,S.position,S.nodeSourceIndex,S.uploadedDate=M.toLocaleDateString()),e({...S}),r({...A}),l()},x=async()=>{const S=[!1,!1],T=await a(["name","position"]),b=o("nodeSourceIndex");return T&&(S[0]=!0),b!==1&&(S[1]=!0),S};return st.jsxs(bs,{style:tIt,children:[st.jsx(bs,{style:{padding:"2rem 0"},children:st.jsx(Z$,{})}),d===0&&st.jsx(KOt,{control:s,errors:f}),d===1&&st.jsx(ZOt,{control:s,errors:f,nodeOptions:m,isNot1Step2:o("nodeSourceIndex")}),d===2&&st.jsx(QOt,{newNodeData:i,selectedSourceNodeData:n}),st.jsx(rMt,{onValidate:x,onHandleSubmit:u(_)})]})};function iIt(){const i=yi(r=>r.showAlert),e=yi(r=>r.alertMessage),n=yi(r=>r.alertSeverity);return st.jsx(fwt,{sx:{width:"80%",position:"absolute",bottom:20,zIndex:9999},spacing:2,children:st.jsx(GEt,{direction:"left",in:i,mountOnEnter:!0,unmountOnExit:!0,children:st.jsx(cN,{in:i,children:st.jsx(dEt,{severity:n,children:e})})})})}const rIt=()=>{const i={displayName:"",email:"",photoURL:""};ppt(XL,e=>{e?yi.setState({userLoginData:e,isUserLogin:!0}):yi.setState({userLoginData:i,isUserLogin:!1})})};function sIt(){const i=yi(o=>o.isAddNodeActive),e=yi(o=>o.isLoginWindowActive),n=yi(o=>o.isUserLogin),r=yi(o=>o.userLoginData),s=tt.useRef(null),a=yi(o=>o.triggerAlert);return tt.useEffect(()=>{rIt()},[]),tt.useEffect(()=>{n?(a(`Sesin iniciada ${r.displayName}`,"success"),yi.setState({isLoginWindowActive:!1})):a("Sesin Cerrada","warning")},[n]),st.jsxs("div",{className:"appContainer",children:[i?st.jsx(nIt,{}):null,e?st.jsx(tAt,{}):st.jsx(e0t,{}),st.jsx("div",{className:"canvasContainer",children:st.jsxs(Rrt,{camera:{fov:Sg.fov,near:Sg.near,far:Sg.far,position:Sg.position},style:{backgroundColor:Hrt.canvasBackgraundColor},children:[st.jsx(KSt,{cameraControlsRef:s}),st.jsx(zrt,{ref:s,dollySpeed:Sg.dollySpeed,maxDistance:Sg.maxDistance,minDistance:Sg.minDistance})]})}),st.jsx(iIt,{})]})}uY.createRoot(document.getElementById("root")).render(st.jsx(sIt,{}));
