var pH=Object.defineProperty;var mH=(n,t,e)=>t in n?pH(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Mv=(n,t,e)=>mH(n,typeof t!="symbol"?t+"":t,e);function gH(n,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();function c_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var IA={exports:{}},Av={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GN;function yH(){if(GN)return Av;GN=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var l in r)l!=="key"&&(s[l]=r[l])}else s=r;return r=s.ref,{$$typeof:n,type:i,key:a,ref:r!==void 0?r:null,props:s}}return Av.Fragment=t,Av.jsx=e,Av.jsxs=e,Av}var qN;function _H(){return qN||(qN=1,IA.exports=yH()),IA.exports}var Mt=_H(),PA={exports:{}},wv={},LA={exports:{}},UA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jN;function vH(){return jN||(jN=1,function(n){function t(Y,Z){var at=Y.length;Y.push(Z);t:for(;0<at;){var ct=at-1>>>1,$=Y[ct];if(0<r($,Z))Y[ct]=Z,Y[at]=$,at=ct;else break t}}function e(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var Z=Y[0],at=Y.pop();if(at!==Z){Y[0]=at;t:for(var ct=0,$=Y.length,pt=$>>>1;ct<pt;){var wt=2*(ct+1)-1,zt=Y[wt],nt=wt+1,lt=Y[nt];if(0>r(zt,at))nt<$&&0>r(lt,zt)?(Y[ct]=lt,Y[nt]=at,ct=nt):(Y[ct]=zt,Y[wt]=at,ct=wt);else if(nt<$&&0>r(lt,at))Y[ct]=lt,Y[nt]=at,ct=nt;else break t}}return Z}function r(Y,Z){var at=Y.sortIndex-Z.sortIndex;return at!==0?at:Y.id-Z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var c=[],f=[],m=1,g=null,y=3,v=!1,S=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D(Y){for(var Z=e(f);Z!==null;){if(Z.callback===null)i(f);else if(Z.startTime<=Y)i(f),Z.sortIndex=Z.expirationTime,t(c,Z);else break;Z=e(f)}}function O(Y){if(E=!1,D(Y),!S)if(e(c)!==null)S=!0,st();else{var Z=e(f);Z!==null&&it(O,Z.startTime-Y)}}var N=!1,B=-1,L=5,U=-1;function I(){return!(n.unstable_now()-U<L)}function w(){if(N){var Y=n.unstable_now();U=Y;var Z=!0;try{t:{S=!1,E&&(E=!1,x(B),B=-1),v=!0;var at=y;try{e:{for(D(Y),g=e(c);g!==null&&!(g.expirationTime>Y&&I());){var ct=g.callback;if(typeof ct=="function"){g.callback=null,y=g.priorityLevel;var $=ct(g.expirationTime<=Y);if(Y=n.unstable_now(),typeof $=="function"){g.callback=$,D(Y),Z=!0;break e}g===e(c)&&i(c),D(Y)}else i(c);g=e(c)}if(g!==null)Z=!0;else{var pt=e(f);pt!==null&&it(O,pt.startTime-Y),Z=!1}}break t}finally{g=null,y=at,v=!1}Z=void 0}}finally{Z?V():N=!1}}}var V;if(typeof R=="function")V=function(){R(w)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,k=G.port2;G.port1.onmessage=w,V=function(){k.postMessage(null)}}else V=function(){T(w,0)};function st(){N||(N=!0,V())}function it(Y,Z){B=T(function(){Y(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_continueExecution=function(){S||v||(S=!0,st())},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return e(c)},n.unstable_next=function(Y){switch(y){case 1:case 2:case 3:var Z=3;break;default:Z=y}var at=y;y=Z;try{return Y()}finally{y=at}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Y,Z){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var at=y;y=Y;try{return Z()}finally{y=at}},n.unstable_scheduleCallback=function(Y,Z,at){var ct=n.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?ct+at:ct):at=ct,Y){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=at+$,Y={id:m++,callback:Z,priorityLevel:Y,startTime:at,expirationTime:$,sortIndex:-1},at>ct?(Y.sortIndex=at,t(f,Y),e(c)===null&&Y===e(f)&&(E?(x(B),B=-1):E=!0,it(O,at-ct))):(Y.sortIndex=$,t(c,Y),S||v||(S=!0,st())),Y},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(Y){var Z=y;return function(){var at=y;y=Z;try{return Y.apply(this,arguments)}finally{y=at}}}}(UA)),UA}var XN;function R2(){return XN||(XN=1,LA.exports=vH()),LA.exports}var zA={exports:{}},An={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WN;function xH(){if(WN)return An;WN=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function y($){return $===null||typeof $!="object"?null:($=g&&$[g]||$["@@iterator"],typeof $=="function"?$:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function T($,pt,wt){this.props=$,this.context=pt,this.refs=E,this.updater=wt||v}T.prototype.isReactComponent={},T.prototype.setState=function($,pt){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,pt,"setState")},T.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function x(){}x.prototype=T.prototype;function R($,pt,wt){this.props=$,this.context=pt,this.refs=E,this.updater=wt||v}var D=R.prototype=new x;D.constructor=R,S(D,T.prototype),D.isPureReactComponent=!0;var O=Array.isArray,N={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function L($,pt,wt,zt,nt,lt){return wt=lt.ref,{$$typeof:n,type:$,key:pt,ref:wt!==void 0?wt:null,props:lt}}function U($,pt){return L($.type,pt,void 0,void 0,void 0,$.props)}function I($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function w($){var pt={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(wt){return pt[wt]})}var V=/\/+/g;function G($,pt){return typeof $=="object"&&$!==null&&$.key!=null?w(""+$.key):pt.toString(36)}function k(){}function st($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(k,k):($.status="pending",$.then(function(pt){$.status==="pending"&&($.status="fulfilled",$.value=pt)},function(pt){$.status==="pending"&&($.status="rejected",$.reason=pt)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function it($,pt,wt,zt,nt){var lt=typeof $;(lt==="undefined"||lt==="boolean")&&($=null);var ft=!1;if($===null)ft=!0;else switch(lt){case"bigint":case"string":case"number":ft=!0;break;case"object":switch($.$$typeof){case n:case t:ft=!0;break;case m:return ft=$._init,it(ft($._payload),pt,wt,zt,nt)}}if(ft)return nt=nt($),ft=zt===""?"."+G($,0):zt,O(nt)?(wt="",ft!=null&&(wt=ft.replace(V,"$&/")+"/"),it(nt,pt,wt,"",function(Wt){return Wt})):nt!=null&&(I(nt)&&(nt=U(nt,wt+(nt.key==null||$&&$.key===nt.key?"":(""+nt.key).replace(V,"$&/")+"/")+ft)),pt.push(nt)),1;ft=0;var mt=zt===""?".":zt+":";if(O($))for(var Dt=0;Dt<$.length;Dt++)zt=$[Dt],lt=mt+G(zt,Dt),ft+=it(zt,pt,wt,lt,nt);else if(Dt=y($),typeof Dt=="function")for($=Dt.call($),Dt=0;!(zt=$.next()).done;)zt=zt.value,lt=mt+G(zt,Dt++),ft+=it(zt,pt,wt,lt,nt);else if(lt==="object"){if(typeof $.then=="function")return it(st($),pt,wt,zt,nt);throw pt=String($),Error("Objects are not valid as a React child (found: "+(pt==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":pt)+"). If you meant to render a collection of children, use an array instead.")}return ft}function Y($,pt,wt){if($==null)return $;var zt=[],nt=0;return it($,zt,"","",function(lt){return pt.call(wt,lt,nt++)}),zt}function Z($){if($._status===-1){var pt=$._result;pt=pt(),pt.then(function(wt){($._status===0||$._status===-1)&&($._status=1,$._result=wt)},function(wt){($._status===0||$._status===-1)&&($._status=2,$._result=wt)}),$._status===-1&&($._status=0,$._result=pt)}if($._status===1)return $._result.default;throw $._result}var at=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var pt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(pt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)};function ct(){}return An.Children={map:Y,forEach:function($,pt,wt){Y($,function(){pt.apply(this,arguments)},wt)},count:function($){var pt=0;return Y($,function(){pt++}),pt},toArray:function($){return Y($,function(pt){return pt})||[]},only:function($){if(!I($))throw Error("React.Children.only expected to receive a single React element child.");return $}},An.Component=T,An.Fragment=e,An.Profiler=r,An.PureComponent=R,An.StrictMode=i,An.Suspense=c,An.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,An.act=function(){throw Error("act(...) is not supported in production builds of React.")},An.cache=function($){return function(){return $.apply(null,arguments)}},An.cloneElement=function($,pt,wt){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var zt=S({},$.props),nt=$.key,lt=void 0;if(pt!=null)for(ft in pt.ref!==void 0&&(lt=void 0),pt.key!==void 0&&(nt=""+pt.key),pt)!B.call(pt,ft)||ft==="key"||ft==="__self"||ft==="__source"||ft==="ref"&&pt.ref===void 0||(zt[ft]=pt[ft]);var ft=arguments.length-2;if(ft===1)zt.children=wt;else if(1<ft){for(var mt=Array(ft),Dt=0;Dt<ft;Dt++)mt[Dt]=arguments[Dt+2];zt.children=mt}return L($.type,nt,void 0,void 0,lt,zt)},An.createContext=function($){return $={$$typeof:a,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:s,_context:$},$},An.createElement=function($,pt,wt){var zt,nt={},lt=null;if(pt!=null)for(zt in pt.key!==void 0&&(lt=""+pt.key),pt)B.call(pt,zt)&&zt!=="key"&&zt!=="__self"&&zt!=="__source"&&(nt[zt]=pt[zt]);var ft=arguments.length-2;if(ft===1)nt.children=wt;else if(1<ft){for(var mt=Array(ft),Dt=0;Dt<ft;Dt++)mt[Dt]=arguments[Dt+2];nt.children=mt}if($&&$.defaultProps)for(zt in ft=$.defaultProps,ft)nt[zt]===void 0&&(nt[zt]=ft[zt]);return L($,lt,void 0,void 0,null,nt)},An.createRef=function(){return{current:null}},An.forwardRef=function($){return{$$typeof:l,render:$}},An.isValidElement=I,An.lazy=function($){return{$$typeof:m,_payload:{_status:-1,_result:$},_init:Z}},An.memo=function($,pt){return{$$typeof:f,type:$,compare:pt===void 0?null:pt}},An.startTransition=function($){var pt=N.T,wt={};N.T=wt;try{var zt=$(),nt=N.S;nt!==null&&nt(wt,zt),typeof zt=="object"&&zt!==null&&typeof zt.then=="function"&&zt.then(ct,at)}catch(lt){at(lt)}finally{N.T=pt}},An.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},An.use=function($){return N.H.use($)},An.useActionState=function($,pt,wt){return N.H.useActionState($,pt,wt)},An.useCallback=function($,pt){return N.H.useCallback($,pt)},An.useContext=function($){return N.H.useContext($)},An.useDebugValue=function(){},An.useDeferredValue=function($,pt){return N.H.useDeferredValue($,pt)},An.useEffect=function($,pt){return N.H.useEffect($,pt)},An.useId=function(){return N.H.useId()},An.useImperativeHandle=function($,pt,wt){return N.H.useImperativeHandle($,pt,wt)},An.useInsertionEffect=function($,pt){return N.H.useInsertionEffect($,pt)},An.useLayoutEffect=function($,pt){return N.H.useLayoutEffect($,pt)},An.useMemo=function($,pt){return N.H.useMemo($,pt)},An.useOptimistic=function($,pt){return N.H.useOptimistic($,pt)},An.useReducer=function($,pt,wt){return N.H.useReducer($,pt,wt)},An.useRef=function($){return N.H.useRef($)},An.useState=function($){return N.H.useState($)},An.useSyncExternalStore=function($,pt,wt){return N.H.useSyncExternalStore($,pt,wt)},An.useTransition=function(){return N.H.useTransition()},An.version="19.0.0",An}var YN;function f_(){return YN||(YN=1,zA.exports=xH()),zA.exports}var BA={exports:{}},da={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $N;function bH(){if($N)return da;$N=1;var n=f_();function t(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(c,f,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:c,containerInfo:f,implementation:m}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return da.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,da.createPortal=function(c,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return s(c,f,null,m)},da.flushSync=function(c){var f=a.T,m=i.p;try{if(a.T=null,i.p=2,c)return c()}finally{a.T=f,i.p=m,i.d.f()}},da.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(c,f))},da.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},da.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var m=f.as,g=l(m,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,v=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?i.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:v}):m==="script"&&i.d.X(c,{crossOrigin:g,integrity:y,fetchPriority:v,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},da.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=l(f.as,f.crossOrigin);i.d.M(c,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(c)},da.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,g=l(m,f.crossOrigin);i.d.L(c,m,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},da.preloadModule=function(c,f){if(typeof c=="string")if(f){var m=l(f.as,f.crossOrigin);i.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(c)},da.requestFormReset=function(c){i.d.r(c)},da.unstable_batchedUpdates=function(c,f){return c(f)},da.useFormState=function(c,f,m){return a.H.useFormState(c,f,m)},da.useFormStatus=function(){return a.H.useHostTransitionStatus()},da.version="19.0.0",da}var KN;function Lz(){if(KN)return BA.exports;KN=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),BA.exports=bH(),BA.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZN;function SH(){if(ZN)return wv;ZN=1;var n=R2(),t=f_(),e=Lz();function i(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}var s=Symbol.for("react.element"),a=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.consumer"),v=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),O=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function B(o){return o===null||typeof o!="object"?null:(o=N&&o[N]||o["@@iterator"],typeof o=="function"?o:null)}var L=Symbol.for("react.client.reference");function U(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===L?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case c:return"Fragment";case l:return"Portal";case m:return"Profiler";case f:return"StrictMode";case E:return"Suspense";case T:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case v:return(o.displayName||"Context")+".Provider";case y:return(o._context.displayName||"Context")+".Consumer";case S:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case x:return u=o.displayName||null,u!==null?u:U(o.type)||"Memo";case R:u=o._payload,o=o._init;try{return U(o(u))}catch{}}return null}var I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,w=Object.assign,V,G;function k(o){if(V===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);V=u&&u[1]||"",G=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+V+o+G}var st=!1;function it(o,u){if(!o||st)return"";st=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(u){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(Qt){var Gt=Qt}Reflect.construct(o,[],ue)}else{try{ue.call()}catch(Qt){Gt=Qt}o.call(ue.prototype)}}else{try{throw Error()}catch(Qt){Gt=Qt}(ue=o())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(Qt){if(Qt&&Gt&&typeof Qt.stack=="string")return[Qt.stack,Gt.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=_.DetermineComponentFrameRoot(),X=P[0],Q=P[1];if(X&&Q){var dt=X.split(`
`),Et=Q.split(`
`);for(A=_=0;_<dt.length&&!dt[_].includes("DetermineComponentFrameRoot");)_++;for(;A<Et.length&&!Et[A].includes("DetermineComponentFrameRoot");)A++;if(_===dt.length||A===Et.length)for(_=dt.length-1,A=Et.length-1;1<=_&&0<=A&&dt[_]!==Et[A];)A--;for(;1<=_&&0<=A;_--,A--)if(dt[_]!==Et[A]){if(_!==1||A!==1)do if(_--,A--,0>A||dt[_]!==Et[A]){var ee=`
`+dt[_].replace(" at new "," at ");return o.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",o.displayName)),ee}while(1<=_&&0<=A);break}}}finally{st=!1,Error.prepareStackTrace=p}return(p=o?o.displayName||o.name:"")?k(p):""}function Y(o){switch(o.tag){case 26:case 27:case 5:return k(o.type);case 16:return k("Lazy");case 13:return k("Suspense");case 19:return k("SuspenseList");case 0:case 15:return o=it(o.type,!1),o;case 11:return o=it(o.type.render,!1),o;case 1:return o=it(o.type,!0),o;default:return""}}function Z(o){try{var u="";do u+=Y(o),o=o.return;while(o);return u}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function at(o){var u=o,p=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(p=u.return),o=u.return;while(o)}return u.tag===3?p:null}function ct(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function $(o){if(at(o)!==o)throw Error(i(188))}function pt(o){var u=o.alternate;if(!u){if(u=at(o),u===null)throw Error(i(188));return u!==o?null:o}for(var p=o,_=u;;){var A=p.return;if(A===null)break;var P=A.alternate;if(P===null){if(_=A.return,_!==null){p=_;continue}break}if(A.child===P.child){for(P=A.child;P;){if(P===p)return $(A),o;if(P===_)return $(A),u;P=P.sibling}throw Error(i(188))}if(p.return!==_.return)p=A,_=P;else{for(var X=!1,Q=A.child;Q;){if(Q===p){X=!0,p=A,_=P;break}if(Q===_){X=!0,_=A,p=P;break}Q=Q.sibling}if(!X){for(Q=P.child;Q;){if(Q===p){X=!0,p=P,_=A;break}if(Q===_){X=!0,_=P,p=A;break}Q=Q.sibling}if(!X)throw Error(i(189))}}if(p.alternate!==_)throw Error(i(190))}if(p.tag!==3)throw Error(i(188));return p.stateNode.current===p?o:u}function wt(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=wt(o),u!==null)return u;o=o.sibling}return null}var zt=Array.isArray,nt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt={pending:!1,data:null,method:null,action:null},ft=[],mt=-1;function Dt(o){return{current:o}}function Wt(o){0>mt||(o.current=ft[mt],ft[mt]=null,mt--)}function Nt(o,u){mt++,ft[mt]=o.current,o.current=u}var Jt=Dt(null),Pt=Dt(null),kt=Dt(null),tt=Dt(null);function se(o,u){switch(Nt(kt,u),Nt(Pt,o),Nt(Jt,null),o=u.nodeType,o){case 9:case 11:u=(u=u.documentElement)&&(u=u.namespaceURI)?_N(u):0;break;default:if(o=o===8?u.parentNode:u,u=o.tagName,o=o.namespaceURI)o=_N(o),u=vN(o,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}Wt(Jt),Nt(Jt,u)}function $t(){Wt(Jt),Wt(Pt),Wt(kt)}function ce(o){o.memoizedState!==null&&Nt(tt,o);var u=Jt.current,p=vN(u,o.type);u!==p&&(Nt(Pt,o),Nt(Jt,p))}function rt(o){Pt.current===o&&(Wt(Jt),Wt(Pt)),tt.current===o&&(Wt(tt),xv._currentValue=lt)}var _t=Object.prototype.hasOwnProperty,gt=n.unstable_scheduleCallback,W=n.unstable_cancelCallback,q=n.unstable_shouldYield,ht=n.unstable_requestPaint,xt=n.unstable_now,Vt=n.unstable_getCurrentPriorityLevel,Lt=n.unstable_ImmediatePriority,le=n.unstable_UserBlockingPriority,fe=n.unstable_NormalPriority,Se=n.unstable_LowPriority,He=n.unstable_IdlePriority,Kt=n.log,xe=n.unstable_setDisableYieldValue,De=null,Ae=null;function Yt(o){if(Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(De,o,void 0,(o.current.flags&128)===128)}catch{}}function Oe(o){if(typeof Kt=="function"&&xe(o),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(De,o)}catch{}}var Te=Math.clz32?Math.clz32:Me,fn=Math.log,bt=Math.LN2;function Me(o){return o>>>=0,o===0?32:31-(fn(o)/bt|0)|0}var Xt=128,ne=4194304;function _e(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function ve(o,u){var p=o.pendingLanes;if(p===0)return 0;var _=0,A=o.suspendedLanes,P=o.pingedLanes,X=o.warmLanes;o=o.finishedLanes!==0;var Q=p&134217727;return Q!==0?(p=Q&~A,p!==0?_=_e(p):(P&=Q,P!==0?_=_e(P):o||(X=Q&~X,X!==0&&(_=_e(X))))):(Q=p&~A,Q!==0?_=_e(Q):P!==0?_=_e(P):o||(X=p&~X,X!==0&&(_=_e(X)))),_===0?0:u!==0&&u!==_&&(u&A)===0&&(A=_&-_,X=u&-u,A>=X||A===32&&(X&4194176)!==0)?u:_}function je(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function Yn(o,u){switch(o){case 1:case 2:case 4:case 8:return u+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ci(){var o=Xt;return Xt<<=1,(Xt&4194176)===0&&(Xt=128),o}function yn(){var o=ne;return ne<<=1,(ne&62914560)===0&&(ne=4194304),o}function kr(o){for(var u=[],p=0;31>p;p++)u.push(o);return u}function $n(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Hu(o,u,p,_,A,P){var X=o.pendingLanes;o.pendingLanes=p,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=p,o.entangledLanes&=p,o.errorRecoveryDisabledLanes&=p,o.shellSuspendCounter=0;var Q=o.entanglements,dt=o.expirationTimes,Et=o.hiddenUpdates;for(p=X&~p;0<p;){var ee=31-Te(p),ue=1<<ee;Q[ee]=0,dt[ee]=-1;var Gt=Et[ee];if(Gt!==null)for(Et[ee]=null,ee=0;ee<Gt.length;ee++){var Qt=Gt[ee];Qt!==null&&(Qt.lane&=-536870913)}p&=~ue}_!==0&&Da(o,_,0),P!==0&&A===0&&o.tag!==0&&(o.suspendedLanes|=P&~(X&~u))}function Da(o,u,p){o.pendingLanes|=u,o.suspendedLanes&=~u;var _=31-Te(u);o.entangledLanes|=u,o.entanglements[_]=o.entanglements[_]|1073741824|p&4194218}function Qr(o,u){var p=o.entangledLanes|=u;for(o=o.entanglements;p;){var _=31-Te(p),A=1<<_;A&u|o[_]&u&&(o[_]|=u),p&=~A}}function Ls(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Gu(){var o=nt.p;return o!==0?o:(o=window.event,o===void 0?32:zN(o.type))}function Jr(o,u){var p=nt.p;try{return nt.p=o,u()}finally{nt.p=p}}var Ki=Math.random().toString(36).slice(2),Gi="__reactFiber$"+Ki,an="__reactProps$"+Ki,ea="__reactContainer$"+Ki,to="__reactEvents$"+Ki,Xl="__reactListeners$"+Ki,Na="__reactHandles$"+Ki,uf="__reactResources$"+Ki,eo="__reactMarker$"+Ki;function Fo(o){delete o[Gi],delete o[an],delete o[to],delete o[Xl],delete o[Na]}function Us(o){var u=o[Gi];if(u)return u;for(var p=o.parentNode;p;){if(u=p[ea]||p[Gi]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(o=SN(o);o!==null;){if(p=o[Gi])return p;o=SN(o)}return u}o=p,p=o.parentNode}return null}function K(o){if(o=o[Gi]||o[ea]){var u=o.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return o}return null}function vt(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(i(33))}function Ut(o){var u=o[uf];return u||(u=o[uf]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function It(o){o[eo]=!0}var At=new Set,ae={};function ge(o,u){be(o,u),be(o+"Capture",u)}function be(o,u){for(ae[o]=u,o=0;o<u.length;o++)At.add(u[o])}var Ee=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ye=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xe={},Ue={};function Sn(o){return _t.call(Ue,o)?!0:_t.call(Xe,o)?!1:Ye.test(o)?Ue[o]=!0:(Xe[o]=!0,!1)}function vn(o,u,p){if(Sn(u))if(p===null)o.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var _=u.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+p)}}function si(o,u,p){if(p===null)o.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+p)}}function Nn(o,u,p,_){if(_===null)o.removeAttribute(p);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(p);return}o.setAttributeNS(u,p,""+_)}}function Ke(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Fe(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function er(o){var u=Fe(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,u),_=""+o[u];if(!o.hasOwnProperty(u)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var A=p.get,P=p.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return A.call(this)},set:function(X){_=""+X,P.call(this,X)}}),Object.defineProperty(o,u,{enumerable:p.enumerable}),{getValue:function(){return _},setValue:function(X){_=""+X},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function En(o){o._valueTracker||(o._valueTracker=er(o))}function ts(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var p=u.getValue(),_="";return o&&(_=Fe(o)?o.checked?"true":"false":o.value),o=_,o!==p?(u.setValue(o),!0):!1}function zs(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var qi=/[\n"\\]/g;function ui(o){return o.replace(qi,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function kn(o,u,p,_,A,P,X,Q){o.name="",X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?o.type=X:o.removeAttribute("type"),u!=null?X==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+Ke(u)):o.value!==""+Ke(u)&&(o.value=""+Ke(u)):X!=="submit"&&X!=="reset"||o.removeAttribute("value"),u!=null?Ar(o,X,Ke(u)):p!=null?Ar(o,X,Ke(p)):_!=null&&o.removeAttribute("value"),A==null&&P!=null&&(o.defaultChecked=!!P),A!=null&&(o.checked=A&&typeof A!="function"&&typeof A!="symbol"),Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?o.name=""+Ke(Q):o.removeAttribute("name")}function lr(o,u,p,_,A,P,X,Q){if(P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(o.type=P),u!=null||p!=null){if(!(P!=="submit"&&P!=="reset"||u!=null))return;p=p!=null?""+Ke(p):"",u=u!=null?""+Ke(u):p,Q||u===o.value||(o.value=u),o.defaultValue=u}_=_??A,_=typeof _!="function"&&typeof _!="symbol"&&!!_,o.checked=Q?o.checked:!!_,o.defaultChecked=!!_,X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(o.name=X)}function Ar(o,u,p){u==="number"&&zs(o.ownerDocument)===o||o.defaultValue===""+p||(o.defaultValue=""+p)}function Qe(o,u,p,_){if(o=o.options,u){u={};for(var A=0;A<p.length;A++)u["$"+p[A]]=!0;for(p=0;p<o.length;p++)A=u.hasOwnProperty("$"+o[p].value),o[p].selected!==A&&(o[p].selected=A),A&&_&&(o[p].defaultSelected=!0)}else{for(p=""+Ke(p),u=null,A=0;A<o.length;A++){if(o[A].value===p){o[A].selected=!0,_&&(o[A].defaultSelected=!0);return}u!==null||o[A].disabled||(u=o[A])}u!==null&&(u.selected=!0)}}function Zi(o,u,p){if(u!=null&&(u=""+Ke(u),u!==o.value&&(o.value=u),p==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=p!=null?""+Ke(p):""}function cs(o,u,p,_){if(u==null){if(_!=null){if(p!=null)throw Error(i(92));if(zt(_)){if(1<_.length)throw Error(i(93));_=_[0]}p=_}p==null&&(p=""),u=p}p=Ke(u),o.defaultValue=p,_=o.textContent,_===p&&_!==""&&_!==null&&(o.value=_)}function ur(o,u){if(u){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=u;return}}o.textContent=u}var Th=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qu(o,u,p){var _=u.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?_?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":_?o.setProperty(u,p):typeof p!="number"||p===0||Th.has(u)?u==="float"?o.cssFloat=p:o[u]=(""+p).trim():o[u]=p+"px"}function ep(o,u,p){if(u!=null&&typeof u!="object")throw Error(i(62));if(o=o.style,p!=null){for(var _ in p)!p.hasOwnProperty(_)||u!=null&&u.hasOwnProperty(_)||(_.indexOf("--")===0?o.setProperty(_,""):_==="float"?o.cssFloat="":o[_]="");for(var A in u)_=u[A],u.hasOwnProperty(A)&&p[A]!==_&&qu(o,A,_)}else for(var P in u)u.hasOwnProperty(P)&&qu(o,P,u[P])}function cf(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Km=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ko(o){return Zm.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Ia=null;function ju(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var gl=null,yl=null;function Ho(o){var u=K(o);if(u&&(o=u.stateNode)){var p=o[an]||null;t:switch(o=u.stateNode,u.type){case"input":if(kn(o,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),u=p.name,p.type==="radio"&&u!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+ui(""+u)+'"][type="radio"]'),u=0;u<p.length;u++){var _=p[u];if(_!==o&&_.form===o.form){var A=_[an]||null;if(!A)throw Error(i(90));kn(_,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(u=0;u<p.length;u++)_=p[u],_.form===o.form&&ts(_)}break t;case"textarea":Zi(o,p.value,p.defaultValue);break t;case"select":u=p.value,u!=null&&Qe(o,!!p.multiple,u,!1)}}}var Mh=!1;function np(o,u,p){if(Mh)return o(u,p);Mh=!0;try{var _=o(u);return _}finally{if(Mh=!1,(gl!==null||yl!==null)&&(zf(),gl&&(u=gl,o=yl,yl=gl=null,Ho(u),o)))for(u=0;u<o.length;u++)Ho(o[u])}}function Xu(o,u){var p=o.stateNode;if(p===null)return null;var _=p[an]||null;if(_===null)return null;p=_[u];t:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(o=o.type,_=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!_;break t;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(i(231,u,typeof p));return p}var na=!1;if(Ee)try{var Wu={};Object.defineProperty(Wu,"passive",{get:function(){na=!0}}),window.addEventListener("test",Wu,Wu),window.removeEventListener("test",Wu,Wu)}catch{na=!1}var Go=null,Yu=null,Wl=null;function Ah(){if(Wl)return Wl;var o,u=Yu,p=u.length,_,A="value"in Go?Go.value:Go.textContent,P=A.length;for(o=0;o<p&&u[o]===A[o];o++);var X=p-o;for(_=1;_<=X&&u[p-_]===A[P-_];_++);return Wl=A.slice(o,1<_?1-_:void 0)}function ia(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function no(){return!0}function $u(){return!1}function Hr(o){function u(p,_,A,P,X){this._reactName=p,this._targetInst=A,this.type=_,this.nativeEvent=P,this.target=X,this.currentTarget=null;for(var Q in o)o.hasOwnProperty(Q)&&(p=o[Q],this[Q]=p?p(P):P[Q]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?no:$u,this.isPropagationStopped=$u,this}return w(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=no)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=no)},persist:function(){},isPersistent:no}),u}var ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ku=Hr(ei),Zu=w({},ei,{view:0,detail:0}),ip=Hr(Zu),io,Yl,qo,$l=w({},Zu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kl,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==qo&&(qo&&o.type==="mousemove"?(io=o.screenX-qo.screenX,Yl=o.screenY-qo.screenY):Yl=io=0,qo=o),io)},movementY:function(o){return"movementY"in o?o.movementY:Yl}}),Pa=Hr($l),rp=w({},$l,{dataTransfer:0}),A_=Hr(rp),Qi=w({},Zu,{relatedTarget:0}),ff=Hr(Qi),wh=w({},ei,{animationName:0,elapsedTime:0,pseudoElement:0}),hf=Hr(wh),sp=w({},ei,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),df=Hr(sp),pf=w({},ei,{data:0}),mf=Hr(pf),Qu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ap={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},op={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gf(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=op[o])?!!u[o]:!1}function Kl(){return gf}var lp=w({},Zu,{key:function(o){if(o.key){var u=Qu[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=ia(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?ap[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kl,charCode:function(o){return o.type==="keypress"?ia(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ia(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Ju=Hr(lp),Ch=w({},$l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yf=Hr(Ch),_l=w({},Zu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kl}),Rh=Hr(_l),up=w({},ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),ro=Hr(up),Oh=w({},$l,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Dh=Hr(Oh),xs=w({},ei,{newState:0,oldState:0}),jo=Hr(xs),so=[9,13,27,32],ao=Ee&&"CompositionEvent"in window,M=null;Ee&&"documentMode"in document&&(M=document.documentMode);var F=Ee&&"TextEvent"in window&&!M,j=Ee&&(!ao||M&&8<M&&11>=M),et=" ",Tt=!1;function jt(o,u){switch(o){case"keyup":return so.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ye(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var zn=!1;function Ji(o,u){switch(o){case"compositionend":return ye(u);case"keypress":return u.which!==32?null:(Tt=!0,et);case"textInput":return o=u.data,o===et&&Tt?null:o;default:return null}}function Bn(o,u){if(zn)return o==="compositionend"||!ao&&jt(o,u)?(o=Ah(),Wl=Yu=Go=null,zn=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return j&&u.locale!=="ko"?null:u.data;default:return null}}var cr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wr(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!cr[o.type]:u==="textarea"}function fr(o,u,p,_){gl?yl?yl.push(_):yl=[_]:gl=_,u=iS(u,"onChange"),0<u.length&&(p=new Ku("onChange","change",null,p,_),o.push({event:p,listeners:u}))}var es=null,oo=null;function Nh(o){dN(o,0)}function cp(o){var u=vt(o);if(ts(u))return o}function Qm(o,u){if(o==="change")return u}var Jm=!1;if(Ee){var tg;if(Ee){var Ih="oninput"in document;if(!Ih){var Ph=document.createElement("div");Ph.setAttribute("oninput","return;"),Ih=typeof Ph.oninput=="function"}tg=Ih}else tg=!1;Jm=tg&&(!document.documentMode||9<document.documentMode)}function ji(){es&&(es.detachEvent("onpropertychange",sb),oo=es=null)}function sb(o){if(o.propertyName==="value"&&cp(oo)){var u=[];fr(u,oo,o,ju(o)),np(Nh,u)}}function tA(o,u,p){o==="focusin"?(ji(),es=u,oo=p,es.attachEvent("onpropertychange",sb)):o==="focusout"&&ji()}function ab(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return cp(oo)}function fp(o,u){if(o==="click")return cp(u)}function tc(o,u){if(o==="input"||o==="change")return cp(u)}function ob(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var ra=typeof Object.is=="function"?Object.is:ob;function Xo(o,u){if(ra(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var p=Object.keys(o),_=Object.keys(u);if(p.length!==_.length)return!1;for(_=0;_<p.length;_++){var A=p[_];if(!_t.call(u,A)||!ra(o[A],u[A]))return!1}return!0}function sa(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function w_(o,u){var p=sa(o);o=0;for(var _;p;){if(p.nodeType===3){if(_=o+p.textContent.length,o<=u&&_>=u)return{node:p,offset:u-o};o=_}t:{for(;p;){if(p.nextSibling){p=p.nextSibling;break t}p=p.parentNode}p=void 0}p=sa(p)}}function C_(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?C_(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function R_(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=zs(o.document);u instanceof o.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)o=u.contentWindow;else break;u=zs(o.document)}return u}function hp(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}function O_(o,u){var p=R_(u);u=o.focusedElem;var _=o.selectionRange;if(p!==u&&u&&u.ownerDocument&&C_(u.ownerDocument.documentElement,u)){if(_!==null&&hp(u)){if(o=_.start,p=_.end,p===void 0&&(p=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(p,u.value.length);else if(p=(o=u.ownerDocument||document)&&o.defaultView||window,p.getSelection){p=p.getSelection();var A=u.textContent.length,P=Math.min(_.start,A);_=_.end===void 0?P:Math.min(_.end,A),!p.extend&&P>_&&(A=_,_=P,P=A),A=w_(u,P);var X=w_(u,_);A&&X&&(p.rangeCount!==1||p.anchorNode!==A.node||p.anchorOffset!==A.offset||p.focusNode!==X.node||p.focusOffset!==X.offset)&&(o=o.createRange(),o.setStart(A.node,A.offset),p.removeAllRanges(),P>_?(p.addRange(o),p.extend(X.node,X.offset)):(o.setEnd(X.node,X.offset),p.addRange(o)))}}for(o=[],p=u;p=p.parentNode;)p.nodeType===1&&o.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)p=o[u],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var eg=Ee&&"documentMode"in document&&11>=document.documentMode,_f=null,D_=null,Lh=null,ng=!1;function lo(o,u,p){var _=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;ng||_f==null||_f!==zs(_)||(_=_f,"selectionStart"in _&&hp(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Lh&&Xo(Lh,_)||(Lh=_,_=iS(D_,"onSelect"),0<_.length&&(u=new Ku("onSelect","select",null,u,p),o.push({event:u,listeners:_}),u.target=_f)))}function Zl(o,u){var p={};return p[o.toLowerCase()]=u.toLowerCase(),p["Webkit"+o]="webkit"+u,p["Moz"+o]="moz"+u,p}var vf={animationend:Zl("Animation","AnimationEnd"),animationiteration:Zl("Animation","AnimationIteration"),animationstart:Zl("Animation","AnimationStart"),transitionrun:Zl("Transition","TransitionRun"),transitionstart:Zl("Transition","TransitionStart"),transitioncancel:Zl("Transition","TransitionCancel"),transitionend:Zl("Transition","TransitionEnd")},N_={},ig={};Ee&&(ig=document.createElement("div").style,"AnimationEvent"in window||(delete vf.animationend.animation,delete vf.animationiteration.animation,delete vf.animationstart.animation),"TransitionEvent"in window||delete vf.transitionend.transition);function Cr(o){if(N_[o])return N_[o];if(!vf[o])return o;var u=vf[o],p;for(p in u)if(u.hasOwnProperty(p)&&p in ig)return N_[o]=u[p];return o}var I_=Cr("animationend"),aa=Cr("animationiteration"),P_=Cr("animationstart"),Ql=Cr("transitionrun"),Uh=Cr("transitionstart"),ec=Cr("transitioncancel"),rg=Cr("transitionend"),sg=new Map,Jl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function uo(o,u){sg.set(o,u),ge(u,[o])}var fs=[],vl=0,tu=0;function dp(){for(var o=vl,u=tu=vl=0;u<o;){var p=fs[u];fs[u++]=null;var _=fs[u];fs[u++]=null;var A=fs[u];fs[u++]=null;var P=fs[u];if(fs[u++]=null,_!==null&&A!==null){var X=_.pending;X===null?A.next=A:(A.next=X.next,X.next=A),_.pending=A}P!==0&&mp(p,A,P)}}function pp(o,u,p,_){fs[vl++]=o,fs[vl++]=u,fs[vl++]=p,fs[vl++]=_,tu|=_,o.lanes|=_,o=o.alternate,o!==null&&(o.lanes|=_)}function xf(o,u,p,_){return pp(o,u,p,_),gp(o)}function eu(o,u){return pp(o,null,null,u),gp(o)}function mp(o,u,p){o.lanes|=p;var _=o.alternate;_!==null&&(_.lanes|=p);for(var A=!1,P=o.return;P!==null;)P.childLanes|=p,_=P.alternate,_!==null&&(_.childLanes|=p),P.tag===22&&(o=P.stateNode,o===null||o._visibility&1||(A=!0)),o=P,P=P.return;A&&u!==null&&o.tag===3&&(P=o.stateNode,A=31-Te(p),P=P.hiddenUpdates,o=P[A],o===null?P[A]=[u]:o.push(u),u.lane=p|536870912)}function gp(o){if(50<xo)throw xo=0,Su=null,Error(i(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var nc={},ag=new WeakMap;function oa(o,u){if(typeof o=="object"&&o!==null){var p=ag.get(o);return p!==void 0?p:(u={value:o,source:u,stack:Z(u)},ag.set(o,u),u)}return{value:o,source:u,stack:Z(u)}}var bf=[],ic=0,bs=null,yp=0,Ri=[],La=0,nu=null,xl=1,iu="";function Bs(o,u){bf[ic++]=yp,bf[ic++]=bs,bs=o,yp=u}function L_(o,u,p){Ri[La++]=xl,Ri[La++]=iu,Ri[La++]=nu,nu=o;var _=xl;o=iu;var A=32-Te(_)-1;_&=~(1<<A),p+=1;var P=32-Te(u)+A;if(30<P){var X=A-A%5;P=(_&(1<<X)-1).toString(32),_>>=X,A-=X,xl=1<<32-Te(u)+A|p<<A|_,iu=P+o}else xl=1<<P|p<<A|_,iu=o}function _p(o){o.return!==null&&(Bs(o,1),L_(o,1,0))}function rc(o){for(;o===bs;)bs=bf[--ic],bf[ic]=null,yp=bf[--ic],bf[ic]=null;for(;o===nu;)nu=Ri[--La],Ri[La]=null,iu=Ri[--La],Ri[La]=null,xl=Ri[--La],Ri[La]=null}var Ss=null,ns=null,Gn=!1,co=null,fo=!1,vp=Error(i(519));function Sf(o){var u=Error(i(418,""));throw bl(oa(u,o)),vp}function lb(o){var u=o.stateNode,p=o.type,_=o.memoizedProps;switch(u[Gi]=o,u[an]=_,p){case"dialog":jn("cancel",u),jn("close",u);break;case"iframe":case"object":case"embed":jn("load",u);break;case"video":case"audio":for(p=0;p<mv.length;p++)jn(mv[p],u);break;case"source":jn("error",u);break;case"img":case"image":case"link":jn("error",u),jn("load",u);break;case"details":jn("toggle",u);break;case"input":jn("invalid",u),lr(u,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0),En(u);break;case"select":jn("invalid",u);break;case"textarea":jn("invalid",u),cs(u,_.value,_.defaultValue,_.children),En(u)}p=_.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||u.textContent===""+p||_.suppressHydrationWarning===!0||yN(u.textContent,p)?(_.popover!=null&&(jn("beforetoggle",u),jn("toggle",u)),_.onScroll!=null&&jn("scroll",u),_.onScrollEnd!=null&&jn("scrollend",u),_.onClick!=null&&(u.onclick=rS),u=!0):u=!1,u||Sf(o)}function ub(o){for(Ss=o.return;Ss;)switch(Ss.tag){case 3:case 27:fo=!0;return;case 5:case 13:fo=!1;return;default:Ss=Ss.return}}function zh(o){if(o!==Ss)return!1;if(!Gn)return ub(o),Gn=!0,!1;var u=!1,p;if((p=o.tag!==3&&o.tag!==27)&&((p=o.tag===5)&&(p=o.type,p=!(p!=="form"&&p!=="button")||xA(o.type,o.memoizedProps)),p=!p),p&&(u=!0),u&&ns&&Sf(o),ub(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));t:{for(o=o.nextSibling,u=0;o;){if(o.nodeType===8)if(p=o.data,p==="/$"){if(u===0){ns=Tu(o.nextSibling);break t}u--}else p!=="$"&&p!=="$!"&&p!=="$?"||u++;o=o.nextSibling}ns=null}}else ns=Ss?Tu(o.stateNode.nextSibling):null;return!0}function Bh(){ns=Ss=null,Gn=!1}function bl(o){co===null?co=[o]:co.push(o)}var sc=Error(i(460)),U_=Error(i(474)),og={then:function(){}};function cb(o){return o=o.status,o==="fulfilled"||o==="rejected"}function xp(){}function ac(o,u,p){switch(p=o[p],p===void 0?o.push(u):p!==u&&(u.then(xp,xp),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,o===sc?Error(i(483)):o;default:if(typeof u.status=="string")u.then(xp,xp);else{if(o=gi,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=u,o.status="pending",o.then(function(_){if(u.status==="pending"){var A=u;A.status="fulfilled",A.value=_}},function(_){if(u.status==="pending"){var A=u;A.status="rejected",A.reason=_}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,o===sc?Error(i(483)):o}throw Vh=u,sc}}var Vh=null;function ai(){if(Vh===null)throw Error(i(459));var o=Vh;return Vh=null,o}var oc=null,bp=0;function Sp(o){var u=bp;return bp+=1,oc===null&&(oc=[]),ac(oc,o,u)}function Ep(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function lg(o,u){throw u.$$typeof===s?Error(i(525)):(o=Object.prototype.toString.call(u),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function fb(o){var u=o._init;return u(o._payload)}function hb(o){function u(Rt,St){if(o){var Bt=Rt.deletions;Bt===null?(Rt.deletions=[St],Rt.flags|=16):Bt.push(St)}}function p(Rt,St){if(!o)return null;for(;St!==null;)u(Rt,St),St=St.sibling;return null}function _(Rt){for(var St=new Map;Rt!==null;)Rt.key!==null?St.set(Rt.key,Rt):St.set(Rt.index,Rt),Rt=Rt.sibling;return St}function A(Rt,St){return Rt=Hs(Rt,St),Rt.index=0,Rt.sibling=null,Rt}function P(Rt,St,Bt){return Rt.index=Bt,o?(Bt=Rt.alternate,Bt!==null?(Bt=Bt.index,Bt<St?(Rt.flags|=33554434,St):Bt):(Rt.flags|=33554434,St)):(Rt.flags|=1048576,St)}function X(Rt){return o&&Rt.alternate===null&&(Rt.flags|=33554434),Rt}function Q(Rt,St,Bt,ie){return St===null||St.tag!==6?(St=Nr(Bt,Rt.mode,ie),St.return=Rt,St):(St=A(St,Bt),St.return=Rt,St)}function dt(Rt,St,Bt,ie){var Pe=Bt.type;return Pe===c?ee(Rt,St,Bt.props.children,ie,Bt.key):St!==null&&(St.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===R&&fb(Pe)===St.type)?(St=A(St,Bt.props),Ep(St,Bt),St.return=Rt,St):(St=td(Bt.type,Bt.key,Bt.props,null,Rt.mode,ie),Ep(St,Bt),St.return=Rt,St)}function Et(Rt,St,Bt,ie){return St===null||St.tag!==4||St.stateNode.containerInfo!==Bt.containerInfo||St.stateNode.implementation!==Bt.implementation?(St=Lp(Bt,Rt.mode,ie),St.return=Rt,St):(St=A(St,Bt.children||[]),St.return=Rt,St)}function ee(Rt,St,Bt,ie,Pe){return St===null||St.tag!==7?(St=Ac(Bt,Rt.mode,ie,Pe),St.return=Rt,St):(St=A(St,Bt),St.return=Rt,St)}function ue(Rt,St,Bt){if(typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint")return St=Nr(""+St,Rt.mode,Bt),St.return=Rt,St;if(typeof St=="object"&&St!==null){switch(St.$$typeof){case a:return Bt=td(St.type,St.key,St.props,null,Rt.mode,Bt),Ep(Bt,St),Bt.return=Rt,Bt;case l:return St=Lp(St,Rt.mode,Bt),St.return=Rt,St;case R:var ie=St._init;return St=ie(St._payload),ue(Rt,St,Bt)}if(zt(St)||B(St))return St=Ac(St,Rt.mode,Bt,null),St.return=Rt,St;if(typeof St.then=="function")return ue(Rt,Sp(St),Bt);if(St.$$typeof===v)return ue(Rt,Mg(Rt,St),Bt);lg(Rt,St)}return null}function Gt(Rt,St,Bt,ie){var Pe=St!==null?St.key:null;if(typeof Bt=="string"&&Bt!==""||typeof Bt=="number"||typeof Bt=="bigint")return Pe!==null?null:Q(Rt,St,""+Bt,ie);if(typeof Bt=="object"&&Bt!==null){switch(Bt.$$typeof){case a:return Bt.key===Pe?dt(Rt,St,Bt,ie):null;case l:return Bt.key===Pe?Et(Rt,St,Bt,ie):null;case R:return Pe=Bt._init,Bt=Pe(Bt._payload),Gt(Rt,St,Bt,ie)}if(zt(Bt)||B(Bt))return Pe!==null?null:ee(Rt,St,Bt,ie,null);if(typeof Bt.then=="function")return Gt(Rt,St,Sp(Bt),ie);if(Bt.$$typeof===v)return Gt(Rt,St,Mg(Rt,Bt),ie);lg(Rt,Bt)}return null}function Qt(Rt,St,Bt,ie,Pe){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Rt=Rt.get(Bt)||null,Q(St,Rt,""+ie,Pe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case a:return Rt=Rt.get(ie.key===null?Bt:ie.key)||null,dt(St,Rt,ie,Pe);case l:return Rt=Rt.get(ie.key===null?Bt:ie.key)||null,Et(St,Rt,ie,Pe);case R:var Fn=ie._init;return ie=Fn(ie._payload),Qt(Rt,St,Bt,ie,Pe)}if(zt(ie)||B(ie))return Rt=Rt.get(Bt)||null,ee(St,Rt,ie,Pe,null);if(typeof ie.then=="function")return Qt(Rt,St,Bt,Sp(ie),Pe);if(ie.$$typeof===v)return Qt(Rt,St,Bt,Mg(St,ie),Pe);lg(St,ie)}return null}function Ve(Rt,St,Bt,ie){for(var Pe=null,Fn=null,Ge=St,tn=St=0,Rs=null;Ge!==null&&tn<Bt.length;tn++){Ge.index>tn?(Rs=Ge,Ge=null):Rs=Ge.sibling;var oi=Gt(Rt,Ge,Bt[tn],ie);if(oi===null){Ge===null&&(Ge=Rs);break}o&&Ge&&oi.alternate===null&&u(Rt,Ge),St=P(oi,St,tn),Fn===null?Pe=oi:Fn.sibling=oi,Fn=oi,Ge=Rs}if(tn===Bt.length)return p(Rt,Ge),Gn&&Bs(Rt,tn),Pe;if(Ge===null){for(;tn<Bt.length;tn++)Ge=ue(Rt,Bt[tn],ie),Ge!==null&&(St=P(Ge,St,tn),Fn===null?Pe=Ge:Fn.sibling=Ge,Fn=Ge);return Gn&&Bs(Rt,tn),Pe}for(Ge=_(Ge);tn<Bt.length;tn++)Rs=Qt(Ge,Rt,tn,Bt[tn],ie),Rs!==null&&(o&&Rs.alternate!==null&&Ge.delete(Rs.key===null?tn:Rs.key),St=P(Rs,St,tn),Fn===null?Pe=Rs:Fn.sibling=Rs,Fn=Rs);return o&&Ge.forEach(function(ud){return u(Rt,ud)}),Gn&&Bs(Rt,tn),Pe}function pn(Rt,St,Bt,ie){if(Bt==null)throw Error(i(151));for(var Pe=null,Fn=null,Ge=St,tn=St=0,Rs=null,oi=Bt.next();Ge!==null&&!oi.done;tn++,oi=Bt.next()){Ge.index>tn?(Rs=Ge,Ge=null):Rs=Ge.sibling;var ud=Gt(Rt,Ge,oi.value,ie);if(ud===null){Ge===null&&(Ge=Rs);break}o&&Ge&&ud.alternate===null&&u(Rt,Ge),St=P(ud,St,tn),Fn===null?Pe=ud:Fn.sibling=ud,Fn=ud,Ge=Rs}if(oi.done)return p(Rt,Ge),Gn&&Bs(Rt,tn),Pe;if(Ge===null){for(;!oi.done;tn++,oi=Bt.next())oi=ue(Rt,oi.value,ie),oi!==null&&(St=P(oi,St,tn),Fn===null?Pe=oi:Fn.sibling=oi,Fn=oi);return Gn&&Bs(Rt,tn),Pe}for(Ge=_(Ge);!oi.done;tn++,oi=Bt.next())oi=Qt(Ge,Rt,tn,oi.value,ie),oi!==null&&(o&&oi.alternate!==null&&Ge.delete(oi.key===null?tn:oi.key),St=P(oi,St,tn),Fn===null?Pe=oi:Fn.sibling=oi,Fn=oi);return o&&Ge.forEach(function(dH){return u(Rt,dH)}),Gn&&Bs(Rt,tn),Pe}function Lr(Rt,St,Bt,ie){if(typeof Bt=="object"&&Bt!==null&&Bt.type===c&&Bt.key===null&&(Bt=Bt.props.children),typeof Bt=="object"&&Bt!==null){switch(Bt.$$typeof){case a:t:{for(var Pe=Bt.key;St!==null;){if(St.key===Pe){if(Pe=Bt.type,Pe===c){if(St.tag===7){p(Rt,St.sibling),ie=A(St,Bt.props.children),ie.return=Rt,Rt=ie;break t}}else if(St.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===R&&fb(Pe)===St.type){p(Rt,St.sibling),ie=A(St,Bt.props),Ep(ie,Bt),ie.return=Rt,Rt=ie;break t}p(Rt,St);break}else u(Rt,St);St=St.sibling}Bt.type===c?(ie=Ac(Bt.props.children,Rt.mode,ie,Bt.key),ie.return=Rt,Rt=ie):(ie=td(Bt.type,Bt.key,Bt.props,null,Rt.mode,ie),Ep(ie,Bt),ie.return=Rt,Rt=ie)}return X(Rt);case l:t:{for(Pe=Bt.key;St!==null;){if(St.key===Pe)if(St.tag===4&&St.stateNode.containerInfo===Bt.containerInfo&&St.stateNode.implementation===Bt.implementation){p(Rt,St.sibling),ie=A(St,Bt.children||[]),ie.return=Rt,Rt=ie;break t}else{p(Rt,St);break}else u(Rt,St);St=St.sibling}ie=Lp(Bt,Rt.mode,ie),ie.return=Rt,Rt=ie}return X(Rt);case R:return Pe=Bt._init,Bt=Pe(Bt._payload),Lr(Rt,St,Bt,ie)}if(zt(Bt))return Ve(Rt,St,Bt,ie);if(B(Bt)){if(Pe=B(Bt),typeof Pe!="function")throw Error(i(150));return Bt=Pe.call(Bt),pn(Rt,St,Bt,ie)}if(typeof Bt.then=="function")return Lr(Rt,St,Sp(Bt),ie);if(Bt.$$typeof===v)return Lr(Rt,St,Mg(Rt,Bt),ie);lg(Rt,Bt)}return typeof Bt=="string"&&Bt!==""||typeof Bt=="number"||typeof Bt=="bigint"?(Bt=""+Bt,St!==null&&St.tag===6?(p(Rt,St.sibling),ie=A(St,Bt),ie.return=Rt,Rt=ie):(p(Rt,St),ie=Nr(Bt,Rt.mode,ie),ie.return=Rt,Rt=ie),X(Rt)):p(Rt,St)}return function(Rt,St,Bt,ie){try{bp=0;var Pe=Lr(Rt,St,Bt,ie);return oc=null,Pe}catch(Ge){if(Ge===sc)throw Ge;var Fn=_r(29,Ge,null,Rt.mode);return Fn.lanes=ie,Fn.return=Rt,Fn}finally{}}}var ru=hb(!0),su=hb(!1),Ef=Dt(null),Tf=Dt(0);function lc(o,u){o=bu,Nt(Tf,o),Nt(Ef,u),bu=o|u.baseLanes}function ug(){Nt(Tf,bu),Nt(Ef,Ef.current)}function Tp(){bu=Tf.current,Wt(Ef),Wt(Tf)}var la=Dt(null),Sl=null;function au(o){var u=o.alternate;Nt(Rr,Rr.current&1),Nt(la,o),Sl===null&&(u===null||Ef.current!==null||u.memoizedState!==null)&&(Sl=o)}function z_(o){if(o.tag===22){if(Nt(Rr,Rr.current),Nt(la,o),Sl===null){var u=o.alternate;u!==null&&u.memoizedState!==null&&(Sl=o)}}else ou()}function ou(){Nt(Rr,Rr.current),Nt(la,la.current)}function El(o){Wt(la),Sl===o&&(Sl=null),Wt(Rr)}var Rr=Dt(0);function Fh(o){for(var u=o;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var In=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(p,_){o.push(_)}};this.abort=function(){u.aborted=!0,o.forEach(function(p){return p()})}},eA=n.unstable_scheduleCallback,Ua=n.unstable_NormalPriority,hr={$$typeof:v,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function B_(){return{controller:new In,data:new Map,refCount:0}}function uc(o){o.refCount--,o.refCount===0&&eA(Ua,function(){o.controller.abort()})}var Tl=null,cc=0,Mf=0,fc=null;function nA(o,u){if(Tl===null){var p=Tl=[];cc=0,Mf=fA(),fc={status:"pending",value:void 0,then:function(_){p.push(_)}}}return cc++,u.then(V_,V_),u}function V_(){if(--cc===0&&Tl!==null){fc!==null&&(fc.status="fulfilled");var o=Tl;Tl=null,Mf=0,fc=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function hc(o,u){var p=[],_={status:"pending",value:null,reason:null,then:function(A){p.push(A)}};return o.then(function(){_.status="fulfilled",_.value=u;for(var A=0;A<p.length;A++)(0,p[A])(u)},function(A){for(_.status="rejected",_.reason=A,A=0;A<p.length;A++)(0,p[A])(void 0)}),_}var cg=I.S;I.S=function(o,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&nA(o,u),cg!==null&&cg(o,u)};var lu=Dt(null);function Mp(){var o=lu.current;return o!==null?o:gi.pooledCache}function kh(o,u){u===null?Nt(lu,lu.current):Nt(lu,u.pool)}function uu(){var o=Mp();return o===null?null:{parent:hr._currentValue,pool:o}}var cu=0,Tn=null,ci=null,Or=null,Je=!1,dc=!1,pc=!1,Hh=0,mc=0,Gh=null,iA=0;function nr(){throw Error(i(321))}function Af(o,u){if(u===null)return!1;for(var p=0;p<u.length&&p<o.length;p++)if(!ra(o[p],u[p]))return!1;return!0}function F_(o,u,p,_,A,P){return cu=P,Tn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,I.H=o===null||o.memoizedState===null?yc:hu,pc=!1,P=p(_,A),pc=!1,dc&&(P=pb(u,p,_,A)),db(o),P}function db(o){I.H=Al;var u=ci!==null&&ci.next!==null;if(cu=0,Or=ci=Tn=null,Je=!1,mc=0,Gh=null,u)throw Error(i(300));o===null||Gr||(o=o.dependencies,o!==null&&Yh(o)&&(Gr=!0))}function pb(o,u,p,_){Tn=o;var A=0;do{if(dc&&(Gh=null),mc=0,dc=!1,25<=A)throw Error(i(301));if(A+=1,Or=ci=null,o.updateQueue!=null){var P=o.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}I.H=Rf,P=u(p,_)}while(dc);return P}function rA(){var o=I.H,u=o.useState()[0];return u=typeof u.then=="function"?wp(u):u,o=o.useState()[0],(ci!==null?ci.memoizedState:null)!==o&&(Tn.flags|=1024),u}function k_(){var o=Hh!==0;return Hh=0,o}function Ap(o,u,p){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~p}function fg(o){if(Je){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}Je=!1}cu=0,Or=ci=Tn=null,dc=!1,mc=Hh=0,Gh=null}function hs(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?Tn.memoizedState=Or=o:Or=Or.next=o,Or}function dr(){if(ci===null){var o=Tn.alternate;o=o!==null?o.memoizedState:null}else o=ci.next;var u=Or===null?Tn.memoizedState:Or.next;if(u!==null)Or=u,ci=o;else{if(o===null)throw Tn.alternate===null?Error(i(467)):Error(i(310));ci=o,o={memoizedState:ci.memoizedState,baseState:ci.baseState,baseQueue:ci.baseQueue,queue:ci.queue,next:null},Or===null?Tn.memoizedState=Or=o:Or=Or.next=o}return Or}var hg;hg=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function wp(o){var u=mc;return mc+=1,Gh===null&&(Gh=[]),o=ac(Gh,o,u),u=Tn,(Or===null?u.memoizedState:Or.next)===null&&(u=u.alternate,I.H=u===null||u.memoizedState===null?yc:hu),o}function qh(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return wp(o);if(o.$$typeof===v)return Es(o)}throw Error(i(438,String(o)))}function Wo(o){var u=null,p=Tn.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var _=Tn.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(u={data:_.data.map(function(A){return A.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=hg(),Tn.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(o),_=0;_<o;_++)p[_]=O;return u.index++,p}function Xi(o,u){return typeof u=="function"?u(o):u}function Yo(o){var u=dr();return ua(u,ci,o)}function ua(o,u,p){var _=o.queue;if(_===null)throw Error(i(311));_.lastRenderedReducer=p;var A=o.baseQueue,P=_.pending;if(P!==null){if(A!==null){var X=A.next;A.next=P.next,P.next=X}u.baseQueue=A=P,_.pending=null}if(P=o.baseState,A===null)o.memoizedState=P;else{u=A.next;var Q=X=null,dt=null,Et=u,ee=!1;do{var ue=Et.lane&-536870913;if(ue!==Et.lane?(We&ue)===ue:(cu&ue)===ue){var Gt=Et.revertLane;if(Gt===0)dt!==null&&(dt=dt.next={lane:0,revertLane:0,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null}),ue===Mf&&(ee=!0);else if((cu&Gt)===Gt){Et=Et.next,Gt===Mf&&(ee=!0);continue}else ue={lane:0,revertLane:Et.revertLane,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null},dt===null?(Q=dt=ue,X=P):dt=dt.next=ue,Tn.lanes|=Gt,el|=Gt;ue=Et.action,pc&&p(P,ue),P=Et.hasEagerState?Et.eagerState:p(P,ue)}else Gt={lane:ue,revertLane:Et.revertLane,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null},dt===null?(Q=dt=Gt,X=P):dt=dt.next=Gt,Tn.lanes|=ue,el|=ue;Et=Et.next}while(Et!==null&&Et!==u);if(dt===null?X=P:dt.next=Q,!ra(P,o.memoizedState)&&(Gr=!0,ee&&(p=fc,p!==null)))throw p;o.memoizedState=P,o.baseState=X,o.baseQueue=dt,_.lastRenderedState=P}return A===null&&(_.lanes=0),[o.memoizedState,_.dispatch]}function dg(o){var u=dr(),p=u.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=o;var _=p.dispatch,A=p.pending,P=u.memoizedState;if(A!==null){p.pending=null;var X=A=A.next;do P=o(P,X.action),X=X.next;while(X!==A);ra(P,u.memoizedState)||(Gr=!0),u.memoizedState=P,u.baseQueue===null&&(u.baseState=P),p.lastRenderedState=P}return[P,_]}function mb(o,u,p){var _=Tn,A=dr(),P=Gn;if(P){if(p===void 0)throw Error(i(407));p=p()}else p=u();var X=!ra((ci||A).memoizedState,p);if(X&&(A.memoizedState=p,Gr=!0),A=A.queue,j_(gb.bind(null,_,A,o),[o]),A.getSnapshot!==u||X||Or!==null&&Or.memoizedState.tag&1){if(_.flags|=2048,Ml(9,gc.bind(null,_,A,p,u),{destroy:void 0},null),gi===null)throw Error(i(349));P||(cu&60)!==0||Vs(_,u,p)}return p}function Vs(o,u,p){o.flags|=16384,o={getSnapshot:u,value:p},u=Tn.updateQueue,u===null?(u=hg(),Tn.updateQueue=u,u.stores=[o]):(p=u.stores,p===null?u.stores=[o]:p.push(o))}function gc(o,u,p,_){u.value=p,u.getSnapshot=_,yb(u)&&_b(o)}function gb(o,u,p){return p(function(){yb(u)&&_b(o)})}function yb(o){var u=o.getSnapshot;o=o.value;try{var p=u();return!ra(o,p)}catch{return!0}}function _b(o){var u=eu(o,2);u!==null&&Pr(u,o,2)}function H_(o){var u=hs();if(typeof o=="function"){var p=o;if(o=p(),pc){Oe(!0);try{p()}finally{Oe(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:o},u}function G_(o,u,p,_){return o.baseState=p,ua(o,ci,typeof _=="function"?_:Xi)}function sA(o,u,p,_,A){if(_g(o))throw Error(i(485));if(o=u.action,o!==null){var P={payload:A,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(X){P.listeners.push(X)}};I.T!==null?p(!0):P.isTransition=!1,_(P),p=u.pending,p===null?(P.next=u.pending=P,q_(u,P)):(P.next=p.next,u.pending=p.next=P)}}function q_(o,u){var p=u.action,_=u.payload,A=o.state;if(u.isTransition){var P=I.T,X={};I.T=X;try{var Q=p(A,_),dt=I.S;dt!==null&&dt(X,Q),vb(o,u,Q)}catch(Et){fu(o,u,Et)}finally{I.T=P}}else try{P=p(A,_),vb(o,u,P)}catch(Et){fu(o,u,Et)}}function vb(o,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(_){wf(o,u,_)},function(_){return fu(o,u,_)}):wf(o,u,p)}function wf(o,u,p){u.status="fulfilled",u.value=p,xb(u),o.state=p,u=o.pending,u!==null&&(p=u.next,p===u?o.pending=null:(p=p.next,u.next=p,q_(o,p)))}function fu(o,u,p){var _=o.pending;if(o.pending=null,_!==null){_=_.next;do u.status="rejected",u.reason=p,xb(u),u=u.next;while(u!==_)}o.action=null}function xb(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function bb(o,u){return u}function Sb(o,u){if(Gn){var p=gi.formState;if(p!==null){t:{var _=Tn;if(Gn){if(ns){e:{for(var A=ns,P=fo;A.nodeType!==8;){if(!P){A=null;break e}if(A=Tu(A.nextSibling),A===null){A=null;break e}}P=A.data,A=P==="F!"||P==="F"?A:null}if(A){ns=Tu(A.nextSibling),_=A.data==="F!";break t}}Sf(_)}_=!1}_&&(u=p[0])}}return p=hs(),p.memoizedState=p.baseState=u,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bb,lastRenderedState:u},p.queue=_,p=$_.bind(null,Tn,_),_.dispatch=p,_=H_(!1),P=Cp.bind(null,Tn,!1,_.queue),_=hs(),A={state:u,dispatch:null,action:o,pending:null},_.queue=A,p=sA.bind(null,Tn,A,P,p),A.dispatch=p,_.memoizedState=o,[u,p,!1]}function jh(o){var u=dr();return Eb(u,ci,o)}function Eb(o,u,p){u=ua(o,u,bb)[0],o=Yo(Xi)[0],u=typeof u=="object"&&u!==null&&typeof u.then=="function"?wp(u):u;var _=dr(),A=_.queue,P=A.dispatch;return p!==_.memoizedState&&(Tn.flags|=2048,Ml(9,aA.bind(null,A,p),{destroy:void 0},null)),[u,P,o]}function aA(o,u){o.action=u}function Tb(o){var u=dr(),p=ci;if(p!==null)return Eb(u,p,o);dr(),u=u.memoizedState,p=dr();var _=p.queue.dispatch;return p.memoizedState=o,[u,_,!1]}function Ml(o,u,p,_){return o={tag:o,create:u,inst:p,deps:_,next:null},u=Tn.updateQueue,u===null&&(u=hg(),Tn.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=o.next=o:(_=p.next,p.next=o,o.next=_,u.lastEffect=o),o}function Mb(){return dr().memoizedState}function pg(o,u,p,_){var A=hs();Tn.flags|=o,A.memoizedState=Ml(1|u,p,{destroy:void 0},_===void 0?null:_)}function mg(o,u,p,_){var A=dr();_=_===void 0?null:_;var P=A.memoizedState.inst;ci!==null&&_!==null&&Af(_,ci.memoizedState.deps)?A.memoizedState=Ml(u,p,P,_):(Tn.flags|=o,A.memoizedState=Ml(1|u,p,P,_))}function Ab(o,u){pg(8390656,8,o,u)}function j_(o,u){mg(2048,8,o,u)}function wb(o,u){return mg(4,2,o,u)}function Cb(o,u){return mg(4,4,o,u)}function Rb(o,u){if(typeof u=="function"){o=o();var p=u(o);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function Ob(o,u,p){p=p!=null?p.concat([o]):null,mg(4,4,Rb.bind(null,u,o),p)}function X_(){}function Db(o,u){var p=dr();u=u===void 0?null:u;var _=p.memoizedState;return u!==null&&Af(u,_[1])?_[0]:(p.memoizedState=[o,u],o)}function Nb(o,u){var p=dr();u=u===void 0?null:u;var _=p.memoizedState;if(u!==null&&Af(u,_[1]))return _[0];if(_=o(),pc){Oe(!0);try{o()}finally{Oe(!1)}}return p.memoizedState=[_,u],_}function gg(o,u,p){return p===void 0||(cu&1073741824)!==0?o.memoizedState=u:(o.memoizedState=p,o=ka(),Tn.lanes|=o,el|=o,p)}function Ib(o,u,p,_){return ra(p,u)?p:Ef.current!==null?(o=gg(o,p,_),ra(o,u)||(Gr=!0),o):(cu&42)===0?(Gr=!0,o.memoizedState=p):(o=ka(),Tn.lanes|=o,el|=o,u)}function Pb(o,u,p,_,A){var P=nt.p;nt.p=P!==0&&8>P?P:8;var X=I.T,Q={};I.T=Q,Cp(o,!1,u,p);try{var dt=A(),Et=I.S;if(Et!==null&&Et(Q,dt),dt!==null&&typeof dt=="object"&&typeof dt.then=="function"){var ee=hc(dt,_);Cf(o,u,ee,qs(o))}else Cf(o,u,_,qs(o))}catch(ue){Cf(o,u,{then:function(){},status:"rejected",reason:ue},qs())}finally{nt.p=P,I.T=X}}function oA(){}function W_(o,u,p,_){if(o.tag!==5)throw Error(i(476));var A=Lb(o).queue;Pb(o,A,u,lt,p===null?oA:function(){return Ub(o),p(_)})}function Lb(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:lt,baseState:lt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:lt},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:p},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function Ub(o){var u=Lb(o).next.queue;Cf(o,u,{},qs())}function yg(){return Es(xv)}function Y_(){return dr().memoizedState}function zb(){return dr().memoizedState}function Bb(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var p=qs();o=Va(p);var _=Fa(u,o,p);_!==null&&(Pr(_,u,p),xc(_,u,p)),u={cache:B_()},o.payload=u;return}u=u.return}}function Vb(o,u,p){var _=qs();p={lane:_,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},_g(o)?Fb(u,p):(p=xf(o,u,p,_),p!==null&&(Pr(p,o,_),kb(p,u,_)))}function $_(o,u,p){var _=qs();Cf(o,u,p,_)}function Cf(o,u,p,_){var A={lane:_,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(_g(o))Fb(u,A);else{var P=o.alternate;if(o.lanes===0&&(P===null||P.lanes===0)&&(P=u.lastRenderedReducer,P!==null))try{var X=u.lastRenderedState,Q=P(X,p);if(A.hasEagerState=!0,A.eagerState=Q,ra(Q,X))return pp(o,u,A,0),gi===null&&dp(),!1}catch{}finally{}if(p=xf(o,u,A,_),p!==null)return Pr(p,o,_),kb(p,u,_),!0}return!1}function Cp(o,u,p,_){if(_={lane:2,revertLane:fA(),action:_,hasEagerState:!1,eagerState:null,next:null},_g(o)){if(u)throw Error(i(479))}else u=xf(o,p,_,2),u!==null&&Pr(u,o,2)}function _g(o){var u=o.alternate;return o===Tn||u!==null&&u===Tn}function Fb(o,u){dc=Je=!0;var p=o.pending;p===null?u.next=u:(u.next=p.next,p.next=u),o.pending=u}function kb(o,u,p){if((p&4194176)!==0){var _=u.lanes;_&=o.pendingLanes,p|=_,u.lanes=p,Qr(o,p)}}var Al={readContext:Es,use:qh,useCallback:nr,useContext:nr,useEffect:nr,useImperativeHandle:nr,useLayoutEffect:nr,useInsertionEffect:nr,useMemo:nr,useReducer:nr,useRef:nr,useState:nr,useDebugValue:nr,useDeferredValue:nr,useTransition:nr,useSyncExternalStore:nr,useId:nr};Al.useCacheRefresh=nr,Al.useMemoCache=nr,Al.useHostTransitionStatus=nr,Al.useFormState=nr,Al.useActionState=nr,Al.useOptimistic=nr;var yc={readContext:Es,use:qh,useCallback:function(o,u){return hs().memoizedState=[o,u===void 0?null:u],o},useContext:Es,useEffect:Ab,useImperativeHandle:function(o,u,p){p=p!=null?p.concat([o]):null,pg(4194308,4,Rb.bind(null,u,o),p)},useLayoutEffect:function(o,u){return pg(4194308,4,o,u)},useInsertionEffect:function(o,u){pg(4,2,o,u)},useMemo:function(o,u){var p=hs();u=u===void 0?null:u;var _=o();if(pc){Oe(!0);try{o()}finally{Oe(!1)}}return p.memoizedState=[_,u],_},useReducer:function(o,u,p){var _=hs();if(p!==void 0){var A=p(u);if(pc){Oe(!0);try{p(u)}finally{Oe(!1)}}}else A=u;return _.memoizedState=_.baseState=A,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:A},_.queue=o,o=o.dispatch=Vb.bind(null,Tn,o),[_.memoizedState,o]},useRef:function(o){var u=hs();return o={current:o},u.memoizedState=o},useState:function(o){o=H_(o);var u=o.queue,p=$_.bind(null,Tn,u);return u.dispatch=p,[o.memoizedState,p]},useDebugValue:X_,useDeferredValue:function(o,u){var p=hs();return gg(p,o,u)},useTransition:function(){var o=H_(!1);return o=Pb.bind(null,Tn,o.queue,!0,!1),hs().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,p){var _=Tn,A=hs();if(Gn){if(p===void 0)throw Error(i(407));p=p()}else{if(p=u(),gi===null)throw Error(i(349));(We&60)!==0||Vs(_,u,p)}A.memoizedState=p;var P={value:p,getSnapshot:u};return A.queue=P,Ab(gb.bind(null,_,P,o),[o]),_.flags|=2048,Ml(9,gc.bind(null,_,P,p,u),{destroy:void 0},null),p},useId:function(){var o=hs(),u=gi.identifierPrefix;if(Gn){var p=iu,_=xl;p=(_&~(1<<32-Te(_)-1)).toString(32)+p,u=":"+u+"R"+p,p=Hh++,0<p&&(u+="H"+p.toString(32)),u+=":"}else p=iA++,u=":"+u+"r"+p.toString(32)+":";return o.memoizedState=u},useCacheRefresh:function(){return hs().memoizedState=Bb.bind(null,Tn)}};yc.useMemoCache=Wo,yc.useHostTransitionStatus=yg,yc.useFormState=Sb,yc.useActionState=Sb,yc.useOptimistic=function(o){var u=hs();u.memoizedState=u.baseState=o;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=Cp.bind(null,Tn,!0,p),p.dispatch=u,[o,u]};var hu={readContext:Es,use:qh,useCallback:Db,useContext:Es,useEffect:j_,useImperativeHandle:Ob,useInsertionEffect:wb,useLayoutEffect:Cb,useMemo:Nb,useReducer:Yo,useRef:Mb,useState:function(){return Yo(Xi)},useDebugValue:X_,useDeferredValue:function(o,u){var p=dr();return Ib(p,ci.memoizedState,o,u)},useTransition:function(){var o=Yo(Xi)[0],u=dr().memoizedState;return[typeof o=="boolean"?o:wp(o),u]},useSyncExternalStore:mb,useId:Y_};hu.useCacheRefresh=zb,hu.useMemoCache=Wo,hu.useHostTransitionStatus=yg,hu.useFormState=jh,hu.useActionState=jh,hu.useOptimistic=function(o,u){var p=dr();return G_(p,ci,o,u)};var Rf={readContext:Es,use:qh,useCallback:Db,useContext:Es,useEffect:j_,useImperativeHandle:Ob,useInsertionEffect:wb,useLayoutEffect:Cb,useMemo:Nb,useReducer:dg,useRef:Mb,useState:function(){return dg(Xi)},useDebugValue:X_,useDeferredValue:function(o,u){var p=dr();return ci===null?gg(p,o,u):Ib(p,ci.memoizedState,o,u)},useTransition:function(){var o=dg(Xi)[0],u=dr().memoizedState;return[typeof o=="boolean"?o:wp(o),u]},useSyncExternalStore:mb,useId:Y_};Rf.useCacheRefresh=zb,Rf.useMemoCache=Wo,Rf.useHostTransitionStatus=yg,Rf.useFormState=Tb,Rf.useActionState=Tb,Rf.useOptimistic=function(o,u){var p=dr();return ci!==null?G_(p,ci,o,u):(p.baseState=o,[o,p.queue.dispatch])};function K_(o,u,p,_){u=o.memoizedState,p=p(_,u),p=p==null?u:w({},u,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var Z_={isMounted:function(o){return(o=o._reactInternals)?at(o)===o:!1},enqueueSetState:function(o,u,p){o=o._reactInternals;var _=qs(),A=Va(_);A.payload=u,p!=null&&(A.callback=p),u=Fa(o,A,_),u!==null&&(Pr(u,o,_),xc(u,o,_))},enqueueReplaceState:function(o,u,p){o=o._reactInternals;var _=qs(),A=Va(_);A.tag=1,A.payload=u,p!=null&&(A.callback=p),u=Fa(o,A,_),u!==null&&(Pr(u,o,_),xc(u,o,_))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var p=qs(),_=Va(p);_.tag=2,u!=null&&(_.callback=u),u=Fa(o,_,p),u!==null&&(Pr(u,o,p),xc(u,o,p))}};function Hb(o,u,p,_,A,P,X){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(_,P,X):u.prototype&&u.prototype.isPureReactComponent?!Xo(p,_)||!Xo(A,P):!0}function Gb(o,u,p,_){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,_),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,_),u.state!==o&&Z_.enqueueReplaceState(u,u.state,null)}function Of(o,u){var p=u;if("ref"in u){p={};for(var _ in u)_!=="ref"&&(p[_]=u[_])}if(o=o.defaultProps){p===u&&(p=w({},p));for(var A in o)p[A]===void 0&&(p[A]=o[A])}return p}var vg=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function qb(o){vg(o)}function jb(o){console.error(o)}function Xb(o){vg(o)}function xg(o,u){try{var p=o.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(_){setTimeout(function(){throw _})}}function Wb(o,u,p){try{var _=o.onCaughtError;_(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Q_(o,u,p){return p=Va(p),p.tag=3,p.payload={element:null},p.callback=function(){xg(o,u)},p}function J_(o){return o=Va(o),o.tag=3,o}function Yb(o,u,p,_){var A=p.type.getDerivedStateFromError;if(typeof A=="function"){var P=_.value;o.payload=function(){return A(P)},o.callback=function(){Wb(u,p,_)}}var X=p.stateNode;X!==null&&typeof X.componentDidCatch=="function"&&(o.callback=function(){Wb(u,p,_),typeof A!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var Q=_.stack;this.componentDidCatch(_.value,{componentStack:Q!==null?Q:""})})}function lA(o,u,p,_,A){if(p.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(u=p.alternate,u!==null&&Op(u,p,A,!0),p=la.current,p!==null){switch(p.tag){case 13:return Sl===null?Bp():p.alternate===null&&Li===0&&(Li=3),p.flags&=-257,p.flags|=65536,p.lanes=A,_===og?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([_]):u.add(_),un(o,_,A)),!1;case 22:return p.flags|=65536,_===og?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([_])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([_]):p.add(_)),un(o,_,A)),!1}throw Error(i(435,p.tag))}return un(o,_,A),Bp(),!1}if(Gn)return u=la.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=A,_!==vp&&(o=Error(i(422),{cause:_}),bl(oa(o,p)))):(_!==vp&&(u=Error(i(423),{cause:_}),bl(oa(u,p))),o=o.current.alternate,o.flags|=65536,A&=-A,o.lanes|=A,_=oa(_,p),A=Q_(o.stateNode,_,A),Kh(o,A),Li!==4&&(Li=2)),!1;var P=Error(i(520),{cause:_});if(P=oa(P,p),zp===null?zp=[P]:zp.push(P),Li!==4&&(Li=2),u===null)return!0;_=oa(_,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,o=A&-A,p.lanes|=o,o=Q_(p.stateNode,_,o),Kh(p,o),!1;case 1:if(u=p.type,P=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(Ir===null||!Ir.has(P))))return p.flags|=65536,A&=-A,p.lanes|=A,A=J_(A),Yb(A,o,p,_),Kh(p,A),!1}p=p.return}while(p!==null);return!1}var za=Error(i(461)),Gr=!1;function qr(o,u,p,_){u.child=o===null?su(u,null,p,_):ru(u,o.child,p,_)}function tv(o,u,p,_,A){p=p.render;var P=u.ref;if("ref"in _){var X={};for(var Q in _)Q!=="ref"&&(X[Q]=_[Q])}else X=_;return Nf(u),_=F_(o,u,p,X,P,A),Q=k_(),o!==null&&!Gr?(Ap(o,u,A),pr(o,u,A)):(Gn&&Q&&_p(u),u.flags|=1,qr(o,u,_,A),u.child)}function ev(o,u,p,_,A){if(o===null){var P=p.type;return typeof P=="function"&&!vu(P)&&P.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=P,nv(o,u,P,_,A)):(o=td(p.type,null,_,u,u.mode,A),o.ref=u.ref,o.return=u,u.child=o)}if(P=o.child,!uv(o,A)){var X=P.memoizedProps;if(p=p.compare,p=p!==null?p:Xo,p(X,_)&&o.ref===u.ref)return pr(o,u,A)}return u.flags|=1,o=Hs(P,_),o.ref=u.ref,o.return=u,u.child=o}function nv(o,u,p,_,A){if(o!==null){var P=o.memoizedProps;if(Xo(P,_)&&o.ref===u.ref)if(Gr=!1,u.pendingProps=_=P,uv(o,A))(o.flags&131072)!==0&&(Gr=!0);else return u.lanes=o.lanes,pr(o,u,A)}return rv(o,u,p,_,A)}function $b(o,u,p){var _=u.pendingProps,A=_.children,P=(u.stateNode._pendingVisibility&2)!==0,X=o!==null?o.memoizedState:null;if(Xh(o,u),_.mode==="hidden"||P){if((u.flags&128)!==0){if(_=X!==null?X.baseLanes|p:p,o!==null){for(A=u.child=o.child,P=0;A!==null;)P=P|A.lanes|A.childLanes,A=A.sibling;u.childLanes=P&~_}else u.childLanes=0,u.child=null;return iv(o,u,_,p)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&kh(u,X!==null?X.cachePool:null),X!==null?lc(u,X):ug(),z_(u);else return u.lanes=u.childLanes=536870912,iv(o,u,X!==null?X.baseLanes|p:p,p)}else X!==null?(kh(u,X.cachePool),lc(u,X),ou(),u.memoizedState=null):(o!==null&&kh(u,null),ug(),ou());return qr(o,u,A,p),u.child}function iv(o,u,p,_){var A=Mp();return A=A===null?null:{parent:hr._currentValue,pool:A},u.memoizedState={baseLanes:p,cachePool:A},o!==null&&kh(u,null),ug(),z_(u),o!==null&&Op(o,u,_,!0),null}function Xh(o,u){var p=u.ref;if(p===null)o!==null&&o.ref!==null&&(u.flags|=2097664);else{if(typeof p!="function"&&typeof p!="object")throw Error(i(284));(o===null||o.ref!==p)&&(u.flags|=2097664)}}function rv(o,u,p,_,A){return Nf(u),p=F_(o,u,p,_,void 0,A),_=k_(),o!==null&&!Gr?(Ap(o,u,A),pr(o,u,A)):(Gn&&_&&_p(u),u.flags|=1,qr(o,u,p,A),u.child)}function Kb(o,u,p,_,A,P){return Nf(u),u.updateQueue=null,p=pb(u,_,p,A),db(o),_=k_(),o!==null&&!Gr?(Ap(o,u,P),pr(o,u,P)):(Gn&&_&&_p(u),u.flags|=1,qr(o,u,p,P),u.child)}function Zb(o,u,p,_,A){if(Nf(u),u.stateNode===null){var P=nc,X=p.contextType;typeof X=="object"&&X!==null&&(P=Es(X)),P=new p(_,P),u.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=Z_,u.stateNode=P,P._reactInternals=u,P=u.stateNode,P.props=_,P.state=u.memoizedState,P.refs={},Fs(u),X=p.contextType,P.context=typeof X=="object"&&X!==null?Es(X):nc,P.state=u.memoizedState,X=p.getDerivedStateFromProps,typeof X=="function"&&(K_(u,p,X,_),P.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(X=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),X!==P.state&&Z_.enqueueReplaceState(P,P.state,null),Ko(u,_,P,A),Ts(),P.state=u.memoizedState),typeof P.componentDidMount=="function"&&(u.flags|=4194308),_=!0}else if(o===null){P=u.stateNode;var Q=u.memoizedProps,dt=Of(p,Q);P.props=dt;var Et=P.context,ee=p.contextType;X=nc,typeof ee=="object"&&ee!==null&&(X=Es(ee));var ue=p.getDerivedStateFromProps;ee=typeof ue=="function"||typeof P.getSnapshotBeforeUpdate=="function",Q=u.pendingProps!==Q,ee||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(Q||Et!==X)&&Gb(u,P,_,X),Dr=!1;var Gt=u.memoizedState;P.state=Gt,Ko(u,_,P,A),Ts(),Et=u.memoizedState,Q||Gt!==Et||Dr?(typeof ue=="function"&&(K_(u,p,ue,_),Et=u.memoizedState),(dt=Dr||Hb(u,p,dt,_,Gt,Et,X))?(ee||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(u.flags|=4194308)):(typeof P.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=_,u.memoizedState=Et),P.props=_,P.state=Et,P.context=X,_=dt):(typeof P.componentDidMount=="function"&&(u.flags|=4194308),_=!1)}else{P=u.stateNode,Ag(o,u),X=u.memoizedProps,ee=Of(p,X),P.props=ee,ue=u.pendingProps,Gt=P.context,Et=p.contextType,dt=nc,typeof Et=="object"&&Et!==null&&(dt=Es(Et)),Q=p.getDerivedStateFromProps,(Et=typeof Q=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(X!==ue||Gt!==dt)&&Gb(u,P,_,dt),Dr=!1,Gt=u.memoizedState,P.state=Gt,Ko(u,_,P,A),Ts();var Qt=u.memoizedState;X!==ue||Gt!==Qt||Dr||o!==null&&o.dependencies!==null&&Yh(o.dependencies)?(typeof Q=="function"&&(K_(u,p,Q,_),Qt=u.memoizedState),(ee=Dr||Hb(u,p,ee,_,Gt,Qt,dt)||o!==null&&o.dependencies!==null&&Yh(o.dependencies))?(Et||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(_,Qt,dt),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(_,Qt,dt)),typeof P.componentDidUpdate=="function"&&(u.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof P.componentDidUpdate!="function"||X===o.memoizedProps&&Gt===o.memoizedState||(u.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||X===o.memoizedProps&&Gt===o.memoizedState||(u.flags|=1024),u.memoizedProps=_,u.memoizedState=Qt),P.props=_,P.state=Qt,P.context=dt,_=ee):(typeof P.componentDidUpdate!="function"||X===o.memoizedProps&&Gt===o.memoizedState||(u.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||X===o.memoizedProps&&Gt===o.memoizedState||(u.flags|=1024),_=!1)}return P=_,Xh(o,u),_=(u.flags&128)!==0,P||_?(P=u.stateNode,p=_&&typeof p.getDerivedStateFromError!="function"?null:P.render(),u.flags|=1,o!==null&&_?(u.child=ru(u,o.child,null,A),u.child=ru(u,null,p,A)):qr(o,u,p,A),u.memoizedState=P.state,o=u.child):o=pr(o,u,A),o}function sv(o,u,p,_){return Bh(),u.flags|=256,qr(o,u,p,_),u.child}var av={dehydrated:null,treeContext:null,retryLane:0};function is(o){return{baseLanes:o,cachePool:uu()}}function bg(o,u,p){return o=o!==null?o.childLanes&~p:0,u&&(o|=Gs),o}function Qb(o,u,p){var _=u.pendingProps,A=!1,P=(u.flags&128)!==0,X;if((X=P)||(X=o!==null&&o.memoizedState===null?!1:(Rr.current&2)!==0),X&&(A=!0,u.flags&=-129),X=(u.flags&32)!==0,u.flags&=-33,o===null){if(Gn){if(A?au(u):ou(),Gn){var Q=ns,dt;if(dt=Q){t:{for(dt=Q,Q=fo;dt.nodeType!==8;){if(!Q){Q=null;break t}if(dt=Tu(dt.nextSibling),dt===null){Q=null;break t}}Q=dt}Q!==null?(u.memoizedState={dehydrated:Q,treeContext:nu!==null?{id:xl,overflow:iu}:null,retryLane:536870912},dt=_r(18,null,null,0),dt.stateNode=Q,dt.return=u,u.child=dt,Ss=u,ns=null,dt=!0):dt=!1}dt||Sf(u)}if(Q=u.memoizedState,Q!==null&&(Q=Q.dehydrated,Q!==null))return Q.data==="$!"?u.lanes=16:u.lanes=536870912,null;El(u)}return Q=_.children,_=_.fallback,A?(ou(),A=u.mode,Q=lv({mode:"hidden",children:Q},A),_=Ac(_,A,p,null),Q.return=u,_.return=u,Q.sibling=_,u.child=Q,A=u.child,A.memoizedState=is(p),A.childLanes=bg(o,X,p),u.memoizedState=av,_):(au(u),ov(u,Q))}if(dt=o.memoizedState,dt!==null&&(Q=dt.dehydrated,Q!==null)){if(P)u.flags&256?(au(u),u.flags&=-257,u=Sg(o,u,p)):u.memoizedState!==null?(ou(),u.child=o.child,u.flags|=128,u=null):(ou(),A=_.fallback,Q=u.mode,_=lv({mode:"visible",children:_.children},Q),A=Ac(A,Q,p,null),A.flags|=2,_.return=u,A.return=u,_.sibling=A,u.child=_,ru(u,o.child,null,p),_=u.child,_.memoizedState=is(p),_.childLanes=bg(o,X,p),u.memoizedState=av,u=A);else if(au(u),Q.data==="$!"){if(X=Q.nextSibling&&Q.nextSibling.dataset,X)var Et=X.dgst;X=Et,_=Error(i(419)),_.stack="",_.digest=X,bl({value:_,source:null,stack:null}),u=Sg(o,u,p)}else if(Gr||Op(o,u,p,!1),X=(p&o.childLanes)!==0,Gr||X){if(X=gi,X!==null){if(_=p&-p,(_&42)!==0)_=1;else switch(_){case 2:_=1;break;case 8:_=4;break;case 32:_=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:_=64;break;case 268435456:_=134217728;break;default:_=0}if(_=(_&(X.suspendedLanes|p))!==0?0:_,_!==0&&_!==dt.retryLane)throw dt.retryLane=_,eu(o,_),Pr(X,o,_),za}Q.data==="$?"||Bp(),u=Sg(o,u,p)}else Q.data==="$?"?(u.flags|=128,u.child=o.child,u=Vf.bind(null,o),Q._reactRetry=u,u=null):(o=dt.treeContext,ns=Tu(Q.nextSibling),Ss=u,Gn=!0,co=null,fo=!1,o!==null&&(Ri[La++]=xl,Ri[La++]=iu,Ri[La++]=nu,xl=o.id,iu=o.overflow,nu=u),u=ov(u,_.children),u.flags|=4096);return u}return A?(ou(),A=_.fallback,Q=u.mode,dt=o.child,Et=dt.sibling,_=Hs(dt,{mode:"hidden",children:_.children}),_.subtreeFlags=dt.subtreeFlags&31457280,Et!==null?A=Hs(Et,A):(A=Ac(A,Q,p,null),A.flags|=2),A.return=u,_.return=u,_.sibling=A,u.child=_,_=A,A=u.child,Q=o.child.memoizedState,Q===null?Q=is(p):(dt=Q.cachePool,dt!==null?(Et=hr._currentValue,dt=dt.parent!==Et?{parent:Et,pool:Et}:dt):dt=uu(),Q={baseLanes:Q.baseLanes|p,cachePool:dt}),A.memoizedState=Q,A.childLanes=bg(o,X,p),u.memoizedState=av,_):(au(u),p=o.child,o=p.sibling,p=Hs(p,{mode:"visible",children:_.children}),p.return=u,p.sibling=null,o!==null&&(X=u.deletions,X===null?(u.deletions=[o],u.flags|=16):X.push(o)),u.child=p,u.memoizedState=null,p)}function ov(o,u){return u=lv({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function lv(o,u){return fv(o,u,0,null)}function Sg(o,u,p){return ru(u,o.child,null,p),o=ov(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function Eg(o,u,p){o.lanes|=u;var _=o.alternate;_!==null&&(_.lanes|=u),Ba(o.return,u,p)}function _c(o,u,p,_,A){var P=o.memoizedState;P===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:_,tail:p,tailMode:A}:(P.isBackwards=u,P.rendering=null,P.renderingStartTime=0,P.last=_,P.tail=p,P.tailMode=A)}function Df(o,u,p){var _=u.pendingProps,A=_.revealOrder,P=_.tail;if(qr(o,u,_.children,p),_=Rr.current,(_&2)!==0)_=_&1|2,u.flags|=128;else{if(o!==null&&(o.flags&128)!==0)t:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Eg(o,p,u);else if(o.tag===19)Eg(o,p,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break t;for(;o.sibling===null;){if(o.return===null||o.return===u)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}_&=1}switch(Nt(Rr,_),A){case"forwards":for(p=u.child,A=null;p!==null;)o=p.alternate,o!==null&&Fh(o)===null&&(A=p),p=p.sibling;p=A,p===null?(A=u.child,u.child=null):(A=p.sibling,p.sibling=null),_c(u,!1,A,p,P);break;case"backwards":for(p=null,A=u.child,u.child=null;A!==null;){if(o=A.alternate,o!==null&&Fh(o)===null){u.child=A;break}o=A.sibling,A.sibling=p,p=A,A=o}_c(u,!0,p,null,P);break;case"together":_c(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function pr(o,u,p){if(o!==null&&(u.dependencies=o.dependencies),el|=u.lanes,(p&u.childLanes)===0)if(o!==null){if(Op(o,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(i(153));if(u.child!==null){for(o=u.child,p=Hs(o,o.pendingProps),u.child=p,p.return=u;o.sibling!==null;)o=o.sibling,p=p.sibling=Hs(o,o.pendingProps),p.return=u;p.sibling=null}return u.child}function uv(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Yh(o)))}function uA(o,u,p){switch(u.tag){case 3:se(u,u.stateNode.containerInfo),vc(u,hr,o.memoizedState.cache),Bh();break;case 27:case 5:ce(u);break;case 4:se(u,u.stateNode.containerInfo);break;case 10:vc(u,u.type,u.memoizedProps.value);break;case 13:var _=u.memoizedState;if(_!==null)return _.dehydrated!==null?(au(u),u.flags|=128,null):(p&u.child.childLanes)!==0?Qb(o,u,p):(au(u),o=pr(o,u,p),o!==null?o.sibling:null);au(u);break;case 19:var A=(o.flags&128)!==0;if(_=(p&u.childLanes)!==0,_||(Op(o,u,p,!1),_=(p&u.childLanes)!==0),A){if(_)return Df(o,u,p);u.flags|=128}if(A=u.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Nt(Rr,Rr.current),_)break;return null;case 22:case 23:return u.lanes=0,$b(o,u,p);case 24:vc(u,hr,o.memoizedState.cache)}return pr(o,u,p)}function Rp(o,u,p){if(o!==null)if(o.memoizedProps!==u.pendingProps)Gr=!0;else{if(!uv(o,p)&&(u.flags&128)===0)return Gr=!1,uA(o,u,p);Gr=(o.flags&131072)!==0}else Gr=!1,Gn&&(u.flags&1048576)!==0&&L_(u,yp,u.index);switch(u.lanes=0,u.tag){case 16:t:{o=u.pendingProps;var _=u.elementType,A=_._init;if(_=A(_._payload),u.type=_,typeof _=="function")vu(_)?(o=Of(_,o),u.tag=1,u=Zb(null,u,_,o,p)):(u.tag=0,u=rv(null,u,_,o,p));else{if(_!=null){if(A=_.$$typeof,A===S){u.tag=11,u=tv(null,u,_,o,p);break t}else if(A===x){u.tag=14,u=ev(null,u,_,o,p);break t}}throw u=U(_)||_,Error(i(306,u,""))}}return u;case 0:return rv(o,u,u.type,u.pendingProps,p);case 1:return _=u.type,A=Of(_,u.pendingProps),Zb(o,u,_,A,p);case 3:t:{if(se(u,u.stateNode.containerInfo),o===null)throw Error(i(387));var P=u.pendingProps;A=u.memoizedState,_=A.element,Ag(o,u),Ko(u,P,null,p);var X=u.memoizedState;if(P=X.cache,vc(u,hr,P),P!==A.cache&&Tg(u,[hr],p,!0),Ts(),P=X.element,A.isDehydrated)if(A={element:P,isDehydrated:!1,cache:X.cache},u.updateQueue.baseState=A,u.memoizedState=A,u.flags&256){u=sv(o,u,P,p);break t}else if(P!==_){_=oa(Error(i(424)),u),bl(_),u=sv(o,u,P,p);break t}else for(ns=Tu(u.stateNode.containerInfo.firstChild),Ss=u,Gn=!0,co=null,fo=!0,p=su(u,null,P,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Bh(),P===_){u=pr(o,u,p);break t}qr(o,u,P,p)}u=u.child}return u;case 26:return Xh(o,u),o===null?(p=AN(u.type,null,u.pendingProps,null))?u.memoizedState=p:Gn||(p=u.type,o=u.pendingProps,_=sS(kt.current).createElement(p),_[Gi]=u,_[an]=o,js(_,p,o),It(_),u.stateNode=_):u.memoizedState=AN(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return ce(u),o===null&&Gn&&(_=u.stateNode=EN(u.type,u.pendingProps,kt.current),Ss=u,fo=!0,ns=Tu(_.firstChild)),_=u.pendingProps.children,o!==null||Gn?qr(o,u,_,p):u.child=ru(u,null,_,p),Xh(o,u),u.child;case 5:return o===null&&Gn&&((A=_=ns)&&(_=G6(_,u.type,u.pendingProps,fo),_!==null?(u.stateNode=_,Ss=u,ns=Tu(_.firstChild),fo=!1,A=!0):A=!1),A||Sf(u)),ce(u),A=u.type,P=u.pendingProps,X=o!==null?o.memoizedProps:null,_=P.children,xA(A,P)?_=null:X!==null&&xA(A,X)&&(u.flags|=32),u.memoizedState!==null&&(A=F_(o,u,rA,null,null,p),xv._currentValue=A),Xh(o,u),qr(o,u,_,p),u.child;case 6:return o===null&&Gn&&((o=p=ns)&&(p=q6(p,u.pendingProps,fo),p!==null?(u.stateNode=p,Ss=u,ns=null,o=!0):o=!1),o||Sf(u)),null;case 13:return Qb(o,u,p);case 4:return se(u,u.stateNode.containerInfo),_=u.pendingProps,o===null?u.child=ru(u,null,_,p):qr(o,u,_,p),u.child;case 11:return tv(o,u,u.type,u.pendingProps,p);case 7:return qr(o,u,u.pendingProps,p),u.child;case 8:return qr(o,u,u.pendingProps.children,p),u.child;case 12:return qr(o,u,u.pendingProps.children,p),u.child;case 10:return _=u.pendingProps,vc(u,u.type,_.value),qr(o,u,_.children,p),u.child;case 9:return A=u.type._context,_=u.pendingProps.children,Nf(u),A=Es(A),_=_(A),u.flags|=1,qr(o,u,_,p),u.child;case 14:return ev(o,u,u.type,u.pendingProps,p);case 15:return nv(o,u,u.type,u.pendingProps,p);case 19:return Df(o,u,p);case 22:return $b(o,u,p);case 24:return Nf(u),_=Es(hr),o===null?(A=Mp(),A===null&&(A=gi,P=B_(),A.pooledCache=P,P.refCount++,P!==null&&(A.pooledCacheLanes|=p),A=P),u.memoizedState={parent:_,cache:A},Fs(u),vc(u,hr,A)):((o.lanes&p)!==0&&(Ag(o,u),Ko(u,null,null,p),Ts()),A=o.memoizedState,P=u.memoizedState,A.parent!==_?(A={parent:_,cache:_},u.memoizedState=A,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=A),vc(u,hr,_)):(_=P.cache,vc(u,hr,_),_!==A.cache&&Tg(u,[hr],p,!0))),qr(o,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}var Wh=Dt(null),wl=null,$o=null;function vc(o,u,p){Nt(Wh,u._currentValue),u._currentValue=p}function du(o){o._currentValue=Wh.current,Wt(Wh)}function Ba(o,u,p){for(;o!==null;){var _=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,_!==null&&(_.childLanes|=u)):_!==null&&(_.childLanes&u)!==u&&(_.childLanes|=u),o===p)break;o=o.return}}function Tg(o,u,p,_){var A=o.child;for(A!==null&&(A.return=o);A!==null;){var P=A.dependencies;if(P!==null){var X=A.child;P=P.firstContext;t:for(;P!==null;){var Q=P;P=A;for(var dt=0;dt<u.length;dt++)if(Q.context===u[dt]){P.lanes|=p,Q=P.alternate,Q!==null&&(Q.lanes|=p),Ba(P.return,p,o),_||(X=null);break t}P=Q.next}}else if(A.tag===18){if(X=A.return,X===null)throw Error(i(341));X.lanes|=p,P=X.alternate,P!==null&&(P.lanes|=p),Ba(X,p,o),X=null}else X=A.child;if(X!==null)X.return=A;else for(X=A;X!==null;){if(X===o){X=null;break}if(A=X.sibling,A!==null){A.return=X.return,X=A;break}X=X.return}A=X}}function Op(o,u,p,_){o=null;for(var A=u,P=!1;A!==null;){if(!P){if((A.flags&524288)!==0)P=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var X=A.alternate;if(X===null)throw Error(i(387));if(X=X.memoizedProps,X!==null){var Q=A.type;ra(A.pendingProps.value,X.value)||(o!==null?o.push(Q):o=[Q])}}else if(A===tt.current){if(X=A.alternate,X===null)throw Error(i(387));X.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(o!==null?o.push(xv):o=[xv])}A=A.return}o!==null&&Tg(u,o,p,_),u.flags|=262144}function Yh(o){for(o=o.firstContext;o!==null;){if(!ra(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Nf(o){wl=o,$o=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Es(o){return $h(wl,o)}function Mg(o,u){return wl===null&&Nf(o),$h(o,u)}function $h(o,u){var p=u._currentValue;if(u={context:u,memoizedValue:p,next:null},$o===null){if(o===null)throw Error(i(308));$o=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else $o=$o.next=u;return p}var Dr=!1;function Fs(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ag(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Va(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Fa(o,u,p){var _=o.updateQueue;if(_===null)return null;if(_=_.shared,(ln&2)!==0){var A=_.pending;return A===null?u.next=u:(u.next=A.next,A.next=u),_.pending=u,u=gp(o),mp(o,null,p),u}return pp(o,_,u,p),gp(o)}function xc(o,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194176)!==0)){var _=u.lanes;_&=o.pendingLanes,p|=_,u.lanes=p,Qr(o,p)}}function Kh(o,u){var p=o.updateQueue,_=o.alternate;if(_!==null&&(_=_.updateQueue,p===_)){var A=null,P=null;if(p=p.firstBaseUpdate,p!==null){do{var X={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};P===null?A=P=X:P=P.next=X,p=p.next}while(p!==null);P===null?A=P=u:P=P.next=u}else A=P=u;p={baseState:_.baseState,firstBaseUpdate:A,lastBaseUpdate:P,shared:_.shared,callbacks:_.callbacks},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=u:o.next=u,p.lastBaseUpdate=u}var ca=!1;function Ts(){if(ca){var o=fc;if(o!==null)throw o}}function Ko(o,u,p,_){ca=!1;var A=o.updateQueue;Dr=!1;var P=A.firstBaseUpdate,X=A.lastBaseUpdate,Q=A.shared.pending;if(Q!==null){A.shared.pending=null;var dt=Q,Et=dt.next;dt.next=null,X===null?P=Et:X.next=Et,X=dt;var ee=o.alternate;ee!==null&&(ee=ee.updateQueue,Q=ee.lastBaseUpdate,Q!==X&&(Q===null?ee.firstBaseUpdate=Et:Q.next=Et,ee.lastBaseUpdate=dt))}if(P!==null){var ue=A.baseState;X=0,ee=Et=dt=null,Q=P;do{var Gt=Q.lane&-536870913,Qt=Gt!==Q.lane;if(Qt?(We&Gt)===Gt:(_&Gt)===Gt){Gt!==0&&Gt===Mf&&(ca=!0),ee!==null&&(ee=ee.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});t:{var Ve=o,pn=Q;Gt=u;var Lr=p;switch(pn.tag){case 1:if(Ve=pn.payload,typeof Ve=="function"){ue=Ve.call(Lr,ue,Gt);break t}ue=Ve;break t;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=pn.payload,Gt=typeof Ve=="function"?Ve.call(Lr,ue,Gt):Ve,Gt==null)break t;ue=w({},ue,Gt);break t;case 2:Dr=!0}}Gt=Q.callback,Gt!==null&&(o.flags|=64,Qt&&(o.flags|=8192),Qt=A.callbacks,Qt===null?A.callbacks=[Gt]:Qt.push(Gt))}else Qt={lane:Gt,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},ee===null?(Et=ee=Qt,dt=ue):ee=ee.next=Qt,X|=Gt;if(Q=Q.next,Q===null){if(Q=A.shared.pending,Q===null)break;Qt=Q,Q=Qt.next,Qt.next=null,A.lastBaseUpdate=Qt,A.shared.pending=null}}while(!0);ee===null&&(dt=ue),A.baseState=dt,A.firstBaseUpdate=Et,A.lastBaseUpdate=ee,P===null&&(A.shared.lanes=0),el|=X,o.lanes=X,o.memoizedState=ue}}function Cl(o,u){if(typeof o!="function")throw Error(i(191,o));o.call(u)}function Rl(o,u){var p=o.callbacks;if(p!==null)for(o.callbacks=null,o=0;o<p.length;o++)Cl(p[o],u)}function mr(o,u){try{var p=u.updateQueue,_=p!==null?p.lastEffect:null;if(_!==null){var A=_.next;p=A;do{if((p.tag&o)===o){_=void 0;var P=p.create,X=p.inst;_=P(),X.destroy=_}p=p.next}while(p!==A)}}catch(Q){de(u,u.return,Q)}}function ho(o,u,p){try{var _=u.updateQueue,A=_!==null?_.lastEffect:null;if(A!==null){var P=A.next;_=P;do{if((_.tag&o)===o){var X=_.inst,Q=X.destroy;if(Q!==void 0){X.destroy=void 0,A=u;var dt=p;try{Q()}catch(Et){de(A,dt,Et)}}}_=_.next}while(_!==P)}}catch(Et){de(u,u.return,Et)}}function pu(o){var u=o.updateQueue;if(u!==null){var p=o.stateNode;try{Rl(u,p)}catch(_){de(o,o.return,_)}}}function Dp(o,u,p){p.props=Of(o.type,o.memoizedProps),p.state=o.memoizedState;try{p.componentWillUnmount()}catch(_){de(o,u,_)}}function gr(o,u){try{var p=o.ref;if(p!==null){var _=o.stateNode;switch(o.tag){case 26:case 27:case 5:var A=_;break;default:A=_}typeof p=="function"?o.refCleanup=p(A):p.current=A}}catch(P){de(o,u,P)}}function mi(o,u){var p=o.ref,_=o.refCleanup;if(p!==null)if(typeof _=="function")try{_()}catch(A){de(o,u,A)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(A){de(o,u,A)}else p.current=null}function qn(o){var u=o.type,p=o.memoizedProps,_=o.stateNode;try{t:switch(u){case"button":case"input":case"select":case"textarea":p.autoFocus&&_.focus();break t;case"img":p.src?_.src=p.src:p.srcSet&&(_.srcset=p.srcSet)}}catch(A){de(o,o.return,A)}}function po(o,u,p){try{var _=o.stateNode;B6(_,o.type,p,u),_[an]=u}catch(A){de(o,o.return,A)}}function Zo(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27||o.tag===4}function Np(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||Zo(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==27&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function fa(o,u,p){var _=o.tag;if(_===5||_===6)o=o.stateNode,u?p.nodeType===8?p.parentNode.insertBefore(o,u):p.insertBefore(o,u):(p.nodeType===8?(u=p.parentNode,u.insertBefore(o,p)):(u=p,u.appendChild(o)),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=rS));else if(_!==4&&_!==27&&(o=o.child,o!==null))for(fa(o,u,p),o=o.sibling;o!==null;)fa(o,u,p),o=o.sibling}function mu(o,u,p){var _=o.tag;if(_===5||_===6)o=o.stateNode,u?p.insertBefore(o,u):p.appendChild(o);else if(_!==4&&_!==27&&(o=o.child,o!==null))for(mu(o,u,p),o=o.sibling;o!==null;)mu(o,u,p),o=o.sibling}var Qo=!1,Ii=!1,bc=!1,wg=typeof WeakSet=="function"?WeakSet:Set,yr=null,Cg=!1;function Zh(o,u){if(o=o.containerInfo,_A=fS,o=R_(o),hp(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else t:{p=(p=o.ownerDocument)&&p.defaultView||window;var _=p.getSelection&&p.getSelection();if(_&&_.rangeCount!==0){p=_.anchorNode;var A=_.anchorOffset,P=_.focusNode;_=_.focusOffset;try{p.nodeType,P.nodeType}catch{p=null;break t}var X=0,Q=-1,dt=-1,Et=0,ee=0,ue=o,Gt=null;e:for(;;){for(var Qt;ue!==p||A!==0&&ue.nodeType!==3||(Q=X+A),ue!==P||_!==0&&ue.nodeType!==3||(dt=X+_),ue.nodeType===3&&(X+=ue.nodeValue.length),(Qt=ue.firstChild)!==null;)Gt=ue,ue=Qt;for(;;){if(ue===o)break e;if(Gt===p&&++Et===A&&(Q=X),Gt===P&&++ee===_&&(dt=X),(Qt=ue.nextSibling)!==null)break;ue=Gt,Gt=ue.parentNode}ue=Qt}p=Q===-1||dt===-1?null:{start:Q,end:dt}}else p=null}p=p||{start:0,end:0}}else p=null;for(vA={focusedElem:o,selectionRange:p},fS=!1,yr=u;yr!==null;)if(u=yr,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,yr=o;else for(;yr!==null;){switch(u=yr,P=u.alternate,o=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&P!==null){o=void 0,p=u,A=P.memoizedProps,P=P.memoizedState,_=p.stateNode;try{var Ve=Of(p.type,A,p.elementType===p.type);o=_.getSnapshotBeforeUpdate(Ve,P),_.__reactInternalSnapshotBeforeUpdate=o}catch(pn){de(p,p.return,pn)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,p=o.nodeType,p===9)EA(o);else if(p===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":EA(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=u.sibling,o!==null){o.return=u.return,yr=o;break}yr=u.return}return Ve=Cg,Cg=!1,Ve}function Qh(o,u,p){var _=p.flags;switch(p.tag){case 0:case 11:case 15:Ol(o,p),_&4&&mr(5,p);break;case 1:if(Ol(o,p),_&4)if(o=p.stateNode,u===null)try{o.componentDidMount()}catch(Q){de(p,p.return,Q)}else{var A=Of(p.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(A,u,o.__reactInternalSnapshotBeforeUpdate)}catch(Q){de(p,p.return,Q)}}_&64&&pu(p),_&512&&gr(p,p.return);break;case 3:if(Ol(o,p),_&64&&(_=p.updateQueue,_!==null)){if(o=null,p.child!==null)switch(p.child.tag){case 27:case 5:o=p.child.stateNode;break;case 1:o=p.child.stateNode}try{Rl(_,o)}catch(Q){de(p,p.return,Q)}}break;case 26:Ol(o,p),_&512&&gr(p,p.return);break;case 27:case 5:Ol(o,p),u===null&&_&4&&qn(p),_&512&&gr(p,p.return);break;case 12:Ol(o,p);break;case 13:Ol(o,p),_&4&&Jb(o,p);break;case 22:if(A=p.memoizedState!==null||Qo,!A){u=u!==null&&u.memoizedState!==null||Ii;var P=Qo,X=Ii;Qo=A,(Ii=u)&&!X?tl(o,p,(p.subtreeFlags&8772)!==0):Ol(o,p),Qo=P,Ii=X}_&512&&(p.memoizedProps.mode==="manual"?gr(p,p.return):mi(p,p.return));break;default:Ol(o,p)}}function Rg(o){var u=o.alternate;u!==null&&(o.alternate=null,Rg(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&Fo(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Pi=null,rs=!1;function Ms(o,u,p){for(p=p.child;p!==null;)Og(o,u,p),p=p.sibling}function Og(o,u,p){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(De,p)}catch{}switch(p.tag){case 26:Ii||mi(p,u),Ms(o,u,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Ii||mi(p,u);var _=Pi,A=rs;for(Pi=p.stateNode,Ms(o,u,p),p=p.stateNode,u=p.attributes;u.length;)p.removeAttributeNode(u[0]);Fo(p),Pi=_,rs=A;break;case 5:Ii||mi(p,u);case 6:A=Pi;var P=rs;if(Pi=null,Ms(o,u,p),Pi=A,rs=P,Pi!==null)if(rs)try{o=Pi,_=p.stateNode,o.nodeType===8?o.parentNode.removeChild(_):o.removeChild(_)}catch(X){de(p,u,X)}else try{Pi.removeChild(p.stateNode)}catch(X){de(p,u,X)}break;case 18:Pi!==null&&(rs?(u=Pi,p=p.stateNode,u.nodeType===8?SA(u.parentNode,p):u.nodeType===1&&SA(u,p),Tv(u)):SA(Pi,p.stateNode));break;case 4:_=Pi,A=rs,Pi=p.stateNode.containerInfo,rs=!0,Ms(o,u,p),Pi=_,rs=A;break;case 0:case 11:case 14:case 15:Ii||ho(2,p,u),Ii||ho(4,p,u),Ms(o,u,p);break;case 1:Ii||(mi(p,u),_=p.stateNode,typeof _.componentWillUnmount=="function"&&Dp(p,u,_)),Ms(o,u,p);break;case 21:Ms(o,u,p);break;case 22:Ii||mi(p,u),Ii=(_=Ii)||p.memoizedState!==null,Ms(o,u,p),Ii=_;break;default:Ms(o,u,p)}}function Jb(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Tv(o)}catch(p){de(u,u.return,p)}}function Ip(o){switch(o.tag){case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new wg),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new wg),u;default:throw Error(i(435,o.tag))}}function Pp(o,u){var p=Ip(o);u.forEach(function(_){var A=Ft.bind(null,o,_);p.has(_)||(p.add(_),_.then(A,A))})}function ks(o,u){var p=u.deletions;if(p!==null)for(var _=0;_<p.length;_++){var A=p[_],P=o,X=u,Q=X;t:for(;Q!==null;){switch(Q.tag){case 27:case 5:Pi=Q.stateNode,rs=!1;break t;case 3:Pi=Q.stateNode.containerInfo,rs=!0;break t;case 4:Pi=Q.stateNode.containerInfo,rs=!0;break t}Q=Q.return}if(Pi===null)throw Error(i(160));Og(P,X,A),Pi=null,rs=!1,P=A.alternate,P!==null&&(P.return=null),A.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)If(u,o),u=u.sibling}var As=null;function If(o,u){var p=o.alternate,_=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:ks(u,o),ws(o),_&4&&(ho(3,o,o.return),mr(3,o),ho(5,o,o.return));break;case 1:ks(u,o),ws(o),_&512&&(Ii||p===null||mi(p,p.return)),_&64&&Qo&&(o=o.updateQueue,o!==null&&(_=o.callbacks,_!==null&&(p=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=p===null?_:p.concat(_))));break;case 26:var A=As;if(ks(u,o),ws(o),_&512&&(Ii||p===null||mi(p,p.return)),_&4){var P=p!==null?p.memoizedState:null;if(_=o.memoizedState,p===null)if(_===null)if(o.stateNode===null){t:{_=o.type,p=o.memoizedProps,A=A.ownerDocument||A;e:switch(_){case"title":P=A.getElementsByTagName("title")[0],(!P||P[eo]||P[Gi]||P.namespaceURI==="http://www.w3.org/2000/svg"||P.hasAttribute("itemprop"))&&(P=A.createElement(_),A.head.insertBefore(P,A.querySelector("head > title"))),js(P,_,p),P[Gi]=o,It(P),_=P;break t;case"link":var X=RN("link","href",A).get(_+(p.href||""));if(X){for(var Q=0;Q<X.length;Q++)if(P=X[Q],P.getAttribute("href")===(p.href==null?null:p.href)&&P.getAttribute("rel")===(p.rel==null?null:p.rel)&&P.getAttribute("title")===(p.title==null?null:p.title)&&P.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){X.splice(Q,1);break e}}P=A.createElement(_),js(P,_,p),A.head.appendChild(P);break;case"meta":if(X=RN("meta","content",A).get(_+(p.content||""))){for(Q=0;Q<X.length;Q++)if(P=X[Q],P.getAttribute("content")===(p.content==null?null:""+p.content)&&P.getAttribute("name")===(p.name==null?null:p.name)&&P.getAttribute("property")===(p.property==null?null:p.property)&&P.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&P.getAttribute("charset")===(p.charSet==null?null:p.charSet)){X.splice(Q,1);break e}}P=A.createElement(_),js(P,_,p),A.head.appendChild(P);break;default:throw Error(i(468,_))}P[Gi]=o,It(P),_=P}o.stateNode=_}else ON(A,o.type,o.stateNode);else o.stateNode=CN(A,_,o.memoizedProps);else P!==_?(P===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):P.count--,_===null?ON(A,o.type,o.stateNode):CN(A,_,o.memoizedProps)):_===null&&o.stateNode!==null&&po(o,o.memoizedProps,p.memoizedProps)}break;case 27:if(_&4&&o.alternate===null){A=o.stateNode,P=o.memoizedProps;try{for(var dt=A.firstChild;dt;){var Et=dt.nextSibling,ee=dt.nodeName;dt[eo]||ee==="HEAD"||ee==="BODY"||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&dt.rel.toLowerCase()==="stylesheet"||A.removeChild(dt),dt=Et}for(var ue=o.type,Gt=A.attributes;Gt.length;)A.removeAttributeNode(Gt[0]);js(A,ue,P),A[Gi]=o,A[an]=P}catch(Ve){de(o,o.return,Ve)}}case 5:if(ks(u,o),ws(o),_&512&&(Ii||p===null||mi(p,p.return)),o.flags&32){A=o.stateNode;try{ur(A,"")}catch(Ve){de(o,o.return,Ve)}}_&4&&o.stateNode!=null&&(A=o.memoizedProps,po(o,A,p!==null?p.memoizedProps:A)),_&1024&&(bc=!0);break;case 6:if(ks(u,o),ws(o),_&4){if(o.stateNode===null)throw Error(i(162));_=o.memoizedProps,p=o.stateNode;try{p.nodeValue=_}catch(Ve){de(o,o.return,Ve)}}break;case 3:if(lS=null,A=As,As=aS(u.containerInfo),ks(u,o),As=A,ws(o),_&4&&p!==null&&p.memoizedState.isDehydrated)try{Tv(u.containerInfo)}catch(Ve){de(o,o.return,Ve)}bc&&(bc=!1,Sc(o));break;case 4:_=As,As=aS(o.stateNode.containerInfo),ks(u,o),ws(o),As=_;break;case 12:ks(u,o),ws(o);break;case 13:ks(u,o),ws(o),o.child.flags&8192&&o.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Mn=xt()),_&4&&(_=o.updateQueue,_!==null&&(o.updateQueue=null,Pp(o,_)));break;case 22:if(_&512&&(Ii||p===null||mi(p,p.return)),dt=o.memoizedState!==null,Et=p!==null&&p.memoizedState!==null,ee=Qo,ue=Ii,Qo=ee||dt,Ii=ue||Et,ks(u,o),Ii=ue,Qo=ee,ws(o),u=o.stateNode,u._current=o,u._visibility&=-3,u._visibility|=u._pendingVisibility&2,_&8192&&(u._visibility=dt?u._visibility&-2:u._visibility|1,dt&&(u=Qo||Ii,p===null||Et||u||Jo(o)),o.memoizedProps===null||o.memoizedProps.mode!=="manual"))t:for(p=null,u=o;;){if(u.tag===5||u.tag===26||u.tag===27){if(p===null){Et=p=u;try{if(A=Et.stateNode,dt)P=A.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{X=Et.stateNode,Q=Et.memoizedProps.style;var Qt=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;X.style.display=Qt==null||typeof Qt=="boolean"?"":(""+Qt).trim()}}catch(Ve){de(Et,Et.return,Ve)}}}else if(u.tag===6){if(p===null){Et=u;try{Et.stateNode.nodeValue=dt?"":Et.memoizedProps}catch(Ve){de(Et,Et.return,Ve)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break t;for(;u.sibling===null;){if(u.return===null||u.return===o)break t;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}_&4&&(_=o.updateQueue,_!==null&&(p=_.retryQueue,p!==null&&(_.retryQueue=null,Pp(o,p))));break;case 19:ks(u,o),ws(o),_&4&&(_=o.updateQueue,_!==null&&(o.updateQueue=null,Pp(o,_)));break;case 21:break;default:ks(u,o),ws(o)}}function ws(o){var u=o.flags;if(u&2){try{if(o.tag!==27){t:{for(var p=o.return;p!==null;){if(Zo(p)){var _=p;break t}p=p.return}throw Error(i(160))}switch(_.tag){case 27:var A=_.stateNode,P=Np(o);mu(o,P,A);break;case 5:var X=_.stateNode;_.flags&32&&(ur(X,""),_.flags&=-33);var Q=Np(o);mu(o,Q,X);break;case 3:case 4:var dt=_.stateNode.containerInfo,Et=Np(o);fa(o,Et,dt);break;default:throw Error(i(161))}}}catch(ee){de(o,o.return,ee)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function Sc(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;Sc(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function Ol(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Qh(o,u.alternate,u),u=u.sibling}function Jo(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:ho(4,u,u.return),Jo(u);break;case 1:mi(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&Dp(u,u.return,p),Jo(u);break;case 26:case 27:case 5:mi(u,u.return),Jo(u);break;case 22:mi(u,u.return),u.memoizedState===null&&Jo(u);break;default:Jo(u)}o=o.sibling}}function tl(o,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var _=u.alternate,A=o,P=u,X=P.flags;switch(P.tag){case 0:case 11:case 15:tl(A,P,p),mr(4,P);break;case 1:if(tl(A,P,p),_=P,A=_.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Et){de(_,_.return,Et)}if(_=P,A=_.updateQueue,A!==null){var Q=_.stateNode;try{var dt=A.shared.hiddenCallbacks;if(dt!==null)for(A.shared.hiddenCallbacks=null,A=0;A<dt.length;A++)Cl(dt[A],Q)}catch(Et){de(_,_.return,Et)}}p&&X&64&&pu(P),gr(P,P.return);break;case 26:case 27:case 5:tl(A,P,p),p&&_===null&&X&4&&qn(P),gr(P,P.return);break;case 12:tl(A,P,p);break;case 13:tl(A,P,p),p&&X&4&&Jb(A,P);break;case 22:P.memoizedState===null&&tl(A,P,p),gr(P,P.return);break;default:tl(A,P,p)}u=u.sibling}}function ha(o,u){var p=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==p&&(o!=null&&o.refCount++,p!=null&&uc(p))}function mo(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&uc(o))}function Oi(o,u,p,_){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)gu(o,u,p,_),u=u.sibling}function gu(o,u,p,_){var A=u.flags;switch(u.tag){case 0:case 11:case 15:Oi(o,u,p,_),A&2048&&mr(9,u);break;case 3:Oi(o,u,p,_),A&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&uc(o)));break;case 12:if(A&2048){Oi(o,u,p,_),o=u.stateNode;try{var P=u.memoizedProps,X=P.id,Q=P.onPostCommit;typeof Q=="function"&&Q(X,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(dt){de(u,u.return,dt)}}else Oi(o,u,p,_);break;case 23:break;case 22:P=u.stateNode,u.memoizedState!==null?P._visibility&4?Oi(o,u,p,_):Kn(o,u):P._visibility&4?Oi(o,u,p,_):(P._visibility|=4,on(o,u,p,_,(u.subtreeFlags&10256)!==0)),A&2048&&ha(u.alternate,u);break;case 24:Oi(o,u,p,_),A&2048&&mo(u.alternate,u);break;default:Oi(o,u,p,_)}}function on(o,u,p,_,A){for(A=A&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var P=o,X=u,Q=p,dt=_,Et=X.flags;switch(X.tag){case 0:case 11:case 15:on(P,X,Q,dt,A),mr(8,X);break;case 23:break;case 22:var ee=X.stateNode;X.memoizedState!==null?ee._visibility&4?on(P,X,Q,dt,A):Kn(P,X):(ee._visibility|=4,on(P,X,Q,dt,A)),A&&Et&2048&&ha(X.alternate,X);break;case 24:on(P,X,Q,dt,A),A&&Et&2048&&mo(X.alternate,X);break;default:on(P,X,Q,dt,A)}u=u.sibling}}function Kn(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=o,_=u,A=_.flags;switch(_.tag){case 22:Kn(p,_),A&2048&&ha(_.alternate,_);break;case 24:Kn(p,_),A&2048&&mo(_.alternate,_);break;default:Kn(p,_)}u=u.sibling}}var Wi=8192;function yu(o){if(o.subtreeFlags&Wi)for(o=o.child;o!==null;)Pf(o),o=o.sibling}function Pf(o){switch(o.tag){case 26:yu(o),o.flags&Wi&&o.memoizedState!==null&&iH(As,o.memoizedState,o.memoizedProps);break;case 5:yu(o);break;case 3:case 4:var u=As;As=aS(o.stateNode.containerInfo),yu(o),As=u;break;case 22:o.memoizedState===null&&(u=o.alternate,u!==null&&u.memoizedState!==null?(u=Wi,Wi=16777216,yu(o),Wi=u):yu(o));break;default:yu(o)}}function Ec(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function Tc(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var _=u[p];yr=_,tS(_,o)}Ec(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Jh(o),o=o.sibling}function Jh(o){switch(o.tag){case 0:case 11:case 15:Tc(o),o.flags&2048&&ho(9,o,o.return);break;case 3:Tc(o);break;case 12:Tc(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&4&&(o.return===null||o.return.tag!==13)?(u._visibility&=-5,_u(o)):Tc(o);break;default:Tc(o)}}function _u(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var _=u[p];yr=_,tS(_,o)}Ec(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:ho(8,u,u.return),_u(u);break;case 22:p=u.stateNode,p._visibility&4&&(p._visibility&=-5,_u(u));break;default:_u(u)}o=o.sibling}}function tS(o,u){for(;yr!==null;){var p=yr;switch(p.tag){case 0:case 11:case 15:ho(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var _=p.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:uc(p.memoizedState.cache)}if(_=p.child,_!==null)_.return=p,yr=_;else t:for(p=o;yr!==null;){_=yr;var A=_.sibling,P=_.return;if(Rg(_),_===p){yr=null;break t}if(A!==null){A.return=P,yr=A;break t}yr=P}}}function cv(o,u,p,_){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(o,u,p,_){return new cv(o,u,p,_)}function vu(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Hs(o,u){var p=o.alternate;return p===null?(p=_r(o.tag,u,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=u,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&31457280,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,u=o.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p.refCleanup=o.refCleanup,p}function Mc(o,u){o.flags&=31457282;var p=o.alternate;return p===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=p.childLanes,o.lanes=p.lanes,o.child=p.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=p.memoizedProps,o.memoizedState=p.memoizedState,o.updateQueue=p.updateQueue,o.type=p.type,u=p.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function td(o,u,p,_,A,P){var X=0;if(_=o,typeof o=="function")vu(o)&&(X=1);else if(typeof o=="string")X=eH(o,p,Jt.current)?26:o==="html"||o==="head"||o==="body"?27:5;else t:switch(o){case c:return Ac(p.children,A,P,u);case f:X=8,A|=24;break;case m:return o=_r(12,p,u,A|2),o.elementType=m,o.lanes=P,o;case E:return o=_r(13,p,u,A),o.elementType=E,o.lanes=P,o;case T:return o=_r(19,p,u,A),o.elementType=T,o.lanes=P,o;case D:return fv(p,A,P,u);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case g:case v:X=10;break t;case y:X=9;break t;case S:X=11;break t;case x:X=14;break t;case R:X=16,_=null;break t}X=29,p=Error(i(130,o===null?"null":typeof o,"")),_=null}return u=_r(X,p,u,A),u.elementType=o,u.type=_,u.lanes=P,u}function Ac(o,u,p,_){return o=_r(7,o,_,u),o.lanes=p,o}function fv(o,u,p,_){o=_r(22,o,_,u),o.elementType=D,o.lanes=p;var A={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var P=A._current;if(P===null)throw Error(i(456));if((A._pendingVisibility&2)===0){var X=eu(P,2);X!==null&&(A._pendingVisibility|=2,Pr(X,P,2))}},attach:function(){var P=A._current;if(P===null)throw Error(i(456));if((A._pendingVisibility&2)!==0){var X=eu(P,2);X!==null&&(A._pendingVisibility&=-3,Pr(X,P,2))}}};return o.stateNode=A,o}function Nr(o,u,p){return o=_r(6,o,null,u),o.lanes=p,o}function Lp(o,u,p){return u=_r(4,o.children!==null?o.children:[],o.key,u),u.lanes=p,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}function go(o){o.flags|=4}function wc(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!DN(u)){if(u=la.current,u!==null&&((We&4194176)===We?Sl!==null:(We&62914560)!==We&&(We&536870912)===0||u!==Sl))throw Vh=og,U_;o.flags|=8192}}function yo(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?yn():536870912,o.lanes|=u,Nl|=u)}function Up(o,u){if(!Gn)switch(o.tailMode){case"hidden":u=o.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var _=null;p!==null;)p.alternate!==null&&(_=p),p=p.sibling;_===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:_.sibling=null}}function tr(o){var u=o.alternate!==null&&o.alternate.child===o.child,p=0,_=0;if(u)for(var A=o.child;A!==null;)p|=A.lanes|A.childLanes,_|=A.subtreeFlags&31457280,_|=A.flags&31457280,A.return=o,A=A.sibling;else for(A=o.child;A!==null;)p|=A.lanes|A.childLanes,_|=A.subtreeFlags,_|=A.flags,A.return=o,A=A.sibling;return o.subtreeFlags|=_,o.childLanes=p,u}function cA(o,u,p){var _=u.pendingProps;switch(rc(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tr(u),null;case 1:return tr(u),null;case 3:return p=u.stateNode,_=null,o!==null&&(_=o.memoizedState.cache),u.memoizedState.cache!==_&&(u.flags|=2048),du(hr),$t(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(zh(u)?go(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,co!==null&&(bo(co),co=null))),tr(u),null;case 26:return p=u.memoizedState,o===null?(go(u),p!==null?(tr(u),wc(u,p)):(tr(u),u.flags&=-16777217)):p?p!==o.memoizedState?(go(u),tr(u),wc(u,p)):(tr(u),u.flags&=-16777217):(o.memoizedProps!==_&&go(u),tr(u),u.flags&=-16777217),null;case 27:rt(u),p=kt.current;var A=u.type;if(o!==null&&u.stateNode!=null)o.memoizedProps!==_&&go(u);else{if(!_){if(u.stateNode===null)throw Error(i(166));return tr(u),null}o=Jt.current,zh(u)?lb(u):(o=EN(A,_,p),u.stateNode=o,go(u))}return tr(u),null;case 5:if(rt(u),p=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==_&&go(u);else{if(!_){if(u.stateNode===null)throw Error(i(166));return tr(u),null}if(o=Jt.current,zh(u))lb(u);else{switch(A=sS(kt.current),o){case 1:o=A.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:o=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":o=A.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":o=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":o=A.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof _.is=="string"?A.createElement("select",{is:_.is}):A.createElement("select"),_.multiple?o.multiple=!0:_.size&&(o.size=_.size);break;default:o=typeof _.is=="string"?A.createElement(p,{is:_.is}):A.createElement(p)}}o[Gi]=u,o[an]=_;t:for(A=u.child;A!==null;){if(A.tag===5||A.tag===6)o.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===u)break t;for(;A.sibling===null;){if(A.return===null||A.return===u)break t;A=A.return}A.sibling.return=A.return,A=A.sibling}u.stateNode=o;t:switch(js(o,p,_),p){case"button":case"input":case"select":case"textarea":o=!!_.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&go(u)}}return tr(u),u.flags&=-16777217,null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==_&&go(u);else{if(typeof _!="string"&&u.stateNode===null)throw Error(i(166));if(o=kt.current,zh(u)){if(o=u.stateNode,p=u.memoizedProps,_=null,A=Ss,A!==null)switch(A.tag){case 27:case 5:_=A.memoizedProps}o[Gi]=u,o=!!(o.nodeValue===p||_!==null&&_.suppressHydrationWarning===!0||yN(o.nodeValue,p)),o||Sf(u)}else o=sS(o).createTextNode(_),o[Gi]=u,u.stateNode=o}return tr(u),null;case 13:if(_=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(A=zh(u),_!==null&&_.dehydrated!==null){if(o===null){if(!A)throw Error(i(318));if(A=u.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));A[Gi]=u}else Bh(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;tr(u),A=!1}else co!==null&&(bo(co),co=null),A=!0;if(!A)return u.flags&256?(El(u),u):(El(u),null)}if(El(u),(u.flags&128)!==0)return u.lanes=p,u;if(p=_!==null,o=o!==null&&o.memoizedState!==null,p){_=u.child,A=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(A=_.alternate.memoizedState.cachePool.pool);var P=null;_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(P=_.memoizedState.cachePool.pool),P!==A&&(_.flags|=2048)}return p!==o&&p&&(u.child.flags|=8192),yo(u,u.updateQueue),tr(u),null;case 4:return $t(),o===null&&mA(u.stateNode.containerInfo),tr(u),null;case 10:return du(u.type),tr(u),null;case 19:if(Wt(Rr),A=u.memoizedState,A===null)return tr(u),null;if(_=(u.flags&128)!==0,P=A.rendering,P===null)if(_)Up(A,!1);else{if(Li!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(P=Fh(o),P!==null){for(u.flags|=128,Up(A,!1),o=P.updateQueue,u.updateQueue=o,yo(u,o),u.subtreeFlags=0,o=p,p=u.child;p!==null;)Mc(p,o),p=p.sibling;return Nt(Rr,Rr.current&1|2),u.child}o=o.sibling}A.tail!==null&&xt()>Ln&&(u.flags|=128,_=!0,Up(A,!1),u.lanes=4194304)}else{if(!_)if(o=Fh(P),o!==null){if(u.flags|=128,_=!0,o=o.updateQueue,u.updateQueue=o,yo(u,o),Up(A,!0),A.tail===null&&A.tailMode==="hidden"&&!P.alternate&&!Gn)return tr(u),null}else 2*xt()-A.renderingStartTime>Ln&&p!==536870912&&(u.flags|=128,_=!0,Up(A,!1),u.lanes=4194304);A.isBackwards?(P.sibling=u.child,u.child=P):(o=A.last,o!==null?o.sibling=P:u.child=P,A.last=P)}return A.tail!==null?(u=A.tail,A.rendering=u,A.tail=u.sibling,A.renderingStartTime=xt(),u.sibling=null,o=Rr.current,Nt(Rr,_?o&1|2:o&1),u):(tr(u),null);case 22:case 23:return El(u),Tp(),_=u.memoizedState!==null,o!==null?o.memoizedState!==null!==_&&(u.flags|=8192):_&&(u.flags|=8192),_?(p&536870912)!==0&&(u.flags&128)===0&&(tr(u),u.subtreeFlags&6&&(u.flags|=8192)):tr(u),p=u.updateQueue,p!==null&&yo(u,p.retryQueue),p=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==p&&(u.flags|=2048),o!==null&&Wt(lu),null;case 24:return p=null,o!==null&&(p=o.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),du(hr),tr(u),null;case 25:return null}throw Error(i(156,u.tag))}function ir(o,u){switch(rc(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return du(hr),$t(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return rt(u),null;case 13:if(El(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(i(340));Bh()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return Wt(Rr),null;case 4:return $t(),null;case 10:return du(u.type),null;case 22:case 23:return El(u),Tp(),o!==null&&Wt(lu),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return du(hr),null;case 25:return null;default:return null}}function hv(o,u){switch(rc(u),u.tag){case 3:du(hr),$t();break;case 26:case 27:case 5:rt(u);break;case 4:$t();break;case 13:El(u);break;case 19:Wt(Rr);break;case 10:du(u.type);break;case 22:case 23:El(u),Tp(),o!==null&&Wt(lu);break;case 24:du(hr)}}var Lf={getCacheForType:function(o){var u=Es(hr),p=u.data.get(o);return p===void 0&&(p=o(),u.data.set(o,p)),p}},xu=typeof WeakMap=="function"?WeakMap:Map,ln=0,gi=null,On=null,We=0,Ti=0,Zn=null,vr=!1,Cs=!1,Cc=!1,bu=0,Li=0,el=0,Dl=0,ed=0,Gs=0,Nl=0,zp=null,Pn=null,yi=!1,Mn=0,Ln=1/0,fi=null,Ir=null,_o=!1,vo=null,Uf=0,nl=0,Yi=null,xo=0,Su=null;function qs(){if((ln&2)!==0&&We!==0)return We&-We;if(I.T!==null){var o=Mf;return o!==0?o:fA()}return Gu()}function ka(){Gs===0&&(Gs=(We&536870912)===0||Gn?Ci():536870912);var o=la.current;return o!==null&&(o.flags|=32),Gs}function Pr(o,u,p){(o===gi&&Ti===2||o.cancelPendingCommit!==null)&&(Eu(o,0),Ha(o,We,Gs,!1)),$n(o,p),((ln&2)===0||o!==gi)&&(o===gi&&((ln&2)===0&&(Dl|=p),Li===4&&Ha(o,We,Gs,!1)),Mi(o))}function nd(o,u,p){if((ln&6)!==0)throw Error(i(327));var _=!p&&(u&60)===0&&(u&o.expiredLanes)===0||je(o,u),A=_?h(o,u):Bf(o,u,!0),P=_;do{if(A===0){Cs&&!_&&Ha(o,u,0,!1);break}else if(A===6)Ha(o,u,0,!vr);else{if(p=o.current.alternate,P&&!dv(p)){A=Bf(o,u,!1),P=!1;continue}if(A===2){if(P=u,o.errorRecoveryDisabledLanes&P)var X=0;else X=o.pendingLanes&-536870913,X=X!==0?X:X&536870912?536870912:0;if(X!==0){u=X;t:{var Q=o;A=zp;var dt=Q.current.memoizedState.isDehydrated;if(dt&&(Eu(Q,X).flags|=256),X=Bf(Q,X,!1),X!==2){if(Cc&&!dt){Q.errorRecoveryDisabledLanes|=P,Dl|=P,A=4;break t}P=Pn,Pn=A,P!==null&&bo(P)}A=X}if(P=!1,A!==2)continue}}if(A===1){Eu(o,0),Ha(o,u,0,!0);break}t:{switch(_=o,A){case 0:case 1:throw Error(i(345));case 4:if((u&4194176)===u){Ha(_,u,Gs,!vr);break t}break;case 2:Pn=null;break;case 3:case 5:break;default:throw Error(i(329))}if(_.finishedWork=p,_.finishedLanes=u,(u&62914560)===u&&(P=Mn+300-xt(),10<P)){if(Ha(_,u,Gs,!vr),ve(_,0)!==0)break t;_.timeoutHandle=xN(Dg.bind(null,_,p,Pn,fi,yi,u,Gs,Dl,Nl,vr,2,-0,0),P);break t}Dg(_,p,Pn,fi,yi,u,Gs,Dl,Nl,vr,0,-0,0)}}break}while(!0);Mi(o)}function bo(o){Pn===null?Pn=o:Pn.push.apply(Pn,o)}function Dg(o,u,p,_,A,P,X,Q,dt,Et,ee,ue,Gt){var Qt=u.subtreeFlags;if((Qt&8192||(Qt&16785408)===16785408)&&(vv={stylesheets:null,count:0,unsuspend:nH},Pf(u),u=rH(),u!==null)){o.cancelPendingCommit=u(yt.bind(null,o,p,_,A,X,Q,dt,1,ue,Gt)),Ha(o,P,X,!Et);return}yt(o,p,_,A,X,Q,dt,ee,ue,Gt)}function dv(o){for(var u=o;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var _=0;_<p.length;_++){var A=p[_],P=A.getSnapshot;A=A.value;try{if(!ra(P(),A))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Ha(o,u,p,_){u&=~ed,u&=~Dl,o.suspendedLanes|=u,o.pingedLanes&=~u,_&&(o.warmLanes|=u),_=o.expirationTimes;for(var A=u;0<A;){var P=31-Te(A),X=1<<P;_[P]=-1,A&=~X}p!==0&&Da(o,p,u)}function zf(){return(ln&6)===0?(Vn(0),!1):!0}function Il(){if(On!==null){if(Ti===0)var o=On.return;else o=On,$o=wl=null,fg(o),oc=null,bp=0,o=On;for(;o!==null;)hv(o.alternate,o),o=o.return;On=null}}function Eu(o,u){o.finishedWork=null,o.finishedLanes=0;var p=o.timeoutHandle;p!==-1&&(o.timeoutHandle=-1,F6(p)),p=o.cancelPendingCommit,p!==null&&(o.cancelPendingCommit=null,p()),Il(),gi=o,On=p=Hs(o.current,null),We=u,Ti=0,Zn=null,vr=!1,Cs=je(o,u),Cc=!1,Nl=Gs=ed=Dl=el=Li=0,Pn=zp=null,yi=!1,(u&8)!==0&&(u|=u&32);var _=o.entangledLanes;if(_!==0)for(o=o.entanglements,_&=u;0<_;){var A=31-Te(_),P=1<<A;u|=o[A],_&=~P}return bu=u,dp(),p}function Rc(o,u){Tn=null,I.H=Al,u===sc?(u=ai(),Ti=3):u===U_?(u=ai(),Ti=4):Ti=u===za?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Zn=u,On===null&&(Li=1,xg(o,oa(u,o.current)))}function id(){var o=I.H;return I.H=Al,o===null?Al:o}function Ng(){var o=I.A;return I.A=Lf,o}function Bp(){Li=4,vr||(We&4194176)!==We&&la.current!==null||(Cs=!0),(el&134217727)===0&&(Dl&134217727)===0||gi===null||Ha(gi,We,Gs,!1)}function Bf(o,u,p){var _=ln;ln|=2;var A=id(),P=Ng();(gi!==o||We!==u)&&(fi=null,Eu(o,u)),u=!1;var X=Li;t:do try{if(Ti!==0&&On!==null){var Q=On,dt=Zn;switch(Ti){case 8:Il(),X=6;break t;case 3:case 2:case 6:la.current===null&&(u=!0);var Et=Ti;if(Ti=0,Zn=null,z(o,Q,dt,Et),p&&Cs){X=0;break t}break;default:Et=Ti,Ti=0,Zn=null,z(o,Q,dt,Et)}}pv(),X=Li;break}catch(ee){Rc(o,ee)}while(!0);return u&&o.shellSuspendCounter++,$o=wl=null,ln=_,I.H=A,I.A=P,On===null&&(gi=null,We=0,dp()),X}function pv(){for(;On!==null;)b(On)}function h(o,u){var p=ln;ln|=2;var _=id(),A=Ng();gi!==o||We!==u?(fi=null,Ln=xt()+500,Eu(o,u)):Cs=je(o,u);t:do try{if(Ti!==0&&On!==null){u=On;var P=Zn;e:switch(Ti){case 1:Ti=0,Zn=null,z(o,u,P,1);break;case 2:if(cb(P)){Ti=0,Zn=null,C(u);break}u=function(){Ti===2&&gi===o&&(Ti=7),Mi(o)},P.then(u,u);break t;case 3:Ti=7;break t;case 4:Ti=5;break t;case 7:cb(P)?(Ti=0,Zn=null,C(u)):(Ti=0,Zn=null,z(o,u,P,7));break;case 5:var X=null;switch(On.tag){case 26:X=On.memoizedState;case 5:case 27:var Q=On;if(!X||DN(X)){Ti=0,Zn=null;var dt=Q.sibling;if(dt!==null)On=dt;else{var Et=Q.return;Et!==null?(On=Et,H(Et)):On=null}break e}}Ti=0,Zn=null,z(o,u,P,5);break;case 6:Ti=0,Zn=null,z(o,u,P,6);break;case 8:Il(),Li=6;break t;default:throw Error(i(462))}}d();break}catch(ee){Rc(o,ee)}while(!0);return $o=wl=null,I.H=_,I.A=A,ln=p,On!==null?0:(gi=null,We=0,dp(),Li)}function d(){for(;On!==null&&!q();)b(On)}function b(o){var u=Rp(o.alternate,o,bu);o.memoizedProps=o.pendingProps,u===null?H(o):On=u}function C(o){var u=o,p=u.alternate;switch(u.tag){case 15:case 0:u=Kb(p,u,u.pendingProps,u.type,void 0,We);break;case 11:u=Kb(p,u,u.pendingProps,u.type.render,u.ref,We);break;case 5:fg(u);default:hv(p,u),u=On=Mc(u,bu),u=Rp(p,u,bu)}o.memoizedProps=o.pendingProps,u===null?H(o):On=u}function z(o,u,p,_){$o=wl=null,fg(u),oc=null,bp=0;var A=u.return;try{if(lA(o,A,u,p,We)){Li=1,xg(o,oa(p,o.current)),On=null;return}}catch(P){if(A!==null)throw On=A,P;Li=1,xg(o,oa(p,o.current)),On=null;return}u.flags&32768?(Gn||_===1?o=!0:Cs||(We&536870912)!==0?o=!1:(vr=o=!0,(_===2||_===3||_===6)&&(_=la.current,_!==null&&_.tag===13&&(_.flags|=16384))),J(u,o)):H(u)}function H(o){var u=o;do{if((u.flags&32768)!==0){J(u,vr);return}o=u.return;var p=cA(u.alternate,u,bu);if(p!==null){On=p;return}if(u=u.sibling,u!==null){On=u;return}On=u=o}while(u!==null);Li===0&&(Li=5)}function J(o,u){do{var p=ir(o.alternate,o);if(p!==null){p.flags&=32767,On=p;return}if(p=o.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(o=o.sibling,o!==null)){On=o;return}On=o=p}while(o!==null);Li=6,On=null}function yt(o,u,p,_,A,P,X,Q,dt,Et){var ee=I.T,ue=nt.p;try{nt.p=2,I.T=null,Ot(o,u,p,_,ue,A,P,X,Q,dt,Et)}finally{I.T=ee,nt.p=ue}}function Ot(o,u,p,_,A,P,X,Q){do me();while(vo!==null);if((ln&6)!==0)throw Error(i(327));var dt=o.finishedWork;if(_=o.finishedLanes,dt===null)return null;if(o.finishedWork=null,o.finishedLanes=0,dt===o.current)throw Error(i(177));o.callbackNode=null,o.callbackPriority=0,o.cancelPendingCommit=null;var Et=dt.lanes|dt.childLanes;if(Et|=tu,Hu(o,_,Et,P,X,Q),o===gi&&(On=gi=null,We=0),(dt.subtreeFlags&10256)===0&&(dt.flags&10256)===0||_o||(_o=!0,nl=Et,Yi=p,Ct(fe,function(){return me(),null})),p=(dt.flags&15990)!==0,(dt.subtreeFlags&15990)!==0||p?(p=I.T,I.T=null,P=nt.p,nt.p=2,X=ln,ln|=4,Zh(o,dt),If(dt,o),O_(vA,o.containerInfo),fS=!!_A,vA=_A=null,o.current=dt,Qh(o,dt.alternate,dt),ht(),ln=X,nt.p=P,I.T=p):o.current=dt,_o?(_o=!1,vo=o,Uf=_):te(o,Et),Et=o.pendingLanes,Et===0&&(Ir=null),Yt(dt.stateNode),Mi(o),u!==null)for(A=o.onRecoverableError,dt=0;dt<u.length;dt++)Et=u[dt],A(Et.value,{componentStack:Et.stack});return(Uf&3)!==0&&me(),Et=o.pendingLanes,(_&4194218)!==0&&(Et&42)!==0?o===Su?xo++:(xo=0,Su=o):xo=0,Vn(0),null}function te(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,uc(u)))}function me(){if(vo!==null){var o=vo,u=nl;nl=0;var p=Ls(Uf),_=I.T,A=nt.p;try{if(nt.p=32>p?32:p,I.T=null,vo===null)var P=!1;else{p=Yi,Yi=null;var X=vo,Q=Uf;if(vo=null,Uf=0,(ln&6)!==0)throw Error(i(331));var dt=ln;if(ln|=4,Jh(X.current),gu(X,X.current,Q,p),ln=dt,Vn(0,!1),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(De,X)}catch{}P=!0}return P}finally{nt.p=A,I.T=_,te(o,u)}}return!1}function we(o,u,p){u=oa(p,u),u=Q_(o.stateNode,u,2),o=Fa(o,u,2),o!==null&&($n(o,2),Mi(o))}function de(o,u,p){if(o.tag===3)we(o,o,p);else for(;u!==null;){if(u.tag===3){we(u,o,p);break}else if(u.tag===1){var _=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Ir===null||!Ir.has(_))){o=oa(p,o),p=J_(2),_=Fa(u,p,2),_!==null&&(Yb(p,_,u,o),$n(_,2),Mi(_));break}}u=u.return}}function un(o,u,p){var _=o.pingCache;if(_===null){_=o.pingCache=new xu;var A=new Set;_.set(u,A)}else A=_.get(u),A===void 0&&(A=new Set,_.set(u,A));A.has(p)||(Cc=!0,A.add(p),o=So.bind(null,o,u,p),u.then(o,o))}function So(o,u,p){var _=o.pingCache;_!==null&&_.delete(u),o.pingedLanes|=o.suspendedLanes&p,o.warmLanes&=~p,gi===o&&(We&p)===p&&(Li===4||Li===3&&(We&62914560)===We&&300>xt()-Mn?(ln&2)===0&&Eu(o,0):ed|=p,Nl===We&&(Nl=0)),Mi(o)}function rd(o,u){u===0&&(u=yn()),o=eu(o,u),o!==null&&($n(o,u),Mi(o))}function Vf(o){var u=o.memoizedState,p=0;u!==null&&(p=u.retryLane),rd(o,p)}function Ft(o,u){var p=0;switch(o.tag){case 13:var _=o.stateNode,A=o.memoizedState;A!==null&&(p=A.retryLane);break;case 19:_=o.stateNode;break;case 22:_=o.stateNode._retryCache;break;default:throw Error(i(314))}_!==null&&_.delete(u),rd(o,p)}function Ct(o,u){return gt(o,u)}var qt=null,he=null,Be=!1,_i=!1,Ze=!1,Dn=0;function Mi(o){o!==he&&o.next===null&&(he===null?qt=he=o:he=he.next=o),_i=!0,Be||(Be=!0,D6(Oc))}function Vn(o,u){if(!Ze&&_i){Ze=!0;do for(var p=!1,_=qt;_!==null;){if(o!==0){var A=_.pendingLanes;if(A===0)var P=0;else{var X=_.suspendedLanes,Q=_.pingedLanes;P=(1<<31-Te(42|o)+1)-1,P&=A&~(X&~Q),P=P&201326677?P&201326677|1:P?P|2:0}P!==0&&(p=!0,cN(_,P))}else P=We,P=ve(_,_===gi?P:0),(P&3)===0||je(_,P)||(p=!0,cN(_,P));_=_.next}while(p);Ze=!1}}function Oc(){_i=Be=!1;var o=0;Dn!==0&&(V6()&&(o=Dn),Dn=0);for(var u=xt(),p=null,_=qt;_!==null;){var A=_.next,P=eS(_,u);P===0?(_.next=null,p===null?qt=A:p.next=A,A===null&&(he=p)):(p=_,(o!==0||(P&3)!==0)&&(_i=!0)),_=A}Vn(o)}function eS(o,u){for(var p=o.suspendedLanes,_=o.pingedLanes,A=o.expirationTimes,P=o.pendingLanes&-62914561;0<P;){var X=31-Te(P),Q=1<<X,dt=A[X];dt===-1?((Q&p)===0||(Q&_)!==0)&&(A[X]=Yn(Q,u)):dt<=u&&(o.expiredLanes|=Q),P&=~Q}if(u=gi,p=We,p=ve(o,o===u?p:0),_=o.callbackNode,p===0||o===u&&Ti===2||o.cancelPendingCommit!==null)return _!==null&&_!==null&&W(_),o.callbackNode=null,o.callbackPriority=0;if((p&3)===0||je(o,p)){if(u=p&-p,u===o.callbackPriority)return u;switch(_!==null&&W(_),Ls(p)){case 2:case 8:p=le;break;case 32:p=fe;break;case 268435456:p=He;break;default:p=fe}return _=uN.bind(null,o),p=gt(p,_),o.callbackPriority=u,o.callbackNode=p,u}return _!==null&&_!==null&&W(_),o.callbackPriority=2,o.callbackNode=null,2}function uN(o,u){var p=o.callbackNode;if(me()&&o.callbackNode!==p)return null;var _=We;return _=ve(o,o===gi?_:0),_===0?null:(nd(o,_,u),eS(o,xt()),o.callbackNode!=null&&o.callbackNode===p?uN.bind(null,o):null)}function cN(o,u){if(me())return null;nd(o,u,!0)}function D6(o){k6(function(){(ln&6)!==0?gt(Lt,o):o()})}function fA(){return Dn===0&&(Dn=Ci()),Dn}function fN(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:ko(""+o)}function hN(o,u){var p=u.ownerDocument.createElement("input");return p.name=u.name,p.value=u.value,o.id&&p.setAttribute("form",o.id),u.parentNode.insertBefore(p,u),o=new FormData(o),p.parentNode.removeChild(p),o}function N6(o,u,p,_,A){if(u==="submit"&&p&&p.stateNode===A){var P=fN((A[an]||null).action),X=_.submitter;X&&(u=(u=X[an]||null)?fN(u.formAction):X.getAttribute("formAction"),u!==null&&(P=u,X=null));var Q=new Ku("action","action",null,_,A);o.push({event:Q,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(Dn!==0){var dt=X?hN(A,X):new FormData(A);W_(p,{pending:!0,data:dt,method:A.method,action:P},null,dt)}}else typeof P=="function"&&(Q.preventDefault(),dt=X?hN(A,X):new FormData(A),W_(p,{pending:!0,data:dt,method:A.method,action:P},P,dt))},currentTarget:A}]})}}for(var hA=0;hA<Jl.length;hA++){var dA=Jl[hA],I6=dA.toLowerCase(),P6=dA[0].toUpperCase()+dA.slice(1);uo(I6,"on"+P6)}uo(I_,"onAnimationEnd"),uo(aa,"onAnimationIteration"),uo(P_,"onAnimationStart"),uo("dblclick","onDoubleClick"),uo("focusin","onFocus"),uo("focusout","onBlur"),uo(Ql,"onTransitionRun"),uo(Uh,"onTransitionStart"),uo(ec,"onTransitionCancel"),uo(rg,"onTransitionEnd"),be("onMouseEnter",["mouseout","mouseover"]),be("onMouseLeave",["mouseout","mouseover"]),be("onPointerEnter",["pointerout","pointerover"]),be("onPointerLeave",["pointerout","pointerover"]),ge("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ge("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ge("onBeforeInput",["compositionend","keypress","textInput","paste"]),ge("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ge("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ge("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mv));function dN(o,u){u=(u&4)!==0;for(var p=0;p<o.length;p++){var _=o[p],A=_.event;_=_.listeners;t:{var P=void 0;if(u)for(var X=_.length-1;0<=X;X--){var Q=_[X],dt=Q.instance,Et=Q.currentTarget;if(Q=Q.listener,dt!==P&&A.isPropagationStopped())break t;P=Q,A.currentTarget=Et;try{P(A)}catch(ee){vg(ee)}A.currentTarget=null,P=dt}else for(X=0;X<_.length;X++){if(Q=_[X],dt=Q.instance,Et=Q.currentTarget,Q=Q.listener,dt!==P&&A.isPropagationStopped())break t;P=Q,A.currentTarget=Et;try{P(A)}catch(ee){vg(ee)}A.currentTarget=null,P=dt}}}}function jn(o,u){var p=u[to];p===void 0&&(p=u[to]=new Set);var _=o+"__bubble";p.has(_)||(pN(u,o,2,!1),p.add(_))}function pA(o,u,p){var _=0;u&&(_|=4),pN(p,o,_,u)}var nS="_reactListening"+Math.random().toString(36).slice(2);function mA(o){if(!o[nS]){o[nS]=!0,At.forEach(function(p){p!=="selectionchange"&&(L6.has(p)||pA(p,!1,o),pA(p,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[nS]||(u[nS]=!0,pA("selectionchange",!1,u))}}function pN(o,u,p,_){switch(zN(u)){case 2:var A=oH;break;case 8:A=lH;break;default:A=CA}p=A.bind(null,u,p,o),A=void 0,!na||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(A=!0),_?A!==void 0?o.addEventListener(u,p,{capture:!0,passive:A}):o.addEventListener(u,p,!0):A!==void 0?o.addEventListener(u,p,{passive:A}):o.addEventListener(u,p,!1)}function gA(o,u,p,_,A){var P=_;if((u&1)===0&&(u&2)===0&&_!==null)t:for(;;){if(_===null)return;var X=_.tag;if(X===3||X===4){var Q=_.stateNode.containerInfo;if(Q===A||Q.nodeType===8&&Q.parentNode===A)break;if(X===4)for(X=_.return;X!==null;){var dt=X.tag;if((dt===3||dt===4)&&(dt=X.stateNode.containerInfo,dt===A||dt.nodeType===8&&dt.parentNode===A))return;X=X.return}for(;Q!==null;){if(X=Us(Q),X===null)return;if(dt=X.tag,dt===5||dt===6||dt===26||dt===27){_=P=X;continue t}Q=Q.parentNode}}_=_.return}np(function(){var Et=P,ee=ju(p),ue=[];t:{var Gt=sg.get(o);if(Gt!==void 0){var Qt=Ku,Ve=o;switch(o){case"keypress":if(ia(p)===0)break t;case"keydown":case"keyup":Qt=Ju;break;case"focusin":Ve="focus",Qt=ff;break;case"focusout":Ve="blur",Qt=ff;break;case"beforeblur":case"afterblur":Qt=ff;break;case"click":if(p.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qt=Pa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qt=A_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qt=Rh;break;case I_:case aa:case P_:Qt=hf;break;case rg:Qt=ro;break;case"scroll":case"scrollend":Qt=ip;break;case"wheel":Qt=Dh;break;case"copy":case"cut":case"paste":Qt=df;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qt=yf;break;case"toggle":case"beforetoggle":Qt=jo}var pn=(u&4)!==0,Lr=!pn&&(o==="scroll"||o==="scrollend"),Rt=pn?Gt!==null?Gt+"Capture":null:Gt;pn=[];for(var St=Et,Bt;St!==null;){var ie=St;if(Bt=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||Bt===null||Rt===null||(ie=Xu(St,Rt),ie!=null&&pn.push(gv(St,ie,Bt))),Lr)break;St=St.return}0<pn.length&&(Gt=new Qt(Gt,Ve,null,p,ee),ue.push({event:Gt,listeners:pn}))}}if((u&7)===0){t:{if(Gt=o==="mouseover"||o==="pointerover",Qt=o==="mouseout"||o==="pointerout",Gt&&p!==Ia&&(Ve=p.relatedTarget||p.fromElement)&&(Us(Ve)||Ve[ea]))break t;if((Qt||Gt)&&(Gt=ee.window===ee?ee:(Gt=ee.ownerDocument)?Gt.defaultView||Gt.parentWindow:window,Qt?(Ve=p.relatedTarget||p.toElement,Qt=Et,Ve=Ve?Us(Ve):null,Ve!==null&&(Lr=at(Ve),pn=Ve.tag,Ve!==Lr||pn!==5&&pn!==27&&pn!==6)&&(Ve=null)):(Qt=null,Ve=Et),Qt!==Ve)){if(pn=Pa,ie="onMouseLeave",Rt="onMouseEnter",St="mouse",(o==="pointerout"||o==="pointerover")&&(pn=yf,ie="onPointerLeave",Rt="onPointerEnter",St="pointer"),Lr=Qt==null?Gt:vt(Qt),Bt=Ve==null?Gt:vt(Ve),Gt=new pn(ie,St+"leave",Qt,p,ee),Gt.target=Lr,Gt.relatedTarget=Bt,ie=null,Us(ee)===Et&&(pn=new pn(Rt,St+"enter",Ve,p,ee),pn.target=Bt,pn.relatedTarget=Lr,ie=pn),Lr=ie,Qt&&Ve)e:{for(pn=Qt,Rt=Ve,St=0,Bt=pn;Bt;Bt=Ig(Bt))St++;for(Bt=0,ie=Rt;ie;ie=Ig(ie))Bt++;for(;0<St-Bt;)pn=Ig(pn),St--;for(;0<Bt-St;)Rt=Ig(Rt),Bt--;for(;St--;){if(pn===Rt||Rt!==null&&pn===Rt.alternate)break e;pn=Ig(pn),Rt=Ig(Rt)}pn=null}else pn=null;Qt!==null&&mN(ue,Gt,Qt,pn,!1),Ve!==null&&Lr!==null&&mN(ue,Lr,Ve,pn,!0)}}t:{if(Gt=Et?vt(Et):window,Qt=Gt.nodeName&&Gt.nodeName.toLowerCase(),Qt==="select"||Qt==="input"&&Gt.type==="file")var Pe=Qm;else if(wr(Gt))if(Jm)Pe=tc;else{Pe=ab;var Fn=tA}else Qt=Gt.nodeName,!Qt||Qt.toLowerCase()!=="input"||Gt.type!=="checkbox"&&Gt.type!=="radio"?Et&&cf(Et.elementType)&&(Pe=Qm):Pe=fp;if(Pe&&(Pe=Pe(o,Et))){fr(ue,Pe,p,ee);break t}Fn&&Fn(o,Gt,Et),o==="focusout"&&Et&&Gt.type==="number"&&Et.memoizedProps.value!=null&&Ar(Gt,"number",Gt.value)}switch(Fn=Et?vt(Et):window,o){case"focusin":(wr(Fn)||Fn.contentEditable==="true")&&(_f=Fn,D_=Et,Lh=null);break;case"focusout":Lh=D_=_f=null;break;case"mousedown":ng=!0;break;case"contextmenu":case"mouseup":case"dragend":ng=!1,lo(ue,p,ee);break;case"selectionchange":if(eg)break;case"keydown":case"keyup":lo(ue,p,ee)}var Ge;if(ao)t:{switch(o){case"compositionstart":var tn="onCompositionStart";break t;case"compositionend":tn="onCompositionEnd";break t;case"compositionupdate":tn="onCompositionUpdate";break t}tn=void 0}else zn?jt(o,p)&&(tn="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(tn="onCompositionStart");tn&&(j&&p.locale!=="ko"&&(zn||tn!=="onCompositionStart"?tn==="onCompositionEnd"&&zn&&(Ge=Ah()):(Go=ee,Yu="value"in Go?Go.value:Go.textContent,zn=!0)),Fn=iS(Et,tn),0<Fn.length&&(tn=new mf(tn,o,null,p,ee),ue.push({event:tn,listeners:Fn}),Ge?tn.data=Ge:(Ge=ye(p),Ge!==null&&(tn.data=Ge)))),(Ge=F?Ji(o,p):Bn(o,p))&&(tn=iS(Et,"onBeforeInput"),0<tn.length&&(Fn=new mf("onBeforeInput","beforeinput",null,p,ee),ue.push({event:Fn,listeners:tn}),Fn.data=Ge)),N6(ue,o,Et,p,ee)}dN(ue,u)})}function gv(o,u,p){return{instance:o,listener:u,currentTarget:p}}function iS(o,u){for(var p=u+"Capture",_=[];o!==null;){var A=o,P=A.stateNode;A=A.tag,A!==5&&A!==26&&A!==27||P===null||(A=Xu(o,p),A!=null&&_.unshift(gv(o,A,P)),A=Xu(o,u),A!=null&&_.push(gv(o,A,P))),o=o.return}return _}function Ig(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function mN(o,u,p,_,A){for(var P=u._reactName,X=[];p!==null&&p!==_;){var Q=p,dt=Q.alternate,Et=Q.stateNode;if(Q=Q.tag,dt!==null&&dt===_)break;Q!==5&&Q!==26&&Q!==27||Et===null||(dt=Et,A?(Et=Xu(p,P),Et!=null&&X.unshift(gv(p,Et,dt))):A||(Et=Xu(p,P),Et!=null&&X.push(gv(p,Et,dt)))),p=p.return}X.length!==0&&o.push({event:u,listeners:X})}var U6=/\r\n?/g,z6=/\u0000|\uFFFD/g;function gN(o){return(typeof o=="string"?o:""+o).replace(U6,`
`).replace(z6,"")}function yN(o,u){return u=gN(u),gN(o)===u}function rS(){}function Di(o,u,p,_,A,P){switch(p){case"children":typeof _=="string"?u==="body"||u==="textarea"&&_===""||ur(o,_):(typeof _=="number"||typeof _=="bigint")&&u!=="body"&&ur(o,""+_);break;case"className":si(o,"class",_);break;case"tabIndex":si(o,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":si(o,p,_);break;case"style":ep(o,_,P);break;case"data":if(u!=="object"){si(o,"data",_);break}case"src":case"href":if(_===""&&(u!=="a"||p!=="href")){o.removeAttribute(p);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){o.removeAttribute(p);break}_=ko(""+_),o.setAttribute(p,_);break;case"action":case"formAction":if(typeof _=="function"){o.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof P=="function"&&(p==="formAction"?(u!=="input"&&Di(o,u,"name",A.name,A,null),Di(o,u,"formEncType",A.formEncType,A,null),Di(o,u,"formMethod",A.formMethod,A,null),Di(o,u,"formTarget",A.formTarget,A,null)):(Di(o,u,"encType",A.encType,A,null),Di(o,u,"method",A.method,A,null),Di(o,u,"target",A.target,A,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){o.removeAttribute(p);break}_=ko(""+_),o.setAttribute(p,_);break;case"onClick":_!=null&&(o.onclick=rS);break;case"onScroll":_!=null&&jn("scroll",o);break;case"onScrollEnd":_!=null&&jn("scrollend",o);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(i(61));if(p=_.__html,p!=null){if(A.children!=null)throw Error(i(60));o.innerHTML=p}}break;case"multiple":o.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":o.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){o.removeAttribute("xlink:href");break}p=ko(""+_),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?o.setAttribute(p,""+_):o.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?o.setAttribute(p,""):o.removeAttribute(p);break;case"capture":case"download":_===!0?o.setAttribute(p,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?o.setAttribute(p,_):o.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?o.setAttribute(p,_):o.removeAttribute(p);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?o.removeAttribute(p):o.setAttribute(p,_);break;case"popover":jn("beforetoggle",o),jn("toggle",o),vn(o,"popover",_);break;case"xlinkActuate":Nn(o,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":Nn(o,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":Nn(o,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":Nn(o,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":Nn(o,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":Nn(o,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":Nn(o,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":Nn(o,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":Nn(o,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":vn(o,"is",_);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Km.get(p)||p,vn(o,p,_))}}function yA(o,u,p,_,A,P){switch(p){case"style":ep(o,_,P);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(i(61));if(p=_.__html,p!=null){if(A.children!=null)throw Error(i(60));o.innerHTML=p}}break;case"children":typeof _=="string"?ur(o,_):(typeof _=="number"||typeof _=="bigint")&&ur(o,""+_);break;case"onScroll":_!=null&&jn("scroll",o);break;case"onScrollEnd":_!=null&&jn("scrollend",o);break;case"onClick":_!=null&&(o.onclick=rS);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ae.hasOwnProperty(p))t:{if(p[0]==="o"&&p[1]==="n"&&(A=p.endsWith("Capture"),u=p.slice(2,A?p.length-7:void 0),P=o[an]||null,P=P!=null?P[p]:null,typeof P=="function"&&o.removeEventListener(u,P,A),typeof _=="function")){typeof P!="function"&&P!==null&&(p in o?o[p]=null:o.hasAttribute(p)&&o.removeAttribute(p)),o.addEventListener(u,_,A);break t}p in o?o[p]=_:_===!0?o.setAttribute(p,""):vn(o,p,_)}}}function js(o,u,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jn("error",o),jn("load",o);var _=!1,A=!1,P;for(P in p)if(p.hasOwnProperty(P)){var X=p[P];if(X!=null)switch(P){case"src":_=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:Di(o,u,P,X,p,null)}}A&&Di(o,u,"srcSet",p.srcSet,p,null),_&&Di(o,u,"src",p.src,p,null);return;case"input":jn("invalid",o);var Q=P=X=A=null,dt=null,Et=null;for(_ in p)if(p.hasOwnProperty(_)){var ee=p[_];if(ee!=null)switch(_){case"name":A=ee;break;case"type":X=ee;break;case"checked":dt=ee;break;case"defaultChecked":Et=ee;break;case"value":P=ee;break;case"defaultValue":Q=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,u));break;default:Di(o,u,_,ee,p,null)}}lr(o,P,Q,dt,Et,X,A,!1),En(o);return;case"select":jn("invalid",o),_=X=P=null;for(A in p)if(p.hasOwnProperty(A)&&(Q=p[A],Q!=null))switch(A){case"value":P=Q;break;case"defaultValue":X=Q;break;case"multiple":_=Q;default:Di(o,u,A,Q,p,null)}u=P,p=X,o.multiple=!!_,u!=null?Qe(o,!!_,u,!1):p!=null&&Qe(o,!!_,p,!0);return;case"textarea":jn("invalid",o),P=A=_=null;for(X in p)if(p.hasOwnProperty(X)&&(Q=p[X],Q!=null))switch(X){case"value":_=Q;break;case"defaultValue":A=Q;break;case"children":P=Q;break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(91));break;default:Di(o,u,X,Q,p,null)}cs(o,_,A,P),En(o);return;case"option":for(dt in p)if(p.hasOwnProperty(dt)&&(_=p[dt],_!=null))switch(dt){case"selected":o.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:Di(o,u,dt,_,p,null)}return;case"dialog":jn("cancel",o),jn("close",o);break;case"iframe":case"object":jn("load",o);break;case"video":case"audio":for(_=0;_<mv.length;_++)jn(mv[_],o);break;case"image":jn("error",o),jn("load",o);break;case"details":jn("toggle",o);break;case"embed":case"source":case"link":jn("error",o),jn("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Et in p)if(p.hasOwnProperty(Et)&&(_=p[Et],_!=null))switch(Et){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:Di(o,u,Et,_,p,null)}return;default:if(cf(u)){for(ee in p)p.hasOwnProperty(ee)&&(_=p[ee],_!==void 0&&yA(o,u,ee,_,p,void 0));return}}for(Q in p)p.hasOwnProperty(Q)&&(_=p[Q],_!=null&&Di(o,u,Q,_,p,null))}function B6(o,u,p,_){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,P=null,X=null,Q=null,dt=null,Et=null,ee=null;for(Qt in p){var ue=p[Qt];if(p.hasOwnProperty(Qt)&&ue!=null)switch(Qt){case"checked":break;case"value":break;case"defaultValue":dt=ue;default:_.hasOwnProperty(Qt)||Di(o,u,Qt,null,_,ue)}}for(var Gt in _){var Qt=_[Gt];if(ue=p[Gt],_.hasOwnProperty(Gt)&&(Qt!=null||ue!=null))switch(Gt){case"type":P=Qt;break;case"name":A=Qt;break;case"checked":Et=Qt;break;case"defaultChecked":ee=Qt;break;case"value":X=Qt;break;case"defaultValue":Q=Qt;break;case"children":case"dangerouslySetInnerHTML":if(Qt!=null)throw Error(i(137,u));break;default:Qt!==ue&&Di(o,u,Gt,Qt,_,ue)}}kn(o,X,Q,dt,Et,ee,P,A);return;case"select":Qt=X=Q=Gt=null;for(P in p)if(dt=p[P],p.hasOwnProperty(P)&&dt!=null)switch(P){case"value":break;case"multiple":Qt=dt;default:_.hasOwnProperty(P)||Di(o,u,P,null,_,dt)}for(A in _)if(P=_[A],dt=p[A],_.hasOwnProperty(A)&&(P!=null||dt!=null))switch(A){case"value":Gt=P;break;case"defaultValue":Q=P;break;case"multiple":X=P;default:P!==dt&&Di(o,u,A,P,_,dt)}u=Q,p=X,_=Qt,Gt!=null?Qe(o,!!p,Gt,!1):!!_!=!!p&&(u!=null?Qe(o,!!p,u,!0):Qe(o,!!p,p?[]:"",!1));return;case"textarea":Qt=Gt=null;for(Q in p)if(A=p[Q],p.hasOwnProperty(Q)&&A!=null&&!_.hasOwnProperty(Q))switch(Q){case"value":break;case"children":break;default:Di(o,u,Q,null,_,A)}for(X in _)if(A=_[X],P=p[X],_.hasOwnProperty(X)&&(A!=null||P!=null))switch(X){case"value":Gt=A;break;case"defaultValue":Qt=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:A!==P&&Di(o,u,X,A,_,P)}Zi(o,Gt,Qt);return;case"option":for(var Ve in p)if(Gt=p[Ve],p.hasOwnProperty(Ve)&&Gt!=null&&!_.hasOwnProperty(Ve))switch(Ve){case"selected":o.selected=!1;break;default:Di(o,u,Ve,null,_,Gt)}for(dt in _)if(Gt=_[dt],Qt=p[dt],_.hasOwnProperty(dt)&&Gt!==Qt&&(Gt!=null||Qt!=null))switch(dt){case"selected":o.selected=Gt&&typeof Gt!="function"&&typeof Gt!="symbol";break;default:Di(o,u,dt,Gt,_,Qt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pn in p)Gt=p[pn],p.hasOwnProperty(pn)&&Gt!=null&&!_.hasOwnProperty(pn)&&Di(o,u,pn,null,_,Gt);for(Et in _)if(Gt=_[Et],Qt=p[Et],_.hasOwnProperty(Et)&&Gt!==Qt&&(Gt!=null||Qt!=null))switch(Et){case"children":case"dangerouslySetInnerHTML":if(Gt!=null)throw Error(i(137,u));break;default:Di(o,u,Et,Gt,_,Qt)}return;default:if(cf(u)){for(var Lr in p)Gt=p[Lr],p.hasOwnProperty(Lr)&&Gt!==void 0&&!_.hasOwnProperty(Lr)&&yA(o,u,Lr,void 0,_,Gt);for(ee in _)Gt=_[ee],Qt=p[ee],!_.hasOwnProperty(ee)||Gt===Qt||Gt===void 0&&Qt===void 0||yA(o,u,ee,Gt,_,Qt);return}}for(var Rt in p)Gt=p[Rt],p.hasOwnProperty(Rt)&&Gt!=null&&!_.hasOwnProperty(Rt)&&Di(o,u,Rt,null,_,Gt);for(ue in _)Gt=_[ue],Qt=p[ue],!_.hasOwnProperty(ue)||Gt===Qt||Gt==null&&Qt==null||Di(o,u,ue,Gt,_,Qt)}var _A=null,vA=null;function sS(o){return o.nodeType===9?o:o.ownerDocument}function _N(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vN(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function xA(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var bA=null;function V6(){var o=window.event;return o&&o.type==="popstate"?o===bA?!1:(bA=o,!0):(bA=null,!1)}var xN=typeof setTimeout=="function"?setTimeout:void 0,F6=typeof clearTimeout=="function"?clearTimeout:void 0,bN=typeof Promise=="function"?Promise:void 0,k6=typeof queueMicrotask=="function"?queueMicrotask:typeof bN<"u"?function(o){return bN.resolve(null).then(o).catch(H6)}:xN;function H6(o){setTimeout(function(){throw o})}function SA(o,u){var p=u,_=0;do{var A=p.nextSibling;if(o.removeChild(p),A&&A.nodeType===8)if(p=A.data,p==="/$"){if(_===0){o.removeChild(A),Tv(u);return}_--}else p!=="$"&&p!=="$?"&&p!=="$!"||_++;p=A}while(p);Tv(u)}function EA(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var p=u;switch(u=u.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":EA(p),Fo(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}o.removeChild(p)}}function G6(o,u,p,_){for(;o.nodeType===1;){var A=p;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!_&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(_){if(!o[eo])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(P=o.getAttribute("rel"),P==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(P!==A.rel||o.getAttribute("href")!==(A.href==null?null:A.href)||o.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||o.getAttribute("title")!==(A.title==null?null:A.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(P=o.getAttribute("src"),(P!==(A.src==null?null:A.src)||o.getAttribute("type")!==(A.type==null?null:A.type)||o.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&P&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var P=A.name==null?null:""+A.name;if(A.type==="hidden"&&o.getAttribute("name")===P)return o}else return o;if(o=Tu(o.nextSibling),o===null)break}return null}function q6(o,u,p){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!p||(o=Tu(o.nextSibling),o===null))return null;return o}function Tu(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return o}function SN(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(u===0)return o;u--}else p==="/$"&&u++}o=o.previousSibling}return null}function EN(o,u,p){switch(u=sS(p),o){case"html":if(o=u.documentElement,!o)throw Error(i(452));return o;case"head":if(o=u.head,!o)throw Error(i(453));return o;case"body":if(o=u.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}var Pl=new Map,TN=new Set;function aS(o){return typeof o.getRootNode=="function"?o.getRootNode():o.ownerDocument}var Ff=nt.d;nt.d={f:j6,r:X6,D:W6,C:Y6,L:$6,m:K6,X:Q6,S:Z6,M:J6};function j6(){var o=Ff.f(),u=zf();return o||u}function X6(o){var u=K(o);u!==null&&u.tag===5&&u.type==="form"?Ub(u):Ff.r(o)}var Pg=typeof document>"u"?null:document;function MN(o,u,p){var _=Pg;if(_&&typeof u=="string"&&u){var A=ui(u);A='link[rel="'+o+'"][href="'+A+'"]',typeof p=="string"&&(A+='[crossorigin="'+p+'"]'),TN.has(A)||(TN.add(A),o={rel:o,crossOrigin:p,href:u},_.querySelector(A)===null&&(u=_.createElement("link"),js(u,"link",o),It(u),_.head.appendChild(u)))}}function W6(o){Ff.D(o),MN("dns-prefetch",o,null)}function Y6(o,u){Ff.C(o,u),MN("preconnect",o,u)}function $6(o,u,p){Ff.L(o,u,p);var _=Pg;if(_&&o&&u){var A='link[rel="preload"][as="'+ui(u)+'"]';u==="image"&&p&&p.imageSrcSet?(A+='[imagesrcset="'+ui(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(A+='[imagesizes="'+ui(p.imageSizes)+'"]')):A+='[href="'+ui(o)+'"]';var P=A;switch(u){case"style":P=Lg(o);break;case"script":P=Ug(o)}Pl.has(P)||(o=w({rel:"preload",href:u==="image"&&p&&p.imageSrcSet?void 0:o,as:u},p),Pl.set(P,o),_.querySelector(A)!==null||u==="style"&&_.querySelector(yv(P))||u==="script"&&_.querySelector(_v(P))||(u=_.createElement("link"),js(u,"link",o),It(u),_.head.appendChild(u)))}}function K6(o,u){Ff.m(o,u);var p=Pg;if(p&&o){var _=u&&typeof u.as=="string"?u.as:"script",A='link[rel="modulepreload"][as="'+ui(_)+'"][href="'+ui(o)+'"]',P=A;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":P=Ug(o)}if(!Pl.has(P)&&(o=w({rel:"modulepreload",href:o},u),Pl.set(P,o),p.querySelector(A)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(_v(P)))return}_=p.createElement("link"),js(_,"link",o),It(_),p.head.appendChild(_)}}}function Z6(o,u,p){Ff.S(o,u,p);var _=Pg;if(_&&o){var A=Ut(_).hoistableStyles,P=Lg(o);u=u||"default";var X=A.get(P);if(!X){var Q={loading:0,preload:null};if(X=_.querySelector(yv(P)))Q.loading=5;else{o=w({rel:"stylesheet",href:o,"data-precedence":u},p),(p=Pl.get(P))&&TA(o,p);var dt=X=_.createElement("link");It(dt),js(dt,"link",o),dt._p=new Promise(function(Et,ee){dt.onload=Et,dt.onerror=ee}),dt.addEventListener("load",function(){Q.loading|=1}),dt.addEventListener("error",function(){Q.loading|=2}),Q.loading|=4,oS(X,u,_)}X={type:"stylesheet",instance:X,count:1,state:Q},A.set(P,X)}}}function Q6(o,u){Ff.X(o,u);var p=Pg;if(p&&o){var _=Ut(p).hoistableScripts,A=Ug(o),P=_.get(A);P||(P=p.querySelector(_v(A)),P||(o=w({src:o,async:!0},u),(u=Pl.get(A))&&MA(o,u),P=p.createElement("script"),It(P),js(P,"link",o),p.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},_.set(A,P))}}function J6(o,u){Ff.M(o,u);var p=Pg;if(p&&o){var _=Ut(p).hoistableScripts,A=Ug(o),P=_.get(A);P||(P=p.querySelector(_v(A)),P||(o=w({src:o,async:!0,type:"module"},u),(u=Pl.get(A))&&MA(o,u),P=p.createElement("script"),It(P),js(P,"link",o),p.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},_.set(A,P))}}function AN(o,u,p,_){var A=(A=kt.current)?aS(A):null;if(!A)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(u=Lg(p.href),p=Ut(A).hoistableStyles,_=p.get(u),_||(_={type:"style",instance:null,count:0,state:null},p.set(u,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){o=Lg(p.href);var P=Ut(A).hoistableStyles,X=P.get(o);if(X||(A=A.ownerDocument||A,X={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},P.set(o,X),(P=A.querySelector(yv(o)))&&!P._p&&(X.instance=P,X.state.loading=5),Pl.has(o)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Pl.set(o,p),P||tH(A,o,p,X.state))),u&&_===null)throw Error(i(528,""));return X}if(u&&_!==null)throw Error(i(529,""));return null;case"script":return u=p.async,p=p.src,typeof p=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Ug(p),p=Ut(A).hoistableScripts,_=p.get(u),_||(_={type:"script",instance:null,count:0,state:null},p.set(u,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function Lg(o){return'href="'+ui(o)+'"'}function yv(o){return'link[rel="stylesheet"]['+o+"]"}function wN(o){return w({},o,{"data-precedence":o.precedence,precedence:null})}function tH(o,u,p,_){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?_.loading=1:(u=o.createElement("link"),_.preload=u,u.addEventListener("load",function(){return _.loading|=1}),u.addEventListener("error",function(){return _.loading|=2}),js(u,"link",p),It(u),o.head.appendChild(u))}function Ug(o){return'[src="'+ui(o)+'"]'}function _v(o){return"script[async]"+o}function CN(o,u,p){if(u.count++,u.instance===null)switch(u.type){case"style":var _=o.querySelector('style[data-href~="'+ui(p.href)+'"]');if(_)return u.instance=_,It(_),_;var A=w({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return _=(o.ownerDocument||o).createElement("style"),It(_),js(_,"style",A),oS(_,p.precedence,o),u.instance=_;case"stylesheet":A=Lg(p.href);var P=o.querySelector(yv(A));if(P)return u.state.loading|=4,u.instance=P,It(P),P;_=wN(p),(A=Pl.get(A))&&TA(_,A),P=(o.ownerDocument||o).createElement("link"),It(P);var X=P;return X._p=new Promise(function(Q,dt){X.onload=Q,X.onerror=dt}),js(P,"link",_),u.state.loading|=4,oS(P,p.precedence,o),u.instance=P;case"script":return P=Ug(p.src),(A=o.querySelector(_v(P)))?(u.instance=A,It(A),A):(_=p,(A=Pl.get(P))&&(_=w({},p),MA(_,A)),o=o.ownerDocument||o,A=o.createElement("script"),It(A),js(A,"link",_),o.head.appendChild(A),u.instance=A);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(_=u.instance,u.state.loading|=4,oS(_,p.precedence,o));return u.instance}function oS(o,u,p){for(var _=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=_.length?_[_.length-1]:null,P=A,X=0;X<_.length;X++){var Q=_[X];if(Q.dataset.precedence===u)P=Q;else if(P!==A)break}P?P.parentNode.insertBefore(o,P.nextSibling):(u=p.nodeType===9?p.head:p,u.insertBefore(o,u.firstChild))}function TA(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function MA(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var lS=null;function RN(o,u,p){if(lS===null){var _=new Map,A=lS=new Map;A.set(p,_)}else A=lS,_=A.get(p),_||(_=new Map,A.set(p,_));if(_.has(o))return _;for(_.set(o,null),p=p.getElementsByTagName(o),A=0;A<p.length;A++){var P=p[A];if(!(P[eo]||P[Gi]||o==="link"&&P.getAttribute("rel")==="stylesheet")&&P.namespaceURI!=="http://www.w3.org/2000/svg"){var X=P.getAttribute(u)||"";X=o+X;var Q=_.get(X);Q?Q.push(P):_.set(X,[P])}}return _}function ON(o,u,p){o=o.ownerDocument||o,o.head.insertBefore(p,u==="title"?o.querySelector("head > title"):null)}function eH(o,u,p){if(p===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function DN(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var vv=null;function nH(){}function iH(o,u,p){if(vv===null)throw Error(i(475));var _=vv;if(u.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var A=Lg(p.href),P=o.querySelector(yv(A));if(P){o=P._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(_.count++,_=uS.bind(_),o.then(_,_)),u.state.loading|=4,u.instance=P,It(P);return}P=o.ownerDocument||o,p=wN(p),(A=Pl.get(A))&&TA(p,A),P=P.createElement("link"),It(P);var X=P;X._p=new Promise(function(Q,dt){X.onload=Q,X.onerror=dt}),js(P,"link",p),u.instance=P}_.stylesheets===null&&(_.stylesheets=new Map),_.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(_.count++,u=uS.bind(_),o.addEventListener("load",u),o.addEventListener("error",u))}}function rH(){if(vv===null)throw Error(i(475));var o=vv;return o.stylesheets&&o.count===0&&AA(o,o.stylesheets),0<o.count?function(u){var p=setTimeout(function(){if(o.stylesheets&&AA(o,o.stylesheets),o.unsuspend){var _=o.unsuspend;o.unsuspend=null,_()}},6e4);return o.unsuspend=u,function(){o.unsuspend=null,clearTimeout(p)}}:null}function uS(){if(this.count--,this.count===0){if(this.stylesheets)AA(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var cS=null;function AA(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,cS=new Map,u.forEach(sH,o),cS=null,uS.call(o))}function sH(o,u){if(!(u.state.loading&4)){var p=cS.get(o);if(p)var _=p.get(null);else{p=new Map,cS.set(o,p);for(var A=o.querySelectorAll("link[data-precedence],style[data-precedence]"),P=0;P<A.length;P++){var X=A[P];(X.nodeName==="LINK"||X.getAttribute("media")!=="not all")&&(p.set(X.dataset.precedence,X),_=X)}_&&p.set(null,_)}A=u.instance,X=A.getAttribute("data-precedence"),P=p.get(X)||_,P===_&&p.set(null,A),p.set(X,A),this.count++,_=uS.bind(this),A.addEventListener("load",_),A.addEventListener("error",_),P?P.parentNode.insertBefore(A,P.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(A,o.firstChild)),u.state.loading|=4}}var xv={$$typeof:v,Provider:null,Consumer:null,_currentValue:lt,_currentValue2:lt,_threadCount:0};function aH(o,u,p,_,A,P,X,Q){this.tag=1,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kr(0),this.hiddenUpdates=kr(null),this.identifierPrefix=_,this.onUncaughtError=A,this.onCaughtError=P,this.onRecoverableError=X,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function NN(o,u,p,_,A,P,X,Q,dt,Et,ee,ue){return o=new aH(o,u,p,X,Q,dt,Et,ue),u=1,P===!0&&(u|=24),P=_r(3,null,null,u),o.current=P,P.stateNode=o,u=B_(),u.refCount++,o.pooledCache=u,u.refCount++,P.memoizedState={element:_,isDehydrated:p,cache:u},Fs(P),o}function IN(o){return o?(o=nc,o):nc}function PN(o,u,p,_,A,P){A=IN(A),_.context===null?_.context=A:_.pendingContext=A,_=Va(u),_.payload={element:p},P=P===void 0?null:P,P!==null&&(_.callback=P),p=Fa(o,_,u),p!==null&&(Pr(p,o,u),xc(p,o,u))}function LN(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<u?p:u}}function wA(o,u){LN(o,u),(o=o.alternate)&&LN(o,u)}function UN(o){if(o.tag===13){var u=eu(o,67108864);u!==null&&Pr(u,o,67108864),wA(o,67108864)}}var fS=!0;function oH(o,u,p,_){var A=I.T;I.T=null;var P=nt.p;try{nt.p=2,CA(o,u,p,_)}finally{nt.p=P,I.T=A}}function lH(o,u,p,_){var A=I.T;I.T=null;var P=nt.p;try{nt.p=8,CA(o,u,p,_)}finally{nt.p=P,I.T=A}}function CA(o,u,p,_){if(fS){var A=RA(_);if(A===null)gA(o,u,_,hS,p),BN(o,_);else if(cH(A,o,u,p,_))_.stopPropagation();else if(BN(o,_),u&4&&-1<uH.indexOf(o)){for(;A!==null;){var P=K(A);if(P!==null)switch(P.tag){case 3:if(P=P.stateNode,P.current.memoizedState.isDehydrated){var X=_e(P.pendingLanes);if(X!==0){var Q=P;for(Q.pendingLanes|=2,Q.entangledLanes|=2;X;){var dt=1<<31-Te(X);Q.entanglements[1]|=dt,X&=~dt}Mi(P),(ln&6)===0&&(Ln=xt()+500,Vn(0))}}break;case 13:Q=eu(P,2),Q!==null&&Pr(Q,P,2),zf(),wA(P,2)}if(P=RA(_),P===null&&gA(o,u,_,hS,p),P===A)break;A=P}A!==null&&_.stopPropagation()}else gA(o,u,_,null,p)}}function RA(o){return o=ju(o),OA(o)}var hS=null;function OA(o){if(hS=null,o=Us(o),o!==null){var u=at(o);if(u===null)o=null;else{var p=u.tag;if(p===13){if(o=ct(u),o!==null)return o;o=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return hS=o,null}function zN(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vt()){case Lt:return 2;case le:return 8;case fe:case Se:return 32;case He:return 268435456;default:return 32}default:return 32}}var DA=!1,sd=null,ad=null,od=null,bv=new Map,Sv=new Map,ld=[],uH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function BN(o,u){switch(o){case"focusin":case"focusout":sd=null;break;case"dragenter":case"dragleave":ad=null;break;case"mouseover":case"mouseout":od=null;break;case"pointerover":case"pointerout":bv.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sv.delete(u.pointerId)}}function Ev(o,u,p,_,A,P){return o===null||o.nativeEvent!==P?(o={blockedOn:u,domEventName:p,eventSystemFlags:_,nativeEvent:P,targetContainers:[A]},u!==null&&(u=K(u),u!==null&&UN(u)),o):(o.eventSystemFlags|=_,u=o.targetContainers,A!==null&&u.indexOf(A)===-1&&u.push(A),o)}function cH(o,u,p,_,A){switch(u){case"focusin":return sd=Ev(sd,o,u,p,_,A),!0;case"dragenter":return ad=Ev(ad,o,u,p,_,A),!0;case"mouseover":return od=Ev(od,o,u,p,_,A),!0;case"pointerover":var P=A.pointerId;return bv.set(P,Ev(bv.get(P)||null,o,u,p,_,A)),!0;case"gotpointercapture":return P=A.pointerId,Sv.set(P,Ev(Sv.get(P)||null,o,u,p,_,A)),!0}return!1}function VN(o){var u=Us(o.target);if(u!==null){var p=at(u);if(p!==null){if(u=p.tag,u===13){if(u=ct(p),u!==null){o.blockedOn=u,Jr(o.priority,function(){if(p.tag===13){var _=qs(),A=eu(p,_);A!==null&&Pr(A,p,_),wA(p,_)}});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function dS(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var p=RA(o.nativeEvent);if(p===null){p=o.nativeEvent;var _=new p.constructor(p.type,p);Ia=_,p.target.dispatchEvent(_),Ia=null}else return u=K(p),u!==null&&UN(u),o.blockedOn=p,!1;u.shift()}return!0}function FN(o,u,p){dS(o)&&p.delete(u)}function fH(){DA=!1,sd!==null&&dS(sd)&&(sd=null),ad!==null&&dS(ad)&&(ad=null),od!==null&&dS(od)&&(od=null),bv.forEach(FN),Sv.forEach(FN)}function pS(o,u){o.blockedOn===u&&(o.blockedOn=null,DA||(DA=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,fH)))}var mS=null;function kN(o){mS!==o&&(mS=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){mS===o&&(mS=null);for(var u=0;u<o.length;u+=3){var p=o[u],_=o[u+1],A=o[u+2];if(typeof _!="function"){if(OA(_||p)===null)continue;break}var P=K(p);P!==null&&(o.splice(u,3),u-=3,W_(P,{pending:!0,data:A,method:p.method,action:_},_,A))}}))}function Tv(o){function u(dt){return pS(dt,o)}sd!==null&&pS(sd,o),ad!==null&&pS(ad,o),od!==null&&pS(od,o),bv.forEach(u),Sv.forEach(u);for(var p=0;p<ld.length;p++){var _=ld[p];_.blockedOn===o&&(_.blockedOn=null)}for(;0<ld.length&&(p=ld[0],p.blockedOn===null);)VN(p),p.blockedOn===null&&ld.shift();if(p=(o.ownerDocument||o).$$reactFormReplay,p!=null)for(_=0;_<p.length;_+=3){var A=p[_],P=p[_+1],X=A[an]||null;if(typeof P=="function")X||kN(p);else if(X){var Q=null;if(P&&P.hasAttribute("formAction")){if(A=P,X=P[an]||null)Q=X.formAction;else if(OA(A)!==null)continue}else Q=X.action;typeof Q=="function"?p[_+1]=Q:(p.splice(_,3),_-=3),kN(p)}}}function NA(o){this._internalRoot=o}gS.prototype.render=NA.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(i(409));var p=u.current,_=qs();PN(p,_,o,u,null,null)},gS.prototype.unmount=NA.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;o.tag===0&&me(),PN(o.current,2,null,o,null,null),zf(),u[ea]=null}};function gS(o){this._internalRoot=o}gS.prototype.unstable_scheduleHydration=function(o){if(o){var u=Gu();o={blockedOn:null,target:o,priority:u};for(var p=0;p<ld.length&&u!==0&&u<ld[p].priority;p++);ld.splice(p,0,o),p===0&&VN(o)}};var HN=t.version;if(HN!=="19.0.0")throw Error(i(527,HN,"19.0.0"));nt.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=pt(u),o=o!==null?wt(o):null,o=o===null?null:o.stateNode,o};var hH={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:I,findFiberByHostInstance:Us,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yS.isDisabled&&yS.supportsFiber)try{De=yS.inject(hH),Ae=yS}catch{}}return wv.createRoot=function(o,u){if(!r(o))throw Error(i(299));var p=!1,_="",A=qb,P=jb,X=Xb,Q=null;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(A=u.onUncaughtError),u.onCaughtError!==void 0&&(P=u.onCaughtError),u.onRecoverableError!==void 0&&(X=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(Q=u.unstable_transitionCallbacks)),u=NN(o,1,!1,null,null,p,_,A,P,X,Q,null),o[ea]=u.current,mA(o.nodeType===8?o.parentNode:o),new NA(u)},wv.hydrateRoot=function(o,u,p){if(!r(o))throw Error(i(299));var _=!1,A="",P=qb,X=jb,Q=Xb,dt=null,Et=null;return p!=null&&(p.unstable_strictMode===!0&&(_=!0),p.identifierPrefix!==void 0&&(A=p.identifierPrefix),p.onUncaughtError!==void 0&&(P=p.onUncaughtError),p.onCaughtError!==void 0&&(X=p.onCaughtError),p.onRecoverableError!==void 0&&(Q=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(dt=p.unstable_transitionCallbacks),p.formState!==void 0&&(Et=p.formState)),u=NN(o,1,!0,u,p??null,_,A,P,X,Q,dt,Et),u.context=IN(null),p=u.current,_=qs(),A=Va(_),A.callback=null,Fa(p,A,_),u.current.lanes=_,$n(u,_),Mi(u),o[ea]=u.current,mA(o),new gS(u)},wv.version="19.0.0",wv}var QN;function EH(){if(QN)return PA.exports;QN=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),PA.exports=SH(),PA.exports}var TH=EH();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Dx="174",MH={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},AH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Uz=0,qC=1,zz=2,wH=3,Bz=0,UT=1,x0=2,Ou=3,ch=0,Ka=1,Vc=2,ah=0,bm=1,i1=2,jC=3,XC=4,Vz=5,bd=100,Fz=101,kz=102,Hz=103,Gz=104,qz=200,jz=201,Xz=202,Wz=203,r1=204,s1=205,Yz=206,$z=207,Kz=208,Zz=209,Qz=210,Jz=211,tB=212,eB=213,nB=214,a1=0,o1=1,l1=2,Om=3,u1=4,c1=5,f1=6,h1=7,Nx=0,iB=1,rB=2,Xc=0,sB=1,aB=2,oB=3,O2=4,lB=5,uB=6,cB=7,WC="attached",fB="detached",zT=300,fh=301,zd=302,q0=303,j0=304,h_=306,X0=1e3,Hl=1001,W0=1002,$s=1003,D2=1004,CH=1004,Ay=1005,RH=1005,ms=1006,b0=1007,OH=1007,Gc=1008,DH=1008,Bu=1009,N2=1010,I2=1011,Fy=1012,BT=1013,hh=1014,Do=1015,d_=1016,VT=1017,FT=1018,Dm=1020,P2=35902,L2=1021,U2=1022,Ta=1023,z2=1024,B2=1025,Sm=1026,Nm=1027,kT=1028,Ix=1029,V2=1030,HT=1031,NH=1032,GT=1033,S0=33776,E0=33777,T0=33778,M0=33779,d1=35840,p1=35841,m1=35842,g1=35843,y1=36196,_1=37492,v1=37496,x1=37808,b1=37809,S1=37810,E1=37811,T1=37812,M1=37813,A1=37814,w1=37815,C1=37816,R1=37817,O1=37818,D1=37819,N1=37820,I1=37821,A0=36492,P1=36494,L1=36495,F2=36283,U1=36284,z1=36285,B1=36286,hB=2200,dB=2201,pB=2202,Y0=2300,V1=2301,zE=2302,pm=2400,mm=2401,$0=2402,qT=2500,k2=2501,IH=0,PH=1,LH=2,mB=3200,gB=3201,UH=3202,zH=3203,$d=0,yB=1,nh="",ba="srgb",Bd="srgb-linear",K0="linear",Ai="srgb",BH=0,am=7680,VH=7681,FH=7682,kH=7683,HH=34055,GH=34056,qH=5386,jH=512,XH=513,WH=514,YH=515,$H=516,KH=517,ZH=518,YC=519,_B=512,vB=513,xB=514,H2=515,bB=516,SB=517,EB=518,TB=519,Z0=35044,QH=35048,JH=35040,t8=35045,e8=35049,n8=35041,i8=35046,r8=35050,s8=35042,a8="100",$C="300 es",Pu=2e3,Q0=2001,o8={COMPUTE:"compute",RENDER:"render"};let sf=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){const i=this._listeners;return i===void 0?!1:i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){const i=this._listeners;if(i===void 0)return;const r=i[t];if(r!==void 0){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const i=e[t.type];if(i!==void 0){t.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,t);t.target=null}}};const pa=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let JN=1234567;const Em=Math.PI/180,ky=180/Math.PI;function cl(){const n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(pa[n&255]+pa[n>>8&255]+pa[n>>16&255]+pa[n>>24&255]+"-"+pa[t&255]+pa[t>>8&255]+"-"+pa[t>>16&15|64]+pa[t>>24&255]+"-"+pa[e&63|128]+pa[e>>8&255]+"-"+pa[e>>16&255]+pa[e>>24&255]+pa[i&255]+pa[i>>8&255]+pa[i>>16&255]+pa[i>>24&255]).toLowerCase()}function mn(n,t,e){return Math.max(t,Math.min(e,n))}function G2(n,t){return(n%t+t)%t}function l8(n,t,e,i,r){return i+(n-t)*(r-i)/(e-t)}function u8(n,t,e){return n!==t?(e-n)/(t-n):0}function w0(n,t,e){return(1-e)*n+e*t}function c8(n,t,e,i){return w0(n,t,1-Math.exp(-e*i))}function f8(n,t=1){return t-Math.abs(G2(n,t*2)-t)}function h8(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function d8(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function p8(n,t){return n+Math.floor(Math.random()*(t-n+1))}function m8(n,t){return n+Math.random()*(t-n)}function g8(n){return n*(.5-Math.random())}function y8(n){n!==void 0&&(JN=n);let t=JN+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function _8(n){return n*Em}function v8(n){return n*ky}function x8(n){return(n&n-1)===0&&n!==0}function b8(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function S8(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function E8(n,t,e,i,r){const s=Math.cos,a=Math.sin,l=s(e/2),c=a(e/2),f=s((t+i)/2),m=a((t+i)/2),g=s((t-i)/2),y=a((t-i)/2),v=s((i-t)/2),S=a((i-t)/2);switch(r){case"XYX":n.set(l*m,c*g,c*y,l*f);break;case"YZY":n.set(c*y,l*m,c*g,l*f);break;case"ZXZ":n.set(c*g,c*y,l*m,l*f);break;case"XZX":n.set(l*m,c*S,c*v,l*f);break;case"YXY":n.set(c*v,l*m,c*S,l*f);break;case"ZYZ":n.set(c*S,c*v,l*m,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Xa(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function xn(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const MB={DEG2RAD:Em,RAD2DEG:ky,generateUUID:cl,clamp:mn,euclideanModulo:G2,mapLinear:l8,inverseLerp:u8,lerp:w0,damp:c8,pingpong:f8,smoothstep:h8,smootherstep:d8,randInt:p8,randFloat:m8,randFloatSpread:g8,seededRandom:y8,degToRad:_8,radToDeg:v8,isPowerOfTwo:x8,ceilPowerOfTwo:b8,floorPowerOfTwo:S8,setQuaternionFromProperEuler:E8,normalize:xn,denormalize:Xa};class oe{constructor(t=0,e=0){oe.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=mn(this.x,t.x,e.x),this.y=mn(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=mn(this.x,t,e),this.y=mn(this.y,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(mn(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(mn(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),r=Math.sin(e),s=this.x-t.x,a=this.y-t.y;return this.x=s*i-a*r+t.x,this.y=s*r+a*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class _n{constructor(t,e,i,r,s,a,l,c,f){_n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,i,r,s,a,l,c,f)}set(t,e,i,r,s,a,l,c,f){const m=this.elements;return m[0]=t,m[1]=r,m[2]=l,m[3]=e,m[4]=s,m[5]=c,m[6]=i,m[7]=a,m[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,r=e.elements,s=this.elements,a=i[0],l=i[3],c=i[6],f=i[1],m=i[4],g=i[7],y=i[2],v=i[5],S=i[8],E=r[0],T=r[3],x=r[6],R=r[1],D=r[4],O=r[7],N=r[2],B=r[5],L=r[8];return s[0]=a*E+l*R+c*N,s[3]=a*T+l*D+c*B,s[6]=a*x+l*O+c*L,s[1]=f*E+m*R+g*N,s[4]=f*T+m*D+g*B,s[7]=f*x+m*O+g*L,s[2]=y*E+v*R+S*N,s[5]=y*T+v*D+S*B,s[8]=y*x+v*O+S*L,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],a=t[4],l=t[5],c=t[6],f=t[7],m=t[8];return e*a*m-e*l*f-i*s*m+i*l*c+r*s*f-r*a*c}invert(){const t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],a=t[4],l=t[5],c=t[6],f=t[7],m=t[8],g=m*a-l*f,y=l*c-m*s,v=f*s-a*c,S=e*g+i*y+r*v;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/S;return t[0]=g*E,t[1]=(r*f-m*i)*E,t[2]=(l*i-r*a)*E,t[3]=y*E,t[4]=(m*e-r*c)*E,t[5]=(r*s-l*e)*E,t[6]=v*E,t[7]=(i*c-f*e)*E,t[8]=(a*e-i*s)*E,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,r,s,a,l){const c=Math.cos(s),f=Math.sin(s);return this.set(i*c,i*f,-i*(c*a+f*l)+a+t,-r*f,r*c,-r*(-f*a+c*l)+l+e,0,0,1),this}scale(t,e){return this.premultiply(VA.makeScale(t,e)),this}rotate(t){return this.premultiply(VA.makeRotation(-t)),this}translate(t,e){return this.premultiply(VA.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,i=t.elements;for(let r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const VA=new _n;function AB(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}const T8={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function wy(n,t){return new T8[n](t)}function J0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function wB(){const n=J0("canvas");return n.style.display="block",n}const tI={};function om(n){n in tI||(tI[n]=!0,console.warn(n))}function M8(n,t,e){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(t,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,e);break;default:i()}}setTimeout(s,e)})}function A8(n){const t=n.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function w8(n){const t=n.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}const eI=new _n().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),nI=new _n().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function C8(){const n={enabled:!0,workingColorSpace:Bd,spaces:{},convert:function(r,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Ai&&(r.r=oh(r.r),r.g=oh(r.g),r.b=oh(r.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Ai&&(r.r=Ny(r.r),r.g=Ny(r.g),r.b=Ny(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===nh?K0:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,a){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Bd]:{primaries:t,whitePoint:i,transfer:K0,toXYZ:eI,fromXYZ:nI,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:ba},outputColorSpaceConfig:{drawingBufferColorSpace:ba}},[ba]:{primaries:t,whitePoint:i,transfer:Ai,toXYZ:eI,fromXYZ:nI,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:ba}}}),n}const Xn=C8();function oh(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Ny(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let zg;class CB{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{zg===void 0&&(zg=J0("canvas")),zg.width=t.width,zg.height=t.height;const i=zg.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=zg}return e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=J0("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const r=i.getImageData(0,0,t.width,t.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=oh(s[a]/255)*255;return i.putImageData(r,0,0),e}else if(t.data){const e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(oh(e[i]/255)*255):e[i]=oh(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let R8=0;class Td{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:R8++}),this.uuid=cl(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,l=r.length;a<l;a++)r[a].isDataTexture?s.push(FA(r[a].image)):s.push(FA(r[a]))}else s=FA(r);i.url=s}return e||(t.images[this.uuid]=i),i}}function FA(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?CB.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let O8=0;class Fr extends sf{constructor(t=Fr.DEFAULT_IMAGE,e=Fr.DEFAULT_MAPPING,i=Hl,r=Hl,s=ms,a=Gc,l=Ta,c=Bu,f=Fr.DEFAULT_ANISOTROPY,m=nh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:O8++}),this.uuid=cl(),this.name="",this.source=new Td(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=c,this.offset=new oe(0,0),this.repeat=new oe(1,1),this.center=new oe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new _n,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==zT)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case X0:t.x=t.x-Math.floor(t.x);break;case Hl:t.x=t.x<0?0:1;break;case W0:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case X0:t.y=t.y-Math.floor(t.y);break;case Hl:t.y=t.y<0?0:1;break;case W0:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}Fr.DEFAULT_IMAGE=null;Fr.DEFAULT_MAPPING=zT;Fr.DEFAULT_ANISOTROPY=1;class ti{constructor(t=0,e=0,i=0,r=1){ti.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,r=this.z,s=this.w,a=t.elements;return this.x=a[0]*e+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*e+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*e+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*e+a[7]*i+a[11]*r+a[15]*s,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,r,s;const c=t.elements,f=c[0],m=c[4],g=c[8],y=c[1],v=c[5],S=c[9],E=c[2],T=c[6],x=c[10];if(Math.abs(m-y)<.01&&Math.abs(g-E)<.01&&Math.abs(S-T)<.01){if(Math.abs(m+y)<.1&&Math.abs(g+E)<.1&&Math.abs(S+T)<.1&&Math.abs(f+v+x-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const D=(f+1)/2,O=(v+1)/2,N=(x+1)/2,B=(m+y)/4,L=(g+E)/4,U=(S+T)/4;return D>O&&D>N?D<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(D),r=B/i,s=L/i):O>N?O<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(O),i=B/r,s=U/r):N<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(N),i=L/s,r=U/s),this.set(i,r,s,e),this}let R=Math.sqrt((T-S)*(T-S)+(g-E)*(g-E)+(y-m)*(y-m));return Math.abs(R)<.001&&(R=1),this.x=(T-S)/R,this.y=(g-E)/R,this.z=(y-m)/R,this.w=Math.acos((f+v+x-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=mn(this.x,t.x,e.x),this.y=mn(this.y,t.y,e.y),this.z=mn(this.z,t.z,e.z),this.w=mn(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=mn(this.x,t,e),this.y=mn(this.y,t,e),this.z=mn(this.z,t,e),this.w=mn(this.w,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(mn(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class jT extends sf{constructor(t=1,e=1,i={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new ti(0,0,t,e),this.scissorTest=!1,this.viewport=new ti(0,0,t,e);const r={width:t,height:e,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ms,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new Fr(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let l=0;l<a;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,i=t.textures.length;e<i;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const r=Object.assign({},t.textures[e].image);this.textures[e].source=new Td(r)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class tf extends jT{constructor(t=1,e=1,i={}){super(t,e,i),this.isWebGLRenderTarget=!0}}class Px extends Fr{constructor(t=null,e=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=$s,this.minFilter=$s,this.wrapR=Hl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class D8 extends tf{constructor(t=1,e=1,i=1,r={}){super(t,e,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Px(null,t,e,i),this.texture.isRenderTargetTexture=!0}}class XT extends Fr{constructor(t=null,e=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=$s,this.minFilter=$s,this.wrapR=Hl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class N8 extends tf{constructor(t=1,e=1,i=1,r={}){super(t,e,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new XT(null,t,e,i),this.texture.isRenderTargetTexture=!0}}class Za{constructor(t=0,e=0,i=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=r}static slerpFlat(t,e,i,r,s,a,l){let c=i[r+0],f=i[r+1],m=i[r+2],g=i[r+3];const y=s[a+0],v=s[a+1],S=s[a+2],E=s[a+3];if(l===0){t[e+0]=c,t[e+1]=f,t[e+2]=m,t[e+3]=g;return}if(l===1){t[e+0]=y,t[e+1]=v,t[e+2]=S,t[e+3]=E;return}if(g!==E||c!==y||f!==v||m!==S){let T=1-l;const x=c*y+f*v+m*S+g*E,R=x>=0?1:-1,D=1-x*x;if(D>Number.EPSILON){const N=Math.sqrt(D),B=Math.atan2(N,x*R);T=Math.sin(T*B)/N,l=Math.sin(l*B)/N}const O=l*R;if(c=c*T+y*O,f=f*T+v*O,m=m*T+S*O,g=g*T+E*O,T===1-l){const N=1/Math.sqrt(c*c+f*f+m*m+g*g);c*=N,f*=N,m*=N,g*=N}}t[e]=c,t[e+1]=f,t[e+2]=m,t[e+3]=g}static multiplyQuaternionsFlat(t,e,i,r,s,a){const l=i[r],c=i[r+1],f=i[r+2],m=i[r+3],g=s[a],y=s[a+1],v=s[a+2],S=s[a+3];return t[e]=l*S+m*g+c*v-f*y,t[e+1]=c*S+m*y+f*g-l*v,t[e+2]=f*S+m*v+l*y-c*g,t[e+3]=m*S-l*g-c*y-f*v,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const i=t._x,r=t._y,s=t._z,a=t._order,l=Math.cos,c=Math.sin,f=l(i/2),m=l(r/2),g=l(s/2),y=c(i/2),v=c(r/2),S=c(s/2);switch(a){case"XYZ":this._x=y*m*g+f*v*S,this._y=f*v*g-y*m*S,this._z=f*m*S+y*v*g,this._w=f*m*g-y*v*S;break;case"YXZ":this._x=y*m*g+f*v*S,this._y=f*v*g-y*m*S,this._z=f*m*S-y*v*g,this._w=f*m*g+y*v*S;break;case"ZXY":this._x=y*m*g-f*v*S,this._y=f*v*g+y*m*S,this._z=f*m*S+y*v*g,this._w=f*m*g-y*v*S;break;case"ZYX":this._x=y*m*g-f*v*S,this._y=f*v*g+y*m*S,this._z=f*m*S-y*v*g,this._w=f*m*g+y*v*S;break;case"YZX":this._x=y*m*g+f*v*S,this._y=f*v*g+y*m*S,this._z=f*m*S-y*v*g,this._w=f*m*g-y*v*S;break;case"XZY":this._x=y*m*g-f*v*S,this._y=f*v*g-y*m*S,this._z=f*m*S+y*v*g,this._w=f*m*g+y*v*S;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],r=e[4],s=e[8],a=e[1],l=e[5],c=e[9],f=e[2],m=e[6],g=e[10],y=i+l+g;if(y>0){const v=.5/Math.sqrt(y+1);this._w=.25/v,this._x=(m-c)*v,this._y=(s-f)*v,this._z=(a-r)*v}else if(i>l&&i>g){const v=2*Math.sqrt(1+i-l-g);this._w=(m-c)/v,this._x=.25*v,this._y=(r+a)/v,this._z=(s+f)/v}else if(l>g){const v=2*Math.sqrt(1+l-i-g);this._w=(s-f)/v,this._x=(r+a)/v,this._y=.25*v,this._z=(c+m)/v}else{const v=2*Math.sqrt(1+g-i-l);this._w=(a-r)/v,this._x=(s+f)/v,this._y=(c+m)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(mn(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(i===0)return this;const r=Math.min(1,e/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,r=t._y,s=t._z,a=t._w,l=e._x,c=e._y,f=e._z,m=e._w;return this._x=i*m+a*l+r*f-s*c,this._y=r*m+a*c+s*l-i*f,this._z=s*m+a*f+i*c-r*l,this._w=a*m-i*l-r*c-s*f,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const i=this._x,r=this._y,s=this._z,a=this._w;let l=a*t._w+i*t._x+r*t._y+s*t._z;if(l<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,l=-l):this.copy(t),l>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const c=1-l*l;if(c<=Number.EPSILON){const v=1-e;return this._w=v*a+e*this._w,this._x=v*i+e*this._x,this._y=v*r+e*this._y,this._z=v*s+e*this._z,this.normalize(),this}const f=Math.sqrt(c),m=Math.atan2(f,l),g=Math.sin((1-e)*m)/f,y=Math.sin(e*m)/f;return this._w=a*g+this._w*y,this._x=i*g+this._x*y,this._y=r*g+this._y*y,this._z=s*g+this._z*y,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(t),r*Math.cos(t),s*Math.sin(e),s*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ut{constructor(t=0,e=0,i=0){ut.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(iI.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(iI.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6]*r,this.y=s[1]*e+s[4]*i+s[7]*r,this.z=s[2]*e+s[5]*i+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,r=this.z,s=t.elements,a=1/(s[3]*e+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*e+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*e+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(t){const e=this.x,i=this.y,r=this.z,s=t.x,a=t.y,l=t.z,c=t.w,f=2*(a*r-l*i),m=2*(l*e-s*r),g=2*(s*i-a*e);return this.x=e+c*f+a*g-l*m,this.y=i+c*m+l*f-s*g,this.z=r+c*g+s*m-a*f,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r,this.y=s[1]*e+s[5]*i+s[9]*r,this.z=s[2]*e+s[6]*i+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=mn(this.x,t.x,e.x),this.y=mn(this.y,t.y,e.y),this.z=mn(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=mn(this.x,t,e),this.y=mn(this.y,t,e),this.z=mn(this.z,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(mn(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,r=t.y,s=t.z,a=e.x,l=e.y,c=e.z;return this.x=r*c-s*l,this.y=s*a-i*c,this.z=i*l-r*a,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return kA.copy(this).projectOnVector(t),this.sub(kA)}reflect(t){return this.sub(kA.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(mn(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const kA=new ut,iI=new Za;class Ks{constructor(t=new ut(1/0,1/0,1/0),e=new ut(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(Mu.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(Mu.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=Mu.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(i!==void 0){const s=i.getAttribute("position");if(e===!0&&s!==void 0&&t.isInstancedMesh!==!0)for(let a=0,l=s.count;a<l;a++)t.isMesh===!0?t.getVertexPosition(a,Mu):Mu.fromBufferAttribute(s,a),Mu.applyMatrix4(t.matrixWorld),this.expandByPoint(Mu);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),_S.copy(t.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),_S.copy(i.boundingBox)),_S.applyMatrix4(t.matrixWorld),this.union(_S)}const r=t.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Mu),Mu.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Cv),vS.subVectors(this.max,Cv),Bg.subVectors(t.a,Cv),Vg.subVectors(t.b,Cv),Fg.subVectors(t.c,Cv),cd.subVectors(Vg,Bg),fd.subVectors(Fg,Vg),Vp.subVectors(Bg,Fg);let e=[0,-cd.z,cd.y,0,-fd.z,fd.y,0,-Vp.z,Vp.y,cd.z,0,-cd.x,fd.z,0,-fd.x,Vp.z,0,-Vp.x,-cd.y,cd.x,0,-fd.y,fd.x,0,-Vp.y,Vp.x,0];return!HA(e,Bg,Vg,Fg,vS)||(e=[1,0,0,0,1,0,0,0,1],!HA(e,Bg,Vg,Fg,vS))?!1:(xS.crossVectors(cd,fd),e=[xS.x,xS.y,xS.z],HA(e,Bg,Vg,Fg,vS))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Mu).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Mu).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(kf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),kf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),kf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),kf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),kf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),kf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),kf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),kf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(kf),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const kf=[new ut,new ut,new ut,new ut,new ut,new ut,new ut,new ut],Mu=new ut,_S=new Ks,Bg=new ut,Vg=new ut,Fg=new ut,cd=new ut,fd=new ut,Vp=new ut,Cv=new ut,vS=new ut,xS=new ut,Fp=new ut;function HA(n,t,e,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){Fp.fromArray(n,s);const l=r.x*Math.abs(Fp.x)+r.y*Math.abs(Fp.y)+r.z*Math.abs(Fp.z),c=t.dot(Fp),f=e.dot(Fp),m=i.dot(Fp);if(Math.max(-Math.max(c,f,m),Math.min(c,f,m))>l)return!1}return!0}const I8=new Ks,Rv=new ut,GA=new ut;class Zs{constructor(t=new ut,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;e!==void 0?i.copy(e):I8.setFromPoints(t).getCenter(i);let r=0;for(let s=0,a=t.length;s<a;s++)r=Math.max(r,i.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Rv.subVectors(t,this.center);const e=Rv.lengthSq();if(e>this.radius*this.radius){const i=Math.sqrt(e),r=(i-this.radius)*.5;this.center.addScaledVector(Rv,r/i),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(GA.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Rv.copy(t.center).add(GA)),this.expandByPoint(Rv.copy(t.center).sub(GA))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Hf=new ut,qA=new ut,bS=new ut,hd=new ut,jA=new ut,SS=new ut,XA=new ut;class p_{constructor(t=new ut,e=new ut(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Hf)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Hf.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Hf.copy(this.origin).addScaledVector(this.direction,e),Hf.distanceToSquared(t))}distanceSqToSegment(t,e,i,r){qA.copy(t).add(e).multiplyScalar(.5),bS.copy(e).sub(t).normalize(),hd.copy(this.origin).sub(qA);const s=t.distanceTo(e)*.5,a=-this.direction.dot(bS),l=hd.dot(this.direction),c=-hd.dot(bS),f=hd.lengthSq(),m=Math.abs(1-a*a);let g,y,v,S;if(m>0)if(g=a*c-l,y=a*l-c,S=s*m,g>=0)if(y>=-S)if(y<=S){const E=1/m;g*=E,y*=E,v=g*(g+a*y+2*l)+y*(a*g+y+2*c)+f}else y=s,g=Math.max(0,-(a*y+l)),v=-g*g+y*(y+2*c)+f;else y=-s,g=Math.max(0,-(a*y+l)),v=-g*g+y*(y+2*c)+f;else y<=-S?(g=Math.max(0,-(-a*s+l)),y=g>0?-s:Math.min(Math.max(-s,-c),s),v=-g*g+y*(y+2*c)+f):y<=S?(g=0,y=Math.min(Math.max(-s,-c),s),v=y*(y+2*c)+f):(g=Math.max(0,-(a*s+l)),y=g>0?s:Math.min(Math.max(-s,-c),s),v=-g*g+y*(y+2*c)+f);else y=a>0?-s:s,g=Math.max(0,-(a*y+l)),v=-g*g+y*(y+2*c)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,g),r&&r.copy(qA).addScaledVector(bS,y),v}intersectSphere(t,e){Hf.subVectors(t.center,this.origin);const i=Hf.dot(this.direction),r=Hf.dot(Hf)-i*i,s=t.radius*t.radius;if(r>s)return null;const a=Math.sqrt(s-r),l=i-a,c=i+a;return c<0?null:l<0?this.at(c,e):this.at(l,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,r,s,a,l,c;const f=1/this.direction.x,m=1/this.direction.y,g=1/this.direction.z,y=this.origin;return f>=0?(i=(t.min.x-y.x)*f,r=(t.max.x-y.x)*f):(i=(t.max.x-y.x)*f,r=(t.min.x-y.x)*f),m>=0?(s=(t.min.y-y.y)*m,a=(t.max.y-y.y)*m):(s=(t.max.y-y.y)*m,a=(t.min.y-y.y)*m),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),g>=0?(l=(t.min.z-y.z)*g,c=(t.max.z-y.z)*g):(l=(t.max.z-y.z)*g,c=(t.min.z-y.z)*g),i>c||l>r)||((l>i||i!==i)&&(i=l),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,e)}intersectsBox(t){return this.intersectBox(t,Hf)!==null}intersectTriangle(t,e,i,r,s){jA.subVectors(e,t),SS.subVectors(i,t),XA.crossVectors(jA,SS);let a=this.direction.dot(XA),l;if(a>0){if(r)return null;l=1}else if(a<0)l=-1,a=-a;else return null;hd.subVectors(this.origin,t);const c=l*this.direction.dot(SS.crossVectors(hd,SS));if(c<0)return null;const f=l*this.direction.dot(jA.cross(hd));if(f<0||c+f>a)return null;const m=-l*hd.dot(XA);return m<0?null:this.at(m/a,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class nn{constructor(t,e,i,r,s,a,l,c,f,m,g,y,v,S,E,T){nn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,i,r,s,a,l,c,f,m,g,y,v,S,E,T)}set(t,e,i,r,s,a,l,c,f,m,g,y,v,S,E,T){const x=this.elements;return x[0]=t,x[4]=e,x[8]=i,x[12]=r,x[1]=s,x[5]=a,x[9]=l,x[13]=c,x[2]=f,x[6]=m,x[10]=g,x[14]=y,x[3]=v,x[7]=S,x[11]=E,x[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new nn().fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,r=1/kg.setFromMatrixColumn(t,0).length(),s=1/kg.setFromMatrixColumn(t,1).length(),a=1/kg.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*s,e[5]=i[5]*s,e[6]=i[6]*s,e[7]=0,e[8]=i[8]*a,e[9]=i[9]*a,e[10]=i[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,r=t.y,s=t.z,a=Math.cos(i),l=Math.sin(i),c=Math.cos(r),f=Math.sin(r),m=Math.cos(s),g=Math.sin(s);if(t.order==="XYZ"){const y=a*m,v=a*g,S=l*m,E=l*g;e[0]=c*m,e[4]=-c*g,e[8]=f,e[1]=v+S*f,e[5]=y-E*f,e[9]=-l*c,e[2]=E-y*f,e[6]=S+v*f,e[10]=a*c}else if(t.order==="YXZ"){const y=c*m,v=c*g,S=f*m,E=f*g;e[0]=y+E*l,e[4]=S*l-v,e[8]=a*f,e[1]=a*g,e[5]=a*m,e[9]=-l,e[2]=v*l-S,e[6]=E+y*l,e[10]=a*c}else if(t.order==="ZXY"){const y=c*m,v=c*g,S=f*m,E=f*g;e[0]=y-E*l,e[4]=-a*g,e[8]=S+v*l,e[1]=v+S*l,e[5]=a*m,e[9]=E-y*l,e[2]=-a*f,e[6]=l,e[10]=a*c}else if(t.order==="ZYX"){const y=a*m,v=a*g,S=l*m,E=l*g;e[0]=c*m,e[4]=S*f-v,e[8]=y*f+E,e[1]=c*g,e[5]=E*f+y,e[9]=v*f-S,e[2]=-f,e[6]=l*c,e[10]=a*c}else if(t.order==="YZX"){const y=a*c,v=a*f,S=l*c,E=l*f;e[0]=c*m,e[4]=E-y*g,e[8]=S*g+v,e[1]=g,e[5]=a*m,e[9]=-l*m,e[2]=-f*m,e[6]=v*g+S,e[10]=y-E*g}else if(t.order==="XZY"){const y=a*c,v=a*f,S=l*c,E=l*f;e[0]=c*m,e[4]=-g,e[8]=f*m,e[1]=y*g+E,e[5]=a*m,e[9]=v*g-S,e[2]=S*g-v,e[6]=l*m,e[10]=E*g+y}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(P8,t,L8)}lookAt(t,e,i){const r=this.elements;return il.subVectors(t,e),il.lengthSq()===0&&(il.z=1),il.normalize(),dd.crossVectors(i,il),dd.lengthSq()===0&&(Math.abs(i.z)===1?il.x+=1e-4:il.z+=1e-4,il.normalize(),dd.crossVectors(i,il)),dd.normalize(),ES.crossVectors(il,dd),r[0]=dd.x,r[4]=ES.x,r[8]=il.x,r[1]=dd.y,r[5]=ES.y,r[9]=il.y,r[2]=dd.z,r[6]=ES.z,r[10]=il.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,r=e.elements,s=this.elements,a=i[0],l=i[4],c=i[8],f=i[12],m=i[1],g=i[5],y=i[9],v=i[13],S=i[2],E=i[6],T=i[10],x=i[14],R=i[3],D=i[7],O=i[11],N=i[15],B=r[0],L=r[4],U=r[8],I=r[12],w=r[1],V=r[5],G=r[9],k=r[13],st=r[2],it=r[6],Y=r[10],Z=r[14],at=r[3],ct=r[7],$=r[11],pt=r[15];return s[0]=a*B+l*w+c*st+f*at,s[4]=a*L+l*V+c*it+f*ct,s[8]=a*U+l*G+c*Y+f*$,s[12]=a*I+l*k+c*Z+f*pt,s[1]=m*B+g*w+y*st+v*at,s[5]=m*L+g*V+y*it+v*ct,s[9]=m*U+g*G+y*Y+v*$,s[13]=m*I+g*k+y*Z+v*pt,s[2]=S*B+E*w+T*st+x*at,s[6]=S*L+E*V+T*it+x*ct,s[10]=S*U+E*G+T*Y+x*$,s[14]=S*I+E*k+T*Z+x*pt,s[3]=R*B+D*w+O*st+N*at,s[7]=R*L+D*V+O*it+N*ct,s[11]=R*U+D*G+O*Y+N*$,s[15]=R*I+D*k+O*Z+N*pt,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],r=t[8],s=t[12],a=t[1],l=t[5],c=t[9],f=t[13],m=t[2],g=t[6],y=t[10],v=t[14],S=t[3],E=t[7],T=t[11],x=t[15];return S*(+s*c*g-r*f*g-s*l*y+i*f*y+r*l*v-i*c*v)+E*(+e*c*v-e*f*y+s*a*y-r*a*v+r*f*m-s*c*m)+T*(+e*f*g-e*l*v-s*a*g+i*a*v+s*l*m-i*f*m)+x*(-r*l*m-e*c*g+e*l*y+r*a*g-i*a*y+i*c*m)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],a=t[4],l=t[5],c=t[6],f=t[7],m=t[8],g=t[9],y=t[10],v=t[11],S=t[12],E=t[13],T=t[14],x=t[15],R=g*T*f-E*y*f+E*c*v-l*T*v-g*c*x+l*y*x,D=S*y*f-m*T*f-S*c*v+a*T*v+m*c*x-a*y*x,O=m*E*f-S*g*f+S*l*v-a*E*v-m*l*x+a*g*x,N=S*g*c-m*E*c-S*l*y+a*E*y+m*l*T-a*g*T,B=e*R+i*D+r*O+s*N;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/B;return t[0]=R*L,t[1]=(E*y*s-g*T*s-E*r*v+i*T*v+g*r*x-i*y*x)*L,t[2]=(l*T*s-E*c*s+E*r*f-i*T*f-l*r*x+i*c*x)*L,t[3]=(g*c*s-l*y*s-g*r*f+i*y*f+l*r*v-i*c*v)*L,t[4]=D*L,t[5]=(m*T*s-S*y*s+S*r*v-e*T*v-m*r*x+e*y*x)*L,t[6]=(S*c*s-a*T*s-S*r*f+e*T*f+a*r*x-e*c*x)*L,t[7]=(a*y*s-m*c*s+m*r*f-e*y*f-a*r*v+e*c*v)*L,t[8]=O*L,t[9]=(S*g*s-m*E*s-S*i*v+e*E*v+m*i*x-e*g*x)*L,t[10]=(a*E*s-S*l*s+S*i*f-e*E*f-a*i*x+e*l*x)*L,t[11]=(m*l*s-a*g*s-m*i*f+e*g*f+a*i*v-e*l*v)*L,t[12]=N*L,t[13]=(m*E*r-S*g*r+S*i*y-e*E*y-m*i*T+e*g*T)*L,t[14]=(S*l*r-a*E*r-S*i*c+e*E*c+a*i*T-e*l*T)*L,t[15]=(a*g*r-m*l*r+m*i*c-e*g*c-a*i*y+e*l*y)*L,this}scale(t){const e=this.elements,i=t.x,r=t.y,s=t.z;return e[0]*=i,e[4]*=r,e[8]*=s,e[1]*=i,e[5]*=r,e[9]*=s,e[2]*=i,e[6]*=r,e[10]*=s,e[3]*=i,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),r=Math.sin(e),s=1-i,a=t.x,l=t.y,c=t.z,f=s*a,m=s*l;return this.set(f*a+i,f*l-r*c,f*c+r*l,0,f*l+r*c,m*l+i,m*c-r*a,0,f*c-r*l,m*c+r*a,s*c*c+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,r,s,a){return this.set(1,i,s,0,t,1,a,0,e,r,1,0,0,0,0,1),this}compose(t,e,i){const r=this.elements,s=e._x,a=e._y,l=e._z,c=e._w,f=s+s,m=a+a,g=l+l,y=s*f,v=s*m,S=s*g,E=a*m,T=a*g,x=l*g,R=c*f,D=c*m,O=c*g,N=i.x,B=i.y,L=i.z;return r[0]=(1-(E+x))*N,r[1]=(v+O)*N,r[2]=(S-D)*N,r[3]=0,r[4]=(v-O)*B,r[5]=(1-(y+x))*B,r[6]=(T+R)*B,r[7]=0,r[8]=(S+D)*L,r[9]=(T-R)*L,r[10]=(1-(y+E))*L,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,i){const r=this.elements;let s=kg.set(r[0],r[1],r[2]).length();const a=kg.set(r[4],r[5],r[6]).length(),l=kg.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],Au.copy(this);const f=1/s,m=1/a,g=1/l;return Au.elements[0]*=f,Au.elements[1]*=f,Au.elements[2]*=f,Au.elements[4]*=m,Au.elements[5]*=m,Au.elements[6]*=m,Au.elements[8]*=g,Au.elements[9]*=g,Au.elements[10]*=g,e.setFromRotationMatrix(Au),i.x=s,i.y=a,i.z=l,this}makePerspective(t,e,i,r,s,a,l=Pu){const c=this.elements,f=2*s/(e-t),m=2*s/(i-r),g=(e+t)/(e-t),y=(i+r)/(i-r);let v,S;if(l===Pu)v=-(a+s)/(a-s),S=-2*a*s/(a-s);else if(l===Q0)v=-a/(a-s),S=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=f,c[4]=0,c[8]=g,c[12]=0,c[1]=0,c[5]=m,c[9]=y,c[13]=0,c[2]=0,c[6]=0,c[10]=v,c[14]=S,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(t,e,i,r,s,a,l=Pu){const c=this.elements,f=1/(e-t),m=1/(i-r),g=1/(a-s),y=(e+t)*f,v=(i+r)*m;let S,E;if(l===Pu)S=(a+s)*g,E=-2*g;else if(l===Q0)S=s*g,E=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*f,c[4]=0,c[8]=0,c[12]=-y,c[1]=0,c[5]=2*m,c[9]=0,c[13]=-v,c[2]=0,c[6]=0,c[10]=E,c[14]=-S,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const kg=new ut,Au=new nn,P8=new ut(0,0,0),L8=new ut(1,1,1),dd=new ut,ES=new ut,il=new ut,rI=new nn,sI=new Za;class dl{constructor(t=0,e=0,i=0,r=dl.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,r=this._order){return this._x=t,this._y=e,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const r=t.elements,s=r[0],a=r[4],l=r[8],c=r[1],f=r[5],m=r[9],g=r[2],y=r[6],v=r[10];switch(e){case"XYZ":this._y=Math.asin(mn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-m,v),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(y,f),this._z=0);break;case"YXZ":this._x=Math.asin(-mn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(l,v),this._z=Math.atan2(c,f)):(this._y=Math.atan2(-g,s),this._z=0);break;case"ZXY":this._x=Math.asin(mn(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-g,v),this._z=Math.atan2(-a,f)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-mn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(y,v),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-a,f));break;case"YZX":this._z=Math.asin(mn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-m,f),this._y=Math.atan2(-g,s)):(this._x=0,this._y=Math.atan2(l,v));break;case"XZY":this._z=Math.asin(-mn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(y,f),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-m,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,i===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return rI.makeRotationFromQuaternion(t),this.setFromRotationMatrix(rI,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return sI.setFromEuler(this),this.setFromQuaternion(sI,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}dl.DEFAULT_ORDER="XYZ";class Hy{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let U8=0;const aI=new ut,Hg=new Za,Gf=new nn,TS=new ut,Ov=new ut,z8=new ut,B8=new Za,oI=new ut(1,0,0),lI=new ut(0,1,0),uI=new ut(0,0,1),cI={type:"added"},V8={type:"removed"},Gg={type:"childadded",child:null},WA={type:"childremoved",child:null};class ii extends sf{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:U8++}),this.uuid=cl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ii.DEFAULT_UP.clone();const t=new ut,e=new dl,i=new Za,r=new ut(1,1,1);function s(){i.setFromEuler(e,!1)}function a(){e.setFromQuaternion(i,void 0,!1)}e._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new nn},normalMatrix:{value:new _n}}),this.matrix=new nn,this.matrixWorld=new nn,this.matrixAutoUpdate=ii.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ii.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Hy,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Hg.setFromAxisAngle(t,e),this.quaternion.multiply(Hg),this}rotateOnWorldAxis(t,e){return Hg.setFromAxisAngle(t,e),this.quaternion.premultiply(Hg),this}rotateX(t){return this.rotateOnAxis(oI,t)}rotateY(t){return this.rotateOnAxis(lI,t)}rotateZ(t){return this.rotateOnAxis(uI,t)}translateOnAxis(t,e){return aI.copy(t).applyQuaternion(this.quaternion),this.position.add(aI.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(oI,t)}translateY(t){return this.translateOnAxis(lI,t)}translateZ(t){return this.translateOnAxis(uI,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Gf.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?TS.copy(t):TS.set(t,e,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Ov.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Gf.lookAt(Ov,TS,this.up):Gf.lookAt(TS,Ov,this.up),this.quaternion.setFromRotationMatrix(Gf),r&&(Gf.extractRotation(r.matrixWorld),Hg.setFromRotationMatrix(Gf),this.quaternion.premultiply(Hg.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(cI),Gg.child=t,this.dispatchEvent(Gg),Gg.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(V8),WA.child=t,this.dispatchEvent(WA),WA.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Gf.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Gf.multiply(t.parent.matrixWorld)),t.applyMatrix4(Gf),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(cI),Gg.child=t,this.dispatchEvent(Gg),Gg.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(t,e);if(a!==void 0)return a}}getObjectsByProperty(t,e,i=[]){this[t]===e&&i.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(t,e,i);return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ov,t,z8),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ov,B8,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].updateMatrixWorld(t)}updateWorldMatrix(t,e){const i=this.parent;if(t===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(t.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let f=0,m=c.length;f<m;f++){const g=c[f];s(t.shapes,g)}else s(t.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,f=this.material.length;c<f;c++)l.push(s(t.materials,this.material[c]));r.material=l}else r.material=s(t.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];r.animations.push(s(t.animations,c))}}if(e){const l=a(t.geometries),c=a(t.materials),f=a(t.textures),m=a(t.images),g=a(t.shapes),y=a(t.skeletons),v=a(t.animations),S=a(t.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),f.length>0&&(i.textures=f),m.length>0&&(i.images=m),g.length>0&&(i.shapes=g),y.length>0&&(i.skeletons=y),v.length>0&&(i.animations=v),S.length>0&&(i.nodes=S)}return i.object=r,i;function a(l){const c=[];for(const f in l){const m=l[f];delete m.metadata,c.push(m)}return c}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let i=0;i<t.children.length;i++){const r=t.children[i];this.add(r.clone())}return this}}ii.DEFAULT_UP=new ut(0,1,0);ii.DEFAULT_MATRIX_AUTO_UPDATE=!0;ii.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const wu=new ut,qf=new ut,YA=new ut,jf=new ut,qg=new ut,jg=new ut,fI=new ut,$A=new ut,KA=new ut,ZA=new ut,QA=new ti,JA=new ti,tw=new ti;class Oo{constructor(t=new ut,e=new ut,i=new ut){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,r){r.subVectors(i,e),wu.subVectors(t,e),r.cross(wu);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,i,r,s){wu.subVectors(r,e),qf.subVectors(i,e),YA.subVectors(t,e);const a=wu.dot(wu),l=wu.dot(qf),c=wu.dot(YA),f=qf.dot(qf),m=qf.dot(YA),g=a*f-l*l;if(g===0)return s.set(0,0,0),null;const y=1/g,v=(f*c-l*m)*y,S=(a*m-l*c)*y;return s.set(1-v-S,S,v)}static containsPoint(t,e,i,r){return this.getBarycoord(t,e,i,r,jf)===null?!1:jf.x>=0&&jf.y>=0&&jf.x+jf.y<=1}static getInterpolation(t,e,i,r,s,a,l,c){return this.getBarycoord(t,e,i,r,jf)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,jf.x),c.addScaledVector(a,jf.y),c.addScaledVector(l,jf.z),c)}static getInterpolatedAttribute(t,e,i,r,s,a){return QA.setScalar(0),JA.setScalar(0),tw.setScalar(0),QA.fromBufferAttribute(t,e),JA.fromBufferAttribute(t,i),tw.fromBufferAttribute(t,r),a.setScalar(0),a.addScaledVector(QA,s.x),a.addScaledVector(JA,s.y),a.addScaledVector(tw,s.z),a}static isFrontFacing(t,e,i,r){return wu.subVectors(i,e),qf.subVectors(t,e),wu.cross(qf).dot(r)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,i,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return wu.subVectors(this.c,this.b),qf.subVectors(this.a,this.b),wu.cross(qf).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Oo.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Oo.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,r,s){return Oo.getInterpolation(t,this.a,this.b,this.c,e,i,r,s)}containsPoint(t){return Oo.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Oo.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,r=this.b,s=this.c;let a,l;qg.subVectors(r,i),jg.subVectors(s,i),$A.subVectors(t,i);const c=qg.dot($A),f=jg.dot($A);if(c<=0&&f<=0)return e.copy(i);KA.subVectors(t,r);const m=qg.dot(KA),g=jg.dot(KA);if(m>=0&&g<=m)return e.copy(r);const y=c*g-m*f;if(y<=0&&c>=0&&m<=0)return a=c/(c-m),e.copy(i).addScaledVector(qg,a);ZA.subVectors(t,s);const v=qg.dot(ZA),S=jg.dot(ZA);if(S>=0&&v<=S)return e.copy(s);const E=v*f-c*S;if(E<=0&&f>=0&&S<=0)return l=f/(f-S),e.copy(i).addScaledVector(jg,l);const T=m*S-v*g;if(T<=0&&g-m>=0&&v-S>=0)return fI.subVectors(s,r),l=(g-m)/(g-m+(v-S)),e.copy(r).addScaledVector(fI,l);const x=1/(T+E+y);return a=E*x,l=y*x,e.copy(i).addScaledVector(qg,a).addScaledVector(jg,l)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const RB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},pd={h:0,s:0,l:0},MS={h:0,s:0,l:0};function ew(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}class Ne{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&&i===void 0){const r=t;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=ba){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Xn.toWorkingColorSpace(this,e),this}setRGB(t,e,i,r=Xn.workingColorSpace){return this.r=t,this.g=e,this.b=i,Xn.toWorkingColorSpace(this,r),this}setHSL(t,e,i,r=Xn.workingColorSpace){if(t=G2(t,1),e=mn(e,0,1),i=mn(i,0,1),e===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+e):i+e-i*e,a=2*i-s;this.r=ew(a,s,t+1/3),this.g=ew(a,s,t),this.b=ew(a,s,t-1/3)}return Xn.toWorkingColorSpace(this,r),this}setStyle(t,e=ba){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let s;const a=r[1],l=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,e);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,e);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,e);if(a===6)return this.setHex(parseInt(s,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=ba){const i=RB[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=oh(t.r),this.g=oh(t.g),this.b=oh(t.b),this}copyLinearToSRGB(t){return this.r=Ny(t.r),this.g=Ny(t.g),this.b=Ny(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=ba){return Xn.fromWorkingColorSpace(ma.copy(this),t),Math.round(mn(ma.r*255,0,255))*65536+Math.round(mn(ma.g*255,0,255))*256+Math.round(mn(ma.b*255,0,255))}getHexString(t=ba){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Xn.workingColorSpace){Xn.fromWorkingColorSpace(ma.copy(this),e);const i=ma.r,r=ma.g,s=ma.b,a=Math.max(i,r,s),l=Math.min(i,r,s);let c,f;const m=(l+a)/2;if(l===a)c=0,f=0;else{const g=a-l;switch(f=m<=.5?g/(a+l):g/(2-a-l),a){case i:c=(r-s)/g+(r<s?6:0);break;case r:c=(s-i)/g+2;break;case s:c=(i-r)/g+4;break}c/=6}return t.h=c,t.s=f,t.l=m,t}getRGB(t,e=Xn.workingColorSpace){return Xn.fromWorkingColorSpace(ma.copy(this),e),t.r=ma.r,t.g=ma.g,t.b=ma.b,t}getStyle(t=ba){Xn.fromWorkingColorSpace(ma.copy(this),t);const e=ma.r,i=ma.g,r=ma.b;return t!==ba?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(t,e,i){return this.getHSL(pd),this.setHSL(pd.h+t,pd.s+e,pd.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(pd),t.getHSL(MS);const i=w0(pd.h,MS.h,e),r=w0(pd.s,MS.s,e),s=w0(pd.l,MS.l,e);return this.setHSL(i,r,s),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,i=this.g,r=this.b,s=t.elements;return this.r=s[0]*e+s[3]*i+s[6]*r,this.g=s[1]*e+s[4]*i+s[7]*r,this.b=s[2]*e+s[5]*i+s[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ma=new Ne;Ne.NAMES=RB;let F8=0;class Ra extends sf{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:F8++}),this.uuid=cl(),this.name="",this.type="Material",this.blending=bm,this.side=ch,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=r1,this.blendDst=s1,this.blendEquation=bd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ne(0,0,0),this.blendAlpha=0,this.depthFunc=Om,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=YC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=am,this.stencilZFail=am,this.stencilZPass=am,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const i=t[e];if(i===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const r=this[e];if(r===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[e]=i}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==bm&&(i.blending=this.blending),this.side!==ch&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==r1&&(i.blendSrc=this.blendSrc),this.blendDst!==s1&&(i.blendDst=this.blendDst),this.blendEquation!==bd&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Om&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==YC&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==am&&(i.stencilFail=this.stencilFail),this.stencilZFail!==am&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==am&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const l in s){const c=s[l];delete c.metadata,a.push(c)}return a}if(e){const s=r(t.textures),a=r(t.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(e!==null){const r=e.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=e[s].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Kd extends Ra{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ne(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new dl,this.combine=Nx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const ih=k8();function k8(){const n=new ArrayBuffer(4),t=new Float32Array(n),e=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const f=c-127;f<-27?(i[c]=0,i[c|256]=32768,r[c]=24,r[c|256]=24):f<-14?(i[c]=1024>>-f-14,i[c|256]=1024>>-f-14|32768,r[c]=-f-1,r[c|256]=-f-1):f<=15?(i[c]=f+15<<10,i[c|256]=f+15<<10|32768,r[c]=13,r[c|256]=13):f<128?(i[c]=31744,i[c|256]=64512,r[c]=24,r[c|256]=24):(i[c]=31744,i[c|256]=64512,r[c]=13,r[c|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let f=c<<13,m=0;for(;(f&8388608)===0;)f<<=1,m-=8388608;f&=-8388609,m+=947912704,s[c]=f|m}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)a[c]=c<<23;a[31]=1199570944,a[32]=2147483648;for(let c=33;c<63;++c)a[c]=2147483648+(c-32<<23);a[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:t,uint32View:e,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:l}}function Mo(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=mn(n,-65504,65504),ih.floatView[0]=n;const t=ih.uint32View[0],e=t>>23&511;return ih.baseTable[e]+((t&8388607)>>ih.shiftTable[e])}function a0(n){const t=n>>10;return ih.uint32View[0]=ih.mantissaTable[ih.offsetTable[t]+(n&1023)]+ih.exponentTable[t],ih.floatView[0]}class H8{static toHalfFloat(t){return Mo(t)}static fromHalfFloat(t){return a0(t)}}const ss=new ut,AS=new oe;let G8=0;class wi{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:G8++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=Z0,this.updateRanges=[],this.gpuType=Do,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[i+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)AS.fromBufferAttribute(this,e),AS.applyMatrix3(t),this.setXY(e,AS.x,AS.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)ss.fromBufferAttribute(this,e),ss.applyMatrix3(t),this.setXYZ(e,ss.x,ss.y,ss.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)ss.fromBufferAttribute(this,e),ss.applyMatrix4(t),this.setXYZ(e,ss.x,ss.y,ss.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)ss.fromBufferAttribute(this,e),ss.applyNormalMatrix(t),this.setXYZ(e,ss.x,ss.y,ss.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)ss.fromBufferAttribute(this,e),ss.transformDirection(t),this.setXYZ(e,ss.x,ss.y,ss.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=Xa(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=xn(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Xa(e,this.array)),e}setX(t,e){return this.normalized&&(e=xn(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Xa(e,this.array)),e}setY(t,e){return this.normalized&&(e=xn(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Xa(e,this.array)),e}setZ(t,e){return this.normalized&&(e=xn(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Xa(e,this.array)),e}setW(t,e){return this.normalized&&(e=xn(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=xn(e,this.array),i=xn(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,r){return t*=this.itemSize,this.normalized&&(e=xn(e,this.array),i=xn(i,this.array),r=xn(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this}setXYZW(t,e,i,r,s){return t*=this.itemSize,this.normalized&&(e=xn(e,this.array),i=xn(i,this.array),r=xn(r,this.array),s=xn(s,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==Z0&&(t.usage=this.usage),t}}class q8 extends wi{constructor(t,e,i){super(new Int8Array(t),e,i)}}class j8 extends wi{constructor(t,e,i){super(new Uint8Array(t),e,i)}}class X8 extends wi{constructor(t,e,i){super(new Uint8ClampedArray(t),e,i)}}class W8 extends wi{constructor(t,e,i){super(new Int16Array(t),e,i)}}class q2 extends wi{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class Y8 extends wi{constructor(t,e,i){super(new Int32Array(t),e,i)}}class j2 extends wi{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class $8 extends wi{constructor(t,e,i){super(new Uint16Array(t),e,i),this.isFloat16BufferAttribute=!0}getX(t){let e=a0(this.array[t*this.itemSize]);return this.normalized&&(e=Xa(e,this.array)),e}setX(t,e){return this.normalized&&(e=xn(e,this.array)),this.array[t*this.itemSize]=Mo(e),this}getY(t){let e=a0(this.array[t*this.itemSize+1]);return this.normalized&&(e=Xa(e,this.array)),e}setY(t,e){return this.normalized&&(e=xn(e,this.array)),this.array[t*this.itemSize+1]=Mo(e),this}getZ(t){let e=a0(this.array[t*this.itemSize+2]);return this.normalized&&(e=Xa(e,this.array)),e}setZ(t,e){return this.normalized&&(e=xn(e,this.array)),this.array[t*this.itemSize+2]=Mo(e),this}getW(t){let e=a0(this.array[t*this.itemSize+3]);return this.normalized&&(e=Xa(e,this.array)),e}setW(t,e){return this.normalized&&(e=xn(e,this.array)),this.array[t*this.itemSize+3]=Mo(e),this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=xn(e,this.array),i=xn(i,this.array)),this.array[t+0]=Mo(e),this.array[t+1]=Mo(i),this}setXYZ(t,e,i,r){return t*=this.itemSize,this.normalized&&(e=xn(e,this.array),i=xn(i,this.array),r=xn(r,this.array)),this.array[t+0]=Mo(e),this.array[t+1]=Mo(i),this.array[t+2]=Mo(r),this}setXYZW(t,e,i,r,s){return t*=this.itemSize,this.normalized&&(e=xn(e,this.array),i=xn(i,this.array),r=xn(r,this.array),s=xn(s,this.array)),this.array[t+0]=Mo(e),this.array[t+1]=Mo(i),this.array[t+2]=Mo(r),this.array[t+3]=Mo(s),this}}class ze extends wi{constructor(t,e,i){super(new Float32Array(t),e,i)}}let K8=0;const Ll=new nn,nw=new ii,Xg=new ut,rl=new Ks,Dv=new Ks,Os=new ut;class bn extends sf{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:K8++}),this.uuid=cl(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(AB(t)?j2:q2)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new _n().getNormalMatrix(t);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Ll.makeRotationFromQuaternion(t),this.applyMatrix4(Ll),this}rotateX(t){return Ll.makeRotationX(t),this.applyMatrix4(Ll),this}rotateY(t){return Ll.makeRotationY(t),this.applyMatrix4(Ll),this}rotateZ(t){return Ll.makeRotationZ(t),this.applyMatrix4(Ll),this}translate(t,e,i){return Ll.makeTranslation(t,e,i),this.applyMatrix4(Ll),this}scale(t,e,i){return Ll.makeScale(t,e,i),this.applyMatrix4(Ll),this}lookAt(t){return nw.lookAt(t),nw.updateMatrix(),this.applyMatrix4(nw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Xg).negate(),this.translate(Xg.x,Xg.y,Xg.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const i=[];for(let r=0,s=t.length;r<s;r++){const a=t[r];i.push(a.x,a.y,a.z||0)}this.setAttribute("position",new ze(i,3))}else{const i=Math.min(t.length,e.count);for(let r=0;r<i;r++){const s=t[r];e.setXYZ(r,s.x,s.y,s.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ks);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ut(-1/0,-1/0,-1/0),new ut(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,r=e.length;i<r;i++){const s=e[i];rl.setFromBufferAttribute(s),this.morphTargetsRelative?(Os.addVectors(this.boundingBox.min,rl.min),this.boundingBox.expandByPoint(Os),Os.addVectors(this.boundingBox.max,rl.max),this.boundingBox.expandByPoint(Os)):(this.boundingBox.expandByPoint(rl.min),this.boundingBox.expandByPoint(rl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Zs);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ut,1/0);return}if(t){const i=this.boundingSphere.center;if(rl.setFromBufferAttribute(t),e)for(let s=0,a=e.length;s<a;s++){const l=e[s];Dv.setFromBufferAttribute(l),this.morphTargetsRelative?(Os.addVectors(rl.min,Dv.min),rl.expandByPoint(Os),Os.addVectors(rl.max,Dv.max),rl.expandByPoint(Os)):(rl.expandByPoint(Dv.min),rl.expandByPoint(Dv.max))}rl.getCenter(i);let r=0;for(let s=0,a=t.count;s<a;s++)Os.fromBufferAttribute(t,s),r=Math.max(r,i.distanceToSquared(Os));if(e)for(let s=0,a=e.length;s<a;s++){const l=e[s],c=this.morphTargetsRelative;for(let f=0,m=l.count;f<m;f++)Os.fromBufferAttribute(l,f),c&&(Xg.fromBufferAttribute(t,f),Os.add(Xg)),r=Math.max(r,i.distanceToSquared(Os))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.position,r=e.normal,s=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new wi(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),l=[],c=[];for(let U=0;U<i.count;U++)l[U]=new ut,c[U]=new ut;const f=new ut,m=new ut,g=new ut,y=new oe,v=new oe,S=new oe,E=new ut,T=new ut;function x(U,I,w){f.fromBufferAttribute(i,U),m.fromBufferAttribute(i,I),g.fromBufferAttribute(i,w),y.fromBufferAttribute(s,U),v.fromBufferAttribute(s,I),S.fromBufferAttribute(s,w),m.sub(f),g.sub(f),v.sub(y),S.sub(y);const V=1/(v.x*S.y-S.x*v.y);isFinite(V)&&(E.copy(m).multiplyScalar(S.y).addScaledVector(g,-v.y).multiplyScalar(V),T.copy(g).multiplyScalar(v.x).addScaledVector(m,-S.x).multiplyScalar(V),l[U].add(E),l[I].add(E),l[w].add(E),c[U].add(T),c[I].add(T),c[w].add(T))}let R=this.groups;R.length===0&&(R=[{start:0,count:t.count}]);for(let U=0,I=R.length;U<I;++U){const w=R[U],V=w.start,G=w.count;for(let k=V,st=V+G;k<st;k+=3)x(t.getX(k+0),t.getX(k+1),t.getX(k+2))}const D=new ut,O=new ut,N=new ut,B=new ut;function L(U){N.fromBufferAttribute(r,U),B.copy(N);const I=l[U];D.copy(I),D.sub(N.multiplyScalar(N.dot(I))).normalize(),O.crossVectors(B,I);const V=O.dot(c[U])<0?-1:1;a.setXYZW(U,D.x,D.y,D.z,V)}for(let U=0,I=R.length;U<I;++U){const w=R[U],V=w.start,G=w.count;for(let k=V,st=V+G;k<st;k+=3)L(t.getX(k+0)),L(t.getX(k+1)),L(t.getX(k+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new wi(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let y=0,v=i.count;y<v;y++)i.setXYZ(y,0,0,0);const r=new ut,s=new ut,a=new ut,l=new ut,c=new ut,f=new ut,m=new ut,g=new ut;if(t)for(let y=0,v=t.count;y<v;y+=3){const S=t.getX(y+0),E=t.getX(y+1),T=t.getX(y+2);r.fromBufferAttribute(e,S),s.fromBufferAttribute(e,E),a.fromBufferAttribute(e,T),m.subVectors(a,s),g.subVectors(r,s),m.cross(g),l.fromBufferAttribute(i,S),c.fromBufferAttribute(i,E),f.fromBufferAttribute(i,T),l.add(m),c.add(m),f.add(m),i.setXYZ(S,l.x,l.y,l.z),i.setXYZ(E,c.x,c.y,c.z),i.setXYZ(T,f.x,f.y,f.z)}else for(let y=0,v=e.count;y<v;y+=3)r.fromBufferAttribute(e,y+0),s.fromBufferAttribute(e,y+1),a.fromBufferAttribute(e,y+2),m.subVectors(a,s),g.subVectors(r,s),m.cross(g),i.setXYZ(y+0,m.x,m.y,m.z),i.setXYZ(y+1,m.x,m.y,m.z),i.setXYZ(y+2,m.x,m.y,m.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Os.fromBufferAttribute(t,e),Os.normalize(),t.setXYZ(e,Os.x,Os.y,Os.z)}toNonIndexed(){function t(l,c){const f=l.array,m=l.itemSize,g=l.normalized,y=new f.constructor(c.length*m);let v=0,S=0;for(let E=0,T=c.length;E<T;E++){l.isInterleavedBufferAttribute?v=c[E]*l.data.stride+l.offset:v=c[E]*m;for(let x=0;x<m;x++)y[S++]=f[v++]}return new wi(y,m,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new bn,i=this.index.array,r=this.attributes;for(const l in r){const c=r[l],f=t(c,i);e.setAttribute(l,f)}const s=this.morphAttributes;for(const l in s){const c=[],f=s[l];for(let m=0,g=f.length;m<g;m++){const y=f[m],v=t(y,i);c.push(v)}e.morphAttributes[l]=c}e.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,c=a.length;l<c;l++){const f=a[l];e.addGroup(f.start,f.count,f.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const f in c)c[f]!==void 0&&(t[f]=c[f]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const c in i){const f=i[c];t.data.attributes[c]=f.toJSON(t.data)}const r={};let s=!1;for(const c in this.morphAttributes){const f=this.morphAttributes[c],m=[];for(let g=0,y=f.length;g<y;g++){const v=f[g];m.push(v.toJSON(t.data))}m.length>0&&(r[c]=m,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;i!==null&&this.setIndex(i.clone(e));const r=t.attributes;for(const f in r){const m=r[f];this.setAttribute(f,m.clone(e))}const s=t.morphAttributes;for(const f in s){const m=[],g=s[f];for(let y=0,v=g.length;y<v;y++)m.push(g[y].clone(e));this.morphAttributes[f]=m}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let f=0,m=a.length;f<m;f++){const g=a[f];this.addGroup(g.start,g.count,g.materialIndex)}const l=t.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=t.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const hI=new nn,kp=new p_,wS=new Zs,dI=new ut,CS=new ut,RS=new ut,OS=new ut,iw=new ut,DS=new ut,pI=new ut,NS=new ut;class $r extends ii{constructor(t=new bn,e=new Kd){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(t,e){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;e.fromBufferAttribute(r,t);const l=this.morphTargetInfluences;if(s&&l){DS.set(0,0,0);for(let c=0,f=s.length;c<f;c++){const m=l[c],g=s[c];m!==0&&(iw.fromBufferAttribute(g,t),a?DS.addScaledVector(iw,m):DS.addScaledVector(iw.sub(e),m))}e.add(DS)}return e}raycast(t,e){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),wS.copy(i.boundingSphere),wS.applyMatrix4(s),kp.copy(t.ray).recast(t.near),!(wS.containsPoint(kp.origin)===!1&&(kp.intersectSphere(wS,dI)===null||kp.origin.distanceToSquared(dI)>(t.far-t.near)**2))&&(hI.copy(s).invert(),kp.copy(t.ray).applyMatrix4(hI),!(i.boundingBox!==null&&kp.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(t,e,kp)))}_computeIntersections(t,e,i){let r;const s=this.geometry,a=this.material,l=s.index,c=s.attributes.position,f=s.attributes.uv,m=s.attributes.uv1,g=s.attributes.normal,y=s.groups,v=s.drawRange;if(l!==null)if(Array.isArray(a))for(let S=0,E=y.length;S<E;S++){const T=y[S],x=a[T.materialIndex],R=Math.max(T.start,v.start),D=Math.min(l.count,Math.min(T.start+T.count,v.start+v.count));for(let O=R,N=D;O<N;O+=3){const B=l.getX(O),L=l.getX(O+1),U=l.getX(O+2);r=IS(this,x,t,i,f,m,g,B,L,U),r&&(r.faceIndex=Math.floor(O/3),r.face.materialIndex=T.materialIndex,e.push(r))}}else{const S=Math.max(0,v.start),E=Math.min(l.count,v.start+v.count);for(let T=S,x=E;T<x;T+=3){const R=l.getX(T),D=l.getX(T+1),O=l.getX(T+2);r=IS(this,a,t,i,f,m,g,R,D,O),r&&(r.faceIndex=Math.floor(T/3),e.push(r))}}else if(c!==void 0)if(Array.isArray(a))for(let S=0,E=y.length;S<E;S++){const T=y[S],x=a[T.materialIndex],R=Math.max(T.start,v.start),D=Math.min(c.count,Math.min(T.start+T.count,v.start+v.count));for(let O=R,N=D;O<N;O+=3){const B=O,L=O+1,U=O+2;r=IS(this,x,t,i,f,m,g,B,L,U),r&&(r.faceIndex=Math.floor(O/3),r.face.materialIndex=T.materialIndex,e.push(r))}}else{const S=Math.max(0,v.start),E=Math.min(c.count,v.start+v.count);for(let T=S,x=E;T<x;T+=3){const R=T,D=T+1,O=T+2;r=IS(this,a,t,i,f,m,g,R,D,O),r&&(r.faceIndex=Math.floor(T/3),e.push(r))}}}}function Z8(n,t,e,i,r,s,a,l){let c;if(t.side===Ka?c=i.intersectTriangle(a,s,r,!0,l):c=i.intersectTriangle(r,s,a,t.side===ch,l),c===null)return null;NS.copy(l),NS.applyMatrix4(n.matrixWorld);const f=e.ray.origin.distanceTo(NS);return f<e.near||f>e.far?null:{distance:f,point:NS.clone(),object:n}}function IS(n,t,e,i,r,s,a,l,c,f){n.getVertexPosition(l,CS),n.getVertexPosition(c,RS),n.getVertexPosition(f,OS);const m=Z8(n,t,e,i,CS,RS,OS,pI);if(m){const g=new ut;Oo.getBarycoord(pI,CS,RS,OS,g),r&&(m.uv=Oo.getInterpolatedAttribute(r,l,c,f,g,new oe)),s&&(m.uv1=Oo.getInterpolatedAttribute(s,l,c,f,g,new oe)),a&&(m.normal=Oo.getInterpolatedAttribute(a,l,c,f,g,new ut),m.normal.dot(i.direction)>0&&m.normal.multiplyScalar(-1));const y={a:l,b:c,c:f,normal:new ut,materialIndex:0};Oo.getNormal(CS,RS,OS,y.normal),m.face=y,m.barycoord=g}return m}class km extends bn{constructor(t=1,e=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const l=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const c=[],f=[],m=[],g=[];let y=0,v=0;S("z","y","x",-1,-1,i,e,t,a,s,0),S("z","y","x",1,-1,i,e,-t,a,s,1),S("x","z","y",1,1,t,i,e,r,a,2),S("x","z","y",1,-1,t,i,-e,r,a,3),S("x","y","z",1,-1,t,e,i,r,s,4),S("x","y","z",-1,-1,t,e,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new ze(f,3)),this.setAttribute("normal",new ze(m,3)),this.setAttribute("uv",new ze(g,2));function S(E,T,x,R,D,O,N,B,L,U,I){const w=O/L,V=N/U,G=O/2,k=N/2,st=B/2,it=L+1,Y=U+1;let Z=0,at=0;const ct=new ut;for(let $=0;$<Y;$++){const pt=$*V-k;for(let wt=0;wt<it;wt++){const zt=wt*w-G;ct[E]=zt*R,ct[T]=pt*D,ct[x]=st,f.push(ct.x,ct.y,ct.z),ct[E]=0,ct[T]=0,ct[x]=B>0?1:-1,m.push(ct.x,ct.y,ct.z),g.push(wt/L),g.push(1-$/U),Z+=1}}for(let $=0;$<U;$++)for(let pt=0;pt<L;pt++){const wt=y+pt+it*$,zt=y+pt+it*($+1),nt=y+(pt+1)+it*($+1),lt=y+(pt+1)+it*$;c.push(wt,zt,lt),c.push(zt,nt,lt),at+=6}l.addGroup(v,at,I),v+=at,y+=Z}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new km(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Gy(n){const t={};for(const e in n){t[e]={};for(const i in n[e]){const r=n[e][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][i]=null):t[e][i]=r.clone():Array.isArray(r)?t[e][i]=r.slice():t[e][i]=r}}return t}function qa(n){const t={};for(let e=0;e<n.length;e++){const i=Gy(n[e]);for(const r in i)t[r]=i[r]}return t}function Q8(n){const t=[];for(let e=0;e<n.length;e++)t.push(n[e].clone());return t}function OB(n){const t=n.getRenderTarget();return t===null?n.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Xn.workingColorSpace}const DB={clone:Gy,merge:qa};var J8=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,t9=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ql extends Ra{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=J8,this.fragmentShader=t9,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Gy(t.uniforms),this.uniformsGroups=Q8(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?e.uniforms[r]={type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?e.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?e.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?e.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?e.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?e.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?e.uniforms[r]={type:"m4",value:a.toArray()}:e.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}}class WT extends ii{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new nn,this.projectionMatrix=new nn,this.projectionMatrixInverse=new nn,this.coordinateSystem=Pu}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const md=new ut,mI=new oe,gI=new oe;class Ns extends WT{constructor(t=50,e=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=ky*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(Em*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return ky*2*Math.atan(Math.tan(Em*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,i){md.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(md.x,md.y).multiplyScalar(-t/md.z),md.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(md.x,md.y).multiplyScalar(-t/md.z)}getViewSize(t,e){return this.getViewBounds(t,mI,gI),e.subVectors(gI,mI)}setViewOffset(t,e,i,r,s,a){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(Em*.5*this.fov)/this.zoom,i=2*e,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const c=a.fullWidth,f=a.fullHeight;s+=a.offsetX*r/c,e-=a.offsetY*i/f,r*=a.width/c,i*=a.height/f}const l=this.filmOffset;l!==0&&(s+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,e,e-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Wg=-90,Yg=1;class NB extends ii{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Ns(Wg,Yg,t,e);r.layers=this.layers,this.add(r);const s=new Ns(Wg,Yg,t,e);s.layers=this.layers,this.add(s);const a=new Ns(Wg,Yg,t,e);a.layers=this.layers,this.add(a);const l=new Ns(Wg,Yg,t,e);l.layers=this.layers,this.add(l);const c=new Ns(Wg,Yg,t,e);c.layers=this.layers,this.add(c);const f=new Ns(Wg,Yg,t,e);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[i,r,s,a,l,c]=e;for(const f of e)this.remove(f);if(t===Pu)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(t===Q0)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const f of e)this.add(f),f.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[s,a,l,c,f,m]=this.children,g=t.getRenderTarget(),y=t.getActiveCubeFace(),v=t.getActiveMipmapLevel(),S=t.xr.enabled;t.xr.enabled=!1;const E=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,r),t.render(e,s),t.setRenderTarget(i,1,r),t.render(e,a),t.setRenderTarget(i,2,r),t.render(e,l),t.setRenderTarget(i,3,r),t.render(e,c),t.setRenderTarget(i,4,r),t.render(e,f),i.texture.generateMipmaps=E,t.setRenderTarget(i,5,r),t.render(e,m),t.setRenderTarget(g,y,v),t.xr.enabled=S,i.texture.needsPMREMUpdate=!0}}class Lx extends Fr{constructor(t,e,i,r,s,a,l,c,f,m){t=t!==void 0?t:[],e=e!==void 0?e:fh,super(t,e,i,r,s,a,l,c,f,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class IB extends tf{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const i={width:t,height:t,depth:1},r=[i,i,i,i,i,i];this.texture=new Lx(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:ms}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new km(5,5,5),s=new ql({name:"CubemapFromEquirect",uniforms:Gy(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ka,blending:ah});s.uniforms.tEquirect.value=e;const a=new $r(r,s),l=e.minFilter;return e.minFilter===Gc&&(e.minFilter=ms),new NB(1,10,this).update(t,a),e.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(t,e,i,r){const s=t.getRenderTarget();for(let a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(e,i,r);t.setRenderTarget(s)}}class Md extends ii{constructor(){super(),this.isGroup=!0,this.type="Group"}}const e9={type:"move"};class BE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Md,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Md,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ut,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ut),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Md,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ut,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ut),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let r=null,s=null,a=null;const l=this._targetRay,c=this._grip,f=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(f&&t.hand){a=!0;for(const E of t.hand.values()){const T=e.getJointPose(E,i),x=this._getHandJoint(f,E);T!==null&&(x.matrix.fromArray(T.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=T.radius),x.visible=T!==null}const m=f.joints["index-finger-tip"],g=f.joints["thumb-tip"],y=m.position.distanceTo(g.position),v=.02,S=.005;f.inputState.pinching&&y>v+S?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!f.inputState.pinching&&y<=v-S&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else c!==null&&t.gripSpace&&(s=e.getPose(t.gripSpace,i),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(r=e.getPose(t.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(e9)))}return l!==null&&(l.visible=r!==null),c!==null&&(c.visible=s!==null),f!==null&&(f.visible=a!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const i=new Md;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}}class YT{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ne(t),this.density=e}clone(){return new YT(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class $T{constructor(t,e=1,i=1e3){this.isFog=!0,this.name="",this.color=new Ne(t),this.near=e,this.far=i}clone(){return new $T(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class X2 extends ii{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new dl,this.environmentIntensity=1,this.environmentRotation=new dl,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class KT{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=Z0,this.updateRanges=[],this.version=0,this.uuid=cl()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let r=0,s=this.stride;r<s;r++)this.array[t+r]=e.array[i+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cl()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cl()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ga=new ut;class Im{constructor(t,e,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)Ga.fromBufferAttribute(this,e),Ga.applyMatrix4(t),this.setXYZ(e,Ga.x,Ga.y,Ga.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Ga.fromBufferAttribute(this,e),Ga.applyNormalMatrix(t),this.setXYZ(e,Ga.x,Ga.y,Ga.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Ga.fromBufferAttribute(this,e),Ga.transformDirection(t),this.setXYZ(e,Ga.x,Ga.y,Ga.z);return this}getComponent(t,e){let i=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(i=Xa(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=xn(i,this.array)),this.data.array[t*this.data.stride+this.offset+e]=i,this}setX(t,e){return this.normalized&&(e=xn(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=xn(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=xn(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=xn(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Xa(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Xa(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Xa(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Xa(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=xn(e,this.array),i=xn(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=xn(e,this.array),i=xn(i,this.array),r=xn(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this}setXYZW(t,e,i,r,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=xn(e,this.array),i=xn(i,this.array),r=xn(r,this.array),s=xn(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this.data.array[t+3]=s,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return new wi(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Im(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class W2 extends Ra{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ne(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let $g;const Nv=new ut,Kg=new ut,Zg=new ut,Qg=new oe,Iv=new oe,PB=new nn,PS=new ut,Pv=new ut,LS=new ut,yI=new oe,rw=new oe,_I=new oe;class LB extends ii{constructor(t=new W2){if(super(),this.isSprite=!0,this.type="Sprite",$g===void 0){$g=new bn;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new KT(e,5);$g.setIndex([0,1,2,0,2,3]),$g.setAttribute("position",new Im(i,3,0,!1)),$g.setAttribute("uv",new Im(i,2,3,!1))}this.geometry=$g,this.material=t,this.center=new oe(.5,.5)}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Kg.setFromMatrixScale(this.matrixWorld),PB.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Zg.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Kg.multiplyScalar(-Zg.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const a=this.center;US(PS.set(-.5,-.5,0),Zg,a,Kg,r,s),US(Pv.set(.5,-.5,0),Zg,a,Kg,r,s),US(LS.set(.5,.5,0),Zg,a,Kg,r,s),yI.set(0,0),rw.set(1,0),_I.set(1,1);let l=t.ray.intersectTriangle(PS,Pv,LS,!1,Nv);if(l===null&&(US(Pv.set(-.5,.5,0),Zg,a,Kg,r,s),rw.set(0,1),l=t.ray.intersectTriangle(PS,LS,Pv,!1,Nv),l===null))return;const c=t.ray.origin.distanceTo(Nv);c<t.near||c>t.far||e.push({distance:c,point:Nv.clone(),uv:Oo.getInterpolation(Nv,PS,Pv,LS,yI,rw,_I,new oe),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function US(n,t,e,i,r,s){Qg.subVectors(n,e).addScalar(.5).multiply(i),r!==void 0?(Iv.x=s*Qg.x-r*Qg.y,Iv.y=r*Qg.x+s*Qg.y):Iv.copy(Qg),n.copy(t),n.x+=Iv.x,n.y+=Iv.y,n.applyMatrix4(PB)}const zS=new ut,vI=new ut;class UB extends ii{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let i=0,r=e.length;i<r;i++){const s=e[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,i=0){e=Math.abs(e);const r=this.levels;let s;for(s=0;s<r.length&&!(e<r[s].distance);s++);return r.splice(s,0,{distance:e,hysteresis:i,object:t}),this.add(t),this}removeLevel(t){const e=this.levels;for(let i=0;i<e.length;i++)if(e[i].distance===t){const r=e.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let i,r;for(i=1,r=e.length;i<r;i++){let s=e[i].distance;if(e[i].object.visible&&(s-=s*e[i].hysteresis),t<s)break}return e[i-1].object}return null}raycast(t,e){if(this.levels.length>0){zS.setFromMatrixPosition(this.matrixWorld);const r=t.ray.origin.distanceTo(zS);this.getObjectForDistance(r).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){zS.setFromMatrixPosition(t.matrixWorld),vI.setFromMatrixPosition(this.matrixWorld);const i=zS.distanceTo(vI)/t.zoom;e[0].object.visible=!0;let r,s;for(r=1,s=e.length;r<s;r++){let a=e[r].distance;if(e[r].object.visible&&(a-=a*e[r].hysteresis),i>=a)e[r-1].object.visible=!1,e[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)e[r].object.visible=!1}}toJSON(t){const e=super.toJSON(t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const a=i[r];e.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return e}}const xI=new ut,bI=new ti,SI=new ti,n9=new ut,EI=new nn,BS=new ut,sw=new Zs,TI=new nn,aw=new p_;class zB extends $r{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=WC,this.bindMatrix=new nn,this.bindMatrixInverse=new nn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ks),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,BS),this.boundingBox.expandByPoint(BS)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Zs),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,BS),this.boundingSphere.expandByPoint(BS)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),sw.copy(this.boundingSphere),sw.applyMatrix4(r),t.ray.intersectsSphere(sw)!==!1&&(TI.copy(r).invert(),aw.copy(t.ray).applyMatrix4(TI),!(this.boundingBox!==null&&aw.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,aw)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new ti,e=this.geometry.attributes.skinWeight;for(let i=0,r=e.count;i<r;i++){t.fromBufferAttribute(e,i);const s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===WC?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===fB?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const i=this.skeleton,r=this.geometry;bI.fromBufferAttribute(r.attributes.skinIndex,t),SI.fromBufferAttribute(r.attributes.skinWeight,t),xI.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let s=0;s<4;s++){const a=SI.getComponent(s);if(a!==0){const l=bI.getComponent(s);EI.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),e.addScaledVector(n9.copy(xI).applyMatrix4(EI),a)}}return e.applyMatrix4(this.bindMatrixInverse)}}class Y2 extends ii{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Wc extends Fr{constructor(t=null,e=1,i=1,r,s,a,l,c,f=$s,m=$s,g,y){super(null,a,l,c,f,m,r,s,g,y),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const MI=new nn,i9=new nn;class ZT{constructor(t=[],e=[]){this.uuid=cl(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new nn)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const i=new nn;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const t=this.bones,e=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=t.length;s<a;s++){const l=t[s]?t[s].matrixWorld:i9;MI.multiplyMatrices(l,e[s]),MI.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new ZT(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const i=new Wc(e,t,t,Ta,Do);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){const r=this.bones[e];if(r.name===t)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,r=t.bones.length;i<r;i++){const s=t.bones[i];let a=e[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new Y2),this.bones.push(a),this.boneInverses.push(new nn().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,i=this.boneInverses;for(let r=0,s=e.length;r<s;r++){const a=e[r];t.bones.push(a.uuid);const l=i[r];t.boneInverses.push(l.toArray())}return t}}class qy extends wi{constructor(t,e,i,r=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Jg=new nn,AI=new nn,VS=[],wI=new Ks,r9=new nn,Lv=new $r,Uv=new Zs;class BB extends $r{constructor(t,e,i){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new qy(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,r9)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new Ks),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,Jg),wI.copy(t.boundingBox).applyMatrix4(Jg),this.boundingBox.union(wI)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new Zs),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,Jg),Uv.copy(t.boundingSphere).applyMatrix4(Jg),this.boundingSphere.union(Uv)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const i=e.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,a=t*s+1;for(let l=0;l<i.length;l++)i[l]=r[a+l]}raycast(t,e){const i=this.matrixWorld,r=this.count;if(Lv.geometry=this.geometry,Lv.material=this.material,Lv.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Uv.copy(this.boundingSphere),Uv.applyMatrix4(i),t.ray.intersectsSphere(Uv)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Jg),AI.multiplyMatrices(i,Jg),Lv.matrixWorld=AI,Lv.raycast(t,VS);for(let a=0,l=VS.length;a<l;a++){const c=VS[a];c.instanceId=s,c.object=this,e.push(c)}VS.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new qy(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const i=e.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Wc(new Float32Array(r*this.count),r,this.count,kT,Do));const s=this.morphTexture.source.data.data;let a=0;for(let f=0;f<i.length;f++)a+=i[f];const l=this.geometry.morphTargetsRelative?1:1-a,c=r*t;s[c]=l,s.set(i,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const ow=new ut,s9=new ut,a9=new _n;class xd{constructor(t=new ut(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const r=ow.subVectors(i,e).cross(s9.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const i=t.delta(ow),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(t.start).addScaledVector(i,s)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||a9.getNormalMatrix(t),r=this.coplanarPoint(ow).applyMatrix4(t),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Hp=new Zs,FS=new ut;class Ux{constructor(t=new xd,e=new xd,i=new xd,r=new xd,s=new xd,a=new xd){this.planes=[t,e,i,r,s,a]}set(t,e,i,r,s,a){const l=this.planes;return l[0].copy(t),l[1].copy(e),l[2].copy(i),l[3].copy(r),l[4].copy(s),l[5].copy(a),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=Pu){const i=this.planes,r=t.elements,s=r[0],a=r[1],l=r[2],c=r[3],f=r[4],m=r[5],g=r[6],y=r[7],v=r[8],S=r[9],E=r[10],T=r[11],x=r[12],R=r[13],D=r[14],O=r[15];if(i[0].setComponents(c-s,y-f,T-v,O-x).normalize(),i[1].setComponents(c+s,y+f,T+v,O+x).normalize(),i[2].setComponents(c+a,y+m,T+S,O+R).normalize(),i[3].setComponents(c-a,y-m,T-S,O-R).normalize(),i[4].setComponents(c-l,y-g,T-E,O-D).normalize(),e===Pu)i[5].setComponents(c+l,y+g,T+E,O+D).normalize();else if(e===Q0)i[5].setComponents(l,g,E,D).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Hp.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),Hp.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Hp)}intersectsSprite(t){return Hp.center.set(0,0,0),Hp.radius=.7071067811865476,Hp.applyMatrix4(t.matrixWorld),this.intersectsSphere(Hp)}intersectsSphere(t){const e=this.planes,i=t.center,r=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const r=e[i];if(FS.x=r.normal.x>0?t.max.x:t.min.x,FS.y=r.normal.y>0?t.max.y:t.min.y,FS.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(FS)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function lw(n,t){return n-t}function o9(n,t){return n.z-t.z}function l9(n,t){return t.z-n.z}class u9{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,i,r){const s=this.pool,a=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const l=s[this.index];a.push(l),this.index++,l.start=t,l.count=e,l.z=i,l.index=r}reset(){this.list.length=0,this.index=0}}const Eo=new nn,c9=new Ne(1,1,1),uw=new Ux,kS=new Ks,Gp=new Zs,zv=new ut,CI=new ut,f9=new ut,cw=new u9,ga=new $r,HS=[];function h9(n,t,e=0){const i=t.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==t.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let a=0;a<i;a++)t.setComponent(s+e,a,n.getComponent(s,a))}else t.array.set(n.array,e*i);t.needsUpdate=!0}function qp(n,t){if(n.constructor!==t.constructor){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++)t[i]=n[i]}else{const e=Math.min(n.length,t.length);t.set(new n.constructor(n.buffer,0,e))}}class VB extends $r{constructor(t,e,i=e*2,r){super(new bn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4),i=new Wc(e,t,t,Ta,Do);this._matricesTexture=i}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),i=new Wc(e,t,t,Ix,hh);this._indirectTexture=i}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),i=new Wc(e,t,t,Ta,Do);i.colorSpace=Xn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(t){const e=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in t.attributes){const a=t.getAttribute(s),{array:l,itemSize:c,normalized:f}=a,m=new l.constructor(i*c),g=new wi(m,c,f);e.setAttribute(s,g)}if(t.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);e.setIndex(new wi(s,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in e.attributes){if(!t.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=t.getAttribute(i),s=e.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ks);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let i=0,r=e.length;i<r;i++){if(e[i].active===!1)continue;const s=e[i].geometryIndex;this.getMatrixAt(i,Eo),this.getBoundingBoxAt(s,kS).applyMatrix4(Eo),t.union(kS)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Zs);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let i=0,r=e.length;i<r;i++){if(e[i].active===!1)continue;const s=e[i].geometryIndex;this.getMatrixAt(i,Eo),this.getBoundingSphereAt(s,Gp).applyMatrix4(Eo),t.union(Gp)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:t};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(lw),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;Eo.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const a=this._colorsTexture;return a&&(c9.toArray(a.image.data,r*4),a.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(t,e=-1,i=-1){this._initializeGeometry(t),this._validateGeometry(t);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=e===-1?t.getAttribute("position").count:e;const a=t.getIndex();if(a!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?a.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(lw),c=this._availableGeometryIds.shift(),s[c]=r):(c=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(c,t),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,c}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),a=e.getIndex(),l=this._geometryInfo[t];if(r&&a.count>l.reservedIndexCount||e.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=l.vertexStart,f=l.reservedVertexCount;l.vertexCount=e.getAttribute("position").count;for(const m in i.attributes){const g=e.getAttribute(m),y=i.getAttribute(m);h9(g,y,c);const v=g.itemSize;for(let S=g.count,E=f;S<E;S++){const T=c+S;for(let x=0;x<v;x++)y.setComponent(T,x,0)}y.needsUpdate=!0,y.addUpdateRange(c*v,f*v)}if(r){const m=l.indexStart,g=l.reservedIndexCount;l.indexCount=e.getIndex().count;for(let y=0;y<a.count;y++)s.setX(m+y,c+a.getX(y));for(let y=a.count,v=g;y<v;y++)s.setX(m+y,c);s.needsUpdate=!0,s.addUpdateRange(m,l.reservedIndexCount)}return l.start=r?l.indexStart:l.vertexStart,l.count=r?l.indexCount:l.vertexCount,l.boundingBox=null,e.boundingBox!==null&&(l.boundingBox=e.boundingBox.clone()),l.boundingSphere=null,e.boundingSphere!==null&&(l.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||e[t].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].active&&i[r].geometryIndex===t&&this.deleteInstance(r);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const i=this._geometryInfo,r=i.map((a,l)=>l).sort((a,l)=>i[a].vertexStart-i[l].vertexStart),s=this.geometry;for(let a=0,l=i.length;a<l;a++){const c=r[a],f=i[c];if(f.active!==!1){if(s.index!==null){if(f.indexStart!==e){const{indexStart:m,vertexStart:g,reservedIndexCount:y}=f,v=s.index,S=v.array,E=t-g;for(let T=m;T<m+y;T++)S[T]=S[T]+E;v.array.copyWithin(e,m,m+y),v.addUpdateRange(e,y),f.indexStart=e}e+=f.reservedIndexCount}if(f.vertexStart!==t){const{vertexStart:m,reservedVertexCount:g}=f,y=s.attributes;for(const v in y){const S=y[v],{array:E,itemSize:T}=S;E.copyWithin(t*T,m*T,(m+g)*T),S.addUpdateRange(t*T,g*T)}f.vertexStart=t}t+=f.reservedVertexCount,f.start=s.index?f.indexStart:f.vertexStart,this._nextIndexStart=s.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[t];if(r.boundingBox===null){const s=new Ks,a=i.index,l=i.attributes.position;for(let c=r.start,f=r.start+r.count;c<f;c++){let m=c;a&&(m=a.getX(m)),s.expandByPoint(zv.fromBufferAttribute(l,m))}r.boundingBox=s}return e.copy(r.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[t];if(r.boundingSphere===null){const s=new Zs;this.getBoundingBoxAt(t,kS),kS.getCenter(s.center);const a=i.index,l=i.attributes.position;let c=0;for(let f=r.start,m=r.start+r.count;f<m;f++){let g=f;a&&(g=a.getX(g)),zv.fromBufferAttribute(l,g),c=Math.max(c,s.center.distanceToSquared(zv))}s.radius=Math.sqrt(c),r.boundingSphere=s}return e.copy(r.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const i=this._matricesTexture,r=this._matricesTexture.image.data;return e.toArray(r,t*16),i.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,t*16)}setColorAt(t,e){return this.validateInstanceId(t),this._colorsTexture===null&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,t*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,t*4)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e?this:(this._instanceInfo[t].visible=e,this._visibilityChanged=!0,this)}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const i=this._geometryInfo[t];return e.vertexStart=i.vertexStart,e.vertexCount=i.vertexCount,e.reservedVertexCount=i.reservedVertexCount,e.indexStart=i.indexStart,e.indexCount=i.indexCount,e.reservedIndexCount=i.reservedIndexCount,e.start=i.start,e.count=i.count,e}setInstanceCount(t){const e=this._availableInstanceIds,i=this._instanceInfo;for(e.sort(lw);e[e.length-1]===i.length;)i.pop(),e.pop();if(t<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const r=new Int32Array(t),s=new Int32Array(t);qp(this._multiDrawCounts,r),qp(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=t;const a=this._indirectTexture,l=this._matricesTexture,c=this._colorsTexture;a.dispose(),this._initIndirectTexture(),qp(a.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),qp(l.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),qp(c.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const i=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...i.map(l=>l.vertexStart+l.reservedVertexCount))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(c=>c.indexStart+c.reservedIndexCount))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new bn,this._initializeGeometry(s));const a=this.geometry;s.index&&qp(s.index.array,a.index.array);for(const l in s.attributes)qp(s.attributes[l].array,a.attributes[l].array)}raycast(t,e){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,a=this.geometry;ga.material=this.material,ga.geometry.index=a.index,ga.geometry.attributes=a.attributes,ga.geometry.boundingBox===null&&(ga.geometry.boundingBox=new Ks),ga.geometry.boundingSphere===null&&(ga.geometry.boundingSphere=new Zs);for(let l=0,c=i.length;l<c;l++){if(!i[l].visible||!i[l].active)continue;const f=i[l].geometryIndex,m=r[f];ga.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(l,ga.matrixWorld).premultiply(s),this.getBoundingBoxAt(f,ga.geometry.boundingBox),this.getBoundingSphereAt(f,ga.geometry.boundingSphere),ga.raycast(t,HS);for(let g=0,y=HS.length;g<y;g++){const v=HS[g];v.object=this,v.batchId=l,e.push(v)}HS.length=0}ga.material=null,ga.geometry.index=null,ga.geometry.attributes={},ga.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox!==null?e.boundingBox.clone():null,boundingSphere:e.boundingSphere!==null?e.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(e=>({...e})),this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._geometryCount=t._geometryCount,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(t,e,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=r.getIndex(),l=a===null?1:a.array.BYTES_PER_ELEMENT,c=this._instanceInfo,f=this._multiDrawStarts,m=this._multiDrawCounts,g=this._geometryInfo,y=this.perObjectFrustumCulled,v=this._indirectTexture,S=v.image.data;y&&(Eo.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),uw.setFromProjectionMatrix(Eo,t.coordinateSystem));let E=0;if(this.sortObjects){Eo.copy(this.matrixWorld).invert(),zv.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Eo),CI.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Eo);for(let R=0,D=c.length;R<D;R++)if(c[R].visible&&c[R].active){const O=c[R].geometryIndex;this.getMatrixAt(R,Eo),this.getBoundingSphereAt(O,Gp).applyMatrix4(Eo);let N=!1;if(y&&(N=!uw.intersectsSphere(Gp)),!N){const B=g[O],L=f9.subVectors(Gp.center,zv).dot(CI);cw.push(B.start,B.count,L,R)}}const T=cw.list,x=this.customSort;x===null?T.sort(s.transparent?l9:o9):x.call(this,T,i);for(let R=0,D=T.length;R<D;R++){const O=T[R];f[E]=O.start*l,m[E]=O.count,S[E]=O.index,E++}cw.reset()}else for(let T=0,x=c.length;T<x;T++)if(c[T].visible&&c[T].active){const R=c[T].geometryIndex;let D=!1;if(y&&(this.getMatrixAt(T,Eo),this.getBoundingSphereAt(R,Gp).applyMatrix4(Eo),D=!uw.intersectsSphere(Gp)),!D){const O=g[R];f[E]=O.start*l,m[E]=O.count,S[E]=T,E++}}v.needsUpdate=!0,this._multiDrawCount=E,this._visibilityChanged=!1}onBeforeShadow(t,e,i,r,s,a){this.onBeforeRender(t,null,r,s,a)}}class Oa extends Ra{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ne(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const F1=new ut,k1=new ut,RI=new nn,Bv=new p_,GS=new Zs,fw=new ut,OI=new ut;class dh extends ii{constructor(t=new bn,e=new Oa){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[0];for(let r=1,s=e.count;r<s;r++)F1.fromBufferAttribute(e,r-1),k1.fromBufferAttribute(e,r),i[r]=i[r-1],i[r]+=F1.distanceTo(k1);t.setAttribute("lineDistance",new ze(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const i=this.geometry,r=this.matrixWorld,s=t.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),GS.copy(i.boundingSphere),GS.applyMatrix4(r),GS.radius+=s,t.ray.intersectsSphere(GS)===!1)return;RI.copy(r).invert(),Bv.copy(t.ray).applyMatrix4(RI);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,f=this.isLineSegments?2:1,m=i.index,y=i.attributes.position;if(m!==null){const v=Math.max(0,a.start),S=Math.min(m.count,a.start+a.count);for(let E=v,T=S-1;E<T;E+=f){const x=m.getX(E),R=m.getX(E+1),D=qS(this,t,Bv,c,x,R,E);D&&e.push(D)}if(this.isLineLoop){const E=m.getX(S-1),T=m.getX(v),x=qS(this,t,Bv,c,E,T,S-1);x&&e.push(x)}}else{const v=Math.max(0,a.start),S=Math.min(y.count,a.start+a.count);for(let E=v,T=S-1;E<T;E+=f){const x=qS(this,t,Bv,c,E,E+1,E);x&&e.push(x)}if(this.isLineLoop){const E=qS(this,t,Bv,c,S-1,v,S-1);E&&e.push(E)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function qS(n,t,e,i,r,s,a){const l=n.geometry.attributes.position;if(F1.fromBufferAttribute(l,r),k1.fromBufferAttribute(l,s),e.distanceSqToSegment(F1,k1,fw,OI)>i)return;fw.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(fw);if(!(f<t.near||f>t.far))return{distance:f,point:OI.clone().applyMatrix4(n.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:n}}const DI=new ut,NI=new ut;class af extends dh{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[];for(let r=0,s=e.count;r<s;r+=2)DI.fromBufferAttribute(e,r),NI.fromBufferAttribute(e,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+DI.distanceTo(NI);t.setAttribute("lineDistance",new ze(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class FB extends dh{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class $2 extends Ra{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ne(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const II=new nn,KC=new p_,jS=new Zs,XS=new ut;class kB extends ii{constructor(t=new bn,e=new $2){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const i=this.geometry,r=this.matrixWorld,s=t.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),jS.copy(i.boundingSphere),jS.applyMatrix4(r),jS.radius+=s,t.ray.intersectsSphere(jS)===!1)return;II.copy(r).invert(),KC.copy(t.ray).applyMatrix4(II);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,f=i.index,g=i.attributes.position;if(f!==null){const y=Math.max(0,a.start),v=Math.min(f.count,a.start+a.count);for(let S=y,E=v;S<E;S++){const T=f.getX(S);XS.fromBufferAttribute(g,T),PI(XS,T,c,r,t,e,this)}}else{const y=Math.max(0,a.start),v=Math.min(g.count,a.start+a.count);for(let S=y,E=v;S<E;S++)XS.fromBufferAttribute(g,S),PI(XS,S,c,r,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function PI(n,t,e,i,r,s,a){const l=KC.distanceSqToPoint(n);if(l<e){const c=new ut;KC.closestPointToPoint(n,c),c.applyMatrix4(i);const f=r.ray.origin.distanceTo(c);if(f<r.near||f>r.far)return;s.push({distance:f,distanceToRay:Math.sqrt(l),point:c,index:t,face:null,faceIndex:null,barycoord:null,object:a})}}class HB extends Fr{constructor(t,e,i,r,s,a,l,c,f){super(t,e,i,r,s,a,l,c,f),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:ms,this.magFilter=s!==void 0?s:ms,this.generateMipmaps=!1;const m=this;function g(){m.needsUpdate=!0,t.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class d9 extends HB{constructor(t,e,i,r,s,a,l,c){super({},t,e,i,r,s,a,l,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}}class p9 extends Fr{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=$s,this.minFilter=$s,this.generateMipmaps=!1,this.needsUpdate=!0}}class QT extends Fr{constructor(t,e,i,r,s,a,l,c,f,m,g,y){super(null,a,l,c,f,m,r,s,g,y),this.isCompressedTexture=!0,this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class m9 extends QT{constructor(t,e,i,r,s,a){super(t,e,i,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Hl,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class g9 extends QT{constructor(t,e,i){super(void 0,t[0].width,t[0].height,e,i,fh),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class y9 extends Fr{constructor(t,e,i,r,s,a,l,c,f){super(t,e,i,r,s,a,l,c,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class K2 extends Fr{constructor(t,e,i,r,s,a,l,c,f,m=Sm){if(m!==Sm&&m!==Nm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&m===Sm&&(i=hh),i===void 0&&m===Nm&&(i=Dm),super(null,r,s,a,l,c,m,i,f),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=l!==void 0?l:$s,this.minFilter=c!==void 0?c:$s,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new Td(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}class Fu{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(t,e){const i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let i,r=this.getPoint(0),s=0;e.push(0);for(let a=1;a<=t;a++)i=this.getPoint(a/t),s+=i.distanceTo(r),e.push(s),r=i;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e=null){const i=this.getLengths();let r=0;const s=i.length;let a;e?a=e:a=t*i[s-1];let l=0,c=s-1,f;for(;l<=c;)if(r=Math.floor(l+(c-l)/2),f=i[r]-a,f<0)l=r+1;else if(f>0)c=r-1;else{c=r;break}if(r=c,i[r]===a)return r/(s-1);const m=i[r],y=i[r+1]-m,v=(a-m)/y;return(r+v)/(s-1)}getTangent(t,e){let r=t-1e-4,s=t+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),l=this.getPoint(s),c=e||(a.isVector2?new oe:new ut);return c.copy(l).sub(a).normalize(),c}getTangentAt(t,e){const i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e=!1){const i=new ut,r=[],s=[],a=[],l=new ut,c=new nn;for(let v=0;v<=t;v++){const S=v/t;r[v]=this.getTangentAt(S,new ut)}s[0]=new ut,a[0]=new ut;let f=Number.MAX_VALUE;const m=Math.abs(r[0].x),g=Math.abs(r[0].y),y=Math.abs(r[0].z);m<=f&&(f=m,i.set(1,0,0)),g<=f&&(f=g,i.set(0,1,0)),y<=f&&i.set(0,0,1),l.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],l),a[0].crossVectors(r[0],s[0]);for(let v=1;v<=t;v++){if(s[v]=s[v-1].clone(),a[v]=a[v-1].clone(),l.crossVectors(r[v-1],r[v]),l.length()>Number.EPSILON){l.normalize();const S=Math.acos(mn(r[v-1].dot(r[v]),-1,1));s[v].applyMatrix4(c.makeRotationAxis(l,S))}a[v].crossVectors(r[v],s[v])}if(e===!0){let v=Math.acos(mn(s[0].dot(s[t]),-1,1));v/=t,r[0].dot(l.crossVectors(s[0],s[t]))>0&&(v=-v);for(let S=1;S<=t;S++)s[S].applyMatrix4(c.makeRotationAxis(r[S],v*S)),a[S].crossVectors(r[S],s[S])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class JT extends Fu{constructor(t=0,e=0,i=1,r=1,s=0,a=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=l,this.aRotation=c}getPoint(t,e=new oe){const i=e,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const l=this.aStartAngle+t*s;let c=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const m=Math.cos(this.aRotation),g=Math.sin(this.aRotation),y=c-this.aX,v=f-this.aY;c=y*m-v*g+this.aX,f=y*g+v*m+this.aY}return i.set(c,f)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class GB extends JT{constructor(t,e,i,r,s,a){super(t,e,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function Z2(){let n=0,t=0,e=0,i=0;function r(s,a,l,c){n=s,t=l,e=-3*s+3*a-2*l-c,i=2*s-2*a+l+c}return{initCatmullRom:function(s,a,l,c,f){r(a,l,f*(l-s),f*(c-a))},initNonuniformCatmullRom:function(s,a,l,c,f,m,g){let y=(a-s)/f-(l-s)/(f+m)+(l-a)/m,v=(l-a)/m-(c-a)/(m+g)+(c-l)/g;y*=m,v*=m,r(a,l,y,v)},calc:function(s){const a=s*s,l=a*s;return n+t*s+e*a+i*l}}}const WS=new ut,hw=new Z2,dw=new Z2,pw=new Z2;class qB extends Fu{constructor(t=[],e=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=i,this.tension=r}getPoint(t,e=new ut){const i=e,r=this.points,s=r.length,a=(s-(this.closed?0:1))*t;let l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:c===0&&l===s-1&&(l=s-2,c=1);let f,m;this.closed||l>0?f=r[(l-1)%s]:(WS.subVectors(r[0],r[1]).add(r[0]),f=WS);const g=r[l%s],y=r[(l+1)%s];if(this.closed||l+2<s?m=r[(l+2)%s]:(WS.subVectors(r[s-1],r[s-2]).add(r[s-1]),m=WS),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let S=Math.pow(f.distanceToSquared(g),v),E=Math.pow(g.distanceToSquared(y),v),T=Math.pow(y.distanceToSquared(m),v);E<1e-4&&(E=1),S<1e-4&&(S=E),T<1e-4&&(T=E),hw.initNonuniformCatmullRom(f.x,g.x,y.x,m.x,S,E,T),dw.initNonuniformCatmullRom(f.y,g.y,y.y,m.y,S,E,T),pw.initNonuniformCatmullRom(f.z,g.z,y.z,m.z,S,E,T)}else this.curveType==="catmullrom"&&(hw.initCatmullRom(f.x,g.x,y.x,m.x,this.tension),dw.initCatmullRom(f.y,g.y,y.y,m.y,this.tension),pw.initCatmullRom(f.z,g.z,y.z,m.z,this.tension));return i.set(hw.calc(c),dw.calc(c),pw.calc(c)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const r=t.points[e];this.points.push(new ut().fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function LI(n,t,e,i,r){const s=(i-t)*.5,a=(r-e)*.5,l=n*n,c=n*l;return(2*e-2*i+s+a)*c+(-3*e+3*i-2*s-a)*l+s*n+e}function _9(n,t){const e=1-n;return e*e*t}function v9(n,t){return 2*(1-n)*n*t}function x9(n,t){return n*n*t}function C0(n,t,e,i){return _9(n,t)+v9(n,e)+x9(n,i)}function b9(n,t){const e=1-n;return e*e*e*t}function S9(n,t){const e=1-n;return 3*e*e*n*t}function E9(n,t){return 3*(1-n)*n*n*t}function T9(n,t){return n*n*n*t}function R0(n,t,e,i,r){return b9(n,t)+S9(n,e)+E9(n,i)+T9(n,r)}class Q2 extends Fu{constructor(t=new oe,e=new oe,i=new oe,r=new oe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=i,this.v3=r}getPoint(t,e=new oe){const i=e,r=this.v0,s=this.v1,a=this.v2,l=this.v3;return i.set(R0(t,r.x,s.x,a.x,l.x),R0(t,r.y,s.y,a.y,l.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class J2 extends Fu{constructor(t=new ut,e=new ut,i=new ut,r=new ut){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=i,this.v3=r}getPoint(t,e=new ut){const i=e,r=this.v0,s=this.v1,a=this.v2,l=this.v3;return i.set(R0(t,r.x,s.x,a.x,l.x),R0(t,r.y,s.y,a.y,l.y),R0(t,r.z,s.z,a.z,l.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class tO extends Fu{constructor(t=new oe,e=new oe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new oe){const i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new oe){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class jB extends Fu{constructor(t=new ut,e=new ut){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new ut){const i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new ut){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class eO extends Fu{constructor(t=new oe,e=new oe,i=new oe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new oe){const i=e,r=this.v0,s=this.v1,a=this.v2;return i.set(C0(t,r.x,s.x,a.x),C0(t,r.y,s.y,a.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class tM extends Fu{constructor(t=new ut,e=new ut,i=new ut){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new ut){const i=e,r=this.v0,s=this.v1,a=this.v2;return i.set(C0(t,r.x,s.x,a.x),C0(t,r.y,s.y,a.y),C0(t,r.z,s.z,a.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class nO extends Fu{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new oe){const i=e,r=this.points,s=(r.length-1)*t,a=Math.floor(s),l=s-a,c=r[a===0?a:a-1],f=r[a],m=r[a>r.length-2?r.length-1:a+1],g=r[a>r.length-3?r.length-1:a+2];return i.set(LI(l,c.x,f.x,m.x,g.x),LI(l,c.y,f.y,m.y,g.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const r=t.points[e];this.points.push(r.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const r=this.points[e];t.points.push(r.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const r=t.points[e];this.points.push(new oe().fromArray(r))}return this}}var H1=Object.freeze({__proto__:null,ArcCurve:GB,CatmullRomCurve3:qB,CubicBezierCurve:Q2,CubicBezierCurve3:J2,EllipseCurve:JT,LineCurve:tO,LineCurve3:jB,QuadraticBezierCurve:eO,QuadraticBezierCurve3:tM,SplineCurve:nO});class XB extends Fu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const i=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new H1[i](e,t))}return this}getPoint(t,e){const i=t*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,l=this.curves[s],c=l.getLength(),f=c===0?0:1-a/c;return l.getPointAt(f,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let i=0,r=this.curves.length;i<r;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],l=a.isEllipseCurve?t*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,c=a.getPoints(l);for(let f=0;f<c.length;f++){const m=c[f];i&&i.equals(m)||(e.push(m),i=m)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++){const r=this.curves[e];t.curves.push(r.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const r=t.curves[e];this.curves.push(new H1[r.type]().fromJSON(r))}return this}}class tx extends XB{constructor(t){super(),this.type="Path",this.currentPoint=new oe,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const i=new tO(this.currentPoint.clone(),new oe(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,i,r){const s=new eO(this.currentPoint.clone(),new oe(t,e),new oe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(t,e,i,r,s,a){const l=new Q2(this.currentPoint.clone(),new oe(t,e),new oe(i,r),new oe(s,a));return this.curves.push(l),this.currentPoint.set(s,a),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),i=new nO(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,i,r,s,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(t+l,e+c,i,r,s,a),this}absarc(t,e,i,r,s,a){return this.absellipse(t,e,i,i,r,s,a),this}ellipse(t,e,i,r,s,a,l,c){const f=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(t+f,e+m,i,r,s,a,l,c),this}absellipse(t,e,i,r,s,a,l,c){const f=new JT(t,e,i,r,s,a,l,c);if(this.curves.length>0){const g=f.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(f);const m=f.getPoint(1);return this.currentPoint.copy(m),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class zx extends bn{constructor(t=[new oe(0,-.5),new oe(.5,0),new oe(0,.5)],e=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:r},e=Math.floor(e),r=mn(r,0,Math.PI*2);const s=[],a=[],l=[],c=[],f=[],m=1/e,g=new ut,y=new oe,v=new ut,S=new ut,E=new ut;let T=0,x=0;for(let R=0;R<=t.length-1;R++)switch(R){case 0:T=t[R+1].x-t[R].x,x=t[R+1].y-t[R].y,v.x=x*1,v.y=-T,v.z=x*0,E.copy(v),v.normalize(),c.push(v.x,v.y,v.z);break;case t.length-1:c.push(E.x,E.y,E.z);break;default:T=t[R+1].x-t[R].x,x=t[R+1].y-t[R].y,v.x=x*1,v.y=-T,v.z=x*0,S.copy(v),v.x+=E.x,v.y+=E.y,v.z+=E.z,v.normalize(),c.push(v.x,v.y,v.z),E.copy(S)}for(let R=0;R<=e;R++){const D=i+R*m*r,O=Math.sin(D),N=Math.cos(D);for(let B=0;B<=t.length-1;B++){g.x=t[B].x*O,g.y=t[B].y,g.z=t[B].x*N,a.push(g.x,g.y,g.z),y.x=R/e,y.y=B/(t.length-1),l.push(y.x,y.y);const L=c[3*B+0]*O,U=c[3*B+1],I=c[3*B+0]*N;f.push(L,U,I)}}for(let R=0;R<e;R++)for(let D=0;D<t.length-1;D++){const O=D+R*t.length,N=O,B=O+t.length,L=O+t.length+1,U=O+1;s.push(N,B,U),s.push(L,U,B)}this.setIndex(s),this.setAttribute("position",new ze(a,3)),this.setAttribute("uv",new ze(l,2)),this.setAttribute("normal",new ze(f,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new zx(t.points,t.segments,t.phiStart,t.phiLength)}}class eM extends zx{constructor(t=1,e=1,i=4,r=8){const s=new tx;s.absarc(0,-e/2,t,Math.PI*1.5,0),s.absarc(0,e/2,t,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:t,length:e,capSegments:i,radialSegments:r}}static fromJSON(t){return new eM(t.radius,t.length,t.capSegments,t.radialSegments)}}class nM extends bn{constructor(t=1,e=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:r},e=Math.max(3,e);const s=[],a=[],l=[],c=[],f=new ut,m=new oe;a.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let g=0,y=3;g<=e;g++,y+=3){const v=i+g/e*r;f.x=t*Math.cos(v),f.y=t*Math.sin(v),a.push(f.x,f.y,f.z),l.push(0,0,1),m.x=(a[y]/t+1)/2,m.y=(a[y+1]/t+1)/2,c.push(m.x,m.y)}for(let g=1;g<=e;g++)s.push(g,g+1,0);this.setIndex(s),this.setAttribute("position",new ze(a,3)),this.setAttribute("normal",new ze(l,3)),this.setAttribute("uv",new ze(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new nM(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class Hm extends bn{constructor(t=1,e=1,i=1,r=32,s=1,a=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:l,thetaLength:c};const f=this;r=Math.floor(r),s=Math.floor(s);const m=[],g=[],y=[],v=[];let S=0;const E=[],T=i/2;let x=0;R(),a===!1&&(t>0&&D(!0),e>0&&D(!1)),this.setIndex(m),this.setAttribute("position",new ze(g,3)),this.setAttribute("normal",new ze(y,3)),this.setAttribute("uv",new ze(v,2));function R(){const O=new ut,N=new ut;let B=0;const L=(e-t)/i;for(let U=0;U<=s;U++){const I=[],w=U/s,V=w*(e-t)+t;for(let G=0;G<=r;G++){const k=G/r,st=k*c+l,it=Math.sin(st),Y=Math.cos(st);N.x=V*it,N.y=-w*i+T,N.z=V*Y,g.push(N.x,N.y,N.z),O.set(it,L,Y).normalize(),y.push(O.x,O.y,O.z),v.push(k,1-w),I.push(S++)}E.push(I)}for(let U=0;U<r;U++)for(let I=0;I<s;I++){const w=E[I][U],V=E[I+1][U],G=E[I+1][U+1],k=E[I][U+1];(t>0||I!==0)&&(m.push(w,V,k),B+=3),(e>0||I!==s-1)&&(m.push(V,G,k),B+=3)}f.addGroup(x,B,0),x+=B}function D(O){const N=S,B=new oe,L=new ut;let U=0;const I=O===!0?t:e,w=O===!0?1:-1;for(let G=1;G<=r;G++)g.push(0,T*w,0),y.push(0,w,0),v.push(.5,.5),S++;const V=S;for(let G=0;G<=r;G++){const st=G/r*c+l,it=Math.cos(st),Y=Math.sin(st);L.x=I*Y,L.y=T*w,L.z=I*it,g.push(L.x,L.y,L.z),y.push(0,w,0),B.x=it*.5+.5,B.y=Y*.5*w+.5,v.push(B.x,B.y),S++}for(let G=0;G<r;G++){const k=N+G,st=V+G;O===!0?m.push(st,st+1,k):m.push(st+1,st,k),U+=3}f.addGroup(x,U,O===!0?1:2),x+=U}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Hm(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Bx extends Hm{constructor(t=1,e=1,i=32,r=1,s=!1,a=0,l=Math.PI*2){super(0,t,e,i,r,s,a,l),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:l}}static fromJSON(t){return new Bx(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Zd extends bn{constructor(t=[],e=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:r};const s=[],a=[];l(r),f(i),m(),this.setAttribute("position",new ze(s,3)),this.setAttribute("normal",new ze(s.slice(),3)),this.setAttribute("uv",new ze(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(R){const D=new ut,O=new ut,N=new ut;for(let B=0;B<e.length;B+=3)v(e[B+0],D),v(e[B+1],O),v(e[B+2],N),c(D,O,N,R)}function c(R,D,O,N){const B=N+1,L=[];for(let U=0;U<=B;U++){L[U]=[];const I=R.clone().lerp(O,U/B),w=D.clone().lerp(O,U/B),V=B-U;for(let G=0;G<=V;G++)G===0&&U===B?L[U][G]=I:L[U][G]=I.clone().lerp(w,G/V)}for(let U=0;U<B;U++)for(let I=0;I<2*(B-U)-1;I++){const w=Math.floor(I/2);I%2===0?(y(L[U][w+1]),y(L[U+1][w]),y(L[U][w])):(y(L[U][w+1]),y(L[U+1][w+1]),y(L[U+1][w]))}}function f(R){const D=new ut;for(let O=0;O<s.length;O+=3)D.x=s[O+0],D.y=s[O+1],D.z=s[O+2],D.normalize().multiplyScalar(R),s[O+0]=D.x,s[O+1]=D.y,s[O+2]=D.z}function m(){const R=new ut;for(let D=0;D<s.length;D+=3){R.x=s[D+0],R.y=s[D+1],R.z=s[D+2];const O=T(R)/2/Math.PI+.5,N=x(R)/Math.PI+.5;a.push(O,1-N)}S(),g()}function g(){for(let R=0;R<a.length;R+=6){const D=a[R+0],O=a[R+2],N=a[R+4],B=Math.max(D,O,N),L=Math.min(D,O,N);B>.9&&L<.1&&(D<.2&&(a[R+0]+=1),O<.2&&(a[R+2]+=1),N<.2&&(a[R+4]+=1))}}function y(R){s.push(R.x,R.y,R.z)}function v(R,D){const O=R*3;D.x=t[O+0],D.y=t[O+1],D.z=t[O+2]}function S(){const R=new ut,D=new ut,O=new ut,N=new ut,B=new oe,L=new oe,U=new oe;for(let I=0,w=0;I<s.length;I+=9,w+=6){R.set(s[I+0],s[I+1],s[I+2]),D.set(s[I+3],s[I+4],s[I+5]),O.set(s[I+6],s[I+7],s[I+8]),B.set(a[w+0],a[w+1]),L.set(a[w+2],a[w+3]),U.set(a[w+4],a[w+5]),N.copy(R).add(D).add(O).divideScalar(3);const V=T(N);E(B,w+0,R,V),E(L,w+2,D,V),E(U,w+4,O,V)}}function E(R,D,O,N){N<0&&R.x===1&&(a[D]=R.x-1),O.x===0&&O.z===0&&(a[D]=N/2/Math.PI+.5)}function T(R){return Math.atan2(R.z,-R.x)}function x(R){return Math.atan2(-R.y,Math.sqrt(R.x*R.x+R.z*R.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Zd(t.vertices,t.indices,t.radius,t.details)}}class iM extends Zd{constructor(t=1,e=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new iM(t.radius,t.detail)}}const YS=new ut,$S=new ut,mw=new ut,KS=new Oo;class WB extends bn{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const r=Math.pow(10,4),s=Math.cos(Em*e),a=t.getIndex(),l=t.getAttribute("position"),c=a?a.count:l.count,f=[0,0,0],m=["a","b","c"],g=new Array(3),y={},v=[];for(let S=0;S<c;S+=3){a?(f[0]=a.getX(S),f[1]=a.getX(S+1),f[2]=a.getX(S+2)):(f[0]=S,f[1]=S+1,f[2]=S+2);const{a:E,b:T,c:x}=KS;if(E.fromBufferAttribute(l,f[0]),T.fromBufferAttribute(l,f[1]),x.fromBufferAttribute(l,f[2]),KS.getNormal(mw),g[0]=`${Math.round(E.x*r)},${Math.round(E.y*r)},${Math.round(E.z*r)}`,g[1]=`${Math.round(T.x*r)},${Math.round(T.y*r)},${Math.round(T.z*r)}`,g[2]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let R=0;R<3;R++){const D=(R+1)%3,O=g[R],N=g[D],B=KS[m[R]],L=KS[m[D]],U=`${O}_${N}`,I=`${N}_${O}`;I in y&&y[I]?(mw.dot(y[I].normal)<=s&&(v.push(B.x,B.y,B.z),v.push(L.x,L.y,L.z)),y[I]=null):U in y||(y[U]={index0:f[R],index1:f[D],normal:mw.clone()})}}for(const S in y)if(y[S]){const{index0:E,index1:T}=y[S];YS.fromBufferAttribute(l,E),$S.fromBufferAttribute(l,T),v.push(YS.x,YS.y,YS.z),v.push($S.x,$S.y,$S.z)}this.setAttribute("position",new ze(v,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class Tm extends tx{constructor(t){super(t),this.uuid=cl(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let i=0,r=this.holes.length;i<r;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const r=t.holes[e];this.holes.push(r.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++){const r=this.holes[e];t.holes.push(r.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const r=t.holes[e];this.holes.push(new tx().fromJSON(r))}return this}}class M9{static triangulate(t,e,i=2){const r=e&&e.length,s=r?e[0]*i:t.length;let a=YB(t,0,s,i,!0);const l=[];if(!a||a.next===a.prev)return l;let c,f,m,g,y,v,S;if(r&&(a=O9(t,e,a,i)),t.length>80*i){c=m=t[0],f=g=t[1];for(let E=i;E<s;E+=i)y=t[E],v=t[E+1],y<c&&(c=y),v<f&&(f=v),y>m&&(m=y),v>g&&(g=v);S=Math.max(m-c,g-f),S=S!==0?32767/S:0}return ex(a,l,i,c,f,S,0),l}}function YB(n,t,e,i,r){let s,a;if(r===k9(n,t,e,i)>0)for(s=t;s<e;s+=i)a=UI(s,n[s],n[s+1],a);else for(s=e-i;s>=t;s-=i)a=UI(s,n[s],n[s+1],a);return a&&rM(a,a.next)&&(ix(a),a=a.next),a}function Pm(n,t){if(!n)return n;t||(t=n);let e=n,i;do if(i=!1,!e.steiner&&(rM(e,e.next)||Er(e.prev,e,e.next)===0)){if(ix(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function ex(n,t,e,i,r,s,a){if(!n)return;!a&&s&&L9(n,i,r,s);let l=n,c,f;for(;n.prev!==n.next;){if(c=n.prev,f=n.next,s?w9(n,i,r,s):A9(n)){t.push(c.i/e|0),t.push(n.i/e|0),t.push(f.i/e|0),ix(n),n=f.next,l=f.next;continue}if(n=f,n===l){a?a===1?(n=C9(Pm(n),t,e),ex(n,t,e,i,r,s,2)):a===2&&R9(n,t,e,i,r,s):ex(Pm(n),t,e,i,r,s,1);break}}}function A9(n){const t=n.prev,e=n,i=n.next;if(Er(t,e,i)>=0)return!1;const r=t.x,s=e.x,a=i.x,l=t.y,c=e.y,f=i.y,m=r<s?r<a?r:a:s<a?s:a,g=l<c?l<f?l:f:c<f?c:f,y=r>s?r>a?r:a:s>a?s:a,v=l>c?l>f?l:f:c>f?c:f;let S=i.next;for(;S!==t;){if(S.x>=m&&S.x<=y&&S.y>=g&&S.y<=v&&Cy(r,l,s,c,a,f,S.x,S.y)&&Er(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function w9(n,t,e,i){const r=n.prev,s=n,a=n.next;if(Er(r,s,a)>=0)return!1;const l=r.x,c=s.x,f=a.x,m=r.y,g=s.y,y=a.y,v=l<c?l<f?l:f:c<f?c:f,S=m<g?m<y?m:y:g<y?g:y,E=l>c?l>f?l:f:c>f?c:f,T=m>g?m>y?m:y:g>y?g:y,x=ZC(v,S,t,e,i),R=ZC(E,T,t,e,i);let D=n.prevZ,O=n.nextZ;for(;D&&D.z>=x&&O&&O.z<=R;){if(D.x>=v&&D.x<=E&&D.y>=S&&D.y<=T&&D!==r&&D!==a&&Cy(l,m,c,g,f,y,D.x,D.y)&&Er(D.prev,D,D.next)>=0||(D=D.prevZ,O.x>=v&&O.x<=E&&O.y>=S&&O.y<=T&&O!==r&&O!==a&&Cy(l,m,c,g,f,y,O.x,O.y)&&Er(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;D&&D.z>=x;){if(D.x>=v&&D.x<=E&&D.y>=S&&D.y<=T&&D!==r&&D!==a&&Cy(l,m,c,g,f,y,D.x,D.y)&&Er(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;O&&O.z<=R;){if(O.x>=v&&O.x<=E&&O.y>=S&&O.y<=T&&O!==r&&O!==a&&Cy(l,m,c,g,f,y,O.x,O.y)&&Er(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function C9(n,t,e){let i=n;do{const r=i.prev,s=i.next.next;!rM(r,s)&&$B(r,i,i.next,s)&&nx(r,s)&&nx(s,r)&&(t.push(r.i/e|0),t.push(i.i/e|0),t.push(s.i/e|0),ix(i),ix(i.next),i=n=s),i=i.next}while(i!==n);return Pm(i)}function R9(n,t,e,i,r,s){let a=n;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&B9(a,l)){let c=KB(a,l);a=Pm(a,a.next),c=Pm(c,c.next),ex(a,t,e,i,r,s,0),ex(c,t,e,i,r,s,0);return}l=l.next}a=a.next}while(a!==n)}function O9(n,t,e,i){const r=[];let s,a,l,c,f;for(s=0,a=t.length;s<a;s++)l=t[s]*i,c=s<a-1?t[s+1]*i:n.length,f=YB(n,l,c,i,!1),f===f.next&&(f.steiner=!0),r.push(z9(f));for(r.sort(D9),s=0;s<r.length;s++)e=N9(r[s],e);return e}function D9(n,t){return n.x-t.x}function N9(n,t){const e=I9(n,t);if(!e)return t;const i=KB(e,n);return Pm(i,i.next),Pm(e,e.next)}function I9(n,t){let e=t,i=-1/0,r;const s=n.x,a=n.y;do{if(a<=e.y&&a>=e.next.y&&e.next.y!==e.y){const y=e.x+(a-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(y<=s&&y>i&&(i=y,r=e.x<e.next.x?e:e.next,y===s))return r}e=e.next}while(e!==t);if(!r)return null;const l=r,c=r.x,f=r.y;let m=1/0,g;e=r;do s>=e.x&&e.x>=c&&s!==e.x&&Cy(a<f?s:i,a,c,f,a<f?i:s,a,e.x,e.y)&&(g=Math.abs(a-e.y)/(s-e.x),nx(e,n)&&(g<m||g===m&&(e.x>r.x||e.x===r.x&&P9(r,e)))&&(r=e,m=g)),e=e.next;while(e!==l);return r}function P9(n,t){return Er(n.prev,n,t.prev)<0&&Er(t.next,n,n.next)<0}function L9(n,t,e,i){let r=n;do r.z===0&&(r.z=ZC(r.x,r.y,t,e,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,U9(r)}function U9(n){let t,e,i,r,s,a,l,c,f=1;do{for(e=n,n=null,s=null,a=0;e;){for(a++,i=e,l=0,t=0;t<f&&(l++,i=i.nextZ,!!i);t++);for(c=f;l>0||c>0&&i;)l!==0&&(c===0||!i||e.z<=i.z)?(r=e,e=e.nextZ,l--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;e=i}s.nextZ=null,f*=2}while(a>1);return n}function ZC(n,t,e,i,r){return n=(n-e)*r|0,t=(t-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function z9(n){let t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function Cy(n,t,e,i,r,s,a,l){return(r-a)*(t-l)>=(n-a)*(s-l)&&(n-a)*(i-l)>=(e-a)*(t-l)&&(e-a)*(s-l)>=(r-a)*(i-l)}function B9(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!V9(n,t)&&(nx(n,t)&&nx(t,n)&&F9(n,t)&&(Er(n.prev,n,t.prev)||Er(n,t.prev,t))||rM(n,t)&&Er(n.prev,n,n.next)>0&&Er(t.prev,t,t.next)>0)}function Er(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function rM(n,t){return n.x===t.x&&n.y===t.y}function $B(n,t,e,i){const r=QS(Er(n,t,e)),s=QS(Er(n,t,i)),a=QS(Er(e,i,n)),l=QS(Er(e,i,t));return!!(r!==s&&a!==l||r===0&&ZS(n,e,t)||s===0&&ZS(n,i,t)||a===0&&ZS(e,n,i)||l===0&&ZS(e,t,i))}function ZS(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function QS(n){return n>0?1:n<0?-1:0}function V9(n,t){let e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&$B(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function nx(n,t){return Er(n.prev,n,n.next)<0?Er(n,t,n.next)>=0&&Er(n,n.prev,t)>=0:Er(n,t,n.prev)<0||Er(n,n.next,t)<0}function F9(n,t){let e=n,i=!1;const r=(n.x+t.x)/2,s=(n.y+t.y)/2;do e.y>s!=e.next.y>s&&e.next.y!==e.y&&r<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==n);return i}function KB(n,t){const e=new QC(n.i,n.x,n.y),i=new QC(t.i,t.x,t.y),r=n.next,s=t.prev;return n.next=t,t.prev=n,e.next=r,r.prev=e,i.next=e,e.prev=i,s.next=i,i.prev=s,i}function UI(n,t,e,i){const r=new QC(n,t,e);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ix(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function QC(n,t,e){this.i=n,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k9(n,t,e,i){let r=0;for(let s=t,a=e-i;s<e;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}class Yc{static area(t){const e=t.length;let i=0;for(let r=e-1,s=0;s<e;r=s++)i+=t[r].x*t[s].y-t[s].x*t[r].y;return i*.5}static isClockWise(t){return Yc.area(t)<0}static triangulateShape(t,e){const i=[],r=[],s=[];zI(t),BI(i,t);let a=t.length;e.forEach(zI);for(let c=0;c<e.length;c++)r.push(a),a+=e[c].length,BI(i,e[c]);const l=M9.triangulate(i,r);for(let c=0;c<l.length;c+=3)s.push(l.slice(c,c+3));return s}}function zI(n){const t=n.length;t>2&&n[t-1].equals(n[0])&&n.pop()}function BI(n,t){for(let e=0;e<t.length;e++)n.push(t[e].x),n.push(t[e].y)}class sM extends bn{constructor(t=new Tm([new oe(.5,.5),new oe(-.5,.5),new oe(-.5,-.5),new oe(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const i=this,r=[],s=[];for(let l=0,c=t.length;l<c;l++){const f=t[l];a(f)}this.setAttribute("position",new ze(r,3)),this.setAttribute("uv",new ze(s,2)),this.computeVertexNormals();function a(l){const c=[],f=e.curveSegments!==void 0?e.curveSegments:12,m=e.steps!==void 0?e.steps:1,g=e.depth!==void 0?e.depth:1;let y=e.bevelEnabled!==void 0?e.bevelEnabled:!0,v=e.bevelThickness!==void 0?e.bevelThickness:.2,S=e.bevelSize!==void 0?e.bevelSize:v-.1,E=e.bevelOffset!==void 0?e.bevelOffset:0,T=e.bevelSegments!==void 0?e.bevelSegments:3;const x=e.extrudePath,R=e.UVGenerator!==void 0?e.UVGenerator:H9;let D,O=!1,N,B,L,U;x&&(D=x.getSpacedPoints(m),O=!0,y=!1,N=x.computeFrenetFrames(m,!1),B=new ut,L=new ut,U=new ut),y||(T=0,v=0,S=0,E=0);const I=l.extractPoints(f);let w=I.shape;const V=I.holes;if(!Yc.isClockWise(w)){w=w.reverse();for(let Pt=0,kt=V.length;Pt<kt;Pt++){const tt=V[Pt];Yc.isClockWise(tt)&&(V[Pt]=tt.reverse())}}const k=Yc.triangulateShape(w,V),st=w;for(let Pt=0,kt=V.length;Pt<kt;Pt++){const tt=V[Pt];w=w.concat(tt)}function it(Pt,kt,tt){return kt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Pt.clone().addScaledVector(kt,tt)}const Y=w.length,Z=k.length;function at(Pt,kt,tt){let se,$t,ce;const rt=Pt.x-kt.x,_t=Pt.y-kt.y,gt=tt.x-Pt.x,W=tt.y-Pt.y,q=rt*rt+_t*_t,ht=rt*W-_t*gt;if(Math.abs(ht)>Number.EPSILON){const xt=Math.sqrt(q),Vt=Math.sqrt(gt*gt+W*W),Lt=kt.x-_t/xt,le=kt.y+rt/xt,fe=tt.x-W/Vt,Se=tt.y+gt/Vt,He=((fe-Lt)*W-(Se-le)*gt)/(rt*W-_t*gt);se=Lt+rt*He-Pt.x,$t=le+_t*He-Pt.y;const Kt=se*se+$t*$t;if(Kt<=2)return new oe(se,$t);ce=Math.sqrt(Kt/2)}else{let xt=!1;rt>Number.EPSILON?gt>Number.EPSILON&&(xt=!0):rt<-Number.EPSILON?gt<-Number.EPSILON&&(xt=!0):Math.sign(_t)===Math.sign(W)&&(xt=!0),xt?(se=-_t,$t=rt,ce=Math.sqrt(q)):(se=rt,$t=_t,ce=Math.sqrt(q/2))}return new oe(se/ce,$t/ce)}const ct=[];for(let Pt=0,kt=st.length,tt=kt-1,se=Pt+1;Pt<kt;Pt++,tt++,se++)tt===kt&&(tt=0),se===kt&&(se=0),ct[Pt]=at(st[Pt],st[tt],st[se]);const $=[];let pt,wt=ct.concat();for(let Pt=0,kt=V.length;Pt<kt;Pt++){const tt=V[Pt];pt=[];for(let se=0,$t=tt.length,ce=$t-1,rt=se+1;se<$t;se++,ce++,rt++)ce===$t&&(ce=0),rt===$t&&(rt=0),pt[se]=at(tt[se],tt[ce],tt[rt]);$.push(pt),wt=wt.concat(pt)}for(let Pt=0;Pt<T;Pt++){const kt=Pt/T,tt=v*Math.cos(kt*Math.PI/2),se=S*Math.sin(kt*Math.PI/2)+E;for(let $t=0,ce=st.length;$t<ce;$t++){const rt=it(st[$t],ct[$t],se);mt(rt.x,rt.y,-tt)}for(let $t=0,ce=V.length;$t<ce;$t++){const rt=V[$t];pt=$[$t];for(let _t=0,gt=rt.length;_t<gt;_t++){const W=it(rt[_t],pt[_t],se);mt(W.x,W.y,-tt)}}}const zt=S+E;for(let Pt=0;Pt<Y;Pt++){const kt=y?it(w[Pt],wt[Pt],zt):w[Pt];O?(L.copy(N.normals[0]).multiplyScalar(kt.x),B.copy(N.binormals[0]).multiplyScalar(kt.y),U.copy(D[0]).add(L).add(B),mt(U.x,U.y,U.z)):mt(kt.x,kt.y,0)}for(let Pt=1;Pt<=m;Pt++)for(let kt=0;kt<Y;kt++){const tt=y?it(w[kt],wt[kt],zt):w[kt];O?(L.copy(N.normals[Pt]).multiplyScalar(tt.x),B.copy(N.binormals[Pt]).multiplyScalar(tt.y),U.copy(D[Pt]).add(L).add(B),mt(U.x,U.y,U.z)):mt(tt.x,tt.y,g/m*Pt)}for(let Pt=T-1;Pt>=0;Pt--){const kt=Pt/T,tt=v*Math.cos(kt*Math.PI/2),se=S*Math.sin(kt*Math.PI/2)+E;for(let $t=0,ce=st.length;$t<ce;$t++){const rt=it(st[$t],ct[$t],se);mt(rt.x,rt.y,g+tt)}for(let $t=0,ce=V.length;$t<ce;$t++){const rt=V[$t];pt=$[$t];for(let _t=0,gt=rt.length;_t<gt;_t++){const W=it(rt[_t],pt[_t],se);O?mt(W.x,W.y+D[m-1].y,D[m-1].x+tt):mt(W.x,W.y,g+tt)}}}nt(),lt();function nt(){const Pt=r.length/3;if(y){let kt=0,tt=Y*kt;for(let se=0;se<Z;se++){const $t=k[se];Dt($t[2]+tt,$t[1]+tt,$t[0]+tt)}kt=m+T*2,tt=Y*kt;for(let se=0;se<Z;se++){const $t=k[se];Dt($t[0]+tt,$t[1]+tt,$t[2]+tt)}}else{for(let kt=0;kt<Z;kt++){const tt=k[kt];Dt(tt[2],tt[1],tt[0])}for(let kt=0;kt<Z;kt++){const tt=k[kt];Dt(tt[0]+Y*m,tt[1]+Y*m,tt[2]+Y*m)}}i.addGroup(Pt,r.length/3-Pt,0)}function lt(){const Pt=r.length/3;let kt=0;ft(st,kt),kt+=st.length;for(let tt=0,se=V.length;tt<se;tt++){const $t=V[tt];ft($t,kt),kt+=$t.length}i.addGroup(Pt,r.length/3-Pt,1)}function ft(Pt,kt){let tt=Pt.length;for(;--tt>=0;){const se=tt;let $t=tt-1;$t<0&&($t=Pt.length-1);for(let ce=0,rt=m+T*2;ce<rt;ce++){const _t=Y*ce,gt=Y*(ce+1),W=kt+se+_t,q=kt+$t+_t,ht=kt+$t+gt,xt=kt+se+gt;Wt(W,q,ht,xt)}}}function mt(Pt,kt,tt){c.push(Pt),c.push(kt),c.push(tt)}function Dt(Pt,kt,tt){Nt(Pt),Nt(kt),Nt(tt);const se=r.length/3,$t=R.generateTopUV(i,r,se-3,se-2,se-1);Jt($t[0]),Jt($t[1]),Jt($t[2])}function Wt(Pt,kt,tt,se){Nt(Pt),Nt(kt),Nt(se),Nt(kt),Nt(tt),Nt(se);const $t=r.length/3,ce=R.generateSideWallUV(i,r,$t-6,$t-3,$t-2,$t-1);Jt(ce[0]),Jt(ce[1]),Jt(ce[3]),Jt(ce[1]),Jt(ce[2]),Jt(ce[3])}function Nt(Pt){r.push(c[Pt*3+0]),r.push(c[Pt*3+1]),r.push(c[Pt*3+2])}function Jt(Pt){s.push(Pt.x),s.push(Pt.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,i=this.parameters.options;return G9(e,i,t)}static fromJSON(t,e){const i=[];for(let s=0,a=t.shapes.length;s<a;s++){const l=e[t.shapes[s]];i.push(l)}const r=t.options.extrudePath;return r!==void 0&&(t.options.extrudePath=new H1[r.type]().fromJSON(r)),new sM(i,t.options)}}const H9={generateTopUV:function(n,t,e,i,r){const s=t[e*3],a=t[e*3+1],l=t[i*3],c=t[i*3+1],f=t[r*3],m=t[r*3+1];return[new oe(s,a),new oe(l,c),new oe(f,m)]},generateSideWallUV:function(n,t,e,i,r,s){const a=t[e*3],l=t[e*3+1],c=t[e*3+2],f=t[i*3],m=t[i*3+1],g=t[i*3+2],y=t[r*3],v=t[r*3+1],S=t[r*3+2],E=t[s*3],T=t[s*3+1],x=t[s*3+2];return Math.abs(l-m)<Math.abs(a-f)?[new oe(a,1-c),new oe(f,1-g),new oe(y,1-S),new oe(E,1-x)]:[new oe(l,1-c),new oe(m,1-g),new oe(v,1-S),new oe(T,1-x)]}};function G9(n,t,e){if(e.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];e.shapes.push(s.uuid)}else e.shapes.push(n.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class aM extends Zd{constructor(t=1,e=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new aM(t.radius,t.detail)}}class Vx extends Zd{constructor(t=1,e=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Vx(t.radius,t.detail)}}class m_ extends bn{constructor(t=1,e=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};const s=t/2,a=e/2,l=Math.floor(i),c=Math.floor(r),f=l+1,m=c+1,g=t/l,y=e/c,v=[],S=[],E=[],T=[];for(let x=0;x<m;x++){const R=x*y-a;for(let D=0;D<f;D++){const O=D*g-s;S.push(O,-R,0),E.push(0,0,1),T.push(D/l),T.push(1-x/c)}}for(let x=0;x<c;x++)for(let R=0;R<l;R++){const D=R+f*x,O=R+f*(x+1),N=R+1+f*(x+1),B=R+1+f*x;v.push(D,O,B),v.push(O,N,B)}this.setIndex(v),this.setAttribute("position",new ze(S,3)),this.setAttribute("normal",new ze(E,3)),this.setAttribute("uv",new ze(T,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new m_(t.width,t.height,t.widthSegments,t.heightSegments)}}class oM extends bn{constructor(t=.5,e=1,i=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},i=Math.max(3,i),r=Math.max(1,r);const l=[],c=[],f=[],m=[];let g=t;const y=(e-t)/r,v=new ut,S=new oe;for(let E=0;E<=r;E++){for(let T=0;T<=i;T++){const x=s+T/i*a;v.x=g*Math.cos(x),v.y=g*Math.sin(x),c.push(v.x,v.y,v.z),f.push(0,0,1),S.x=(v.x/e+1)/2,S.y=(v.y/e+1)/2,m.push(S.x,S.y)}g+=y}for(let E=0;E<r;E++){const T=E*(i+1);for(let x=0;x<i;x++){const R=x+T,D=R,O=R+i+1,N=R+i+2,B=R+1;l.push(D,O,B),l.push(O,N,B)}}this.setIndex(l),this.setAttribute("position",new ze(c,3)),this.setAttribute("normal",new ze(f,3)),this.setAttribute("uv",new ze(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new oM(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class lM extends bn{constructor(t=new Tm([new oe(0,.5),new oe(-.5,-.5),new oe(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const i=[],r=[],s=[],a=[];let l=0,c=0;if(Array.isArray(t)===!1)f(t);else for(let m=0;m<t.length;m++)f(t[m]),this.addGroup(l,c,m),l+=c,c=0;this.setIndex(i),this.setAttribute("position",new ze(r,3)),this.setAttribute("normal",new ze(s,3)),this.setAttribute("uv",new ze(a,2));function f(m){const g=r.length/3,y=m.extractPoints(e);let v=y.shape;const S=y.holes;Yc.isClockWise(v)===!1&&(v=v.reverse());for(let T=0,x=S.length;T<x;T++){const R=S[T];Yc.isClockWise(R)===!0&&(S[T]=R.reverse())}const E=Yc.triangulateShape(v,S);for(let T=0,x=S.length;T<x;T++){const R=S[T];v=v.concat(R)}for(let T=0,x=v.length;T<x;T++){const R=v[T];r.push(R.x,R.y,0),s.push(0,0,1),a.push(R.x,R.y)}for(let T=0,x=E.length;T<x;T++){const R=E[T],D=R[0]+g,O=R[1]+g,N=R[2]+g;i.push(D,O,N),c+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return q9(e,t)}static fromJSON(t,e){const i=[];for(let r=0,s=t.shapes.length;r<s;r++){const a=e[t.shapes[r]];i.push(a)}return new lM(i,t.curveSegments)}}function q9(n,t){if(t.shapes=[],Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const r=n[e];t.shapes.push(r.uuid)}else t.shapes.push(n.uuid);return t}class g_ extends bn{constructor(t=1,e=32,i=16,r=0,s=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:l},e=Math.max(3,Math.floor(e)),i=Math.max(2,Math.floor(i));const c=Math.min(a+l,Math.PI);let f=0;const m=[],g=new ut,y=new ut,v=[],S=[],E=[],T=[];for(let x=0;x<=i;x++){const R=[],D=x/i;let O=0;x===0&&a===0?O=.5/e:x===i&&c===Math.PI&&(O=-.5/e);for(let N=0;N<=e;N++){const B=N/e;g.x=-t*Math.cos(r+B*s)*Math.sin(a+D*l),g.y=t*Math.cos(a+D*l),g.z=t*Math.sin(r+B*s)*Math.sin(a+D*l),S.push(g.x,g.y,g.z),y.copy(g).normalize(),E.push(y.x,y.y,y.z),T.push(B+O,1-D),R.push(f++)}m.push(R)}for(let x=0;x<i;x++)for(let R=0;R<e;R++){const D=m[x][R+1],O=m[x][R],N=m[x+1][R],B=m[x+1][R+1];(x!==0||a>0)&&v.push(D,O,B),(x!==i-1||c<Math.PI)&&v.push(O,N,B)}this.setIndex(v),this.setAttribute("position",new ze(S,3)),this.setAttribute("normal",new ze(E,3)),this.setAttribute("uv",new ze(T,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new g_(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class uM extends Zd{constructor(t=1,e=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new uM(t.radius,t.detail)}}class cM extends bn{constructor(t=1,e=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],f=[],m=new ut,g=new ut,y=new ut;for(let v=0;v<=i;v++)for(let S=0;S<=r;S++){const E=S/r*s,T=v/i*Math.PI*2;g.x=(t+e*Math.cos(T))*Math.cos(E),g.y=(t+e*Math.cos(T))*Math.sin(E),g.z=e*Math.sin(T),l.push(g.x,g.y,g.z),m.x=t*Math.cos(E),m.y=t*Math.sin(E),y.subVectors(g,m).normalize(),c.push(y.x,y.y,y.z),f.push(S/r),f.push(v/i)}for(let v=1;v<=i;v++)for(let S=1;S<=r;S++){const E=(r+1)*v+S-1,T=(r+1)*(v-1)+S-1,x=(r+1)*(v-1)+S,R=(r+1)*v+S;a.push(E,T,R),a.push(T,x,R)}this.setIndex(a),this.setAttribute("position",new ze(l,3)),this.setAttribute("normal",new ze(c,3)),this.setAttribute("uv",new ze(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new cM(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class fM extends bn{constructor(t=1,e=.4,i=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:r,p:s,q:a},i=Math.floor(i),r=Math.floor(r);const l=[],c=[],f=[],m=[],g=new ut,y=new ut,v=new ut,S=new ut,E=new ut,T=new ut,x=new ut;for(let D=0;D<=i;++D){const O=D/i*s*Math.PI*2;R(O,s,a,t,v),R(O+.01,s,a,t,S),T.subVectors(S,v),x.addVectors(S,v),E.crossVectors(T,x),x.crossVectors(E,T),E.normalize(),x.normalize();for(let N=0;N<=r;++N){const B=N/r*Math.PI*2,L=-e*Math.cos(B),U=e*Math.sin(B);g.x=v.x+(L*x.x+U*E.x),g.y=v.y+(L*x.y+U*E.y),g.z=v.z+(L*x.z+U*E.z),c.push(g.x,g.y,g.z),y.subVectors(g,v).normalize(),f.push(y.x,y.y,y.z),m.push(D/i),m.push(N/r)}}for(let D=1;D<=i;D++)for(let O=1;O<=r;O++){const N=(r+1)*(D-1)+(O-1),B=(r+1)*D+(O-1),L=(r+1)*D+O,U=(r+1)*(D-1)+O;l.push(N,B,U),l.push(B,L,U)}this.setIndex(l),this.setAttribute("position",new ze(c,3)),this.setAttribute("normal",new ze(f,3)),this.setAttribute("uv",new ze(m,2));function R(D,O,N,B,L){const U=Math.cos(D),I=Math.sin(D),w=N/O*D,V=Math.cos(w);L.x=B*(2+V)*.5*U,L.y=B*(2+V)*I*.5,L.z=B*Math.sin(w)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new fM(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class Fx extends bn{constructor(t=new tM(new ut(-1,-1,0),new ut(-1,1,0),new ut(1,1,0)),e=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:r,closed:s};const a=t.computeFrenetFrames(e,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new ut,c=new ut,f=new oe;let m=new ut;const g=[],y=[],v=[],S=[];E(),this.setIndex(S),this.setAttribute("position",new ze(g,3)),this.setAttribute("normal",new ze(y,3)),this.setAttribute("uv",new ze(v,2));function E(){for(let D=0;D<e;D++)T(D);T(s===!1?e:0),R(),x()}function T(D){m=t.getPointAt(D/e,m);const O=a.normals[D],N=a.binormals[D];for(let B=0;B<=r;B++){const L=B/r*Math.PI*2,U=Math.sin(L),I=-Math.cos(L);c.x=I*O.x+U*N.x,c.y=I*O.y+U*N.y,c.z=I*O.z+U*N.z,c.normalize(),y.push(c.x,c.y,c.z),l.x=m.x+i*c.x,l.y=m.y+i*c.y,l.z=m.z+i*c.z,g.push(l.x,l.y,l.z)}}function x(){for(let D=1;D<=e;D++)for(let O=1;O<=r;O++){const N=(r+1)*(D-1)+(O-1),B=(r+1)*D+(O-1),L=(r+1)*D+O,U=(r+1)*(D-1)+O;S.push(N,B,U),S.push(B,L,U)}}function R(){for(let D=0;D<=e;D++)for(let O=0;O<=r;O++)f.x=D/e,f.y=O/r,v.push(f.x,f.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new Fx(new H1[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class ZB extends bn{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const e=[],i=new Set,r=new ut,s=new ut;if(t.index!==null){const a=t.attributes.position,l=t.index;let c=t.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,m=c.length;f<m;++f){const g=c[f],y=g.start,v=g.count;for(let S=y,E=y+v;S<E;S+=3)for(let T=0;T<3;T++){const x=l.getX(S+T),R=l.getX(S+(T+1)%3);r.fromBufferAttribute(a,x),s.fromBufferAttribute(a,R),VI(r,s,i)===!0&&(e.push(r.x,r.y,r.z),e.push(s.x,s.y,s.z))}}}else{const a=t.attributes.position;for(let l=0,c=a.count/3;l<c;l++)for(let f=0;f<3;f++){const m=3*l+f,g=3*l+(f+1)%3;r.fromBufferAttribute(a,m),s.fromBufferAttribute(a,g),VI(r,s,i)===!0&&(e.push(r.x,r.y,r.z),e.push(s.x,s.y,s.z))}}this.setAttribute("position",new ze(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function VI(n,t,e){const i=`${n.x},${n.y},${n.z}-${t.x},${t.y},${t.z}`,r=`${t.x},${t.y},${t.z}-${n.x},${n.y},${n.z}`;return e.has(i)===!0||e.has(r)===!0?!1:(e.add(i),e.add(r),!0)}var FI=Object.freeze({__proto__:null,BoxGeometry:km,CapsuleGeometry:eM,CircleGeometry:nM,ConeGeometry:Bx,CylinderGeometry:Hm,DodecahedronGeometry:iM,EdgesGeometry:WB,ExtrudeGeometry:sM,IcosahedronGeometry:aM,LatheGeometry:zx,OctahedronGeometry:Vx,PlaneGeometry:m_,PolyhedronGeometry:Zd,RingGeometry:oM,ShapeGeometry:lM,SphereGeometry:g_,TetrahedronGeometry:uM,TorusGeometry:cM,TorusKnotGeometry:fM,TubeGeometry:Fx,WireframeGeometry:ZB});class QB extends Ra{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ne(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class JB extends ql{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class iO extends Ra{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ne(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$d,this.normalScale=new oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new dl,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class t4 extends iO{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new oe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return mn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ne(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ne(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ne(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class e4 extends Ra{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ne(16777215),this.specular=new Ne(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$d,this.normalScale=new oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new dl,this.combine=Nx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class n4 extends Ra{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ne(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$d,this.normalScale=new oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class i4 extends Ra{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$d,this.normalScale=new oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class rO extends Ra{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ne(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$d,this.normalScale=new oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new dl,this.combine=Nx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class sO extends Ra{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=mB,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class aO extends Ra{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class r4 extends Ra{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ne(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$d,this.normalScale=new oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class s4 extends Oa{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function gm(n,t,e){return!n||!e&&n.constructor===t?n:typeof t.BYTES_PER_ELEMENT=="number"?new t(n):Array.prototype.slice.call(n)}function a4(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function o4(n){function t(r,s){return n[r]-n[s]}const e=n.length,i=new Array(e);for(let r=0;r!==e;++r)i[r]=r;return i.sort(t),i}function JC(n,t,e){const i=n.length,r=new n.constructor(i);for(let s=0,a=0;a!==i;++s){const l=e[s]*t;for(let c=0;c!==t;++c)r[a++]=n[l+c]}return r}function oO(n,t,e,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(t.push(s.time),e.push(...a)),s=n[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(t.push(s.time),a.toArray(e,e.length)),s=n[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(t.push(s.time),e.push(a)),s=n[r++];while(s!==void 0)}function j9(n,t,e,i,r=30){const s=n.clone();s.name=t;const a=[];for(let c=0;c<s.tracks.length;++c){const f=s.tracks[c],m=f.getValueSize(),g=[],y=[];for(let v=0;v<f.times.length;++v){const S=f.times[v]*r;if(!(S<e||S>=i)){g.push(f.times[v]);for(let E=0;E<m;++E)y.push(f.values[v*m+E])}}g.length!==0&&(f.times=gm(g,f.times.constructor),f.values=gm(y,f.values.constructor),a.push(f))}s.tracks=a;let l=1/0;for(let c=0;c<s.tracks.length;++c)l>s.tracks[c].times[0]&&(l=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*l);return s.resetDuration(),s}function X9(n,t=0,e=n,i=30){i<=0&&(i=30);const r=e.tracks.length,s=t/i;for(let a=0;a<r;++a){const l=e.tracks[a],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const f=n.tracks.find(function(x){return x.name===l.name&&x.ValueTypeName===c});if(f===void 0)continue;let m=0;const g=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);let y=0;const v=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=v/3);const S=l.times.length-1;let E;if(s<=l.times[0]){const x=m,R=g-m;E=l.values.slice(x,R)}else if(s>=l.times[S]){const x=S*g+m,R=x+g-m;E=l.values.slice(x,R)}else{const x=l.createInterpolant(),R=m,D=g-m;x.evaluate(s),E=x.resultBuffer.slice(R,D)}c==="quaternion"&&new Za().fromArray(E).normalize().conjugate().toArray(E);const T=f.times.length;for(let x=0;x<T;++x){const R=x*v+y;if(c==="quaternion")Za.multiplyQuaternionsFlat(f.values,R,E,0,f.values,R);else{const D=v-y*2;for(let O=0;O<D;++O)f.values[R+O]-=E[O]}}}return n.blendMode=k2,n}const W9={convertArray:gm,isTypedArray:a4,getKeyframeOrder:o4,sortedArray:JC,flattenJSON:oO,subclip:j9,makeClipAdditive:X9};class kx{constructor(t,e,i,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,r=e[i],s=e[i-1];t:{e:{let a;n:{i:if(!(t<r)){for(let l=i+2;;){if(r===void 0){if(t<s)break i;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(s=r,r=e[++i],t<r)break e}a=e.length;break n}if(!(t>=s)){const l=e[1];t<l&&(i=2,s=l);for(let c=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=e[--i-1],t>=s)break e}a=i,i=0;break n}break t}for(;i<a;){const l=i+a>>>1;t<e[l]?a=l:i=l+1}if(r=e[i],s=e[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=t*r;for(let a=0;a!==r;++a)e[a]=i[s+a];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class l4 extends kx{constructor(t,e,i,r){super(t,e,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:pm,endingEnd:pm}}intervalChanged_(t,e,i){const r=this.parameterPositions;let s=t-2,a=t+1,l=r[s],c=r[a];if(l===void 0)switch(this.getSettings_().endingStart){case mm:s=t,l=2*e-i;break;case $0:s=r.length-2,l=e+r[s]-r[s+1];break;default:s=t,l=i}if(c===void 0)switch(this.getSettings_().endingEnd){case mm:a=t,c=2*i-e;break;case $0:a=1,c=i+r[1]-r[0];break;default:a=t-1,c=e}const f=(i-e)*.5,m=this.valueSize;this._weightPrev=f/(e-l),this._weightNext=f/(c-i),this._offsetPrev=s*m,this._offsetNext=a*m}interpolate_(t,e,i,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=t*l,f=c-l,m=this._offsetPrev,g=this._offsetNext,y=this._weightPrev,v=this._weightNext,S=(i-e)/(r-e),E=S*S,T=E*S,x=-y*T+2*y*E-y*S,R=(1+y)*T+(-1.5-2*y)*E+(-.5+y)*S+1,D=(-1-v)*T+(1.5+v)*E+.5*S,O=v*T-v*E;for(let N=0;N!==l;++N)s[N]=x*a[m+N]+R*a[f+N]+D*a[c+N]+O*a[g+N];return s}}class lO extends kx{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=t*l,f=c-l,m=(i-e)/(r-e),g=1-m;for(let y=0;y!==l;++y)s[y]=a[f+y]*g+a[c+y]*m;return s}}class u4 extends kx{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class ku{constructor(t,e,i,r){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=gm(e,this.TimeBufferType),this.values=gm(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:gm(t.times,Array),values:gm(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(i.interpolation=r)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new u4(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new lO(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new l4(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Y0:e=this.InterpolantFactoryMethodDiscrete;break;case V1:e=this.InterpolantFactoryMethodLinear;break;case zE:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Y0;case this.InterpolantFactoryMethodLinear:return V1;case this.InterpolantFactoryMethodSmooth:return zE}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]*=t}return this}trim(t,e){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<t;)++s;for(;a!==-1&&i[a]>e;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const l=this.getValueSize();this.times=i.slice(s,a),this.values=this.values.slice(s*l,a*l)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let l=0;l!==s;l++){const c=i[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),t=!1;break}if(a!==null&&a>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,a),t=!1;break}a=c}if(r!==void 0&&a4(r))for(let l=0,c=r.length;l!==c;++l){const f=r[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===zE,s=t.length-1;let a=1;for(let l=1;l<s;++l){let c=!1;const f=t[l],m=t[l+1];if(f!==m&&(l!==1||f!==t[0]))if(r)c=!0;else{const g=l*i,y=g-i,v=g+i;for(let S=0;S!==i;++S){const E=e[g+S];if(E!==e[y+S]||E!==e[v+S]){c=!0;break}}}if(c){if(l!==a){t[a]=t[l];const g=l*i,y=a*i;for(let v=0;v!==i;++v)e[y+v]=e[g+v]}++a}}if(s>0){t[a]=t[s];for(let l=s*i,c=a*i,f=0;f!==i;++f)e[c+f]=e[l+f];++a}return a!==t.length?(this.times=t.slice(0,a),this.values=e.slice(0,a*i)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),i=this.constructor,r=new i(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}ku.prototype.TimeBufferType=Float32Array;ku.prototype.ValueBufferType=Float32Array;ku.prototype.DefaultInterpolation=V1;class Gm extends ku{constructor(t,e,i){super(t,e,i)}}Gm.prototype.ValueTypeName="bool";Gm.prototype.ValueBufferType=Array;Gm.prototype.DefaultInterpolation=Y0;Gm.prototype.InterpolantFactoryMethodLinear=void 0;Gm.prototype.InterpolantFactoryMethodSmooth=void 0;class uO extends ku{}uO.prototype.ValueTypeName="color";class rx extends ku{}rx.prototype.ValueTypeName="number";class c4 extends kx{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=(i-e)/(r-e);let f=t*l;for(let m=f+l;f!==m;f+=4)Za.slerpFlat(s,0,a,f-l,a,f,c);return s}}class Hx extends ku{InterpolantFactoryMethodLinear(t){return new c4(this.times,this.values,this.getValueSize(),t)}}Hx.prototype.ValueTypeName="quaternion";Hx.prototype.InterpolantFactoryMethodSmooth=void 0;class qm extends ku{constructor(t,e,i){super(t,e,i)}}qm.prototype.ValueTypeName="string";qm.prototype.ValueBufferType=Array;qm.prototype.DefaultInterpolation=Y0;qm.prototype.InterpolantFactoryMethodLinear=void 0;qm.prototype.InterpolantFactoryMethodSmooth=void 0;class sx extends ku{}sx.prototype.ValueTypeName="vector";class ax{constructor(t="",e=-1,i=[],r=qT){this.name=t,this.tracks=i,this.duration=e,this.blendMode=r,this.uuid=cl(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],i=t.tracks,r=1/(t.fps||1);for(let a=0,l=i.length;a!==l;++a)e.push($9(i[a]).scale(r));const s=new this(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s}static toJSON(t){const e=[],i=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let s=0,a=i.length;s!==a;++s)e.push(ku.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(t,e,i,r){const s=e.length,a=[];for(let l=0;l<s;l++){let c=[],f=[];c.push((l+s-1)%s,l,(l+1)%s),f.push(0,1,0);const m=o4(c);c=JC(c,1,m),f=JC(f,1,m),!r&&c[0]===0&&(c.push(s),f.push(f[0])),a.push(new rx(".morphTargetInfluences["+e[l].name+"]",c,f).scale(1/i))}return new this(t,-1,a)}static findByName(t,e){let i=t;if(!Array.isArray(t)){const r=t;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null}static CreateClipsFromMorphTargetSequences(t,e,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,c=t.length;l<c;l++){const f=t[l],m=f.name.match(s);if(m&&m.length>1){const g=m[1];let y=r[g];y||(r[g]=y=[]),y.push(f)}}const a=[];for(const l in r)a.push(this.CreateFromMorphTargetSequence(l,r[l],e,i));return a}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(g,y,v,S,E){if(v.length!==0){const T=[],x=[];oO(v,T,x,S),T.length!==0&&E.push(new g(y,T,x))}},r=[],s=t.name||"default",a=t.fps||30,l=t.blendMode;let c=t.length||-1;const f=t.hierarchy||[];for(let g=0;g<f.length;g++){const y=f[g].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const v={};let S;for(S=0;S<y.length;S++)if(y[S].morphTargets)for(let E=0;E<y[S].morphTargets.length;E++)v[y[S].morphTargets[E]]=-1;for(const E in v){const T=[],x=[];for(let R=0;R!==y[S].morphTargets.length;++R){const D=y[S];T.push(D.time),x.push(D.morphTarget===E?1:0)}r.push(new rx(".morphTargetInfluence["+E+"]",T,x))}c=v.length*a}else{const v=".bones["+e[g].name+"]";i(sx,v+".position",y,"pos",r),i(Hx,v+".quaternion",y,"rot",r),i(sx,v+".scale",y,"scl",r)}}return r.length===0?null:new this(s,c,r,l)}resetDuration(){const t=this.tracks;let e=0;for(let i=0,r=t.length;i!==r;++i){const s=this.tracks[i];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Y9(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rx;case"vector":case"vector2":case"vector3":case"vector4":return sx;case"color":return uO;case"quaternion":return Hx;case"bool":case"boolean":return Gm;case"string":return qm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function $9(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=Y9(n.type);if(n.times===void 0){const e=[],i=[];oO(n.keys,e,i,"value"),n.times=e,n.values=i}return t.parse!==void 0?t.parse(n):new t(n.name,n.times,n.values,n.interpolation)}const rh={enabled:!1,files:{},add:function(n,t){this.enabled!==!1&&(this.files[n]=t)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class cO{constructor(t,e,i){const r=this;let s=!1,a=0,l=0,c;const f=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(m){l++,s===!1&&r.onStart!==void 0&&r.onStart(m,a,l),s=!0},this.itemEnd=function(m){a++,r.onProgress!==void 0&&r.onProgress(m,a,l),a===l&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(m){r.onError!==void 0&&r.onError(m)},this.resolveURL=function(m){return c?c(m):m},this.setURLModifier=function(m){return c=m,this},this.addHandler=function(m,g){return f.push(m,g),this},this.removeHandler=function(m){const g=f.indexOf(m);return g!==-1&&f.splice(g,2),this},this.getHandler=function(m){for(let g=0,y=f.length;g<y;g+=2){const v=f[g],S=f[g+1];if(v.global&&(v.lastIndex=0),v.test(m))return S}return null}}}const f4=new cO;class Bo{constructor(t){this.manager=t!==void 0?t:f4,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise(function(r,s){i.load(t,r,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Bo.DEFAULT_MATERIAL_NAME="__DEFAULT";const Xf={};class K9 extends Error{constructor(t,e){super(t),this.response=e}}class ph extends Bo{constructor(t){super(t)}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=rh.get(t);if(s!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(Xf[t]!==void 0){Xf[t].push({onLoad:e,onProgress:i,onError:r});return}Xf[t]=[],Xf[t].push({onLoad:e,onProgress:i,onError:r});const a=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(a).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const m=Xf[t],g=f.body.getReader(),y=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),v=y?parseInt(y):0,S=v!==0;let E=0;const T=new ReadableStream({start(x){R();function R(){g.read().then(({done:D,value:O})=>{if(D)x.close();else{E+=O.byteLength;const N=new ProgressEvent("progress",{lengthComputable:S,loaded:E,total:v});for(let B=0,L=m.length;B<L;B++){const U=m[B];U.onProgress&&U.onProgress(N)}x.enqueue(O),R()}},D=>{x.error(D)})}}});return new Response(T)}else throw new K9(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(c){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(m=>new DOMParser().parseFromString(m,l));case"json":return f.json();default:if(l===void 0)return f.text();{const g=/charset="?([^;"\s]*)"?/i.exec(l),y=g&&g[1]?g[1].toLowerCase():void 0,v=new TextDecoder(y);return f.arrayBuffer().then(S=>v.decode(S))}}}).then(f=>{rh.add(t,f);const m=Xf[t];delete Xf[t];for(let g=0,y=m.length;g<y;g++){const v=m[g];v.onLoad&&v.onLoad(f)}}).catch(f=>{const m=Xf[t];if(m===void 0)throw this.manager.itemError(t),f;delete Xf[t];for(let g=0,y=m.length;g<y;g++){const v=m[g];v.onError&&v.onError(f)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Z9 extends Bo{constructor(t){super(t)}load(t,e,i,r){const s=this,a=new ph(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(l){try{e(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(t)}},i,r)}parse(t){const e=[];for(let i=0;i<t.length;i++){const r=ax.parse(t[i]);e.push(r)}return e}}class Q9 extends Bo{constructor(t){super(t)}load(t,e,i,r){const s=this,a=[],l=new QT,c=new ph(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let f=0;function m(g){c.load(t[g],function(y){const v=s.parse(y,!0);a[g]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},f+=1,f===6&&(v.mipmapCount===1&&(l.minFilter=ms),l.image=a,l.format=v.format,l.needsUpdate=!0,e&&e(l))},i,r)}if(Array.isArray(t))for(let g=0,y=t.length;g<y;++g)m(g);else c.load(t,function(g){const y=s.parse(g,!0);if(y.isCubemap){const v=y.mipmaps.length/y.mipmapCount;for(let S=0;S<v;S++){a[S]={mipmaps:[]};for(let E=0;E<y.mipmapCount;E++)a[S].mipmaps.push(y.mipmaps[S*y.mipmapCount+E]),a[S].format=y.format,a[S].width=y.width,a[S].height=y.height}l.image=a}else l.image.width=y.width,l.image.height=y.height,l.mipmaps=y.mipmaps;y.mipmapCount===1&&(l.minFilter=ms),l.format=y.format,l.needsUpdate=!0,e&&e(l)},i,r);return l}}class ox extends Bo{constructor(t){super(t)}load(t,e,i,r){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,a=rh.get(t);if(a!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(a),s.manager.itemEnd(t)},0),a;const l=J0("img");function c(){m(),rh.add(t,this),e&&e(this),s.manager.itemEnd(t)}function f(g){m(),r&&r(g),s.manager.itemError(t),s.manager.itemEnd(t)}function m(){l.removeEventListener("load",c,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",f,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(t),l.src=t,l}}class J9 extends Bo{constructor(t){super(t)}load(t,e,i,r){const s=new Lx;s.colorSpace=ba;const a=new ox(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let l=0;function c(f){a.load(t[f],function(m){s.images[f]=m,l++,l===6&&(s.needsUpdate=!0,e&&e(s))},void 0,r)}for(let f=0;f<t.length;++f)c(f);return s}}class tG extends Bo{constructor(t){super(t)}load(t,e,i,r){const s=this,a=new Wc,l=new ph(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(t,function(c){let f;try{f=s.parse(c)}catch(m){if(r!==void 0)r(m);else{console.error(m);return}}f.image!==void 0?a.image=f.image:f.data!==void 0&&(a.image.width=f.width,a.image.height=f.height,a.image.data=f.data),a.wrapS=f.wrapS!==void 0?f.wrapS:Hl,a.wrapT=f.wrapT!==void 0?f.wrapT:Hl,a.magFilter=f.magFilter!==void 0?f.magFilter:ms,a.minFilter=f.minFilter!==void 0?f.minFilter:ms,a.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(a.colorSpace=f.colorSpace),f.flipY!==void 0&&(a.flipY=f.flipY),f.format!==void 0&&(a.format=f.format),f.type!==void 0&&(a.type=f.type),f.mipmaps!==void 0&&(a.mipmaps=f.mipmaps,a.minFilter=Gc),f.mipmapCount===1&&(a.minFilter=ms),f.generateMipmaps!==void 0&&(a.generateMipmaps=f.generateMipmaps),a.needsUpdate=!0,e&&e(a,f)},i,r),a}}class eG extends Bo{constructor(t){super(t)}load(t,e,i,r){const s=new Fr,a=new ox(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(l){s.image=l,s.needsUpdate=!0,e!==void 0&&e(s)},i,r),s}}class Qd extends ii{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Ne(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}}class h4 extends Qd{constructor(t,e,i){super(t,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ii.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ne(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const gw=new nn,kI=new ut,HI=new ut;class fO{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new oe(512,512),this.map=null,this.mapPass=null,this.matrix=new nn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ux,this._frameExtents=new oe(1,1),this._viewportCount=1,this._viewports=[new ti(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,i=this.matrix;kI.setFromMatrixPosition(t.matrixWorld),e.position.copy(kI),HI.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(HI),e.updateMatrixWorld(),gw.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(gw),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(gw)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class nG extends fO{constructor(){super(new Ns(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,i=ky*2*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(i!==e.fov||r!==e.aspect||s!==e.far)&&(e.fov=i,e.aspect=r,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class d4 extends Qd{constructor(t,e,i=0,r=Math.PI/3,s=0,a=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ii.DEFAULT_UP),this.updateMatrix(),this.target=new ii,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new nG}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const GI=new nn,Vv=new ut,yw=new ut;class iG extends fO{constructor(){super(new Ns(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new oe(4,2),this._viewportCount=6,this._viewports=[new ti(2,1,1,1),new ti(0,1,1,1),new ti(3,1,1,1),new ti(1,1,1,1),new ti(3,0,1,1),new ti(1,0,1,1)],this._cubeDirections=[new ut(1,0,0),new ut(-1,0,0),new ut(0,0,1),new ut(0,0,-1),new ut(0,1,0),new ut(0,-1,0)],this._cubeUps=[new ut(0,1,0),new ut(0,1,0),new ut(0,1,0),new ut(0,1,0),new ut(0,0,1),new ut(0,0,-1)]}updateMatrices(t,e=0){const i=this.camera,r=this.matrix,s=t.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Vv.setFromMatrixPosition(t.matrixWorld),i.position.copy(Vv),yw.copy(i.position),yw.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(yw),i.updateMatrixWorld(),r.makeTranslation(-Vv.x,-Vv.y,-Vv.z),GI.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(GI)}}class p4 extends Qd{constructor(t,e,i=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new iG}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Gx extends WT{constructor(t=-1,e=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-t,a=i+t,l=r+e,c=r-e;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,a=s+f*this.view.width,l-=m*this.view.offsetY,c=l-m*this.view.height}this.projectionMatrix.makeOrthographic(s,a,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class rG extends fO{constructor(){super(new Gx(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class m4 extends Qd{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ii.DEFAULT_UP),this.updateMatrix(),this.target=new ii,this.shadow=new rG}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class g4 extends Qd{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class y4 extends Qd{constructor(t,e,i=10,r=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class _4{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new ut)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const i=t.x,r=t.y,s=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScaledVector(a[1],.488603*r),e.addScaledVector(a[2],.488603*s),e.addScaledVector(a[3],.488603*i),e.addScaledVector(a[4],1.092548*(i*r)),e.addScaledVector(a[5],1.092548*(r*s)),e.addScaledVector(a[6],.315392*(3*s*s-1)),e.addScaledVector(a[7],1.092548*(i*s)),e.addScaledVector(a[8],.546274*(i*i-r*r)),e}getIrradianceAt(t,e){const i=t.x,r=t.y,s=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScaledVector(a[1],2*.511664*r),e.addScaledVector(a[2],2*.511664*s),e.addScaledVector(a[3],2*.511664*i),e.addScaledVector(a[4],2*.429043*i*r),e.addScaledVector(a[5],2*.429043*r*s),e.addScaledVector(a[6],.743125*s*s-.247708),e.addScaledVector(a[7],2*.429043*i*s),e.addScaledVector(a[8],.429043*(i*i-r*r)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(t,e+r*3);return this}toArray(t=[],e=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(t,e+r*3);return t}static getBasisAt(t,e){const i=t.x,r=t.y,s=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*s,e[3]=.488603*i,e[4]=1.092548*i*r,e[5]=1.092548*r*s,e[6]=.315392*(3*s*s-1),e[7]=1.092548*i*s,e[8]=.546274*(i*i-r*r)}}class v4 extends Qd{constructor(t=new _4,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class hM extends Bo{constructor(t){super(t),this.textures={}}load(t,e,i,r){const s=this,a=new ph(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(t,function(l){try{e(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(t)}},i,r)}parse(t){const e=this.textures;function i(s){return e[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),e[s]}const r=this.createMaterialFromType(t.type);if(t.uuid!==void 0&&(r.uuid=t.uuid),t.name!==void 0&&(r.name=t.name),t.color!==void 0&&r.color!==void 0&&r.color.setHex(t.color),t.roughness!==void 0&&(r.roughness=t.roughness),t.metalness!==void 0&&(r.metalness=t.metalness),t.sheen!==void 0&&(r.sheen=t.sheen),t.sheenColor!==void 0&&(r.sheenColor=new Ne().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(r.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(t.emissive),t.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(t.specular),t.specularIntensity!==void 0&&(r.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(r.shininess=t.shininess),t.clearcoat!==void 0&&(r.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(r.dispersion=t.dispersion),t.iridescence!==void 0&&(r.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(r.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(r.transmission=t.transmission),t.thickness!==void 0&&(r.thickness=t.thickness),t.attenuationDistance!==void 0&&(r.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(r.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(r.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(r.fog=t.fog),t.flatShading!==void 0&&(r.flatShading=t.flatShading),t.blending!==void 0&&(r.blending=t.blending),t.combine!==void 0&&(r.combine=t.combine),t.side!==void 0&&(r.side=t.side),t.shadowSide!==void 0&&(r.shadowSide=t.shadowSide),t.opacity!==void 0&&(r.opacity=t.opacity),t.transparent!==void 0&&(r.transparent=t.transparent),t.alphaTest!==void 0&&(r.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(r.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(r.depthFunc=t.depthFunc),t.depthTest!==void 0&&(r.depthTest=t.depthTest),t.depthWrite!==void 0&&(r.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(r.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(r.blendSrc=t.blendSrc),t.blendDst!==void 0&&(r.blendDst=t.blendDst),t.blendEquation!==void 0&&(r.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(r.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(r.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(r.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(r.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(r.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(r.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(r.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(r.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(r.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(r.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(r.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(r.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(r.rotation=t.rotation),t.linewidth!==void 0&&(r.linewidth=t.linewidth),t.dashSize!==void 0&&(r.dashSize=t.dashSize),t.gapSize!==void 0&&(r.gapSize=t.gapSize),t.scale!==void 0&&(r.scale=t.scale),t.polygonOffset!==void 0&&(r.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(r.dithering=t.dithering),t.alphaToCoverage!==void 0&&(r.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(r.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(r.visible=t.visible),t.toneMapped!==void 0&&(r.toneMapped=t.toneMapped),t.userData!==void 0&&(r.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?r.vertexColors=t.vertexColors>0:r.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const s in t.uniforms){const a=t.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=i(a.value);break;case"c":r.uniforms[s].value=new Ne().setHex(a.value);break;case"v2":r.uniforms[s].value=new oe().fromArray(a.value);break;case"v3":r.uniforms[s].value=new ut().fromArray(a.value);break;case"v4":r.uniforms[s].value=new ti().fromArray(a.value);break;case"m3":r.uniforms[s].value=new _n().fromArray(a.value);break;case"m4":r.uniforms[s].value=new nn().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(t.defines!==void 0&&(r.defines=t.defines),t.vertexShader!==void 0&&(r.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(r.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(r.glslVersion=t.glslVersion),t.extensions!==void 0)for(const s in t.extensions)r.extensions[s]=t.extensions[s];if(t.lights!==void 0&&(r.lights=t.lights),t.clipping!==void 0&&(r.clipping=t.clipping),t.size!==void 0&&(r.size=t.size),t.sizeAttenuation!==void 0&&(r.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(r.map=i(t.map)),t.matcap!==void 0&&(r.matcap=i(t.matcap)),t.alphaMap!==void 0&&(r.alphaMap=i(t.alphaMap)),t.bumpMap!==void 0&&(r.bumpMap=i(t.bumpMap)),t.bumpScale!==void 0&&(r.bumpScale=t.bumpScale),t.normalMap!==void 0&&(r.normalMap=i(t.normalMap)),t.normalMapType!==void 0&&(r.normalMapType=t.normalMapType),t.normalScale!==void 0){let s=t.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new oe().fromArray(s)}return t.displacementMap!==void 0&&(r.displacementMap=i(t.displacementMap)),t.displacementScale!==void 0&&(r.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(r.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(r.roughnessMap=i(t.roughnessMap)),t.metalnessMap!==void 0&&(r.metalnessMap=i(t.metalnessMap)),t.emissiveMap!==void 0&&(r.emissiveMap=i(t.emissiveMap)),t.emissiveIntensity!==void 0&&(r.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(r.specularMap=i(t.specularMap)),t.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(t.specularIntensityMap)),t.specularColorMap!==void 0&&(r.specularColorMap=i(t.specularColorMap)),t.envMap!==void 0&&(r.envMap=i(t.envMap)),t.envMapRotation!==void 0&&r.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(r.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(r.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(r.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(r.lightMap=i(t.lightMap)),t.lightMapIntensity!==void 0&&(r.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(r.aoMap=i(t.aoMap)),t.aoMapIntensity!==void 0&&(r.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(r.gradientMap=i(t.gradientMap)),t.clearcoatMap!==void 0&&(r.clearcoatMap=i(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new oe().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(r.iridescenceMap=i(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(r.transmissionMap=i(t.transmissionMap)),t.thicknessMap!==void 0&&(r.thicknessMap=i(t.thicknessMap)),t.anisotropyMap!==void 0&&(r.anisotropyMap=i(t.anisotropyMap)),t.sheenColorMap!==void 0&&(r.sheenColorMap=i(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(t.sheenRoughnessMap)),r}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return hM.createMaterialFromType(t)}static createMaterialFromType(t){const e={ShadowMaterial:QB,SpriteMaterial:W2,RawShaderMaterial:JB,ShaderMaterial:ql,PointsMaterial:$2,MeshPhysicalMaterial:t4,MeshStandardMaterial:iO,MeshPhongMaterial:e4,MeshToonMaterial:n4,MeshNormalMaterial:i4,MeshLambertMaterial:rO,MeshDepthMaterial:sO,MeshDistanceMaterial:aO,MeshBasicMaterial:Kd,MeshMatcapMaterial:r4,LineDashedMaterial:s4,LineBasicMaterial:Oa,Material:Ra};return new e[t]}}class tR{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let i=0,r=t.length;i<r;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class x4 extends bn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class b4 extends Bo{constructor(t){super(t)}load(t,e,i,r){const s=this,a=new ph(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(t,function(l){try{e(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(t)}},i,r)}parse(t){const e={},i={};function r(v,S){if(e[S]!==void 0)return e[S];const T=v.interleavedBuffers[S],x=s(v,T.buffer),R=wy(T.type,x),D=new KT(R,T.stride);return D.uuid=T.uuid,e[S]=D,D}function s(v,S){if(i[S]!==void 0)return i[S];const T=v.arrayBuffers[S],x=new Uint32Array(T).buffer;return i[S]=x,x}const a=t.isInstancedBufferGeometry?new x4:new bn,l=t.data.index;if(l!==void 0){const v=wy(l.type,l.array);a.setIndex(new wi(v,1))}const c=t.data.attributes;for(const v in c){const S=c[v];let E;if(S.isInterleavedBufferAttribute){const T=r(t.data,S.data);E=new Im(T,S.itemSize,S.offset,S.normalized)}else{const T=wy(S.type,S.array),x=S.isInstancedBufferAttribute?qy:wi;E=new x(T,S.itemSize,S.normalized)}S.name!==void 0&&(E.name=S.name),S.usage!==void 0&&E.setUsage(S.usage),a.setAttribute(v,E)}const f=t.data.morphAttributes;if(f)for(const v in f){const S=f[v],E=[];for(let T=0,x=S.length;T<x;T++){const R=S[T];let D;if(R.isInterleavedBufferAttribute){const O=r(t.data,R.data);D=new Im(O,R.itemSize,R.offset,R.normalized)}else{const O=wy(R.type,R.array);D=new wi(O,R.itemSize,R.normalized)}R.name!==void 0&&(D.name=R.name),E.push(D)}a.morphAttributes[v]=E}t.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const g=t.data.groups||t.data.drawcalls||t.data.offsets;if(g!==void 0)for(let v=0,S=g.length;v!==S;++v){const E=g[v];a.addGroup(E.start,E.count,E.materialIndex)}const y=t.data.boundingSphere;if(y!==void 0){const v=new ut;y.center!==void 0&&v.fromArray(y.center),a.boundingSphere=new Zs(v,y.radius)}return t.name&&(a.name=t.name),t.userData&&(a.userData=t.userData),a}}class sG extends Bo{constructor(t){super(t)}load(t,e,i,r){const s=this,a=this.path===""?tR.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const l=new ph(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(c){let f=null;try{f=JSON.parse(c)}catch(g){r!==void 0&&r(g),console.error("THREE:ObjectLoader: Can't parse "+t+".",g.message);return}const m=f.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}s.parse(f,e)},i,r)}async loadAsync(t,e){const i=this,r=this.path===""?tR.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||r;const s=new ph(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(t,e),l=JSON.parse(a),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await i.parseAsync(l)}parse(t,e){const i=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),s=this.parseGeometries(t.geometries,r),a=this.parseImages(t.images,function(){e!==void 0&&e(f)}),l=this.parseTextures(t.textures,a),c=this.parseMaterials(t.materials,l),f=this.parseObject(t.object,s,c,l,i),m=this.parseSkeletons(t.skeletons,f);if(this.bindSkeletons(f,m),this.bindLightTargets(f),e!==void 0){let g=!1;for(const y in a)if(a[y].data instanceof HTMLImageElement){g=!0;break}g===!1&&e(f)}return f}async parseAsync(t){const e=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),s=await this.parseImagesAsync(t.images),a=this.parseTextures(t.textures,s),l=this.parseMaterials(t.materials,a),c=this.parseObject(t.object,r,l,a,e),f=this.parseSkeletons(t.skeletons,c);return this.bindSkeletons(c,f),this.bindLightTargets(c),c}parseShapes(t){const e={};if(t!==void 0)for(let i=0,r=t.length;i<r;i++){const s=new Tm().fromJSON(t[i]);e[s.uuid]=s}return e}parseSkeletons(t,e){const i={},r={};if(e.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),t!==void 0)for(let s=0,a=t.length;s<a;s++){const l=new ZT().fromJSON(t[s],r);i[l.uuid]=l}return i}parseGeometries(t,e){const i={};if(t!==void 0){const r=new b4;for(let s=0,a=t.length;s<a;s++){let l;const c=t[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(c);break;default:c.type in FI?l=FI[c.type].fromJSON(c,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),i[c.uuid]=l}}return i}parseMaterials(t,e){const i={},r={};if(t!==void 0){const s=new hM;s.setTextures(e);for(let a=0,l=t.length;a<l;a++){const c=t[a];i[c.uuid]===void 0&&(i[c.uuid]=s.parse(c)),r[c.uuid]=i[c.uuid]}}return r}parseAnimations(t){const e={};if(t!==void 0)for(let i=0;i<t.length;i++){const r=t[i],s=ax.parse(r);e[s.uuid]=s}return e}parseImages(t,e){const i=this,r={};let s;function a(c){return i.manager.itemStart(c),s.load(c,function(){i.manager.itemEnd(c)},void 0,function(){i.manager.itemError(c),i.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const f=c,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return a(m)}else return c.data?{data:wy(c.type,c.data),width:c.width,height:c.height}:null}if(t!==void 0&&t.length>0){const c=new cO(e);s=new ox(c),s.setCrossOrigin(this.crossOrigin);for(let f=0,m=t.length;f<m;f++){const g=t[f],y=g.url;if(Array.isArray(y)){const v=[];for(let S=0,E=y.length;S<E;S++){const T=y[S],x=l(T);x!==null&&(x instanceof HTMLImageElement?v.push(x):v.push(new Wc(x.data,x.width,x.height)))}r[g.uuid]=new Td(v)}else{const v=l(g.url);r[g.uuid]=new Td(v)}}}return r}async parseImagesAsync(t){const e=this,i={};let r;async function s(a){if(typeof a=="string"){const l=a,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:e.resourcePath+l;return await r.loadAsync(c)}else return a.data?{data:wy(a.type,a.data),width:a.width,height:a.height}:null}if(t!==void 0&&t.length>0){r=new ox(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,l=t.length;a<l;a++){const c=t[a],f=c.url;if(Array.isArray(f)){const m=[];for(let g=0,y=f.length;g<y;g++){const v=f[g],S=await s(v);S!==null&&(S instanceof HTMLImageElement?m.push(S):m.push(new Wc(S.data,S.width,S.height)))}i[c.uuid]=new Td(m)}else{const m=await s(c.url);i[c.uuid]=new Td(m)}}}return i}parseTextures(t,e){function i(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(t!==void 0)for(let s=0,a=t.length;s<a;s++){const l=t[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),e[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const c=e[l.image],f=c.data;let m;Array.isArray(f)?(m=new Lx,f.length===6&&(m.needsUpdate=!0)):(f&&f.data?m=new Wc:m=new Fr,f&&(m.needsUpdate=!0)),m.source=c,m.uuid=l.uuid,l.name!==void 0&&(m.name=l.name),l.mapping!==void 0&&(m.mapping=i(l.mapping,aG)),l.channel!==void 0&&(m.channel=l.channel),l.offset!==void 0&&m.offset.fromArray(l.offset),l.repeat!==void 0&&m.repeat.fromArray(l.repeat),l.center!==void 0&&m.center.fromArray(l.center),l.rotation!==void 0&&(m.rotation=l.rotation),l.wrap!==void 0&&(m.wrapS=i(l.wrap[0],qI),m.wrapT=i(l.wrap[1],qI)),l.format!==void 0&&(m.format=l.format),l.internalFormat!==void 0&&(m.internalFormat=l.internalFormat),l.type!==void 0&&(m.type=l.type),l.colorSpace!==void 0&&(m.colorSpace=l.colorSpace),l.minFilter!==void 0&&(m.minFilter=i(l.minFilter,jI)),l.magFilter!==void 0&&(m.magFilter=i(l.magFilter,jI)),l.anisotropy!==void 0&&(m.anisotropy=l.anisotropy),l.flipY!==void 0&&(m.flipY=l.flipY),l.generateMipmaps!==void 0&&(m.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(m.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(m.compareFunction=l.compareFunction),l.userData!==void 0&&(m.userData=l.userData),r[l.uuid]=m}return r}parseObject(t,e,i,r,s){let a;function l(y){return e[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",y),e[y]}function c(y){if(y!==void 0){if(Array.isArray(y)){const v=[];for(let S=0,E=y.length;S<E;S++){const T=y[S];i[T]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",T),v.push(i[T])}return v}return i[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),i[y]}}function f(y){return r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",y),r[y]}let m,g;switch(t.type){case"Scene":a=new X2,t.background!==void 0&&(Number.isInteger(t.background)?a.background=new Ne(t.background):a.background=f(t.background)),t.environment!==void 0&&(a.environment=f(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?a.fog=new $T(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(a.fog=new YT(t.fog.color,t.fog.density)),t.fog.name!==""&&(a.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(a.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(a.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&a.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":a=new Ns(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(a.focus=t.focus),t.zoom!==void 0&&(a.zoom=t.zoom),t.filmGauge!==void 0&&(a.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(a.filmOffset=t.filmOffset),t.view!==void 0&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new Gx(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(a.zoom=t.zoom),t.view!==void 0&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new g4(t.color,t.intensity);break;case"DirectionalLight":a=new m4(t.color,t.intensity),a.target=t.target||"";break;case"PointLight":a=new p4(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new y4(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new d4(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),a.target=t.target||"";break;case"HemisphereLight":a=new h4(t.color,t.groundColor,t.intensity);break;case"LightProbe":a=new v4().fromJSON(t);break;case"SkinnedMesh":m=l(t.geometry),g=c(t.material),a=new zB(m,g),t.bindMode!==void 0&&(a.bindMode=t.bindMode),t.bindMatrix!==void 0&&a.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(a.skeleton=t.skeleton);break;case"Mesh":m=l(t.geometry),g=c(t.material),a=new $r(m,g);break;case"InstancedMesh":m=l(t.geometry),g=c(t.material);const y=t.count,v=t.instanceMatrix,S=t.instanceColor;a=new BB(m,g,y),a.instanceMatrix=new qy(new Float32Array(v.array),16),S!==void 0&&(a.instanceColor=new qy(new Float32Array(S.array),S.itemSize));break;case"BatchedMesh":m=l(t.geometry),g=c(t.material),a=new VB(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,g),a.geometry=m,a.perObjectFrustumCulled=t.perObjectFrustumCulled,a.sortObjects=t.sortObjects,a._drawRanges=t.drawRanges,a._reservedRanges=t.reservedRanges,a._visibility=t.visibility,a._active=t.active,a._bounds=t.bounds.map(E=>{const T=new Ks;T.min.fromArray(E.boxMin),T.max.fromArray(E.boxMax);const x=new Zs;return x.radius=E.sphereRadius,x.center.fromArray(E.sphereCenter),{boxInitialized:E.boxInitialized,box:T,sphereInitialized:E.sphereInitialized,sphere:x}}),a._maxInstanceCount=t.maxInstanceCount,a._maxVertexCount=t.maxVertexCount,a._maxIndexCount=t.maxIndexCount,a._geometryInitialized=t.geometryInitialized,a._geometryCount=t.geometryCount,a._matricesTexture=f(t.matricesTexture.uuid),t.colorsTexture!==void 0&&(a._colorsTexture=f(t.colorsTexture.uuid));break;case"LOD":a=new UB;break;case"Line":a=new dh(l(t.geometry),c(t.material));break;case"LineLoop":a=new FB(l(t.geometry),c(t.material));break;case"LineSegments":a=new af(l(t.geometry),c(t.material));break;case"PointCloud":case"Points":a=new kB(l(t.geometry),c(t.material));break;case"Sprite":a=new LB(c(t.material));break;case"Group":a=new Md;break;case"Bone":a=new Y2;break;default:a=new ii}if(a.uuid=t.uuid,t.name!==void 0&&(a.name=t.name),t.matrix!==void 0?(a.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(t.position!==void 0&&a.position.fromArray(t.position),t.rotation!==void 0&&a.rotation.fromArray(t.rotation),t.quaternion!==void 0&&a.quaternion.fromArray(t.quaternion),t.scale!==void 0&&a.scale.fromArray(t.scale)),t.up!==void 0&&a.up.fromArray(t.up),t.castShadow!==void 0&&(a.castShadow=t.castShadow),t.receiveShadow!==void 0&&(a.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.intensity!==void 0&&(a.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&&(a.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(a.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(a.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(a.visible=t.visible),t.frustumCulled!==void 0&&(a.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(a.renderOrder=t.renderOrder),t.userData!==void 0&&(a.userData=t.userData),t.layers!==void 0&&(a.layers.mask=t.layers),t.children!==void 0){const y=t.children;for(let v=0;v<y.length;v++)a.add(this.parseObject(y[v],e,i,r,s))}if(t.animations!==void 0){const y=t.animations;for(let v=0;v<y.length;v++){const S=y[v];a.animations.push(s[S])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(a.autoUpdate=t.autoUpdate);const y=t.levels;for(let v=0;v<y.length;v++){const S=y[v],E=a.getObjectByProperty("uuid",S.object);E!==void 0&&a.addLevel(E,S.distance,S.hysteresis)}}return a}bindSkeletons(t,e){Object.keys(e).length!==0&&t.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=e[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(t){t.traverse(function(e){if(e.isDirectionalLight||e.isSpotLight){const i=e.target,r=t.getObjectByProperty("uuid",i);r!==void 0?e.target=r:e.target=new ii}})}}const aG={UVMapping:zT,CubeReflectionMapping:fh,CubeRefractionMapping:zd,EquirectangularReflectionMapping:q0,EquirectangularRefractionMapping:j0,CubeUVReflectionMapping:h_},qI={RepeatWrapping:X0,ClampToEdgeWrapping:Hl,MirroredRepeatWrapping:W0},jI={NearestFilter:$s,NearestMipmapNearestFilter:D2,NearestMipmapLinearFilter:Ay,LinearFilter:ms,LinearMipmapNearestFilter:b0,LinearMipmapLinearFilter:Gc};class oG extends Bo{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,a=rh.get(t);if(a!==void 0){if(s.manager.itemStart(t),a.then){a.then(f=>{e&&e(f),s.manager.itemEnd(t)}).catch(f=>{r&&r(f)});return}return setTimeout(function(){e&&e(a),s.manager.itemEnd(t)},0),a}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const c=fetch(t,l).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(f){return rh.add(t,f),e&&e(f),s.manager.itemEnd(t),f}).catch(function(f){r&&r(f),rh.remove(t),s.manager.itemError(t),s.manager.itemEnd(t)});rh.add(t,c),s.manager.itemStart(t)}}let JS;class hO{static getContext(){return JS===void 0&&(JS=new(window.AudioContext||window.webkitAudioContext)),JS}static setContext(t){JS=t}}class lG extends Bo{constructor(t){super(t)}load(t,e,i,r){const s=this,a=new ph(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(c){try{const f=c.slice(0);hO.getContext().decodeAudioData(f,function(g){e(g)}).catch(l)}catch(f){l(f)}},i,r);function l(c){r?r(c):console.error(c),s.manager.itemError(t)}}}const XI=new nn,WI=new nn,jp=new nn;class uG{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ns,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ns,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,jp.copy(t.projectionMatrix);const r=e.eyeSep/2,s=r*e.near/e.focus,a=e.near*Math.tan(Em*e.fov*.5)/e.zoom;let l,c;WI.elements[12]=-r,XI.elements[12]=r,l=-a*e.aspect+s,c=a*e.aspect+s,jp.elements[0]=2*e.near/(c-l),jp.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(jp),l=-a*e.aspect-s,c=a*e.aspect-s,jp.elements[0]=2*e.near/(c-l),jp.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(jp)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(WI),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(XI)}}class S4 extends Ns{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t,this.index=0}}class dO{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=YI(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=YI();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function YI(){return performance.now()}const Xp=new ut,$I=new Za,cG=new ut,Wp=new ut;class fG extends ii{constructor(){super(),this.type="AudioListener",this.context=hO.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new dO}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Xp,$I,cG),Wp.set(0,0,-1).applyQuaternion($I),e.positionX){const r=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Xp.x,r),e.positionY.linearRampToValueAtTime(Xp.y,r),e.positionZ.linearRampToValueAtTime(Xp.z,r),e.forwardX.linearRampToValueAtTime(Wp.x,r),e.forwardY.linearRampToValueAtTime(Wp.y,r),e.forwardZ.linearRampToValueAtTime(Wp.z,r),e.upX.linearRampToValueAtTime(i.x,r),e.upY.linearRampToValueAtTime(i.y,r),e.upZ.linearRampToValueAtTime(i.z,r)}else e.setPosition(Xp.x,Xp.y,Xp.z),e.setOrientation(Wp.x,Wp.y,Wp.z,i.x,i.y,i.z)}}class E4 extends ii{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),t.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}}const Yp=new ut,KI=new Za,hG=new ut,$p=new ut;class dG extends E4{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,i){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=i,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Yp,KI,hG),$p.set(0,0,1).applyQuaternion(KI);const e=this.panner;if(e.positionX){const i=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(Yp.x,i),e.positionY.linearRampToValueAtTime(Yp.y,i),e.positionZ.linearRampToValueAtTime(Yp.z,i),e.orientationX.linearRampToValueAtTime($p.x,i),e.orientationY.linearRampToValueAtTime($p.y,i),e.orientationZ.linearRampToValueAtTime($p.z,i)}else e.setPosition(Yp.x,Yp.y,Yp.z),e.setOrientation($p.x,$p.y,$p.z)}}class pG{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let i=0;i<e.length;i++)t+=e[i];return t/e.length}}class T4{constructor(t,e,i){this.binding=t,this.valueSize=i;let r,s,a;switch(e){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const i=this.buffer,r=this.valueSize,s=t*r+r;let a=this.cumulativeWeight;if(a===0){for(let l=0;l!==r;++l)i[s+l]=i[l];a=e}else{a+=e;const l=e/a;this._mixBufferRegion(i,s,0,l,r)}this.cumulativeWeight=a}accumulateAdditive(t){const e=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,i=this.buffer,r=t*e+e,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=e*this._origIndex;this._mixBufferRegion(i,r,c,1-s,e)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*e,1,e);for(let c=e,f=e+e;c!==f;++c)if(i[c]!==i[c+e]){l.setValue(i,r);break}}saveOriginalState(){const t=this.binding,e=this.buffer,i=this.valueSize,r=i*this._origIndex;t.getValue(e,r);for(let s=i,a=r;s!==a;++s)e[s]=e[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)t[e+a]=t[i+a]}_slerp(t,e,i,r){Za.slerpFlat(t,e,t,e,t,i,r)}_slerpAdditive(t,e,i,r,s){const a=this._workIndex*s;Za.multiplyQuaternionsFlat(t,a,t,e,t,i),Za.slerpFlat(t,e,t,e,t,a,r)}_lerp(t,e,i,r,s){const a=1-r;for(let l=0;l!==s;++l){const c=e+l;t[c]=t[c]*a+t[i+l]*r}}_lerpAdditive(t,e,i,r,s){for(let a=0;a!==s;++a){const l=e+a;t[l]=t[l]+t[i+a]*r}}}const pO="\\[\\]\\.:\\/",mG=new RegExp("["+pO+"]","g"),mO="[^"+pO+"]",gG="[^"+pO.replace("\\.","")+"]",yG=/((?:WC+[\/:])*)/.source.replace("WC",mO),_G=/(WCOD+)?/.source.replace("WCOD",gG),vG=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",mO),xG=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",mO),bG=new RegExp("^"+yG+_G+vG+xG+"$"),SG=["material","materials","bones","map"];class EG{constructor(t,e,i){const r=i||ni.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}class ni{constructor(t,e,i){this.path=e,this.parsedPath=i||ni.parseTrackName(e),this.node=ni.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return t&&t.isAnimationObjectGroup?new ni.Composite(t,e,i):new ni(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(mG,"")}static parseTrackName(t){const e=bG.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);SG.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(e);if(i!==void 0)return i}if(t.children){const i=function(s){for(let a=0;a<s.length;a++){const l=s[a];if(l.name===e||l.uuid===e)return l;const c=i(l.children);if(c)return c}return null},r=i(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)t[e++]=i[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,i=e.objectName,r=e.propertyName;let s=e.propertyIndex;if(t||(t=ni.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let f=e.objectIndex;switch(i){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let m=0;m<t.length;m++)if(t[m].name===f){f=m;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[i]}if(f!==void 0){if(t[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[f]}}const a=t[r];if(a===void 0){const f=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?l=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ni.Composite=EG;ni.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ni.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ni.prototype.GetterByBindingType=[ni.prototype._getValue_direct,ni.prototype._getValue_array,ni.prototype._getValue_arrayElement,ni.prototype._getValue_toArray];ni.prototype.SetterByBindingTypeAndVersioning=[[ni.prototype._setValue_direct,ni.prototype._setValue_direct_setNeedsUpdate,ni.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ni.prototype._setValue_array,ni.prototype._setValue_array_setNeedsUpdate,ni.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ni.prototype._setValue_arrayElement,ni.prototype._setValue_arrayElement_setNeedsUpdate,ni.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ni.prototype._setValue_fromArray,ni.prototype._setValue_fromArray_setNeedsUpdate,ni.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class TG{constructor(){this.isAnimationObjectGroup=!0,this.uuid=cl(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let i=0,r=arguments.length;i!==r;++i)t[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let l,c=t.length,f=this.nCachedObjects_;for(let m=0,g=arguments.length;m!==g;++m){const y=arguments[m],v=y.uuid;let S=e[v];if(S===void 0){S=c++,e[v]=S,t.push(y);for(let E=0,T=a;E!==T;++E)s[E].push(new ni(y,i[E],r[E]))}else if(S<f){l=t[S];const E=--f,T=t[E];e[T.uuid]=S,t[S]=T,e[v]=E,t[E]=y;for(let x=0,R=a;x!==R;++x){const D=s[x],O=D[E];let N=D[S];D[S]=O,N===void 0&&(N=new ni(y,i[x],r[x])),D[E]=N}}else t[S]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const t=this._objects,e=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],f=c.uuid,m=e[f];if(m!==void 0&&m>=s){const g=s++,y=t[g];e[y.uuid]=m,t[m]=y,e[f]=g,t[g]=c;for(let v=0,S=r;v!==S;++v){const E=i[v],T=E[g],x=E[m];E[m]=T,E[g]=x}}}this.nCachedObjects_=s}uncache(){const t=this._objects,e=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,a=t.length;for(let l=0,c=arguments.length;l!==c;++l){const f=arguments[l],m=f.uuid,g=e[m];if(g!==void 0)if(delete e[m],g<s){const y=--s,v=t[y],S=--a,E=t[S];e[v.uuid]=g,t[g]=v,e[E.uuid]=y,t[y]=E,t.pop();for(let T=0,x=r;T!==x;++T){const R=i[T],D=R[y],O=R[S];R[g]=D,R[y]=O,R.pop()}}else{const y=--a,v=t[y];y>0&&(e[v.uuid]=g),t[g]=v,t.pop();for(let S=0,E=r;S!==E;++S){const T=i[S];T[g]=T[y],T.pop()}}}this.nCachedObjects_=s}subscribe_(t,e){const i=this._bindingsIndicesByPath;let r=i[t];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,l=this._parsedPaths,c=this._objects,f=c.length,m=this.nCachedObjects_,g=new Array(f);r=s.length,i[t]=r,a.push(t),l.push(e),s.push(g);for(let y=m,v=c.length;y!==v;++y){const S=c[y];g[y]=new ni(S,t,e)}return g}unsubscribe_(t){const e=this._bindingsIndicesByPath,i=e[t];if(i!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,l=a.length-1,c=a[l],f=t[l];e[f]=i,a[i]=c,a.pop(),s[i]=s[l],s.pop(),r[i]=r[l],r.pop()}}}class M4{constructor(t,e,i=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=i,this.blendMode=r;const s=e.tracks,a=s.length,l=new Array(a),c={endingStart:pm,endingEnd:pm};for(let f=0;f!==a;++f){const m=s[f].createInterpolant(null);l[f]=m,m.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=dB,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){const r=this._clip.duration,s=t._clip.duration,a=s/r,l=r/s;t.warp(1,a,e),this.warp(l,1,e)}return this}crossFadeTo(t,e,i){return t.crossFadeFrom(this,e,i)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){const r=this._mixer,s=r.time,a=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,f=l.sampleValues;return c[0]=s,c[1]=s+i,f[0]=t/a,f[1]=e/a,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,r){if(!this.enabled){this._updateWeight(t);return}const s=this._startTime;if(s!==null){const c=(t-s)*i;c<0||i===0?e=0:(this._startTime=null,e=i*c)}e*=this._updateTimeScale(t);const a=this._updateTime(e),l=this._updateWeight(t);if(l>0){const c=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case k2:for(let m=0,g=c.length;m!==g;++m)c[m].evaluate(a),f[m].accumulateAdditive(l);break;case qT:default:for(let m=0,g=c.length;m!==g;++m)c[m].evaluate(a),f[m].accumulate(r,l)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(t)[0];e*=r,t>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(t)[0];e*=r,t>i.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,i=this.loop;let r=this.time+t,s=this._loopCount;const a=i===pB;if(t===0)return s===-1?r:a&&(s&1)===1?e-r:r;if(i===hB){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else if(r<0)r=0;else{this.time=r;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(s===-1&&(t>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=e||r<0){const l=Math.floor(r/e);r-=e*l,s+=Math.abs(l);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(c===1){const f=t<0;this._setEndings(f,!f,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(a&&(s&1)===1)return e-r}return r}_setEndings(t,e,i){const r=this._interpolantSettings;i?(r.endingStart=mm,r.endingEnd=mm):(t?r.endingStart=this.zeroSlopeAtStart?mm:pm:r.endingStart=$0,e?r.endingEnd=this.zeroSlopeAtEnd?mm:pm:r.endingEnd=$0)}_scheduleFading(t,e,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,c[0]=e,l[1]=s+t,c[1]=i,this}}const MG=new Float32Array(1);class AG extends sf{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const i=t._localRoot||this._root,r=t._clip.tracks,s=r.length,a=t._propertyBindings,l=t._interpolants,c=i.uuid,f=this._bindingsByRootAndName;let m=f[c];m===void 0&&(m={},f[c]=m);for(let g=0;g!==s;++g){const y=r[g],v=y.name;let S=m[v];if(S!==void 0)++S.referenceCount,a[g]=S;else{if(S=a[g],S!==void 0){S._cacheIndex===null&&(++S.referenceCount,this._addInactiveBinding(S,c,v));continue}const E=e&&e._propertyBindings[g].binding.parsedPath;S=new T4(ni.create(i,v,E),y.ValueTypeName,y.getValueSize()),++S.referenceCount,this._addInactiveBinding(S,c,v),a[g]=S}l[g].resultBuffer=S.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const i=(t._localRoot||this._root).uuid,r=t._clip.uuid,s=this._actionsByClip[r];this._bindAction(t,s&&s.knownActions[0]),this._addInactiveAction(t,r,i)}const e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){const s=e[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){const s=e[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,i){const r=this._actions,s=this._actionsByClip;let a=s[e];if(a===void 0)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,s[e]=a;else{const l=a.knownActions;t._byClipCacheIndex=l.length,l.push(t)}t._cacheIndex=r.length,r.push(t),a.actionByRoot[i]=t}_removeInactiveAction(t){const e=this._actions,i=e[e.length-1],r=t._cacheIndex;i._cacheIndex=r,e[r]=i,e.pop(),t._cacheIndex=null;const s=t._clip.uuid,a=this._actionsByClip,l=a[s],c=l.knownActions,f=c[c.length-1],m=t._byClipCacheIndex;f._byClipCacheIndex=m,c[m]=f,c.pop(),t._byClipCacheIndex=null;const g=l.actionByRoot,y=(t._localRoot||this._root).uuid;delete g[y],c.length===0&&delete a[s],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){const s=e[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(t){const e=this._actions,i=t._cacheIndex,r=this._nActiveActions++,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=i,e[i]=s}_takeBackAction(t){const e=this._actions,i=t._cacheIndex,r=--this._nActiveActions,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=i,e[i]=s}_addInactiveBinding(t,e,i){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[e];a===void 0&&(a={},r[e]=a),a[i]=t,t._cacheIndex=s.length,s.push(t)}_removeInactiveBinding(t){const e=this._bindings,i=t.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,l=a[r],c=e[e.length-1],f=t._cacheIndex;c._cacheIndex=f,e[f]=c,e.pop(),delete l[s],Object.keys(l).length===0&&delete a[r]}_lendBinding(t){const e=this._bindings,i=t._cacheIndex,r=this._nActiveBindings++,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=i,e[i]=s}_takeBackBinding(t){const e=this._bindings,i=t._cacheIndex,r=--this._nActiveBindings,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=i,e[i]=s}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let i=t[e];return i===void 0&&(i=new lO(new Float32Array(2),new Float32Array(2),1,MG),i.__cacheIndex=e,t[e]=i),i}_takeBackControlInterpolant(t){const e=this._controlInterpolants,i=t.__cacheIndex,r=--this._nActiveControlInterpolants,s=e[r];t.__cacheIndex=r,e[r]=t,s.__cacheIndex=i,e[i]=s}clipAction(t,e,i){const r=e||this._root,s=r.uuid;let a=typeof t=="string"?ax.findByName(r,t):t;const l=a!==null?a.uuid:t,c=this._actionsByClip[l];let f=null;if(i===void 0&&(a!==null?i=a.blendMode:i=qT),c!==void 0){const g=c.actionByRoot[s];if(g!==void 0&&g.blendMode===i)return g;f=c.knownActions[0],a===null&&(a=f._clip)}if(a===null)return null;const m=new M4(this,a,e,i);return this._bindAction(m,f),this._addInactiveAction(m,l,s),m}existingAction(t,e){const i=e||this._root,r=i.uuid,s=typeof t=="string"?ax.findByName(i,t):t,a=s?s.uuid:t,l=this._actionsByClip[a];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let i=e-1;i>=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;const e=this._actions,i=this._nActiveActions,r=this.time+=t,s=Math.sign(t),a=this._accuIndex^=1;for(let f=0;f!==i;++f)e[f]._update(r,t,s,a);const l=this._bindings,c=this._nActiveBindings;for(let f=0;f!==c;++f)l[f].apply(a);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,i=t.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const a=s.knownActions;for(let l=0,c=a.length;l!==c;++l){const f=a[l];this._deactivateAction(f);const m=f._cacheIndex,g=e[e.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,g._cacheIndex=m,e[m]=g,e.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(t){const e=t.uuid,i=this._actionsByClip;for(const a in i){const l=i[a].actionByRoot,c=l[e];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,s=r[e];if(s!==void 0)for(const a in s){const l=s[a];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(t,e){const i=this.existingAction(t,e);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class wG extends jT{constructor(t=1,e=1,i=1,r={}){super(t,e,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new XT(null,t,e,i),this.texture.isRenderTargetTexture=!0}}class CG extends jT{constructor(t=1,e=1,i=1,r={}){super(t,e,r),this.isRenderTargetArray=!0,this.depth=i,this.texture=new Px(null,t,e,i),this.texture.isRenderTargetTexture=!0}}class gO{constructor(t){this.value=t}clone(){return new gO(this.value.clone===void 0?this.value:this.value.clone())}}let RG=0;class OG extends sf{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:RG++}),this.name="",this.usage=Z0,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return e!==-1&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let i=0,r=e.length;i<r;i++){const s=Array.isArray(e[i])?e[i]:[e[i]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class DG extends KT{constructor(t,e,i=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class NG{constructor(t,e,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const ZI=new nn;class yO{constructor(t,e,i=0,r=1/0){this.ray=new p_(t,e),this.near=i,this.far=r,this.camera=null,this.layers=new Hy,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return ZI.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(ZI),this}intersectObject(t,e=!0,i=[]){return eR(t,this,i,e),i.sort(QI),i}intersectObjects(t,e=!0,i=[]){for(let r=0,s=t.length;r<s;r++)eR(t[r],this,i,e);return i.sort(QI),i}}function QI(n,t){return n.distance-t.distance}function eR(n,t,e,i){let r=!0;if(n.layers.test(t.layers)&&n.raycast(t,e)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let a=0,l=s.length;a<l;a++)eR(s[a],t,e,!0)}}class _O{constructor(t=1,e=0,i=0){this.radius=t,this.phi=e,this.theta=i}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=mn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(mn(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class IG{constructor(t=1,e=0,i=0){this.radius=t,this.theta=e,this.y=i}set(t,e,i){return this.radius=t,this.theta=e,this.y=i,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=e,this}clone(){return new this.constructor().copy(this)}}class vO{constructor(t,e,i,r){vO.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&&this.set(t,e,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let i=0;i<4;i++)this.elements[i]=t[i+e];return this}set(t,e,i,r){const s=this.elements;return s[0]=t,s[2]=e,s[1]=i,s[3]=r,this}}const JI=new oe;class PG{constructor(t=new oe(1/0,1/0),e=new oe(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=JI.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,JI).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const tP=new ut,tE=new ut;class LG{constructor(t=new ut,e=new ut){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){tP.subVectors(t,this.start),tE.subVectors(this.end,this.start);const i=tE.dot(tE);let s=tE.dot(tP)/i;return e&&(s=mn(s,0,1)),s}closestPointToPoint(t,e,i){const r=this.closestPointToPointParameter(t,e);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const eP=new ut;class UG extends ii{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const i=new bn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,l=1,c=32;a<c;a++,l++){const f=a/c*Math.PI*2,m=l/c*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(m),Math.sin(m),1)}i.setAttribute("position",new ze(r,3));const s=new Oa({fog:!1,toneMapped:!1});this.cone=new af(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),eP.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(eP),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const gd=new ut,eE=new nn,_w=new nn;class zG extends af{constructor(t){const e=A4(t),i=new bn,r=[],s=[],a=new Ne(0,0,1),l=new Ne(0,1,0);for(let f=0;f<e.length;f++){const m=e[f];m.parent&&m.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(l.r,l.g,l.b))}i.setAttribute("position",new ze(r,3)),i.setAttribute("color",new ze(s,3));const c=new Oa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,i=this.geometry,r=i.getAttribute("position");_w.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<e.length;s++){const l=e[s];l.parent&&l.parent.isBone&&(eE.multiplyMatrices(_w,l.matrixWorld),gd.setFromMatrixPosition(eE),r.setXYZ(a,gd.x,gd.y,gd.z),eE.multiplyMatrices(_w,l.parent.matrixWorld),gd.setFromMatrixPosition(eE),r.setXYZ(a+1,gd.x,gd.y,gd.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function A4(n){const t=[];n.isBone===!0&&t.push(n);for(let e=0;e<n.children.length;e++)t.push(...A4(n.children[e]));return t}class BG extends $r{constructor(t,e,i){const r=new g_(e,4,2),s=new Kd({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=t,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const VG=new ut,nP=new Ne,iP=new Ne;class FG extends ii{constructor(t,e,i){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Vx(e);r.rotateY(Math.PI*.5),this.material=new Kd({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new wi(a,3)),this.add(new $r(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");nP.copy(this.light.color),iP.copy(this.light.groundColor);for(let i=0,r=e.count;i<r;i++){const s=i<r/2?nP:iP;e.setXYZ(i,s.r,s.g,s.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(VG.setFromMatrixPosition(this.light.matrixWorld).negate())}}class w4 extends af{constructor(t=10,e=10,i=4473924,r=8947848){i=new Ne(i),r=new Ne(r);const s=e/2,a=t/e,l=t/2,c=[],f=[];for(let y=0,v=0,S=-l;y<=e;y++,S+=a){c.push(-l,0,S,l,0,S),c.push(S,0,-l,S,0,l);const E=y===s?i:r;E.toArray(f,v),v+=3,E.toArray(f,v),v+=3,E.toArray(f,v),v+=3,E.toArray(f,v),v+=3}const m=new bn;m.setAttribute("position",new ze(c,3)),m.setAttribute("color",new ze(f,3));const g=new Oa({vertexColors:!0,toneMapped:!1});super(m,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class kG extends af{constructor(t=10,e=16,i=8,r=64,s=4473924,a=8947848){s=new Ne(s),a=new Ne(a);const l=[],c=[];if(e>1)for(let g=0;g<e;g++){const y=g/e*(Math.PI*2),v=Math.sin(y)*t,S=Math.cos(y)*t;l.push(0,0,0),l.push(v,0,S);const E=g&1?s:a;c.push(E.r,E.g,E.b),c.push(E.r,E.g,E.b)}for(let g=0;g<i;g++){const y=g&1?s:a,v=t-t/i*g;for(let S=0;S<r;S++){let E=S/r*(Math.PI*2),T=Math.sin(E)*v,x=Math.cos(E)*v;l.push(T,0,x),c.push(y.r,y.g,y.b),E=(S+1)/r*(Math.PI*2),T=Math.sin(E)*v,x=Math.cos(E)*v,l.push(T,0,x),c.push(y.r,y.g,y.b)}}const f=new bn;f.setAttribute("position",new ze(l,3)),f.setAttribute("color",new ze(c,3));const m=new Oa({vertexColors:!0,toneMapped:!1});super(f,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const rP=new ut,nE=new ut,sP=new ut;class HG extends ii{constructor(t,e,i){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",e===void 0&&(e=1);let r=new bn;r.setAttribute("position",new ze([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const s=new Oa({fog:!1,toneMapped:!1});this.lightPlane=new dh(r,s),this.add(this.lightPlane),r=new bn,r.setAttribute("position",new ze([0,0,0,0,0,1],3)),this.targetLine=new dh(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),rP.setFromMatrixPosition(this.light.matrixWorld),nE.setFromMatrixPosition(this.light.target.matrixWorld),sP.subVectors(nE,rP),this.lightPlane.lookAt(nE),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(nE),this.targetLine.scale.z=sP.length()}}const iE=new ut,Ur=new WT;class GG extends af{constructor(t){const e=new bn,i=new Oa({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(S,E){c(S),c(E)}function c(S){r.push(0,0,0),s.push(0,0,0),a[S]===void 0&&(a[S]=[]),a[S].push(r.length/3-1)}e.setAttribute("position",new ze(r,3)),e.setAttribute("color",new ze(s,3)),super(e,i),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const f=new Ne(16755200),m=new Ne(16711680),g=new Ne(43775),y=new Ne(16777215),v=new Ne(3355443);this.setColors(f,m,g,y,v)}setColors(t,e,i,r,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,t.r,t.g,t.b),l.setXYZ(1,t.r,t.g,t.b),l.setXYZ(2,t.r,t.g,t.b),l.setXYZ(3,t.r,t.g,t.b),l.setXYZ(4,t.r,t.g,t.b),l.setXYZ(5,t.r,t.g,t.b),l.setXYZ(6,t.r,t.g,t.b),l.setXYZ(7,t.r,t.g,t.b),l.setXYZ(8,t.r,t.g,t.b),l.setXYZ(9,t.r,t.g,t.b),l.setXYZ(10,t.r,t.g,t.b),l.setXYZ(11,t.r,t.g,t.b),l.setXYZ(12,t.r,t.g,t.b),l.setXYZ(13,t.r,t.g,t.b),l.setXYZ(14,t.r,t.g,t.b),l.setXYZ(15,t.r,t.g,t.b),l.setXYZ(16,t.r,t.g,t.b),l.setXYZ(17,t.r,t.g,t.b),l.setXYZ(18,t.r,t.g,t.b),l.setXYZ(19,t.r,t.g,t.b),l.setXYZ(20,t.r,t.g,t.b),l.setXYZ(21,t.r,t.g,t.b),l.setXYZ(22,t.r,t.g,t.b),l.setXYZ(23,t.r,t.g,t.b),l.setXYZ(24,e.r,e.g,e.b),l.setXYZ(25,e.r,e.g,e.b),l.setXYZ(26,e.r,e.g,e.b),l.setXYZ(27,e.r,e.g,e.b),l.setXYZ(28,e.r,e.g,e.b),l.setXYZ(29,e.r,e.g,e.b),l.setXYZ(30,e.r,e.g,e.b),l.setXYZ(31,e.r,e.g,e.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap,i=1,r=1;Ur.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===Pu?-1:0;jr("c",e,t,Ur,0,0,s),jr("t",e,t,Ur,0,0,1),jr("n1",e,t,Ur,-1,-1,s),jr("n2",e,t,Ur,i,-1,s),jr("n3",e,t,Ur,-1,r,s),jr("n4",e,t,Ur,i,r,s),jr("f1",e,t,Ur,-1,-1,1),jr("f2",e,t,Ur,i,-1,1),jr("f3",e,t,Ur,-1,r,1),jr("f4",e,t,Ur,i,r,1),jr("u1",e,t,Ur,i*.7,r*1.1,s),jr("u2",e,t,Ur,-1*.7,r*1.1,s),jr("u3",e,t,Ur,0,r*2,s),jr("cf1",e,t,Ur,-1,0,1),jr("cf2",e,t,Ur,i,0,1),jr("cf3",e,t,Ur,0,-1,1),jr("cf4",e,t,Ur,0,r,1),jr("cn1",e,t,Ur,-1,0,s),jr("cn2",e,t,Ur,i,0,s),jr("cn3",e,t,Ur,0,-1,s),jr("cn4",e,t,Ur,0,r,s),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function jr(n,t,e,i,r,s,a){iE.set(r,s,a).unproject(i);const l=t[n];if(l!==void 0){const c=e.getAttribute("position");for(let f=0,m=l.length;f<m;f++)c.setXYZ(l[f],iE.x,iE.y,iE.z)}}const rE=new Ks;class qG extends af{constructor(t,e=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new bn;s.setIndex(new wi(i,1)),s.setAttribute("position",new wi(r,3)),super(s,new Oa({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&rE.setFromObject(this.object),rE.isEmpty())return;const t=rE.min,e=rE.max,i=this.geometry.attributes.position,r=i.array;r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=t.x,r[4]=e.y,r[5]=e.z,r[6]=t.x,r[7]=t.y,r[8]=e.z,r[9]=e.x,r[10]=t.y,r[11]=e.z,r[12]=e.x,r[13]=e.y,r[14]=t.z,r[15]=t.x,r[16]=e.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=e.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class jG extends af{constructor(t,e=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new bn;s.setIndex(new wi(i,1)),s.setAttribute("position",new ze(r,3)),super(s,new Oa({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class XG extends dh{constructor(t,e=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new bn;a.setAttribute("position",new ze(s,3)),a.computeBoundingSphere(),super(a,new Oa({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new bn;c.setAttribute("position",new ze(l,3)),c.computeBoundingSphere(),this.add(new $r(c,new Kd({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const aP=new ut;let sE,vw;class WG extends ii{constructor(t=new ut(0,0,1),e=new ut(0,0,0),i=1,r=16776960,s=i*.2,a=s*.2){super(),this.type="ArrowHelper",sE===void 0&&(sE=new bn,sE.setAttribute("position",new ze([0,0,0,0,1,0],3)),vw=new Hm(0,.5,1,5,1),vw.translate(0,-.5,0)),this.position.copy(e),this.line=new dh(sE,new Oa({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new $r(vw,new Kd({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,s,a)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{aP.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(aP,e)}}setLength(t,e=t*.2,i=e*.2){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class C4 extends af{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new bn;r.setAttribute("position",new ze(e,3)),r.setAttribute("color",new ze(i,3));const s=new Oa({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(t,e,i){const r=new Ne,s=this.geometry.attributes.color.array;return r.set(t),r.toArray(s,0),r.toArray(s,3),r.set(e),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class YG{constructor(){this.type="ShapePath",this.color=new Ne,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new tx,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,i,r){return this.currentPath.quadraticCurveTo(t,e,i,r),this}bezierCurveTo(t,e,i,r,s,a){return this.currentPath.bezierCurveTo(t,e,i,r,s,a),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(x){const R=[];for(let D=0,O=x.length;D<O;D++){const N=x[D],B=new Tm;B.curves=N.curves,R.push(B)}return R}function i(x,R){const D=R.length;let O=!1;for(let N=D-1,B=0;B<D;N=B++){let L=R[N],U=R[B],I=U.x-L.x,w=U.y-L.y;if(Math.abs(w)>Number.EPSILON){if(w<0&&(L=R[B],I=-I,U=R[N],w=-w),x.y<L.y||x.y>U.y)continue;if(x.y===L.y){if(x.x===L.x)return!0}else{const V=w*(x.x-L.x)-I*(x.y-L.y);if(V===0)return!0;if(V<0)continue;O=!O}}else{if(x.y!==L.y)continue;if(U.x<=x.x&&x.x<=L.x||L.x<=x.x&&x.x<=U.x)return!0}}return O}const r=Yc.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,l,c;const f=[];if(s.length===1)return l=s[0],c=new Tm,c.curves=l.curves,f.push(c),f;let m=!r(s[0].getPoints());m=t?!m:m;const g=[],y=[];let v=[],S=0,E;y[S]=void 0,v[S]=[];for(let x=0,R=s.length;x<R;x++)l=s[x],E=l.getPoints(),a=r(E),a=t?!a:a,a?(!m&&y[S]&&S++,y[S]={s:new Tm,p:E},y[S].s.curves=l.curves,m&&S++,v[S]=[]):v[S].push({h:l,p:E[0]});if(!y[0])return e(s);if(y.length>1){let x=!1,R=0;for(let D=0,O=y.length;D<O;D++)g[D]=[];for(let D=0,O=y.length;D<O;D++){const N=v[D];for(let B=0;B<N.length;B++){const L=N[B];let U=!0;for(let I=0;I<y.length;I++)i(L.p,y[I].p)&&(D!==I&&R++,U?(U=!1,g[I].push(L)):x=!0);U&&g[D].push(L)}}R>0&&x===!1&&(v=g)}let T;for(let x=0,R=y.length;x<R;x++){c=y[x].s,f.push(c),T=v[x];for(let D=0,O=T.length;D<O;D++)c.holes.push(T[D].h)}return f}}class $G extends sf{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function KG(n,t){const e=n.image&&n.image.width?n.image.width/n.image.height:1;return e>t?(n.repeat.x=1,n.repeat.y=e/t,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=t/e,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function ZG(n,t){const e=n.image&&n.image.width?n.image.width/n.image.height:1;return e>t?(n.repeat.x=t/e,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=e/t,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function QG(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function nR(n,t,e,i){const r=JG(i);switch(e){case L2:return n*t;case z2:return n*t;case B2:return n*t*2;case kT:return n*t/r.components*r.byteLength;case Ix:return n*t/r.components*r.byteLength;case V2:return n*t*2/r.components*r.byteLength;case HT:return n*t*2/r.components*r.byteLength;case U2:return n*t*3/r.components*r.byteLength;case Ta:return n*t*4/r.components*r.byteLength;case GT:return n*t*4/r.components*r.byteLength;case S0:case E0:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case T0:case M0:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case p1:case g1:return Math.max(n,16)*Math.max(t,8)/4;case d1:case m1:return Math.max(n,8)*Math.max(t,8)/2;case y1:case _1:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case v1:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case x1:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case b1:return Math.floor((n+4)/5)*Math.floor((t+3)/4)*16;case S1:return Math.floor((n+4)/5)*Math.floor((t+4)/5)*16;case E1:return Math.floor((n+5)/6)*Math.floor((t+4)/5)*16;case T1:return Math.floor((n+5)/6)*Math.floor((t+5)/6)*16;case M1:return Math.floor((n+7)/8)*Math.floor((t+4)/5)*16;case A1:return Math.floor((n+7)/8)*Math.floor((t+5)/6)*16;case w1:return Math.floor((n+7)/8)*Math.floor((t+7)/8)*16;case C1:return Math.floor((n+9)/10)*Math.floor((t+4)/5)*16;case R1:return Math.floor((n+9)/10)*Math.floor((t+5)/6)*16;case O1:return Math.floor((n+9)/10)*Math.floor((t+7)/8)*16;case D1:return Math.floor((n+9)/10)*Math.floor((t+9)/10)*16;case N1:return Math.floor((n+11)/12)*Math.floor((t+9)/10)*16;case I1:return Math.floor((n+11)/12)*Math.floor((t+11)/12)*16;case A0:case P1:case L1:return Math.ceil(n/4)*Math.ceil(t/4)*16;case F2:case U1:return Math.ceil(n/4)*Math.ceil(t/4)*8;case z1:case B1:return Math.ceil(n/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function JG(n){switch(n){case Bu:case N2:return{byteLength:1,components:1};case Fy:case I2:case d_:return{byteLength:2,components:1};case VT:case FT:return{byteLength:2,components:4};case hh:case BT:case Do:return{byteLength:4,components:1};case P2:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class t7{static contain(t,e){return KG(t,e)}static cover(t,e){return ZG(t,e)}static fill(t){return QG(t)}static getByteLength(t,e,i,r){return nR(t,e,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Dx}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Dx);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function R4(){let n=null,t=!1,e=null,i=null;function r(s,a){e(s,a),i=n.requestAnimationFrame(r)}return{start:function(){t!==!0&&e!==null&&(i=n.requestAnimationFrame(r),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){n=s}}}function e7(n){const t=new WeakMap;function e(l,c){const f=l.array,m=l.usage,g=f.byteLength,y=n.createBuffer();n.bindBuffer(c,y),n.bufferData(c,f,m),l.onUploadCallback();let v;if(f instanceof Float32Array)v=n.FLOAT;else if(f instanceof Uint16Array)l.isFloat16BufferAttribute?v=n.HALF_FLOAT:v=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)v=n.SHORT;else if(f instanceof Uint32Array)v=n.UNSIGNED_INT;else if(f instanceof Int32Array)v=n.INT;else if(f instanceof Int8Array)v=n.BYTE;else if(f instanceof Uint8Array)v=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)v=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:y,type:v,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version,size:g}}function i(l,c,f){const m=c.array,g=c.updateRanges;if(n.bindBuffer(f,l),g.length===0)n.bufferSubData(f,0,m);else{g.sort((v,S)=>v.start-S.start);let y=0;for(let v=1;v<g.length;v++){const S=g[y],E=g[v];E.start<=S.start+S.count+1?S.count=Math.max(S.count,E.start+E.count-S.start):(++y,g[y]=E)}g.length=y+1;for(let v=0,S=g.length;v<S;v++){const E=g[v];n.bufferSubData(f,E.start*m.BYTES_PER_ELEMENT,m,E.start,E.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(l){return l.isInterleavedBufferAttribute&&(l=l.data),t.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=t.get(l);c&&(n.deleteBuffer(c.buffer),t.delete(l))}function a(l,c){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const m=t.get(l);(!m||m.version<l.version)&&t.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const f=t.get(l);if(f===void 0)t.set(l,e(l,c));else if(f.version<l.version){if(f.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(f.buffer,l,c),f.version=l.version}}return{get:r,remove:s,update:a}}var n7=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,i7=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,r7=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,s7=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,a7=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,o7=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,l7=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,u7=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,c7=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,f7=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,h7=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,d7=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,p7=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,m7=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,g7=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,y7=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,_7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,v7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,x7=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,b7=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,S7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,E7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,T7=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,M7=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,A7=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,w7=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,C7=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,R7=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,O7=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,D7=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,N7="gl_FragColor = linearToOutputTexel( gl_FragColor );",I7=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,P7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,L7=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,U7=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,z7=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,B7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,V7=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,F7=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,k7=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,H7=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,G7=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,q7=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,j7=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,X7=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,W7=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Y7=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,$7=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,K7=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Z7=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Q7=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,J7=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,tq=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,eq=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,nq=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,iq=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,rq=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,sq=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,aq=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,oq=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,lq=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,uq=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,cq=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,fq=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,hq=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,dq=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,pq=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,mq=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,gq=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,yq=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,_q=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,vq=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,xq=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,bq=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Sq=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Eq=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Tq=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Mq=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Aq=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,wq=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Cq=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Rq=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Oq=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Dq=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Nq=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Iq=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Pq=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Lq=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Uq=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,zq=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Bq=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Vq=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Fq=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,kq=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Hq=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Gq=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,qq=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,jq=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Xq=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Wq=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Yq=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,$q=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Kq=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Zq=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Qq=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Jq=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,tj=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const ej=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,nj=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ij=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,rj=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,sj=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,aj=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,oj=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,lj=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,uj=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,cj=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,fj=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,hj=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dj=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,pj=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,mj=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,gj=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yj=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_j=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vj=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,xj=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bj=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Sj=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Ej=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Tj=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Mj=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Aj=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wj=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Cj=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Rj=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Oj=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Dj=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Nj=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ij=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Pj=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Cn={alphahash_fragment:n7,alphahash_pars_fragment:i7,alphamap_fragment:r7,alphamap_pars_fragment:s7,alphatest_fragment:a7,alphatest_pars_fragment:o7,aomap_fragment:l7,aomap_pars_fragment:u7,batching_pars_vertex:c7,batching_vertex:f7,begin_vertex:h7,beginnormal_vertex:d7,bsdfs:p7,iridescence_fragment:m7,bumpmap_pars_fragment:g7,clipping_planes_fragment:y7,clipping_planes_pars_fragment:_7,clipping_planes_pars_vertex:v7,clipping_planes_vertex:x7,color_fragment:b7,color_pars_fragment:S7,color_pars_vertex:E7,color_vertex:T7,common:M7,cube_uv_reflection_fragment:A7,defaultnormal_vertex:w7,displacementmap_pars_vertex:C7,displacementmap_vertex:R7,emissivemap_fragment:O7,emissivemap_pars_fragment:D7,colorspace_fragment:N7,colorspace_pars_fragment:I7,envmap_fragment:P7,envmap_common_pars_fragment:L7,envmap_pars_fragment:U7,envmap_pars_vertex:z7,envmap_physical_pars_fragment:Y7,envmap_vertex:B7,fog_vertex:V7,fog_pars_vertex:F7,fog_fragment:k7,fog_pars_fragment:H7,gradientmap_pars_fragment:G7,lightmap_pars_fragment:q7,lights_lambert_fragment:j7,lights_lambert_pars_fragment:X7,lights_pars_begin:W7,lights_toon_fragment:$7,lights_toon_pars_fragment:K7,lights_phong_fragment:Z7,lights_phong_pars_fragment:Q7,lights_physical_fragment:J7,lights_physical_pars_fragment:tq,lights_fragment_begin:eq,lights_fragment_maps:nq,lights_fragment_end:iq,logdepthbuf_fragment:rq,logdepthbuf_pars_fragment:sq,logdepthbuf_pars_vertex:aq,logdepthbuf_vertex:oq,map_fragment:lq,map_pars_fragment:uq,map_particle_fragment:cq,map_particle_pars_fragment:fq,metalnessmap_fragment:hq,metalnessmap_pars_fragment:dq,morphinstance_vertex:pq,morphcolor_vertex:mq,morphnormal_vertex:gq,morphtarget_pars_vertex:yq,morphtarget_vertex:_q,normal_fragment_begin:vq,normal_fragment_maps:xq,normal_pars_fragment:bq,normal_pars_vertex:Sq,normal_vertex:Eq,normalmap_pars_fragment:Tq,clearcoat_normal_fragment_begin:Mq,clearcoat_normal_fragment_maps:Aq,clearcoat_pars_fragment:wq,iridescence_pars_fragment:Cq,opaque_fragment:Rq,packing:Oq,premultiplied_alpha_fragment:Dq,project_vertex:Nq,dithering_fragment:Iq,dithering_pars_fragment:Pq,roughnessmap_fragment:Lq,roughnessmap_pars_fragment:Uq,shadowmap_pars_fragment:zq,shadowmap_pars_vertex:Bq,shadowmap_vertex:Vq,shadowmask_pars_fragment:Fq,skinbase_vertex:kq,skinning_pars_vertex:Hq,skinning_vertex:Gq,skinnormal_vertex:qq,specularmap_fragment:jq,specularmap_pars_fragment:Xq,tonemapping_fragment:Wq,tonemapping_pars_fragment:Yq,transmission_fragment:$q,transmission_pars_fragment:Kq,uv_pars_fragment:Zq,uv_pars_vertex:Qq,uv_vertex:Jq,worldpos_vertex:tj,background_vert:ej,background_frag:nj,backgroundCube_vert:ij,backgroundCube_frag:rj,cube_vert:sj,cube_frag:aj,depth_vert:oj,depth_frag:lj,distanceRGBA_vert:uj,distanceRGBA_frag:cj,equirect_vert:fj,equirect_frag:hj,linedashed_vert:dj,linedashed_frag:pj,meshbasic_vert:mj,meshbasic_frag:gj,meshlambert_vert:yj,meshlambert_frag:_j,meshmatcap_vert:vj,meshmatcap_frag:xj,meshnormal_vert:bj,meshnormal_frag:Sj,meshphong_vert:Ej,meshphong_frag:Tj,meshphysical_vert:Mj,meshphysical_frag:Aj,meshtoon_vert:wj,meshtoon_frag:Cj,points_vert:Rj,points_frag:Oj,shadow_vert:Dj,shadow_frag:Nj,sprite_vert:Ij,sprite_frag:Pj},Ce={common:{diffuse:{value:new Ne(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new _n},alphaMap:{value:null},alphaMapTransform:{value:new _n},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new _n}},envmap:{envMap:{value:null},envMapRotation:{value:new _n},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new _n}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new _n}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new _n},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new _n},normalScale:{value:new oe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new _n},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new _n}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new _n}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new _n}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ne(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ne(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new _n},alphaTest:{value:0},uvTransform:{value:new _n}},sprite:{diffuse:{value:new Ne(16777215)},opacity:{value:1},center:{value:new oe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new _n},alphaMap:{value:null},alphaMapTransform:{value:new _n},alphaTest:{value:0}}},Nu={basic:{uniforms:qa([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.fog]),vertexShader:Cn.meshbasic_vert,fragmentShader:Cn.meshbasic_frag},lambert:{uniforms:qa([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,Ce.lights,{emissive:{value:new Ne(0)}}]),vertexShader:Cn.meshlambert_vert,fragmentShader:Cn.meshlambert_frag},phong:{uniforms:qa([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,Ce.lights,{emissive:{value:new Ne(0)},specular:{value:new Ne(1118481)},shininess:{value:30}}]),vertexShader:Cn.meshphong_vert,fragmentShader:Cn.meshphong_frag},standard:{uniforms:qa([Ce.common,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.roughnessmap,Ce.metalnessmap,Ce.fog,Ce.lights,{emissive:{value:new Ne(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Cn.meshphysical_vert,fragmentShader:Cn.meshphysical_frag},toon:{uniforms:qa([Ce.common,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.gradientmap,Ce.fog,Ce.lights,{emissive:{value:new Ne(0)}}]),vertexShader:Cn.meshtoon_vert,fragmentShader:Cn.meshtoon_frag},matcap:{uniforms:qa([Ce.common,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,{matcap:{value:null}}]),vertexShader:Cn.meshmatcap_vert,fragmentShader:Cn.meshmatcap_frag},points:{uniforms:qa([Ce.points,Ce.fog]),vertexShader:Cn.points_vert,fragmentShader:Cn.points_frag},dashed:{uniforms:qa([Ce.common,Ce.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Cn.linedashed_vert,fragmentShader:Cn.linedashed_frag},depth:{uniforms:qa([Ce.common,Ce.displacementmap]),vertexShader:Cn.depth_vert,fragmentShader:Cn.depth_frag},normal:{uniforms:qa([Ce.common,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,{opacity:{value:1}}]),vertexShader:Cn.meshnormal_vert,fragmentShader:Cn.meshnormal_frag},sprite:{uniforms:qa([Ce.sprite,Ce.fog]),vertexShader:Cn.sprite_vert,fragmentShader:Cn.sprite_frag},background:{uniforms:{uvTransform:{value:new _n},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Cn.background_vert,fragmentShader:Cn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new _n}},vertexShader:Cn.backgroundCube_vert,fragmentShader:Cn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Cn.cube_vert,fragmentShader:Cn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Cn.equirect_vert,fragmentShader:Cn.equirect_frag},distanceRGBA:{uniforms:qa([Ce.common,Ce.displacementmap,{referencePosition:{value:new ut},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Cn.distanceRGBA_vert,fragmentShader:Cn.distanceRGBA_frag},shadow:{uniforms:qa([Ce.lights,Ce.fog,{color:{value:new Ne(0)},opacity:{value:1}}]),vertexShader:Cn.shadow_vert,fragmentShader:Cn.shadow_frag}};Nu.physical={uniforms:qa([Nu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new _n},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new _n},clearcoatNormalScale:{value:new oe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new _n},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new _n},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new _n},sheen:{value:0},sheenColor:{value:new Ne(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new _n},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new _n},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new _n},transmissionSamplerSize:{value:new oe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new _n},attenuationDistance:{value:0},attenuationColor:{value:new Ne(0)},specularColor:{value:new Ne(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new _n},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new _n},anisotropyVector:{value:new oe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new _n}}]),vertexShader:Cn.meshphysical_vert,fragmentShader:Cn.meshphysical_frag};const aE={r:0,b:0,g:0},Kp=new dl,Lj=new nn;function Uj(n,t,e,i,r,s,a){const l=new Ne(0);let c=s===!0?0:1,f,m,g=null,y=0,v=null;function S(D){let O=D.isScene===!0?D.background:null;return O&&O.isTexture&&(O=(D.backgroundBlurriness>0?e:t).get(O)),O}function E(D){let O=!1;const N=S(D);N===null?x(l,c):N&&N.isColor&&(x(N,1),O=!0);const B=n.xr.getEnvironmentBlendMode();B==="additive"?i.buffers.color.setClear(0,0,0,1,a):B==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||O)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function T(D,O){const N=S(O);N&&(N.isCubeTexture||N.mapping===h_)?(m===void 0&&(m=new $r(new km(1,1,1),new ql({name:"BackgroundCubeMaterial",uniforms:Gy(Nu.backgroundCube.uniforms),vertexShader:Nu.backgroundCube.vertexShader,fragmentShader:Nu.backgroundCube.fragmentShader,side:Ka,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(B,L,U){this.matrixWorld.copyPosition(U.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(m)),Kp.copy(O.backgroundRotation),Kp.x*=-1,Kp.y*=-1,Kp.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(Kp.y*=-1,Kp.z*=-1),m.material.uniforms.envMap.value=N,m.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=O.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(Lj.makeRotationFromEuler(Kp)),m.material.toneMapped=Xn.getTransfer(N.colorSpace)!==Ai,(g!==N||y!==N.version||v!==n.toneMapping)&&(m.material.needsUpdate=!0,g=N,y=N.version,v=n.toneMapping),m.layers.enableAll(),D.unshift(m,m.geometry,m.material,0,0,null)):N&&N.isTexture&&(f===void 0&&(f=new $r(new m_(2,2),new ql({name:"BackgroundMaterial",uniforms:Gy(Nu.background.uniforms),vertexShader:Nu.background.vertexShader,fragmentShader:Nu.background.fragmentShader,side:ch,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=N,f.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,f.material.toneMapped=Xn.getTransfer(N.colorSpace)!==Ai,N.matrixAutoUpdate===!0&&N.updateMatrix(),f.material.uniforms.uvTransform.value.copy(N.matrix),(g!==N||y!==N.version||v!==n.toneMapping)&&(f.material.needsUpdate=!0,g=N,y=N.version,v=n.toneMapping),f.layers.enableAll(),D.unshift(f,f.geometry,f.material,0,0,null))}function x(D,O){D.getRGB(aE,OB(n)),i.buffers.color.setClear(aE.r,aE.g,aE.b,O,a)}function R(){m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return l},setClearColor:function(D,O=1){l.set(D),c=O,x(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(D){c=D,x(l,c)},render:E,addToRenderList:T,dispose:R}}function zj(n,t){const e=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=y(null);let s=r,a=!1;function l(w,V,G,k,st){let it=!1;const Y=g(k,G,V);s!==Y&&(s=Y,f(s.object)),it=v(w,k,G,st),it&&S(w,k,G,st),st!==null&&t.update(st,n.ELEMENT_ARRAY_BUFFER),(it||a)&&(a=!1,O(w,V,G,k),st!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(st).buffer))}function c(){return n.createVertexArray()}function f(w){return n.bindVertexArray(w)}function m(w){return n.deleteVertexArray(w)}function g(w,V,G){const k=G.wireframe===!0;let st=i[w.id];st===void 0&&(st={},i[w.id]=st);let it=st[V.id];it===void 0&&(it={},st[V.id]=it);let Y=it[k];return Y===void 0&&(Y=y(c()),it[k]=Y),Y}function y(w){const V=[],G=[],k=[];for(let st=0;st<e;st++)V[st]=0,G[st]=0,k[st]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:V,enabledAttributes:G,attributeDivisors:k,object:w,attributes:{},index:null}}function v(w,V,G,k){const st=s.attributes,it=V.attributes;let Y=0;const Z=G.getAttributes();for(const at in Z)if(Z[at].location>=0){const $=st[at];let pt=it[at];if(pt===void 0&&(at==="instanceMatrix"&&w.instanceMatrix&&(pt=w.instanceMatrix),at==="instanceColor"&&w.instanceColor&&(pt=w.instanceColor)),$===void 0||$.attribute!==pt||pt&&$.data!==pt.data)return!0;Y++}return s.attributesNum!==Y||s.index!==k}function S(w,V,G,k){const st={},it=V.attributes;let Y=0;const Z=G.getAttributes();for(const at in Z)if(Z[at].location>=0){let $=it[at];$===void 0&&(at==="instanceMatrix"&&w.instanceMatrix&&($=w.instanceMatrix),at==="instanceColor"&&w.instanceColor&&($=w.instanceColor));const pt={};pt.attribute=$,$&&$.data&&(pt.data=$.data),st[at]=pt,Y++}s.attributes=st,s.attributesNum=Y,s.index=k}function E(){const w=s.newAttributes;for(let V=0,G=w.length;V<G;V++)w[V]=0}function T(w){x(w,0)}function x(w,V){const G=s.newAttributes,k=s.enabledAttributes,st=s.attributeDivisors;G[w]=1,k[w]===0&&(n.enableVertexAttribArray(w),k[w]=1),st[w]!==V&&(n.vertexAttribDivisor(w,V),st[w]=V)}function R(){const w=s.newAttributes,V=s.enabledAttributes;for(let G=0,k=V.length;G<k;G++)V[G]!==w[G]&&(n.disableVertexAttribArray(G),V[G]=0)}function D(w,V,G,k,st,it,Y){Y===!0?n.vertexAttribIPointer(w,V,G,st,it):n.vertexAttribPointer(w,V,G,k,st,it)}function O(w,V,G,k){E();const st=k.attributes,it=G.getAttributes(),Y=V.defaultAttributeValues;for(const Z in it){const at=it[Z];if(at.location>=0){let ct=st[Z];if(ct===void 0&&(Z==="instanceMatrix"&&w.instanceMatrix&&(ct=w.instanceMatrix),Z==="instanceColor"&&w.instanceColor&&(ct=w.instanceColor)),ct!==void 0){const $=ct.normalized,pt=ct.itemSize,wt=t.get(ct);if(wt===void 0)continue;const zt=wt.buffer,nt=wt.type,lt=wt.bytesPerElement,ft=nt===n.INT||nt===n.UNSIGNED_INT||ct.gpuType===BT;if(ct.isInterleavedBufferAttribute){const mt=ct.data,Dt=mt.stride,Wt=ct.offset;if(mt.isInstancedInterleavedBuffer){for(let Nt=0;Nt<at.locationSize;Nt++)x(at.location+Nt,mt.meshPerAttribute);w.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=mt.meshPerAttribute*mt.count)}else for(let Nt=0;Nt<at.locationSize;Nt++)T(at.location+Nt);n.bindBuffer(n.ARRAY_BUFFER,zt);for(let Nt=0;Nt<at.locationSize;Nt++)D(at.location+Nt,pt/at.locationSize,nt,$,Dt*lt,(Wt+pt/at.locationSize*Nt)*lt,ft)}else{if(ct.isInstancedBufferAttribute){for(let mt=0;mt<at.locationSize;mt++)x(at.location+mt,ct.meshPerAttribute);w.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=ct.meshPerAttribute*ct.count)}else for(let mt=0;mt<at.locationSize;mt++)T(at.location+mt);n.bindBuffer(n.ARRAY_BUFFER,zt);for(let mt=0;mt<at.locationSize;mt++)D(at.location+mt,pt/at.locationSize,nt,$,pt*lt,pt/at.locationSize*mt*lt,ft)}}else if(Y!==void 0){const $=Y[Z];if($!==void 0)switch($.length){case 2:n.vertexAttrib2fv(at.location,$);break;case 3:n.vertexAttrib3fv(at.location,$);break;case 4:n.vertexAttrib4fv(at.location,$);break;default:n.vertexAttrib1fv(at.location,$)}}}}R()}function N(){U();for(const w in i){const V=i[w];for(const G in V){const k=V[G];for(const st in k)m(k[st].object),delete k[st];delete V[G]}delete i[w]}}function B(w){if(i[w.id]===void 0)return;const V=i[w.id];for(const G in V){const k=V[G];for(const st in k)m(k[st].object),delete k[st];delete V[G]}delete i[w.id]}function L(w){for(const V in i){const G=i[V];if(G[w.id]===void 0)continue;const k=G[w.id];for(const st in k)m(k[st].object),delete k[st];delete G[w.id]}}function U(){I(),a=!0,s!==r&&(s=r,f(s.object))}function I(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:l,reset:U,resetDefaultState:I,dispose:N,releaseStatesOfGeometry:B,releaseStatesOfProgram:L,initAttributes:E,enableAttribute:T,disableUnusedAttributes:R}}function Bj(n,t,e){let i;function r(f){i=f}function s(f,m){n.drawArrays(i,f,m),e.update(m,i,1)}function a(f,m,g){g!==0&&(n.drawArraysInstanced(i,f,m,g),e.update(m,i,g))}function l(f,m,g){if(g===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,f,0,m,0,g);let v=0;for(let S=0;S<g;S++)v+=m[S];e.update(v,i,1)}function c(f,m,g,y){if(g===0)return;const v=t.get("WEBGL_multi_draw");if(v===null)for(let S=0;S<f.length;S++)a(f[S],m[S],y[S]);else{v.multiDrawArraysInstancedWEBGL(i,f,0,m,0,y,0,g);let S=0;for(let E=0;E<g;E++)S+=m[E]*y[E];e.update(S,i,1)}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function Vj(n,t,e,i){let r;function s(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){const L=t.get("EXT_texture_filter_anisotropic");r=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(L){return!(L!==Ta&&i.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(L){const U=L===d_&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(L!==Bu&&i.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&L!==Do&&!U)}function c(L){if(L==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=e.precision!==void 0?e.precision:"highp";const m=c(f);m!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",m,"instead."),f=m);const g=e.logarithmicDepthBuffer===!0,y=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),v=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),S=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),E=n.getParameter(n.MAX_TEXTURE_SIZE),T=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),R=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),D=n.getParameter(n.MAX_VARYING_VECTORS),O=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),N=S>0,B=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:a,textureTypeReadable:l,precision:f,logarithmicDepthBuffer:g,reverseDepthBuffer:y,maxTextures:v,maxVertexTextures:S,maxTextureSize:E,maxCubemapSize:T,maxAttributes:x,maxVertexUniforms:R,maxVaryings:D,maxFragmentUniforms:O,vertexTextures:N,maxSamples:B}}function Fj(n){const t=this;let e=null,i=0,r=!1,s=!1;const a=new xd,l=new _n,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(g,y){const v=g.length!==0||y||i!==0||r;return r=y,i=g.length,v},this.beginShadows=function(){s=!0,m(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(g,y){e=m(g,y,0)},this.setState=function(g,y,v){const S=g.clippingPlanes,E=g.clipIntersection,T=g.clipShadows,x=n.get(g);if(!r||S===null||S.length===0||s&&!T)s?m(null):f();else{const R=s?0:i,D=R*4;let O=x.clippingState||null;c.value=O,O=m(S,y,D,v);for(let N=0;N!==D;++N)O[N]=e[N];x.clippingState=O,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=R}};function f(){c.value!==e&&(c.value=e,c.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function m(g,y,v,S){const E=g!==null?g.length:0;let T=null;if(E!==0){if(T=c.value,S!==!0||T===null){const x=v+E*4,R=y.matrixWorldInverse;l.getNormalMatrix(R),(T===null||T.length<x)&&(T=new Float32Array(x));for(let D=0,O=v;D!==E;++D,O+=4)a.copy(g[D]).applyMatrix4(R,l),a.normal.toArray(T,O),T[O+3]=a.constant}c.value=T,c.needsUpdate=!0}return t.numPlanes=E,t.numIntersection=0,T}}function kj(n){let t=new WeakMap;function e(a,l){return l===q0?a.mapping=fh:l===j0&&(a.mapping=zd),a}function i(a){if(a&&a.isTexture){const l=a.mapping;if(l===q0||l===j0)if(t.has(a)){const c=t.get(a).texture;return e(c,a.mapping)}else{const c=a.image;if(c&&c.height>0){const f=new IB(c.height);return f.fromEquirectangularTexture(n,a),t.set(a,f),a.addEventListener("dispose",r),e(f.texture,a.mapping)}else return null}}return a}function r(a){const l=a.target;l.removeEventListener("dispose",r);const c=t.get(l);c!==void 0&&(t.delete(l),c.dispose())}function s(){t=new WeakMap}return{get:i,dispose:s}}const Ry=4,oP=[.125,.215,.35,.446,.526,.582],dm=20,xw=new Gx,lP=new Ne;let bw=null,Sw=0,Ew=0,Tw=!1;const lm=(1+Math.sqrt(5))/2,ty=1/lm,uP=[new ut(-lm,ty,0),new ut(lm,ty,0),new ut(-ty,0,lm),new ut(ty,0,lm),new ut(0,lm,-ty),new ut(0,lm,ty),new ut(-1,1,-1),new ut(1,1,-1),new ut(-1,1,1),new ut(1,1,1)],Hj=new ut;class iR{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,r=100,s={}){const{size:a=256,position:l=Hj}=s;bw=this._renderer.getRenderTarget(),Sw=this._renderer.getActiveCubeFace(),Ew=this._renderer.getActiveMipmapLevel(),Tw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(t,i,r,c,l),e>0&&this._blur(c,0,0,e),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=hP(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=fP(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(bw,Sw,Ew),this._renderer.xr.enabled=Tw,t.scissorTest=!1,oE(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===fh||t.mapping===zd?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),bw=this._renderer.getRenderTarget(),Sw=this._renderer.getActiveCubeFace(),Ew=this._renderer.getActiveMipmapLevel(),Tw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:ms,minFilter:ms,generateMipmaps:!1,type:d_,format:Ta,colorSpace:Bd,depthBuffer:!1},r=cP(t,e,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=cP(t,e,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Gj(s)),this._blurMaterial=qj(s,t,e)}return r}_compileMaterial(t){const e=new $r(this._lodPlanes[0],t);this._renderer.compile(e,xw)}_sceneToCubeUV(t,e,i,r,s){const c=new Ns(90,1,e,i),f=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],g=this._renderer,y=g.autoClear,v=g.toneMapping;g.getClearColor(lP),g.toneMapping=Xc,g.autoClear=!1;const S=new Kd({name:"PMREM.Background",side:Ka,depthWrite:!1,depthTest:!1}),E=new $r(new km,S);let T=!1;const x=t.background;x?x.isColor&&(S.color.copy(x),t.background=null,T=!0):(S.color.copy(lP),T=!0);for(let R=0;R<6;R++){const D=R%3;D===0?(c.up.set(0,f[R],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x+m[R],s.y,s.z)):D===1?(c.up.set(0,0,f[R]),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y+m[R],s.z)):(c.up.set(0,f[R],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y,s.z+m[R]));const O=this._cubeSize;oE(r,D*O,R>2?O:0,O,O),g.setRenderTarget(r),T&&g.render(E,c),g.render(t,c)}E.geometry.dispose(),E.material.dispose(),g.toneMapping=v,g.autoClear=y,t.background=x}_textureToCubeUV(t,e){const i=this._renderer,r=t.mapping===fh||t.mapping===zd;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=hP()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=fP());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new $r(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=t;const c=this._cubeSize;oE(e,0,0,3*c,2*c),i.setRenderTarget(e),i.render(a,xw)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=uP[(r-s-1)%uP.length];this._blur(t,s-1,s,a,l)}e.autoClear=i}_blur(t,e,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(t,a,e,i,r,"latitudinal",s),this._halfBlur(a,t,i,i,r,"longitudinal",s)}_halfBlur(t,e,i,r,s,a,l){const c=this._renderer,f=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,g=new $r(this._lodPlanes[r],f),y=f.uniforms,v=this._sizeLods[i]-1,S=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*dm-1),E=s/S,T=isFinite(s)?1+Math.floor(m*E):dm;T>dm&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${dm}`);const x=[];let R=0;for(let L=0;L<dm;++L){const U=L/E,I=Math.exp(-U*U/2);x.push(I),L===0?R+=I:L<T&&(R+=2*I)}for(let L=0;L<x.length;L++)x[L]=x[L]/R;y.envMap.value=t.texture,y.samples.value=T,y.weights.value=x,y.latitudinal.value=a==="latitudinal",l&&(y.poleAxis.value=l);const{_lodMax:D}=this;y.dTheta.value=S,y.mipInt.value=D-i;const O=this._sizeLods[r],N=3*O*(r>D-Ry?r-D+Ry:0),B=4*(this._cubeSize-O);oE(e,N,B,3*O,2*O),c.setRenderTarget(e),c.render(g,xw)}}function Gj(n){const t=[],e=[],i=[];let r=n;const s=n-Ry+1+oP.length;for(let a=0;a<s;a++){const l=Math.pow(2,r);e.push(l);let c=1/l;a>n-Ry?c=oP[a-n+Ry-1]:a===0&&(c=0),i.push(c);const f=1/(l-2),m=-f,g=1+f,y=[m,m,g,m,g,g,m,m,g,g,m,g],v=6,S=6,E=3,T=2,x=1,R=new Float32Array(E*S*v),D=new Float32Array(T*S*v),O=new Float32Array(x*S*v);for(let B=0;B<v;B++){const L=B%3*2/3-1,U=B>2?0:-1,I=[L,U,0,L+2/3,U,0,L+2/3,U+1,0,L,U,0,L+2/3,U+1,0,L,U+1,0];R.set(I,E*S*B),D.set(y,T*S*B);const w=[B,B,B,B,B,B];O.set(w,x*S*B)}const N=new bn;N.setAttribute("position",new wi(R,E)),N.setAttribute("uv",new wi(D,T)),N.setAttribute("faceIndex",new wi(O,x)),t.push(N),r>Ry&&r--}return{lodPlanes:t,sizeLods:e,sigmas:i}}function cP(n,t,e){const i=new tf(n,t,e);return i.texture.mapping=h_,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function oE(n,t,e,i,r){n.viewport.set(t,e,i,r),n.scissor.set(t,e,i,r)}function qj(n,t,e){const i=new Float32Array(dm),r=new ut(0,1,0);return new ql({name:"SphericalGaussianBlur",defines:{n:dm,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:xO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ah,depthTest:!1,depthWrite:!1})}function fP(){return new ql({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:xO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ah,depthTest:!1,depthWrite:!1})}function hP(){return new ql({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:xO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ah,depthTest:!1,depthWrite:!1})}function xO(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function jj(n){let t=new WeakMap,e=null;function i(l){if(l&&l.isTexture){const c=l.mapping,f=c===q0||c===j0,m=c===fh||c===zd;if(f||m){let g=t.get(l);const y=g!==void 0?g.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==y)return e===null&&(e=new iR(n)),g=f?e.fromEquirectangular(l,g):e.fromCubemap(l,g),g.texture.pmremVersion=l.pmremVersion,t.set(l,g),g.texture;if(g!==void 0)return g.texture;{const v=l.image;return f&&v&&v.height>0||m&&v&&r(v)?(e===null&&(e=new iR(n)),g=f?e.fromEquirectangular(l):e.fromCubemap(l),g.texture.pmremVersion=l.pmremVersion,t.set(l,g),l.addEventListener("dispose",s),g.texture):null}}}return l}function r(l){let c=0;const f=6;for(let m=0;m<f;m++)l[m]!==void 0&&c++;return c===f}function s(l){const c=l.target;c.removeEventListener("dispose",s);const f=t.get(c);f!==void 0&&(t.delete(c),f.dispose())}function a(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:a}}function Xj(n){const t={};function e(i){if(t[i]!==void 0)return t[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return t[i]=r,r}return{has:function(i){return e(i)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(i){const r=e(i);return r===null&&om("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Wj(n,t,e,i){const r={},s=new WeakMap;function a(g){const y=g.target;y.index!==null&&t.remove(y.index);for(const S in y.attributes)t.remove(y.attributes[S]);y.removeEventListener("dispose",a),delete r[y.id];const v=s.get(y);v&&(t.remove(v),s.delete(y)),i.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,e.memory.geometries--}function l(g,y){return r[y.id]===!0||(y.addEventListener("dispose",a),r[y.id]=!0,e.memory.geometries++),y}function c(g){const y=g.attributes;for(const v in y)t.update(y[v],n.ARRAY_BUFFER)}function f(g){const y=[],v=g.index,S=g.attributes.position;let E=0;if(v!==null){const R=v.array;E=v.version;for(let D=0,O=R.length;D<O;D+=3){const N=R[D+0],B=R[D+1],L=R[D+2];y.push(N,B,B,L,L,N)}}else if(S!==void 0){const R=S.array;E=S.version;for(let D=0,O=R.length/3-1;D<O;D+=3){const N=D+0,B=D+1,L=D+2;y.push(N,B,B,L,L,N)}}else return;const T=new(AB(y)?j2:q2)(y,1);T.version=E;const x=s.get(g);x&&t.remove(x),s.set(g,T)}function m(g){const y=s.get(g);if(y){const v=g.index;v!==null&&y.version<v.version&&f(g)}else f(g);return s.get(g)}return{get:l,update:c,getWireframeAttribute:m}}function Yj(n,t,e){let i;function r(y){i=y}let s,a;function l(y){s=y.type,a=y.bytesPerElement}function c(y,v){n.drawElements(i,v,s,y*a),e.update(v,i,1)}function f(y,v,S){S!==0&&(n.drawElementsInstanced(i,v,s,y*a,S),e.update(v,i,S))}function m(y,v,S){if(S===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,v,0,s,y,0,S);let T=0;for(let x=0;x<S;x++)T+=v[x];e.update(T,i,1)}function g(y,v,S,E){if(S===0)return;const T=t.get("WEBGL_multi_draw");if(T===null)for(let x=0;x<y.length;x++)f(y[x]/a,v[x],E[x]);else{T.multiDrawElementsInstancedWEBGL(i,v,0,s,y,0,E,0,S);let x=0;for(let R=0;R<S;R++)x+=v[R]*E[R];e.update(x,i,1)}}this.setMode=r,this.setIndex=l,this.render=c,this.renderInstances=f,this.renderMultiDraw=m,this.renderMultiDrawInstances=g}function $j(n){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,l){switch(e.calls++,a){case n.TRIANGLES:e.triangles+=l*(s/3);break;case n.LINES:e.lines+=l*(s/2);break;case n.LINE_STRIP:e.lines+=l*(s-1);break;case n.LINE_LOOP:e.lines+=l*s;break;case n.POINTS:e.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:r,update:i}}function Kj(n,t,e){const i=new WeakMap,r=new ti;function s(a,l,c){const f=a.morphTargetInfluences,m=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,g=m!==void 0?m.length:0;let y=i.get(l);if(y===void 0||y.count!==g){let w=function(){U.dispose(),i.delete(l),l.removeEventListener("dispose",w)};var v=w;y!==void 0&&y.texture.dispose();const S=l.morphAttributes.position!==void 0,E=l.morphAttributes.normal!==void 0,T=l.morphAttributes.color!==void 0,x=l.morphAttributes.position||[],R=l.morphAttributes.normal||[],D=l.morphAttributes.color||[];let O=0;S===!0&&(O=1),E===!0&&(O=2),T===!0&&(O=3);let N=l.attributes.position.count*O,B=1;N>t.maxTextureSize&&(B=Math.ceil(N/t.maxTextureSize),N=t.maxTextureSize);const L=new Float32Array(N*B*4*g),U=new Px(L,N,B,g);U.type=Do,U.needsUpdate=!0;const I=O*4;for(let V=0;V<g;V++){const G=x[V],k=R[V],st=D[V],it=N*B*4*V;for(let Y=0;Y<G.count;Y++){const Z=Y*I;S===!0&&(r.fromBufferAttribute(G,Y),L[it+Z+0]=r.x,L[it+Z+1]=r.y,L[it+Z+2]=r.z,L[it+Z+3]=0),E===!0&&(r.fromBufferAttribute(k,Y),L[it+Z+4]=r.x,L[it+Z+5]=r.y,L[it+Z+6]=r.z,L[it+Z+7]=0),T===!0&&(r.fromBufferAttribute(st,Y),L[it+Z+8]=r.x,L[it+Z+9]=r.y,L[it+Z+10]=r.z,L[it+Z+11]=st.itemSize===4?r.w:1)}}y={count:g,texture:U,size:new oe(N,B)},i.set(l,y),l.addEventListener("dispose",w)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",a.morphTexture,e);else{let S=0;for(let T=0;T<f.length;T++)S+=f[T];const E=l.morphTargetsRelative?1:1-S;c.getUniforms().setValue(n,"morphTargetBaseInfluence",E),c.getUniforms().setValue(n,"morphTargetInfluences",f)}c.getUniforms().setValue(n,"morphTargetsTexture",y.texture,e),c.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}return{update:s}}function Zj(n,t,e,i){let r=new WeakMap;function s(c){const f=i.render.frame,m=c.geometry,g=t.get(c,m);if(r.get(g)!==f&&(t.update(g),r.set(g,f)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),r.get(c)!==f&&(e.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&e.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,f))),c.isSkinnedMesh){const y=c.skeleton;r.get(y)!==f&&(y.update(),r.set(y,f))}return g}function a(){r=new WeakMap}function l(c){const f=c.target;f.removeEventListener("dispose",l),e.remove(f.instanceMatrix),f.instanceColor!==null&&e.remove(f.instanceColor)}return{update:s,dispose:a}}const O4=new Fr,dP=new K2(1,1),D4=new Px,N4=new XT,I4=new Lx,pP=[],mP=[],gP=new Float32Array(16),yP=new Float32Array(9),_P=new Float32Array(4);function y_(n,t,e){const i=n[0];if(i<=0||i>0)return n;const r=t*e;let s=pP[r];if(s===void 0&&(s=new Float32Array(r),pP[r]=s),t!==0){i.toArray(s,0);for(let a=1,l=0;a!==t;++a)l+=e,n[a].toArray(s,l)}return s}function _s(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function vs(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function dM(n,t){let e=mP[t];e===void 0&&(e=new Int32Array(t),mP[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function Qj(n,t){const e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function Jj(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(_s(e,t))return;n.uniform2fv(this.addr,t),vs(e,t)}}function tX(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(_s(e,t))return;n.uniform3fv(this.addr,t),vs(e,t)}}function eX(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(_s(e,t))return;n.uniform4fv(this.addr,t),vs(e,t)}}function nX(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(_s(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),vs(e,t)}else{if(_s(e,i))return;_P.set(i),n.uniformMatrix2fv(this.addr,!1,_P),vs(e,i)}}function iX(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(_s(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),vs(e,t)}else{if(_s(e,i))return;yP.set(i),n.uniformMatrix3fv(this.addr,!1,yP),vs(e,i)}}function rX(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(_s(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),vs(e,t)}else{if(_s(e,i))return;gP.set(i),n.uniformMatrix4fv(this.addr,!1,gP),vs(e,i)}}function sX(n,t){const e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function aX(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(_s(e,t))return;n.uniform2iv(this.addr,t),vs(e,t)}}function oX(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(_s(e,t))return;n.uniform3iv(this.addr,t),vs(e,t)}}function lX(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(_s(e,t))return;n.uniform4iv(this.addr,t),vs(e,t)}}function uX(n,t){const e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function cX(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(_s(e,t))return;n.uniform2uiv(this.addr,t),vs(e,t)}}function fX(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(_s(e,t))return;n.uniform3uiv(this.addr,t),vs(e,t)}}function hX(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(_s(e,t))return;n.uniform4uiv(this.addr,t),vs(e,t)}}function dX(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(dP.compareFunction=H2,s=dP):s=O4,e.setTexture2D(t||s,r)}function pX(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture3D(t||N4,r)}function mX(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTextureCube(t||I4,r)}function gX(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture2DArray(t||D4,r)}function yX(n){switch(n){case 5126:return Qj;case 35664:return Jj;case 35665:return tX;case 35666:return eX;case 35674:return nX;case 35675:return iX;case 35676:return rX;case 5124:case 35670:return sX;case 35667:case 35671:return aX;case 35668:case 35672:return oX;case 35669:case 35673:return lX;case 5125:return uX;case 36294:return cX;case 36295:return fX;case 36296:return hX;case 35678:case 36198:case 36298:case 36306:case 35682:return dX;case 35679:case 36299:case 36307:return pX;case 35680:case 36300:case 36308:case 36293:return mX;case 36289:case 36303:case 36311:case 36292:return gX}}function _X(n,t){n.uniform1fv(this.addr,t)}function vX(n,t){const e=y_(t,this.size,2);n.uniform2fv(this.addr,e)}function xX(n,t){const e=y_(t,this.size,3);n.uniform3fv(this.addr,e)}function bX(n,t){const e=y_(t,this.size,4);n.uniform4fv(this.addr,e)}function SX(n,t){const e=y_(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function EX(n,t){const e=y_(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function TX(n,t){const e=y_(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function MX(n,t){n.uniform1iv(this.addr,t)}function AX(n,t){n.uniform2iv(this.addr,t)}function wX(n,t){n.uniform3iv(this.addr,t)}function CX(n,t){n.uniform4iv(this.addr,t)}function RX(n,t){n.uniform1uiv(this.addr,t)}function OX(n,t){n.uniform2uiv(this.addr,t)}function DX(n,t){n.uniform3uiv(this.addr,t)}function NX(n,t){n.uniform4uiv(this.addr,t)}function IX(n,t,e){const i=this.cache,r=t.length,s=dM(e,r);_s(i,s)||(n.uniform1iv(this.addr,s),vs(i,s));for(let a=0;a!==r;++a)e.setTexture2D(t[a]||O4,s[a])}function PX(n,t,e){const i=this.cache,r=t.length,s=dM(e,r);_s(i,s)||(n.uniform1iv(this.addr,s),vs(i,s));for(let a=0;a!==r;++a)e.setTexture3D(t[a]||N4,s[a])}function LX(n,t,e){const i=this.cache,r=t.length,s=dM(e,r);_s(i,s)||(n.uniform1iv(this.addr,s),vs(i,s));for(let a=0;a!==r;++a)e.setTextureCube(t[a]||I4,s[a])}function UX(n,t,e){const i=this.cache,r=t.length,s=dM(e,r);_s(i,s)||(n.uniform1iv(this.addr,s),vs(i,s));for(let a=0;a!==r;++a)e.setTexture2DArray(t[a]||D4,s[a])}function zX(n){switch(n){case 5126:return _X;case 35664:return vX;case 35665:return xX;case 35666:return bX;case 35674:return SX;case 35675:return EX;case 35676:return TX;case 5124:case 35670:return MX;case 35667:case 35671:return AX;case 35668:case 35672:return wX;case 35669:case 35673:return CX;case 5125:return RX;case 36294:return OX;case 36295:return DX;case 36296:return NX;case 35678:case 36198:case 36298:case 36306:case 35682:return IX;case 35679:case 36299:case 36307:return PX;case 35680:case 36300:case 36308:case 36293:return LX;case 36289:case 36303:case 36311:case 36292:return UX}}class BX{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.setValue=yX(e.type)}}class VX{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=zX(e.type)}}class FX{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const l=r[s];l.setValue(t,e[l.id],i)}}}const Mw=/(\w+)(\])?(\[|\.)?/g;function vP(n,t){n.seq.push(t),n.map[t.id]=t}function kX(n,t,e){const i=n.name,r=i.length;for(Mw.lastIndex=0;;){const s=Mw.exec(i),a=Mw.lastIndex;let l=s[1];const c=s[2]==="]",f=s[3];if(c&&(l=l|0),f===void 0||f==="["&&a+2===r){vP(e,f===void 0?new BX(l,n,t):new VX(l,n,t));break}else{let g=e.map[l];g===void 0&&(g=new FX(l),vP(e,g)),e=g}}}class VE{constructor(t,e){this.seq=[],this.map={};const i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=t.getActiveUniform(e,r),a=t.getUniformLocation(e,s.name);kX(s,a,this)}}setValue(t,e,i,r){const s=this.map[e];s!==void 0&&s.setValue(t,i,r)}setOptional(t,e,i){const r=e[i];r!==void 0&&this.setValue(t,i,r)}static upload(t,e,i,r){for(let s=0,a=e.length;s!==a;++s){const l=e[s],c=i[l.id];c.needsUpdate!==!1&&l.setValue(t,c.value,r)}}static seqWithValue(t,e){const i=[];for(let r=0,s=t.length;r!==s;++r){const a=t[r];a.id in e&&i.push(a)}return i}}function xP(n,t,e){const i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}const HX=37297;let GX=0;function qX(n,t){const e=n.split(`
`),i=[],r=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let a=r;a<s;a++){const l=a+1;i.push(`${l===t?">":" "} ${l}: ${e[a]}`)}return i.join(`
`)}const bP=new _n;function jX(n){Xn._getMatrix(bP,Xn.workingColorSpace,n);const t=`mat3( ${bP.elements.map(e=>e.toFixed(4))} )`;switch(Xn.getTransfer(n)){case K0:return[t,"LinearTransferOETF"];case Ai:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[t,"LinearTransferOETF"]}}function SP(n,t,e){const i=n.getShaderParameter(t,n.COMPILE_STATUS),r=n.getShaderInfoLog(t).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return e.toUpperCase()+`

`+r+`

`+qX(n.getShaderSource(t),a)}else return r}function XX(n,t){const e=jX(t);return[`vec4 ${n}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function WX(n,t){let e;switch(t){case sB:e="Linear";break;case aB:e="Reinhard";break;case oB:e="Cineon";break;case O2:e="ACESFilmic";break;case uB:e="AgX";break;case cB:e="Neutral";break;case lB:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const lE=new ut;function YX(){Xn.getLuminanceCoefficients(lE);const n=lE.x.toFixed(4),t=lE.y.toFixed(4),e=lE.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function $X(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(o0).join(`
`)}function KX(n){const t=[];for(const e in n){const i=n[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function ZX(n,t){const e={},i=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(t,r),a=s.name;let l=1;s.type===n.FLOAT_MAT2&&(l=2),s.type===n.FLOAT_MAT3&&(l=3),s.type===n.FLOAT_MAT4&&(l=4),e[a]={type:s.type,location:n.getAttribLocation(t,a),locationSize:l}}return e}function o0(n){return n!==""}function EP(n,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function TP(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const QX=/^[ \t]*#include +<([\w\d./]+)>/gm;function rR(n){return n.replace(QX,tW)}const JX=new Map;function tW(n,t){let e=Cn[t];if(e===void 0){const i=JX.get(t);if(i!==void 0)e=Cn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,i);else throw new Error("Can not resolve #include <"+t+">")}return rR(e)}const eW=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function MP(n){return n.replace(eW,nW)}function nW(n,t,e,i){let r="";for(let s=parseInt(t);s<parseInt(e);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function AP(n){let t=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?t+=`
#define HIGH_PRECISION`:n.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function iW(n){let t="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===UT?t="SHADOWMAP_TYPE_PCF":n.shadowMapType===x0?t="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ou&&(t="SHADOWMAP_TYPE_VSM"),t}function rW(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case fh:case zd:t="ENVMAP_TYPE_CUBE";break;case h_:t="ENVMAP_TYPE_CUBE_UV";break}return t}function sW(n){let t="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case zd:t="ENVMAP_MODE_REFRACTION";break}return t}function aW(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Nx:t="ENVMAP_BLENDING_MULTIPLY";break;case iB:t="ENVMAP_BLENDING_MIX";break;case rB:t="ENVMAP_BLENDING_ADD";break}return t}function oW(n){const t=n.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:i,maxMip:e}}function lW(n,t,e,i){const r=n.getContext(),s=e.defines;let a=e.vertexShader,l=e.fragmentShader;const c=iW(e),f=rW(e),m=sW(e),g=aW(e),y=oW(e),v=$X(e),S=KX(s),E=r.createProgram();let T,x,R=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(T=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,S].filter(o0).join(`
`),T.length>0&&(T+=`
`),x=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,S].filter(o0).join(`
`),x.length>0&&(x+=`
`)):(T=[AP(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,S,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+m:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(o0).join(`
`),x=[AP(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,S,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+f:"",e.envMap?"#define "+m:"",e.envMap?"#define "+g:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Xc?"#define TONE_MAPPING":"",e.toneMapping!==Xc?Cn.tonemapping_pars_fragment:"",e.toneMapping!==Xc?WX("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Cn.colorspace_pars_fragment,XX("linearToOutputTexel",e.outputColorSpace),YX(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(o0).join(`
`)),a=rR(a),a=EP(a,e),a=TP(a,e),l=rR(l),l=EP(l,e),l=TP(l,e),a=MP(a),l=MP(l),e.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,T=[v,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,x=["#define varying in",e.glslVersion===$C?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===$C?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const D=R+T+a,O=R+x+l,N=xP(r,r.VERTEX_SHADER,D),B=xP(r,r.FRAGMENT_SHADER,O);r.attachShader(E,N),r.attachShader(E,B),e.index0AttributeName!==void 0?r.bindAttribLocation(E,0,e.index0AttributeName):e.morphTargets===!0&&r.bindAttribLocation(E,0,"position"),r.linkProgram(E);function L(V){if(n.debug.checkShaderErrors){const G=r.getProgramInfoLog(E).trim(),k=r.getShaderInfoLog(N).trim(),st=r.getShaderInfoLog(B).trim();let it=!0,Y=!0;if(r.getProgramParameter(E,r.LINK_STATUS)===!1)if(it=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,E,N,B);else{const Z=SP(r,N,"vertex"),at=SP(r,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(E,r.VALIDATE_STATUS)+`

Material Name: `+V.name+`
Material Type: `+V.type+`

Program Info Log: `+G+`
`+Z+`
`+at)}else G!==""?console.warn("THREE.WebGLProgram: Program Info Log:",G):(k===""||st==="")&&(Y=!1);Y&&(V.diagnostics={runnable:it,programLog:G,vertexShader:{log:k,prefix:T},fragmentShader:{log:st,prefix:x}})}r.deleteShader(N),r.deleteShader(B),U=new VE(r,E),I=ZX(r,E)}let U;this.getUniforms=function(){return U===void 0&&L(this),U};let I;this.getAttributes=function(){return I===void 0&&L(this),I};let w=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return w===!1&&(w=r.getProgramParameter(E,HX)),w},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(E),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=GX++,this.cacheKey=t,this.usedTimes=1,this.program=E,this.vertexShader=N,this.fragmentShader=B,this}let uW=0;class cW{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,i=t.fragmentShader,r=this._getShaderStage(e),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(t);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const i of e)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let i=e.get(t);return i===void 0&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){const e=this.shaderCache;let i=e.get(t);return i===void 0&&(i=new fW(t),e.set(t,i)),i}}class fW{constructor(t){this.id=uW++,this.code=t,this.usedTimes=0}}function hW(n,t,e,i,r,s,a){const l=new Hy,c=new cW,f=new Set,m=[],g=r.logarithmicDepthBuffer,y=r.vertexTextures;let v=r.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(I){return f.add(I),I===0?"uv":`uv${I}`}function T(I,w,V,G,k){const st=G.fog,it=k.geometry,Y=I.isMeshStandardMaterial?G.environment:null,Z=(I.isMeshStandardMaterial?e:t).get(I.envMap||Y),at=Z&&Z.mapping===h_?Z.image.height:null,ct=S[I.type];I.precision!==null&&(v=r.getMaxPrecision(I.precision),v!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",v,"instead."));const $=it.morphAttributes.position||it.morphAttributes.normal||it.morphAttributes.color,pt=$!==void 0?$.length:0;let wt=0;it.morphAttributes.position!==void 0&&(wt=1),it.morphAttributes.normal!==void 0&&(wt=2),it.morphAttributes.color!==void 0&&(wt=3);let zt,nt,lt,ft;if(ct){const yn=Nu[ct];zt=yn.vertexShader,nt=yn.fragmentShader}else zt=I.vertexShader,nt=I.fragmentShader,c.update(I),lt=c.getVertexShaderID(I),ft=c.getFragmentShaderID(I);const mt=n.getRenderTarget(),Dt=n.state.buffers.depth.getReversed(),Wt=k.isInstancedMesh===!0,Nt=k.isBatchedMesh===!0,Jt=!!I.map,Pt=!!I.matcap,kt=!!Z,tt=!!I.aoMap,se=!!I.lightMap,$t=!!I.bumpMap,ce=!!I.normalMap,rt=!!I.displacementMap,_t=!!I.emissiveMap,gt=!!I.metalnessMap,W=!!I.roughnessMap,q=I.anisotropy>0,ht=I.clearcoat>0,xt=I.dispersion>0,Vt=I.iridescence>0,Lt=I.sheen>0,le=I.transmission>0,fe=q&&!!I.anisotropyMap,Se=ht&&!!I.clearcoatMap,He=ht&&!!I.clearcoatNormalMap,Kt=ht&&!!I.clearcoatRoughnessMap,xe=Vt&&!!I.iridescenceMap,De=Vt&&!!I.iridescenceThicknessMap,Ae=Lt&&!!I.sheenColorMap,Yt=Lt&&!!I.sheenRoughnessMap,Oe=!!I.specularMap,Te=!!I.specularColorMap,fn=!!I.specularIntensityMap,bt=le&&!!I.transmissionMap,Me=le&&!!I.thicknessMap,Xt=!!I.gradientMap,ne=!!I.alphaMap,_e=I.alphaTest>0,ve=!!I.alphaHash,je=!!I.extensions;let Yn=Xc;I.toneMapped&&(mt===null||mt.isXRRenderTarget===!0)&&(Yn=n.toneMapping);const Ci={shaderID:ct,shaderType:I.type,shaderName:I.name,vertexShader:zt,fragmentShader:nt,defines:I.defines,customVertexShaderID:lt,customFragmentShaderID:ft,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:v,batching:Nt,batchingColor:Nt&&k._colorsTexture!==null,instancing:Wt,instancingColor:Wt&&k.instanceColor!==null,instancingMorph:Wt&&k.morphTexture!==null,supportsVertexTextures:y,outputColorSpace:mt===null?n.outputColorSpace:mt.isXRRenderTarget===!0?mt.texture.colorSpace:Bd,alphaToCoverage:!!I.alphaToCoverage,map:Jt,matcap:Pt,envMap:kt,envMapMode:kt&&Z.mapping,envMapCubeUVHeight:at,aoMap:tt,lightMap:se,bumpMap:$t,normalMap:ce,displacementMap:y&&rt,emissiveMap:_t,normalMapObjectSpace:ce&&I.normalMapType===yB,normalMapTangentSpace:ce&&I.normalMapType===$d,metalnessMap:gt,roughnessMap:W,anisotropy:q,anisotropyMap:fe,clearcoat:ht,clearcoatMap:Se,clearcoatNormalMap:He,clearcoatRoughnessMap:Kt,dispersion:xt,iridescence:Vt,iridescenceMap:xe,iridescenceThicknessMap:De,sheen:Lt,sheenColorMap:Ae,sheenRoughnessMap:Yt,specularMap:Oe,specularColorMap:Te,specularIntensityMap:fn,transmission:le,transmissionMap:bt,thicknessMap:Me,gradientMap:Xt,opaque:I.transparent===!1&&I.blending===bm&&I.alphaToCoverage===!1,alphaMap:ne,alphaTest:_e,alphaHash:ve,combine:I.combine,mapUv:Jt&&E(I.map.channel),aoMapUv:tt&&E(I.aoMap.channel),lightMapUv:se&&E(I.lightMap.channel),bumpMapUv:$t&&E(I.bumpMap.channel),normalMapUv:ce&&E(I.normalMap.channel),displacementMapUv:rt&&E(I.displacementMap.channel),emissiveMapUv:_t&&E(I.emissiveMap.channel),metalnessMapUv:gt&&E(I.metalnessMap.channel),roughnessMapUv:W&&E(I.roughnessMap.channel),anisotropyMapUv:fe&&E(I.anisotropyMap.channel),clearcoatMapUv:Se&&E(I.clearcoatMap.channel),clearcoatNormalMapUv:He&&E(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Kt&&E(I.clearcoatRoughnessMap.channel),iridescenceMapUv:xe&&E(I.iridescenceMap.channel),iridescenceThicknessMapUv:De&&E(I.iridescenceThicknessMap.channel),sheenColorMapUv:Ae&&E(I.sheenColorMap.channel),sheenRoughnessMapUv:Yt&&E(I.sheenRoughnessMap.channel),specularMapUv:Oe&&E(I.specularMap.channel),specularColorMapUv:Te&&E(I.specularColorMap.channel),specularIntensityMapUv:fn&&E(I.specularIntensityMap.channel),transmissionMapUv:bt&&E(I.transmissionMap.channel),thicknessMapUv:Me&&E(I.thicknessMap.channel),alphaMapUv:ne&&E(I.alphaMap.channel),vertexTangents:!!it.attributes.tangent&&(ce||q),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!it.attributes.color&&it.attributes.color.itemSize===4,pointsUvs:k.isPoints===!0&&!!it.attributes.uv&&(Jt||ne),fog:!!st,useFog:I.fog===!0,fogExp2:!!st&&st.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:g,reverseDepthBuffer:Dt,skinning:k.isSkinnedMesh===!0,morphTargets:it.morphAttributes.position!==void 0,morphNormals:it.morphAttributes.normal!==void 0,morphColors:it.morphAttributes.color!==void 0,morphTargetsCount:pt,morphTextureStride:wt,numDirLights:w.directional.length,numPointLights:w.point.length,numSpotLights:w.spot.length,numSpotLightMaps:w.spotLightMap.length,numRectAreaLights:w.rectArea.length,numHemiLights:w.hemi.length,numDirLightShadows:w.directionalShadowMap.length,numPointLightShadows:w.pointShadowMap.length,numSpotLightShadows:w.spotShadowMap.length,numSpotLightShadowsWithMaps:w.numSpotLightShadowsWithMaps,numLightProbes:w.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&V.length>0,shadowMapType:n.shadowMap.type,toneMapping:Yn,decodeVideoTexture:Jt&&I.map.isVideoTexture===!0&&Xn.getTransfer(I.map.colorSpace)===Ai,decodeVideoTextureEmissive:_t&&I.emissiveMap.isVideoTexture===!0&&Xn.getTransfer(I.emissiveMap.colorSpace)===Ai,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===Vc,flipSided:I.side===Ka,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:je&&I.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(je&&I.extensions.multiDraw===!0||Nt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return Ci.vertexUv1s=f.has(1),Ci.vertexUv2s=f.has(2),Ci.vertexUv3s=f.has(3),f.clear(),Ci}function x(I){const w=[];if(I.shaderID?w.push(I.shaderID):(w.push(I.customVertexShaderID),w.push(I.customFragmentShaderID)),I.defines!==void 0)for(const V in I.defines)w.push(V),w.push(I.defines[V]);return I.isRawShaderMaterial===!1&&(R(w,I),D(w,I),w.push(n.outputColorSpace)),w.push(I.customProgramCacheKey),w.join()}function R(I,w){I.push(w.precision),I.push(w.outputColorSpace),I.push(w.envMapMode),I.push(w.envMapCubeUVHeight),I.push(w.mapUv),I.push(w.alphaMapUv),I.push(w.lightMapUv),I.push(w.aoMapUv),I.push(w.bumpMapUv),I.push(w.normalMapUv),I.push(w.displacementMapUv),I.push(w.emissiveMapUv),I.push(w.metalnessMapUv),I.push(w.roughnessMapUv),I.push(w.anisotropyMapUv),I.push(w.clearcoatMapUv),I.push(w.clearcoatNormalMapUv),I.push(w.clearcoatRoughnessMapUv),I.push(w.iridescenceMapUv),I.push(w.iridescenceThicknessMapUv),I.push(w.sheenColorMapUv),I.push(w.sheenRoughnessMapUv),I.push(w.specularMapUv),I.push(w.specularColorMapUv),I.push(w.specularIntensityMapUv),I.push(w.transmissionMapUv),I.push(w.thicknessMapUv),I.push(w.combine),I.push(w.fogExp2),I.push(w.sizeAttenuation),I.push(w.morphTargetsCount),I.push(w.morphAttributeCount),I.push(w.numDirLights),I.push(w.numPointLights),I.push(w.numSpotLights),I.push(w.numSpotLightMaps),I.push(w.numHemiLights),I.push(w.numRectAreaLights),I.push(w.numDirLightShadows),I.push(w.numPointLightShadows),I.push(w.numSpotLightShadows),I.push(w.numSpotLightShadowsWithMaps),I.push(w.numLightProbes),I.push(w.shadowMapType),I.push(w.toneMapping),I.push(w.numClippingPlanes),I.push(w.numClipIntersection),I.push(w.depthPacking)}function D(I,w){l.disableAll(),w.supportsVertexTextures&&l.enable(0),w.instancing&&l.enable(1),w.instancingColor&&l.enable(2),w.instancingMorph&&l.enable(3),w.matcap&&l.enable(4),w.envMap&&l.enable(5),w.normalMapObjectSpace&&l.enable(6),w.normalMapTangentSpace&&l.enable(7),w.clearcoat&&l.enable(8),w.iridescence&&l.enable(9),w.alphaTest&&l.enable(10),w.vertexColors&&l.enable(11),w.vertexAlphas&&l.enable(12),w.vertexUv1s&&l.enable(13),w.vertexUv2s&&l.enable(14),w.vertexUv3s&&l.enable(15),w.vertexTangents&&l.enable(16),w.anisotropy&&l.enable(17),w.alphaHash&&l.enable(18),w.batching&&l.enable(19),w.dispersion&&l.enable(20),w.batchingColor&&l.enable(21),I.push(l.mask),l.disableAll(),w.fog&&l.enable(0),w.useFog&&l.enable(1),w.flatShading&&l.enable(2),w.logarithmicDepthBuffer&&l.enable(3),w.reverseDepthBuffer&&l.enable(4),w.skinning&&l.enable(5),w.morphTargets&&l.enable(6),w.morphNormals&&l.enable(7),w.morphColors&&l.enable(8),w.premultipliedAlpha&&l.enable(9),w.shadowMapEnabled&&l.enable(10),w.doubleSided&&l.enable(11),w.flipSided&&l.enable(12),w.useDepthPacking&&l.enable(13),w.dithering&&l.enable(14),w.transmission&&l.enable(15),w.sheen&&l.enable(16),w.opaque&&l.enable(17),w.pointsUvs&&l.enable(18),w.decodeVideoTexture&&l.enable(19),w.decodeVideoTextureEmissive&&l.enable(20),w.alphaToCoverage&&l.enable(21),I.push(l.mask)}function O(I){const w=S[I.type];let V;if(w){const G=Nu[w];V=DB.clone(G.uniforms)}else V=I.uniforms;return V}function N(I,w){let V;for(let G=0,k=m.length;G<k;G++){const st=m[G];if(st.cacheKey===w){V=st,++V.usedTimes;break}}return V===void 0&&(V=new lW(n,w,I,s),m.push(V)),V}function B(I){if(--I.usedTimes===0){const w=m.indexOf(I);m[w]=m[m.length-1],m.pop(),I.destroy()}}function L(I){c.remove(I)}function U(){c.dispose()}return{getParameters:T,getProgramCacheKey:x,getUniforms:O,acquireProgram:N,releaseProgram:B,releaseShaderCache:L,programs:m,dispose:U}}function dW(){let n=new WeakMap;function t(a){return n.has(a)}function e(a){let l=n.get(a);return l===void 0&&(l={},n.set(a,l)),l}function i(a){n.delete(a)}function r(a,l,c){n.get(a)[l]=c}function s(){n=new WeakMap}return{has:t,get:e,remove:i,update:r,dispose:s}}function pW(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function wP(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function CP(){const n=[];let t=0;const e=[],i=[],r=[];function s(){t=0,e.length=0,i.length=0,r.length=0}function a(g,y,v,S,E,T){let x=n[t];return x===void 0?(x={id:g.id,object:g,geometry:y,material:v,groupOrder:S,renderOrder:g.renderOrder,z:E,group:T},n[t]=x):(x.id=g.id,x.object=g,x.geometry=y,x.material=v,x.groupOrder=S,x.renderOrder=g.renderOrder,x.z=E,x.group=T),t++,x}function l(g,y,v,S,E,T){const x=a(g,y,v,S,E,T);v.transmission>0?i.push(x):v.transparent===!0?r.push(x):e.push(x)}function c(g,y,v,S,E,T){const x=a(g,y,v,S,E,T);v.transmission>0?i.unshift(x):v.transparent===!0?r.unshift(x):e.unshift(x)}function f(g,y){e.length>1&&e.sort(g||pW),i.length>1&&i.sort(y||wP),r.length>1&&r.sort(y||wP)}function m(){for(let g=t,y=n.length;g<y;g++){const v=n[g];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:e,transmissive:i,transparent:r,init:s,push:l,unshift:c,finish:m,sort:f}}function mW(){let n=new WeakMap;function t(i,r){const s=n.get(i);let a;return s===void 0?(a=new CP,n.set(i,[a])):r>=s.length?(a=new CP,s.push(a)):a=s[r],a}function e(){n=new WeakMap}return{get:t,dispose:e}}function gW(){const n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new ut,color:new Ne};break;case"SpotLight":e={position:new ut,direction:new ut,color:new Ne,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new ut,color:new Ne,distance:0,decay:0};break;case"HemisphereLight":e={direction:new ut,skyColor:new Ne,groundColor:new Ne};break;case"RectAreaLight":e={color:new Ne,position:new ut,halfWidth:new ut,halfHeight:new ut};break}return n[t.id]=e,e}}}function yW(){const n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new oe};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new oe};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new oe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}let _W=0;function vW(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function xW(n){const t=new gW,e=yW(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new ut);const r=new ut,s=new nn,a=new nn;function l(f){let m=0,g=0,y=0;for(let I=0;I<9;I++)i.probe[I].set(0,0,0);let v=0,S=0,E=0,T=0,x=0,R=0,D=0,O=0,N=0,B=0,L=0;f.sort(vW);for(let I=0,w=f.length;I<w;I++){const V=f[I],G=V.color,k=V.intensity,st=V.distance,it=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)m+=G.r*k,g+=G.g*k,y+=G.b*k;else if(V.isLightProbe){for(let Y=0;Y<9;Y++)i.probe[Y].addScaledVector(V.sh.coefficients[Y],k);L++}else if(V.isDirectionalLight){const Y=t.get(V);if(Y.color.copy(V.color).multiplyScalar(V.intensity),V.castShadow){const Z=V.shadow,at=e.get(V);at.shadowIntensity=Z.intensity,at.shadowBias=Z.bias,at.shadowNormalBias=Z.normalBias,at.shadowRadius=Z.radius,at.shadowMapSize=Z.mapSize,i.directionalShadow[v]=at,i.directionalShadowMap[v]=it,i.directionalShadowMatrix[v]=V.shadow.matrix,R++}i.directional[v]=Y,v++}else if(V.isSpotLight){const Y=t.get(V);Y.position.setFromMatrixPosition(V.matrixWorld),Y.color.copy(G).multiplyScalar(k),Y.distance=st,Y.coneCos=Math.cos(V.angle),Y.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),Y.decay=V.decay,i.spot[E]=Y;const Z=V.shadow;if(V.map&&(i.spotLightMap[N]=V.map,N++,Z.updateMatrices(V),V.castShadow&&B++),i.spotLightMatrix[E]=Z.matrix,V.castShadow){const at=e.get(V);at.shadowIntensity=Z.intensity,at.shadowBias=Z.bias,at.shadowNormalBias=Z.normalBias,at.shadowRadius=Z.radius,at.shadowMapSize=Z.mapSize,i.spotShadow[E]=at,i.spotShadowMap[E]=it,O++}E++}else if(V.isRectAreaLight){const Y=t.get(V);Y.color.copy(G).multiplyScalar(k),Y.halfWidth.set(V.width*.5,0,0),Y.halfHeight.set(0,V.height*.5,0),i.rectArea[T]=Y,T++}else if(V.isPointLight){const Y=t.get(V);if(Y.color.copy(V.color).multiplyScalar(V.intensity),Y.distance=V.distance,Y.decay=V.decay,V.castShadow){const Z=V.shadow,at=e.get(V);at.shadowIntensity=Z.intensity,at.shadowBias=Z.bias,at.shadowNormalBias=Z.normalBias,at.shadowRadius=Z.radius,at.shadowMapSize=Z.mapSize,at.shadowCameraNear=Z.camera.near,at.shadowCameraFar=Z.camera.far,i.pointShadow[S]=at,i.pointShadowMap[S]=it,i.pointShadowMatrix[S]=V.shadow.matrix,D++}i.point[S]=Y,S++}else if(V.isHemisphereLight){const Y=t.get(V);Y.skyColor.copy(V.color).multiplyScalar(k),Y.groundColor.copy(V.groundColor).multiplyScalar(k),i.hemi[x]=Y,x++}}T>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ce.LTC_FLOAT_1,i.rectAreaLTC2=Ce.LTC_FLOAT_2):(i.rectAreaLTC1=Ce.LTC_HALF_1,i.rectAreaLTC2=Ce.LTC_HALF_2)),i.ambient[0]=m,i.ambient[1]=g,i.ambient[2]=y;const U=i.hash;(U.directionalLength!==v||U.pointLength!==S||U.spotLength!==E||U.rectAreaLength!==T||U.hemiLength!==x||U.numDirectionalShadows!==R||U.numPointShadows!==D||U.numSpotShadows!==O||U.numSpotMaps!==N||U.numLightProbes!==L)&&(i.directional.length=v,i.spot.length=E,i.rectArea.length=T,i.point.length=S,i.hemi.length=x,i.directionalShadow.length=R,i.directionalShadowMap.length=R,i.pointShadow.length=D,i.pointShadowMap.length=D,i.spotShadow.length=O,i.spotShadowMap.length=O,i.directionalShadowMatrix.length=R,i.pointShadowMatrix.length=D,i.spotLightMatrix.length=O+N-B,i.spotLightMap.length=N,i.numSpotLightShadowsWithMaps=B,i.numLightProbes=L,U.directionalLength=v,U.pointLength=S,U.spotLength=E,U.rectAreaLength=T,U.hemiLength=x,U.numDirectionalShadows=R,U.numPointShadows=D,U.numSpotShadows=O,U.numSpotMaps=N,U.numLightProbes=L,i.version=_W++)}function c(f,m){let g=0,y=0,v=0,S=0,E=0;const T=m.matrixWorldInverse;for(let x=0,R=f.length;x<R;x++){const D=f[x];if(D.isDirectionalLight){const O=i.directional[g];O.direction.setFromMatrixPosition(D.matrixWorld),r.setFromMatrixPosition(D.target.matrixWorld),O.direction.sub(r),O.direction.transformDirection(T),g++}else if(D.isSpotLight){const O=i.spot[v];O.position.setFromMatrixPosition(D.matrixWorld),O.position.applyMatrix4(T),O.direction.setFromMatrixPosition(D.matrixWorld),r.setFromMatrixPosition(D.target.matrixWorld),O.direction.sub(r),O.direction.transformDirection(T),v++}else if(D.isRectAreaLight){const O=i.rectArea[S];O.position.setFromMatrixPosition(D.matrixWorld),O.position.applyMatrix4(T),a.identity(),s.copy(D.matrixWorld),s.premultiply(T),a.extractRotation(s),O.halfWidth.set(D.width*.5,0,0),O.halfHeight.set(0,D.height*.5,0),O.halfWidth.applyMatrix4(a),O.halfHeight.applyMatrix4(a),S++}else if(D.isPointLight){const O=i.point[y];O.position.setFromMatrixPosition(D.matrixWorld),O.position.applyMatrix4(T),y++}else if(D.isHemisphereLight){const O=i.hemi[E];O.direction.setFromMatrixPosition(D.matrixWorld),O.direction.transformDirection(T),E++}}}return{setup:l,setupView:c,state:i}}function RP(n){const t=new xW(n),e=[],i=[];function r(m){f.camera=m,e.length=0,i.length=0}function s(m){e.push(m)}function a(m){i.push(m)}function l(){t.setup(e)}function c(m){t.setupView(e,m)}const f={lightsArray:e,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:r,state:f,setupLights:l,setupLightsView:c,pushLight:s,pushShadow:a}}function bW(n){let t=new WeakMap;function e(r,s=0){const a=t.get(r);let l;return a===void 0?(l=new RP(n),t.set(r,[l])):s>=a.length?(l=new RP(n),a.push(l)):l=a[s],l}function i(){t=new WeakMap}return{get:e,dispose:i}}const SW=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,EW=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function TW(n,t,e){let i=new Ux;const r=new oe,s=new oe,a=new ti,l=new sO({depthPacking:gB}),c=new aO,f={},m=e.maxTextureSize,g={[ch]:Ka,[Ka]:ch,[Vc]:Vc},y=new ql({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new oe},radius:{value:4}},vertexShader:SW,fragmentShader:EW}),v=y.clone();v.defines.HORIZONTAL_PASS=1;const S=new bn;S.setAttribute("position",new wi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new $r(S,y),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=UT;let x=this.type;this.render=function(B,L,U){if(T.enabled===!1||T.autoUpdate===!1&&T.needsUpdate===!1||B.length===0)return;const I=n.getRenderTarget(),w=n.getActiveCubeFace(),V=n.getActiveMipmapLevel(),G=n.state;G.setBlending(ah),G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);const k=x!==Ou&&this.type===Ou,st=x===Ou&&this.type!==Ou;for(let it=0,Y=B.length;it<Y;it++){const Z=B[it],at=Z.shadow;if(at===void 0){console.warn("THREE.WebGLShadowMap:",Z,"has no shadow.");continue}if(at.autoUpdate===!1&&at.needsUpdate===!1)continue;r.copy(at.mapSize);const ct=at.getFrameExtents();if(r.multiply(ct),s.copy(at.mapSize),(r.x>m||r.y>m)&&(r.x>m&&(s.x=Math.floor(m/ct.x),r.x=s.x*ct.x,at.mapSize.x=s.x),r.y>m&&(s.y=Math.floor(m/ct.y),r.y=s.y*ct.y,at.mapSize.y=s.y)),at.map===null||k===!0||st===!0){const pt=this.type!==Ou?{minFilter:$s,magFilter:$s}:{};at.map!==null&&at.map.dispose(),at.map=new tf(r.x,r.y,pt),at.map.texture.name=Z.name+".shadowMap",at.camera.updateProjectionMatrix()}n.setRenderTarget(at.map),n.clear();const $=at.getViewportCount();for(let pt=0;pt<$;pt++){const wt=at.getViewport(pt);a.set(s.x*wt.x,s.y*wt.y,s.x*wt.z,s.y*wt.w),G.viewport(a),at.updateMatrices(Z,pt),i=at.getFrustum(),O(L,U,at.camera,Z,this.type)}at.isPointLightShadow!==!0&&this.type===Ou&&R(at,U),at.needsUpdate=!1}x=this.type,T.needsUpdate=!1,n.setRenderTarget(I,w,V)};function R(B,L){const U=t.update(E);y.defines.VSM_SAMPLES!==B.blurSamples&&(y.defines.VSM_SAMPLES=B.blurSamples,v.defines.VSM_SAMPLES=B.blurSamples,y.needsUpdate=!0,v.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new tf(r.x,r.y)),y.uniforms.shadow_pass.value=B.map.texture,y.uniforms.resolution.value=B.mapSize,y.uniforms.radius.value=B.radius,n.setRenderTarget(B.mapPass),n.clear(),n.renderBufferDirect(L,null,U,y,E,null),v.uniforms.shadow_pass.value=B.mapPass.texture,v.uniforms.resolution.value=B.mapSize,v.uniforms.radius.value=B.radius,n.setRenderTarget(B.map),n.clear(),n.renderBufferDirect(L,null,U,v,E,null)}function D(B,L,U,I){let w=null;const V=U.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(V!==void 0)w=V;else if(w=U.isPointLight===!0?c:l,n.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0){const G=w.uuid,k=L.uuid;let st=f[G];st===void 0&&(st={},f[G]=st);let it=st[k];it===void 0&&(it=w.clone(),st[k]=it,L.addEventListener("dispose",N)),w=it}if(w.visible=L.visible,w.wireframe=L.wireframe,I===Ou?w.side=L.shadowSide!==null?L.shadowSide:L.side:w.side=L.shadowSide!==null?L.shadowSide:g[L.side],w.alphaMap=L.alphaMap,w.alphaTest=L.alphaTest,w.map=L.map,w.clipShadows=L.clipShadows,w.clippingPlanes=L.clippingPlanes,w.clipIntersection=L.clipIntersection,w.displacementMap=L.displacementMap,w.displacementScale=L.displacementScale,w.displacementBias=L.displacementBias,w.wireframeLinewidth=L.wireframeLinewidth,w.linewidth=L.linewidth,U.isPointLight===!0&&w.isMeshDistanceMaterial===!0){const G=n.properties.get(w);G.light=U}return w}function O(B,L,U,I,w){if(B.visible===!1)return;if(B.layers.test(L.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&w===Ou)&&(!B.frustumCulled||i.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,B.matrixWorld);const k=t.update(B),st=B.material;if(Array.isArray(st)){const it=k.groups;for(let Y=0,Z=it.length;Y<Z;Y++){const at=it[Y],ct=st[at.materialIndex];if(ct&&ct.visible){const $=D(B,ct,I,w);B.onBeforeShadow(n,B,L,U,k,$,at),n.renderBufferDirect(U,null,k,$,B,at),B.onAfterShadow(n,B,L,U,k,$,at)}}}else if(st.visible){const it=D(B,st,I,w);B.onBeforeShadow(n,B,L,U,k,it,null),n.renderBufferDirect(U,null,k,it,B,null),B.onAfterShadow(n,B,L,U,k,it,null)}}const G=B.children;for(let k=0,st=G.length;k<st;k++)O(G[k],L,U,I,w)}function N(B){B.target.removeEventListener("dispose",N);for(const U in f){const I=f[U],w=B.target.uuid;w in I&&(I[w].dispose(),delete I[w])}}}const MW={[a1]:o1,[l1]:f1,[u1]:h1,[Om]:c1,[o1]:a1,[f1]:l1,[h1]:u1,[c1]:Om};function AW(n,t){function e(){let bt=!1;const Me=new ti;let Xt=null;const ne=new ti(0,0,0,0);return{setMask:function(_e){Xt!==_e&&!bt&&(n.colorMask(_e,_e,_e,_e),Xt=_e)},setLocked:function(_e){bt=_e},setClear:function(_e,ve,je,Yn,Ci){Ci===!0&&(_e*=Yn,ve*=Yn,je*=Yn),Me.set(_e,ve,je,Yn),ne.equals(Me)===!1&&(n.clearColor(_e,ve,je,Yn),ne.copy(Me))},reset:function(){bt=!1,Xt=null,ne.set(-1,0,0,0)}}}function i(){let bt=!1,Me=!1,Xt=null,ne=null,_e=null;return{setReversed:function(ve){if(Me!==ve){const je=t.get("EXT_clip_control");Me?je.clipControlEXT(je.LOWER_LEFT_EXT,je.ZERO_TO_ONE_EXT):je.clipControlEXT(je.LOWER_LEFT_EXT,je.NEGATIVE_ONE_TO_ONE_EXT);const Yn=_e;_e=null,this.setClear(Yn)}Me=ve},getReversed:function(){return Me},setTest:function(ve){ve?mt(n.DEPTH_TEST):Dt(n.DEPTH_TEST)},setMask:function(ve){Xt!==ve&&!bt&&(n.depthMask(ve),Xt=ve)},setFunc:function(ve){if(Me&&(ve=MW[ve]),ne!==ve){switch(ve){case a1:n.depthFunc(n.NEVER);break;case o1:n.depthFunc(n.ALWAYS);break;case l1:n.depthFunc(n.LESS);break;case Om:n.depthFunc(n.LEQUAL);break;case u1:n.depthFunc(n.EQUAL);break;case c1:n.depthFunc(n.GEQUAL);break;case f1:n.depthFunc(n.GREATER);break;case h1:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ne=ve}},setLocked:function(ve){bt=ve},setClear:function(ve){_e!==ve&&(Me&&(ve=1-ve),n.clearDepth(ve),_e=ve)},reset:function(){bt=!1,Xt=null,ne=null,_e=null,Me=!1}}}function r(){let bt=!1,Me=null,Xt=null,ne=null,_e=null,ve=null,je=null,Yn=null,Ci=null;return{setTest:function(yn){bt||(yn?mt(n.STENCIL_TEST):Dt(n.STENCIL_TEST))},setMask:function(yn){Me!==yn&&!bt&&(n.stencilMask(yn),Me=yn)},setFunc:function(yn,kr,$n){(Xt!==yn||ne!==kr||_e!==$n)&&(n.stencilFunc(yn,kr,$n),Xt=yn,ne=kr,_e=$n)},setOp:function(yn,kr,$n){(ve!==yn||je!==kr||Yn!==$n)&&(n.stencilOp(yn,kr,$n),ve=yn,je=kr,Yn=$n)},setLocked:function(yn){bt=yn},setClear:function(yn){Ci!==yn&&(n.clearStencil(yn),Ci=yn)},reset:function(){bt=!1,Me=null,Xt=null,ne=null,_e=null,ve=null,je=null,Yn=null,Ci=null}}}const s=new e,a=new i,l=new r,c=new WeakMap,f=new WeakMap;let m={},g={},y=new WeakMap,v=[],S=null,E=!1,T=null,x=null,R=null,D=null,O=null,N=null,B=null,L=new Ne(0,0,0),U=0,I=!1,w=null,V=null,G=null,k=null,st=null;const it=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Y=!1,Z=0;const at=n.getParameter(n.VERSION);at.indexOf("WebGL")!==-1?(Z=parseFloat(/^WebGL (\d)/.exec(at)[1]),Y=Z>=1):at.indexOf("OpenGL ES")!==-1&&(Z=parseFloat(/^OpenGL ES (\d)/.exec(at)[1]),Y=Z>=2);let ct=null,$={};const pt=n.getParameter(n.SCISSOR_BOX),wt=n.getParameter(n.VIEWPORT),zt=new ti().fromArray(pt),nt=new ti().fromArray(wt);function lt(bt,Me,Xt,ne){const _e=new Uint8Array(4),ve=n.createTexture();n.bindTexture(bt,ve),n.texParameteri(bt,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(bt,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let je=0;je<Xt;je++)bt===n.TEXTURE_3D||bt===n.TEXTURE_2D_ARRAY?n.texImage3D(Me,0,n.RGBA,1,1,ne,0,n.RGBA,n.UNSIGNED_BYTE,_e):n.texImage2D(Me+je,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,_e);return ve}const ft={};ft[n.TEXTURE_2D]=lt(n.TEXTURE_2D,n.TEXTURE_2D,1),ft[n.TEXTURE_CUBE_MAP]=lt(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ft[n.TEXTURE_2D_ARRAY]=lt(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ft[n.TEXTURE_3D]=lt(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),l.setClear(0),mt(n.DEPTH_TEST),a.setFunc(Om),$t(!1),ce(qC),mt(n.CULL_FACE),tt(ah);function mt(bt){m[bt]!==!0&&(n.enable(bt),m[bt]=!0)}function Dt(bt){m[bt]!==!1&&(n.disable(bt),m[bt]=!1)}function Wt(bt,Me){return g[bt]!==Me?(n.bindFramebuffer(bt,Me),g[bt]=Me,bt===n.DRAW_FRAMEBUFFER&&(g[n.FRAMEBUFFER]=Me),bt===n.FRAMEBUFFER&&(g[n.DRAW_FRAMEBUFFER]=Me),!0):!1}function Nt(bt,Me){let Xt=v,ne=!1;if(bt){Xt=y.get(Me),Xt===void 0&&(Xt=[],y.set(Me,Xt));const _e=bt.textures;if(Xt.length!==_e.length||Xt[0]!==n.COLOR_ATTACHMENT0){for(let ve=0,je=_e.length;ve<je;ve++)Xt[ve]=n.COLOR_ATTACHMENT0+ve;Xt.length=_e.length,ne=!0}}else Xt[0]!==n.BACK&&(Xt[0]=n.BACK,ne=!0);ne&&n.drawBuffers(Xt)}function Jt(bt){return S!==bt?(n.useProgram(bt),S=bt,!0):!1}const Pt={[bd]:n.FUNC_ADD,[Fz]:n.FUNC_SUBTRACT,[kz]:n.FUNC_REVERSE_SUBTRACT};Pt[Hz]=n.MIN,Pt[Gz]=n.MAX;const kt={[qz]:n.ZERO,[jz]:n.ONE,[Xz]:n.SRC_COLOR,[r1]:n.SRC_ALPHA,[Qz]:n.SRC_ALPHA_SATURATE,[Kz]:n.DST_COLOR,[Yz]:n.DST_ALPHA,[Wz]:n.ONE_MINUS_SRC_COLOR,[s1]:n.ONE_MINUS_SRC_ALPHA,[Zz]:n.ONE_MINUS_DST_COLOR,[$z]:n.ONE_MINUS_DST_ALPHA,[Jz]:n.CONSTANT_COLOR,[tB]:n.ONE_MINUS_CONSTANT_COLOR,[eB]:n.CONSTANT_ALPHA,[nB]:n.ONE_MINUS_CONSTANT_ALPHA};function tt(bt,Me,Xt,ne,_e,ve,je,Yn,Ci,yn){if(bt===ah){E===!0&&(Dt(n.BLEND),E=!1);return}if(E===!1&&(mt(n.BLEND),E=!0),bt!==Vz){if(bt!==T||yn!==I){if((x!==bd||O!==bd)&&(n.blendEquation(n.FUNC_ADD),x=bd,O=bd),yn)switch(bt){case bm:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case i1:n.blendFunc(n.ONE,n.ONE);break;case jC:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case XC:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",bt);break}else switch(bt){case bm:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case i1:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case jC:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case XC:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",bt);break}R=null,D=null,N=null,B=null,L.set(0,0,0),U=0,T=bt,I=yn}return}_e=_e||Me,ve=ve||Xt,je=je||ne,(Me!==x||_e!==O)&&(n.blendEquationSeparate(Pt[Me],Pt[_e]),x=Me,O=_e),(Xt!==R||ne!==D||ve!==N||je!==B)&&(n.blendFuncSeparate(kt[Xt],kt[ne],kt[ve],kt[je]),R=Xt,D=ne,N=ve,B=je),(Yn.equals(L)===!1||Ci!==U)&&(n.blendColor(Yn.r,Yn.g,Yn.b,Ci),L.copy(Yn),U=Ci),T=bt,I=!1}function se(bt,Me){bt.side===Vc?Dt(n.CULL_FACE):mt(n.CULL_FACE);let Xt=bt.side===Ka;Me&&(Xt=!Xt),$t(Xt),bt.blending===bm&&bt.transparent===!1?tt(ah):tt(bt.blending,bt.blendEquation,bt.blendSrc,bt.blendDst,bt.blendEquationAlpha,bt.blendSrcAlpha,bt.blendDstAlpha,bt.blendColor,bt.blendAlpha,bt.premultipliedAlpha),a.setFunc(bt.depthFunc),a.setTest(bt.depthTest),a.setMask(bt.depthWrite),s.setMask(bt.colorWrite);const ne=bt.stencilWrite;l.setTest(ne),ne&&(l.setMask(bt.stencilWriteMask),l.setFunc(bt.stencilFunc,bt.stencilRef,bt.stencilFuncMask),l.setOp(bt.stencilFail,bt.stencilZFail,bt.stencilZPass)),_t(bt.polygonOffset,bt.polygonOffsetFactor,bt.polygonOffsetUnits),bt.alphaToCoverage===!0?mt(n.SAMPLE_ALPHA_TO_COVERAGE):Dt(n.SAMPLE_ALPHA_TO_COVERAGE)}function $t(bt){w!==bt&&(bt?n.frontFace(n.CW):n.frontFace(n.CCW),w=bt)}function ce(bt){bt!==Uz?(mt(n.CULL_FACE),bt!==V&&(bt===qC?n.cullFace(n.BACK):bt===zz?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Dt(n.CULL_FACE),V=bt}function rt(bt){bt!==G&&(Y&&n.lineWidth(bt),G=bt)}function _t(bt,Me,Xt){bt?(mt(n.POLYGON_OFFSET_FILL),(k!==Me||st!==Xt)&&(n.polygonOffset(Me,Xt),k=Me,st=Xt)):Dt(n.POLYGON_OFFSET_FILL)}function gt(bt){bt?mt(n.SCISSOR_TEST):Dt(n.SCISSOR_TEST)}function W(bt){bt===void 0&&(bt=n.TEXTURE0+it-1),ct!==bt&&(n.activeTexture(bt),ct=bt)}function q(bt,Me,Xt){Xt===void 0&&(ct===null?Xt=n.TEXTURE0+it-1:Xt=ct);let ne=$[Xt];ne===void 0&&(ne={type:void 0,texture:void 0},$[Xt]=ne),(ne.type!==bt||ne.texture!==Me)&&(ct!==Xt&&(n.activeTexture(Xt),ct=Xt),n.bindTexture(bt,Me||ft[bt]),ne.type=bt,ne.texture=Me)}function ht(){const bt=$[ct];bt!==void 0&&bt.type!==void 0&&(n.bindTexture(bt.type,null),bt.type=void 0,bt.texture=void 0)}function xt(){try{n.compressedTexImage2D(...arguments)}catch(bt){console.error("THREE.WebGLState:",bt)}}function Vt(){try{n.compressedTexImage3D(...arguments)}catch(bt){console.error("THREE.WebGLState:",bt)}}function Lt(){try{n.texSubImage2D(...arguments)}catch(bt){console.error("THREE.WebGLState:",bt)}}function le(){try{n.texSubImage3D(...arguments)}catch(bt){console.error("THREE.WebGLState:",bt)}}function fe(){try{n.compressedTexSubImage2D(...arguments)}catch(bt){console.error("THREE.WebGLState:",bt)}}function Se(){try{n.compressedTexSubImage3D(...arguments)}catch(bt){console.error("THREE.WebGLState:",bt)}}function He(){try{n.texStorage2D(...arguments)}catch(bt){console.error("THREE.WebGLState:",bt)}}function Kt(){try{n.texStorage3D(...arguments)}catch(bt){console.error("THREE.WebGLState:",bt)}}function xe(){try{n.texImage2D(...arguments)}catch(bt){console.error("THREE.WebGLState:",bt)}}function De(){try{n.texImage3D(...arguments)}catch(bt){console.error("THREE.WebGLState:",bt)}}function Ae(bt){zt.equals(bt)===!1&&(n.scissor(bt.x,bt.y,bt.z,bt.w),zt.copy(bt))}function Yt(bt){nt.equals(bt)===!1&&(n.viewport(bt.x,bt.y,bt.z,bt.w),nt.copy(bt))}function Oe(bt,Me){let Xt=f.get(Me);Xt===void 0&&(Xt=new WeakMap,f.set(Me,Xt));let ne=Xt.get(bt);ne===void 0&&(ne=n.getUniformBlockIndex(Me,bt.name),Xt.set(bt,ne))}function Te(bt,Me){const ne=f.get(Me).get(bt);c.get(Me)!==ne&&(n.uniformBlockBinding(Me,ne,bt.__bindingPointIndex),c.set(Me,ne))}function fn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),m={},ct=null,$={},g={},y=new WeakMap,v=[],S=null,E=!1,T=null,x=null,R=null,D=null,O=null,N=null,B=null,L=new Ne(0,0,0),U=0,I=!1,w=null,V=null,G=null,k=null,st=null,zt.set(0,0,n.canvas.width,n.canvas.height),nt.set(0,0,n.canvas.width,n.canvas.height),s.reset(),a.reset(),l.reset()}return{buffers:{color:s,depth:a,stencil:l},enable:mt,disable:Dt,bindFramebuffer:Wt,drawBuffers:Nt,useProgram:Jt,setBlending:tt,setMaterial:se,setFlipSided:$t,setCullFace:ce,setLineWidth:rt,setPolygonOffset:_t,setScissorTest:gt,activeTexture:W,bindTexture:q,unbindTexture:ht,compressedTexImage2D:xt,compressedTexImage3D:Vt,texImage2D:xe,texImage3D:De,updateUBOMapping:Oe,uniformBlockBinding:Te,texStorage2D:He,texStorage3D:Kt,texSubImage2D:Lt,texSubImage3D:le,compressedTexSubImage2D:fe,compressedTexSubImage3D:Se,scissor:Ae,viewport:Yt,reset:fn}}function wW(n,t,e,i,r,s,a){const l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new oe,m=new WeakMap;let g;const y=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(W,q){return v?new OffscreenCanvas(W,q):J0("canvas")}function E(W,q,ht){let xt=1;const Vt=gt(W);if((Vt.width>ht||Vt.height>ht)&&(xt=ht/Math.max(Vt.width,Vt.height)),xt<1)if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap||typeof VideoFrame<"u"&&W instanceof VideoFrame){const Lt=Math.floor(xt*Vt.width),le=Math.floor(xt*Vt.height);g===void 0&&(g=S(Lt,le));const fe=q?S(Lt,le):g;return fe.width=Lt,fe.height=le,fe.getContext("2d").drawImage(W,0,0,Lt,le),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Vt.width+"x"+Vt.height+") to ("+Lt+"x"+le+")."),fe}else return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Vt.width+"x"+Vt.height+")."),W;return W}function T(W){return W.generateMipmaps}function x(W){n.generateMipmap(W)}function R(W){return W.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:W.isWebGL3DRenderTarget?n.TEXTURE_3D:W.isWebGLArrayRenderTarget||W.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function D(W,q,ht,xt,Vt=!1){if(W!==null){if(n[W]!==void 0)return n[W];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let Lt=q;if(q===n.RED&&(ht===n.FLOAT&&(Lt=n.R32F),ht===n.HALF_FLOAT&&(Lt=n.R16F),ht===n.UNSIGNED_BYTE&&(Lt=n.R8)),q===n.RED_INTEGER&&(ht===n.UNSIGNED_BYTE&&(Lt=n.R8UI),ht===n.UNSIGNED_SHORT&&(Lt=n.R16UI),ht===n.UNSIGNED_INT&&(Lt=n.R32UI),ht===n.BYTE&&(Lt=n.R8I),ht===n.SHORT&&(Lt=n.R16I),ht===n.INT&&(Lt=n.R32I)),q===n.RG&&(ht===n.FLOAT&&(Lt=n.RG32F),ht===n.HALF_FLOAT&&(Lt=n.RG16F),ht===n.UNSIGNED_BYTE&&(Lt=n.RG8)),q===n.RG_INTEGER&&(ht===n.UNSIGNED_BYTE&&(Lt=n.RG8UI),ht===n.UNSIGNED_SHORT&&(Lt=n.RG16UI),ht===n.UNSIGNED_INT&&(Lt=n.RG32UI),ht===n.BYTE&&(Lt=n.RG8I),ht===n.SHORT&&(Lt=n.RG16I),ht===n.INT&&(Lt=n.RG32I)),q===n.RGB_INTEGER&&(ht===n.UNSIGNED_BYTE&&(Lt=n.RGB8UI),ht===n.UNSIGNED_SHORT&&(Lt=n.RGB16UI),ht===n.UNSIGNED_INT&&(Lt=n.RGB32UI),ht===n.BYTE&&(Lt=n.RGB8I),ht===n.SHORT&&(Lt=n.RGB16I),ht===n.INT&&(Lt=n.RGB32I)),q===n.RGBA_INTEGER&&(ht===n.UNSIGNED_BYTE&&(Lt=n.RGBA8UI),ht===n.UNSIGNED_SHORT&&(Lt=n.RGBA16UI),ht===n.UNSIGNED_INT&&(Lt=n.RGBA32UI),ht===n.BYTE&&(Lt=n.RGBA8I),ht===n.SHORT&&(Lt=n.RGBA16I),ht===n.INT&&(Lt=n.RGBA32I)),q===n.RGB&&ht===n.UNSIGNED_INT_5_9_9_9_REV&&(Lt=n.RGB9_E5),q===n.RGBA){const le=Vt?K0:Xn.getTransfer(xt);ht===n.FLOAT&&(Lt=n.RGBA32F),ht===n.HALF_FLOAT&&(Lt=n.RGBA16F),ht===n.UNSIGNED_BYTE&&(Lt=le===Ai?n.SRGB8_ALPHA8:n.RGBA8),ht===n.UNSIGNED_SHORT_4_4_4_4&&(Lt=n.RGBA4),ht===n.UNSIGNED_SHORT_5_5_5_1&&(Lt=n.RGB5_A1)}return(Lt===n.R16F||Lt===n.R32F||Lt===n.RG16F||Lt===n.RG32F||Lt===n.RGBA16F||Lt===n.RGBA32F)&&t.get("EXT_color_buffer_float"),Lt}function O(W,q){let ht;return W?q===null||q===hh||q===Dm?ht=n.DEPTH24_STENCIL8:q===Do?ht=n.DEPTH32F_STENCIL8:q===Fy&&(ht=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):q===null||q===hh||q===Dm?ht=n.DEPTH_COMPONENT24:q===Do?ht=n.DEPTH_COMPONENT32F:q===Fy&&(ht=n.DEPTH_COMPONENT16),ht}function N(W,q){return T(W)===!0||W.isFramebufferTexture&&W.minFilter!==$s&&W.minFilter!==ms?Math.log2(Math.max(q.width,q.height))+1:W.mipmaps!==void 0&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?q.mipmaps.length:1}function B(W){const q=W.target;q.removeEventListener("dispose",B),U(q),q.isVideoTexture&&m.delete(q)}function L(W){const q=W.target;q.removeEventListener("dispose",L),w(q)}function U(W){const q=i.get(W);if(q.__webglInit===void 0)return;const ht=W.source,xt=y.get(ht);if(xt){const Vt=xt[q.__cacheKey];Vt.usedTimes--,Vt.usedTimes===0&&I(W),Object.keys(xt).length===0&&y.delete(ht)}i.remove(W)}function I(W){const q=i.get(W);n.deleteTexture(q.__webglTexture);const ht=W.source,xt=y.get(ht);delete xt[q.__cacheKey],a.memory.textures--}function w(W){const q=i.get(W);if(W.depthTexture&&(W.depthTexture.dispose(),i.remove(W.depthTexture)),W.isWebGLCubeRenderTarget)for(let xt=0;xt<6;xt++){if(Array.isArray(q.__webglFramebuffer[xt]))for(let Vt=0;Vt<q.__webglFramebuffer[xt].length;Vt++)n.deleteFramebuffer(q.__webglFramebuffer[xt][Vt]);else n.deleteFramebuffer(q.__webglFramebuffer[xt]);q.__webglDepthbuffer&&n.deleteRenderbuffer(q.__webglDepthbuffer[xt])}else{if(Array.isArray(q.__webglFramebuffer))for(let xt=0;xt<q.__webglFramebuffer.length;xt++)n.deleteFramebuffer(q.__webglFramebuffer[xt]);else n.deleteFramebuffer(q.__webglFramebuffer);if(q.__webglDepthbuffer&&n.deleteRenderbuffer(q.__webglDepthbuffer),q.__webglMultisampledFramebuffer&&n.deleteFramebuffer(q.__webglMultisampledFramebuffer),q.__webglColorRenderbuffer)for(let xt=0;xt<q.__webglColorRenderbuffer.length;xt++)q.__webglColorRenderbuffer[xt]&&n.deleteRenderbuffer(q.__webglColorRenderbuffer[xt]);q.__webglDepthRenderbuffer&&n.deleteRenderbuffer(q.__webglDepthRenderbuffer)}const ht=W.textures;for(let xt=0,Vt=ht.length;xt<Vt;xt++){const Lt=i.get(ht[xt]);Lt.__webglTexture&&(n.deleteTexture(Lt.__webglTexture),a.memory.textures--),i.remove(ht[xt])}i.remove(W)}let V=0;function G(){V=0}function k(){const W=V;return W>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+r.maxTextures),V+=1,W}function st(W){const q=[];return q.push(W.wrapS),q.push(W.wrapT),q.push(W.wrapR||0),q.push(W.magFilter),q.push(W.minFilter),q.push(W.anisotropy),q.push(W.internalFormat),q.push(W.format),q.push(W.type),q.push(W.generateMipmaps),q.push(W.premultiplyAlpha),q.push(W.flipY),q.push(W.unpackAlignment),q.push(W.colorSpace),q.join()}function it(W,q){const ht=i.get(W);if(W.isVideoTexture&&rt(W),W.isRenderTargetTexture===!1&&W.version>0&&ht.__version!==W.version){const xt=W.image;if(xt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{nt(ht,W,q);return}}e.bindTexture(n.TEXTURE_2D,ht.__webglTexture,n.TEXTURE0+q)}function Y(W,q){const ht=i.get(W);if(W.version>0&&ht.__version!==W.version){nt(ht,W,q);return}e.bindTexture(n.TEXTURE_2D_ARRAY,ht.__webglTexture,n.TEXTURE0+q)}function Z(W,q){const ht=i.get(W);if(W.version>0&&ht.__version!==W.version){nt(ht,W,q);return}e.bindTexture(n.TEXTURE_3D,ht.__webglTexture,n.TEXTURE0+q)}function at(W,q){const ht=i.get(W);if(W.version>0&&ht.__version!==W.version){lt(ht,W,q);return}e.bindTexture(n.TEXTURE_CUBE_MAP,ht.__webglTexture,n.TEXTURE0+q)}const ct={[X0]:n.REPEAT,[Hl]:n.CLAMP_TO_EDGE,[W0]:n.MIRRORED_REPEAT},$={[$s]:n.NEAREST,[D2]:n.NEAREST_MIPMAP_NEAREST,[Ay]:n.NEAREST_MIPMAP_LINEAR,[ms]:n.LINEAR,[b0]:n.LINEAR_MIPMAP_NEAREST,[Gc]:n.LINEAR_MIPMAP_LINEAR},pt={[_B]:n.NEVER,[TB]:n.ALWAYS,[vB]:n.LESS,[H2]:n.LEQUAL,[xB]:n.EQUAL,[EB]:n.GEQUAL,[bB]:n.GREATER,[SB]:n.NOTEQUAL};function wt(W,q){if(q.type===Do&&t.has("OES_texture_float_linear")===!1&&(q.magFilter===ms||q.magFilter===b0||q.magFilter===Ay||q.magFilter===Gc||q.minFilter===ms||q.minFilter===b0||q.minFilter===Ay||q.minFilter===Gc)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(W,n.TEXTURE_WRAP_S,ct[q.wrapS]),n.texParameteri(W,n.TEXTURE_WRAP_T,ct[q.wrapT]),(W===n.TEXTURE_3D||W===n.TEXTURE_2D_ARRAY)&&n.texParameteri(W,n.TEXTURE_WRAP_R,ct[q.wrapR]),n.texParameteri(W,n.TEXTURE_MAG_FILTER,$[q.magFilter]),n.texParameteri(W,n.TEXTURE_MIN_FILTER,$[q.minFilter]),q.compareFunction&&(n.texParameteri(W,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(W,n.TEXTURE_COMPARE_FUNC,pt[q.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(q.magFilter===$s||q.minFilter!==Ay&&q.minFilter!==Gc||q.type===Do&&t.has("OES_texture_float_linear")===!1)return;if(q.anisotropy>1||i.get(q).__currentAnisotropy){const ht=t.get("EXT_texture_filter_anisotropic");n.texParameterf(W,ht.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,r.getMaxAnisotropy())),i.get(q).__currentAnisotropy=q.anisotropy}}}function zt(W,q){let ht=!1;W.__webglInit===void 0&&(W.__webglInit=!0,q.addEventListener("dispose",B));const xt=q.source;let Vt=y.get(xt);Vt===void 0&&(Vt={},y.set(xt,Vt));const Lt=st(q);if(Lt!==W.__cacheKey){Vt[Lt]===void 0&&(Vt[Lt]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,ht=!0),Vt[Lt].usedTimes++;const le=Vt[W.__cacheKey];le!==void 0&&(Vt[W.__cacheKey].usedTimes--,le.usedTimes===0&&I(q)),W.__cacheKey=Lt,W.__webglTexture=Vt[Lt].texture}return ht}function nt(W,q,ht){let xt=n.TEXTURE_2D;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(xt=n.TEXTURE_2D_ARRAY),q.isData3DTexture&&(xt=n.TEXTURE_3D);const Vt=zt(W,q),Lt=q.source;e.bindTexture(xt,W.__webglTexture,n.TEXTURE0+ht);const le=i.get(Lt);if(Lt.version!==le.__version||Vt===!0){e.activeTexture(n.TEXTURE0+ht);const fe=Xn.getPrimaries(Xn.workingColorSpace),Se=q.colorSpace===nh?null:Xn.getPrimaries(q.colorSpace),He=q.colorSpace===nh||fe===Se?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,He);let Kt=E(q.image,!1,r.maxTextureSize);Kt=_t(q,Kt);const xe=s.convert(q.format,q.colorSpace),De=s.convert(q.type);let Ae=D(q.internalFormat,xe,De,q.colorSpace,q.isVideoTexture);wt(xt,q);let Yt;const Oe=q.mipmaps,Te=q.isVideoTexture!==!0,fn=le.__version===void 0||Vt===!0,bt=Lt.dataReady,Me=N(q,Kt);if(q.isDepthTexture)Ae=O(q.format===Nm,q.type),fn&&(Te?e.texStorage2D(n.TEXTURE_2D,1,Ae,Kt.width,Kt.height):e.texImage2D(n.TEXTURE_2D,0,Ae,Kt.width,Kt.height,0,xe,De,null));else if(q.isDataTexture)if(Oe.length>0){Te&&fn&&e.texStorage2D(n.TEXTURE_2D,Me,Ae,Oe[0].width,Oe[0].height);for(let Xt=0,ne=Oe.length;Xt<ne;Xt++)Yt=Oe[Xt],Te?bt&&e.texSubImage2D(n.TEXTURE_2D,Xt,0,0,Yt.width,Yt.height,xe,De,Yt.data):e.texImage2D(n.TEXTURE_2D,Xt,Ae,Yt.width,Yt.height,0,xe,De,Yt.data);q.generateMipmaps=!1}else Te?(fn&&e.texStorage2D(n.TEXTURE_2D,Me,Ae,Kt.width,Kt.height),bt&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,Kt.width,Kt.height,xe,De,Kt.data)):e.texImage2D(n.TEXTURE_2D,0,Ae,Kt.width,Kt.height,0,xe,De,Kt.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){Te&&fn&&e.texStorage3D(n.TEXTURE_2D_ARRAY,Me,Ae,Oe[0].width,Oe[0].height,Kt.depth);for(let Xt=0,ne=Oe.length;Xt<ne;Xt++)if(Yt=Oe[Xt],q.format!==Ta)if(xe!==null)if(Te){if(bt)if(q.layerUpdates.size>0){const _e=nR(Yt.width,Yt.height,q.format,q.type);for(const ve of q.layerUpdates){const je=Yt.data.subarray(ve*_e/Yt.data.BYTES_PER_ELEMENT,(ve+1)*_e/Yt.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Xt,0,0,ve,Yt.width,Yt.height,1,xe,je)}q.clearLayerUpdates()}else e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Xt,0,0,0,Yt.width,Yt.height,Kt.depth,xe,Yt.data)}else e.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Xt,Ae,Yt.width,Yt.height,Kt.depth,0,Yt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Te?bt&&e.texSubImage3D(n.TEXTURE_2D_ARRAY,Xt,0,0,0,Yt.width,Yt.height,Kt.depth,xe,De,Yt.data):e.texImage3D(n.TEXTURE_2D_ARRAY,Xt,Ae,Yt.width,Yt.height,Kt.depth,0,xe,De,Yt.data)}else{Te&&fn&&e.texStorage2D(n.TEXTURE_2D,Me,Ae,Oe[0].width,Oe[0].height);for(let Xt=0,ne=Oe.length;Xt<ne;Xt++)Yt=Oe[Xt],q.format!==Ta?xe!==null?Te?bt&&e.compressedTexSubImage2D(n.TEXTURE_2D,Xt,0,0,Yt.width,Yt.height,xe,Yt.data):e.compressedTexImage2D(n.TEXTURE_2D,Xt,Ae,Yt.width,Yt.height,0,Yt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Te?bt&&e.texSubImage2D(n.TEXTURE_2D,Xt,0,0,Yt.width,Yt.height,xe,De,Yt.data):e.texImage2D(n.TEXTURE_2D,Xt,Ae,Yt.width,Yt.height,0,xe,De,Yt.data)}else if(q.isDataArrayTexture)if(Te){if(fn&&e.texStorage3D(n.TEXTURE_2D_ARRAY,Me,Ae,Kt.width,Kt.height,Kt.depth),bt)if(q.layerUpdates.size>0){const Xt=nR(Kt.width,Kt.height,q.format,q.type);for(const ne of q.layerUpdates){const _e=Kt.data.subarray(ne*Xt/Kt.data.BYTES_PER_ELEMENT,(ne+1)*Xt/Kt.data.BYTES_PER_ELEMENT);e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,ne,Kt.width,Kt.height,1,xe,De,_e)}q.clearLayerUpdates()}else e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Kt.width,Kt.height,Kt.depth,xe,De,Kt.data)}else e.texImage3D(n.TEXTURE_2D_ARRAY,0,Ae,Kt.width,Kt.height,Kt.depth,0,xe,De,Kt.data);else if(q.isData3DTexture)Te?(fn&&e.texStorage3D(n.TEXTURE_3D,Me,Ae,Kt.width,Kt.height,Kt.depth),bt&&e.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Kt.width,Kt.height,Kt.depth,xe,De,Kt.data)):e.texImage3D(n.TEXTURE_3D,0,Ae,Kt.width,Kt.height,Kt.depth,0,xe,De,Kt.data);else if(q.isFramebufferTexture){if(fn)if(Te)e.texStorage2D(n.TEXTURE_2D,Me,Ae,Kt.width,Kt.height);else{let Xt=Kt.width,ne=Kt.height;for(let _e=0;_e<Me;_e++)e.texImage2D(n.TEXTURE_2D,_e,Ae,Xt,ne,0,xe,De,null),Xt>>=1,ne>>=1}}else if(Oe.length>0){if(Te&&fn){const Xt=gt(Oe[0]);e.texStorage2D(n.TEXTURE_2D,Me,Ae,Xt.width,Xt.height)}for(let Xt=0,ne=Oe.length;Xt<ne;Xt++)Yt=Oe[Xt],Te?bt&&e.texSubImage2D(n.TEXTURE_2D,Xt,0,0,xe,De,Yt):e.texImage2D(n.TEXTURE_2D,Xt,Ae,xe,De,Yt);q.generateMipmaps=!1}else if(Te){if(fn){const Xt=gt(Kt);e.texStorage2D(n.TEXTURE_2D,Me,Ae,Xt.width,Xt.height)}bt&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,xe,De,Kt)}else e.texImage2D(n.TEXTURE_2D,0,Ae,xe,De,Kt);T(q)&&x(xt),le.__version=Lt.version,q.onUpdate&&q.onUpdate(q)}W.__version=q.version}function lt(W,q,ht){if(q.image.length!==6)return;const xt=zt(W,q),Vt=q.source;e.bindTexture(n.TEXTURE_CUBE_MAP,W.__webglTexture,n.TEXTURE0+ht);const Lt=i.get(Vt);if(Vt.version!==Lt.__version||xt===!0){e.activeTexture(n.TEXTURE0+ht);const le=Xn.getPrimaries(Xn.workingColorSpace),fe=q.colorSpace===nh?null:Xn.getPrimaries(q.colorSpace),Se=q.colorSpace===nh||le===fe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Se);const He=q.isCompressedTexture||q.image[0].isCompressedTexture,Kt=q.image[0]&&q.image[0].isDataTexture,xe=[];for(let ne=0;ne<6;ne++)!He&&!Kt?xe[ne]=E(q.image[ne],!0,r.maxCubemapSize):xe[ne]=Kt?q.image[ne].image:q.image[ne],xe[ne]=_t(q,xe[ne]);const De=xe[0],Ae=s.convert(q.format,q.colorSpace),Yt=s.convert(q.type),Oe=D(q.internalFormat,Ae,Yt,q.colorSpace),Te=q.isVideoTexture!==!0,fn=Lt.__version===void 0||xt===!0,bt=Vt.dataReady;let Me=N(q,De);wt(n.TEXTURE_CUBE_MAP,q);let Xt;if(He){Te&&fn&&e.texStorage2D(n.TEXTURE_CUBE_MAP,Me,Oe,De.width,De.height);for(let ne=0;ne<6;ne++){Xt=xe[ne].mipmaps;for(let _e=0;_e<Xt.length;_e++){const ve=Xt[_e];q.format!==Ta?Ae!==null?Te?bt&&e.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,_e,0,0,ve.width,ve.height,Ae,ve.data):e.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,_e,Oe,ve.width,ve.height,0,ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Te?bt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,_e,0,0,ve.width,ve.height,Ae,Yt,ve.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,_e,Oe,ve.width,ve.height,0,Ae,Yt,ve.data)}}}else{if(Xt=q.mipmaps,Te&&fn){Xt.length>0&&Me++;const ne=gt(xe[0]);e.texStorage2D(n.TEXTURE_CUBE_MAP,Me,Oe,ne.width,ne.height)}for(let ne=0;ne<6;ne++)if(Kt){Te?bt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,0,0,xe[ne].width,xe[ne].height,Ae,Yt,xe[ne].data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,Oe,xe[ne].width,xe[ne].height,0,Ae,Yt,xe[ne].data);for(let _e=0;_e<Xt.length;_e++){const je=Xt[_e].image[ne].image;Te?bt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,_e+1,0,0,je.width,je.height,Ae,Yt,je.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,_e+1,Oe,je.width,je.height,0,Ae,Yt,je.data)}}else{Te?bt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,0,0,Ae,Yt,xe[ne]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,Oe,Ae,Yt,xe[ne]);for(let _e=0;_e<Xt.length;_e++){const ve=Xt[_e];Te?bt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,_e+1,0,0,Ae,Yt,ve.image[ne]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,_e+1,Oe,Ae,Yt,ve.image[ne])}}}T(q)&&x(n.TEXTURE_CUBE_MAP),Lt.__version=Vt.version,q.onUpdate&&q.onUpdate(q)}W.__version=q.version}function ft(W,q,ht,xt,Vt,Lt){const le=s.convert(ht.format,ht.colorSpace),fe=s.convert(ht.type),Se=D(ht.internalFormat,le,fe,ht.colorSpace),He=i.get(q),Kt=i.get(ht);if(Kt.__renderTarget=q,!He.__hasExternalTextures){const xe=Math.max(1,q.width>>Lt),De=Math.max(1,q.height>>Lt);Vt===n.TEXTURE_3D||Vt===n.TEXTURE_2D_ARRAY?e.texImage3D(Vt,Lt,Se,xe,De,q.depth,0,le,fe,null):e.texImage2D(Vt,Lt,Se,xe,De,0,le,fe,null)}e.bindFramebuffer(n.FRAMEBUFFER,W),ce(q)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,xt,Vt,Kt.__webglTexture,0,$t(q)):(Vt===n.TEXTURE_2D||Vt>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Vt<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,xt,Vt,Kt.__webglTexture,Lt),e.bindFramebuffer(n.FRAMEBUFFER,null)}function mt(W,q,ht){if(n.bindRenderbuffer(n.RENDERBUFFER,W),q.depthBuffer){const xt=q.depthTexture,Vt=xt&&xt.isDepthTexture?xt.type:null,Lt=O(q.stencilBuffer,Vt),le=q.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,fe=$t(q);ce(q)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,fe,Lt,q.width,q.height):ht?n.renderbufferStorageMultisample(n.RENDERBUFFER,fe,Lt,q.width,q.height):n.renderbufferStorage(n.RENDERBUFFER,Lt,q.width,q.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,le,n.RENDERBUFFER,W)}else{const xt=q.textures;for(let Vt=0;Vt<xt.length;Vt++){const Lt=xt[Vt],le=s.convert(Lt.format,Lt.colorSpace),fe=s.convert(Lt.type),Se=D(Lt.internalFormat,le,fe,Lt.colorSpace),He=$t(q);ht&&ce(q)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,He,Se,q.width,q.height):ce(q)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,He,Se,q.width,q.height):n.renderbufferStorage(n.RENDERBUFFER,Se,q.width,q.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Dt(W,q){if(q&&q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(n.FRAMEBUFFER,W),!(q.depthTexture&&q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const xt=i.get(q.depthTexture);xt.__renderTarget=q,(!xt.__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),it(q.depthTexture,0);const Vt=xt.__webglTexture,Lt=$t(q);if(q.depthTexture.format===Sm)ce(q)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Vt,0,Lt):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Vt,0);else if(q.depthTexture.format===Nm)ce(q)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Vt,0,Lt):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Vt,0);else throw new Error("Unknown depthTexture format")}function Wt(W){const q=i.get(W),ht=W.isWebGLCubeRenderTarget===!0;if(q.__boundDepthTexture!==W.depthTexture){const xt=W.depthTexture;if(q.__depthDisposeCallback&&q.__depthDisposeCallback(),xt){const Vt=()=>{delete q.__boundDepthTexture,delete q.__depthDisposeCallback,xt.removeEventListener("dispose",Vt)};xt.addEventListener("dispose",Vt),q.__depthDisposeCallback=Vt}q.__boundDepthTexture=xt}if(W.depthTexture&&!q.__autoAllocateDepthBuffer){if(ht)throw new Error("target.depthTexture not supported in Cube render targets");Dt(q.__webglFramebuffer,W)}else if(ht){q.__webglDepthbuffer=[];for(let xt=0;xt<6;xt++)if(e.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer[xt]),q.__webglDepthbuffer[xt]===void 0)q.__webglDepthbuffer[xt]=n.createRenderbuffer(),mt(q.__webglDepthbuffer[xt],W,!1);else{const Vt=W.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Lt=q.__webglDepthbuffer[xt];n.bindRenderbuffer(n.RENDERBUFFER,Lt),n.framebufferRenderbuffer(n.FRAMEBUFFER,Vt,n.RENDERBUFFER,Lt)}}else if(e.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer),q.__webglDepthbuffer===void 0)q.__webglDepthbuffer=n.createRenderbuffer(),mt(q.__webglDepthbuffer,W,!1);else{const xt=W.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Vt=q.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Vt),n.framebufferRenderbuffer(n.FRAMEBUFFER,xt,n.RENDERBUFFER,Vt)}e.bindFramebuffer(n.FRAMEBUFFER,null)}function Nt(W,q,ht){const xt=i.get(W);q!==void 0&&ft(xt.__webglFramebuffer,W,W.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ht!==void 0&&Wt(W)}function Jt(W){const q=W.texture,ht=i.get(W),xt=i.get(q);W.addEventListener("dispose",L);const Vt=W.textures,Lt=W.isWebGLCubeRenderTarget===!0,le=Vt.length>1;if(le||(xt.__webglTexture===void 0&&(xt.__webglTexture=n.createTexture()),xt.__version=q.version,a.memory.textures++),Lt){ht.__webglFramebuffer=[];for(let fe=0;fe<6;fe++)if(q.mipmaps&&q.mipmaps.length>0){ht.__webglFramebuffer[fe]=[];for(let Se=0;Se<q.mipmaps.length;Se++)ht.__webglFramebuffer[fe][Se]=n.createFramebuffer()}else ht.__webglFramebuffer[fe]=n.createFramebuffer()}else{if(q.mipmaps&&q.mipmaps.length>0){ht.__webglFramebuffer=[];for(let fe=0;fe<q.mipmaps.length;fe++)ht.__webglFramebuffer[fe]=n.createFramebuffer()}else ht.__webglFramebuffer=n.createFramebuffer();if(le)for(let fe=0,Se=Vt.length;fe<Se;fe++){const He=i.get(Vt[fe]);He.__webglTexture===void 0&&(He.__webglTexture=n.createTexture(),a.memory.textures++)}if(W.samples>0&&ce(W)===!1){ht.__webglMultisampledFramebuffer=n.createFramebuffer(),ht.__webglColorRenderbuffer=[],e.bindFramebuffer(n.FRAMEBUFFER,ht.__webglMultisampledFramebuffer);for(let fe=0;fe<Vt.length;fe++){const Se=Vt[fe];ht.__webglColorRenderbuffer[fe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ht.__webglColorRenderbuffer[fe]);const He=s.convert(Se.format,Se.colorSpace),Kt=s.convert(Se.type),xe=D(Se.internalFormat,He,Kt,Se.colorSpace,W.isXRRenderTarget===!0),De=$t(W);n.renderbufferStorageMultisample(n.RENDERBUFFER,De,xe,W.width,W.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+fe,n.RENDERBUFFER,ht.__webglColorRenderbuffer[fe])}n.bindRenderbuffer(n.RENDERBUFFER,null),W.depthBuffer&&(ht.__webglDepthRenderbuffer=n.createRenderbuffer(),mt(ht.__webglDepthRenderbuffer,W,!0)),e.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Lt){e.bindTexture(n.TEXTURE_CUBE_MAP,xt.__webglTexture),wt(n.TEXTURE_CUBE_MAP,q);for(let fe=0;fe<6;fe++)if(q.mipmaps&&q.mipmaps.length>0)for(let Se=0;Se<q.mipmaps.length;Se++)ft(ht.__webglFramebuffer[fe][Se],W,q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+fe,Se);else ft(ht.__webglFramebuffer[fe],W,q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+fe,0);T(q)&&x(n.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(le){for(let fe=0,Se=Vt.length;fe<Se;fe++){const He=Vt[fe],Kt=i.get(He);e.bindTexture(n.TEXTURE_2D,Kt.__webglTexture),wt(n.TEXTURE_2D,He),ft(ht.__webglFramebuffer,W,He,n.COLOR_ATTACHMENT0+fe,n.TEXTURE_2D,0),T(He)&&x(n.TEXTURE_2D)}e.unbindTexture()}else{let fe=n.TEXTURE_2D;if((W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(fe=W.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(fe,xt.__webglTexture),wt(fe,q),q.mipmaps&&q.mipmaps.length>0)for(let Se=0;Se<q.mipmaps.length;Se++)ft(ht.__webglFramebuffer[Se],W,q,n.COLOR_ATTACHMENT0,fe,Se);else ft(ht.__webglFramebuffer,W,q,n.COLOR_ATTACHMENT0,fe,0);T(q)&&x(fe),e.unbindTexture()}W.depthBuffer&&Wt(W)}function Pt(W){const q=W.textures;for(let ht=0,xt=q.length;ht<xt;ht++){const Vt=q[ht];if(T(Vt)){const Lt=R(W),le=i.get(Vt).__webglTexture;e.bindTexture(Lt,le),x(Lt),e.unbindTexture()}}}const kt=[],tt=[];function se(W){if(W.samples>0){if(ce(W)===!1){const q=W.textures,ht=W.width,xt=W.height;let Vt=n.COLOR_BUFFER_BIT;const Lt=W.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,le=i.get(W),fe=q.length>1;if(fe)for(let Se=0;Se<q.length;Se++)e.bindFramebuffer(n.FRAMEBUFFER,le.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Se,n.RENDERBUFFER,null),e.bindFramebuffer(n.FRAMEBUFFER,le.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Se,n.TEXTURE_2D,null,0);e.bindFramebuffer(n.READ_FRAMEBUFFER,le.__webglMultisampledFramebuffer),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,le.__webglFramebuffer);for(let Se=0;Se<q.length;Se++){if(W.resolveDepthBuffer&&(W.depthBuffer&&(Vt|=n.DEPTH_BUFFER_BIT),W.stencilBuffer&&W.resolveStencilBuffer&&(Vt|=n.STENCIL_BUFFER_BIT)),fe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,le.__webglColorRenderbuffer[Se]);const He=i.get(q[Se]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,He,0)}n.blitFramebuffer(0,0,ht,xt,0,0,ht,xt,Vt,n.NEAREST),c===!0&&(kt.length=0,tt.length=0,kt.push(n.COLOR_ATTACHMENT0+Se),W.depthBuffer&&W.resolveDepthBuffer===!1&&(kt.push(Lt),tt.push(Lt),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,tt)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,kt))}if(e.bindFramebuffer(n.READ_FRAMEBUFFER,null),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),fe)for(let Se=0;Se<q.length;Se++){e.bindFramebuffer(n.FRAMEBUFFER,le.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Se,n.RENDERBUFFER,le.__webglColorRenderbuffer[Se]);const He=i.get(q[Se]).__webglTexture;e.bindFramebuffer(n.FRAMEBUFFER,le.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Se,n.TEXTURE_2D,He,0)}e.bindFramebuffer(n.DRAW_FRAMEBUFFER,le.__webglMultisampledFramebuffer)}else if(W.depthBuffer&&W.resolveDepthBuffer===!1&&c){const q=W.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[q])}}}function $t(W){return Math.min(r.maxSamples,W.samples)}function ce(W){const q=i.get(W);return W.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&q.__useRenderToTexture!==!1}function rt(W){const q=a.render.frame;m.get(W)!==q&&(m.set(W,q),W.update())}function _t(W,q){const ht=W.colorSpace,xt=W.format,Vt=W.type;return W.isCompressedTexture===!0||W.isVideoTexture===!0||ht!==Bd&&ht!==nh&&(Xn.getTransfer(ht)===Ai?(xt!==Ta||Vt!==Bu)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ht)),q}function gt(W){return typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement?(f.width=W.naturalWidth||W.width,f.height=W.naturalHeight||W.height):typeof VideoFrame<"u"&&W instanceof VideoFrame?(f.width=W.displayWidth,f.height=W.displayHeight):(f.width=W.width,f.height=W.height),f}this.allocateTextureUnit=k,this.resetTextureUnits=G,this.setTexture2D=it,this.setTexture2DArray=Y,this.setTexture3D=Z,this.setTextureCube=at,this.rebindTextures=Nt,this.setupRenderTarget=Jt,this.updateRenderTargetMipmap=Pt,this.updateMultisampleRenderTarget=se,this.setupDepthRenderbuffer=Wt,this.setupFrameBufferTexture=ft,this.useMultisampledRTT=ce}function P4(n,t){function e(i,r=nh){let s;const a=Xn.getTransfer(r);if(i===Bu)return n.UNSIGNED_BYTE;if(i===VT)return n.UNSIGNED_SHORT_4_4_4_4;if(i===FT)return n.UNSIGNED_SHORT_5_5_5_1;if(i===P2)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===N2)return n.BYTE;if(i===I2)return n.SHORT;if(i===Fy)return n.UNSIGNED_SHORT;if(i===BT)return n.INT;if(i===hh)return n.UNSIGNED_INT;if(i===Do)return n.FLOAT;if(i===d_)return n.HALF_FLOAT;if(i===L2)return n.ALPHA;if(i===U2)return n.RGB;if(i===Ta)return n.RGBA;if(i===z2)return n.LUMINANCE;if(i===B2)return n.LUMINANCE_ALPHA;if(i===Sm)return n.DEPTH_COMPONENT;if(i===Nm)return n.DEPTH_STENCIL;if(i===kT)return n.RED;if(i===Ix)return n.RED_INTEGER;if(i===V2)return n.RG;if(i===HT)return n.RG_INTEGER;if(i===GT)return n.RGBA_INTEGER;if(i===S0||i===E0||i===T0||i===M0)if(a===Ai)if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===S0)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===E0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===T0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===M0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=t.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===S0)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===E0)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===T0)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===M0)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===d1||i===p1||i===m1||i===g1)if(s=t.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===d1)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===p1)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===m1)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===g1)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===y1||i===_1||i===v1)if(s=t.get("WEBGL_compressed_texture_etc"),s!==null){if(i===y1||i===_1)return a===Ai?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===v1)return a===Ai?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===x1||i===b1||i===S1||i===E1||i===T1||i===M1||i===A1||i===w1||i===C1||i===R1||i===O1||i===D1||i===N1||i===I1)if(s=t.get("WEBGL_compressed_texture_astc"),s!==null){if(i===x1)return a===Ai?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===b1)return a===Ai?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===S1)return a===Ai?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===E1)return a===Ai?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===T1)return a===Ai?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===M1)return a===Ai?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===A1)return a===Ai?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===w1)return a===Ai?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===C1)return a===Ai?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===R1)return a===Ai?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===O1)return a===Ai?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===D1)return a===Ai?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===N1)return a===Ai?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===I1)return a===Ai?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===A0||i===P1||i===L1)if(s=t.get("EXT_texture_compression_bptc"),s!==null){if(i===A0)return a===Ai?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===P1)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===L1)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===F2||i===U1||i===z1||i===B1)if(s=t.get("EXT_texture_compression_rgtc"),s!==null){if(i===A0)return s.COMPRESSED_RED_RGTC1_EXT;if(i===U1)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===z1)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===B1)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Dm?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:e}}const CW=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,RW=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class OW{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,i){if(this.texture===null){const r=new Fr,s=t.properties.get(r);s.__webglTexture=e.texture,(e.depthNear!==i.depthNear||e.depthFar!==i.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(t){if(this.texture!==null&&this.mesh===null){const e=t.cameras[0].viewport,i=new ql({vertexShader:CW,fragmentShader:RW,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new $r(new m_(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class DW extends sf{constructor(t,e){super();const i=this;let r=null,s=1,a=null,l="local-floor",c=1,f=null,m=null,g=null,y=null,v=null,S=null;const E=new OW,T=e.getContextAttributes();let x=null,R=null;const D=[],O=[],N=new oe;let B=null;const L=new Ns;L.viewport=new ti;const U=new Ns;U.viewport=new ti;const I=[L,U],w=new S4;let V=null,G=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(nt){let lt=D[nt];return lt===void 0&&(lt=new BE,D[nt]=lt),lt.getTargetRaySpace()},this.getControllerGrip=function(nt){let lt=D[nt];return lt===void 0&&(lt=new BE,D[nt]=lt),lt.getGripSpace()},this.getHand=function(nt){let lt=D[nt];return lt===void 0&&(lt=new BE,D[nt]=lt),lt.getHandSpace()};function k(nt){const lt=O.indexOf(nt.inputSource);if(lt===-1)return;const ft=D[lt];ft!==void 0&&(ft.update(nt.inputSource,nt.frame,f||a),ft.dispatchEvent({type:nt.type,data:nt.inputSource}))}function st(){r.removeEventListener("select",k),r.removeEventListener("selectstart",k),r.removeEventListener("selectend",k),r.removeEventListener("squeeze",k),r.removeEventListener("squeezestart",k),r.removeEventListener("squeezeend",k),r.removeEventListener("end",st),r.removeEventListener("inputsourceschange",it);for(let nt=0;nt<D.length;nt++){const lt=O[nt];lt!==null&&(O[nt]=null,D[nt].disconnect(lt))}V=null,G=null,E.reset(),t.setRenderTarget(x),v=null,y=null,g=null,r=null,R=null,zt.stop(),i.isPresenting=!1,t.setPixelRatio(B),t.setSize(N.width,N.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(nt){s=nt,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(nt){l=nt,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||a},this.setReferenceSpace=function(nt){f=nt},this.getBaseLayer=function(){return y!==null?y:v},this.getBinding=function(){return g},this.getFrame=function(){return S},this.getSession=function(){return r},this.setSession=async function(nt){if(r=nt,r!==null){if(x=t.getRenderTarget(),r.addEventListener("select",k),r.addEventListener("selectstart",k),r.addEventListener("selectend",k),r.addEventListener("squeeze",k),r.addEventListener("squeezestart",k),r.addEventListener("squeezeend",k),r.addEventListener("end",st),r.addEventListener("inputsourceschange",it),T.xrCompatible!==!0&&await e.makeXRCompatible(),B=t.getPixelRatio(),t.getSize(N),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let ft=null,mt=null,Dt=null;T.depth&&(Dt=T.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,ft=T.stencil?Nm:Sm,mt=T.stencil?Dm:hh);const Wt={colorFormat:e.RGBA8,depthFormat:Dt,scaleFactor:s};g=new XRWebGLBinding(r,e),y=g.createProjectionLayer(Wt),r.updateRenderState({layers:[y]}),t.setPixelRatio(1),t.setSize(y.textureWidth,y.textureHeight,!1),R=new tf(y.textureWidth,y.textureHeight,{format:Ta,type:Bu,depthTexture:new K2(y.textureWidth,y.textureHeight,mt,void 0,void 0,void 0,void 0,void 0,void 0,ft),stencilBuffer:T.stencil,colorSpace:t.outputColorSpace,samples:T.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}else{const ft={antialias:T.antialias,alpha:!0,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:s};v=new XRWebGLLayer(r,e,ft),r.updateRenderState({baseLayer:v}),t.setPixelRatio(1),t.setSize(v.framebufferWidth,v.framebufferHeight,!1),R=new tf(v.framebufferWidth,v.framebufferHeight,{format:Ta,type:Bu,colorSpace:t.outputColorSpace,stencilBuffer:T.stencil,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}R.isXRRenderTarget=!0,this.setFoveation(c),f=null,a=await r.requestReferenceSpace(l),zt.setContext(r),zt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return E.getDepthTexture()};function it(nt){for(let lt=0;lt<nt.removed.length;lt++){const ft=nt.removed[lt],mt=O.indexOf(ft);mt>=0&&(O[mt]=null,D[mt].disconnect(ft))}for(let lt=0;lt<nt.added.length;lt++){const ft=nt.added[lt];let mt=O.indexOf(ft);if(mt===-1){for(let Wt=0;Wt<D.length;Wt++)if(Wt>=O.length){O.push(ft),mt=Wt;break}else if(O[Wt]===null){O[Wt]=ft,mt=Wt;break}if(mt===-1)break}const Dt=D[mt];Dt&&Dt.connect(ft)}}const Y=new ut,Z=new ut;function at(nt,lt,ft){Y.setFromMatrixPosition(lt.matrixWorld),Z.setFromMatrixPosition(ft.matrixWorld);const mt=Y.distanceTo(Z),Dt=lt.projectionMatrix.elements,Wt=ft.projectionMatrix.elements,Nt=Dt[14]/(Dt[10]-1),Jt=Dt[14]/(Dt[10]+1),Pt=(Dt[9]+1)/Dt[5],kt=(Dt[9]-1)/Dt[5],tt=(Dt[8]-1)/Dt[0],se=(Wt[8]+1)/Wt[0],$t=Nt*tt,ce=Nt*se,rt=mt/(-tt+se),_t=rt*-tt;if(lt.matrixWorld.decompose(nt.position,nt.quaternion,nt.scale),nt.translateX(_t),nt.translateZ(rt),nt.matrixWorld.compose(nt.position,nt.quaternion,nt.scale),nt.matrixWorldInverse.copy(nt.matrixWorld).invert(),Dt[10]===-1)nt.projectionMatrix.copy(lt.projectionMatrix),nt.projectionMatrixInverse.copy(lt.projectionMatrixInverse);else{const gt=Nt+rt,W=Jt+rt,q=$t-_t,ht=ce+(mt-_t),xt=Pt*Jt/W*gt,Vt=kt*Jt/W*gt;nt.projectionMatrix.makePerspective(q,ht,xt,Vt,gt,W),nt.projectionMatrixInverse.copy(nt.projectionMatrix).invert()}}function ct(nt,lt){lt===null?nt.matrixWorld.copy(nt.matrix):nt.matrixWorld.multiplyMatrices(lt.matrixWorld,nt.matrix),nt.matrixWorldInverse.copy(nt.matrixWorld).invert()}this.updateCamera=function(nt){if(r===null)return;let lt=nt.near,ft=nt.far;E.texture!==null&&(E.depthNear>0&&(lt=E.depthNear),E.depthFar>0&&(ft=E.depthFar)),w.near=U.near=L.near=lt,w.far=U.far=L.far=ft,(V!==w.near||G!==w.far)&&(r.updateRenderState({depthNear:w.near,depthFar:w.far}),V=w.near,G=w.far),L.layers.mask=nt.layers.mask|2,U.layers.mask=nt.layers.mask|4,w.layers.mask=L.layers.mask|U.layers.mask;const mt=nt.parent,Dt=w.cameras;ct(w,mt);for(let Wt=0;Wt<Dt.length;Wt++)ct(Dt[Wt],mt);Dt.length===2?at(w,L,U):w.projectionMatrix.copy(L.projectionMatrix),$(nt,w,mt)};function $(nt,lt,ft){ft===null?nt.matrix.copy(lt.matrixWorld):(nt.matrix.copy(ft.matrixWorld),nt.matrix.invert(),nt.matrix.multiply(lt.matrixWorld)),nt.matrix.decompose(nt.position,nt.quaternion,nt.scale),nt.updateMatrixWorld(!0),nt.projectionMatrix.copy(lt.projectionMatrix),nt.projectionMatrixInverse.copy(lt.projectionMatrixInverse),nt.isPerspectiveCamera&&(nt.fov=ky*2*Math.atan(1/nt.projectionMatrix.elements[5]),nt.zoom=1)}this.getCamera=function(){return w},this.getFoveation=function(){if(!(y===null&&v===null))return c},this.setFoveation=function(nt){c=nt,y!==null&&(y.fixedFoveation=nt),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=nt)},this.hasDepthSensing=function(){return E.texture!==null},this.getDepthSensingMesh=function(){return E.getMesh(w)};let pt=null;function wt(nt,lt){if(m=lt.getViewerPose(f||a),S=lt,m!==null){const ft=m.views;v!==null&&(t.setRenderTargetFramebuffer(R,v.framebuffer),t.setRenderTarget(R));let mt=!1;ft.length!==w.cameras.length&&(w.cameras.length=0,mt=!0);for(let Nt=0;Nt<ft.length;Nt++){const Jt=ft[Nt];let Pt=null;if(v!==null)Pt=v.getViewport(Jt);else{const tt=g.getViewSubImage(y,Jt);Pt=tt.viewport,Nt===0&&(t.setRenderTargetTextures(R,tt.colorTexture,y.ignoreDepthValues?void 0:tt.depthStencilTexture),t.setRenderTarget(R))}let kt=I[Nt];kt===void 0&&(kt=new Ns,kt.layers.enable(Nt),kt.viewport=new ti,I[Nt]=kt),kt.matrix.fromArray(Jt.transform.matrix),kt.matrix.decompose(kt.position,kt.quaternion,kt.scale),kt.projectionMatrix.fromArray(Jt.projectionMatrix),kt.projectionMatrixInverse.copy(kt.projectionMatrix).invert(),kt.viewport.set(Pt.x,Pt.y,Pt.width,Pt.height),Nt===0&&(w.matrix.copy(kt.matrix),w.matrix.decompose(w.position,w.quaternion,w.scale)),mt===!0&&w.cameras.push(kt)}const Dt=r.enabledFeatures;if(Dt&&Dt.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&g){const Nt=g.getDepthInformation(ft[0]);Nt&&Nt.isValid&&Nt.texture&&E.init(t,Nt,r.renderState)}}for(let ft=0;ft<D.length;ft++){const mt=O[ft],Dt=D[ft];mt!==null&&Dt!==void 0&&Dt.update(mt,lt,f||a)}pt&&pt(nt,lt),lt.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:lt}),S=null}const zt=new R4;zt.setAnimationLoop(wt),this.setAnimationLoop=function(nt){pt=nt},this.dispose=function(){}}}const Zp=new dl,NW=new nn;function IW(n,t){function e(T,x){T.matrixAutoUpdate===!0&&T.updateMatrix(),x.value.copy(T.matrix)}function i(T,x){x.color.getRGB(T.fogColor.value,OB(n)),x.isFog?(T.fogNear.value=x.near,T.fogFar.value=x.far):x.isFogExp2&&(T.fogDensity.value=x.density)}function r(T,x,R,D,O){x.isMeshBasicMaterial||x.isMeshLambertMaterial?s(T,x):x.isMeshToonMaterial?(s(T,x),g(T,x)):x.isMeshPhongMaterial?(s(T,x),m(T,x)):x.isMeshStandardMaterial?(s(T,x),y(T,x),x.isMeshPhysicalMaterial&&v(T,x,O)):x.isMeshMatcapMaterial?(s(T,x),S(T,x)):x.isMeshDepthMaterial?s(T,x):x.isMeshDistanceMaterial?(s(T,x),E(T,x)):x.isMeshNormalMaterial?s(T,x):x.isLineBasicMaterial?(a(T,x),x.isLineDashedMaterial&&l(T,x)):x.isPointsMaterial?c(T,x,R,D):x.isSpriteMaterial?f(T,x):x.isShadowMaterial?(T.color.value.copy(x.color),T.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function s(T,x){T.opacity.value=x.opacity,x.color&&T.diffuse.value.copy(x.color),x.emissive&&T.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(T.map.value=x.map,e(x.map,T.mapTransform)),x.alphaMap&&(T.alphaMap.value=x.alphaMap,e(x.alphaMap,T.alphaMapTransform)),x.bumpMap&&(T.bumpMap.value=x.bumpMap,e(x.bumpMap,T.bumpMapTransform),T.bumpScale.value=x.bumpScale,x.side===Ka&&(T.bumpScale.value*=-1)),x.normalMap&&(T.normalMap.value=x.normalMap,e(x.normalMap,T.normalMapTransform),T.normalScale.value.copy(x.normalScale),x.side===Ka&&T.normalScale.value.negate()),x.displacementMap&&(T.displacementMap.value=x.displacementMap,e(x.displacementMap,T.displacementMapTransform),T.displacementScale.value=x.displacementScale,T.displacementBias.value=x.displacementBias),x.emissiveMap&&(T.emissiveMap.value=x.emissiveMap,e(x.emissiveMap,T.emissiveMapTransform)),x.specularMap&&(T.specularMap.value=x.specularMap,e(x.specularMap,T.specularMapTransform)),x.alphaTest>0&&(T.alphaTest.value=x.alphaTest);const R=t.get(x),D=R.envMap,O=R.envMapRotation;D&&(T.envMap.value=D,Zp.copy(O),Zp.x*=-1,Zp.y*=-1,Zp.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(Zp.y*=-1,Zp.z*=-1),T.envMapRotation.value.setFromMatrix4(NW.makeRotationFromEuler(Zp)),T.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,T.reflectivity.value=x.reflectivity,T.ior.value=x.ior,T.refractionRatio.value=x.refractionRatio),x.lightMap&&(T.lightMap.value=x.lightMap,T.lightMapIntensity.value=x.lightMapIntensity,e(x.lightMap,T.lightMapTransform)),x.aoMap&&(T.aoMap.value=x.aoMap,T.aoMapIntensity.value=x.aoMapIntensity,e(x.aoMap,T.aoMapTransform))}function a(T,x){T.diffuse.value.copy(x.color),T.opacity.value=x.opacity,x.map&&(T.map.value=x.map,e(x.map,T.mapTransform))}function l(T,x){T.dashSize.value=x.dashSize,T.totalSize.value=x.dashSize+x.gapSize,T.scale.value=x.scale}function c(T,x,R,D){T.diffuse.value.copy(x.color),T.opacity.value=x.opacity,T.size.value=x.size*R,T.scale.value=D*.5,x.map&&(T.map.value=x.map,e(x.map,T.uvTransform)),x.alphaMap&&(T.alphaMap.value=x.alphaMap,e(x.alphaMap,T.alphaMapTransform)),x.alphaTest>0&&(T.alphaTest.value=x.alphaTest)}function f(T,x){T.diffuse.value.copy(x.color),T.opacity.value=x.opacity,T.rotation.value=x.rotation,x.map&&(T.map.value=x.map,e(x.map,T.mapTransform)),x.alphaMap&&(T.alphaMap.value=x.alphaMap,e(x.alphaMap,T.alphaMapTransform)),x.alphaTest>0&&(T.alphaTest.value=x.alphaTest)}function m(T,x){T.specular.value.copy(x.specular),T.shininess.value=Math.max(x.shininess,1e-4)}function g(T,x){x.gradientMap&&(T.gradientMap.value=x.gradientMap)}function y(T,x){T.metalness.value=x.metalness,x.metalnessMap&&(T.metalnessMap.value=x.metalnessMap,e(x.metalnessMap,T.metalnessMapTransform)),T.roughness.value=x.roughness,x.roughnessMap&&(T.roughnessMap.value=x.roughnessMap,e(x.roughnessMap,T.roughnessMapTransform)),x.envMap&&(T.envMapIntensity.value=x.envMapIntensity)}function v(T,x,R){T.ior.value=x.ior,x.sheen>0&&(T.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),T.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(T.sheenColorMap.value=x.sheenColorMap,e(x.sheenColorMap,T.sheenColorMapTransform)),x.sheenRoughnessMap&&(T.sheenRoughnessMap.value=x.sheenRoughnessMap,e(x.sheenRoughnessMap,T.sheenRoughnessMapTransform))),x.clearcoat>0&&(T.clearcoat.value=x.clearcoat,T.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(T.clearcoatMap.value=x.clearcoatMap,e(x.clearcoatMap,T.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,e(x.clearcoatRoughnessMap,T.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(T.clearcoatNormalMap.value=x.clearcoatNormalMap,e(x.clearcoatNormalMap,T.clearcoatNormalMapTransform),T.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===Ka&&T.clearcoatNormalScale.value.negate())),x.dispersion>0&&(T.dispersion.value=x.dispersion),x.iridescence>0&&(T.iridescence.value=x.iridescence,T.iridescenceIOR.value=x.iridescenceIOR,T.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(T.iridescenceMap.value=x.iridescenceMap,e(x.iridescenceMap,T.iridescenceMapTransform)),x.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=x.iridescenceThicknessMap,e(x.iridescenceThicknessMap,T.iridescenceThicknessMapTransform))),x.transmission>0&&(T.transmission.value=x.transmission,T.transmissionSamplerMap.value=R.texture,T.transmissionSamplerSize.value.set(R.width,R.height),x.transmissionMap&&(T.transmissionMap.value=x.transmissionMap,e(x.transmissionMap,T.transmissionMapTransform)),T.thickness.value=x.thickness,x.thicknessMap&&(T.thicknessMap.value=x.thicknessMap,e(x.thicknessMap,T.thicknessMapTransform)),T.attenuationDistance.value=x.attenuationDistance,T.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(T.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(T.anisotropyMap.value=x.anisotropyMap,e(x.anisotropyMap,T.anisotropyMapTransform))),T.specularIntensity.value=x.specularIntensity,T.specularColor.value.copy(x.specularColor),x.specularColorMap&&(T.specularColorMap.value=x.specularColorMap,e(x.specularColorMap,T.specularColorMapTransform)),x.specularIntensityMap&&(T.specularIntensityMap.value=x.specularIntensityMap,e(x.specularIntensityMap,T.specularIntensityMapTransform))}function S(T,x){x.matcap&&(T.matcap.value=x.matcap)}function E(T,x){const R=t.get(x).light;T.referencePosition.value.setFromMatrixPosition(R.matrixWorld),T.nearDistance.value=R.shadow.camera.near,T.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function PW(n,t,e,i){let r={},s={},a=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(R,D){const O=D.program;i.uniformBlockBinding(R,O)}function f(R,D){let O=r[R.id];O===void 0&&(S(R),O=m(R),r[R.id]=O,R.addEventListener("dispose",T));const N=D.program;i.updateUBOMapping(R,N);const B=t.render.frame;s[R.id]!==B&&(y(R),s[R.id]=B)}function m(R){const D=g();R.__bindingPointIndex=D;const O=n.createBuffer(),N=R.__size,B=R.usage;return n.bindBuffer(n.UNIFORM_BUFFER,O),n.bufferData(n.UNIFORM_BUFFER,N,B),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,D,O),O}function g(){for(let R=0;R<l;R++)if(a.indexOf(R)===-1)return a.push(R),R;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(R){const D=r[R.id],O=R.uniforms,N=R.__cache;n.bindBuffer(n.UNIFORM_BUFFER,D);for(let B=0,L=O.length;B<L;B++){const U=Array.isArray(O[B])?O[B]:[O[B]];for(let I=0,w=U.length;I<w;I++){const V=U[I];if(v(V,B,I,N)===!0){const G=V.__offset,k=Array.isArray(V.value)?V.value:[V.value];let st=0;for(let it=0;it<k.length;it++){const Y=k[it],Z=E(Y);typeof Y=="number"||typeof Y=="boolean"?(V.__data[0]=Y,n.bufferSubData(n.UNIFORM_BUFFER,G+st,V.__data)):Y.isMatrix3?(V.__data[0]=Y.elements[0],V.__data[1]=Y.elements[1],V.__data[2]=Y.elements[2],V.__data[3]=0,V.__data[4]=Y.elements[3],V.__data[5]=Y.elements[4],V.__data[6]=Y.elements[5],V.__data[7]=0,V.__data[8]=Y.elements[6],V.__data[9]=Y.elements[7],V.__data[10]=Y.elements[8],V.__data[11]=0):(Y.toArray(V.__data,st),st+=Z.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,G,V.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function v(R,D,O,N){const B=R.value,L=D+"_"+O;if(N[L]===void 0)return typeof B=="number"||typeof B=="boolean"?N[L]=B:N[L]=B.clone(),!0;{const U=N[L];if(typeof B=="number"||typeof B=="boolean"){if(U!==B)return N[L]=B,!0}else if(U.equals(B)===!1)return U.copy(B),!0}return!1}function S(R){const D=R.uniforms;let O=0;const N=16;for(let L=0,U=D.length;L<U;L++){const I=Array.isArray(D[L])?D[L]:[D[L]];for(let w=0,V=I.length;w<V;w++){const G=I[w],k=Array.isArray(G.value)?G.value:[G.value];for(let st=0,it=k.length;st<it;st++){const Y=k[st],Z=E(Y),at=O%N,ct=at%Z.boundary,$=at+ct;O+=ct,$!==0&&N-$<Z.storage&&(O+=N-$),G.__data=new Float32Array(Z.storage/Float32Array.BYTES_PER_ELEMENT),G.__offset=O,O+=Z.storage}}}const B=O%N;return B>0&&(O+=N-B),R.__size=O,R.__cache={},this}function E(R){const D={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(D.boundary=4,D.storage=4):R.isVector2?(D.boundary=8,D.storage=8):R.isVector3||R.isColor?(D.boundary=16,D.storage=12):R.isVector4?(D.boundary=16,D.storage=16):R.isMatrix3?(D.boundary=48,D.storage=48):R.isMatrix4?(D.boundary=64,D.storage=64):R.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",R),D}function T(R){const D=R.target;D.removeEventListener("dispose",T);const O=a.indexOf(D.__bindingPointIndex);a.splice(O,1),n.deleteBuffer(r[D.id]),delete r[D.id],delete s[D.id]}function x(){for(const R in r)n.deleteBuffer(r[R]);a=[],r={},s={}}return{bind:c,update:f,dispose:x}}class L4{constructor(t={}){const{canvas:e=wB(),context:i=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:f=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:y=!1}=t;this.isWebGLRenderer=!0;let v;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");v=i.getContextAttributes().alpha}else v=a;const S=new Uint32Array(4),E=new Int32Array(4);let T=null,x=null;const R=[],D=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ba,this.toneMapping=Xc,this.toneMappingExposure=1;const O=this;let N=!1,B=0,L=0,U=null,I=-1,w=null;const V=new ti,G=new ti;let k=null;const st=new Ne(0);let it=0,Y=e.width,Z=e.height,at=1,ct=null,$=null;const pt=new ti(0,0,Y,Z),wt=new ti(0,0,Y,Z);let zt=!1;const nt=new Ux;let lt=!1,ft=!1;this.transmissionResolutionScale=1;const mt=new nn,Dt=new nn,Wt=new ut,Nt=new ti,Jt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Pt=!1;function kt(){return U===null?at:1}let tt=i;function se(K,vt){return e.getContext(K,vt)}try{const K={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:f,powerPreference:m,failIfMajorPerformanceCaveat:g};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Dx}`),e.addEventListener("webglcontextlost",ne,!1),e.addEventListener("webglcontextrestored",_e,!1),e.addEventListener("webglcontextcreationerror",ve,!1),tt===null){const vt="webgl2";if(tt=se(vt,K),tt===null)throw se(vt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(K){throw console.error("THREE.WebGLRenderer: "+K.message),K}let $t,ce,rt,_t,gt,W,q,ht,xt,Vt,Lt,le,fe,Se,He,Kt,xe,De,Ae,Yt,Oe,Te,fn,bt;function Me(){$t=new Xj(tt),$t.init(),Te=new P4(tt,$t),ce=new Vj(tt,$t,t,Te),rt=new AW(tt,$t),ce.reverseDepthBuffer&&y&&rt.buffers.depth.setReversed(!0),_t=new $j(tt),gt=new dW,W=new wW(tt,$t,rt,gt,ce,Te,_t),q=new kj(O),ht=new jj(O),xt=new e7(tt),fn=new zj(tt,xt),Vt=new Wj(tt,xt,_t,fn),Lt=new Zj(tt,Vt,xt,_t),Ae=new Kj(tt,ce,W),Kt=new Fj(gt),le=new hW(O,q,ht,$t,ce,fn,Kt),fe=new IW(O,gt),Se=new mW,He=new bW($t),De=new Uj(O,q,ht,rt,Lt,v,c),xe=new TW(O,Lt,ce),bt=new PW(tt,_t,ce,rt),Yt=new Bj(tt,$t,_t),Oe=new Yj(tt,$t,_t),_t.programs=le.programs,O.capabilities=ce,O.extensions=$t,O.properties=gt,O.renderLists=Se,O.shadowMap=xe,O.state=rt,O.info=_t}Me();const Xt=new DW(O,tt);this.xr=Xt,this.getContext=function(){return tt},this.getContextAttributes=function(){return tt.getContextAttributes()},this.forceContextLoss=function(){const K=$t.get("WEBGL_lose_context");K&&K.loseContext()},this.forceContextRestore=function(){const K=$t.get("WEBGL_lose_context");K&&K.restoreContext()},this.getPixelRatio=function(){return at},this.setPixelRatio=function(K){K!==void 0&&(at=K,this.setSize(Y,Z,!1))},this.getSize=function(K){return K.set(Y,Z)},this.setSize=function(K,vt,Ut=!0){if(Xt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Y=K,Z=vt,e.width=Math.floor(K*at),e.height=Math.floor(vt*at),Ut===!0&&(e.style.width=K+"px",e.style.height=vt+"px"),this.setViewport(0,0,K,vt)},this.getDrawingBufferSize=function(K){return K.set(Y*at,Z*at).floor()},this.setDrawingBufferSize=function(K,vt,Ut){Y=K,Z=vt,at=Ut,e.width=Math.floor(K*Ut),e.height=Math.floor(vt*Ut),this.setViewport(0,0,K,vt)},this.getCurrentViewport=function(K){return K.copy(V)},this.getViewport=function(K){return K.copy(pt)},this.setViewport=function(K,vt,Ut,It){K.isVector4?pt.set(K.x,K.y,K.z,K.w):pt.set(K,vt,Ut,It),rt.viewport(V.copy(pt).multiplyScalar(at).round())},this.getScissor=function(K){return K.copy(wt)},this.setScissor=function(K,vt,Ut,It){K.isVector4?wt.set(K.x,K.y,K.z,K.w):wt.set(K,vt,Ut,It),rt.scissor(G.copy(wt).multiplyScalar(at).round())},this.getScissorTest=function(){return zt},this.setScissorTest=function(K){rt.setScissorTest(zt=K)},this.setOpaqueSort=function(K){ct=K},this.setTransparentSort=function(K){$=K},this.getClearColor=function(K){return K.copy(De.getClearColor())},this.setClearColor=function(){De.setClearColor(...arguments)},this.getClearAlpha=function(){return De.getClearAlpha()},this.setClearAlpha=function(){De.setClearAlpha(...arguments)},this.clear=function(K=!0,vt=!0,Ut=!0){let It=0;if(K){let At=!1;if(U!==null){const ae=U.texture.format;At=ae===GT||ae===HT||ae===Ix}if(At){const ae=U.texture.type,ge=ae===Bu||ae===hh||ae===Fy||ae===Dm||ae===VT||ae===FT,be=De.getClearColor(),Ee=De.getClearAlpha(),Ye=be.r,Xe=be.g,Ue=be.b;ge?(S[0]=Ye,S[1]=Xe,S[2]=Ue,S[3]=Ee,tt.clearBufferuiv(tt.COLOR,0,S)):(E[0]=Ye,E[1]=Xe,E[2]=Ue,E[3]=Ee,tt.clearBufferiv(tt.COLOR,0,E))}else It|=tt.COLOR_BUFFER_BIT}vt&&(It|=tt.DEPTH_BUFFER_BIT),Ut&&(It|=tt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),tt.clear(It)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ne,!1),e.removeEventListener("webglcontextrestored",_e,!1),e.removeEventListener("webglcontextcreationerror",ve,!1),De.dispose(),Se.dispose(),He.dispose(),gt.dispose(),q.dispose(),ht.dispose(),Lt.dispose(),fn.dispose(),bt.dispose(),le.dispose(),Xt.dispose(),Xt.removeEventListener("sessionstart",Hu),Xt.removeEventListener("sessionend",Da),Qr.stop()};function ne(K){K.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),N=!0}function _e(){console.log("THREE.WebGLRenderer: Context Restored."),N=!1;const K=_t.autoReset,vt=xe.enabled,Ut=xe.autoUpdate,It=xe.needsUpdate,At=xe.type;Me(),_t.autoReset=K,xe.enabled=vt,xe.autoUpdate=Ut,xe.needsUpdate=It,xe.type=At}function ve(K){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",K.statusMessage)}function je(K){const vt=K.target;vt.removeEventListener("dispose",je),Yn(vt)}function Yn(K){Ci(K),gt.remove(K)}function Ci(K){const vt=gt.get(K).programs;vt!==void 0&&(vt.forEach(function(Ut){le.releaseProgram(Ut)}),K.isShaderMaterial&&le.releaseShaderCache(K))}this.renderBufferDirect=function(K,vt,Ut,It,At,ae){vt===null&&(vt=Jt);const ge=At.isMesh&&At.matrixWorld.determinant()<0,be=Xl(K,vt,Ut,It,At);rt.setMaterial(It,ge);let Ee=Ut.index,Ye=1;if(It.wireframe===!0){if(Ee=Vt.getWireframeAttribute(Ut),Ee===void 0)return;Ye=2}const Xe=Ut.drawRange,Ue=Ut.attributes.position;let Sn=Xe.start*Ye,vn=(Xe.start+Xe.count)*Ye;ae!==null&&(Sn=Math.max(Sn,ae.start*Ye),vn=Math.min(vn,(ae.start+ae.count)*Ye)),Ee!==null?(Sn=Math.max(Sn,0),vn=Math.min(vn,Ee.count)):Ue!=null&&(Sn=Math.max(Sn,0),vn=Math.min(vn,Ue.count));const si=vn-Sn;if(si<0||si===1/0)return;fn.setup(At,It,be,Ut,Ee);let Nn,Ke=Yt;if(Ee!==null&&(Nn=xt.get(Ee),Ke=Oe,Ke.setIndex(Nn)),At.isMesh)It.wireframe===!0?(rt.setLineWidth(It.wireframeLinewidth*kt()),Ke.setMode(tt.LINES)):Ke.setMode(tt.TRIANGLES);else if(At.isLine){let Fe=It.linewidth;Fe===void 0&&(Fe=1),rt.setLineWidth(Fe*kt()),At.isLineSegments?Ke.setMode(tt.LINES):At.isLineLoop?Ke.setMode(tt.LINE_LOOP):Ke.setMode(tt.LINE_STRIP)}else At.isPoints?Ke.setMode(tt.POINTS):At.isSprite&&Ke.setMode(tt.TRIANGLES);if(At.isBatchedMesh)if(At._multiDrawInstances!==null)om("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Ke.renderMultiDrawInstances(At._multiDrawStarts,At._multiDrawCounts,At._multiDrawCount,At._multiDrawInstances);else if($t.get("WEBGL_multi_draw"))Ke.renderMultiDraw(At._multiDrawStarts,At._multiDrawCounts,At._multiDrawCount);else{const Fe=At._multiDrawStarts,er=At._multiDrawCounts,En=At._multiDrawCount,ts=Ee?xt.get(Ee).bytesPerElement:1,zs=gt.get(It).currentProgram.getUniforms();for(let qi=0;qi<En;qi++)zs.setValue(tt,"_gl_DrawID",qi),Ke.render(Fe[qi]/ts,er[qi])}else if(At.isInstancedMesh)Ke.renderInstances(Sn,si,At.count);else if(Ut.isInstancedBufferGeometry){const Fe=Ut._maxInstanceCount!==void 0?Ut._maxInstanceCount:1/0,er=Math.min(Ut.instanceCount,Fe);Ke.renderInstances(Sn,si,er)}else Ke.render(Sn,si)};function yn(K,vt,Ut){K.transparent===!0&&K.side===Vc&&K.forceSinglePass===!1?(K.side=Ka,K.needsUpdate=!0,an(K,vt,Ut),K.side=ch,K.needsUpdate=!0,an(K,vt,Ut),K.side=Vc):an(K,vt,Ut)}this.compile=function(K,vt,Ut=null){Ut===null&&(Ut=K),x=He.get(Ut),x.init(vt),D.push(x),Ut.traverseVisible(function(At){At.isLight&&At.layers.test(vt.layers)&&(x.pushLight(At),At.castShadow&&x.pushShadow(At))}),K!==Ut&&K.traverseVisible(function(At){At.isLight&&At.layers.test(vt.layers)&&(x.pushLight(At),At.castShadow&&x.pushShadow(At))}),x.setupLights();const It=new Set;return K.traverse(function(At){if(!(At.isMesh||At.isPoints||At.isLine||At.isSprite))return;const ae=At.material;if(ae)if(Array.isArray(ae))for(let ge=0;ge<ae.length;ge++){const be=ae[ge];yn(be,Ut,At),It.add(be)}else yn(ae,Ut,At),It.add(ae)}),x=D.pop(),It},this.compileAsync=function(K,vt,Ut=null){const It=this.compile(K,vt,Ut);return new Promise(At=>{function ae(){if(It.forEach(function(ge){gt.get(ge).currentProgram.isReady()&&It.delete(ge)}),It.size===0){At(K);return}setTimeout(ae,10)}$t.get("KHR_parallel_shader_compile")!==null?ae():setTimeout(ae,10)})};let kr=null;function $n(K){kr&&kr(K)}function Hu(){Qr.stop()}function Da(){Qr.start()}const Qr=new R4;Qr.setAnimationLoop($n),typeof self<"u"&&Qr.setContext(self),this.setAnimationLoop=function(K){kr=K,Xt.setAnimationLoop(K),K===null?Qr.stop():Qr.start()},Xt.addEventListener("sessionstart",Hu),Xt.addEventListener("sessionend",Da),this.render=function(K,vt){if(vt!==void 0&&vt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;if(K.matrixWorldAutoUpdate===!0&&K.updateMatrixWorld(),vt.parent===null&&vt.matrixWorldAutoUpdate===!0&&vt.updateMatrixWorld(),Xt.enabled===!0&&Xt.isPresenting===!0&&(Xt.cameraAutoUpdate===!0&&Xt.updateCamera(vt),vt=Xt.getCamera()),K.isScene===!0&&K.onBeforeRender(O,K,vt,U),x=He.get(K,D.length),x.init(vt),D.push(x),Dt.multiplyMatrices(vt.projectionMatrix,vt.matrixWorldInverse),nt.setFromProjectionMatrix(Dt),ft=this.localClippingEnabled,lt=Kt.init(this.clippingPlanes,ft),T=Se.get(K,R.length),T.init(),R.push(T),Xt.enabled===!0&&Xt.isPresenting===!0){const ae=O.xr.getDepthSensingMesh();ae!==null&&Ls(ae,vt,-1/0,O.sortObjects)}Ls(K,vt,0,O.sortObjects),T.finish(),O.sortObjects===!0&&T.sort(ct,$),Pt=Xt.enabled===!1||Xt.isPresenting===!1||Xt.hasDepthSensing()===!1,Pt&&De.addToRenderList(T,K),this.info.render.frame++,lt===!0&&Kt.beginShadows();const Ut=x.state.shadowsArray;xe.render(Ut,K,vt),lt===!0&&Kt.endShadows(),this.info.autoReset===!0&&this.info.reset();const It=T.opaque,At=T.transmissive;if(x.setupLights(),vt.isArrayCamera){const ae=vt.cameras;if(At.length>0)for(let ge=0,be=ae.length;ge<be;ge++){const Ee=ae[ge];Jr(It,At,K,Ee)}Pt&&De.render(K);for(let ge=0,be=ae.length;ge<be;ge++){const Ee=ae[ge];Gu(T,K,Ee,Ee.viewport)}}else At.length>0&&Jr(It,At,K,vt),Pt&&De.render(K),Gu(T,K,vt);U!==null&&L===0&&(W.updateMultisampleRenderTarget(U),W.updateRenderTargetMipmap(U)),K.isScene===!0&&K.onAfterRender(O,K,vt),fn.resetDefaultState(),I=-1,w=null,D.pop(),D.length>0?(x=D[D.length-1],lt===!0&&Kt.setGlobalState(O.clippingPlanes,x.state.camera)):x=null,R.pop(),R.length>0?T=R[R.length-1]:T=null};function Ls(K,vt,Ut,It){if(K.visible===!1)return;if(K.layers.test(vt.layers)){if(K.isGroup)Ut=K.renderOrder;else if(K.isLOD)K.autoUpdate===!0&&K.update(vt);else if(K.isLight)x.pushLight(K),K.castShadow&&x.pushShadow(K);else if(K.isSprite){if(!K.frustumCulled||nt.intersectsSprite(K)){It&&Nt.setFromMatrixPosition(K.matrixWorld).applyMatrix4(Dt);const ge=Lt.update(K),be=K.material;be.visible&&T.push(K,ge,be,Ut,Nt.z,null)}}else if((K.isMesh||K.isLine||K.isPoints)&&(!K.frustumCulled||nt.intersectsObject(K))){const ge=Lt.update(K),be=K.material;if(It&&(K.boundingSphere!==void 0?(K.boundingSphere===null&&K.computeBoundingSphere(),Nt.copy(K.boundingSphere.center)):(ge.boundingSphere===null&&ge.computeBoundingSphere(),Nt.copy(ge.boundingSphere.center)),Nt.applyMatrix4(K.matrixWorld).applyMatrix4(Dt)),Array.isArray(be)){const Ee=ge.groups;for(let Ye=0,Xe=Ee.length;Ye<Xe;Ye++){const Ue=Ee[Ye],Sn=be[Ue.materialIndex];Sn&&Sn.visible&&T.push(K,ge,Sn,Ut,Nt.z,Ue)}}else be.visible&&T.push(K,ge,be,Ut,Nt.z,null)}}const ae=K.children;for(let ge=0,be=ae.length;ge<be;ge++)Ls(ae[ge],vt,Ut,It)}function Gu(K,vt,Ut,It){const At=K.opaque,ae=K.transmissive,ge=K.transparent;x.setupLightsView(Ut),lt===!0&&Kt.setGlobalState(O.clippingPlanes,Ut),It&&rt.viewport(V.copy(It)),At.length>0&&Ki(At,vt,Ut),ae.length>0&&Ki(ae,vt,Ut),ge.length>0&&Ki(ge,vt,Ut),rt.buffers.depth.setTest(!0),rt.buffers.depth.setMask(!0),rt.buffers.color.setMask(!0),rt.setPolygonOffset(!1)}function Jr(K,vt,Ut,It){if((Ut.isScene===!0?Ut.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[It.id]===void 0&&(x.state.transmissionRenderTarget[It.id]=new tf(1,1,{generateMipmaps:!0,type:$t.has("EXT_color_buffer_half_float")||$t.has("EXT_color_buffer_float")?d_:Bu,minFilter:Gc,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Xn.workingColorSpace}));const ae=x.state.transmissionRenderTarget[It.id],ge=It.viewport||V;ae.setSize(ge.z*O.transmissionResolutionScale,ge.w*O.transmissionResolutionScale);const be=O.getRenderTarget();O.setRenderTarget(ae),O.getClearColor(st),it=O.getClearAlpha(),it<1&&O.setClearColor(16777215,.5),O.clear(),Pt&&De.render(Ut);const Ee=O.toneMapping;O.toneMapping=Xc;const Ye=It.viewport;if(It.viewport!==void 0&&(It.viewport=void 0),x.setupLightsView(It),lt===!0&&Kt.setGlobalState(O.clippingPlanes,It),Ki(K,Ut,It),W.updateMultisampleRenderTarget(ae),W.updateRenderTargetMipmap(ae),$t.has("WEBGL_multisampled_render_to_texture")===!1){let Xe=!1;for(let Ue=0,Sn=vt.length;Ue<Sn;Ue++){const vn=vt[Ue],si=vn.object,Nn=vn.geometry,Ke=vn.material,Fe=vn.group;if(Ke.side===Vc&&si.layers.test(It.layers)){const er=Ke.side;Ke.side=Ka,Ke.needsUpdate=!0,Gi(si,Ut,It,Nn,Ke,Fe),Ke.side=er,Ke.needsUpdate=!0,Xe=!0}}Xe===!0&&(W.updateMultisampleRenderTarget(ae),W.updateRenderTargetMipmap(ae))}O.setRenderTarget(be),O.setClearColor(st,it),Ye!==void 0&&(It.viewport=Ye),O.toneMapping=Ee}function Ki(K,vt,Ut){const It=vt.isScene===!0?vt.overrideMaterial:null;for(let At=0,ae=K.length;At<ae;At++){const ge=K[At],be=ge.object,Ee=ge.geometry,Ye=It===null?ge.material:It,Xe=ge.group;be.layers.test(Ut.layers)&&Gi(be,vt,Ut,Ee,Ye,Xe)}}function Gi(K,vt,Ut,It,At,ae){K.onBeforeRender(O,vt,Ut,It,At,ae),K.modelViewMatrix.multiplyMatrices(Ut.matrixWorldInverse,K.matrixWorld),K.normalMatrix.getNormalMatrix(K.modelViewMatrix),At.onBeforeRender(O,vt,Ut,It,K,ae),At.transparent===!0&&At.side===Vc&&At.forceSinglePass===!1?(At.side=Ka,At.needsUpdate=!0,O.renderBufferDirect(Ut,vt,It,At,K,ae),At.side=ch,At.needsUpdate=!0,O.renderBufferDirect(Ut,vt,It,At,K,ae),At.side=Vc):O.renderBufferDirect(Ut,vt,It,At,K,ae),K.onAfterRender(O,vt,Ut,It,At,ae)}function an(K,vt,Ut){vt.isScene!==!0&&(vt=Jt);const It=gt.get(K),At=x.state.lights,ae=x.state.shadowsArray,ge=At.state.version,be=le.getParameters(K,At.state,ae,vt,Ut),Ee=le.getProgramCacheKey(be);let Ye=It.programs;It.environment=K.isMeshStandardMaterial?vt.environment:null,It.fog=vt.fog,It.envMap=(K.isMeshStandardMaterial?ht:q).get(K.envMap||It.environment),It.envMapRotation=It.environment!==null&&K.envMap===null?vt.environmentRotation:K.envMapRotation,Ye===void 0&&(K.addEventListener("dispose",je),Ye=new Map,It.programs=Ye);let Xe=Ye.get(Ee);if(Xe!==void 0){if(It.currentProgram===Xe&&It.lightsStateVersion===ge)return to(K,be),Xe}else be.uniforms=le.getUniforms(K),K.onBeforeCompile(be,O),Xe=le.acquireProgram(be,Ee),Ye.set(Ee,Xe),It.uniforms=be.uniforms;const Ue=It.uniforms;return(!K.isShaderMaterial&&!K.isRawShaderMaterial||K.clipping===!0)&&(Ue.clippingPlanes=Kt.uniform),to(K,be),It.needsLights=uf(K),It.lightsStateVersion=ge,It.needsLights&&(Ue.ambientLightColor.value=At.state.ambient,Ue.lightProbe.value=At.state.probe,Ue.directionalLights.value=At.state.directional,Ue.directionalLightShadows.value=At.state.directionalShadow,Ue.spotLights.value=At.state.spot,Ue.spotLightShadows.value=At.state.spotShadow,Ue.rectAreaLights.value=At.state.rectArea,Ue.ltc_1.value=At.state.rectAreaLTC1,Ue.ltc_2.value=At.state.rectAreaLTC2,Ue.pointLights.value=At.state.point,Ue.pointLightShadows.value=At.state.pointShadow,Ue.hemisphereLights.value=At.state.hemi,Ue.directionalShadowMap.value=At.state.directionalShadowMap,Ue.directionalShadowMatrix.value=At.state.directionalShadowMatrix,Ue.spotShadowMap.value=At.state.spotShadowMap,Ue.spotLightMatrix.value=At.state.spotLightMatrix,Ue.spotLightMap.value=At.state.spotLightMap,Ue.pointShadowMap.value=At.state.pointShadowMap,Ue.pointShadowMatrix.value=At.state.pointShadowMatrix),It.currentProgram=Xe,It.uniformsList=null,Xe}function ea(K){if(K.uniformsList===null){const vt=K.currentProgram.getUniforms();K.uniformsList=VE.seqWithValue(vt.seq,K.uniforms)}return K.uniformsList}function to(K,vt){const Ut=gt.get(K);Ut.outputColorSpace=vt.outputColorSpace,Ut.batching=vt.batching,Ut.batchingColor=vt.batchingColor,Ut.instancing=vt.instancing,Ut.instancingColor=vt.instancingColor,Ut.instancingMorph=vt.instancingMorph,Ut.skinning=vt.skinning,Ut.morphTargets=vt.morphTargets,Ut.morphNormals=vt.morphNormals,Ut.morphColors=vt.morphColors,Ut.morphTargetsCount=vt.morphTargetsCount,Ut.numClippingPlanes=vt.numClippingPlanes,Ut.numIntersection=vt.numClipIntersection,Ut.vertexAlphas=vt.vertexAlphas,Ut.vertexTangents=vt.vertexTangents,Ut.toneMapping=vt.toneMapping}function Xl(K,vt,Ut,It,At){vt.isScene!==!0&&(vt=Jt),W.resetTextureUnits();const ae=vt.fog,ge=It.isMeshStandardMaterial?vt.environment:null,be=U===null?O.outputColorSpace:U.isXRRenderTarget===!0?U.texture.colorSpace:Bd,Ee=(It.isMeshStandardMaterial?ht:q).get(It.envMap||ge),Ye=It.vertexColors===!0&&!!Ut.attributes.color&&Ut.attributes.color.itemSize===4,Xe=!!Ut.attributes.tangent&&(!!It.normalMap||It.anisotropy>0),Ue=!!Ut.morphAttributes.position,Sn=!!Ut.morphAttributes.normal,vn=!!Ut.morphAttributes.color;let si=Xc;It.toneMapped&&(U===null||U.isXRRenderTarget===!0)&&(si=O.toneMapping);const Nn=Ut.morphAttributes.position||Ut.morphAttributes.normal||Ut.morphAttributes.color,Ke=Nn!==void 0?Nn.length:0,Fe=gt.get(It),er=x.state.lights;if(lt===!0&&(ft===!0||K!==w)){const Qe=K===w&&It.id===I;Kt.setState(It,K,Qe)}let En=!1;It.version===Fe.__version?(Fe.needsLights&&Fe.lightsStateVersion!==er.state.version||Fe.outputColorSpace!==be||At.isBatchedMesh&&Fe.batching===!1||!At.isBatchedMesh&&Fe.batching===!0||At.isBatchedMesh&&Fe.batchingColor===!0&&At.colorTexture===null||At.isBatchedMesh&&Fe.batchingColor===!1&&At.colorTexture!==null||At.isInstancedMesh&&Fe.instancing===!1||!At.isInstancedMesh&&Fe.instancing===!0||At.isSkinnedMesh&&Fe.skinning===!1||!At.isSkinnedMesh&&Fe.skinning===!0||At.isInstancedMesh&&Fe.instancingColor===!0&&At.instanceColor===null||At.isInstancedMesh&&Fe.instancingColor===!1&&At.instanceColor!==null||At.isInstancedMesh&&Fe.instancingMorph===!0&&At.morphTexture===null||At.isInstancedMesh&&Fe.instancingMorph===!1&&At.morphTexture!==null||Fe.envMap!==Ee||It.fog===!0&&Fe.fog!==ae||Fe.numClippingPlanes!==void 0&&(Fe.numClippingPlanes!==Kt.numPlanes||Fe.numIntersection!==Kt.numIntersection)||Fe.vertexAlphas!==Ye||Fe.vertexTangents!==Xe||Fe.morphTargets!==Ue||Fe.morphNormals!==Sn||Fe.morphColors!==vn||Fe.toneMapping!==si||Fe.morphTargetsCount!==Ke)&&(En=!0):(En=!0,Fe.__version=It.version);let ts=Fe.currentProgram;En===!0&&(ts=an(It,vt,At));let zs=!1,qi=!1,ui=!1;const kn=ts.getUniforms(),lr=Fe.uniforms;if(rt.useProgram(ts.program)&&(zs=!0,qi=!0,ui=!0),It.id!==I&&(I=It.id,qi=!0),zs||w!==K){rt.buffers.depth.getReversed()?(mt.copy(K.projectionMatrix),A8(mt),w8(mt),kn.setValue(tt,"projectionMatrix",mt)):kn.setValue(tt,"projectionMatrix",K.projectionMatrix),kn.setValue(tt,"viewMatrix",K.matrixWorldInverse);const Zi=kn.map.cameraPosition;Zi!==void 0&&Zi.setValue(tt,Wt.setFromMatrixPosition(K.matrixWorld)),ce.logarithmicDepthBuffer&&kn.setValue(tt,"logDepthBufFC",2/(Math.log(K.far+1)/Math.LN2)),(It.isMeshPhongMaterial||It.isMeshToonMaterial||It.isMeshLambertMaterial||It.isMeshBasicMaterial||It.isMeshStandardMaterial||It.isShaderMaterial)&&kn.setValue(tt,"isOrthographic",K.isOrthographicCamera===!0),w!==K&&(w=K,qi=!0,ui=!0)}if(At.isSkinnedMesh){kn.setOptional(tt,At,"bindMatrix"),kn.setOptional(tt,At,"bindMatrixInverse");const Qe=At.skeleton;Qe&&(Qe.boneTexture===null&&Qe.computeBoneTexture(),kn.setValue(tt,"boneTexture",Qe.boneTexture,W))}At.isBatchedMesh&&(kn.setOptional(tt,At,"batchingTexture"),kn.setValue(tt,"batchingTexture",At._matricesTexture,W),kn.setOptional(tt,At,"batchingIdTexture"),kn.setValue(tt,"batchingIdTexture",At._indirectTexture,W),kn.setOptional(tt,At,"batchingColorTexture"),At._colorsTexture!==null&&kn.setValue(tt,"batchingColorTexture",At._colorsTexture,W));const Ar=Ut.morphAttributes;if((Ar.position!==void 0||Ar.normal!==void 0||Ar.color!==void 0)&&Ae.update(At,Ut,ts),(qi||Fe.receiveShadow!==At.receiveShadow)&&(Fe.receiveShadow=At.receiveShadow,kn.setValue(tt,"receiveShadow",At.receiveShadow)),It.isMeshGouraudMaterial&&It.envMap!==null&&(lr.envMap.value=Ee,lr.flipEnvMap.value=Ee.isCubeTexture&&Ee.isRenderTargetTexture===!1?-1:1),It.isMeshStandardMaterial&&It.envMap===null&&vt.environment!==null&&(lr.envMapIntensity.value=vt.environmentIntensity),qi&&(kn.setValue(tt,"toneMappingExposure",O.toneMappingExposure),Fe.needsLights&&Na(lr,ui),ae&&It.fog===!0&&fe.refreshFogUniforms(lr,ae),fe.refreshMaterialUniforms(lr,It,at,Z,x.state.transmissionRenderTarget[K.id]),VE.upload(tt,ea(Fe),lr,W)),It.isShaderMaterial&&It.uniformsNeedUpdate===!0&&(VE.upload(tt,ea(Fe),lr,W),It.uniformsNeedUpdate=!1),It.isSpriteMaterial&&kn.setValue(tt,"center",At.center),kn.setValue(tt,"modelViewMatrix",At.modelViewMatrix),kn.setValue(tt,"normalMatrix",At.normalMatrix),kn.setValue(tt,"modelMatrix",At.matrixWorld),It.isShaderMaterial||It.isRawShaderMaterial){const Qe=It.uniformsGroups;for(let Zi=0,cs=Qe.length;Zi<cs;Zi++){const ur=Qe[Zi];bt.update(ur,ts),bt.bind(ur,ts)}}return ts}function Na(K,vt){K.ambientLightColor.needsUpdate=vt,K.lightProbe.needsUpdate=vt,K.directionalLights.needsUpdate=vt,K.directionalLightShadows.needsUpdate=vt,K.pointLights.needsUpdate=vt,K.pointLightShadows.needsUpdate=vt,K.spotLights.needsUpdate=vt,K.spotLightShadows.needsUpdate=vt,K.rectAreaLights.needsUpdate=vt,K.hemisphereLights.needsUpdate=vt}function uf(K){return K.isMeshLambertMaterial||K.isMeshToonMaterial||K.isMeshPhongMaterial||K.isMeshStandardMaterial||K.isShadowMaterial||K.isShaderMaterial&&K.lights===!0}this.getActiveCubeFace=function(){return B},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return U},this.setRenderTargetTextures=function(K,vt,Ut){gt.get(K.texture).__webglTexture=vt,gt.get(K.depthTexture).__webglTexture=Ut;const It=gt.get(K);It.__hasExternalTextures=!0,It.__autoAllocateDepthBuffer=Ut===void 0,It.__autoAllocateDepthBuffer||$t.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),It.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(K,vt){const Ut=gt.get(K);Ut.__webglFramebuffer=vt,Ut.__useDefaultFramebuffer=vt===void 0};const eo=tt.createFramebuffer();this.setRenderTarget=function(K,vt=0,Ut=0){U=K,B=vt,L=Ut;let It=!0,At=null,ae=!1,ge=!1;if(K){const Ee=gt.get(K);if(Ee.__useDefaultFramebuffer!==void 0)rt.bindFramebuffer(tt.FRAMEBUFFER,null),It=!1;else if(Ee.__webglFramebuffer===void 0)W.setupRenderTarget(K);else if(Ee.__hasExternalTextures)W.rebindTextures(K,gt.get(K.texture).__webglTexture,gt.get(K.depthTexture).__webglTexture);else if(K.depthBuffer){const Ue=K.depthTexture;if(Ee.__boundDepthTexture!==Ue){if(Ue!==null&&gt.has(Ue)&&(K.width!==Ue.image.width||K.height!==Ue.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");W.setupDepthRenderbuffer(K)}}const Ye=K.texture;(Ye.isData3DTexture||Ye.isDataArrayTexture||Ye.isCompressedArrayTexture)&&(ge=!0);const Xe=gt.get(K).__webglFramebuffer;K.isWebGLCubeRenderTarget?(Array.isArray(Xe[vt])?At=Xe[vt][Ut]:At=Xe[vt],ae=!0):K.samples>0&&W.useMultisampledRTT(K)===!1?At=gt.get(K).__webglMultisampledFramebuffer:Array.isArray(Xe)?At=Xe[Ut]:At=Xe,V.copy(K.viewport),G.copy(K.scissor),k=K.scissorTest}else V.copy(pt).multiplyScalar(at).floor(),G.copy(wt).multiplyScalar(at).floor(),k=zt;if(Ut!==0&&(At=eo),rt.bindFramebuffer(tt.FRAMEBUFFER,At)&&It&&rt.drawBuffers(K,At),rt.viewport(V),rt.scissor(G),rt.setScissorTest(k),ae){const Ee=gt.get(K.texture);tt.framebufferTexture2D(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0,tt.TEXTURE_CUBE_MAP_POSITIVE_X+vt,Ee.__webglTexture,Ut)}else if(ge){const Ee=gt.get(K.texture),Ye=vt;tt.framebufferTextureLayer(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0,Ee.__webglTexture,Ut,Ye)}else if(K!==null&&Ut!==0){const Ee=gt.get(K.texture);tt.framebufferTexture2D(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0,tt.TEXTURE_2D,Ee.__webglTexture,Ut)}I=-1},this.readRenderTargetPixels=function(K,vt,Ut,It,At,ae,ge){if(!(K&&K.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let be=gt.get(K).__webglFramebuffer;if(K.isWebGLCubeRenderTarget&&ge!==void 0&&(be=be[ge]),be){rt.bindFramebuffer(tt.FRAMEBUFFER,be);try{const Ee=K.texture,Ye=Ee.format,Xe=Ee.type;if(!ce.textureFormatReadable(Ye)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ce.textureTypeReadable(Xe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}vt>=0&&vt<=K.width-It&&Ut>=0&&Ut<=K.height-At&&tt.readPixels(vt,Ut,It,At,Te.convert(Ye),Te.convert(Xe),ae)}finally{const Ee=U!==null?gt.get(U).__webglFramebuffer:null;rt.bindFramebuffer(tt.FRAMEBUFFER,Ee)}}},this.readRenderTargetPixelsAsync=async function(K,vt,Ut,It,At,ae,ge){if(!(K&&K.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let be=gt.get(K).__webglFramebuffer;if(K.isWebGLCubeRenderTarget&&ge!==void 0&&(be=be[ge]),be){const Ee=K.texture,Ye=Ee.format,Xe=Ee.type;if(!ce.textureFormatReadable(Ye))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ce.textureTypeReadable(Xe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(vt>=0&&vt<=K.width-It&&Ut>=0&&Ut<=K.height-At){rt.bindFramebuffer(tt.FRAMEBUFFER,be);const Ue=tt.createBuffer();tt.bindBuffer(tt.PIXEL_PACK_BUFFER,Ue),tt.bufferData(tt.PIXEL_PACK_BUFFER,ae.byteLength,tt.STREAM_READ),tt.readPixels(vt,Ut,It,At,Te.convert(Ye),Te.convert(Xe),0);const Sn=U!==null?gt.get(U).__webglFramebuffer:null;rt.bindFramebuffer(tt.FRAMEBUFFER,Sn);const vn=tt.fenceSync(tt.SYNC_GPU_COMMANDS_COMPLETE,0);return tt.flush(),await M8(tt,vn,4),tt.bindBuffer(tt.PIXEL_PACK_BUFFER,Ue),tt.getBufferSubData(tt.PIXEL_PACK_BUFFER,0,ae),tt.deleteBuffer(Ue),tt.deleteSync(vn),ae}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(K,vt=null,Ut=0){K.isTexture!==!0&&(om("WebGLRenderer: copyFramebufferToTexture function signature has changed."),vt=arguments[0]||null,K=arguments[1]);const It=Math.pow(2,-Ut),At=Math.floor(K.image.width*It),ae=Math.floor(K.image.height*It),ge=vt!==null?vt.x:0,be=vt!==null?vt.y:0;W.setTexture2D(K,0),tt.copyTexSubImage2D(tt.TEXTURE_2D,Ut,0,0,ge,be,At,ae),rt.unbindTexture()};const Fo=tt.createFramebuffer(),Us=tt.createFramebuffer();this.copyTextureToTexture=function(K,vt,Ut=null,It=null,At=0,ae=null){K.isTexture!==!0&&(om("WebGLRenderer: copyTextureToTexture function signature has changed."),It=arguments[0]||null,K=arguments[1],vt=arguments[2],ae=arguments[3]||0,Ut=null),ae===null&&(At!==0?(om("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ae=At,At=0):ae=0);let ge,be,Ee,Ye,Xe,Ue,Sn,vn,si;const Nn=K.isCompressedTexture?K.mipmaps[ae]:K.image;if(Ut!==null)ge=Ut.max.x-Ut.min.x,be=Ut.max.y-Ut.min.y,Ee=Ut.isBox3?Ut.max.z-Ut.min.z:1,Ye=Ut.min.x,Xe=Ut.min.y,Ue=Ut.isBox3?Ut.min.z:0;else{const Ar=Math.pow(2,-At);ge=Math.floor(Nn.width*Ar),be=Math.floor(Nn.height*Ar),K.isDataArrayTexture?Ee=Nn.depth:K.isData3DTexture?Ee=Math.floor(Nn.depth*Ar):Ee=1,Ye=0,Xe=0,Ue=0}It!==null?(Sn=It.x,vn=It.y,si=It.z):(Sn=0,vn=0,si=0);const Ke=Te.convert(vt.format),Fe=Te.convert(vt.type);let er;vt.isData3DTexture?(W.setTexture3D(vt,0),er=tt.TEXTURE_3D):vt.isDataArrayTexture||vt.isCompressedArrayTexture?(W.setTexture2DArray(vt,0),er=tt.TEXTURE_2D_ARRAY):(W.setTexture2D(vt,0),er=tt.TEXTURE_2D),tt.pixelStorei(tt.UNPACK_FLIP_Y_WEBGL,vt.flipY),tt.pixelStorei(tt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,vt.premultiplyAlpha),tt.pixelStorei(tt.UNPACK_ALIGNMENT,vt.unpackAlignment);const En=tt.getParameter(tt.UNPACK_ROW_LENGTH),ts=tt.getParameter(tt.UNPACK_IMAGE_HEIGHT),zs=tt.getParameter(tt.UNPACK_SKIP_PIXELS),qi=tt.getParameter(tt.UNPACK_SKIP_ROWS),ui=tt.getParameter(tt.UNPACK_SKIP_IMAGES);tt.pixelStorei(tt.UNPACK_ROW_LENGTH,Nn.width),tt.pixelStorei(tt.UNPACK_IMAGE_HEIGHT,Nn.height),tt.pixelStorei(tt.UNPACK_SKIP_PIXELS,Ye),tt.pixelStorei(tt.UNPACK_SKIP_ROWS,Xe),tt.pixelStorei(tt.UNPACK_SKIP_IMAGES,Ue);const kn=K.isDataArrayTexture||K.isData3DTexture,lr=vt.isDataArrayTexture||vt.isData3DTexture;if(K.isDepthTexture){const Ar=gt.get(K),Qe=gt.get(vt),Zi=gt.get(Ar.__renderTarget),cs=gt.get(Qe.__renderTarget);rt.bindFramebuffer(tt.READ_FRAMEBUFFER,Zi.__webglFramebuffer),rt.bindFramebuffer(tt.DRAW_FRAMEBUFFER,cs.__webglFramebuffer);for(let ur=0;ur<Ee;ur++)kn&&(tt.framebufferTextureLayer(tt.READ_FRAMEBUFFER,tt.COLOR_ATTACHMENT0,gt.get(K).__webglTexture,At,Ue+ur),tt.framebufferTextureLayer(tt.DRAW_FRAMEBUFFER,tt.COLOR_ATTACHMENT0,gt.get(vt).__webglTexture,ae,si+ur)),tt.blitFramebuffer(Ye,Xe,ge,be,Sn,vn,ge,be,tt.DEPTH_BUFFER_BIT,tt.NEAREST);rt.bindFramebuffer(tt.READ_FRAMEBUFFER,null),rt.bindFramebuffer(tt.DRAW_FRAMEBUFFER,null)}else if(At!==0||K.isRenderTargetTexture||gt.has(K)){const Ar=gt.get(K),Qe=gt.get(vt);rt.bindFramebuffer(tt.READ_FRAMEBUFFER,Fo),rt.bindFramebuffer(tt.DRAW_FRAMEBUFFER,Us);for(let Zi=0;Zi<Ee;Zi++)kn?tt.framebufferTextureLayer(tt.READ_FRAMEBUFFER,tt.COLOR_ATTACHMENT0,Ar.__webglTexture,At,Ue+Zi):tt.framebufferTexture2D(tt.READ_FRAMEBUFFER,tt.COLOR_ATTACHMENT0,tt.TEXTURE_2D,Ar.__webglTexture,At),lr?tt.framebufferTextureLayer(tt.DRAW_FRAMEBUFFER,tt.COLOR_ATTACHMENT0,Qe.__webglTexture,ae,si+Zi):tt.framebufferTexture2D(tt.DRAW_FRAMEBUFFER,tt.COLOR_ATTACHMENT0,tt.TEXTURE_2D,Qe.__webglTexture,ae),At!==0?tt.blitFramebuffer(Ye,Xe,ge,be,Sn,vn,ge,be,tt.COLOR_BUFFER_BIT,tt.NEAREST):lr?tt.copyTexSubImage3D(er,ae,Sn,vn,si+Zi,Ye,Xe,ge,be):tt.copyTexSubImage2D(er,ae,Sn,vn,Ye,Xe,ge,be);rt.bindFramebuffer(tt.READ_FRAMEBUFFER,null),rt.bindFramebuffer(tt.DRAW_FRAMEBUFFER,null)}else lr?K.isDataTexture||K.isData3DTexture?tt.texSubImage3D(er,ae,Sn,vn,si,ge,be,Ee,Ke,Fe,Nn.data):vt.isCompressedArrayTexture?tt.compressedTexSubImage3D(er,ae,Sn,vn,si,ge,be,Ee,Ke,Nn.data):tt.texSubImage3D(er,ae,Sn,vn,si,ge,be,Ee,Ke,Fe,Nn):K.isDataTexture?tt.texSubImage2D(tt.TEXTURE_2D,ae,Sn,vn,ge,be,Ke,Fe,Nn.data):K.isCompressedTexture?tt.compressedTexSubImage2D(tt.TEXTURE_2D,ae,Sn,vn,Nn.width,Nn.height,Ke,Nn.data):tt.texSubImage2D(tt.TEXTURE_2D,ae,Sn,vn,ge,be,Ke,Fe,Nn);tt.pixelStorei(tt.UNPACK_ROW_LENGTH,En),tt.pixelStorei(tt.UNPACK_IMAGE_HEIGHT,ts),tt.pixelStorei(tt.UNPACK_SKIP_PIXELS,zs),tt.pixelStorei(tt.UNPACK_SKIP_ROWS,qi),tt.pixelStorei(tt.UNPACK_SKIP_IMAGES,ui),ae===0&&vt.generateMipmaps&&tt.generateMipmap(er),rt.unbindTexture()},this.copyTextureToTexture3D=function(K,vt,Ut=null,It=null,At=0){return K.isTexture!==!0&&(om("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Ut=arguments[0]||null,It=arguments[1]||null,K=arguments[2],vt=arguments[3],At=arguments[4]||0),om('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(K,vt,Ut,It,At)},this.initRenderTarget=function(K){gt.get(K).__webglFramebuffer===void 0&&W.setupRenderTarget(K)},this.initTexture=function(K){K.isCubeTexture?W.setTextureCube(K,0):K.isData3DTexture?W.setTexture3D(K,0):K.isDataArrayTexture||K.isCompressedArrayTexture?W.setTexture2DArray(K,0):W.setTexture2D(K,0),rt.unbindTexture()},this.resetState=function(){B=0,L=0,U=null,rt.reset(),fn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Pu}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorspace=Xn._getDrawingBufferColorSpace(t),e.unpackColorSpace=Xn._getUnpackColorSpace()}}const LW=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:O2,AddEquation:bd,AddOperation:rB,AdditiveAnimationBlendMode:k2,AdditiveBlending:i1,AgXToneMapping:uB,AlphaFormat:L2,AlwaysCompare:TB,AlwaysDepth:o1,AlwaysStencilFunc:YC,AmbientLight:g4,AnimationAction:M4,AnimationClip:ax,AnimationLoader:Z9,AnimationMixer:AG,AnimationObjectGroup:TG,AnimationUtils:W9,ArcCurve:GB,ArrayCamera:S4,ArrowHelper:WG,AttachedBindMode:WC,Audio:E4,AudioAnalyser:pG,AudioContext:hO,AudioListener:fG,AudioLoader:lG,AxesHelper:C4,BackSide:Ka,BasicDepthPacking:mB,BasicShadowMap:Bz,BatchedMesh:VB,Bone:Y2,BooleanKeyframeTrack:Gm,Box2:PG,Box3:Ks,Box3Helper:jG,BoxGeometry:km,BoxHelper:qG,BufferAttribute:wi,BufferGeometry:bn,BufferGeometryLoader:b4,ByteType:N2,Cache:rh,Camera:WT,CameraHelper:GG,CanvasTexture:y9,CapsuleGeometry:eM,CatmullRomCurve3:qB,CineonToneMapping:oB,CircleGeometry:nM,ClampToEdgeWrapping:Hl,Clock:dO,Color:Ne,ColorKeyframeTrack:uO,ColorManagement:Xn,CompressedArrayTexture:m9,CompressedCubeTexture:g9,CompressedTexture:QT,CompressedTextureLoader:Q9,ConeGeometry:Bx,ConstantAlphaFactor:eB,ConstantColorFactor:Jz,Controls:$G,CubeCamera:NB,CubeReflectionMapping:fh,CubeRefractionMapping:zd,CubeTexture:Lx,CubeTextureLoader:J9,CubeUVReflectionMapping:h_,CubicBezierCurve:Q2,CubicBezierCurve3:J2,CubicInterpolant:l4,CullFaceBack:qC,CullFaceFront:zz,CullFaceFrontBack:wH,CullFaceNone:Uz,Curve:Fu,CurvePath:XB,CustomBlending:Vz,CustomToneMapping:lB,CylinderGeometry:Hm,Cylindrical:IG,Data3DTexture:XT,DataArrayTexture:Px,DataTexture:Wc,DataTextureLoader:tG,DataUtils:H8,DecrementStencilOp:kH,DecrementWrapStencilOp:GH,DefaultLoadingManager:f4,DepthFormat:Sm,DepthStencilFormat:Nm,DepthTexture:K2,DetachedBindMode:fB,DirectionalLight:m4,DirectionalLightHelper:HG,DiscreteInterpolant:u4,DodecahedronGeometry:iM,DoubleSide:Vc,DstAlphaFactor:Yz,DstColorFactor:Kz,DynamicCopyUsage:r8,DynamicDrawUsage:QH,DynamicReadUsage:e8,EdgesGeometry:WB,EllipseCurve:JT,EqualCompare:xB,EqualDepth:u1,EqualStencilFunc:WH,EquirectangularReflectionMapping:q0,EquirectangularRefractionMapping:j0,Euler:dl,EventDispatcher:sf,ExtrudeGeometry:sM,FileLoader:ph,Float16BufferAttribute:$8,Float32BufferAttribute:ze,FloatType:Do,Fog:$T,FogExp2:YT,FramebufferTexture:p9,FrontSide:ch,Frustum:Ux,GLBufferAttribute:NG,GLSL1:a8,GLSL3:$C,GreaterCompare:bB,GreaterDepth:f1,GreaterEqualCompare:EB,GreaterEqualDepth:c1,GreaterEqualStencilFunc:ZH,GreaterStencilFunc:$H,GridHelper:w4,Group:Md,HalfFloatType:d_,HemisphereLight:h4,HemisphereLightHelper:FG,IcosahedronGeometry:aM,ImageBitmapLoader:oG,ImageLoader:ox,ImageUtils:CB,IncrementStencilOp:FH,IncrementWrapStencilOp:HH,InstancedBufferAttribute:qy,InstancedBufferGeometry:x4,InstancedInterleavedBuffer:DG,InstancedMesh:BB,Int16BufferAttribute:W8,Int32BufferAttribute:Y8,Int8BufferAttribute:q8,IntType:BT,InterleavedBuffer:KT,InterleavedBufferAttribute:Im,Interpolant:kx,InterpolateDiscrete:Y0,InterpolateLinear:V1,InterpolateSmooth:zE,InvertStencilOp:qH,KeepStencilOp:am,KeyframeTrack:ku,LOD:UB,LatheGeometry:zx,Layers:Hy,LessCompare:vB,LessDepth:l1,LessEqualCompare:H2,LessEqualDepth:Om,LessEqualStencilFunc:YH,LessStencilFunc:XH,Light:Qd,LightProbe:v4,Line:dh,Line3:LG,LineBasicMaterial:Oa,LineCurve:tO,LineCurve3:jB,LineDashedMaterial:s4,LineLoop:FB,LineSegments:af,LinearFilter:ms,LinearInterpolant:lO,LinearMipMapLinearFilter:DH,LinearMipMapNearestFilter:OH,LinearMipmapLinearFilter:Gc,LinearMipmapNearestFilter:b0,LinearSRGBColorSpace:Bd,LinearToneMapping:sB,LinearTransfer:K0,Loader:Bo,LoaderUtils:tR,LoadingManager:cO,LoopOnce:hB,LoopPingPong:pB,LoopRepeat:dB,LuminanceAlphaFormat:B2,LuminanceFormat:z2,MOUSE:MH,Material:Ra,MaterialLoader:hM,MathUtils:MB,Matrix2:vO,Matrix3:_n,Matrix4:nn,MaxEquation:Gz,Mesh:$r,MeshBasicMaterial:Kd,MeshDepthMaterial:sO,MeshDistanceMaterial:aO,MeshLambertMaterial:rO,MeshMatcapMaterial:r4,MeshNormalMaterial:i4,MeshPhongMaterial:e4,MeshPhysicalMaterial:t4,MeshStandardMaterial:iO,MeshToonMaterial:n4,MinEquation:Hz,MirroredRepeatWrapping:W0,MixOperation:iB,MultiplyBlending:XC,MultiplyOperation:Nx,NearestFilter:$s,NearestMipMapLinearFilter:RH,NearestMipMapNearestFilter:CH,NearestMipmapLinearFilter:Ay,NearestMipmapNearestFilter:D2,NeutralToneMapping:cB,NeverCompare:_B,NeverDepth:a1,NeverStencilFunc:jH,NoBlending:ah,NoColorSpace:nh,NoToneMapping:Xc,NormalAnimationBlendMode:qT,NormalBlending:bm,NotEqualCompare:SB,NotEqualDepth:h1,NotEqualStencilFunc:KH,NumberKeyframeTrack:rx,Object3D:ii,ObjectLoader:sG,ObjectSpaceNormalMap:yB,OctahedronGeometry:Vx,OneFactor:jz,OneMinusConstantAlphaFactor:nB,OneMinusConstantColorFactor:tB,OneMinusDstAlphaFactor:$z,OneMinusDstColorFactor:Zz,OneMinusSrcAlphaFactor:s1,OneMinusSrcColorFactor:Wz,OrthographicCamera:Gx,PCFShadowMap:UT,PCFSoftShadowMap:x0,PMREMGenerator:iR,Path:tx,PerspectiveCamera:Ns,Plane:xd,PlaneGeometry:m_,PlaneHelper:XG,PointLight:p4,PointLightHelper:BG,Points:kB,PointsMaterial:$2,PolarGridHelper:kG,PolyhedronGeometry:Zd,PositionalAudio:dG,PropertyBinding:ni,PropertyMixer:T4,QuadraticBezierCurve:eO,QuadraticBezierCurve3:tM,Quaternion:Za,QuaternionKeyframeTrack:Hx,QuaternionLinearInterpolant:c4,RED_GREEN_RGTC2_Format:z1,RED_RGTC1_Format:F2,REVISION:Dx,RGBADepthPacking:gB,RGBAFormat:Ta,RGBAIntegerFormat:GT,RGBA_ASTC_10x10_Format:D1,RGBA_ASTC_10x5_Format:C1,RGBA_ASTC_10x6_Format:R1,RGBA_ASTC_10x8_Format:O1,RGBA_ASTC_12x10_Format:N1,RGBA_ASTC_12x12_Format:I1,RGBA_ASTC_4x4_Format:x1,RGBA_ASTC_5x4_Format:b1,RGBA_ASTC_5x5_Format:S1,RGBA_ASTC_6x5_Format:E1,RGBA_ASTC_6x6_Format:T1,RGBA_ASTC_8x5_Format:M1,RGBA_ASTC_8x6_Format:A1,RGBA_ASTC_8x8_Format:w1,RGBA_BPTC_Format:A0,RGBA_ETC2_EAC_Format:v1,RGBA_PVRTC_2BPPV1_Format:g1,RGBA_PVRTC_4BPPV1_Format:m1,RGBA_S3TC_DXT1_Format:E0,RGBA_S3TC_DXT3_Format:T0,RGBA_S3TC_DXT5_Format:M0,RGBDepthPacking:UH,RGBFormat:U2,RGBIntegerFormat:NH,RGB_BPTC_SIGNED_Format:P1,RGB_BPTC_UNSIGNED_Format:L1,RGB_ETC1_Format:y1,RGB_ETC2_Format:_1,RGB_PVRTC_2BPPV1_Format:p1,RGB_PVRTC_4BPPV1_Format:d1,RGB_S3TC_DXT1_Format:S0,RGDepthPacking:zH,RGFormat:V2,RGIntegerFormat:HT,RawShaderMaterial:JB,Ray:p_,Raycaster:yO,RectAreaLight:y4,RedFormat:kT,RedIntegerFormat:Ix,ReinhardToneMapping:aB,RenderTarget:jT,RenderTarget3D:wG,RenderTargetArray:CG,RepeatWrapping:X0,ReplaceStencilOp:VH,ReverseSubtractEquation:kz,RingGeometry:oM,SIGNED_RED_GREEN_RGTC2_Format:B1,SIGNED_RED_RGTC1_Format:U1,SRGBColorSpace:ba,SRGBTransfer:Ai,Scene:X2,ShaderChunk:Cn,ShaderLib:Nu,ShaderMaterial:ql,ShadowMaterial:QB,Shape:Tm,ShapeGeometry:lM,ShapePath:YG,ShapeUtils:Yc,ShortType:I2,Skeleton:ZT,SkeletonHelper:zG,SkinnedMesh:zB,Source:Td,Sphere:Zs,SphereGeometry:g_,Spherical:_O,SphericalHarmonics3:_4,SplineCurve:nO,SpotLight:d4,SpotLightHelper:UG,Sprite:LB,SpriteMaterial:W2,SrcAlphaFactor:r1,SrcAlphaSaturateFactor:Qz,SrcColorFactor:Xz,StaticCopyUsage:i8,StaticDrawUsage:Z0,StaticReadUsage:t8,StereoCamera:uG,StreamCopyUsage:s8,StreamDrawUsage:JH,StreamReadUsage:n8,StringKeyframeTrack:qm,SubtractEquation:Fz,SubtractiveBlending:jC,TOUCH:AH,TangentSpaceNormalMap:$d,TetrahedronGeometry:uM,Texture:Fr,TextureLoader:eG,TextureUtils:t7,TimestampQuery:o8,TorusGeometry:cM,TorusKnotGeometry:fM,Triangle:Oo,TriangleFanDrawMode:LH,TriangleStripDrawMode:PH,TrianglesDrawMode:IH,TubeGeometry:Fx,UVMapping:zT,Uint16BufferAttribute:q2,Uint32BufferAttribute:j2,Uint8BufferAttribute:j8,Uint8ClampedBufferAttribute:X8,Uniform:gO,UniformsGroup:OG,UniformsLib:Ce,UniformsUtils:DB,UnsignedByteType:Bu,UnsignedInt248Type:Dm,UnsignedInt5999Type:P2,UnsignedIntType:hh,UnsignedShort4444Type:VT,UnsignedShort5551Type:FT,UnsignedShortType:Fy,VSMShadowMap:Ou,Vector2:oe,Vector3:ut,Vector4:ti,VectorKeyframeTrack:sx,VideoFrameTexture:d9,VideoTexture:HB,WebGL3DRenderTarget:N8,WebGLArrayRenderTarget:D8,WebGLCoordinateSystem:Pu,WebGLCubeRenderTarget:IB,WebGLRenderTarget:tf,WebGLRenderer:L4,WebGLUtils:P4,WebGPUCoordinateSystem:Q0,WebXRController:BE,WireframeGeometry:ZB,WrapAroundEnding:$0,ZeroCurvatureEnding:pm,ZeroFactor:qz,ZeroSlopeEnding:mm,ZeroStencilOp:BH,createCanvasElement:wB},Symbol.toStringTag,{value:"Module"}));var ot=f_();const Rn=c_(ot),sR=gH({__proto__:null,default:Rn},[ot]);var Aw={exports:{}},Wf={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OP;function UW(){return OP||(OP=1,Wf.ConcurrentRoot=1,Wf.ContinuousEventPriority=8,Wf.DefaultEventPriority=32,Wf.DiscreteEventPriority=2,Wf.IdleEventPriority=268435456,Wf.LegacyRoot=0,Wf.NoEventPriority=0),Wf}var DP;function zW(){return DP||(DP=1,Aw.exports=UW()),Aw.exports}var FE=zW(),ww={exports:{}},Cw={},Rw={exports:{}},Ow={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NP;function BW(){if(NP)return Ow;NP=1;var n=f_();function t(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var e=typeof Object.is=="function"?Object.is:t,i=n.useState,r=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function l(g,y){var v=y(),S=i({inst:{value:v,getSnapshot:y}}),E=S[0].inst,T=S[1];return s(function(){E.value=v,E.getSnapshot=y,c(E)&&T({inst:E})},[g,v,y]),r(function(){return c(E)&&T({inst:E}),g(function(){c(E)&&T({inst:E})})},[g]),a(v),v}function c(g){var y=g.getSnapshot;g=g.value;try{var v=y();return!e(g,v)}catch{return!0}}function f(g,y){return y()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return Ow.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,Ow}var IP;function VW(){return IP||(IP=1,Rw.exports=BW()),Rw.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PP;function FW(){if(PP)return Cw;PP=1;var n=f_(),t=VW();function e(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var i=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,s=n.useRef,a=n.useEffect,l=n.useMemo,c=n.useDebugValue;return Cw.useSyncExternalStoreWithSelector=function(f,m,g,y,v){var S=s(null);if(S.current===null){var E={hasValue:!1,value:null};S.current=E}else E=S.current;S=l(function(){function x(B){if(!R){if(R=!0,D=B,B=y(B),v!==void 0&&E.hasValue){var L=E.value;if(v(L,B))return O=L}return O=B}if(L=O,i(D,B))return L;var U=y(B);return v!==void 0&&v(L,U)?(D=B,L):(D=B,O=U)}var R=!1,D,O,N=g===void 0?null:g;return[function(){return x(m())},N===null?void 0:function(){return x(N())}]},[m,g,y,v]);var T=r(f,S[0],S[1]);return a(function(){E.hasValue=!0,E.value=T},[T]),c(T),T},Cw}var LP;function kW(){return LP||(LP=1,ww.exports=FW()),ww.exports}var HW=kW();const GW=c_(HW),UP=n=>{let t;const e=new Set,i=(f,m)=>{const g=typeof f=="function"?f(t):f;if(!Object.is(g,t)){const y=t;t=m??(typeof g!="object"||g===null)?g:Object.assign({},t,g),e.forEach(v=>v(t,y))}},r=()=>t,l={setState:i,getState:r,getInitialState:()=>c,subscribe:f=>(e.add(f),()=>e.delete(f))},c=t=n(i,r,l);return l},U4=n=>n?UP(n):UP,{useSyncExternalStoreWithSelector:qW}=GW,jW=n=>n;function XW(n,t=jW,e){const i=qW(n.subscribe,n.getState,n.getInitialState,t,e);return Rn.useDebugValue(i),i}const zP=(n,t)=>{const e=U4(n),i=(r,s=t)=>XW(e,r,s);return Object.assign(i,e),i},WW=(n,t)=>n?zP(n,t):zP;var Dw={exports:{}},Nw={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BP;function YW(){return BP||(BP=1,function(n){n.exports=function(t){function e(h,d,b,C){return new hb(h,d,b,C)}function i(){}function r(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)d+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(h){return h===null||typeof h!="object"?null:(h=ci&&h[ci]||h["@@iterator"],typeof h=="function"?h:null)}function a(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===Or?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case cc:return"Fragment";case Tl:return"Portal";case fc:return"Profiler";case Mf:return"StrictMode";case lu:return"Suspense";case Mp:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case hc:return(h.displayName||"Context")+".Provider";case V_:return(h._context.displayName||"Context")+".Consumer";case cg:var d=h.render;return h=h.displayName,h||(h=d.displayName||d.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case kh:return d=h.displayName||null,d!==null?d:a(h.type)||"Memo";case uu:d=h._payload,h=h._init;try{return a(h(d))}catch{}}return null}function l(h){if(dc===void 0)try{throw Error()}catch(b){var d=b.stack.trim().match(/\n( *(at )?)/);dc=d&&d[1]||"",pc=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+dc+h+pc}function c(h,d){if(!h||Hh)return"";Hh=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(d){var we=function(){throw Error()};if(Object.defineProperty(we.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(we,[])}catch(un){var de=un}Reflect.construct(h,[],we)}else{try{we.call()}catch(un){de=un}h.call(we.prototype)}}else{try{throw Error()}catch(un){de=un}(we=h())&&typeof we.catch=="function"&&we.catch(function(){})}}catch(un){if(un&&de&&typeof un.stack=="string")return[un.stack,de.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var z=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");z&&z.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=C.DetermineComponentFrameRoot(),J=H[0],yt=H[1];if(J&&yt){var Ot=J.split(`
`),te=yt.split(`
`);for(z=C=0;C<Ot.length&&!Ot[C].includes("DetermineComponentFrameRoot");)C++;for(;z<te.length&&!te[z].includes("DetermineComponentFrameRoot");)z++;if(C===Ot.length||z===te.length)for(C=Ot.length-1,z=te.length-1;1<=C&&0<=z&&Ot[C]!==te[z];)z--;for(;1<=C&&0<=z;C--,z--)if(Ot[C]!==te[z]){if(C!==1||z!==1)do if(C--,z--,0>z||Ot[C]!==te[z]){var me=`
`+Ot[C].replace(" at new "," at ");return h.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",h.displayName)),me}while(1<=C&&0<=z);break}}}finally{Hh=!1,Error.prepareStackTrace=b}return(b=h?h.displayName||h.name:"")?l(b):""}function f(h){switch(h.tag){case 26:case 27:case 5:return l(h.type);case 16:return l("Lazy");case 13:return l("Suspense");case 19:return l("SuspenseList");case 0:case 15:return h=c(h.type,!1),h;case 11:return h=c(h.type.render,!1),h;case 1:return h=c(h.type,!0),h;default:return""}}function m(h){try{var d="";do d+=f(h),h=h.return;while(h);return d}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function g(h){var d=h,b=h;if(h.alternate)for(;d.return;)d=d.return;else{h=d;do d=h,(d.flags&4098)!==0&&(b=d.return),h=d.return;while(h)}return d.tag===3?b:null}function y(h){if(g(h)!==h)throw Error(r(188))}function v(h){var d=h.alternate;if(!d){if(d=g(h),d===null)throw Error(r(188));return d!==h?null:h}for(var b=h,C=d;;){var z=b.return;if(z===null)break;var H=z.alternate;if(H===null){if(C=z.return,C!==null){b=C;continue}break}if(z.child===H.child){for(H=z.child;H;){if(H===b)return y(z),h;if(H===C)return y(z),d;H=H.sibling}throw Error(r(188))}if(b.return!==C.return)b=z,C=H;else{for(var J=!1,yt=z.child;yt;){if(yt===b){J=!0,b=z,C=H;break}if(yt===C){J=!0,C=z,b=H;break}yt=yt.sibling}if(!J){for(yt=H.child;yt;){if(yt===b){J=!0,b=H,C=z;break}if(yt===C){J=!0,C=H,b=z;break}yt=yt.sibling}if(!J)throw Error(r(189))}}if(b.alternate!==C)throw Error(r(190))}if(b.tag!==3)throw Error(r(188));return b.stateNode.current===b?h:d}function S(h){var d=h.tag;if(d===5||d===26||d===27||d===6)return h;for(h=h.child;h!==null;){if(d=S(h),d!==null)return d;h=h.sibling}return null}function E(h){var d=h.tag;if(d===5||d===26||d===27||d===6)return h;for(h=h.child;h!==null;){if(h.tag!==4&&(d=E(h),d!==null))return d;h=h.sibling}return null}function T(h){return{current:h}}function x(h){0>_c||(h.current=Eg[_c],Eg[_c]=null,_c--)}function R(h,d){_c++,Eg[_c]=h.current,h.current=d}function D(h){return h>>>=0,h===0?32:31-(uv(h)/uA|0)|0}function O(h){var d=h&42;if(d!==0)return d;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function N(h,d){var b=h.pendingLanes;if(b===0)return 0;var C=0,z=h.suspendedLanes,H=h.pingedLanes,J=h.warmLanes;h=h.finishedLanes!==0;var yt=b&134217727;return yt!==0?(b=yt&~z,b!==0?C=O(b):(H&=yt,H!==0?C=O(H):h||(J=yt&~J,J!==0&&(C=O(J))))):(yt=b&~z,yt!==0?C=O(yt):H!==0?C=O(H):h||(J=b&~J,J!==0&&(C=O(J)))),C===0?0:d!==0&&d!==C&&(d&z)===0&&(z=C&-C,J=d&-d,z>=J||z===32&&(J&4194176)!==0)?d:C}function B(h,d){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&d)===0}function L(h,d){switch(h){case 1:case 2:case 4:case 8:return d+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U(){var h=Rp;return Rp<<=1,(Rp&4194176)===0&&(Rp=128),h}function I(){var h=Wh;return Wh<<=1,(Wh&62914560)===0&&(Wh=4194304),h}function w(h){for(var d=[],b=0;31>b;b++)d.push(h);return d}function V(h,d){h.pendingLanes|=d,d!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function G(h,d,b,C,z,H){var J=h.pendingLanes;h.pendingLanes=b,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=b,h.entangledLanes&=b,h.errorRecoveryDisabledLanes&=b,h.shellSuspendCounter=0;var yt=h.entanglements,Ot=h.expirationTimes,te=h.hiddenUpdates;for(b=J&~b;0<b;){var me=31-pr(b),we=1<<me;yt[me]=0,Ot[me]=-1;var de=te[me];if(de!==null)for(te[me]=null,me=0;me<de.length;me++){var un=de[me];un!==null&&(un.lane&=-536870913)}b&=~we}C!==0&&k(h,C,0),H!==0&&z===0&&h.tag!==0&&(h.suspendedLanes|=H&~(J&~d))}function k(h,d,b){h.pendingLanes|=d,h.suspendedLanes&=~d;var C=31-pr(d);h.entangledLanes|=d,h.entanglements[C]=h.entanglements[C]|1073741824|b&4194218}function st(h,d){var b=h.entangledLanes|=d;for(h=h.entanglements;b;){var C=31-pr(b),z=1<<C;z&d|h[C]&d&&(h[C]|=d),b&=~z}}function it(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function Y(h){if(Dr&&typeof Dr.onCommitFiberRoot=="function")try{Dr.onCommitFiberRoot($h,h,void 0,(h.current.flags&128)===128)}catch{}}function Z(h){if(typeof Es=="function"&&Mg(h),Dr&&typeof Dr.setStrictMode=="function")try{Dr.setStrictMode($h,h)}catch{}}function at(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}function ct(h,d){if(typeof h=="object"&&h!==null){var b=Ag.get(h);return b!==void 0?b:(d={value:h,source:d,stack:m(d)},Ag.set(h,d),d)}return{value:h,source:d,stack:m(d)}}function $(h,d){Va[Fa++]=Kh,Va[Fa++]=xc,xc=h,Kh=d}function pt(h,d,b){ca[Ts++]=Cl,ca[Ts++]=Rl,ca[Ts++]=Ko,Ko=h;var C=Cl;h=Rl;var z=32-pr(C)-1;C&=~(1<<z),b+=1;var H=32-pr(d)+z;if(30<H){var J=z-z%5;H=(C&(1<<J)-1).toString(32),C>>=J,z-=J,Cl=1<<32-pr(d)+z|b<<z|C,Rl=H+h}else Cl=1<<H|b<<z|C,Rl=h}function wt(h){h.return!==null&&($(h,1),pt(h,1,0))}function zt(h){for(;h===xc;)xc=Va[--Fa],Va[Fa]=null,Kh=Va[--Fa],Va[Fa]=null;for(;h===Ko;)Ko=ca[--Ts],ca[Ts]=null,Rl=ca[--Ts],ca[Ts]=null,Cl=ca[--Ts],ca[Ts]=null}function nt(h,d){R(pu,d),R(ho,h),R(mr,null),h=F_(d),x(mr),R(mr,h)}function lt(){x(mr),x(ho),x(pu)}function ft(h){h.memoizedState!==null&&R(Dp,h);var d=mr.current,b=db(d,h.type);d!==b&&(R(ho,h),R(mr,b))}function mt(h){ho.current===h&&(x(mr),x(ho)),Dp.current===h&&(x(Dp),Wo?fu._currentValue=wf:fu._currentValue2=wf)}function Dt(h){var d=Error(r(418,""));throw kt(ct(d,h)),Np}function Wt(h,d){if(!ua)throw Error(r(175));Of(h.stateNode,h.type,h.memoizedProps,d,h)||Dt(h)}function Nt(h){for(gr=h.return;gr;)switch(gr.tag){case 3:case 27:Zo=!0;return;case 5:case 13:Zo=!1;return;default:gr=gr.return}}function Jt(h){if(!ua||h!==gr)return!1;if(!qn)return Nt(h),qn=!0,!1;var d=!1;if(is?h.tag!==3&&h.tag!==27&&(h.tag!==5||J_(h.type)&&!hs(h.type,h.memoizedProps))&&(d=!0):h.tag!==3&&(h.tag!==5||J_(h.type)&&!hs(h.type,h.memoizedProps))&&(d=!0),d&&mi&&Dt(h),Nt(h),h.tag===13){if(!ua)throw Error(r(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));mi=jb(h)}else mi=gr?yc(h.stateNode):null;return!0}function Pt(){ua&&(mi=gr=null,qn=!1)}function kt(h){po===null?po=[h]:po.push(h)}function tt(){for(var h=mu,d=Qo=mu=0;d<h;){var b=fa[d];fa[d++]=null;var C=fa[d];fa[d++]=null;var z=fa[d];fa[d++]=null;var H=fa[d];if(fa[d++]=null,C!==null&&z!==null){var J=C.pending;J===null?z.next=z:(z.next=J.next,J.next=z),C.pending=z}H!==0&&rt(b,z,H)}}function se(h,d,b,C){fa[mu++]=h,fa[mu++]=d,fa[mu++]=b,fa[mu++]=C,Qo|=C,h.lanes|=C,h=h.alternate,h!==null&&(h.lanes|=C)}function $t(h,d,b,C){return se(h,d,b,C),_t(h)}function ce(h,d){return se(h,null,null,d),_t(h)}function rt(h,d,b){h.lanes|=b;var C=h.alternate;C!==null&&(C.lanes|=b);for(var z=!1,H=h.return;H!==null;)H.childLanes|=b,C=H.alternate,C!==null&&(C.childLanes|=b),H.tag===22&&(h=H.stateNode,h===null||h._visibility&1||(z=!0)),h=H,H=H.return;z&&d!==null&&h.tag===3&&(H=h.stateNode,z=31-pr(b),H=H.hiddenUpdates,h=H[z],h===null?H[z]=[d]:h.push(d),d.lane=b|536870912)}function _t(h){if(50<Bf)throw Bf=0,pv=null,Error(r(185));for(var d=h.return;d!==null;)h=d,d=h.return;return h.tag===3?h.stateNode:null}function gt(h){h!==bc&&h.next===null&&(bc===null?Ii=bc=h:bc=bc.next=h),yr=!0,wg||(wg=!0,Lt(q))}function W(h,d){if(!Cg&&yr){Cg=!0;do for(var b=!1,C=Ii;C!==null;){if(h!==0){var z=C.pendingLanes;if(z===0)var H=0;else{var J=C.suspendedLanes,yt=C.pingedLanes;H=(1<<31-pr(42|h)+1)-1,H&=z&~(J&~yt),H=H&201326677?H&201326677|1:H?H|2:0}H!==0&&(b=!0,Vt(C,H))}else H=Ln,H=N(C,C===yi?H:0),(H&3)===0||B(C,H)||(b=!0,Vt(C,H));C=C.next}while(b);Cg=!1}}function q(){yr=wg=!1;var h=0;Zh!==0&&(yb()&&(h=Zh),Zh=0);for(var d=Ba(),b=null,C=Ii;C!==null;){var z=C.next,H=ht(C,d);H===0?(C.next=null,b===null?Ii=z:b.next=z,z===null&&(bc=b)):(b=C,(h!==0||(H&3)!==0)&&(yr=!0)),C=z}W(h)}function ht(h,d){for(var b=h.suspendedLanes,C=h.pingedLanes,z=h.expirationTimes,H=h.pendingLanes&-62914561;0<H;){var J=31-pr(H),yt=1<<J,Ot=z[J];Ot===-1?((yt&b)===0||(yt&C)!==0)&&(z[J]=L(yt,d)):Ot<=d&&(h.expiredLanes|=yt),H&=~yt}if(d=yi,b=Ln,b=N(h,h===d?b:0),C=h.callbackNode,b===0||h===d&&fi===2||h.cancelPendingCommit!==null)return C!==null&&C!==null&&$o(C),h.callbackNode=null,h.callbackPriority=0;if((b&3)===0||B(h,b)){if(d=b&-b,d===h.callbackPriority)return d;switch(C!==null&&$o(C),it(b)){case 2:case 8:b=Op;break;case 32:b=Yh;break;case 268435456:b=Nf;break;default:b=Yh}return C=xt.bind(null,h),b=wl(b,C),h.callbackPriority=d,h.callbackNode=b,d}return C!==null&&C!==null&&$o(C),h.callbackPriority=2,h.callbackNode=null,2}function xt(h,d){var b=h.callbackNode;if(ac()&&h.callbackNode!==b)return null;var C=Ln;return C=N(h,h===yi?C:0),C===0?null:(La(h,C,d),ht(h,Ba()),h.callbackNode!=null&&h.callbackNode===b?xt.bind(null,h):null)}function Vt(h,d){if(ac())return null;La(h,d,!0)}function Lt(h){bb?Sb(function(){(Pn&6)!==0?wl(Tg,h):h()}):wl(Tg,h)}function le(){return Zh===0&&(Zh=U()),Zh}function fe(h,d){if(Qh===null){var b=Qh=[];Rg=0,Pi=le(),rs={status:"pending",value:void 0,then:function(C){b.push(C)}}}return Rg++,d.then(Se,Se),d}function Se(){if(--Rg===0&&Qh!==null){rs!==null&&(rs.status="fulfilled");var h=Qh;Qh=null,Pi=0,rs=null;for(var d=0;d<h.length;d++)(0,h[d])()}}function He(h,d){var b=[],C={status:"pending",value:null,reason:null,then:function(z){b.push(z)}};return h.then(function(){C.status="fulfilled",C.value=d;for(var z=0;z<b.length;z++)(0,b[z])(d)},function(z){for(C.status="rejected",C.reason=z,z=0;z<b.length;z++)(0,b[z])(void 0)}),C}function Kt(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xe(h,d){h=h.updateQueue,d.updateQueue===h&&(d.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function De(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Ae(h,d,b){var C=h.updateQueue;if(C===null)return null;if(C=C.shared,(Pn&2)!==0){var z=C.pending;return z===null?d.next=d:(d.next=z.next,z.next=d),C.pending=d,d=_t(h),rt(h,null,b),d}return se(h,C,d,b),_t(h)}function Yt(h,d,b){if(d=d.updateQueue,d!==null&&(d=d.shared,(b&4194176)!==0)){var C=d.lanes;C&=h.pendingLanes,b|=C,d.lanes=b,st(h,b)}}function Oe(h,d){var b=h.updateQueue,C=h.alternate;if(C!==null&&(C=C.updateQueue,b===C)){var z=null,H=null;if(b=b.firstBaseUpdate,b!==null){do{var J={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};H===null?z=H=J:H=H.next=J,b=b.next}while(b!==null);H===null?z=H=d:H=H.next=d}else z=H=d;b={baseState:C.baseState,firstBaseUpdate:z,lastBaseUpdate:H,shared:C.shared,callbacks:C.callbacks},h.updateQueue=b;return}h=b.lastBaseUpdate,h===null?b.firstBaseUpdate=d:h.next=d,b.lastBaseUpdate=d}function Te(){if(Og){var h=rs;if(h!==null)throw h}}function fn(h,d,b,C){Og=!1;var z=h.updateQueue;Ms=!1;var H=z.firstBaseUpdate,J=z.lastBaseUpdate,yt=z.shared.pending;if(yt!==null){z.shared.pending=null;var Ot=yt,te=Ot.next;Ot.next=null,J===null?H=te:J.next=te,J=Ot;var me=h.alternate;me!==null&&(me=me.updateQueue,yt=me.lastBaseUpdate,yt!==J&&(yt===null?me.firstBaseUpdate=te:yt.next=te,me.lastBaseUpdate=Ot))}if(H!==null){var we=z.baseState;J=0,me=te=Ot=null,yt=H;do{var de=yt.lane&-536870913,un=de!==yt.lane;if(un?(Ln&de)===de:(C&de)===de){de!==0&&de===Pi&&(Og=!0),me!==null&&(me=me.next={lane:0,tag:yt.tag,payload:yt.payload,callback:null,next:null});t:{var So=h,rd=yt;de=d;var Vf=b;switch(rd.tag){case 1:if(So=rd.payload,typeof So=="function"){we=So.call(Vf,we,de);break t}we=So;break t;case 3:So.flags=So.flags&-65537|128;case 0:if(So=rd.payload,de=typeof So=="function"?So.call(Vf,we,de):So,de==null)break t;we=hr({},we,de);break t;case 2:Ms=!0}}de=yt.callback,de!==null&&(h.flags|=64,un&&(h.flags|=8192),un=z.callbacks,un===null?z.callbacks=[de]:un.push(de))}else un={lane:de,tag:yt.tag,payload:yt.payload,callback:yt.callback,next:null},me===null?(te=me=un,Ot=we):me=me.next=un,J|=de;if(yt=yt.next,yt===null){if(yt=z.shared.pending,yt===null)break;un=yt,yt=un.next,un.next=null,z.lastBaseUpdate=un,z.shared.pending=null}}while(!0);me===null&&(Ot=we),z.baseState=Ot,z.firstBaseUpdate=te,z.lastBaseUpdate=me,H===null&&(z.shared.lanes=0),xo|=J,h.lanes=J,h.memoizedState=we}}function bt(h,d){if(typeof h!="function")throw Error(r(191,h));h.call(d)}function Me(h,d){var b=h.callbacks;if(b!==null)for(h.callbacks=null,h=0;h<b.length;h++)bt(b[h],d)}function Xt(h,d){if(Fs(h,d))return!0;if(typeof h!="object"||h===null||typeof d!="object"||d===null)return!1;var b=Object.keys(h),C=Object.keys(d);if(b.length!==C.length)return!1;for(C=0;C<b.length;C++){var z=b[C];if(!Jb.call(d,z)||!Fs(h[z],d[z]))return!1}return!0}function ne(h){return h=h.status,h==="fulfilled"||h==="rejected"}function _e(){}function ve(h,d,b){switch(b=h[b],b===void 0?h.push(d):b!==d&&(d.then(_e,_e),d=b),d.status){case"fulfilled":return d.value;case"rejected":throw h=d.reason,h===Ip?Error(r(483)):h;default:if(typeof d.status=="string")d.then(_e,_e);else{if(h=yi,h!==null&&100<h.shellSuspendCounter)throw Error(r(482));h=d,h.status="pending",h.then(function(C){if(d.status==="pending"){var z=d;z.status="fulfilled",z.value=C}},function(C){if(d.status==="pending"){var z=d;z.status="rejected",z.reason=C}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw h=d.reason,h===Ip?Error(r(483)):h}throw As=d,Ip}}function je(){if(As===null)throw Error(r(459));var h=As;return As=null,h}function Yn(h){var d=ws;return ws+=1,If===null&&(If=[]),ve(If,h,d)}function Ci(h,d){d=d.props.ref,h.ref=d!==void 0?d:null}function yn(h,d){throw d.$$typeof===B_?Error(r(525)):(h=Object.prototype.toString.call(d),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":h)))}function kr(h){var d=h._init;return d(h._payload)}function $n(h){function d(Ft,Ct){if(h){var qt=Ft.deletions;qt===null?(Ft.deletions=[Ct],Ft.flags|=16):qt.push(Ct)}}function b(Ft,Ct){if(!h)return null;for(;Ct!==null;)d(Ft,Ct),Ct=Ct.sibling;return null}function C(Ft){for(var Ct=new Map;Ft!==null;)Ft.key!==null?Ct.set(Ft.key,Ft):Ct.set(Ft.index,Ft),Ft=Ft.sibling;return Ct}function z(Ft,Ct){return Ft=su(Ft,Ct),Ft.index=0,Ft.sibling=null,Ft}function H(Ft,Ct,qt){return Ft.index=qt,h?(qt=Ft.alternate,qt!==null?(qt=qt.index,qt<Ct?(Ft.flags|=33554434,Ct):qt):(Ft.flags|=33554434,Ct)):(Ft.flags|=1048576,Ct)}function J(Ft){return h&&Ft.alternate===null&&(Ft.flags|=33554434),Ft}function yt(Ft,Ct,qt,he){return Ct===null||Ct.tag!==6?(Ct=Tp(qt,Ft.mode,he),Ct.return=Ft,Ct):(Ct=z(Ct,qt),Ct.return=Ft,Ct)}function Ot(Ft,Ct,qt,he){var Be=qt.type;return Be===cc?me(Ft,Ct,qt.props.children,he,qt.key):Ct!==null&&(Ct.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===uu&&kr(Be)===Ct.type)?(Ct=z(Ct,qt.props),Ci(Ct,qt),Ct.return=Ft,Ct):(Ct=Tf(qt.type,qt.key,qt.props,null,Ft.mode,he),Ci(Ct,qt),Ct.return=Ft,Ct)}function te(Ft,Ct,qt,he){return Ct===null||Ct.tag!==4||Ct.stateNode.containerInfo!==qt.containerInfo||Ct.stateNode.implementation!==qt.implementation?(Ct=la(qt,Ft.mode,he),Ct.return=Ft,Ct):(Ct=z(Ct,qt.children||[]),Ct.return=Ft,Ct)}function me(Ft,Ct,qt,he,Be){return Ct===null||Ct.tag!==7?(Ct=lc(qt,Ft.mode,he,Be),Ct.return=Ft,Ct):(Ct=z(Ct,qt),Ct.return=Ft,Ct)}function we(Ft,Ct,qt){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint")return Ct=Tp(""+Ct,Ft.mode,qt),Ct.return=Ft,Ct;if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case uc:return qt=Tf(Ct.type,Ct.key,Ct.props,null,Ft.mode,qt),Ci(qt,Ct),qt.return=Ft,qt;case Tl:return Ct=la(Ct,Ft.mode,qt),Ct.return=Ft,Ct;case uu:var he=Ct._init;return Ct=he(Ct._payload),we(Ft,Ct,qt)}if(mc(Ct)||s(Ct))return Ct=lc(Ct,Ft.mode,qt,null),Ct.return=Ft,Ct;if(typeof Ct.then=="function")return we(Ft,Yn(Ct),qt);if(Ct.$$typeof===hc)return we(Ft,jt(Ft,Ct),qt);yn(Ft,Ct)}return null}function de(Ft,Ct,qt,he){var Be=Ct!==null?Ct.key:null;if(typeof qt=="string"&&qt!==""||typeof qt=="number"||typeof qt=="bigint")return Be!==null?null:yt(Ft,Ct,""+qt,he);if(typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case uc:return qt.key===Be?Ot(Ft,Ct,qt,he):null;case Tl:return qt.key===Be?te(Ft,Ct,qt,he):null;case uu:return Be=qt._init,qt=Be(qt._payload),de(Ft,Ct,qt,he)}if(mc(qt)||s(qt))return Be!==null?null:me(Ft,Ct,qt,he,null);if(typeof qt.then=="function")return de(Ft,Ct,Yn(qt),he);if(qt.$$typeof===hc)return de(Ft,Ct,jt(Ft,qt),he);yn(Ft,qt)}return null}function un(Ft,Ct,qt,he,Be){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return Ft=Ft.get(qt)||null,yt(Ct,Ft,""+he,Be);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case uc:return Ft=Ft.get(he.key===null?qt:he.key)||null,Ot(Ct,Ft,he,Be);case Tl:return Ft=Ft.get(he.key===null?qt:he.key)||null,te(Ct,Ft,he,Be);case uu:var _i=he._init;return he=_i(he._payload),un(Ft,Ct,qt,he,Be)}if(mc(he)||s(he))return Ft=Ft.get(qt)||null,me(Ct,Ft,he,Be,null);if(typeof he.then=="function")return un(Ft,Ct,qt,Yn(he),Be);if(he.$$typeof===hc)return un(Ft,Ct,qt,jt(Ct,he),Be);yn(Ct,he)}return null}function So(Ft,Ct,qt,he){for(var Be=null,_i=null,Ze=Ct,Dn=Ct=0,Mi=null;Ze!==null&&Dn<qt.length;Dn++){Ze.index>Dn?(Mi=Ze,Ze=null):Mi=Ze.sibling;var Vn=de(Ft,Ze,qt[Dn],he);if(Vn===null){Ze===null&&(Ze=Mi);break}h&&Ze&&Vn.alternate===null&&d(Ft,Ze),Ct=H(Vn,Ct,Dn),_i===null?Be=Vn:_i.sibling=Vn,_i=Vn,Ze=Mi}if(Dn===qt.length)return b(Ft,Ze),qn&&$(Ft,Dn),Be;if(Ze===null){for(;Dn<qt.length;Dn++)Ze=we(Ft,qt[Dn],he),Ze!==null&&(Ct=H(Ze,Ct,Dn),_i===null?Be=Ze:_i.sibling=Ze,_i=Ze);return qn&&$(Ft,Dn),Be}for(Ze=C(Ze);Dn<qt.length;Dn++)Mi=un(Ze,Ft,Dn,qt[Dn],he),Mi!==null&&(h&&Mi.alternate!==null&&Ze.delete(Mi.key===null?Dn:Mi.key),Ct=H(Mi,Ct,Dn),_i===null?Be=Mi:_i.sibling=Mi,_i=Mi);return h&&Ze.forEach(function(Oc){return d(Ft,Oc)}),qn&&$(Ft,Dn),Be}function rd(Ft,Ct,qt,he){if(qt==null)throw Error(r(151));for(var Be=null,_i=null,Ze=Ct,Dn=Ct=0,Mi=null,Vn=qt.next();Ze!==null&&!Vn.done;Dn++,Vn=qt.next()){Ze.index>Dn?(Mi=Ze,Ze=null):Mi=Ze.sibling;var Oc=de(Ft,Ze,Vn.value,he);if(Oc===null){Ze===null&&(Ze=Mi);break}h&&Ze&&Oc.alternate===null&&d(Ft,Ze),Ct=H(Oc,Ct,Dn),_i===null?Be=Oc:_i.sibling=Oc,_i=Oc,Ze=Mi}if(Vn.done)return b(Ft,Ze),qn&&$(Ft,Dn),Be;if(Ze===null){for(;!Vn.done;Dn++,Vn=qt.next())Vn=we(Ft,Vn.value,he),Vn!==null&&(Ct=H(Vn,Ct,Dn),_i===null?Be=Vn:_i.sibling=Vn,_i=Vn);return qn&&$(Ft,Dn),Be}for(Ze=C(Ze);!Vn.done;Dn++,Vn=qt.next())Vn=un(Ze,Ft,Dn,Vn.value,he),Vn!==null&&(h&&Vn.alternate!==null&&Ze.delete(Vn.key===null?Dn:Vn.key),Ct=H(Vn,Ct,Dn),_i===null?Be=Vn:_i.sibling=Vn,_i=Vn);return h&&Ze.forEach(function(eS){return d(Ft,eS)}),qn&&$(Ft,Dn),Be}function Vf(Ft,Ct,qt,he){if(typeof qt=="object"&&qt!==null&&qt.type===cc&&qt.key===null&&(qt=qt.props.children),typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case uc:t:{for(var Be=qt.key;Ct!==null;){if(Ct.key===Be){if(Be=qt.type,Be===cc){if(Ct.tag===7){b(Ft,Ct.sibling),he=z(Ct,qt.props.children),he.return=Ft,Ft=he;break t}}else if(Ct.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===uu&&kr(Be)===Ct.type){b(Ft,Ct.sibling),he=z(Ct,qt.props),Ci(he,qt),he.return=Ft,Ft=he;break t}b(Ft,Ct);break}else d(Ft,Ct);Ct=Ct.sibling}qt.type===cc?(he=lc(qt.props.children,Ft.mode,he,qt.key),he.return=Ft,Ft=he):(he=Tf(qt.type,qt.key,qt.props,null,Ft.mode,he),Ci(he,qt),he.return=Ft,Ft=he)}return J(Ft);case Tl:t:{for(Be=qt.key;Ct!==null;){if(Ct.key===Be)if(Ct.tag===4&&Ct.stateNode.containerInfo===qt.containerInfo&&Ct.stateNode.implementation===qt.implementation){b(Ft,Ct.sibling),he=z(Ct,qt.children||[]),he.return=Ft,Ft=he;break t}else{b(Ft,Ct);break}else d(Ft,Ct);Ct=Ct.sibling}he=la(qt,Ft.mode,he),he.return=Ft,Ft=he}return J(Ft);case uu:return Be=qt._init,qt=Be(qt._payload),Vf(Ft,Ct,qt,he)}if(mc(qt))return So(Ft,Ct,qt,he);if(s(qt)){if(Be=s(qt),typeof Be!="function")throw Error(r(150));return qt=Be.call(qt),rd(Ft,Ct,qt,he)}if(typeof qt.then=="function")return Vf(Ft,Ct,Yn(qt),he);if(qt.$$typeof===hc)return Vf(Ft,Ct,jt(Ft,qt),he);yn(Ft,qt)}return typeof qt=="string"&&qt!==""||typeof qt=="number"||typeof qt=="bigint"?(qt=""+qt,Ct!==null&&Ct.tag===6?(b(Ft,Ct.sibling),he=z(Ct,qt),he.return=Ft,Ft=he):(b(Ft,Ct),he=Tp(qt,Ft.mode,he),he.return=Ft,Ft=he),J(Ft)):b(Ft,Ct)}return function(Ft,Ct,qt,he){try{ws=0;var Be=Vf(Ft,Ct,qt,he);return If=null,Be}catch(Ze){if(Ze===Ip)throw Ze;var _i=e(29,Ze,null,Ft.mode);return _i.lanes=he,_i.return=Ft,_i}finally{}}}function Hu(h,d){h=nl,R(tl,h),R(Jo,d),nl=h|d.baseLanes}function Da(){R(tl,nl),R(Jo,Jo.current)}function Qr(){nl=tl.current,x(Jo),x(tl)}function Ls(h){var d=h.alternate;R(Oi,Oi.current&1),R(ha,h),mo===null&&(d===null||Jo.current!==null||d.memoizedState!==null)&&(mo=h)}function Gu(h){if(h.tag===22){if(R(Oi,Oi.current),R(ha,h),mo===null){var d=h.alternate;d!==null&&d.memoizedState!==null&&(mo=h)}}else Jr()}function Jr(){R(Oi,Oi.current),R(ha,ha.current)}function Ki(h){x(ha),mo===h&&(mo=null),x(Oi)}function Gi(h){for(var d=h;d!==null;){if(d.tag===13){var b=d.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||Cf(b)||Cp(b)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function an(){throw Error(r(321))}function ea(h,d){if(d===null)return!1;for(var b=0;b<d.length&&b<h.length;b++)if(!Fs(h[b],d[b]))return!1;return!0}function to(h,d,b,C,z,H){return gu=H,on=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Je.H=h===null||h.memoizedState===null?vu:Hs,Ec=!1,H=b(C,z),Ec=!1,Pf&&(H=Na(d,b,C,z)),Xl(h),H}function Xl(h){Je.H=_r;var d=Kn!==null&&Kn.next!==null;if(gu=0,Wi=Kn=on=null,yu=!1,Jh=0,_u=null,d)throw Error(r(300));h===null||Nr||(h=h.dependencies,h!==null&&j(h)&&(Nr=!0))}function Na(h,d,b,C){on=h;var z=0;do{if(Pf&&(_u=null),Jh=0,Pf=!1,25<=z)throw Error(r(301));if(z+=1,Wi=Kn=null,h.updateQueue!=null){var H=h.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}Je.H=Mc,H=d(b,C)}while(Pf);return H}function uf(){var h=Je.H,d=h.useState()[0];return d=typeof d.then=="function"?Ut(d):d,h=h.useState()[0],(Kn!==null?Kn.memoizedState:null)!==h&&(on.flags|=1024),d}function eo(){var h=Tc!==0;return Tc=0,h}function Fo(h,d,b){d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~b}function Us(h){if(yu){for(h=h.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}yu=!1}gu=0,Wi=Kn=on=null,Pf=!1,Jh=Tc=0,_u=null}function K(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wi===null?on.memoizedState=Wi=h:Wi=Wi.next=h,Wi}function vt(){if(Kn===null){var h=on.alternate;h=h!==null?h.memoizedState:null}else h=Kn.next;var d=Wi===null?on.memoizedState:Wi.next;if(d!==null)Wi=d,Kn=h;else{if(h===null)throw on.alternate===null?Error(r(467)):Error(r(310));Kn=h,h={memoizedState:Kn.memoizedState,baseState:Kn.baseState,baseQueue:Kn.baseQueue,queue:Kn.queue,next:null},Wi===null?on.memoizedState=Wi=h:Wi=Wi.next=h}return Wi}function Ut(h){var d=Jh;return Jh+=1,_u===null&&(_u=[]),h=ve(_u,h,d),d=on,(Wi===null?d.memoizedState:Wi.next)===null&&(d=d.alternate,Je.H=d===null||d.memoizedState===null?vu:Hs),h}function It(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return Ut(h);if(h.$$typeof===hc)return Tt(h)}throw Error(r(438,String(h)))}function At(h){var d=null,b=on.updateQueue;if(b!==null&&(d=b.memoCache),d==null){var C=on.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(d={data:C.data.map(function(z){return z.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),b===null&&(b=cv(),on.updateQueue=b),b.memoCache=d,b=d.data[d.index],b===void 0)for(b=d.data[d.index]=Array(h),C=0;C<h;C++)b[C]=Tn;return d.index++,b}function ae(h,d){return typeof d=="function"?d(h):d}function ge(h){var d=vt();return be(d,Kn,h)}function be(h,d,b){var C=h.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=b;var z=h.baseQueue,H=C.pending;if(H!==null){if(z!==null){var J=z.next;z.next=H.next,H.next=J}d.baseQueue=z=H,C.pending=null}if(H=h.baseState,z===null)h.memoizedState=H;else{d=z.next;var yt=J=null,Ot=null,te=d,me=!1;do{var we=te.lane&-536870913;if(we!==te.lane?(Ln&we)===we:(gu&we)===we){var de=te.revertLane;if(de===0)Ot!==null&&(Ot=Ot.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),we===Pi&&(me=!0);else if((gu&de)===de){te=te.next,de===Pi&&(me=!0);continue}else we={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},Ot===null?(yt=Ot=we,J=H):Ot=Ot.next=we,on.lanes|=de,xo|=de;we=te.action,Ec&&b(H,we),H=te.hasEagerState?te.eagerState:b(H,we)}else de={lane:we,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},Ot===null?(yt=Ot=de,J=H):Ot=Ot.next=de,on.lanes|=we,xo|=we;te=te.next}while(te!==null&&te!==d);if(Ot===null?J=H:Ot.next=yt,!Fs(H,h.memoizedState)&&(Nr=!0,me&&(b=rs,b!==null)))throw b;h.memoizedState=H,h.baseState=J,h.baseQueue=Ot,C.lastRenderedState=H}return z===null&&(C.lanes=0),[h.memoizedState,C.dispatch]}function Ee(h){var d=vt(),b=d.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=h;var C=b.dispatch,z=b.pending,H=d.memoizedState;if(z!==null){b.pending=null;var J=z=z.next;do H=h(H,J.action),J=J.next;while(J!==z);Fs(H,d.memoizedState)||(Nr=!0),d.memoizedState=H,d.baseQueue===null&&(d.baseState=H),b.lastRenderedState=H}return[H,C]}function Ye(h,d,b){var C=on,z=vt(),H=qn;if(H){if(b===void 0)throw Error(r(407));b=b()}else b=d();var J=!Fs((Kn||z).memoizedState,b);if(J&&(z.memoizedState=b,Nr=!0),z=z.queue,cf(Sn.bind(null,C,z,h),[h]),z.getSnapshot!==d||J||Wi!==null&&Wi.memoizedState.tag&1){if(C.flags|=2048,cs(9,Ue.bind(null,C,z,b,d),{destroy:void 0},null),yi===null)throw Error(r(349));H||(gu&60)!==0||Xe(C,d,b)}return b}function Xe(h,d,b){h.flags|=16384,h={getSnapshot:d,value:b},d=on.updateQueue,d===null?(d=cv(),on.updateQueue=d,d.stores=[h]):(b=d.stores,b===null?d.stores=[h]:b.push(h))}function Ue(h,d,b,C){d.value=b,d.getSnapshot=C,vn(d)&&si(h)}function Sn(h,d,b){return b(function(){vn(d)&&si(h)})}function vn(h){var d=h.getSnapshot;h=h.value;try{var b=d();return!Fs(h,b)}catch{return!0}}function si(h){var d=ce(h,2);d!==null&&Ri(d,h,2)}function Nn(h){var d=K();if(typeof h=="function"){var b=h;if(h=b(),Ec){Z(!0);try{b()}finally{Z(!1)}}}return d.memoizedState=d.baseState=h,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ae,lastRenderedState:h},d}function Ke(h,d,b,C){return h.baseState=b,be(h,Kn,typeof C=="function"?C:ae)}function Fe(h,d,b,C,z){if($u(h))throw Error(r(485));if(h=d.action,h!==null){var H={payload:z,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(J){H.listeners.push(J)}};Je.T!==null?b(!0):H.isTransition=!1,C(H),b=d.pending,b===null?(H.next=d.pending=H,er(d,H)):(H.next=b.next,d.pending=b.next=H)}}function er(h,d){var b=d.action,C=d.payload,z=h.state;if(d.isTransition){var H=Je.T,J={};Je.T=J;try{var yt=b(z,C),Ot=Je.S;Ot!==null&&Ot(J,yt),En(h,d,yt)}catch(te){zs(h,d,te)}finally{Je.T=H}}else try{H=b(z,C),En(h,d,H)}catch(te){zs(h,d,te)}}function En(h,d,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(C){ts(h,d,C)},function(C){return zs(h,d,C)}):ts(h,d,b)}function ts(h,d,b){d.status="fulfilled",d.value=b,qi(d),h.state=b,d=h.pending,d!==null&&(b=d.next,b===d?h.pending=null:(b=b.next,d.next=b,er(h,b)))}function zs(h,d,b){var C=h.pending;if(h.pending=null,C!==null){C=C.next;do d.status="rejected",d.reason=b,qi(d),d=d.next;while(d!==C)}h.action=null}function qi(h){h=h.listeners;for(var d=0;d<h.length;d++)(0,h[d])()}function ui(h,d){return d}function kn(h,d){if(qn){var b=yi.formState;if(b!==null){t:{var C=on;if(qn){if(mi){var z=kb(mi,Zo);if(z){mi=yc(z),C=Al(z);break t}}Dt(C)}C=!1}C&&(d=b[0])}}b=K(),b.memoizedState=b.baseState=d,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:d},b.queue=C,b=Ah.bind(null,on,C),C.dispatch=b,C=Nn(!1);var H=no.bind(null,on,!1,C.queue);return C=K(),z={state:d,dispatch:null,action:h,pending:null},C.queue=z,b=Fe.bind(null,on,z,H,b),z.dispatch=b,C.memoizedState=h,[d,b,!1]}function lr(h){var d=vt();return Ar(d,Kn,h)}function Ar(h,d,b){d=be(h,d,ui)[0],h=ge(ae)[0],d=typeof d=="object"&&d!==null&&typeof d.then=="function"?Ut(d):d;var C=vt(),z=C.queue,H=z.dispatch;return b!==C.memoizedState&&(on.flags|=2048,cs(9,Qe.bind(null,z,b),{destroy:void 0},null)),[d,H,h]}function Qe(h,d){h.action=d}function Zi(h){var d=vt(),b=Kn;if(b!==null)return Ar(d,b,h);vt(),d=d.memoizedState,b=vt();var C=b.queue.dispatch;return b.memoizedState=h,[d,C,!1]}function cs(h,d,b,C){return h={tag:h,create:d,inst:b,deps:C,next:null},d=on.updateQueue,d===null&&(d=cv(),on.updateQueue=d),b=d.lastEffect,b===null?d.lastEffect=h.next=h:(C=b.next,b.next=h,h.next=C,d.lastEffect=h),h}function ur(){return vt().memoizedState}function Th(h,d,b,C){var z=K();on.flags|=h,z.memoizedState=cs(1|d,b,{destroy:void 0},C===void 0?null:C)}function qu(h,d,b,C){var z=vt();C=C===void 0?null:C;var H=z.memoizedState.inst;Kn!==null&&C!==null&&ea(C,Kn.memoizedState.deps)?z.memoizedState=cs(d,b,H,C):(on.flags|=h,z.memoizedState=cs(1|d,b,H,C))}function ep(h,d){Th(8390656,8,h,d)}function cf(h,d){qu(2048,8,h,d)}function Km(h,d){return qu(4,2,h,d)}function Zm(h,d){return qu(4,4,h,d)}function ko(h,d){if(typeof d=="function"){h=h();var b=d(h);return function(){typeof b=="function"?b():d(null)}}if(d!=null)return h=h(),d.current=h,function(){d.current=null}}function Ia(h,d,b){b=b!=null?b.concat([h]):null,qu(4,4,ko.bind(null,d,h),b)}function ju(){}function gl(h,d){var b=vt();d=d===void 0?null:d;var C=b.memoizedState;return d!==null&&ea(d,C[1])?C[0]:(b.memoizedState=[h,d],h)}function yl(h,d){var b=vt();d=d===void 0?null:d;var C=b.memoizedState;if(d!==null&&ea(d,C[1]))return C[0];if(C=h(),Ec){Z(!0);try{h()}finally{Z(!1)}}return b.memoizedState=[C,d],C}function Ho(h,d,b){return b===void 0||(gu&1073741824)!==0?h.memoizedState=d:(h.memoizedState=b,h=yp(),on.lanes|=h,xo|=h,b)}function Mh(h,d,b,C){return Fs(b,d)?b:Jo.current!==null?(h=Ho(h,b,C),Fs(h,d)||(Nr=!0),h):(gu&42)===0?(Nr=!0,h.memoizedState=b):(h=yp(),on.lanes|=h,xo|=h,d)}function np(h,d,b,C,z){var H=gc();Vs(H!==0&&8>H?H:8);var J=Je.T,yt={};Je.T=yt,no(h,!1,d,b);try{var Ot=z(),te=Je.S;if(te!==null&&te(yt,Ot),Ot!==null&&typeof Ot=="object"&&typeof Ot.then=="function"){var me=He(Ot,C);ia(h,d,me,bs(h))}else ia(h,d,C,bs(h))}catch(we){ia(h,d,{then:function(){},status:"rejected",reason:we},bs())}finally{Vs(H),Je.T=J}}function Xu(h){var d=h.memoizedState;if(d!==null)return d;d={memoizedState:wf,baseState:wf,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ae,lastRenderedState:wf},next:null};var b={};return d.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ae,lastRenderedState:b},next:null},h.memoizedState=d,h=h.alternate,h!==null&&(h.memoizedState=d),d}function na(){return Tt(fu)}function Wu(){return vt().memoizedState}function Go(){return vt().memoizedState}function Yu(h){for(var d=h.return;d!==null;){switch(d.tag){case 24:case 3:var b=bs();h=De(b);var C=Ae(d,h,b);C!==null&&(Ri(C,d,b),Yt(C,d,b)),d={cache:zn()},h.payload=d;return}d=d.return}}function Wl(h,d,b){var C=bs();b={lane:C,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},$u(h)?Hr(d,b):(b=$t(h,d,b,C),b!==null&&(Ri(b,h,C),ei(b,d,C)))}function Ah(h,d,b){var C=bs();ia(h,d,b,C)}function ia(h,d,b,C){var z={lane:C,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if($u(h))Hr(d,z);else{var H=h.alternate;if(h.lanes===0&&(H===null||H.lanes===0)&&(H=d.lastRenderedReducer,H!==null))try{var J=d.lastRenderedState,yt=H(J,b);if(z.hasEagerState=!0,z.eagerState=yt,Fs(yt,J))return se(h,d,z,0),yi===null&&tt(),!1}catch{}finally{}if(b=$t(h,d,z,C),b!==null)return Ri(b,h,C),ei(b,d,C),!0}return!1}function no(h,d,b,C){if(C={lane:2,revertLane:le(),action:C,hasEagerState:!1,eagerState:null,next:null},$u(h)){if(d)throw Error(r(479))}else d=$t(h,b,C,2),d!==null&&Ri(d,h,2)}function $u(h){var d=h.alternate;return h===on||d!==null&&d===on}function Hr(h,d){Pf=yu=!0;var b=h.pending;b===null?d.next=d:(d.next=b.next,b.next=d),h.pending=d}function ei(h,d,b){if((b&4194176)!==0){var C=d.lanes;C&=h.pendingLanes,b|=C,d.lanes=b,st(h,b)}}function Ku(h,d,b,C){d=h.memoizedState,b=b(C,d),b=b==null?d:hr({},d,b),h.memoizedState=b,h.lanes===0&&(h.updateQueue.baseState=b)}function Zu(h,d,b,C,z,H,J){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(C,H,J):d.prototype&&d.prototype.isPureReactComponent?!Xt(b,C)||!Xt(z,H):!0}function ip(h,d,b,C){h=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(b,C),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(b,C),d.state!==h&&td.enqueueReplaceState(d,d.state,null)}function io(h,d){var b=d;if("ref"in d){b={};for(var C in d)C!=="ref"&&(b[C]=d[C])}if(h=h.defaultProps){b===d&&(b=hr({},b));for(var z in h)b[z]===void 0&&(b[z]=h[z])}return b}function Yl(h,d){try{var b=h.onUncaughtError;b(d.value,{componentStack:d.stack})}catch(C){setTimeout(function(){throw C})}}function qo(h,d,b){try{var C=h.onCaughtError;C(b.value,{componentStack:b.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(z){setTimeout(function(){throw z})}}function $l(h,d,b){return b=De(b),b.tag=3,b.payload={element:null},b.callback=function(){Yl(h,d)},b}function Pa(h){return h=De(h),h.tag=3,h}function rp(h,d,b,C){var z=b.type.getDerivedStateFromError;if(typeof z=="function"){var H=C.value;h.payload=function(){return z(H)},h.callback=function(){qo(d,b,C)}}var J=b.stateNode;J!==null&&typeof J.componentDidCatch=="function"&&(h.callback=function(){qo(d,b,C),typeof z!="function"&&(Il===null?Il=new Set([this]):Il.add(this));var yt=C.stack;this.componentDidCatch(C.value,{componentStack:yt!==null?yt:""})})}function A_(h,d,b,C,z){if(b.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(d=b.alternate,d!==null&&F(d,b,z,!0),b=ha.current,b!==null){switch(b.tag){case 13:return mo===null?fo():b.alternate===null&&Yi===0&&(Yi=3),b.flags&=-257,b.flags|=65536,b.lanes=z,C===ks?b.flags|=16384:(d=b.updateQueue,d===null?b.updateQueue=new Set([C]):d.add(C),oc(h,C,z)),!1;case 22:return b.flags|=65536,C===ks?b.flags|=16384:(d=b.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([C])},b.updateQueue=d):(b=d.retryQueue,b===null?d.retryQueue=new Set([C]):b.add(C)),oc(h,C,z)),!1}throw Error(r(435,b.tag))}return oc(h,C,z),fo(),!1}if(qn)return d=ha.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=z,C!==Np&&(h=Error(r(422),{cause:C}),kt(ct(h,b)))):(C!==Np&&(d=Error(r(423),{cause:C}),kt(ct(d,b))),h=h.current.alternate,h.flags|=65536,z&=-z,h.lanes|=z,C=ct(C,b),z=$l(h.stateNode,C,z),Oe(h,z),Yi!==4&&(Yi=2)),!1;var H=Error(r(520),{cause:C});if(H=ct(H,b),nd===null?nd=[H]:nd.push(H),Yi!==4&&(Yi=2),d===null)return!0;C=ct(C,b),b=d;do{switch(b.tag){case 3:return b.flags|=65536,h=z&-z,b.lanes|=h,h=$l(b.stateNode,C,h),Oe(b,h),!1;case 1:if(d=b.type,H=b.stateNode,(b.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Il===null||!Il.has(H))))return b.flags|=65536,z&=-z,b.lanes|=z,z=Pa(z),rp(z,h,b,C),Oe(b,z),!1}b=b.return}while(b!==null);return!1}function Qi(h,d,b,C){d.child=h===null?Ol(d,null,b,C):Sc(d,h.child,b,C)}function ff(h,d,b,C,z){b=b.render;var H=d.ref;if("ref"in C){var J={};for(var yt in C)yt!=="ref"&&(J[yt]=C[yt])}else J=C;return et(d),C=to(h,d,b,J,H,z),yt=eo(),h!==null&&!Nr?(Fo(h,d,z),ro(h,d,z)):(qn&&yt&&wt(d),d.flags|=1,Qi(h,d,C,z),d.child)}function wh(h,d,b,C,z){if(h===null){var H=b.type;return typeof H=="function"&&!ru(H)&&H.defaultProps===void 0&&b.compare===null?(d.tag=15,d.type=H,hf(h,d,H,C,z)):(h=Tf(b.type,null,C,d,d.mode,z),h.ref=d.ref,h.return=d,d.child=h)}if(H=h.child,!Oh(h,z)){var J=H.memoizedProps;if(b=b.compare,b=b!==null?b:Xt,b(J,C)&&h.ref===d.ref)return ro(h,d,z)}return d.flags|=1,h=su(H,C),h.ref=d.ref,h.return=d,d.child=h}function hf(h,d,b,C,z){if(h!==null){var H=h.memoizedProps;if(Xt(H,C)&&h.ref===d.ref)if(Nr=!1,d.pendingProps=C=H,Oh(h,z))(h.flags&131072)!==0&&(Nr=!0);else return d.lanes=h.lanes,ro(h,d,z)}return mf(h,d,b,C,z)}function sp(h,d,b){var C=d.pendingProps,z=C.children,H=(d.stateNode._pendingVisibility&2)!==0,J=h!==null?h.memoizedState:null;if(pf(h,d),C.mode==="hidden"||H){if((d.flags&128)!==0){if(C=J!==null?J.baseLanes|b:b,h!==null){for(z=d.child=h.child,H=0;z!==null;)H=H|z.lanes|z.childLanes,z=z.sibling;d.childLanes=H&~C}else d.childLanes=0,d.child=null;return df(h,d,C,b)}if((b&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},h!==null&&cr(d,J!==null?J.cachePool:null),J!==null?Hu(d,J):Da(),Gu(d);else return d.lanes=d.childLanes=536870912,df(h,d,J!==null?J.baseLanes|b:b,b)}else J!==null?(cr(d,J.cachePool),Hu(d,J),Jr(),d.memoizedState=null):(h!==null&&cr(d,null),Da(),Jr());return Qi(h,d,z,b),d.child}function df(h,d,b,C){var z=Bn();return z=z===null?null:{parent:Wo?ir._currentValue:ir._currentValue2,pool:z},d.memoizedState={baseLanes:b,cachePool:z},h!==null&&cr(d,null),Da(),Gu(d),h!==null&&F(h,d,C,!0),null}function pf(h,d){var b=d.ref;if(b===null)h!==null&&h.ref!==null&&(d.flags|=2097664);else{if(typeof b!="function"&&typeof b!="object")throw Error(r(284));(h===null||h.ref!==b)&&(d.flags|=2097664)}}function mf(h,d,b,C,z){return et(d),b=to(h,d,b,C,void 0,z),C=eo(),h!==null&&!Nr?(Fo(h,d,z),ro(h,d,z)):(qn&&C&&wt(d),d.flags|=1,Qi(h,d,b,z),d.child)}function Qu(h,d,b,C,z,H){return et(d),d.updateQueue=null,b=Na(d,C,b,z),Xl(h),C=eo(),h!==null&&!Nr?(Fo(h,d,H),ro(h,d,H)):(qn&&C&&wt(d),d.flags|=1,Qi(h,d,b,H),d.child)}function ap(h,d,b,C,z){if(et(d),d.stateNode===null){var H=Df,J=b.contextType;typeof J=="object"&&J!==null&&(H=Tt(J)),H=new b(C,H),d.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=td,d.stateNode=H,H._reactInternals=d,H=d.stateNode,H.props=C,H.state=d.memoizedState,H.refs={},Kt(d),J=b.contextType,H.context=typeof J=="object"&&J!==null?Tt(J):Df,H.state=d.memoizedState,J=b.getDerivedStateFromProps,typeof J=="function"&&(Ku(d,b,J,C),H.state=d.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(J=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),J!==H.state&&td.enqueueReplaceState(H,H.state,null),fn(d,C,H,z),Te(),H.state=d.memoizedState),typeof H.componentDidMount=="function"&&(d.flags|=4194308),C=!0}else if(h===null){H=d.stateNode;var yt=d.memoizedProps,Ot=io(b,yt);H.props=Ot;var te=H.context,me=b.contextType;J=Df,typeof me=="object"&&me!==null&&(J=Tt(me));var we=b.getDerivedStateFromProps;me=typeof we=="function"||typeof H.getSnapshotBeforeUpdate=="function",yt=d.pendingProps!==yt,me||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(yt||te!==J)&&ip(d,H,C,J),Ms=!1;var de=d.memoizedState;H.state=de,fn(d,C,H,z),Te(),te=d.memoizedState,yt||de!==te||Ms?(typeof we=="function"&&(Ku(d,b,we,C),te=d.memoizedState),(Ot=Ms||Zu(d,b,Ot,C,de,te,J))?(me||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(d.flags|=4194308)):(typeof H.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=C,d.memoizedState=te),H.props=C,H.state=te,H.context=J,C=Ot):(typeof H.componentDidMount=="function"&&(d.flags|=4194308),C=!1)}else{H=d.stateNode,xe(h,d),J=d.memoizedProps,me=io(b,J),H.props=me,we=d.pendingProps,de=H.context,te=b.contextType,Ot=Df,typeof te=="object"&&te!==null&&(Ot=Tt(te)),yt=b.getDerivedStateFromProps,(te=typeof yt=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(J!==we||de!==Ot)&&ip(d,H,C,Ot),Ms=!1,de=d.memoizedState,H.state=de,fn(d,C,H,z),Te();var un=d.memoizedState;J!==we||de!==un||Ms||h!==null&&h.dependencies!==null&&j(h.dependencies)?(typeof yt=="function"&&(Ku(d,b,yt,C),un=d.memoizedState),(me=Ms||Zu(d,b,me,C,de,un,Ot)||h!==null&&h.dependencies!==null&&j(h.dependencies))?(te||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(C,un,Ot),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(C,un,Ot)),typeof H.componentDidUpdate=="function"&&(d.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof H.componentDidUpdate!="function"||J===h.memoizedProps&&de===h.memoizedState||(d.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||J===h.memoizedProps&&de===h.memoizedState||(d.flags|=1024),d.memoizedProps=C,d.memoizedState=un),H.props=C,H.state=un,H.context=Ot,C=me):(typeof H.componentDidUpdate!="function"||J===h.memoizedProps&&de===h.memoizedState||(d.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||J===h.memoizedProps&&de===h.memoizedState||(d.flags|=1024),C=!1)}return H=C,pf(h,d),C=(d.flags&128)!==0,H||C?(H=d.stateNode,b=C&&typeof b.getDerivedStateFromError!="function"?null:H.render(),d.flags|=1,h!==null&&C?(d.child=Sc(d,h.child,null,z),d.child=Sc(d,null,b,z)):Qi(h,d,b,z),d.memoizedState=H.state,h=d.child):h=ro(h,d,z),h}function op(h,d,b,C){return Pt(),d.flags|=256,Qi(h,d,b,C),d.child}function gf(h){return{baseLanes:h,cachePool:wr()}}function Kl(h,d,b){return h=h!==null?h.childLanes&~b:0,d&&(h|=ka),h}function lp(h,d,b){var C=d.pendingProps,z=!1,H=(d.flags&128)!==0,J;if((J=H)||(J=h!==null&&h.memoizedState===null?!1:(Oi.current&2)!==0),J&&(z=!0,d.flags&=-129),J=(d.flags&32)!==0,d.flags&=-33,h===null){if(qn){if(z?Ls(d):Jr(),qn){var yt=mi,Ot;(Ot=yt)&&(yt=Gb(yt,Zo),yt!==null?(d.memoizedState={dehydrated:yt,treeContext:Ko!==null?{id:Cl,overflow:Rl}:null,retryLane:536870912},Ot=e(18,null,null,0),Ot.stateNode=yt,Ot.return=d,d.child=Ot,gr=d,mi=null,Ot=!0):Ot=!1),Ot||Dt(d)}if(yt=d.memoizedState,yt!==null&&(yt=yt.dehydrated,yt!==null))return Cp(yt)?d.lanes=16:d.lanes=536870912,null;Ki(d)}return yt=C.children,C=C.fallback,z?(Jr(),z=d.mode,yt=Ch({mode:"hidden",children:yt},z),C=lc(C,z,b,null),yt.return=d,C.return=d,yt.sibling=C,d.child=yt,z=d.child,z.memoizedState=gf(b),z.childLanes=Kl(h,J,b),d.memoizedState=Lp,C):(Ls(d),Ju(d,yt))}if(Ot=h.memoizedState,Ot!==null&&(yt=Ot.dehydrated,yt!==null)){if(H)d.flags&256?(Ls(d),d.flags&=-257,d=yf(h,d,b)):d.memoizedState!==null?(Jr(),d.child=h.child,d.flags|=128,d=null):(Jr(),z=C.fallback,yt=d.mode,C=Ch({mode:"visible",children:C.children},yt),z=lc(z,yt,b,null),z.flags|=2,C.return=d,z.return=d,C.sibling=z,d.child=C,Sc(d,h.child,null,b),C=d.child,C.memoizedState=gf(b),C.childLanes=Kl(h,J,b),d.memoizedState=Lp,d=z);else if(Ls(d),Cp(yt))J=_g(yt).digest,C=Error(r(419)),C.stack="",C.digest=J,kt({value:C,source:null,stack:null}),d=yf(h,d,b);else if(Nr||F(h,d,b,!1),J=(b&h.childLanes)!==0,Nr||J){if(J=yi,J!==null){if(C=b&-b,(C&42)!==0)C=1;else switch(C){case 2:C=1;break;case 8:C=4;break;case 32:C=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:C=64;break;case 268435456:C=134217728;break;default:C=0}if(C=(C&(J.suspendedLanes|b))!==0?0:C,C!==0&&C!==Ot.retryLane)throw Ot.retryLane=C,ce(h,C),Ri(J,h,C),fv}Cf(yt)||fo(),d=yf(h,d,b)}else Cf(yt)?(d.flags|=128,d.child=h.child,d=Ep.bind(null,h),Fb(yt,d),d=null):(h=Ot.treeContext,ua&&(mi=K_(yt),gr=d,qn=!0,po=null,Zo=!1,h!==null&&(ca[Ts++]=Cl,ca[Ts++]=Rl,ca[Ts++]=Ko,Cl=h.id,Rl=h.overflow,Ko=d)),d=Ju(d,C.children),d.flags|=4096);return d}return z?(Jr(),z=C.fallback,yt=d.mode,Ot=h.child,H=Ot.sibling,C=su(Ot,{mode:"hidden",children:C.children}),C.subtreeFlags=Ot.subtreeFlags&31457280,H!==null?z=su(H,z):(z=lc(z,yt,b,null),z.flags|=2),z.return=d,C.return=d,C.sibling=z,d.child=C,C=z,z=d.child,yt=h.child.memoizedState,yt===null?yt=gf(b):(Ot=yt.cachePool,Ot!==null?(H=Wo?ir._currentValue:ir._currentValue2,Ot=Ot.parent!==H?{parent:H,pool:H}:Ot):Ot=wr(),yt={baseLanes:yt.baseLanes|b,cachePool:Ot}),z.memoizedState=yt,z.childLanes=Kl(h,J,b),d.memoizedState=Lp,C):(Ls(d),b=h.child,h=b.sibling,b=su(b,{mode:"visible",children:C.children}),b.return=d,b.sibling=null,h!==null&&(J=d.deletions,J===null?(d.deletions=[h],d.flags|=16):J.push(h)),d.child=b,d.memoizedState=null,b)}function Ju(h,d){return d=Ch({mode:"visible",children:d},h.mode),d.return=h,h.child=d}function Ch(h,d){return ug(h,d,0,null)}function yf(h,d,b){return Sc(d,h.child,null,b),h=Ju(d,d.pendingProps.children),h.flags|=2,d.memoizedState=null,h}function _l(h,d,b){h.lanes|=d;var C=h.alternate;C!==null&&(C.lanes|=d),ao(h.return,d,b)}function Rh(h,d,b,C,z){var H=h.memoizedState;H===null?h.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:C,tail:b,tailMode:z}:(H.isBackwards=d,H.rendering=null,H.renderingStartTime=0,H.last=C,H.tail=b,H.tailMode=z)}function up(h,d,b){var C=d.pendingProps,z=C.revealOrder,H=C.tail;if(Qi(h,d,C.children,b),C=Oi.current,(C&2)!==0)C=C&1|2,d.flags|=128;else{if(h!==null&&(h.flags&128)!==0)t:for(h=d.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&_l(h,b,d);else if(h.tag===19)_l(h,b,d);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break t;for(;h.sibling===null;){if(h.return===null||h.return===d)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}C&=1}switch(R(Oi,C),z){case"forwards":for(b=d.child,z=null;b!==null;)h=b.alternate,h!==null&&Gi(h)===null&&(z=b),b=b.sibling;b=z,b===null?(z=d.child,d.child=null):(z=b.sibling,b.sibling=null),Rh(d,!1,z,b,H);break;case"backwards":for(b=null,z=d.child,d.child=null;z!==null;){if(h=z.alternate,h!==null&&Gi(h)===null){d.child=z;break}h=z.sibling,z.sibling=b,b=z,z=h}Rh(d,!0,b,null,H);break;case"together":Rh(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function ro(h,d,b){if(h!==null&&(d.dependencies=h.dependencies),xo|=d.lanes,(b&d.childLanes)===0)if(h!==null){if(F(h,d,b,!1),(b&d.childLanes)===0)return null}else return null;if(h!==null&&d.child!==h.child)throw Error(r(153));if(d.child!==null){for(h=d.child,b=su(h,h.pendingProps),d.child=b,b.return=d;h.sibling!==null;)h=h.sibling,b=b.sibling=su(h,h.pendingProps),b.return=d;b.sibling=null}return d.child}function Oh(h,d){return(h.lanes&d)!==0?!0:(h=h.dependencies,!!(h!==null&&j(h)))}function Dh(h,d,b){switch(d.tag){case 3:nt(d,d.stateNode.containerInfo),jo(d,ir,h.memoizedState.cache),Pt();break;case 27:case 5:ft(d);break;case 4:nt(d,d.stateNode.containerInfo);break;case 10:jo(d,d.type,d.memoizedProps.value);break;case 13:var C=d.memoizedState;if(C!==null)return C.dehydrated!==null?(Ls(d),d.flags|=128,null):(b&d.child.childLanes)!==0?lp(h,d,b):(Ls(d),h=ro(h,d,b),h!==null?h.sibling:null);Ls(d);break;case 19:var z=(h.flags&128)!==0;if(C=(b&d.childLanes)!==0,C||(F(h,d,b,!1),C=(b&d.childLanes)!==0),z){if(C)return up(h,d,b);d.flags|=128}if(z=d.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),R(Oi,Oi.current),C)break;return null;case 22:case 23:return d.lanes=0,sp(h,d,b);case 24:jo(d,ir,h.memoizedState.cache)}return ro(h,d,b)}function xs(h,d,b){if(h!==null)if(h.memoizedProps!==d.pendingProps)Nr=!0;else{if(!Oh(h,b)&&(d.flags&128)===0)return Nr=!1,Dh(h,d,b);Nr=(h.flags&131072)!==0}else Nr=!1,qn&&(d.flags&1048576)!==0&&pt(d,Kh,d.index);switch(d.lanes=0,d.tag){case 16:t:{h=d.pendingProps;var C=d.elementType,z=C._init;if(C=z(C._payload),d.type=C,typeof C=="function")ru(C)?(h=io(C,h),d.tag=1,d=ap(null,d,C,h,b)):(d.tag=0,d=mf(null,d,C,h,b));else{if(C!=null){if(z=C.$$typeof,z===cg){d.tag=11,d=ff(null,d,C,h,b);break t}else if(z===kh){d.tag=14,d=wh(null,d,C,h,b);break t}}throw d=a(C)||C,Error(r(306,d,""))}}return d;case 0:return mf(h,d,d.type,d.pendingProps,b);case 1:return C=d.type,z=io(C,d.pendingProps),ap(h,d,C,z,b);case 3:t:{if(nt(d,d.stateNode.containerInfo),h===null)throw Error(r(387));var H=d.pendingProps;z=d.memoizedState,C=z.element,xe(h,d),fn(d,H,null,b);var J=d.memoizedState;if(H=J.cache,jo(d,ir,H),H!==z.cache&&M(d,[ir],b,!0),Te(),H=J.element,ua&&z.isDehydrated)if(z={element:H,isDehydrated:!1,cache:J.cache},d.updateQueue.baseState=z,d.memoizedState=z,d.flags&256){d=op(h,d,H,b);break t}else if(H!==C){C=ct(Error(r(424)),d),kt(C),d=op(h,d,H,b);break t}else for(ua&&(mi=Rf(d.stateNode.containerInfo),gr=d,qn=!0,po=null,Zo=!0),b=Ol(d,null,H,b),d.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Pt(),H===C){d=ro(h,d,b);break t}Qi(h,d,H,b)}d=d.child}return d;case 26:if(za)return pf(h,d),h===null?(b=tv(d.type,null,d.pendingProps,null))?d.memoizedState=b:qn||(d.stateNode=rv(d.type,d.pendingProps,pu.current,d)):d.memoizedState=tv(d.type,h.memoizedProps,d.pendingProps,h.memoizedState),null;case 27:if(is)return ft(d),h===null&&is&&qn&&(C=d.stateNode=bg(d.type,d.pendingProps,pu.current,mr.current,!1),gr=d,Zo=!0,mi=hu(C)),C=d.pendingProps.children,h!==null||qn?Qi(h,d,C,b):d.child=Sc(d,null,C,b),pf(h,d),d.child;case 5:return h===null&&qn&&(Yb(d.type,d.pendingProps,mr.current),(z=C=mi)&&(C=Z_(C,d.type,d.pendingProps,Zo),C!==null?(d.stateNode=C,gr=d,mi=hu(C),Zo=!1,z=!0):z=!1),z||Dt(d)),ft(d),z=d.type,H=d.pendingProps,J=h!==null?h.memoizedProps:null,C=H.children,hs(z,H)?C=null:J!==null&&hs(z,J)&&(d.flags|=32),d.memoizedState!==null&&(z=to(h,d,uf,null,null,b),Wo?fu._currentValue=z:fu._currentValue2=z),pf(h,d),Qi(h,d,C,b),d.child;case 6:return h===null&&qn&&(lA(d.pendingProps,mr.current),(h=b=mi)&&(b=Hb(b,d.pendingProps,Zo),b!==null?(d.stateNode=b,gr=d,mi=null,h=!0):h=!1),h||Dt(d)),null;case 13:return lp(h,d,b);case 4:return nt(d,d.stateNode.containerInfo),C=d.pendingProps,h===null?d.child=Sc(d,null,C,b):Qi(h,d,C,b),d.child;case 11:return ff(h,d,d.type,d.pendingProps,b);case 7:return Qi(h,d,d.pendingProps,b),d.child;case 8:return Qi(h,d,d.pendingProps.children,b),d.child;case 12:return Qi(h,d,d.pendingProps.children,b),d.child;case 10:return C=d.pendingProps,jo(d,d.type,C.value),Qi(h,d,C.children,b),d.child;case 9:return z=d.type._context,C=d.pendingProps.children,et(d),z=Tt(z),C=C(z),d.flags|=1,Qi(h,d,C,b),d.child;case 14:return wh(h,d,d.type,d.pendingProps,b);case 15:return hf(h,d,d.type,d.pendingProps,b);case 19:return up(h,d,b);case 22:return sp(h,d,b);case 24:return et(d),C=Tt(ir),h===null?(z=Bn(),z===null&&(z=yi,H=zn(),z.pooledCache=H,H.refCount++,H!==null&&(z.pooledCacheLanes|=b),z=H),d.memoizedState={parent:C,cache:z},Kt(d),jo(d,ir,z)):((h.lanes&b)!==0&&(xe(h,d),fn(d,null,null,b),Te()),z=h.memoizedState,H=d.memoizedState,z.parent!==C?(z={parent:C,cache:C},d.memoizedState=z,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=z),jo(d,ir,C)):(C=H.cache,jo(d,ir,C),C!==z.cache&&M(d,[ir],b,!0))),Qi(h,d,d.pendingProps.children,b),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function jo(h,d,b){Wo?(R(go,d._currentValue),d._currentValue=b):(R(go,d._currentValue2),d._currentValue2=b)}function so(h){var d=go.current;Wo?h._currentValue=d:h._currentValue2=d,x(go)}function ao(h,d,b){for(;h!==null;){var C=h.alternate;if((h.childLanes&d)!==d?(h.childLanes|=d,C!==null&&(C.childLanes|=d)):C!==null&&(C.childLanes&d)!==d&&(C.childLanes|=d),h===b)break;h=h.return}}function M(h,d,b,C){var z=h.child;for(z!==null&&(z.return=h);z!==null;){var H=z.dependencies;if(H!==null){var J=z.child;H=H.firstContext;t:for(;H!==null;){var yt=H;H=z;for(var Ot=0;Ot<d.length;Ot++)if(yt.context===d[Ot]){H.lanes|=b,yt=H.alternate,yt!==null&&(yt.lanes|=b),ao(H.return,b,h),C||(J=null);break t}H=yt.next}}else if(z.tag===18){if(J=z.return,J===null)throw Error(r(341));J.lanes|=b,H=J.alternate,H!==null&&(H.lanes|=b),ao(J,b,h),J=null}else J=z.child;if(J!==null)J.return=z;else for(J=z;J!==null;){if(J===h){J=null;break}if(z=J.sibling,z!==null){z.return=J.return,J=z;break}J=J.return}z=J}}function F(h,d,b,C){h=null;for(var z=d,H=!1;z!==null;){if(!H){if((z.flags&524288)!==0)H=!0;else if((z.flags&262144)!==0)break}if(z.tag===10){var J=z.alternate;if(J===null)throw Error(r(387));if(J=J.memoizedProps,J!==null){var yt=z.type;Fs(z.pendingProps.value,J.value)||(h!==null?h.push(yt):h=[yt])}}else if(z===Dp.current){if(J=z.alternate,J===null)throw Error(r(387));J.memoizedState.memoizedState!==z.memoizedState.memoizedState&&(h!==null?h.push(fu):h=[fu])}z=z.return}h!==null&&M(d,h,b,C),d.flags|=262144}function j(h){for(h=h.firstContext;h!==null;){var d=h.context;if(!Fs(Wo?d._currentValue:d._currentValue2,h.memoizedValue))return!0;h=h.next}return!1}function et(h){wc=h,yo=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function Tt(h){return ye(wc,h)}function jt(h,d){return wc===null&&et(h),ye(h,d)}function ye(h,d){var b=Wo?d._currentValue:d._currentValue2;if(d={context:d,memoizedValue:b,next:null},yo===null){if(h===null)throw Error(r(308));yo=d,h.dependencies={lanes:0,firstContext:d},h.flags|=524288}else yo=yo.next=d;return b}function zn(){return{controller:new Up,data:new Map,refCount:0}}function Ji(h){h.refCount--,h.refCount===0&&tr(cA,function(){h.controller.abort()})}function Bn(){var h=Lf.current;return h!==null?h:yi.pooledCache}function cr(h,d){d===null?R(Lf,Lf.current):R(Lf,d.pool)}function wr(){var h=Bn();return h===null?null:{parent:Wo?ir._currentValue:ir._currentValue2,pool:h}}function fr(h){h.flags|=4}function es(h,d){if(h!==null&&h.child===d.child)return!1;if((d.flags&16)!==0)return!0;for(h=d.child;h!==null;){if((h.flags&13878)!==0||(h.subtreeFlags&13878)!==0)return!0;h=h.sibling}return!1}function oo(h,d,b,C){if(Xi)for(b=d.child;b!==null;){if(b.tag===5||b.tag===6)Ap(h,b.stateNode);else if(!(b.tag===4||is&&b.tag===27)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===d)break;for(;b.sibling===null;){if(b.return===null||b.return===d)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else if(Yo)for(var z=d.child;z!==null;){if(z.tag===5){var H=z.stateNode;b&&C&&(H=Vb(H,z.type,z.memoizedProps)),Ap(h,H)}else if(z.tag===6)H=z.stateNode,b&&C&&(H=$_(H,z.memoizedProps)),Ap(h,H);else if(z.tag!==4){if(z.tag===22&&z.memoizedState!==null)H=z.child,H!==null&&(H.return=z),oo(h,z,!0,!0);else if(z.child!==null){z.child.return=z,z=z.child;continue}}if(z===d)break;for(;z.sibling===null;){if(z.return===null||z.return===d)return;z=z.return}z.sibling.return=z.return,z=z.sibling}}function Nh(h,d,b,C){if(Yo)for(var z=d.child;z!==null;){if(z.tag===5){var H=z.stateNode;b&&C&&(H=Vb(H,z.type,z.memoizedProps)),Y_(h,H)}else if(z.tag===6)H=z.stateNode,b&&C&&(H=$_(H,z.memoizedProps)),Y_(h,H);else if(z.tag!==4){if(z.tag===22&&z.memoizedState!==null)H=z.child,H!==null&&(H.return=z),Nh(h,z,!(z.memoizedProps!==null&&z.memoizedProps.mode==="manual"),!0);else if(z.child!==null){z.child.return=z,z=z.child;continue}}if(z===d)break;for(;z.sibling===null;){if(z.return===null||z.return===d)return;z=z.return}z.sibling.return=z.return,z=z.sibling}}function cp(h,d){if(Yo&&es(h,d)){h=d.stateNode;var b=h.containerInfo,C=yg();Nh(C,d,!1,!1),h.pendingChildren=C,fr(d),zb(b,C)}}function Qm(h,d,b,C){if(Xi)h.memoizedProps!==C&&fr(d);else if(Yo){var z=h.stateNode,H=h.memoizedProps;if((h=es(h,d))||H!==C){var J=mr.current;H=Ub(z,b,H,C,!h,null),H===z?d.stateNode=z:(fg(H,b,C,J)&&fr(d),d.stateNode=H,h?oo(H,d,!1,!1):fr(d))}else d.stateNode=z}}function Jm(h,d,b){if(H_(d,b)){if(h.flags|=16777216,!G_(d,b))if(ns())h.flags|=8192;else throw As=ks,Pp}else h.flags&=-16777217}function tg(h,d){if(Zb(d)){if(h.flags|=16777216,!sv(d))if(ns())h.flags|=8192;else throw As=ks,Pp}else h.flags&=-16777217}function Ih(h,d){d!==null&&(h.flags|=4),h.flags&16384&&(d=h.tag!==22?I():536870912,h.lanes|=d,Pr|=d)}function Ph(h,d){if(!qn)switch(h.tailMode){case"hidden":d=h.tail;for(var b=null;d!==null;)d.alternate!==null&&(b=d),d=d.sibling;b===null?h.tail=null:b.sibling=null;break;case"collapsed":b=h.tail;for(var C=null;b!==null;)b.alternate!==null&&(C=b),b=b.sibling;C===null?d||h.tail===null?h.tail=null:h.tail.sibling=null:C.sibling=null}}function ji(h){var d=h.alternate!==null&&h.alternate.child===h.child,b=0,C=0;if(d)for(var z=h.child;z!==null;)b|=z.lanes|z.childLanes,C|=z.subtreeFlags&31457280,C|=z.flags&31457280,z.return=h,z=z.sibling;else for(z=h.child;z!==null;)b|=z.lanes|z.childLanes,C|=z.subtreeFlags,C|=z.flags,z.return=h,z=z.sibling;return h.subtreeFlags|=C,h.childLanes=b,d}function sb(h,d,b){var C=d.pendingProps;switch(zt(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ji(d),null;case 1:return ji(d),null;case 3:return b=d.stateNode,C=null,h!==null&&(C=h.memoizedState.cache),d.memoizedState.cache!==C&&(d.flags|=2048),so(ir),lt(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(h===null||h.child===null)&&(Jt(d)?fr(d):h===null||h.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,po!==null&&(nu(po),po=null))),cp(h,d),ji(d),null;case 26:if(za){b=d.type;var z=d.memoizedState;return h===null?(fr(d),z!==null?(ji(d),tg(d,z)):(ji(d),Jm(d,b,C))):z?z!==h.memoizedState?(fr(d),ji(d),tg(d,z)):(ji(d),d.flags&=-16777217):(Xi?h.memoizedProps!==C&&fr(d):Qm(h,d,b,C),ji(d),Jm(d,b,C)),null}case 27:if(is){if(mt(d),b=pu.current,z=d.type,h!==null&&d.stateNode!=null)Xi?h.memoizedProps!==C&&fr(d):Qm(h,d,z,C);else{if(!C){if(d.stateNode===null)throw Error(r(166));return ji(d),null}h=mr.current,Jt(d)?Wt(d,h):(h=bg(z,C,b,h,!0),d.stateNode=h,fr(d))}return ji(d),null}case 5:if(mt(d),b=d.type,h!==null&&d.stateNode!=null)Qm(h,d,b,C);else{if(!C){if(d.stateNode===null)throw Error(r(166));return ji(d),null}h=mr.current,Jt(d)?Wt(d,h):(z=k_(b,C,pu.current,h,d),oo(z,d,!1,!1),d.stateNode=z,fg(z,b,C,h)&&fr(d))}return ji(d),Jm(d,d.type,d.pendingProps),null;case 6:if(h&&d.stateNode!=null)b=h.memoizedProps,Xi?b!==C&&fr(d):Yo&&(b!==C?(d.stateNode=dr(C,pu.current,mr.current,d),fr(d)):d.stateNode=h.stateNode);else{if(typeof C!="string"&&d.stateNode===null)throw Error(r(166));if(h=pu.current,b=mr.current,Jt(d)){if(!ua)throw Error(r(176));if(h=d.stateNode,b=d.memoizedProps,C=null,z=gr,z!==null)switch(z.tag){case 27:case 5:C=z.memoizedProps}vg(h,b,d,C)||Dt(d)}else d.stateNode=dr(C,h,b,d)}return ji(d),null;case 13:if(C=d.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(z=Jt(d),C!==null&&C.dehydrated!==null){if(h===null){if(!z)throw Error(r(318));if(!ua)throw Error(r(344));if(z=d.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(r(317));qb(z,d)}else Pt(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;ji(d),z=!1}else po!==null&&(nu(po),po=null),z=!0;if(!z)return d.flags&256?(Ki(d),d):(Ki(d),null)}if(Ki(d),(d.flags&128)!==0)return d.lanes=b,d;if(b=C!==null,h=h!==null&&h.memoizedState!==null,b){C=d.child,z=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(z=C.alternate.memoizedState.cachePool.pool);var H=null;C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(H=C.memoizedState.cachePool.pool),H!==z&&(C.flags|=2048)}return b!==h&&b&&(d.child.flags|=8192),Ih(d,d.updateQueue),ji(d),null;case 4:return lt(),cp(h,d),h===null&&mb(d.stateNode.containerInfo),ji(d),null;case 10:return so(d.type),ji(d),null;case 19:if(x(Oi),z=d.memoizedState,z===null)return ji(d),null;if(C=(d.flags&128)!==0,H=z.rendering,H===null)if(C)Ph(z,!1);else{if(Yi!==0||h!==null&&(h.flags&128)!==0)for(h=d.child;h!==null;){if(H=Gi(h),H!==null){for(d.flags|=128,Ph(z,!1),h=H.updateQueue,d.updateQueue=h,Ih(d,h),d.subtreeFlags=0,h=b,b=d.child;b!==null;)Ef(b,h),b=b.sibling;return R(Oi,Oi.current&1|2),d.child}h=h.sibling}z.tail!==null&&Ba()>Ha&&(d.flags|=128,C=!0,Ph(z,!1),d.lanes=4194304)}else{if(!C)if(h=Gi(H),h!==null){if(d.flags|=128,C=!0,h=h.updateQueue,d.updateQueue=h,Ih(d,h),Ph(z,!0),z.tail===null&&z.tailMode==="hidden"&&!H.alternate&&!qn)return ji(d),null}else 2*Ba()-z.renderingStartTime>Ha&&b!==536870912&&(d.flags|=128,C=!0,Ph(z,!1),d.lanes=4194304);z.isBackwards?(H.sibling=d.child,d.child=H):(h=z.last,h!==null?h.sibling=H:d.child=H,z.last=H)}return z.tail!==null?(d=z.tail,z.rendering=d,z.tail=d.sibling,z.renderingStartTime=Ba(),d.sibling=null,h=Oi.current,R(Oi,C?h&1|2:h&1),d):(ji(d),null);case 22:case 23:return Ki(d),Qr(),C=d.memoizedState!==null,h!==null?h.memoizedState!==null!==C&&(d.flags|=8192):C&&(d.flags|=8192),C?(b&536870912)!==0&&(d.flags&128)===0&&(ji(d),d.subtreeFlags&6&&(d.flags|=8192)):ji(d),b=d.updateQueue,b!==null&&Ih(d,b.retryQueue),b=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),C=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(C=d.memoizedState.cachePool.pool),C!==b&&(d.flags|=2048),h!==null&&x(Lf),null;case 24:return b=null,h!==null&&(b=h.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),so(ir),ji(d),null;case 25:return null}throw Error(r(156,d.tag))}function tA(h,d){switch(zt(d),d.tag){case 1:return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 3:return so(ir),lt(),h=d.flags,(h&65536)!==0&&(h&128)===0?(d.flags=h&-65537|128,d):null;case 26:case 27:case 5:return mt(d),null;case 13:if(Ki(d),h=d.memoizedState,h!==null&&h.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Pt()}return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 19:return x(Oi),null;case 4:return lt(),null;case 10:return so(d.type),null;case 22:case 23:return Ki(d),Qr(),h!==null&&x(Lf),h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 24:return so(ir),null;case 25:return null;default:return null}}function ab(h,d){switch(zt(d),d.tag){case 3:so(ir),lt();break;case 26:case 27:case 5:mt(d);break;case 4:lt();break;case 13:Ki(d);break;case 19:x(Oi);break;case 10:so(d.type);break;case 22:case 23:Ki(d),Qr(),h!==null&&x(Lf);break;case 24:so(ir)}}function fp(h,d){try{var b=d.updateQueue,C=b!==null?b.lastEffect:null;if(C!==null){var z=C.next;b=z;do{if((b.tag&h)===h){C=void 0;var H=b.create,J=b.inst;C=H(),J.destroy=C}b=b.next}while(b!==z)}}catch(yt){ai(d,d.return,yt)}}function tc(h,d,b){try{var C=d.updateQueue,z=C!==null?C.lastEffect:null;if(z!==null){var H=z.next;C=H;do{if((C.tag&h)===h){var J=C.inst,yt=J.destroy;if(yt!==void 0){J.destroy=void 0,z=d;var Ot=b;try{yt()}catch(te){ai(z,Ot,te)}}}C=C.next}while(C!==H)}}catch(te){ai(d,d.return,te)}}function ob(h){var d=h.updateQueue;if(d!==null){var b=h.stateNode;try{Me(d,b)}catch(C){ai(h,h.return,C)}}}function ra(h,d,b){b.props=io(h.type,h.memoizedProps),b.state=h.memoizedState;try{b.componentWillUnmount()}catch(C){ai(h,d,C)}}function Xo(h,d){try{var b=h.ref;if(b!==null){var C=h.stateNode;switch(h.tag){case 26:case 27:case 5:var z=Af(C);break;default:z=C}typeof b=="function"?h.refCleanup=b(z):b.current=z}}catch(H){ai(h,d,H)}}function sa(h,d){var b=h.ref,C=h.refCleanup;if(b!==null)if(typeof C=="function")try{C()}catch(z){ai(h,d,z)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(z){ai(h,d,z)}else b.current=null}function w_(h){var d=h.type,b=h.memoizedProps,C=h.stateNode;try{Cb(C,d,b,h)}catch(z){ai(h,h.return,z)}}function C_(h,d,b){try{Rb(h.stateNode,h.type,b,d,h)}catch(C){ai(h,h.return,C)}}function R_(h){return h.tag===5||h.tag===3||(za?h.tag===26:!1)||(is?h.tag===27:!1)||h.tag===4}function hp(h){t:for(;;){for(;h.sibling===null;){if(h.return===null||R_(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&(!is||h.tag!==27)&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue t;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function O_(h,d,b){var C=h.tag;if(C===5||C===6)h=h.stateNode,d?X_(b,h,d):j_(b,h);else if(!(C===4||is&&C===27)&&(h=h.child,h!==null))for(O_(h,d,b),h=h.sibling;h!==null;)O_(h,d,b),h=h.sibling}function eg(h,d,b){var C=h.tag;if(C===5||C===6)h=h.stateNode,d?Ob(b,h,d):Ab(b,h);else if(!(C===4||is&&C===27)&&(h=h.child,h!==null))for(eg(h,d,b),h=h.sibling;h!==null;)eg(h,d,b),h=h.sibling}function _f(h,d,b){h=h.containerInfo;try{Bb(h,b)}catch(C){ai(d,d.return,C)}}function D_(h,d){for(pb(h.containerInfo),We=d;We!==null;)if(h=We,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,We=d;else for(;We!==null;){h=We;var b=h.alternate;switch(d=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&b!==null){d=void 0;var C=h,z=b.memoizedProps;b=b.memoizedState;var H=C.stateNode;try{var J=io(C.type,z,C.elementType===C.type);d=H.getSnapshotBeforeUpdate(J,b),H.__reactInternalSnapshotBeforeUpdate=d}catch(yt){ai(C,C.return,yt)}}break;case 3:(d&1024)!==0&&Xi&&Lb(h.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=h.sibling,d!==null){d.return=h.return,We=d;break}We=h.return}return J=Ti,Ti=!1,J}function Lh(h,d,b){var C=b.flags;switch(b.tag){case 0:case 11:case 15:Ql(h,b),C&4&&fp(5,b);break;case 1:if(Ql(h,b),C&4)if(h=b.stateNode,d===null)try{h.componentDidMount()}catch(yt){ai(b,b.return,yt)}else{var z=io(b.type,d.memoizedProps);d=d.memoizedState;try{h.componentDidUpdate(z,d,h.__reactInternalSnapshotBeforeUpdate)}catch(yt){ai(b,b.return,yt)}}C&64&&ob(b),C&512&&Xo(b,b.return);break;case 3:if(Ql(h,b),C&64&&(C=b.updateQueue,C!==null)){if(h=null,b.child!==null)switch(b.child.tag){case 27:case 5:h=Af(b.child.stateNode);break;case 1:h=b.child.stateNode}try{Me(C,h)}catch(yt){ai(b,b.return,yt)}}break;case 26:if(za){Ql(h,b),C&512&&Xo(b,b.return);break}case 27:case 5:Ql(h,b),d===null&&C&4&&w_(b),C&512&&Xo(b,b.return);break;case 12:Ql(h,b);break;case 13:Ql(h,b),C&4&&vf(h,b);break;case 22:if(z=b.memoizedState!==null||xu,!z){d=d!==null&&d.memoizedState!==null||ln;var H=xu,J=ln;xu=z,(ln=d)&&!J?ec(h,b,(b.subtreeFlags&8772)!==0):Ql(h,b),xu=H,ln=J}C&512&&(b.memoizedProps.mode==="manual"?Xo(b,b.return):sa(b,b.return));break;default:Ql(h,b)}}function ng(h){var d=h.alternate;d!==null&&(h.alternate=null,ng(d)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(d=h.stateNode,d!==null&&_b(d)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function lo(h,d,b){for(b=b.child;b!==null;)Zl(h,d,b),b=b.sibling}function Zl(h,d,b){if(Dr&&typeof Dr.onCommitFiberUnmount=="function")try{Dr.onCommitFiberUnmount($h,b)}catch{}switch(b.tag){case 26:if(za){ln||sa(b,d),lo(h,d,b),b.memoizedState?nv(b.memoizedState):b.stateNode&&Xh(b.stateNode);break}case 27:if(is){ln||sa(b,d);var C=Zn,z=vr;Zn=b.stateNode,lo(h,d,b),lv(b.stateNode),Zn=C,vr=z;break}case 5:ln||sa(b,d);case 6:if(Xi){if(C=Zn,z=vr,Zn=null,lo(h,d,b),Zn=C,vr=z,Zn!==null)if(vr)try{Nb(Zn,b.stateNode)}catch(H){ai(b,d,H)}else try{Db(Zn,b.stateNode)}catch(H){ai(b,d,H)}}else lo(h,d,b);break;case 18:Xi&&Zn!==null&&(vr?Q_(Zn,b.stateNode):Wb(Zn,b.stateNode));break;case 4:Xi?(C=Zn,z=vr,Zn=b.stateNode.containerInfo,vr=!0,lo(h,d,b),Zn=C,vr=z):(Yo&&_f(b.stateNode,b,yg()),lo(h,d,b));break;case 0:case 11:case 14:case 15:ln||tc(2,b,d),ln||tc(4,b,d),lo(h,d,b);break;case 1:ln||(sa(b,d),C=b.stateNode,typeof C.componentWillUnmount=="function"&&ra(b,d,C)),lo(h,d,b);break;case 21:lo(h,d,b);break;case 22:ln||sa(b,d),ln=(C=ln)||b.memoizedState!==null,lo(h,d,b),ln=C;break;default:lo(h,d,b)}}function vf(h,d){if(ua&&d.memoizedState===null&&(h=d.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{xg(h)}catch(b){ai(d,d.return,b)}}function N_(h){switch(h.tag){case 13:case 19:var d=h.stateNode;return d===null&&(d=h.stateNode=new On),d;case 22:return h=h.stateNode,d=h._retryCache,d===null&&(d=h._retryCache=new On),d;default:throw Error(r(435,h.tag))}}function ig(h,d){var b=N_(h);d.forEach(function(C){var z=lg.bind(null,h,C);b.has(C)||(b.add(C),C.then(z,z))})}function Cr(h,d){var b=d.deletions;if(b!==null)for(var C=0;C<b.length;C++){var z=b[C],H=h,J=d;if(Xi){var yt=J;t:for(;yt!==null;){switch(yt.tag){case 27:case 5:Zn=yt.stateNode,vr=!1;break t;case 3:Zn=yt.stateNode.containerInfo,vr=!0;break t;case 4:Zn=yt.stateNode.containerInfo,vr=!0;break t}yt=yt.return}if(Zn===null)throw Error(r(160));Zl(H,J,z),Zn=null,vr=!1}else Zl(H,J,z);H=z.alternate,H!==null&&(H.return=null),z.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)I_(d,h),d=d.sibling}function I_(h,d){var b=h.alternate,C=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:Cr(d,h),aa(h),C&4&&(tc(3,h,h.return),fp(3,h),tc(5,h,h.return));break;case 1:Cr(d,h),aa(h),C&512&&(ln||b===null||sa(b,b.return)),C&64&&xu&&(h=h.updateQueue,h!==null&&(C=h.callbacks,C!==null&&(b=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=b===null?C:b.concat(C))));break;case 26:if(za){var z=Cs;Cr(d,h),aa(h),C&512&&(ln||b===null||sa(b,b.return)),C&4&&(C=b!==null?b.memoizedState:null,d=h.memoizedState,b===null?d===null?h.stateNode===null?h.stateNode=$b(z,h.type,h.memoizedProps,h):iv(z,h.type,h.stateNode):h.stateNode=ev(z,d,h.memoizedProps):C!==d?(C===null?b.stateNode!==null&&Xh(b.stateNode):nv(C),d===null?iv(z,h.type,h.stateNode):ev(z,d,h.memoizedProps)):d===null&&h.stateNode!==null&&C_(h,h.memoizedProps,b.memoizedProps));break}case 27:if(is&&C&4&&h.alternate===null){z=h.stateNode;var H=h.memoizedProps;try{Qb(z),ov(h.type,H,z,h)}catch(me){ai(h,h.return,me)}}case 5:if(Cr(d,h),aa(h),C&512&&(ln||b===null||sa(b,b.return)),Xi){if(h.flags&32){d=h.stateNode;try{gg(d)}catch(me){ai(h,h.return,me)}}C&4&&h.stateNode!=null&&(d=h.memoizedProps,C_(h,d,b!==null?b.memoizedProps:d)),C&1024&&(gi=!0)}break;case 6:if(Cr(d,h),aa(h),C&4&&Xi){if(h.stateNode===null)throw Error(r(162));C=h.memoizedProps,b=b!==null?b.memoizedProps:C,d=h.stateNode;try{wb(d,b,C)}catch(me){ai(h,h.return,me)}}break;case 3:if(za?(Kb(),z=Cs,Cs=qr(d.containerInfo),Cr(d,h),Cs=z):Cr(d,h),aa(h),C&4){if(Xi&&ua&&b!==null&&b.memoizedState.isDehydrated)try{Xb(d.containerInfo)}catch(me){ai(h,h.return,me)}if(Yo){C=d.containerInfo,b=d.pendingChildren;try{Bb(C,b)}catch(me){ai(h,h.return,me)}}}gi&&(gi=!1,P_(h));break;case 4:za?(b=Cs,Cs=qr(h.stateNode.containerInfo),Cr(d,h),aa(h),Cs=b):(Cr(d,h),aa(h)),C&4&&Yo&&_f(h.stateNode,h,h.stateNode.pendingChildren);break;case 12:Cr(d,h),aa(h);break;case 13:Cr(d,h),aa(h),h.child.flags&8192&&h.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(dv=Ba()),C&4&&(C=h.updateQueue,C!==null&&(h.updateQueue=null,ig(h,C)));break;case 22:C&512&&(ln||b===null||sa(b,b.return)),z=h.memoizedState!==null;var J=b!==null&&b.memoizedState!==null,yt=xu,Ot=ln;if(xu=yt||z,ln=Ot||J,Cr(d,h),ln=Ot,xu=yt,aa(h),d=h.stateNode,d._current=h,d._visibility&=-3,d._visibility|=d._pendingVisibility&2,C&8192&&(d._visibility=z?d._visibility&-2:d._visibility|1,z&&(d=xu||ln,b===null||J||d||Uh(h)),Xi&&(h.memoizedProps===null||h.memoizedProps.mode!=="manual"))){t:if(b=null,Xi)for(d=h;;){if(d.tag===5||za&&d.tag===26||is&&d.tag===27){if(b===null){J=b=d;try{H=J.stateNode,z?Ib(H):oA(J.stateNode,J.memoizedProps)}catch(me){ai(J,J.return,me)}}}else if(d.tag===6){if(b===null){J=d;try{var te=J.stateNode;z?Pb(te):W_(te,J.memoizedProps)}catch(me){ai(J,J.return,me)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===h)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break t;for(;d.sibling===null;){if(d.return===null||d.return===h)break t;b===d&&(b=null),d=d.return}b===d&&(b=null),d.sibling.return=d.return,d=d.sibling}}C&4&&(C=h.updateQueue,C!==null&&(b=C.retryQueue,b!==null&&(C.retryQueue=null,ig(h,b))));break;case 19:Cr(d,h),aa(h),C&4&&(C=h.updateQueue,C!==null&&(h.updateQueue=null,ig(h,C)));break;case 21:break;default:Cr(d,h),aa(h)}}function aa(h){var d=h.flags;if(d&2){try{if(Xi&&(!is||h.tag!==27)){t:{for(var b=h.return;b!==null;){if(R_(b)){var C=b;break t}b=b.return}throw Error(r(160))}switch(C.tag){case 27:if(is){var z=C.stateNode,H=hp(h);eg(h,H,z);break}case 5:var J=C.stateNode;C.flags&32&&(gg(J),C.flags&=-33);var yt=hp(h);eg(h,yt,J);break;case 3:case 4:var Ot=C.stateNode.containerInfo,te=hp(h);O_(h,te,Ot);break;default:throw Error(r(161))}}}catch(me){ai(h,h.return,me)}h.flags&=-3}d&4096&&(h.flags&=-4097)}function P_(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var d=h;P_(d),d.tag===5&&d.flags&1024&&xb(d.stateNode),h=h.sibling}}function Ql(h,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)Lh(h,d.alternate,d),d=d.sibling}function Uh(h){for(h=h.child;h!==null;){var d=h;switch(d.tag){case 0:case 11:case 14:case 15:tc(4,d,d.return),Uh(d);break;case 1:sa(d,d.return);var b=d.stateNode;typeof b.componentWillUnmount=="function"&&ra(d,d.return,b),Uh(d);break;case 26:case 27:case 5:sa(d,d.return),Uh(d);break;case 22:sa(d,d.return),d.memoizedState===null&&Uh(d);break;default:Uh(d)}h=h.sibling}}function ec(h,d,b){for(b=b&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var C=d.alternate,z=h,H=d,J=H.flags;switch(H.tag){case 0:case 11:case 15:ec(z,H,b),fp(4,H);break;case 1:if(ec(z,H,b),C=H,z=C.stateNode,typeof z.componentDidMount=="function")try{z.componentDidMount()}catch(te){ai(C,C.return,te)}if(C=H,z=C.updateQueue,z!==null){var yt=C.stateNode;try{var Ot=z.shared.hiddenCallbacks;if(Ot!==null)for(z.shared.hiddenCallbacks=null,z=0;z<Ot.length;z++)bt(Ot[z],yt)}catch(te){ai(C,C.return,te)}}b&&J&64&&ob(H),Xo(H,H.return);break;case 26:case 27:case 5:ec(z,H,b),b&&C===null&&J&4&&w_(H),Xo(H,H.return);break;case 12:ec(z,H,b);break;case 13:ec(z,H,b),b&&J&4&&vf(z,H);break;case 22:H.memoizedState===null&&ec(z,H,b),Xo(H,H.return);break;default:ec(z,H,b)}d=d.sibling}}function rg(h,d){var b=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),h=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(h=d.memoizedState.cachePool.pool),h!==b&&(h!=null&&h.refCount++,b!=null&&Ji(b))}function sg(h,d){h=null,d.alternate!==null&&(h=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==h&&(d.refCount++,h!=null&&Ji(h))}function Jl(h,d,b,C){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)uo(h,d,b,C),d=d.sibling}function uo(h,d,b,C){var z=d.flags;switch(d.tag){case 0:case 11:case 15:Jl(h,d,b,C),z&2048&&fp(9,d);break;case 3:Jl(h,d,b,C),z&2048&&(h=null,d.alternate!==null&&(h=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==h&&(d.refCount++,h!=null&&Ji(h)));break;case 12:if(z&2048){Jl(h,d,b,C),h=d.stateNode;try{var H=d.memoizedProps,J=H.id,yt=H.onPostCommit;typeof yt=="function"&&yt(J,d.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(Ot){ai(d,d.return,Ot)}}else Jl(h,d,b,C);break;case 23:break;case 22:H=d.stateNode,d.memoizedState!==null?H._visibility&4?Jl(h,d,b,C):vl(h,d):H._visibility&4?Jl(h,d,b,C):(H._visibility|=4,fs(h,d,b,C,(d.subtreeFlags&10256)!==0)),z&2048&&rg(d.alternate,d);break;case 24:Jl(h,d,b,C),z&2048&&sg(d.alternate,d);break;default:Jl(h,d,b,C)}}function fs(h,d,b,C,z){for(z=z&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var H=h,J=d,yt=b,Ot=C,te=J.flags;switch(J.tag){case 0:case 11:case 15:fs(H,J,yt,Ot,z),fp(8,J);break;case 23:break;case 22:var me=J.stateNode;J.memoizedState!==null?me._visibility&4?fs(H,J,yt,Ot,z):vl(H,J):(me._visibility|=4,fs(H,J,yt,Ot,z)),z&&te&2048&&rg(J.alternate,J);break;case 24:fs(H,J,yt,Ot,z),z&&te&2048&&sg(J.alternate,J);break;default:fs(H,J,yt,Ot,z)}d=d.sibling}}function vl(h,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var b=h,C=d,z=C.flags;switch(C.tag){case 22:vl(b,C),z&2048&&rg(C.alternate,C);break;case 24:vl(b,C),z&2048&&sg(C.alternate,C);break;default:vl(b,C)}d=d.sibling}}function tu(h){if(h.subtreeFlags&Cc)for(h=h.child;h!==null;)dp(h),h=h.sibling}function dp(h){switch(h.tag){case 26:tu(h),h.flags&Cc&&(h.memoizedState!==null?av(Cs,h.memoizedState,h.memoizedProps):q_(h.type,h.memoizedProps));break;case 5:tu(h),h.flags&Cc&&q_(h.type,h.memoizedProps);break;case 3:case 4:if(za){var d=Cs;Cs=qr(h.stateNode.containerInfo),tu(h),Cs=d}else tu(h);break;case 22:h.memoizedState===null&&(d=h.alternate,d!==null&&d.memoizedState!==null?(d=Cc,Cc=16777216,tu(h),Cc=d):tu(h));break;default:tu(h)}}function pp(h){var d=h.alternate;if(d!==null&&(h=d.child,h!==null)){d.child=null;do d=h.sibling,h.sibling=null,h=d;while(h!==null)}}function xf(h){var d=h.deletions;if((h.flags&16)!==0){if(d!==null)for(var b=0;b<d.length;b++){var C=d[b];We=C,gp(C,h)}pp(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)eu(h),h=h.sibling}function eu(h){switch(h.tag){case 0:case 11:case 15:xf(h),h.flags&2048&&tc(9,h,h.return);break;case 3:xf(h);break;case 12:xf(h);break;case 22:var d=h.stateNode;h.memoizedState!==null&&d._visibility&4&&(h.return===null||h.return.tag!==13)?(d._visibility&=-5,mp(h)):xf(h);break;default:xf(h)}}function mp(h){var d=h.deletions;if((h.flags&16)!==0){if(d!==null)for(var b=0;b<d.length;b++){var C=d[b];We=C,gp(C,h)}pp(h)}for(h=h.child;h!==null;){switch(d=h,d.tag){case 0:case 11:case 15:tc(8,d,d.return),mp(d);break;case 22:b=d.stateNode,b._visibility&4&&(b._visibility&=-5,mp(d));break;default:mp(d)}h=h.sibling}}function gp(h,d){for(;We!==null;){var b=We;switch(b.tag){case 0:case 11:case 15:tc(8,b,d);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var C=b.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:Ji(b.memoizedState.cache)}if(C=b.child,C!==null)C.return=b,We=C;else t:for(b=h;We!==null;){C=We;var z=C.sibling,H=C.return;if(ng(C),C===b){We=null;break t}if(z!==null){z.return=H,We=z;break t}We=H}}}function nc(h){var d=dg(h);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(r(364));return d}if(h=Eb(h),h===null)throw Error(r(362));return h.stateNode.current}function ag(h,d){var b=h.tag;switch(d.$$typeof){case Li:if(h.type===d.value)return!0;break;case el:t:{for(d=d.value,h=[h,0],b=0;b<h.length;){var C=h[b++],z=C.tag,H=h[b++],J=d[H];if(z!==5&&z!==26&&z!==27||!Ml(C)){for(;J!=null&&ag(C,J);)H++,J=d[H];if(H===d.length){d=!0;break t}else for(C=C.child;C!==null;)h.push(C,H),C=C.sibling}}d=!1}return d;case Dl:if((b===5||b===26||b===27)&&Mb(h.stateNode,d.value))return!0;break;case Gs:if((b===5||b===6||b===26||b===27)&&(h=Tb(h),h!==null&&0<=h.indexOf(d.value)))return!0;break;case ed:if((b===5||b===26||b===27)&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function oa(h){switch(h.$$typeof){case Li:return"<"+(a(h.value)||"Unknown")+">";case el:return":has("+(oa(h)||"")+")";case Dl:return'[role="'+h.value+'"]';case Gs:return'"'+h.value+'"';case ed:return'[data-testname="'+h.value+'"]';default:throw Error(r(365))}}function bf(h,d){var b=[];h=[h,0];for(var C=0;C<h.length;){var z=h[C++],H=z.tag,J=h[C++],yt=d[J];if(H!==5&&H!==26&&H!==27||!Ml(z)){for(;yt!=null&&ag(z,yt);)J++,yt=d[J];if(J===d.length)b.push(z);else for(z=z.child;z!==null;)h.push(z,J),z=z.sibling}}return b}function ic(h,d){if(!jh)throw Error(r(363));h=nc(h),h=bf(h,d),d=[],h=Array.from(h);for(var b=0;b<h.length;){var C=h[b++],z=C.tag;if(z===5||z===26||z===27)Ml(C)||d.push(C.stateNode);else for(C=C.child;C!==null;)h.push(C),C=C.sibling}return d}function bs(){if((Pn&2)!==0&&Ln!==0)return Ln&-Ln;if(Je.T!==null){var h=Pi;return h!==0?h:le()}return gb()}function yp(){ka===0&&(ka=(Ln&536870912)===0||qn?U():536870912);var h=ha.current;return h!==null&&(h.flags|=32),ka}function Ri(h,d,b){(h===yi&&fi===2||h.cancelPendingCommit!==null)&&(rc(h,0),Bs(h,Ln,ka,!1)),V(h,b),((Pn&2)===0||h!==yi)&&(h===yi&&((Pn&2)===0&&(Su|=b),Yi===4&&Bs(h,Ln,ka,!1)),gt(h))}function La(h,d,b){if((Pn&6)!==0)throw Error(r(327));var C=!b&&(d&60)===0&&(d&h.expiredLanes)===0||B(h,d),z=C?lb(h,d):vp(h,d,!0),H=C;do{if(z===0){vo&&!C&&Bs(h,d,0,!1);break}else if(z===6)Bs(h,d,0,!_o);else{if(b=h.current.alternate,H&&!iu(b)){z=vp(h,d,!1),H=!1;continue}if(z===2){if(H=d,h.errorRecoveryDisabledLanes&H)var J=0;else J=h.pendingLanes&-536870913,J=J!==0?J:J&536870912?536870912:0;if(J!==0){d=J;t:{var yt=h;z=nd;var Ot=ua&&yt.current.memoizedState.isDehydrated;if(Ot&&(rc(yt,J).flags|=256),J=vp(yt,J,!1),J!==2){if(Uf&&!Ot){yt.errorRecoveryDisabledLanes|=H,Su|=H,z=4;break t}H=bo,bo=z,H!==null&&nu(H)}z=J}if(H=!1,z!==2)continue}}if(z===1){rc(h,0),Bs(h,d,0,!0);break}t:{switch(C=h,z){case 0:case 1:throw Error(r(345));case 4:if((d&4194176)===d){Bs(C,d,ka,!_o);break t}break;case 2:bo=null;break;case 3:case 5:break;default:throw Error(r(329))}if(C.finishedWork=b,C.finishedLanes=d,(d&62914560)===d&&(H=dv+300-Ba(),10<H)){if(Bs(C,d,ka,!_o),N(C,0)!==0)break t;C.timeoutHandle=hg(xl.bind(null,C,b,bo,zf,Dg,d,ka,Su,Pr,_o,2,-0,0),H);break t}xl(C,b,bo,zf,Dg,d,ka,Su,Pr,_o,0,-0,0)}}break}while(!0);gt(h)}function nu(h){bo===null?bo=h:bo.push.apply(bo,h)}function xl(h,d,b,C,z,H,J,yt,Ot,te,me,we,de){var un=d.subtreeFlags;if((un&8192||(un&16785408)===16785408)&&(sA(),dp(d),d=vb(),d!==null)){h.cancelPendingCommit=d(og.bind(null,h,b,C,z,J,yt,Ot,1,we,de)),Bs(h,H,J,!te);return}og(h,b,C,z,J,yt,Ot,me,we,de)}function iu(h){for(var d=h;;){var b=d.tag;if((b===0||b===11||b===15)&&d.flags&16384&&(b=d.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var C=0;C<b.length;C++){var z=b[C],H=z.getSnapshot;z=z.value;try{if(!Fs(H(),z))return!1}catch{return!1}}if(b=d.child,d.subtreeFlags&16384&&b!==null)b.return=d,d=b;else{if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Bs(h,d,b,C){d&=~qs,d&=~Su,h.suspendedLanes|=d,h.pingedLanes&=~d,C&&(h.warmLanes|=d),C=h.expirationTimes;for(var z=d;0<z;){var H=31-pr(z),J=1<<H;C[H]=-1,z&=~J}b!==0&&k(h,b,d)}function L_(){return(Pn&6)===0?(W(0),!1):!0}function _p(){if(Mn!==null){if(fi===0)var h=Mn.return;else h=Mn,yo=wc=null,Us(h),If=null,ws=0,h=Mn;for(;h!==null;)ab(h.alternate,h),h=h.return;Mn=null}}function rc(h,d){h.finishedWork=null,h.finishedLanes=0;var b=h.timeoutHandle;b!==qh&&(h.timeoutHandle=qh,wp(b)),b=h.cancelPendingCommit,b!==null&&(h.cancelPendingCommit=null,b()),_p(),yi=h,Mn=b=su(h.current,null),Ln=d,fi=0,Ir=null,_o=!1,vo=B(h,d),Uf=!1,Pr=ka=qs=Su=xo=Yi=0,bo=nd=null,Dg=!1,(d&8)!==0&&(d|=d&32);var C=h.entangledLanes;if(C!==0)for(h=h.entanglements,C&=d;0<C;){var z=31-pr(C),H=1<<z;d|=h[z],C&=~H}return nl=d,tt(),b}function Ss(h,d){on=null,Je.H=_r,d===Ip?(d=je(),fi=3):d===Pp?(d=je(),fi=4):fi=d===fv?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Ir=d,Mn===null&&(Yi=1,Yl(h,ct(d,h.current)))}function ns(){var h=ha.current;return h===null?!0:(Ln&4194176)===Ln?mo===null:(Ln&62914560)===Ln||(Ln&536870912)!==0?h===mo:!1}function Gn(){var h=Je.H;return Je.H=_r,h===null?_r:h}function co(){var h=Je.A;return Je.A=bu,h}function fo(){Yi=4,_o||(Ln&4194176)!==Ln&&ha.current!==null||(vo=!0),(xo&134217727)===0&&(Su&134217727)===0||yi===null||Bs(yi,Ln,ka,!1)}function vp(h,d,b){var C=Pn;Pn|=2;var z=Gn(),H=co();(yi!==h||Ln!==d)&&(zf=null,rc(h,d)),d=!1;var J=Yi;t:do try{if(fi!==0&&Mn!==null){var yt=Mn,Ot=Ir;switch(fi){case 8:_p(),J=6;break t;case 3:case 2:case 6:ha.current===null&&(d=!0);var te=fi;if(fi=0,Ir=null,bl(h,yt,Ot,te),b&&vo){J=0;break t}break;default:te=fi,fi=0,Ir=null,bl(h,yt,Ot,te)}}Sf(),J=Yi;break}catch(me){Ss(h,me)}while(!0);return d&&h.shellSuspendCounter++,yo=wc=null,Pn=C,Je.H=z,Je.A=H,Mn===null&&(yi=null,Ln=0,tt()),J}function Sf(){for(;Mn!==null;)zh(Mn)}function lb(h,d){var b=Pn;Pn|=2;var C=Gn(),z=co();yi!==h||Ln!==d?(zf=null,Ha=Ba()+500,rc(h,d)):vo=B(h,d);t:do try{if(fi!==0&&Mn!==null){d=Mn;var H=Ir;e:switch(fi){case 1:fi=0,Ir=null,bl(h,d,H,1);break;case 2:if(ne(H)){fi=0,Ir=null,Bh(d);break}d=function(){fi===2&&yi===h&&(fi=7),gt(h)},H.then(d,d);break t;case 3:fi=7;break t;case 4:fi=5;break t;case 7:ne(H)?(fi=0,Ir=null,Bh(d)):(fi=0,Ir=null,bl(h,d,H,7));break;case 5:var J=null;switch(Mn.tag){case 26:J=Mn.memoizedState;case 5:case 27:var yt=Mn,Ot=yt.type,te=yt.pendingProps;if(J?sv(J):G_(Ot,te)){fi=0,Ir=null;var me=yt.sibling;if(me!==null)Mn=me;else{var we=yt.return;we!==null?(Mn=we,sc(we)):Mn=null}break e}}fi=0,Ir=null,bl(h,d,H,5);break;case 6:fi=0,Ir=null,bl(h,d,H,6);break;case 8:_p(),Yi=6;break t;default:throw Error(r(462))}}ub();break}catch(de){Ss(h,de)}while(!0);return yo=wc=null,Je.H=C,Je.A=z,Pn=b,Mn!==null?0:(yi=null,Ln=0,tt(),Yi)}function ub(){for(;Mn!==null&&!vc();)zh(Mn)}function zh(h){var d=xs(h.alternate,h,nl);h.memoizedProps=h.pendingProps,d===null?sc(h):Mn=d}function Bh(h){var d=h,b=d.alternate;switch(d.tag){case 15:case 0:d=Qu(b,d,d.pendingProps,d.type,void 0,Ln);break;case 11:d=Qu(b,d,d.pendingProps,d.type.render,d.ref,Ln);break;case 5:Us(d);default:ab(b,d),d=Mn=Ef(d,nl),d=xs(b,d,nl)}h.memoizedProps=h.pendingProps,d===null?sc(h):Mn=d}function bl(h,d,b,C){yo=wc=null,Us(d),If=null,ws=0;var z=d.return;try{if(A_(h,z,d,b,Ln)){Yi=1,Yl(h,ct(b,h.current)),Mn=null;return}}catch(H){if(z!==null)throw Mn=z,H;Yi=1,Yl(h,ct(b,h.current)),Mn=null;return}d.flags&32768?(qn||C===1?h=!0:vo||(Ln&536870912)!==0?h=!1:(_o=h=!0,(C===2||C===3||C===6)&&(C=ha.current,C!==null&&C.tag===13&&(C.flags|=16384))),U_(d,h)):sc(d)}function sc(h){var d=h;do{if((d.flags&32768)!==0){U_(d,_o);return}h=d.return;var b=sb(d.alternate,d,nl);if(b!==null){Mn=b;return}if(d=d.sibling,d!==null){Mn=d;return}Mn=d=h}while(d!==null);Yi===0&&(Yi=5)}function U_(h,d){do{var b=tA(h.alternate,h);if(b!==null){b.flags&=32767,Mn=b;return}if(b=h.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!d&&(h=h.sibling,h!==null)){Mn=h;return}Mn=h=b}while(h!==null);Yi=6,Mn=null}function og(h,d,b,C,z,H,J,yt,Ot,te){var me=Je.T,we=gc();try{Vs(2),Je.T=null,cb(h,d,b,C,we,z,H,J,yt,Ot,te)}finally{Je.T=me,Vs(we)}}function cb(h,d,b,C,z,H,J,yt){do ac();while(Rc!==null);if((Pn&6)!==0)throw Error(r(327));var Ot=h.finishedWork;if(C=h.finishedLanes,Ot===null)return null;if(h.finishedWork=null,h.finishedLanes=0,Ot===h.current)throw Error(r(177));h.callbackNode=null,h.callbackPriority=0,h.cancelPendingCommit=null;var te=Ot.lanes|Ot.childLanes;if(te|=Qo,G(h,C,te,H,J,yt),h===yi&&(Mn=yi=null,Ln=0),(Ot.subtreeFlags&10256)===0&&(Ot.flags&10256)===0||Eu||(Eu=!0,Ng=te,Bp=b,fb(Yh,function(){return ac(),null})),b=(Ot.flags&15990)!==0,(Ot.subtreeFlags&15990)!==0||b?(b=Je.T,Je.T=null,H=gc(),Vs(2),J=Pn,Pn|=4,D_(h,Ot),I_(Ot,h),rA(h.containerInfo),h.current=Ot,Lh(h,Ot.alternate,Ot),du(),Pn=J,Vs(H),Je.T=b):h.current=Ot,Eu?(Eu=!1,Rc=h,id=C):xp(h,te),te=h.pendingLanes,te===0&&(Il=null),Y(Ot.stateNode),gt(h),d!==null)for(z=h.onRecoverableError,Ot=0;Ot<d.length;Ot++)te=d[Ot],z(te.value,{componentStack:te.stack});return(id&3)!==0&&ac(),te=h.pendingLanes,(C&4194218)!==0&&(te&42)!==0?h===pv?Bf++:(Bf=0,pv=h):Bf=0,W(0),null}function xp(h,d){(h.pooledCacheLanes&=d)===0&&(d=h.pooledCache,d!=null&&(h.pooledCache=null,Ji(d)))}function ac(){if(Rc!==null){var h=Rc,d=Ng;Ng=0;var b=it(id),C=32>b?32:b;b=Je.T;var z=gc();try{if(Vs(C),Je.T=null,Rc===null)var H=!1;else{C=Bp,Bp=null;var J=Rc,yt=id;if(Rc=null,id=0,(Pn&6)!==0)throw Error(r(331));var Ot=Pn;if(Pn|=4,eu(J.current),uo(J,J.current,yt,C),Pn=Ot,W(0,!1),Dr&&typeof Dr.onPostCommitFiberRoot=="function")try{Dr.onPostCommitFiberRoot($h,J)}catch{}H=!0}return H}finally{Vs(z),Je.T=b,xp(h,d)}}return!1}function Vh(h,d,b){d=ct(b,d),d=$l(h.stateNode,d,2),h=Ae(h,d,2),h!==null&&(V(h,2),gt(h))}function ai(h,d,b){if(h.tag===3)Vh(h,h,b);else for(;d!==null;){if(d.tag===3){Vh(d,h,b);break}else if(d.tag===1){var C=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Il===null||!Il.has(C))){h=ct(b,h),b=Pa(2),C=Ae(d,b,2),C!==null&&(rp(b,C,d,h),V(C,2),gt(C));break}}d=d.return}}function oc(h,d,b){var C=h.pingCache;if(C===null){C=h.pingCache=new zp;var z=new Set;C.set(d,z)}else z=C.get(d),z===void 0&&(z=new Set,C.set(d,z));z.has(b)||(Uf=!0,z.add(b),h=bp.bind(null,h,d,b),d.then(h,h))}function bp(h,d,b){var C=h.pingCache;C!==null&&C.delete(d),h.pingedLanes|=h.suspendedLanes&b,h.warmLanes&=~b,yi===h&&(Ln&b)===b&&(Yi===4||Yi===3&&(Ln&62914560)===Ln&&300>Ba()-dv?(Pn&2)===0&&rc(h,0):qs|=b,Pr===Ln&&(Pr=0)),gt(h)}function Sp(h,d){d===0&&(d=I()),h=ce(h,d),h!==null&&(V(h,d),gt(h))}function Ep(h){var d=h.memoizedState,b=0;d!==null&&(b=d.retryLane),Sp(h,b)}function lg(h,d){var b=0;switch(h.tag){case 13:var C=h.stateNode,z=h.memoizedState;z!==null&&(b=z.retryLane);break;case 19:C=h.stateNode;break;case 22:C=h.stateNode._retryCache;break;default:throw Error(r(314))}C!==null&&C.delete(d),Sp(h,b)}function fb(h,d){return wl(h,d)}function hb(h,d,b,C){this.tag=h,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ru(h){return h=h.prototype,!(!h||!h.isReactComponent)}function su(h,d){var b=h.alternate;return b===null?(b=e(h.tag,d,h.key,h.mode),b.elementType=h.elementType,b.type=h.type,b.stateNode=h.stateNode,b.alternate=h,h.alternate=b):(b.pendingProps=d,b.type=h.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=h.flags&31457280,b.childLanes=h.childLanes,b.lanes=h.lanes,b.child=h.child,b.memoizedProps=h.memoizedProps,b.memoizedState=h.memoizedState,b.updateQueue=h.updateQueue,d=h.dependencies,b.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},b.sibling=h.sibling,b.index=h.index,b.ref=h.ref,b.refCleanup=h.refCleanup,b}function Ef(h,d){h.flags&=31457282;var b=h.alternate;return b===null?(h.childLanes=0,h.lanes=d,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=b.childLanes,h.lanes=b.lanes,h.child=b.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=b.memoizedProps,h.memoizedState=b.memoizedState,h.updateQueue=b.updateQueue,h.type=b.type,d=b.dependencies,h.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),h}function Tf(h,d,b,C,z,H){var J=0;if(C=h,typeof h=="function")ru(h)&&(J=1);else if(typeof h=="string")J=za&&is?Gr(h,b,mr.current)?26:Sg(h)?27:5:za?Gr(h,b,mr.current)?26:5:is&&Sg(h)?27:5;else t:switch(h){case cc:return lc(b.children,z,H,d);case Mf:J=8,z|=24;break;case fc:return h=e(12,b,d,z|2),h.elementType=fc,h.lanes=H,h;case lu:return h=e(13,b,d,z),h.elementType=lu,h.lanes=H,h;case Mp:return h=e(19,b,d,z),h.elementType=Mp,h.lanes=H,h;case cu:return ug(b,z,H,d);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case nA:case hc:J=10;break t;case V_:J=9;break t;case cg:J=11;break t;case kh:J=14;break t;case uu:J=16,C=null;break t}J=29,b=Error(r(130,h===null?"null":typeof h,"")),C=null}return d=e(J,b,d,z),d.elementType=h,d.type=C,d.lanes=H,d}function lc(h,d,b,C){return h=e(7,h,C,d),h.lanes=b,h}function ug(h,d,b,C){h=e(22,h,C,d),h.elementType=cu,h.lanes=b;var z={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var H=z._current;if(H===null)throw Error(r(456));if((z._pendingVisibility&2)===0){var J=ce(H,2);J!==null&&(z._pendingVisibility|=2,Ri(J,H,2))}},attach:function(){var H=z._current;if(H===null)throw Error(r(456));if((z._pendingVisibility&2)!==0){var J=ce(H,2);J!==null&&(z._pendingVisibility&=-3,Ri(J,H,2))}}};return h.stateNode=z,h}function Tp(h,d,b){return h=e(6,h,null,d),h.lanes=b,h}function la(h,d,b){return d=e(4,h.children!==null?h.children:[],h.key,d),d.lanes=b,d.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},d}function Sl(h,d,b,C,z,H,J,yt){this.tag=1,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=qh,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=w(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=w(0),this.hiddenUpdates=w(null),this.identifierPrefix=C,this.onUncaughtError=z,this.onCaughtError=H,this.onRecoverableError=J,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=yt,this.incompleteTransitions=new Map}function au(h,d,b,C,z,H,J,yt,Ot,te,me,we){return h=new Sl(h,d,b,J,yt,Ot,te,we),d=1,H===!0&&(d|=24),H=e(3,null,null,d),h.current=H,H.stateNode=h,d=zn(),d.refCount++,h.pooledCache=d,d.refCount++,H.memoizedState={element:C,isDehydrated:b,cache:d},Kt(H),h}function z_(h){return h?(h=Df,h):Df}function ou(h){var d=h._reactInternals;if(d===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=v(d),h=h!==null?S(h):null,h===null?null:Af(h.stateNode)}function El(h,d,b,C,z,H){z=z_(z),C.context===null?C.context=z:C.pendingContext=z,C=De(d),C.payload={element:b},H=H===void 0?null:H,H!==null&&(C.callback=H),b=Ae(h,C,d),b!==null&&(Ri(b,h,d),Yt(b,h,d))}function Rr(h,d){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var b=h.retryLane;h.retryLane=b!==0&&b<d?b:d}}function Fh(h,d){Rr(h,d),(h=h.alternate)&&Rr(h,d)}var In={},eA=f_(),Ua=R2(),hr=Object.assign,B_=Symbol.for("react.element"),uc=Symbol.for("react.transitional.element"),Tl=Symbol.for("react.portal"),cc=Symbol.for("react.fragment"),Mf=Symbol.for("react.strict_mode"),fc=Symbol.for("react.profiler"),nA=Symbol.for("react.provider"),V_=Symbol.for("react.consumer"),hc=Symbol.for("react.context"),cg=Symbol.for("react.forward_ref"),lu=Symbol.for("react.suspense"),Mp=Symbol.for("react.suspense_list"),kh=Symbol.for("react.memo"),uu=Symbol.for("react.lazy"),cu=Symbol.for("react.offscreen"),Tn=Symbol.for("react.memo_cache_sentinel"),ci=Symbol.iterator,Or=Symbol.for("react.client.reference"),Je=eA.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dc,pc,Hh=!1,mc=Array.isArray,Gh=t.rendererVersion,iA=t.rendererPackageName,nr=t.extraDevToolsConfig,Af=t.getPublicInstance,F_=t.getRootHostContext,db=t.getChildHostContext,pb=t.prepareForCommit,rA=t.resetAfterCommit,k_=t.createInstance,Ap=t.appendInitialChild,fg=t.finalizeInitialChildren,hs=t.shouldSetTextContent,dr=t.createTextInstance,hg=t.scheduleTimeout,wp=t.cancelTimeout,qh=t.noTimeout,Wo=t.isPrimaryRenderer;t.warnsIfNotActing;var Xi=t.supportsMutation,Yo=t.supportsPersistence,ua=t.supportsHydration,dg=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var mb=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Vs=t.setCurrentUpdatePriority,gc=t.getCurrentUpdatePriority,gb=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var yb=t.shouldAttemptEagerTransition,_b=t.detachDeletedInstance;t.requestPostPaintCallback;var H_=t.maySuspendCommit,G_=t.preloadInstance,sA=t.startSuspendingCommit,q_=t.suspendInstance,vb=t.waitForCommitToBeReady,wf=t.NotPendingTransition,fu=t.HostTransitionContext,xb=t.resetFormInstance;t.bindToConsole;var bb=t.supportsMicrotasks,Sb=t.scheduleMicrotask,jh=t.supportsTestSelectors,Eb=t.findFiberRoot,aA=t.getBoundingRect,Tb=t.getTextContent,Ml=t.isHiddenSubtree,Mb=t.matchAccessibilityRole,pg=t.setFocusIfFocusable,mg=t.setupIntersectionObserver,Ab=t.appendChild,j_=t.appendChildToContainer,wb=t.commitTextUpdate,Cb=t.commitMount,Rb=t.commitUpdate,Ob=t.insertBefore,X_=t.insertInContainerBefore,Db=t.removeChild,Nb=t.removeChildFromContainer,gg=t.resetTextContent,Ib=t.hideInstance,Pb=t.hideTextInstance,oA=t.unhideInstance,W_=t.unhideTextInstance,Lb=t.clearContainer,Ub=t.cloneInstance,yg=t.createContainerChildSet,Y_=t.appendChildToContainerChildSet,zb=t.finalizeContainerChildren,Bb=t.replaceContainerChildren,Vb=t.cloneHiddenInstance,$_=t.cloneHiddenTextInstance,Cf=t.isSuspenseInstancePending,Cp=t.isSuspenseInstanceFallback,_g=t.getSuspenseInstanceFallbackErrorDetails,Fb=t.registerSuspenseInstanceRetry,kb=t.canHydrateFormStateMarker,Al=t.isFormStateMarkerMatching,yc=t.getNextHydratableSibling,hu=t.getFirstHydratableChild,Rf=t.getFirstHydratableChildWithinContainer,K_=t.getFirstHydratableChildWithinSuspenseInstance,Z_=t.canHydrateInstance,Hb=t.canHydrateTextInstance,Gb=t.canHydrateSuspenseInstance,Of=t.hydrateInstance,vg=t.hydrateTextInstance,qb=t.hydrateSuspenseInstance,jb=t.getNextHydratableInstanceAfterSuspenseInstance,Xb=t.commitHydratedContainer,xg=t.commitHydratedSuspenseInstance,Wb=t.clearSuspenseBoundary,Q_=t.clearSuspenseBoundaryFromContainer,J_=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var Yb=t.validateHydratableInstance,lA=t.validateHydratableTextInstance,za=t.supportsResources,Gr=t.isHostHoistableType,qr=t.getHoistableRoot,tv=t.getResource,ev=t.acquireResource,nv=t.releaseResource,$b=t.hydrateHoistable,iv=t.mountHoistable,Xh=t.unmountHoistable,rv=t.createHoistableInstance,Kb=t.prepareToCommitHoistables,Zb=t.mayResourceSuspendCommit,sv=t.preloadResource,av=t.suspendResource,is=t.supportsSingletons,bg=t.resolveSingletonInstance,Qb=t.clearSingleton,ov=t.acquireSingletonInstance,lv=t.releaseSingletonInstance,Sg=t.isHostSingletonType,Eg=[],_c=-1,Df={},pr=Math.clz32?Math.clz32:D,uv=Math.log,uA=Math.LN2,Rp=128,Wh=4194304,wl=Ua.unstable_scheduleCallback,$o=Ua.unstable_cancelCallback,vc=Ua.unstable_shouldYield,du=Ua.unstable_requestPaint,Ba=Ua.unstable_now,Tg=Ua.unstable_ImmediatePriority,Op=Ua.unstable_UserBlockingPriority,Yh=Ua.unstable_NormalPriority,Nf=Ua.unstable_IdlePriority,Es=Ua.log,Mg=Ua.unstable_setDisableYieldValue,$h=null,Dr=null,Fs=typeof Object.is=="function"?Object.is:at,Ag=new WeakMap,Va=[],Fa=0,xc=null,Kh=0,ca=[],Ts=0,Ko=null,Cl=1,Rl="",mr=T(null),ho=T(null),pu=T(null),Dp=T(null),gr=null,mi=null,qn=!1,po=null,Zo=!1,Np=Error(r(519)),fa=[],mu=0,Qo=0,Ii=null,bc=null,wg=!1,yr=!1,Cg=!1,Zh=0,Qh=null,Rg=0,Pi=0,rs=null,Ms=!1,Og=!1,Jb=Object.prototype.hasOwnProperty,Ip=Error(r(460)),Pp=Error(r(474)),ks={then:function(){}},As=null,If=null,ws=0,Sc=$n(!0),Ol=$n(!1),Jo=T(null),tl=T(0),ha=T(null),mo=null,Oi=T(0),gu=0,on=null,Kn=null,Wi=null,yu=!1,Pf=!1,Ec=!1,Tc=0,Jh=0,_u=null,tS=0,cv=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},_r={readContext:Tt,use:It,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an};_r.useCacheRefresh=an,_r.useMemoCache=an,_r.useHostTransitionStatus=an,_r.useFormState=an,_r.useActionState=an,_r.useOptimistic=an;var vu={readContext:Tt,use:It,useCallback:function(h,d){return K().memoizedState=[h,d===void 0?null:d],h},useContext:Tt,useEffect:ep,useImperativeHandle:function(h,d,b){b=b!=null?b.concat([h]):null,Th(4194308,4,ko.bind(null,d,h),b)},useLayoutEffect:function(h,d){return Th(4194308,4,h,d)},useInsertionEffect:function(h,d){Th(4,2,h,d)},useMemo:function(h,d){var b=K();d=d===void 0?null:d;var C=h();if(Ec){Z(!0);try{h()}finally{Z(!1)}}return b.memoizedState=[C,d],C},useReducer:function(h,d,b){var C=K();if(b!==void 0){var z=b(d);if(Ec){Z(!0);try{b(d)}finally{Z(!1)}}}else z=d;return C.memoizedState=C.baseState=z,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:z},C.queue=h,h=h.dispatch=Wl.bind(null,on,h),[C.memoizedState,h]},useRef:function(h){var d=K();return h={current:h},d.memoizedState=h},useState:function(h){h=Nn(h);var d=h.queue,b=Ah.bind(null,on,d);return d.dispatch=b,[h.memoizedState,b]},useDebugValue:ju,useDeferredValue:function(h,d){var b=K();return Ho(b,h,d)},useTransition:function(){var h=Nn(!1);return h=np.bind(null,on,h.queue,!0,!1),K().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,d,b){var C=on,z=K();if(qn){if(b===void 0)throw Error(r(407));b=b()}else{if(b=d(),yi===null)throw Error(r(349));(Ln&60)!==0||Xe(C,d,b)}z.memoizedState=b;var H={value:b,getSnapshot:d};return z.queue=H,ep(Sn.bind(null,C,H,h),[h]),C.flags|=2048,cs(9,Ue.bind(null,C,H,b,d),{destroy:void 0},null),b},useId:function(){var h=K(),d=yi.identifierPrefix;if(qn){var b=Rl,C=Cl;b=(C&~(1<<32-pr(C)-1)).toString(32)+b,d=":"+d+"R"+b,b=Tc++,0<b&&(d+="H"+b.toString(32)),d+=":"}else b=tS++,d=":"+d+"r"+b.toString(32)+":";return h.memoizedState=d},useCacheRefresh:function(){return K().memoizedState=Yu.bind(null,on)}};vu.useMemoCache=At,vu.useHostTransitionStatus=na,vu.useFormState=kn,vu.useActionState=kn,vu.useOptimistic=function(h){var d=K();d.memoizedState=d.baseState=h;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=b,d=no.bind(null,on,!0,b),b.dispatch=d,[h,d]};var Hs={readContext:Tt,use:It,useCallback:gl,useContext:Tt,useEffect:cf,useImperativeHandle:Ia,useInsertionEffect:Km,useLayoutEffect:Zm,useMemo:yl,useReducer:ge,useRef:ur,useState:function(){return ge(ae)},useDebugValue:ju,useDeferredValue:function(h,d){var b=vt();return Mh(b,Kn.memoizedState,h,d)},useTransition:function(){var h=ge(ae)[0],d=vt().memoizedState;return[typeof h=="boolean"?h:Ut(h),d]},useSyncExternalStore:Ye,useId:Wu};Hs.useCacheRefresh=Go,Hs.useMemoCache=At,Hs.useHostTransitionStatus=na,Hs.useFormState=lr,Hs.useActionState=lr,Hs.useOptimistic=function(h,d){var b=vt();return Ke(b,Kn,h,d)};var Mc={readContext:Tt,use:It,useCallback:gl,useContext:Tt,useEffect:cf,useImperativeHandle:Ia,useInsertionEffect:Km,useLayoutEffect:Zm,useMemo:yl,useReducer:Ee,useRef:ur,useState:function(){return Ee(ae)},useDebugValue:ju,useDeferredValue:function(h,d){var b=vt();return Kn===null?Ho(b,h,d):Mh(b,Kn.memoizedState,h,d)},useTransition:function(){var h=Ee(ae)[0],d=vt().memoizedState;return[typeof h=="boolean"?h:Ut(h),d]},useSyncExternalStore:Ye,useId:Wu};Mc.useCacheRefresh=Go,Mc.useMemoCache=At,Mc.useHostTransitionStatus=na,Mc.useFormState=Zi,Mc.useActionState=Zi,Mc.useOptimistic=function(h,d){var b=vt();return Kn!==null?Ke(b,Kn,h,d):(b.baseState=h,[h,b.queue.dispatch])};var td={isMounted:function(h){return(h=h._reactInternals)?g(h)===h:!1},enqueueSetState:function(h,d,b){h=h._reactInternals;var C=bs(),z=De(C);z.payload=d,b!=null&&(z.callback=b),d=Ae(h,z,C),d!==null&&(Ri(d,h,C),Yt(d,h,C))},enqueueReplaceState:function(h,d,b){h=h._reactInternals;var C=bs(),z=De(C);z.tag=1,z.payload=d,b!=null&&(z.callback=b),d=Ae(h,z,C),d!==null&&(Ri(d,h,C),Yt(d,h,C))},enqueueForceUpdate:function(h,d){h=h._reactInternals;var b=bs(),C=De(b);C.tag=2,d!=null&&(C.callback=d),d=Ae(h,C,b),d!==null&&(Ri(d,h,b),Yt(d,h,b))}},Ac=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},fv=Error(r(461)),Nr=!1,Lp={dehydrated:null,treeContext:null,retryLane:0},go=T(null),wc=null,yo=null,Up=typeof AbortController<"u"?AbortController:function(){var h=[],d=this.signal={aborted:!1,addEventListener:function(b,C){h.push(C)}};this.abort=function(){d.aborted=!0,h.forEach(function(b){return b()})}},tr=Ua.unstable_scheduleCallback,cA=Ua.unstable_NormalPriority,ir={$$typeof:hc,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},hv=Je.S;Je.S=function(h,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&fe(h,d),hv!==null&&hv(h,d)};var Lf=T(null),xu=!1,ln=!1,gi=!1,On=typeof WeakSet=="function"?WeakSet:Set,We=null,Ti=!1,Zn=null,vr=!1,Cs=null,Cc=8192,bu={getCacheForType:function(h){var d=Tt(ir),b=d.data.get(h);return b===void 0&&(b=h(),d.data.set(h,b)),b}},Li=0,el=1,Dl=2,ed=3,Gs=4;if(typeof Symbol=="function"&&Symbol.for){var Nl=Symbol.for;Li=Nl("selector.component"),el=Nl("selector.has_pseudo_class"),Dl=Nl("selector.role"),ed=Nl("selector.test_id"),Gs=Nl("selector.text")}var zp=typeof WeakMap=="function"?WeakMap:Map,Pn=0,yi=null,Mn=null,Ln=0,fi=0,Ir=null,_o=!1,vo=!1,Uf=!1,nl=0,Yi=0,xo=0,Su=0,qs=0,ka=0,Pr=0,nd=null,bo=null,Dg=!1,dv=0,Ha=1/0,zf=null,Il=null,Eu=!1,Rc=null,id=0,Ng=0,Bp=null,Bf=0,pv=null;return In.attemptContinuousHydration=function(h){if(h.tag===13){var d=ce(h,67108864);d!==null&&Ri(d,h,67108864),Fh(h,67108864)}},In.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var d=bs(),b=ce(h,d);b!==null&&Ri(b,h,d),Fh(h,d)}},In.attemptSynchronousHydration=function(h){switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var d=O(h.pendingLanes);if(d!==0){for(h.pendingLanes|=2,h.entangledLanes|=2;d;){var b=1<<31-pr(d);h.entanglements[1]|=b,d&=~b}gt(h),(Pn&6)===0&&(Ha=Ba()+500,W(0))}}break;case 13:d=ce(h,2),d!==null&&Ri(d,h,2),L_(),Fh(h,2)}},In.batchedUpdates=function(h,d){return h(d)},In.createComponentSelector=function(h){return{$$typeof:Li,value:h}},In.createContainer=function(h,d,b,C,z,H,J,yt,Ot,te){return au(h,d,!1,null,b,C,H,J,yt,Ot,te,null)},In.createHasPseudoClassSelector=function(h){return{$$typeof:el,value:h}},In.createHydrationContainer=function(h,d,b,C,z,H,J,yt,Ot,te,me,we,de){return h=au(b,C,!0,h,z,H,yt,Ot,te,me,we,de),h.context=z_(null),b=h.current,C=bs(),z=De(C),z.callback=d??null,Ae(b,z,C),h.current.lanes=C,V(h,C),gt(h),h},In.createPortal=function(h,d,b){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tl,key:C==null?null:""+C,children:h,containerInfo:d,implementation:b}},In.createRoleSelector=function(h){return{$$typeof:Dl,value:h}},In.createTestNameSelector=function(h){return{$$typeof:ed,value:h}},In.createTextSelector=function(h){return{$$typeof:Gs,value:h}},In.defaultOnCaughtError=function(h){console.error(h)},In.defaultOnRecoverableError=function(h){Ac(h)},In.defaultOnUncaughtError=function(h){Ac(h)},In.deferredUpdates=function(h){var d=Je.T,b=gc();try{return Vs(32),Je.T=null,h()}finally{Vs(b),Je.T=d}},In.discreteUpdates=function(h,d,b,C,z){var H=Je.T,J=gc();try{return Vs(2),Je.T=null,h(d,b,C,z)}finally{Vs(J),Je.T=H,Pn===0&&(Ha=Ba()+500)}},In.findAllNodes=ic,In.findBoundingRects=function(h,d){if(!jh)throw Error(r(363));d=ic(h,d),h=[];for(var b=0;b<d.length;b++)h.push(aA(d[b]));for(d=h.length-1;0<d;d--){b=h[d];for(var C=b.x,z=C+b.width,H=b.y,J=H+b.height,yt=d-1;0<=yt;yt--)if(d!==yt){var Ot=h[yt],te=Ot.x,me=te+Ot.width,we=Ot.y,de=we+Ot.height;if(C>=te&&H>=we&&z<=me&&J<=de){h.splice(d,1);break}else if(C!==te||b.width!==Ot.width||de<H||we>J){if(!(H!==we||b.height!==Ot.height||me<C||te>z)){te>C&&(Ot.width+=te-C,Ot.x=C),me<z&&(Ot.width=z-te),h.splice(d,1);break}}else{we>H&&(Ot.height+=we-H,Ot.y=H),de<J&&(Ot.height=J-we),h.splice(d,1);break}}}return h},In.findHostInstance=ou,In.findHostInstanceWithNoPortals=function(h){return h=v(h),h=h!==null?E(h):null,h===null?null:Af(h.stateNode)},In.findHostInstanceWithWarning=function(h){return ou(h)},In.flushPassiveEffects=ac,In.flushSyncFromReconciler=function(h){var d=Pn;Pn|=1;var b=Je.T,C=gc();try{if(Vs(2),Je.T=null,h)return h()}finally{Vs(C),Je.T=b,Pn=d,(Pn&6)===0&&W(0)}},In.flushSyncWork=L_,In.focusWithin=function(h,d){if(!jh)throw Error(r(363));for(h=nc(h),d=bf(h,d),d=Array.from(d),h=0;h<d.length;){var b=d[h++],C=b.tag;if(!Ml(b)){if((C===5||C===26||C===27)&&pg(b.stateNode))return!0;for(b=b.child;b!==null;)d.push(b),b=b.sibling}}return!1},In.getFindAllNodesFailureDescription=function(h,d){if(!jh)throw Error(r(363));var b=0,C=[];h=[nc(h),0];for(var z=0;z<h.length;){var H=h[z++],J=H.tag,yt=h[z++],Ot=d[yt];if((J!==5&&J!==26&&J!==27||!Ml(H))&&(ag(H,Ot)&&(C.push(oa(Ot)),yt++,yt>b&&(b=yt)),yt<d.length))for(H=H.child;H!==null;)h.push(H,yt),H=H.sibling}if(b<d.length){for(h=[];b<d.length;b++)h.push(oa(d[b]));return`findAllNodes was able to match part of the selector:
  `+(C.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},In.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 27:case 5:return Af(h.child.stateNode);default:return h.child.stateNode}},In.injectIntoDevTools=function(){var h={bundleType:0,version:Gh,rendererPackageName:iA,currentDispatcherRef:Je,findFiberByHostInstance:dg,reconcilerVersion:"19.0.0"};if(nr!==null&&(h.rendererConfig=nr),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)h=!0;else{try{$h=d.inject(h),Dr=d}catch{}h=!!d.checkDCE}}return h},In.isAlreadyRendering=function(){return!1},In.observeVisibleRects=function(h,d,b,C){if(!jh)throw Error(r(363));h=ic(h,d);var z=mg(h,b,C).disconnect;return{disconnect:function(){z()}}},In.shouldError=function(){return null},In.shouldSuspend=function(){return!1},In.startHostTransition=function(h,d,b,C){if(h.tag!==5)throw Error(r(476));var z=Xu(h).queue;np(h,z,d,wf,b===null?i:function(){var H=Xu(h).next.queue;return ia(h,H,{},bs()),b(C)})},In.updateContainer=function(h,d,b,C){var z=d.current,H=bs();return El(z,H,h,d,b,C),H},In.updateContainerSync=function(h,d,b,C){return d.tag===0&&ac(),El(d.current,2,h,d,b,C),2},In},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})}(Nw)),Nw.exports}var VP;function $W(){return VP||(VP=1,Dw.exports=YW()),Dw.exports}var KW=$W();const ZW=c_(KW);var FP=R2();function bO(n,t,e){if(!n)return;if(e(n)===!0)return n;let i=t?n.return:n.child;for(;i;){const r=bO(i,t,e);if(r)return r;i=t?null:i.sibling}}function z4(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const SO=z4(ot.createContext(null));let B4=class extends ot.Component{render(){return ot.createElement(SO.Provider,{value:this._reactInternals},this.props.children)}};function V4(){const n=ot.useContext(SO);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=ot.useId();return ot.useMemo(()=>{for(const e of[n,n==null?void 0:n.alternate]){if(!e)continue;const i=bO(e,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===t)return!0;s=s.next}});if(i)return i}},[n,t])}const QW=Symbol.for("react.context"),JW=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===QW;function tY(){const n=V4(),[t]=ot.useState(()=>new Map);t.clear();let e=n;for(;e;){const i=e.type;JW(i)&&i!==SO&&!t.has(i)&&t.set(i,ot.use(z4(i))),e=e.return}return t}function eY(){const n=tY();return ot.useMemo(()=>Array.from(n.keys()).reduce((t,e)=>i=>ot.createElement(t,null,ot.createElement(e.Provider,{...i,value:n.get(e)})),t=>ot.createElement(B4,{...t})),[n])}function F4(n){let t=n.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const k4=n=>n&&n.isOrthographicCamera,nY=n=>n&&n.hasOwnProperty("current"),iY=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),qx=((n,t)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))()?ot.useLayoutEffect:ot.useEffect;function H4(n){const t=ot.useRef(n);return qx(()=>void(t.current=n),[n]),t}function rY(){const n=V4(),t=eY();return ot.useMemo(()=>({children:e})=>{const r=!!bO(n,!0,s=>s.type===ot.StrictMode)?ot.StrictMode:ot.Fragment;return Mt.jsx(r,{children:Mt.jsx(t,{children:e})})},[n,t])}function sY({set:n}){return qx(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const aY=(n=>(n=class extends ot.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function G4(n){var t;const e=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}function ey(n){var t;return(t=n.__r3f)==null?void 0:t.root.getState()}const br={obj:n=>n===Object(n)&&!br.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,t,{arrays:e="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof t||!!n!=!!t)return!1;if(br.str(n)||br.num(n)||br.boo(n))return n===t;const s=br.obj(n);if(s&&i==="reference")return n===t;const a=br.arr(n);if(a&&e==="reference")return n===t;if((a||s)&&n===t)return!0;let l;for(l in n)if(!(l in t))return!1;if(s&&e==="shallow"&&i==="shallow"){for(l in r?t:n)if(!br.equ(n[l],t[l],{strict:r,objects:"reference"}))return!1}else for(l in r?t:n)if(n[l]!==t[l])return!1;if(br.und(l)){if(a&&n.length===0&&t.length===0||s&&Object.keys(n).length===0&&Object.keys(t).length===0)return!0;if(n!==t)return!1}return!0}};function oY(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const t in n){const e=n[t];(e==null?void 0:e.type)!=="Scene"&&(e==null||e.dispose==null||e.dispose())}}const q4=["children","key","ref"];function lY(n){const t={};for(const e in n)q4.includes(e)||(t[e]=n[e]);return t}function G1(n,t,e,i){const r=n;let s=r==null?void 0:r.__r3f;return s||(s={root:t,type:e,parent:null,children:[],props:lY(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=s)),s}function lx(n,t){let e=n[t];if(!t.includes("-"))return{root:n,key:t,target:e};e=n;for(const r of t.split("-")){var i;t=r,n=e,e=(i=e)==null?void 0:i[t]}return{root:n,key:t,target:e}}const kP=/-\d+$/;function q1(n,t){if(br.str(t.props.attach)){if(kP.test(t.props.attach)){const r=t.props.attach.replace(kP,""),{root:s,key:a}=lx(n.object,r);Array.isArray(s[a])||(s[a]=[])}const{root:e,key:i}=lx(n.object,t.props.attach);t.previousAttach=e[i],e[i]=t.object}else br.fun(t.props.attach)&&(t.previousAttach=t.props.attach(n.object,t.object))}function j1(n,t){if(br.str(t.props.attach)){const{root:e,key:i}=lx(n.object,t.props.attach),r=t.previousAttach;r===void 0?delete e[i]:e[i]=r}else t.previousAttach==null||t.previousAttach(n.object,t.object);delete t.previousAttach}const aR=[...q4,"args","dispose","attach","object","onUpdate","dispose"],HP=new Map;function uY(n){let t=HP.get(n.constructor);try{t||(t=new n.constructor,HP.set(n.constructor,t))}catch{}return t}function cY(n,t){const e={};for(const i in t)if(!aR.includes(i)&&!br.equ(t[i],n.props[i])){e[i]=t[i];for(const r in t)r.startsWith(`${i}-`)&&(e[r]=t[r])}for(const i in n.props){if(aR.includes(i)||t.hasOwnProperty(i))continue;const{root:r,key:s}=lx(n.object,i);if(r.constructor&&r.constructor.length===0){const a=uY(r);br.und(a)||(e[s]=a[s])}else e[s]=0}return e}const fY=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],hY=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Sd(n,t){var e;const i=n.__r3f,r=i&&F4(i).getState(),s=i==null?void 0:i.eventCount;for(const l in t){let c=t[l];if(aR.includes(l))continue;if(i&&hY.test(l)){typeof c=="function"?i.handlers[l]=c:delete i.handlers[l],i.eventCount=Object.keys(i.handlers).length;continue}if(c===void 0)continue;let{root:f,key:m,target:g}=lx(n,l);if(g instanceof Hy&&c instanceof Hy)g.mask=c.mask;else if(g instanceof Ne&&iY(c))g.set(c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&c!=null&&c.constructor&&g.constructor===c.constructor)g.copy(c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(c))typeof g.fromArray=="function"?g.fromArray(c):g.set(...c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof c=="number")typeof g.setScalar=="function"?g.setScalar(c):g.set(c);else{var a;f[m]=c,r&&!r.linear&&fY.includes(m)&&(a=f[m])!=null&&a.isTexture&&f[m].format===Ta&&f[m].type===Bu&&(f[m].colorSpace=ba)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(e=i.object)!=null&&e.isObject3D&&s!==i.eventCount){const l=i.object,c=r.internal.interaction.indexOf(l);c>-1&&r.internal.interaction.splice(c,1),i.eventCount&&l.raycast!==null&&r.internal.interaction.push(l)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&__(i),n}function __(n){var t;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const e=(t=n.root)==null||t.getState==null?void 0:t.getState();e&&e.internal.frames===0&&e.invalidate()}function dY(n,t){n.manual||(k4(n)?(n.left=t.width/-2,n.right=t.width/2,n.top=t.height/2,n.bottom=t.height/-2):n.aspect=t.width/t.height,n.updateProjectionMatrix())}const Co=n=>n==null?void 0:n.isObject3D;function uE(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function j4(n,t,e,i){const r=e.get(t);r&&(e.delete(t),e.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function pY(n,t){const{internal:e}=n.getState();e.interaction=e.interaction.filter(i=>i!==t),e.initialHits=e.initialHits.filter(i=>i!==t),e.hovered.forEach((i,r)=>{(i.eventObject===t||i.object===t)&&e.hovered.delete(r)}),e.capturedMap.forEach((i,r)=>{j4(e.capturedMap,t,i,r)})}function mY(n){function t(c){const{internal:f}=n.getState(),m=c.offsetX-f.initialClick[0],g=c.offsetY-f.initialClick[1];return Math.round(Math.sqrt(m*m+g*g))}function e(c){return c.filter(f=>["Move","Over","Enter","Out","Leave"].some(m=>{var g;return(g=f.__r3f)==null?void 0:g.handlers["onPointer"+m]}))}function i(c,f){const m=n.getState(),g=new Set,y=[],v=f?f(m.internal.interaction):m.internal.interaction;for(let x=0;x<v.length;x++){const R=ey(v[x]);R&&(R.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(c,m);function S(x){const R=ey(x);if(!R||!R.events.enabled||R.raycaster.camera===null)return[];if(R.raycaster.camera===void 0){var D;R.events.compute==null||R.events.compute(c,R,(D=R.previousRoot)==null?void 0:D.getState()),R.raycaster.camera===void 0&&(R.raycaster.camera=null)}return R.raycaster.camera?R.raycaster.intersectObject(x,!0):[]}let E=v.flatMap(S).sort((x,R)=>{const D=ey(x.object),O=ey(R.object);return!D||!O?x.distance-R.distance:O.events.priority-D.events.priority||x.distance-R.distance}).filter(x=>{const R=uE(x);return g.has(R)?!1:(g.add(R),!0)});m.events.filter&&(E=m.events.filter(E,m));for(const x of E){let R=x.object;for(;R;){var T;(T=R.__r3f)!=null&&T.eventCount&&y.push({...x,eventObject:R}),R=R.parent}}if("pointerId"in c&&m.internal.capturedMap.has(c.pointerId))for(let x of m.internal.capturedMap.get(c.pointerId).values())g.has(uE(x.intersection))||y.push(x.intersection);return y}function r(c,f,m,g){if(c.length){const y={stopped:!1};for(const v of c){let S=ey(v.object);if(S||v.object.traverseAncestors(E=>{const T=ey(E);if(T)return S=T,!1}),S){const{raycaster:E,pointer:T,camera:x,internal:R}=S,D=new ut(T.x,T.y,0).unproject(x),O=I=>{var w,V;return(w=(V=R.capturedMap.get(I))==null?void 0:V.has(v.eventObject))!=null?w:!1},N=I=>{const w={intersection:v,target:f.target};R.capturedMap.has(I)?R.capturedMap.get(I).set(v.eventObject,w):R.capturedMap.set(I,new Map([[v.eventObject,w]])),f.target.setPointerCapture(I)},B=I=>{const w=R.capturedMap.get(I);w&&j4(R.capturedMap,v.eventObject,w,I)};let L={};for(let I in f){let w=f[I];typeof w!="function"&&(L[I]=w)}let U={...v,...L,pointer:T,intersections:c,stopped:y.stopped,delta:m,unprojectedPoint:D,ray:E.ray,camera:x,stopPropagation(){const I="pointerId"in f&&R.capturedMap.get(f.pointerId);if((!I||I.has(v.eventObject))&&(U.stopped=y.stopped=!0,R.hovered.size&&Array.from(R.hovered.values()).find(w=>w.eventObject===v.eventObject))){const w=c.slice(0,c.indexOf(v));s([...w,v])}},target:{hasPointerCapture:O,setPointerCapture:N,releasePointerCapture:B},currentTarget:{hasPointerCapture:O,setPointerCapture:N,releasePointerCapture:B},nativeEvent:f};if(g(U),y.stopped===!0)break}}}return c}function s(c){const{internal:f}=n.getState();for(const m of f.hovered.values())if(!c.length||!c.find(g=>g.object===m.object&&g.index===m.index&&g.instanceId===m.instanceId)){const y=m.eventObject.__r3f;if(f.hovered.delete(uE(m)),y!=null&&y.eventCount){const v=y.handlers,S={...m,intersections:c};v.onPointerOut==null||v.onPointerOut(S),v.onPointerLeave==null||v.onPointerLeave(S)}}}function a(c,f){for(let m=0;m<f.length;m++){const g=f[m].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(c)}}function l(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return f=>{const{internal:m}=n.getState();"pointerId"in f&&m.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(f.pointerId)&&(m.capturedMap.delete(f.pointerId),s([]))})}}return function(m){const{onPointerMissed:g,internal:y}=n.getState();y.lastEvent.current=m;const v=c==="onPointerMove",S=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",T=i(m,v?e:void 0),x=S?t(m):0;c==="onPointerDown"&&(y.initialClick=[m.offsetX,m.offsetY],y.initialHits=T.map(D=>D.eventObject)),S&&!T.length&&x<=2&&(a(m,y.interaction),g&&g(m)),v&&s(T);function R(D){const O=D.eventObject,N=O.__r3f;if(!(N!=null&&N.eventCount))return;const B=N.handlers;if(v){if(B.onPointerOver||B.onPointerEnter||B.onPointerOut||B.onPointerLeave){const L=uE(D),U=y.hovered.get(L);U?U.stopped&&D.stopPropagation():(y.hovered.set(L,D),B.onPointerOver==null||B.onPointerOver(D),B.onPointerEnter==null||B.onPointerEnter(D))}B.onPointerMove==null||B.onPointerMove(D)}else{const L=B[c];L?(!S||y.initialHits.includes(O))&&(a(m,y.interaction.filter(U=>!y.initialHits.includes(U))),L(D)):S&&y.initialHits.includes(O)&&a(m,y.interaction.filter(U=>!y.initialHits.includes(U)))}}r(T,m,x,R)}}return{handlePointer:l}}const GP=n=>!!(n!=null&&n.render),X4=ot.createContext(null),gY=(n,t)=>{const e=WW((l,c)=>{const f=new ut,m=new ut,g=new ut;function y(x=c().camera,R=m,D=c().size){const{width:O,height:N,top:B,left:L}=D,U=O/N;R.isVector3?g.copy(R):g.set(...R);const I=x.getWorldPosition(f).distanceTo(g);if(k4(x))return{width:O/x.zoom,height:N/x.zoom,top:B,left:L,factor:1,distance:I,aspect:U};{const w=x.fov*Math.PI/180,V=2*Math.tan(w/2)*I,G=V*(O/N);return{width:G,height:V,top:B,left:L,factor:O/G,distance:I,aspect:U}}}let v;const S=x=>l(R=>({performance:{...R.performance,current:x}})),E=new oe;return{set:l,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(x=1)=>n(c(),x),advance:(x,R)=>t(x,R,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new dO,pointer:E,mouse:E,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=c();v&&clearTimeout(v),x.performance.current!==x.performance.min&&S(x.performance.min),v=setTimeout(()=>S(c().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:y},setEvents:x=>l(R=>({...R,events:{...R.events,...x}})),setSize:(x,R,D=0,O=0)=>{const N=c().camera,B={width:x,height:R,top:D,left:O};l(L=>({size:B,viewport:{...L.viewport,...y(N,m,B)}}))},setDpr:x=>l(R=>{const D=G4(x);return{viewport:{...R.viewport,dpr:D,initialDpr:R.viewport.initialDpr||D}}}),setFrameloop:(x="always")=>{const R=c().clock;R.stop(),R.elapsedTime=0,x!=="never"&&(R.start(),R.elapsedTime=0),l(()=>({frameloop:x}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:ot.createRef(),active:!1,frames:0,priority:0,subscribe:(x,R,D)=>{const O=c().internal;return O.priority=O.priority+(R>0?1:0),O.subscribers.push({ref:x,priority:R,store:D}),O.subscribers=O.subscribers.sort((N,B)=>N.priority-B.priority),()=>{const N=c().internal;N!=null&&N.subscribers&&(N.priority=N.priority-(R>0?1:0),N.subscribers=N.subscribers.filter(B=>B.ref!==x))}}}}}),i=e.getState();let r=i.size,s=i.viewport.dpr,a=i.camera;return e.subscribe(()=>{const{camera:l,size:c,viewport:f,gl:m,set:g}=e.getState();if(c.width!==r.width||c.height!==r.height||f.dpr!==s){r=c,s=f.dpr,dY(l,c),f.dpr>0&&m.setPixelRatio(f.dpr);const y=typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(c.width,c.height,y)}l!==a&&(a=l,g(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(l)}})))}),e.subscribe(l=>n(l)),e};function W4(){const n=ot.useContext(X4);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function yd(n=e=>e,t){return W4()(n,t)}function EO(n,t=0){const e=W4(),i=e.getState().internal.subscribe,r=H4(n);return qx(()=>i(r,t,e),[t,i,e]),null}function yY(n){const t=ZW(n);return t.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ot.version}),t}const Y4=0,jy={},_Y=/^three(?=[A-Z])/,pM=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let vY=0;const xY=n=>typeof n=="function";function $4(n){if(xY(n)){const t=`${vY++}`;return jy[t]=n,t}else Object.assign(jy,n)}function K4(n,t){const e=pM(n),i=jy[e];if(n!=="primitive"&&!i)throw new Error(`R3F: ${e} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(t.args!==void 0&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function bY(n,t,e){var i;return n=pM(n)in jy?n:n.replace(_Y,""),K4(n,t),n==="primitive"&&(i=t.object)!=null&&i.__r3f&&delete t.object.__r3f,G1(t.object,e,n,t)}function SY(n){if(!n.isHidden){var t;n.props.attach&&(t=n.parent)!=null&&t.object?j1(n.parent,n):Co(n.object)&&(n.object.visible=!1),n.isHidden=!0,__(n)}}function Z4(n){if(n.isHidden){var t;n.props.attach&&(t=n.parent)!=null&&t.object?q1(n.parent,n):Co(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,__(n)}}function TO(n,t,e){const i=t.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!t.object){var r,s;const a=jy[pM(t.type)];t.object=(r=t.props.object)!=null?r:new a(...(s=t.props.args)!=null?s:[]),t.object.__r3f=t}if(Sd(t.object,t.props),t.props.attach)q1(n,t);else if(Co(t.object)&&Co(n.object)){const a=n.object.children.indexOf(e==null?void 0:e.object);if(e&&a!==-1){const l=n.object.children.indexOf(t.object);if(l!==-1){n.object.children.splice(l,1);const c=l<a?a-1:a;n.object.children.splice(c,0,t.object)}else t.object.parent=n.object,n.object.children.splice(a,0,t.object),t.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:t.object})}else n.object.add(t.object)}for(const a of t.children)TO(t,a);__(t)}}function Iw(n,t){t&&(t.parent=n,n.children.push(t),TO(n,t))}function qP(n,t,e){if(!t||!e)return;t.parent=n;const i=n.children.indexOf(e);i!==-1?n.children.splice(i,0,t):n.children.push(t),TO(n,t,e)}function Q4(n){if(typeof n.dispose=="function"){const t=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?t():FP.unstable_scheduleCallback(FP.unstable_IdlePriority,t)}}function oR(n,t,e){if(!t)return;t.parent=null;const i=n.children.indexOf(t);i!==-1&&n.children.splice(i,1),t.props.attach?j1(n,t):Co(t.object)&&Co(n.object)&&(n.object.remove(t.object),pY(F4(t),t.object));const r=t.props.dispose!==null&&e!==!1;for(let s=t.children.length-1;s>=0;s--){const a=t.children[s];oR(t,a,r)}t.children.length=0,delete t.object.__r3f,r&&t.type!=="primitive"&&t.object.type!=="Scene"&&Q4(t.object),e===void 0&&__(t)}function EY(n,t){for(const e of[n,n.alternate])if(e!==null)if(typeof e.ref=="function"){e.refCleanup==null||e.refCleanup();const i=e.ref(t);typeof i=="function"&&(e.refCleanup=i)}else e.ref&&(e.ref.current=t)}const kE=[];function TY(){for(const[e]of kE){const i=e.parent;if(i){e.props.attach?j1(i,e):Co(e.object)&&Co(i.object)&&i.object.remove(e.object);for(const r of e.children)r.props.attach?j1(e,r):Co(r.object)&&Co(e.object)&&e.object.remove(r.object)}e.isHidden&&Z4(e),e.object.__r3f&&delete e.object.__r3f,e.type!=="primitive"&&Q4(e.object)}for(const[e,i,r]of kE){e.props=i;const s=e.parent;if(s){var n,t;const a=jy[pM(e.type)];e.object=(n=e.props.object)!=null?n:new a(...(t=e.props.args)!=null?t:[]),e.object.__r3f=e,EY(r,e.object),Sd(e.object,e.props),e.props.attach?q1(s,e):Co(e.object)&&Co(s.object)&&s.object.add(e.object);for(const l of e.children)l.props.attach?q1(e,l):Co(l.object)&&Co(e.object)&&e.object.add(l.object);__(e)}}kE.length=0}const Pw=()=>{},jP={};let cE=Y4;const MY=0,AY=4,lR=yY({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:bY,removeChild:oR,appendChild:Iw,appendInitialChild:Iw,insertBefore:qP,appendChildToContainer(n,t){const e=n.getState().scene.__r3f;!t||!e||Iw(e,t)},removeChildFromContainer(n,t){const e=n.getState().scene.__r3f;!t||!e||oR(e,t)},insertInContainerBefore(n,t,e){const i=n.getState().scene.__r3f;!t||!e||!i||qP(i,t,e)},getRootHostContext:()=>jP,getChildHostContext:()=>jP,commitUpdate(n,t,e,i,r){var s,a,l;K4(t,i);let c=!1;if((n.type==="primitive"&&e.object!==i.object||((s=i.args)==null?void 0:s.length)!==((a=e.args)==null?void 0:a.length)||(l=i.args)!=null&&l.some((m,g)=>{var y;return m!==((y=e.args)==null?void 0:y[g])}))&&(c=!0),c)kE.push([n,{...i},r]);else{const m=cY(n,i);Object.keys(m).length&&(Object.assign(n.props,m),Sd(n.object,m))}(r.sibling===null||(r.flags&AY)===MY)&&TY()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>G1(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:SY,unhideInstance:Z4,createTextInstance:Pw,hideTextInstance:Pw,unhideTextInstance:Pw,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:ot.createContext(null),setCurrentUpdatePriority(n){cE=n},getCurrentUpdatePriority(){return cE},resolveUpdatePriority(){var n;if(cE!==Y4)return cE;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return FE.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return FE.ContinuousEventPriority;default:return FE.DefaultEventPriority}},resetFormInstance(){}}),Lm=new Map,ny={objects:"shallow",strict:!1};function wY(n,t){if(!t&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:e,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:e,height:i,top:r,left:s}}else if(!t&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...t}}function CY(n){const t=Lm.get(n),e=t==null?void 0:t.fiber,i=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||gY(fR,WP),a=e||lR.createContainer(s,FE.ConcurrentRoot,null,!1,null,"",r,r,r,null);t||Lm.set(n,{fiber:a,store:s});let l,c,f=!1,m=null;return{async configure(g={}){let y;m=new Promise(pt=>y=pt);let{gl:v,size:S,scene:E,events:T,onCreated:x,shadows:R=!1,linear:D=!1,flat:O=!1,legacy:N=!1,orthographic:B=!1,frameloop:L="always",dpr:U=[1,2],performance:I,raycaster:w,camera:V,onPointerMissed:G}=g,k=s.getState(),st=k.gl;if(!k.gl){const pt={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},wt=typeof v=="function"?await v(pt):v;GP(wt)?st=wt:st=new L4({...pt,...v}),k.set({gl:st})}let it=k.raycaster;it||k.set({raycaster:it=new yO});const{params:Y,...Z}=w||{};if(br.equ(Z,it,ny)||Sd(it,{...Z}),br.equ(Y,it.params,ny)||Sd(it,{params:{...it.params,...Y}}),!k.camera||k.camera===c&&!br.equ(c,V,ny)){c=V;const pt=V==null?void 0:V.isCamera,wt=pt?V:B?new Gx(0,0,0,0,.1,1e3):new Ns(75,0,.1,1e3);pt||(wt.position.z=5,V&&(Sd(wt,V),wt.manual||("aspect"in V||"left"in V||"right"in V||"bottom"in V||"top"in V)&&(wt.manual=!0,wt.updateProjectionMatrix())),!k.camera&&!(V!=null&&V.rotation)&&wt.lookAt(0,0,0)),k.set({camera:wt}),it.camera=wt}if(!k.scene){let pt;E!=null&&E.isScene?(pt=E,G1(pt,s,"",{})):(pt=new X2,G1(pt,s,"",{}),E&&Sd(pt,E)),k.set({scene:pt})}T&&!k.events.handlers&&k.set({events:T(s)});const at=wY(n,S);if(br.equ(at,k.size,ny)||k.setSize(at.width,at.height,at.top,at.left),U&&k.viewport.dpr!==G4(U)&&k.setDpr(U),k.frameloop!==L&&k.setFrameloop(L),k.onPointerMissed||k.set({onPointerMissed:G}),I&&!br.equ(I,k.performance,ny)&&k.set(pt=>({performance:{...pt.performance,...I}})),!k.xr){var ct;const pt=(nt,lt)=>{const ft=s.getState();ft.frameloop!=="never"&&WP(nt,!0,ft,lt)},wt=()=>{const nt=s.getState();nt.gl.xr.enabled=nt.gl.xr.isPresenting,nt.gl.xr.setAnimationLoop(nt.gl.xr.isPresenting?pt:null),nt.gl.xr.isPresenting||fR(nt)},zt={connect(){const nt=s.getState().gl;nt.xr.addEventListener("sessionstart",wt),nt.xr.addEventListener("sessionend",wt)},disconnect(){const nt=s.getState().gl;nt.xr.removeEventListener("sessionstart",wt),nt.xr.removeEventListener("sessionend",wt)}};typeof((ct=st.xr)==null?void 0:ct.addEventListener)=="function"&&zt.connect(),k.set({xr:zt})}if(st.shadowMap){const pt=st.shadowMap.enabled,wt=st.shadowMap.type;if(st.shadowMap.enabled=!!R,br.boo(R))st.shadowMap.type=x0;else if(br.str(R)){var $;const zt={basic:Bz,percentage:UT,soft:x0,variance:Ou};st.shadowMap.type=($=zt[R])!=null?$:x0}else br.obj(R)&&Object.assign(st.shadowMap,R);(pt!==st.shadowMap.enabled||wt!==st.shadowMap.type)&&(st.shadowMap.needsUpdate=!0)}return Xn.enabled=!N,f||(st.outputColorSpace=D?Bd:ba,st.toneMapping=O?Xc:O2),k.legacy!==N&&k.set(()=>({legacy:N})),k.linear!==D&&k.set(()=>({linear:D})),k.flat!==O&&k.set(()=>({flat:O})),v&&!br.fun(v)&&!GP(v)&&!br.equ(v,st,ny)&&Sd(st,v),l=x,f=!0,y(),this},render(g){return!f&&!m&&this.configure(),m.then(()=>{lR.updateContainer(Mt.jsx(RY,{store:s,children:g,onCreated:l,rootElement:n}),a,null,()=>{})}),s},unmount(){J4(n)}}}function RY({store:n,children:t,onCreated:e,rootElement:i}){return qx(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),e&&e(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),Mt.jsx(X4.Provider,{value:n,children:t})}function J4(n,t){const e=Lm.get(n),i=e==null?void 0:e.fiber;if(i){const r=e==null?void 0:e.store.getState();r&&(r.internal.active=!1),lR.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,a,l,c;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(l=r.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(c=r.gl)!=null&&c.xr&&r.xr.disconnect(),oY(r.scene),Lm.delete(n)}catch{}},500)})}}const OY=new Set,DY=new Set,NY=new Set;function Lw(n,t){if(n.size)for(const{callback:e}of n.values())e(t)}function O0(n,t){switch(n){case"before":return Lw(OY,t);case"after":return Lw(DY,t);case"tail":return Lw(NY,t)}}let Uw,zw;function uR(n,t,e){let i=t.clock.getDelta();t.frameloop==="never"&&typeof n=="number"&&(i=n-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=n),Uw=t.internal.subscribers;for(let r=0;r<Uw.length;r++)zw=Uw[r],zw.ref.current(zw.store.getState(),i,e);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}let X1=!1,cR=!1,Bw,XP,iy;function tV(n){XP=requestAnimationFrame(tV),X1=!0,Bw=0,O0("before",n),cR=!0;for(const e of Lm.values()){var t;iy=e.store.getState(),iy.internal.active&&(iy.frameloop==="always"||iy.internal.frames>0)&&!((t=iy.gl.xr)!=null&&t.isPresenting)&&(Bw+=uR(n,iy))}if(cR=!1,O0("after",n),Bw===0)return O0("tail",n),X1=!1,cancelAnimationFrame(XP)}function fR(n,t=1){var e;if(!n)return Lm.forEach(i=>fR(i.store.getState(),t));(e=n.gl.xr)!=null&&e.isPresenting||!n.internal.active||n.frameloop==="never"||(t>1?n.internal.frames=Math.min(60,n.internal.frames+t):cR?n.internal.frames=2:n.internal.frames=1,X1||(X1=!0,requestAnimationFrame(tV)))}function WP(n,t=!0,e,i){if(t&&O0("before",n),e)uR(n,e,i);else for(const r of Lm.values())uR(n,r.store.getState());t&&O0("after",n)}const Vw={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function IY(n){const{handlePointer:t}=mY(n);return{priority:1,enabled:!0,compute(e,i,r){i.pointer.set(e.offsetX/i.size.width*2-1,-(e.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(Vw).reduce((e,i)=>({...e,[i]:t(i)}),{}),update:()=>{var e;const{events:i,internal:r}=n.getState();(e=r.lastEvent)!=null&&e.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:e=>{const{set:i,events:r}=n.getState();if(r.disconnect==null||r.disconnect(),i(s=>({events:{...s.events,connected:e}})),r.handlers)for(const s in r.handlers){const a=r.handlers[s],[l,c]=Vw[s];e.addEventListener(l,a,{passive:c})}},disconnect:()=>{const{set:e,events:i}=n.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const s=i.handlers[r],[a]=Vw[r];i.connected.removeEventListener(a,s)}e(r=>({events:{...r.events,connected:void 0}}))}}}}function YP(n,t){let e;return(...i)=>{window.clearTimeout(e),e=window.setTimeout(()=>n(...i),t)}}function PY({debounce:n,scroll:t,polyfill:e,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=e||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=ot.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=ot.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),c=n?typeof n=="number"?n:n.scroll:null,f=n?typeof n=="number"?n:n.resize:null,m=ot.useRef(!1);ot.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[g,y,v]=ot.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:R,top:D,width:O,height:N,bottom:B,right:L,x:U,y:I}=l.current.element.getBoundingClientRect(),w={left:R,top:D,width:O,height:N,bottom:B,right:L,x:U,y:I};l.current.element instanceof HTMLElement&&i&&(w.height=l.current.element.offsetHeight,w.width=l.current.element.offsetWidth),Object.freeze(w),m.current&&!BY(l.current.lastBounds,w)&&a(l.current.lastBounds=w)};return[x,f?YP(x,f):x,c?YP(x,c):x]},[a,i,c,f]);function S(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function E(){l.current.element&&(l.current.resizeObserver=new r(v),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",v,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const T=x=>{!x||x===l.current.element||(S(),l.current.element=x,l.current.scrollContainers=eV(x),E())};return UY(v,!!t),LY(y),ot.useEffect(()=>{S(),E()},[t,v,y]),ot.useEffect(()=>S,[]),[T,s,g]}function LY(n){ot.useEffect(()=>{const t=n;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[n])}function UY(n,t){ot.useEffect(()=>{if(t){const e=n;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",e,!0)}},[n,t])}function eV(n){const t=[];if(!n||n===document.body)return t;const{overflow:e,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[e,i,r].some(s=>s==="auto"||s==="scroll")&&t.push(n),[...t,...eV(n.parentElement)]}const zY=["x","y","top","bottom","left","right","width","height"],BY=(n,t)=>zY.every(e=>n[e]===t[e]);function VY({ref:n,children:t,fallback:e,resize:i,style:r,gl:s,events:a=IY,eventSource:l,eventPrefix:c,shadows:f,linear:m,flat:g,legacy:y,orthographic:v,frameloop:S,dpr:E,performance:T,raycaster:x,camera:R,scene:D,onPointerMissed:O,onCreated:N,...B}){ot.useMemo(()=>$4(LW),[]);const L=rY(),[U,I]=PY({scroll:!0,debounce:{scroll:50,resize:0},...i}),w=ot.useRef(null),V=ot.useRef(null);ot.useImperativeHandle(n,()=>w.current);const G=H4(O),[k,st]=ot.useState(!1),[it,Y]=ot.useState(!1);if(k)throw k;if(it)throw it;const Z=ot.useRef(null);qx(()=>{const ct=w.current;if(I.width>0&&I.height>0&&ct){Z.current||(Z.current=CY(ct));async function $(){await Z.current.configure({gl:s,scene:D,events:a,shadows:f,linear:m,flat:g,legacy:y,orthographic:v,frameloop:S,dpr:E,performance:T,raycaster:x,camera:R,size:I,onPointerMissed:(...pt)=>G.current==null?void 0:G.current(...pt),onCreated:pt=>{pt.events.connect==null||pt.events.connect(l?nY(l)?l.current:l:V.current),c&&pt.setEvents({compute:(wt,zt)=>{const nt=wt[c+"X"],lt=wt[c+"Y"];zt.pointer.set(nt/zt.size.width*2-1,-(lt/zt.size.height)*2+1),zt.raycaster.setFromCamera(zt.pointer,zt.camera)}}),N==null||N(pt)}}),Z.current.render(Mt.jsx(L,{children:Mt.jsx(aY,{set:Y,children:Mt.jsx(ot.Suspense,{fallback:Mt.jsx(sY,{set:st}),children:t??null})})}))}$()}}),ot.useEffect(()=>{const ct=w.current;if(ct)return()=>J4(ct)},[]);const at=l?"none":"auto";return Mt.jsx("div",{ref:V,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:at,...r},...B,children:Mt.jsx("div",{ref:U,style:{width:"100%",height:"100%"},children:Mt.jsx("canvas",{ref:w,style:{display:"block"},children:e})})})}function FY(n){return Mt.jsx(B4,{children:Mt.jsx(VY,{...n})})}const kY={canvasBackgraundColor:"#002"},Qp={fov:70,near:.1,far:1e3,position:[30,50,100],dollySpeed:5,minDistance:20,maxDistance:170},ry={radius:80,depth:5,count:2e3,factor:7,saturation:1,speed:.5},$P={nodes:"nodos"};function ux(){return ux=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)({}).hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ux.apply(null,arguments)}const HY=n=>n;function GY(n,t=HY){const e=Rn.useSyncExternalStore(n.subscribe,()=>t(n.getState()),()=>t(n.getInitialState()));return Rn.useDebugValue(e),e}const KP=n=>{const t=U4(n),e=i=>GY(t,i);return Object.assign(e,t),e},qY=n=>n?KP(n):KP,jY=()=>parseInt(Dx.replace(/\D+/g,"")),XY=jY();/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const xr={LEFT:1,RIGHT:2,MIDDLE:4},Ht=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,SCREEN_PAN:4,OFFSET:8,DOLLY:16,ZOOM:32,TOUCH_ROTATE:64,TOUCH_TRUCK:128,TOUCH_SCREEN_PAN:256,TOUCH_OFFSET:512,TOUCH_DOLLY:1024,TOUCH_ZOOM:2048,TOUCH_DOLLY_TRUCK:4096,TOUCH_DOLLY_SCREEN_PAN:8192,TOUCH_DOLLY_OFFSET:16384,TOUCH_DOLLY_ROTATE:32768,TOUCH_ZOOM_TRUCK:65536,TOUCH_ZOOM_OFFSET:131072,TOUCH_ZOOM_SCREEN_PAN:262144,TOUCH_ZOOM_ROTATE:524288}),sy={NONE:0,IN:1,OUT:-1};function Jp(n){return n.isPerspectiveCamera}function vd(n){return n.isOrthographicCamera}const ay=Math.PI*2,ZP=Math.PI/2,nV=1e-5,Fv=Math.PI/180;function Cu(n,t,e){return Math.max(t,Math.min(e,n))}function $i(n,t=nV){return Math.abs(n)<t}function vi(n,t,e=nV){return $i(n-t,e)}function QP(n,t){return Math.round(n/t)*t}function kv(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Hv(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function fE(n,t,e,i,r=1/0,s){i=Math.max(1e-4,i);const a=2/i,l=a*s,c=1/(1+l+.48*l*l+.235*l*l*l);let f=n-t;const m=t,g=r*i;f=Cu(f,-g,g),t=n-f;const y=(e.value+a*f)*s;e.value=(e.value-a*y)*c;let v=t+(f+y)*c;return m-n>0==v>m&&(v=m,e.value=(v-m)/s),v}function JP(n,t,e,i,r=1/0,s,a){i=Math.max(1e-4,i);const l=2/i,c=l*s,f=1/(1+c+.48*c*c+.235*c*c*c);let m=t.x,g=t.y,y=t.z,v=n.x-m,S=n.y-g,E=n.z-y;const T=m,x=g,R=y,D=r*i,O=D*D,N=v*v+S*S+E*E;if(N>O){const it=Math.sqrt(N);v=v/it*D,S=S/it*D,E=E/it*D}m=n.x-v,g=n.y-S,y=n.z-E;const B=(e.x+l*v)*s,L=(e.y+l*S)*s,U=(e.z+l*E)*s;e.x=(e.x-l*B)*f,e.y=(e.y-l*L)*f,e.z=(e.z-l*U)*f,a.x=m+(v+B)*f,a.y=g+(S+L)*f,a.z=y+(E+U)*f;const I=T-n.x,w=x-n.y,V=R-n.z,G=a.x-T,k=a.y-x,st=a.z-R;return I*G+w*k+V*st>0&&(a.x=T,a.y=x,a.z=R,e.x=(a.x-T)/s,e.y=(a.y-x)/s,e.z=(a.z-R)/s),a}function Fw(n,t){t.set(0,0),n.forEach(e=>{t.x+=e.clientX,t.y+=e.clientY}),t.x/=n.length,t.y/=n.length}function kw(n,t){return vd(n)?(console.warn(`${t} is not supported in OrthographicCamera`),!0):!1}class WY{constructor(){this._listeners={}}addEventListener(t,e){const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){const i=this._listeners;return i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){const r=this._listeners[t];if(r!==void 0){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}}removeAllEventListeners(t){if(!t){this._listeners={};return}Array.isArray(this._listeners[t])&&(this._listeners[t].length=0)}dispatchEvent(t){const i=this._listeners[t.type];if(i!==void 0){t.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,t)}}}var Hw;const YY="2.10.0",hE=1/8,$Y=/Mac/.test((Hw=globalThis==null?void 0:globalThis.navigator)===null||Hw===void 0?void 0:Hw.platform);let sn,t3,dE,Gw,To,wn,li,oy,Gv,Dc,Nc,tm,e3,n3,Ul,qv,ly,i3,qw,r3,jw,Xw,pE,Ww=class hR extends WY{static install(t){sn=t.THREE,t3=Object.freeze(new sn.Vector3(0,0,0)),dE=Object.freeze(new sn.Vector3(0,1,0)),Gw=Object.freeze(new sn.Vector3(0,0,1)),To=new sn.Vector2,wn=new sn.Vector3,li=new sn.Vector3,oy=new sn.Vector3,Gv=new sn.Vector3,Dc=new sn.Vector3,Nc=new sn.Vector3,tm=new sn.Vector3,e3=new sn.Vector3,n3=new sn.Vector3,Ul=new sn.Spherical,qv=new sn.Spherical,ly=new sn.Box3,i3=new sn.Box3,qw=new sn.Sphere,r3=new sn.Quaternion,jw=new sn.Quaternion,Xw=new sn.Matrix4,pE=new sn.Raycaster}static get ACTION(){return Ht}constructor(t,e){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=Ht.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=sy.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new sn.Vector3,this._focalOffsetVelocity=new sn.Vector3,this._zoomVelocity={value:0},this._truckInternal=(x,R,D,O)=>{let N,B;if(Jp(this._camera)){const L=wn.copy(this._camera.position).sub(this._target),U=this._camera.getEffectiveFOV()*Fv,I=L.length()*Math.tan(U*.5);N=this.truckSpeed*x*I/this._elementRect.height,B=this.truckSpeed*R*I/this._elementRect.height}else if(vd(this._camera)){const L=this._camera;N=this.truckSpeed*x*(L.right-L.left)/L.zoom/this._elementRect.width,B=this.truckSpeed*R*(L.top-L.bottom)/L.zoom/this._elementRect.height}else return;O?(D?this.setFocalOffset(this._focalOffsetEnd.x+N,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(N,0,!0),this.forward(-B,!0)):D?this.setFocalOffset(this._focalOffsetEnd.x+N,this._focalOffsetEnd.y+B,this._focalOffsetEnd.z,!0):this.truck(N,B,!0)},this._rotateInternal=(x,R)=>{const D=ay*this.azimuthRotateSpeed*x/this._elementRect.height,O=ay*this.polarRotateSpeed*R/this._elementRect.height;this.rotate(D,O,!0)},this._dollyInternal=(x,R,D)=>{const O=Math.pow(.95,-x*this.dollySpeed),N=this._sphericalEnd.radius,B=this._sphericalEnd.radius*O,L=Cu(B,this.minDistance,this.maxDistance),U=L-B;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(B,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(U,!0),this._dollyToNoClamp(L,!0)):this._dollyToNoClamp(L,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?B:L)-N,this._dollyControlCoord.set(R,D)),this._lastDollyDirection=Math.sign(-x)},this._zoomInternal=(x,R,D)=>{const O=Math.pow(.95,x*this.dollySpeed),N=this._zoom,B=this._zoom*O;this.zoomTo(B,!0),this.dollyToCursor&&(this._changedZoom+=B-N,this._dollyControlCoord.set(R,D))},typeof sn>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=t,this._yAxisUpSpace=new sn.Quaternion().setFromUnitVectors(this._camera.up,dE),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=Ht.NONE,this._target=new sn.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new sn.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new sn.Spherical().setFromVector3(wn.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new sn.Vector3,new sn.Vector3,new sn.Vector3,new sn.Vector3],this._updateNearPlaneCorners(),this._boundary=new sn.Box3(new sn.Vector3(-1/0,-1/0,-1/0),new sn.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new sn.Vector2,this.mouseButtons={left:Ht.ROTATE,middle:Ht.DOLLY,right:Ht.TRUCK,wheel:Jp(this._camera)?Ht.DOLLY:vd(this._camera)?Ht.ZOOM:Ht.NONE},this.touches={one:Ht.TOUCH_ROTATE,two:Jp(this._camera)?Ht.TOUCH_DOLLY_TRUCK:vd(this._camera)?Ht.TOUCH_ZOOM_TRUCK:Ht.NONE,three:Ht.TOUCH_TRUCK};const i=new sn.Vector2,r=new sn.Vector2,s=new sn.Vector2,a=x=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const O=this._domElement.getBoundingClientRect(),N=x.clientX/O.width,B=x.clientY/O.height;if(N<this._interactiveArea.left||N>this._interactiveArea.right||B<this._interactiveArea.top||B>this._interactiveArea.bottom)return}const R=x.pointerType!=="mouse"?null:(x.buttons&xr.LEFT)===xr.LEFT?xr.LEFT:(x.buttons&xr.MIDDLE)===xr.MIDDLE?xr.MIDDLE:(x.buttons&xr.RIGHT)===xr.RIGHT?xr.RIGHT:null;if(R!==null){const O=this._findPointerByMouseButton(R);O&&this._disposePointer(O)}if((x.buttons&xr.LEFT)===xr.LEFT&&this._lockedPointer)return;const D={pointerId:x.pointerId,clientX:x.clientX,clientY:x.clientY,deltaX:0,deltaY:0,mouseButton:R};this._activePointers.push(D),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",c),this._isDragging=!0,y(x)},l=x=>{x.cancelable&&x.preventDefault();const R=x.pointerId,D=this._lockedPointer||this._findPointerById(R);if(D){if(D.clientX=x.clientX,D.clientY=x.clientY,D.deltaX=x.movementX,D.deltaY=x.movementY,this._state=0,x.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(x.buttons&xr.LEFT)===xr.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(x.buttons&xr.MIDDLE)===xr.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(x.buttons&xr.RIGHT)===xr.RIGHT&&(this._state=this._state|this.mouseButtons.right);v()}},c=x=>{const R=this._findPointerById(x.pointerId);if(!(R&&R===this._lockedPointer)){if(R&&this._disposePointer(R),x.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=Ht.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=Ht.NONE;S()}};let f=-1;const m=x=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===Ht.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const B=this._domElement.getBoundingClientRect(),L=x.clientX/B.width,U=x.clientY/B.height;if(L<this._interactiveArea.left||L>this._interactiveArea.right||U<this._interactiveArea.top||U>this._interactiveArea.bottom)return}if(x.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===Ht.ROTATE||this.mouseButtons.wheel===Ht.TRUCK){const B=performance.now();f-B<1e3&&this._getClientRect(this._elementRect),f=B}const R=$Y?-1:-3,D=x.deltaMode===1?x.deltaY/R:x.deltaY/(R*10),O=this.dollyToCursor?(x.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,N=this.dollyToCursor?(x.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case Ht.ROTATE:{this._rotateInternal(x.deltaX,x.deltaY),this._isUserControllingRotate=!0;break}case Ht.TRUCK:{this._truckInternal(x.deltaX,x.deltaY,!1,!1),this._isUserControllingTruck=!0;break}case Ht.SCREEN_PAN:{this._truckInternal(x.deltaX,x.deltaY,!1,!0),this._isUserControllingTruck=!0;break}case Ht.OFFSET:{this._truckInternal(x.deltaX,x.deltaY,!0,!1),this._isUserControllingOffset=!0;break}case Ht.DOLLY:{this._dollyInternal(-D,O,N),this._isUserControllingDolly=!0;break}case Ht.ZOOM:{this._zoomInternal(-D,O,N),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},g=x=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===hR.ACTION.NONE){const R=x instanceof PointerEvent?x.pointerId:0,D=this._findPointerById(R);D&&this._disposePointer(D),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c);return}x.preventDefault()}},y=x=>{if(!this._enabled)return;if(Fw(this._activePointers,To),this._getClientRect(this._elementRect),i.copy(To),r.copy(To),this._activePointers.length>=2){const D=To.x-this._activePointers[1].clientX,O=To.y-this._activePointers[1].clientY,N=Math.sqrt(D*D+O*O);s.set(0,N);const B=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,L=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(B,L)}if(this._state=0,!x)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in x&&x.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(x.buttons&xr.LEFT)===xr.LEFT&&(this._state=this._state|this.mouseButtons.left),(x.buttons&xr.MIDDLE)===xr.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(x.buttons&xr.RIGHT)===xr.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&Ht.ROTATE)===Ht.ROTATE||(this._state&Ht.TOUCH_ROTATE)===Ht.TOUCH_ROTATE||(this._state&Ht.TOUCH_DOLLY_ROTATE)===Ht.TOUCH_DOLLY_ROTATE||(this._state&Ht.TOUCH_ZOOM_ROTATE)===Ht.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&Ht.TRUCK)===Ht.TRUCK||(this._state&Ht.SCREEN_PAN)===Ht.SCREEN_PAN||(this._state&Ht.TOUCH_TRUCK)===Ht.TOUCH_TRUCK||(this._state&Ht.TOUCH_SCREEN_PAN)===Ht.TOUCH_SCREEN_PAN||(this._state&Ht.TOUCH_DOLLY_TRUCK)===Ht.TOUCH_DOLLY_TRUCK||(this._state&Ht.TOUCH_DOLLY_SCREEN_PAN)===Ht.TOUCH_DOLLY_SCREEN_PAN||(this._state&Ht.TOUCH_ZOOM_TRUCK)===Ht.TOUCH_ZOOM_TRUCK||(this._state&Ht.TOUCH_ZOOM_SCREEN_PAN)===Ht.TOUCH_DOLLY_SCREEN_PAN)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&Ht.DOLLY)===Ht.DOLLY||(this._state&Ht.TOUCH_DOLLY)===Ht.TOUCH_DOLLY||(this._state&Ht.TOUCH_DOLLY_TRUCK)===Ht.TOUCH_DOLLY_TRUCK||(this._state&Ht.TOUCH_DOLLY_SCREEN_PAN)===Ht.TOUCH_DOLLY_SCREEN_PAN||(this._state&Ht.TOUCH_DOLLY_OFFSET)===Ht.TOUCH_DOLLY_OFFSET||(this._state&Ht.TOUCH_DOLLY_ROTATE)===Ht.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&Ht.ZOOM)===Ht.ZOOM||(this._state&Ht.TOUCH_ZOOM)===Ht.TOUCH_ZOOM||(this._state&Ht.TOUCH_ZOOM_TRUCK)===Ht.TOUCH_ZOOM_TRUCK||(this._state&Ht.TOUCH_ZOOM_SCREEN_PAN)===Ht.TOUCH_ZOOM_SCREEN_PAN||(this._state&Ht.TOUCH_ZOOM_OFFSET)===Ht.TOUCH_ZOOM_OFFSET||(this._state&Ht.TOUCH_ZOOM_ROTATE)===Ht.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&Ht.OFFSET)===Ht.OFFSET||(this._state&Ht.TOUCH_OFFSET)===Ht.TOUCH_OFFSET||(this._state&Ht.TOUCH_DOLLY_OFFSET)===Ht.TOUCH_DOLLY_OFFSET||(this._state&Ht.TOUCH_ZOOM_OFFSET)===Ht.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},v=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,Fw(this._activePointers,To);const R=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,D=R?-R.deltaX:r.x-To.x,O=R?-R.deltaY:r.y-To.y;if(r.copy(To),((this._state&Ht.ROTATE)===Ht.ROTATE||(this._state&Ht.TOUCH_ROTATE)===Ht.TOUCH_ROTATE||(this._state&Ht.TOUCH_DOLLY_ROTATE)===Ht.TOUCH_DOLLY_ROTATE||(this._state&Ht.TOUCH_ZOOM_ROTATE)===Ht.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(D,O),this._isUserControllingRotate=!0),(this._state&Ht.DOLLY)===Ht.DOLLY||(this._state&Ht.ZOOM)===Ht.ZOOM){const N=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,B=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0,L=this.dollyDragInverted?-1:1;(this._state&Ht.DOLLY)===Ht.DOLLY?(this._dollyInternal(L*O*hE,N,B),this._isUserControllingDolly=!0):(this._zoomInternal(L*O*hE,N,B),this._isUserControllingZoom=!0)}if((this._state&Ht.TOUCH_DOLLY)===Ht.TOUCH_DOLLY||(this._state&Ht.TOUCH_ZOOM)===Ht.TOUCH_ZOOM||(this._state&Ht.TOUCH_DOLLY_TRUCK)===Ht.TOUCH_DOLLY_TRUCK||(this._state&Ht.TOUCH_ZOOM_TRUCK)===Ht.TOUCH_ZOOM_TRUCK||(this._state&Ht.TOUCH_DOLLY_SCREEN_PAN)===Ht.TOUCH_DOLLY_SCREEN_PAN||(this._state&Ht.TOUCH_ZOOM_SCREEN_PAN)===Ht.TOUCH_ZOOM_SCREEN_PAN||(this._state&Ht.TOUCH_DOLLY_OFFSET)===Ht.TOUCH_DOLLY_OFFSET||(this._state&Ht.TOUCH_ZOOM_OFFSET)===Ht.TOUCH_ZOOM_OFFSET||(this._state&Ht.TOUCH_DOLLY_ROTATE)===Ht.TOUCH_DOLLY_ROTATE||(this._state&Ht.TOUCH_ZOOM_ROTATE)===Ht.TOUCH_ZOOM_ROTATE){const N=To.x-this._activePointers[1].clientX,B=To.y-this._activePointers[1].clientY,L=Math.sqrt(N*N+B*B),U=s.y-L;s.set(0,L);const I=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,w=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&Ht.TOUCH_DOLLY)===Ht.TOUCH_DOLLY||(this._state&Ht.TOUCH_DOLLY_ROTATE)===Ht.TOUCH_DOLLY_ROTATE||(this._state&Ht.TOUCH_DOLLY_TRUCK)===Ht.TOUCH_DOLLY_TRUCK||(this._state&Ht.TOUCH_DOLLY_SCREEN_PAN)===Ht.TOUCH_DOLLY_SCREEN_PAN||(this._state&Ht.TOUCH_DOLLY_OFFSET)===Ht.TOUCH_DOLLY_OFFSET?(this._dollyInternal(U*hE,I,w),this._isUserControllingDolly=!0):(this._zoomInternal(U*hE,I,w),this._isUserControllingZoom=!0)}((this._state&Ht.TRUCK)===Ht.TRUCK||(this._state&Ht.TOUCH_TRUCK)===Ht.TOUCH_TRUCK||(this._state&Ht.TOUCH_DOLLY_TRUCK)===Ht.TOUCH_DOLLY_TRUCK||(this._state&Ht.TOUCH_ZOOM_TRUCK)===Ht.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(D,O,!1,!1),this._isUserControllingTruck=!0),((this._state&Ht.SCREEN_PAN)===Ht.SCREEN_PAN||(this._state&Ht.TOUCH_SCREEN_PAN)===Ht.TOUCH_SCREEN_PAN||(this._state&Ht.TOUCH_DOLLY_SCREEN_PAN)===Ht.TOUCH_DOLLY_SCREEN_PAN||(this._state&Ht.TOUCH_ZOOM_SCREEN_PAN)===Ht.TOUCH_ZOOM_SCREEN_PAN)&&(this._truckInternal(D,O,!1,!0),this._isUserControllingTruck=!0),((this._state&Ht.OFFSET)===Ht.OFFSET||(this._state&Ht.TOUCH_OFFSET)===Ht.TOUCH_OFFSET||(this._state&Ht.TOUCH_DOLLY_OFFSET)===Ht.TOUCH_DOLLY_OFFSET||(this._state&Ht.TOUCH_ZOOM_OFFSET)===Ht.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(D,O,!0,!1),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},S=()=>{Fw(this._activePointers,To),r.copy(To),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",E),this._domElement.ownerDocument.addEventListener("pointerlockerror",T),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",c),y())},this.unlockPointer=()=>{var x,R,D;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(x=this._domElement)===null||x===void 0||x.ownerDocument.exitPointerLock(),(R=this._domElement)===null||R===void 0||R.ownerDocument.removeEventListener("pointerlockchange",E),(D=this._domElement)===null||D===void 0||D.ownerDocument.removeEventListener("pointerlockerror",T),this.cancel()};const E=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},T=()=>{this.unlockPointer()};this._addAllEventListeners=x=>{this._domElement=x,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",a),this._domElement.addEventListener("pointercancel",c),this._domElement.addEventListener("wheel",m,{passive:!1}),this._domElement.addEventListener("contextmenu",g)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",a),this._domElement.removeEventListener("pointercancel",c),this._domElement.removeEventListener("wheel",m,{passive:!1}),this._domElement.removeEventListener("contextmenu",g),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this._domElement.ownerDocument.removeEventListener("pointerlockchange",E),this._domElement.ownerDocument.removeEventListener("pointerlockerror",T))},this.cancel=()=>{this._state!==Ht.NONE&&(this._state=Ht.NONE,this._activePointers.length=0,S())},e&&this.connect(e),this.update(0)}get camera(){return this._camera}set camera(t){this._camera=t,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._domElement&&(t?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0}set interactiveArea(t){this._interactiveArea.width=Cu(t.width,0,1),this._interactiveArea.height=Cu(t.height,0,1),this._interactiveArea.x=Cu(t.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Cu(t.y,0,1-this._interactiveArea.height)}addEventListener(t,e){super.addEventListener(t,e)}removeEventListener(t,e){super.removeEventListener(t,e)}rotate(t,e,i=!1){return this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+e,i)}rotateAzimuthTo(t,e=!1){return this.rotateTo(t,this._sphericalEnd.phi,e)}rotatePolarTo(t,e=!1){return this.rotateTo(this._sphericalEnd.theta,t,e)}rotateTo(t,e,i=!1){this._isUserControllingRotate=!1;const r=Cu(t,this.minAzimuthAngle,this.maxAzimuthAngle),s=Cu(e,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const a=!i||vi(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&vi(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(a)}dolly(t,e=!1){return this.dollyTo(this._sphericalEnd.radius-t,e)}dollyTo(t,e=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=sy.NONE,this._changedDolly=0,this._dollyToNoClamp(Cu(t,this.minDistance,this.maxDistance),e)}_dollyToNoClamp(t,e=!1){const i=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const a=this._collisionTest(),l=vi(a,this._spherical.radius);if(!(i>t)&&l)return Promise.resolve();this._sphericalEnd.radius=Math.min(t,a)}else this._sphericalEnd.radius=t;this._needsUpdate=!0,e||(this._spherical.radius=this._sphericalEnd.radius);const s=!e||vi(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(t,e=!1){this._targetEnd.add(this._getCameraDirection(Gv).multiplyScalar(t)),e||this._target.copy(this._targetEnd);const i=!e||vi(this._target.x,this._targetEnd.x,this.restThreshold)&&vi(this._target.y,this._targetEnd.y,this.restThreshold)&&vi(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(t,e=!1){return this.zoomTo(this._zoomEnd+t,e)}zoomTo(t,e=!1){this._isUserControllingZoom=!1,this._zoomEnd=Cu(t,this.minZoom,this.maxZoom),this._needsUpdate=!0,e||(this._zoom=this._zoomEnd);const i=!e||vi(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(t,e,i=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(t,e,i)}truck(t,e,i=!1){this._camera.updateMatrix(),Dc.setFromMatrixColumn(this._camera.matrix,0),Nc.setFromMatrixColumn(this._camera.matrix,1),Dc.multiplyScalar(t),Nc.multiplyScalar(-e);const r=wn.copy(Dc).add(Nc),s=li.copy(this._targetEnd).add(r);return this.moveTo(s.x,s.y,s.z,i)}forward(t,e=!1){wn.setFromMatrixColumn(this._camera.matrix,0),wn.crossVectors(this._camera.up,wn),wn.multiplyScalar(t);const i=li.copy(this._targetEnd).add(wn);return this.moveTo(i.x,i.y,i.z,e)}elevate(t,e=!1){return wn.copy(this._camera.up).multiplyScalar(t),this.moveTo(this._targetEnd.x+wn.x,this._targetEnd.y+wn.y,this._targetEnd.z+wn.z,e)}moveTo(t,e,i,r=!1){this._isUserControllingTruck=!1;const s=wn.set(t,e,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const a=!r||vi(this._target.x,this._targetEnd.x,this.restThreshold)&&vi(this._target.y,this._targetEnd.y,this.restThreshold)&&vi(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(a)}lookInDirectionOf(t,e,i,r=!1){const l=wn.set(t,e,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(l.x,l.y,l.z,r)}fitToBox(t,e,{cover:i=!1,paddingLeft:r=0,paddingRight:s=0,paddingBottom:a=0,paddingTop:l=0}={}){const c=[],f=t.isBox3?ly.copy(t):ly.setFromObject(t);f.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const m=QP(this._sphericalEnd.theta,ZP),g=QP(this._sphericalEnd.phi,ZP);c.push(this.rotateTo(m,g,e));const y=wn.setFromSpherical(this._sphericalEnd).normalize(),v=r3.setFromUnitVectors(y,Gw),S=vi(Math.abs(y.y),1);S&&v.multiply(jw.setFromAxisAngle(dE,m)),v.multiply(this._yAxisUpSpaceInverse);const E=i3.makeEmpty();li.copy(f.min).applyQuaternion(v),E.expandByPoint(li),li.copy(f.min).setX(f.max.x).applyQuaternion(v),E.expandByPoint(li),li.copy(f.min).setY(f.max.y).applyQuaternion(v),E.expandByPoint(li),li.copy(f.max).setZ(f.min.z).applyQuaternion(v),E.expandByPoint(li),li.copy(f.min).setZ(f.max.z).applyQuaternion(v),E.expandByPoint(li),li.copy(f.max).setY(f.min.y).applyQuaternion(v),E.expandByPoint(li),li.copy(f.max).setX(f.min.x).applyQuaternion(v),E.expandByPoint(li),li.copy(f.max).applyQuaternion(v),E.expandByPoint(li),E.min.x-=r,E.min.y-=a,E.max.x+=s,E.max.y+=l,v.setFromUnitVectors(Gw,y),S&&v.premultiply(jw.invert()),v.premultiply(this._yAxisUpSpace);const T=E.getSize(wn),x=E.getCenter(li).applyQuaternion(v);if(Jp(this._camera)){const R=this.getDistanceToFitBox(T.x,T.y,T.z,i);c.push(this.moveTo(x.x,x.y,x.z,e)),c.push(this.dollyTo(R,e)),c.push(this.setFocalOffset(0,0,0,e))}else if(vd(this._camera)){const R=this._camera,D=R.right-R.left,O=R.top-R.bottom,N=i?Math.max(D/T.x,O/T.y):Math.min(D/T.x,O/T.y);c.push(this.moveTo(x.x,x.y,x.z,e)),c.push(this.zoomTo(N,e)),c.push(this.setFocalOffset(0,0,0,e))}return Promise.all(c)}fitToSphere(t,e){const i=[],s="isObject3D"in t?hR.createBoundingSphere(t,qw):qw.copy(t);if(i.push(this.moveTo(s.center.x,s.center.y,s.center.z,e)),Jp(this._camera)){const a=this.getDistanceToFitSphere(s.radius);i.push(this.dollyTo(a,e))}else if(vd(this._camera)){const a=this._camera.right-this._camera.left,l=this._camera.top-this._camera.bottom,c=2*s.radius,f=Math.min(a/c,l/c);i.push(this.zoomTo(f,e))}return i.push(this.setFocalOffset(0,0,0,e)),Promise.all(i)}setLookAt(t,e,i,r,s,a,l=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=sy.NONE,this._changedDolly=0;const c=li.set(r,s,a),f=wn.set(t,e,i);this._targetEnd.copy(c),this._sphericalEnd.setFromVector3(f.sub(c).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,l||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const m=!l||vi(this._target.x,this._targetEnd.x,this.restThreshold)&&vi(this._target.y,this._targetEnd.y,this.restThreshold)&&vi(this._target.z,this._targetEnd.z,this.restThreshold)&&vi(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&vi(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&vi(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(m)}lerpLookAt(t,e,i,r,s,a,l,c,f,m,g,y,v,S=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=sy.NONE,this._changedDolly=0;const E=wn.set(r,s,a),T=li.set(t,e,i);Ul.setFromVector3(T.sub(E).applyQuaternion(this._yAxisUpSpace));const x=oy.set(m,g,y),R=li.set(l,c,f);qv.setFromVector3(R.sub(x).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(E.lerp(x,v));const D=qv.theta-Ul.theta,O=qv.phi-Ul.phi,N=qv.radius-Ul.radius;this._sphericalEnd.set(Ul.radius+N*v,Ul.phi+O*v,Ul.theta+D*v),this.normalizeRotations(),this._needsUpdate=!0,S||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const B=!S||vi(this._target.x,this._targetEnd.x,this.restThreshold)&&vi(this._target.y,this._targetEnd.y,this.restThreshold)&&vi(this._target.z,this._targetEnd.z,this.restThreshold)&&vi(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&vi(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&vi(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(B)}setPosition(t,e,i,r=!1){return this.setLookAt(t,e,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(t,e,i,r=!1){const s=this.getPosition(wn),a=this.setLookAt(s.x,s.y,s.z,t,e,i,r);return this._sphericalEnd.phi=Cu(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),a}setFocalOffset(t,e,i,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(t,e,i),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const s=!r||vi(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&vi(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&vi(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(t,e,i){this._camera.updateMatrixWorld(),Dc.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Nc.setFromMatrixColumn(this._camera.matrixWorldInverse,1),tm.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=wn.set(t,e,i),s=r.distanceTo(this._camera.position),a=r.sub(this._camera.position);Dc.multiplyScalar(a.x),Nc.multiplyScalar(a.y),tm.multiplyScalar(a.z),wn.copy(Dc).add(Nc).add(tm),wn.z=wn.z+s,this.dollyTo(s,!1),this.setFocalOffset(-wn.x,wn.y,-wn.z,!1),this.moveTo(t,e,i,!1)}setBoundary(t){if(!t){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(t,e,i,r){if(t===null){this._viewport=null;return}this._viewport=this._viewport||new sn.Vector4,typeof t=="number"?this._viewport.set(t,e,i,r):this._viewport.copy(t)}getDistanceToFitBox(t,e,i,r=!1){if(kw(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=t/e,a=this._camera.getEffectiveFOV()*Fv,l=this._camera.aspect;return((r?s>l:s<l)?e:t/l)*.5/Math.tan(a*.5)+i*.5}getDistanceToFitSphere(t){if(kw(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const e=this._camera.getEffectiveFOV()*Fv,i=Math.atan(Math.tan(e*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?e:i;return t/Math.sin(r*.5)}getTarget(t,e=!0){return(t&&t.isVector3?t:new sn.Vector3).copy(e?this._targetEnd:this._target)}getPosition(t,e=!0){return(t&&t.isVector3?t:new sn.Vector3).setFromSpherical(e?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(e?this._targetEnd:this._target)}getSpherical(t,e=!0){return(t||new sn.Spherical).copy(e?this._sphericalEnd:this._spherical)}getFocalOffset(t,e=!0){return(t&&t.isVector3?t:new sn.Vector3).copy(e?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%ay,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=ay),this._spherical.theta+=ay*Math.round((this._sphericalEnd.theta-this._spherical.theta)/ay)}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(t=!1){if(!vi(this._camera.up.x,this._cameraUp0.x)||!vi(this._camera.up.y,this._cameraUp0.y)||!vi(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const i=this.getPosition(wn);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}const e=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)];return Promise.all(e)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,dE),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const t=wn.subVectors(this._target,this._camera.position).normalize(),e=li.crossVectors(t,this._camera.up);this._camera.up.crossVectors(e,t).normalize(),this._camera.updateMatrixWorld();const i=this.getPosition(wn);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(t){const e=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,s=e3.subVectors(this._targetEnd,this._target),a=n3.subVectors(this._focalOffsetEnd,this._focalOffset),l=this._zoomEnd-this._zoom;if($i(e))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const g=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=fE(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,g,1/0,t),this._needsUpdate=!0}if($i(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const g=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=fE(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,g,1/0,t),this._needsUpdate=!0}if($i(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const g=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=fE(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,g,this.maxSpeed,t),this._needsUpdate=!0}if($i(s.x)&&$i(s.y)&&$i(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const g=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;JP(this._target,this._targetEnd,this._targetVelocity,g,this.maxSpeed,t,this._target),this._needsUpdate=!0}if($i(a.x)&&$i(a.y)&&$i(a.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const g=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;JP(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,g,this.maxSpeed,t,this._focalOffset),this._needsUpdate=!0}if($i(l))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const g=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=fE(this._zoom,this._zoomEnd,this._zoomVelocity,g,1/0,t)}if(this.dollyToCursor){if(Jp(this._camera)&&this._changedDolly!==0){const g=this._spherical.radius-this._lastDistance,y=this._camera,v=this._getCameraDirection(Gv),S=wn.copy(v).cross(y.up).normalize();S.lengthSq()===0&&(S.x=1);const E=li.crossVectors(S,v),T=this._sphericalEnd.radius*Math.tan(y.getEffectiveFOV()*Fv*.5),R=(this._sphericalEnd.radius-g-this._sphericalEnd.radius)/this._sphericalEnd.radius,D=oy.copy(this._targetEnd).add(S.multiplyScalar(this._dollyControlCoord.x*T*y.aspect)).add(E.multiplyScalar(this._dollyControlCoord.y*T)),O=wn.copy(this._targetEnd).lerp(D,R),N=this._lastDollyDirection===sy.IN&&this._spherical.radius<=this.minDistance,B=this._lastDollyDirection===sy.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(N||B)){this._sphericalEnd.radius-=g,this._spherical.radius-=g;const U=li.copy(v).multiplyScalar(-g);O.add(U)}this._boundary.clampPoint(O,O);const L=li.subVectors(O,this._targetEnd);this._targetEnd.copy(O),this._target.add(L),this._changedDolly-=g,$i(this._changedDolly)&&(this._changedDolly=0)}else if(vd(this._camera)&&this._changedZoom!==0){const g=this._zoom-this._lastZoom,y=this._camera,v=wn.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(y.near+y.far)/(y.near-y.far)).unproject(y),S=li.set(0,0,-1).applyQuaternion(y.quaternion),E=oy.copy(v).add(S.multiplyScalar(-v.dot(y.up))),x=-(this._zoom-g-this._zoom)/this._zoom,R=this._getCameraDirection(Gv),D=this._targetEnd.dot(R),O=wn.copy(this._targetEnd).lerp(E,x),N=O.dot(R),B=R.multiplyScalar(N-D);O.sub(B),this._boundary.clampPoint(O,O);const L=li.subVectors(O,this._targetEnd);this._targetEnd.copy(O),this._target.add(L),this._changedZoom-=g,$i(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const c=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,c),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!$i(this._focalOffset.x)||!$i(this._focalOffset.y)||!$i(this._focalOffset.z))&&(Dc.setFromMatrixColumn(this._camera.matrix,0),Nc.setFromMatrixColumn(this._camera.matrix,1),tm.setFromMatrixColumn(this._camera.matrix,2),Dc.multiplyScalar(this._focalOffset.x),Nc.multiplyScalar(-this._focalOffset.y),tm.multiplyScalar(this._focalOffset.z),wn.copy(Dc).add(Nc).add(tm),this._camera.position.add(wn),this._camera.updateMatrixWorld()),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),wn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const m=this._needsUpdate;return m&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):m?(this.dispatchEvent({type:"update"}),$i(e,this.restThreshold)&&$i(i,this.restThreshold)&&$i(r,this.restThreshold)&&$i(s.x,this.restThreshold)&&$i(s.y,this.restThreshold)&&$i(s.z,this.restThreshold)&&$i(a.x,this.restThreshold)&&$i(a.y,this.restThreshold)&&$i(a.z,this.restThreshold)&&$i(l,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!m&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=m,this._needsUpdate=!1,m}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:kv(this.maxDistance),minZoom:this.minZoom,maxZoom:kv(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:kv(this.maxPolarAngle),minAzimuthAngle:kv(this.minAzimuthAngle),maxAzimuthAngle:kv(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,target:this._targetEnd.toArray(),position:wn.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(t,e=!1){const i=JSON.parse(t);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=Hv(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=Hv(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=Hv(i.maxPolarAngle),this.minAzimuthAngle=Hv(i.minAzimuthAngle),this.maxAzimuthAngle=Hv(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],e),Ul.setFromVector3(wn.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Ul.theta,Ul.phi,e),this.dollyTo(Ul.radius,e),this.zoomTo(i.zoom,e),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],e),this._needsUpdate=!0}connect(t){if(this._domElement){console.warn("camera-controls is already connected.");return}t.setAttribute("data-camera-controls-version",YY),this._addAllEventListeners(t),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(t){return t.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(t){return this._getTargetDirection(t).negate()}_findPointerById(t){return this._activePointers.find(e=>e.pointerId===t)}_findPointerByMouseButton(t){return this._activePointers.find(e=>e.mouseButton===t)}_disposePointer(t){this._activePointers.splice(this._activePointers.indexOf(t),1)}_encloseToBoundary(t,e,i){const r=e.lengthSq();if(r===0)return t;const s=li.copy(e).add(t),l=this._boundary.clampPoint(s,oy).sub(s),c=l.lengthSq();if(c===0)return t.add(e);if(c===r)return t;if(i===0)return t.add(e).add(l);{const f=1+i*c/e.dot(l);return t.add(li.copy(e).multiplyScalar(f)).add(l.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(Jp(this._camera)){const t=this._camera,e=t.near,i=t.getEffectiveFOV()*Fv,r=Math.tan(i*.5)*e,s=r*t.aspect;this._nearPlaneCorners[0].set(-s,-r,0),this._nearPlaneCorners[1].set(s,-r,0),this._nearPlaneCorners[2].set(s,r,0),this._nearPlaneCorners[3].set(-s,r,0)}else if(vd(this._camera)){const t=this._camera,e=1/t.zoom,i=t.left*e,r=t.right*e,s=t.top*e,a=t.bottom*e;this._nearPlaneCorners[0].set(i,s,0),this._nearPlaneCorners[1].set(r,s,0),this._nearPlaneCorners[2].set(r,a,0),this._nearPlaneCorners[3].set(i,a,0)}}_collisionTest(){let t=1/0;if(!(this.colliderMeshes.length>=1)||kw(this._camera,"_collisionTest"))return t;const i=this._getTargetDirection(Gv);Xw.lookAt(t3,i,this._camera.up);for(let r=0;r<4;r++){const s=li.copy(this._nearPlaneCorners[r]);s.applyMatrix4(Xw);const a=oy.addVectors(this._target,s);pE.set(a,i),pE.far=this._spherical.radius+1;const l=pE.intersectObjects(this.colliderMeshes);l.length!==0&&l[0].distance<t&&(t=l[0].distance)}return t}_getClientRect(t){if(!this._domElement)return;const e=this._domElement.getBoundingClientRect();return t.x=e.left,t.y=e.top,this._viewport?(t.x+=this._viewport.x,t.y+=e.height-this._viewport.w-this._viewport.y,t.width=this._viewport.z,t.height=this._viewport.w):(t.width=e.width,t.height=e.height),t}_createOnRestPromise(t){return t?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(e=>{const i=()=>{this.removeEventListener("rest",i),e()};this.addEventListener("rest",i)}))}_addAllEventListeners(t){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(t){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(t){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(t,e=new sn.Sphere){const i=e,r=i.center;ly.makeEmpty(),t.traverseVisible(a=>{a.isMesh&&ly.expandByObject(a)}),ly.getCenter(r);let s=0;return t.traverseVisible(a=>{if(!a.isMesh)return;const l=a;if(!l.geometry)return;const c=l.geometry.clone();c.applyMatrix4(l.matrixWorld);const m=c.attributes.position;for(let g=0,y=m.count;g<y;g++)wn.fromBufferAttribute(m,g),s=Math.max(s,r.distanceToSquared(wn))}),i.radius=Math.sqrt(s),i}};const KY=ot.forwardRef((n,t)=>{ot.useMemo(()=>{const N={Box3:Ks,MathUtils:{clamp:MB.clamp},Matrix4:nn,Quaternion:Za,Raycaster:yO,Sphere:Zs,Spherical:_O,Vector2:oe,Vector3:ut,Vector4:ti};Ww.install({THREE:N}),$4({CameraControlsImpl:Ww})},[]);const{camera:e,domElement:i,makeDefault:r,onStart:s,onEnd:a,onChange:l,regress:c,...f}=n,m=yd(N=>N.camera),g=yd(N=>N.gl),y=yd(N=>N.invalidate),v=yd(N=>N.events),S=yd(N=>N.setEvents),E=yd(N=>N.set),T=yd(N=>N.get),x=yd(N=>N.performance),R=e||m,D=i||v.connected||g.domElement,O=ot.useMemo(()=>new Ww(R),[R]);return EO((N,B)=>{O.enabled&&O.update(B)},-1),ot.useEffect(()=>(O.connect(D),()=>void O.disconnect()),[D,O]),ot.useEffect(()=>{const N=U=>{y(),c&&x.regress(),l&&l(U)},B=U=>{s&&s(U)},L=U=>{a&&a(U)};return O.addEventListener("update",N),O.addEventListener("controlstart",B),O.addEventListener("controlend",L),O.addEventListener("control",N),O.addEventListener("transitionstart",N),O.addEventListener("wake",N),()=>{O.removeEventListener("update",N),O.removeEventListener("controlstart",B),O.removeEventListener("controlend",L),O.removeEventListener("control",N),O.removeEventListener("transitionstart",N),O.removeEventListener("wake",N)}},[O,s,a,y,S,c,l]),ot.useEffect(()=>{if(r){const N=T().controls;return E({controls:O}),()=>E({controls:N})}},[r,O]),ot.createElement("primitive",ux({ref:t,object:O},f))});class ZY extends ql{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${XY>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const QY=n=>new ut().setFromSpherical(new _O(n,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),JY=ot.forwardRef(({radius:n=100,depth:t=50,count:e=5e3,saturation:i=0,factor:r=4,fade:s=!1,speed:a=1},l)=>{const c=ot.useRef(null),[f,m,g]=ot.useMemo(()=>{const v=[],S=[],E=Array.from({length:e},()=>(.5+.5*Math.random())*r),T=new Ne;let x=n+t;const R=t/e;for(let D=0;D<e;D++)x-=R*Math.random(),v.push(...QY(x).toArray()),T.setHSL(D/e,i,.9),S.push(T.r,T.g,T.b);return[new Float32Array(v),new Float32Array(S),new Float32Array(E)]},[e,t,r,n,i]);EO(v=>c.current&&(c.current.uniforms.time.value=v.clock.elapsedTime*a));const[y]=ot.useState(()=>new ZY);return ot.createElement("points",{ref:l},ot.createElement("bufferGeometry",null,ot.createElement("bufferAttribute",{attach:"attributes-position",args:[f,3]}),ot.createElement("bufferAttribute",{attach:"attributes-color",args:[m,3]}),ot.createElement("bufferAttribute",{attach:"attributes-size",args:[g,1]})),ot.createElement("primitive",{ref:c,object:y,attach:"material",blending:i1,"uniforms-fade-value":s,depthWrite:!1,transparent:!0,vertexColors:!0}))});function t$(n,t,e){var i,r=1;n==null&&(n=0),t==null&&(t=0),e==null&&(e=0);function s(){var a,l=i.length,c,f=0,m=0,g=0;for(a=0;a<l;++a)c=i[a],f+=c.x||0,m+=c.y||0,g+=c.z||0;for(f=(f/l-n)*r,m=(m/l-t)*r,g=(g/l-e)*r,a=0;a<l;++a)c=i[a],f&&(c.x-=f),m&&(c.y-=m),g&&(c.z-=g)}return s.initialize=function(a){i=a},s.x=function(a){return arguments.length?(n=+a,s):n},s.y=function(a){return arguments.length?(t=+a,s):t},s.z=function(a){return arguments.length?(e=+a,s):e},s.strength=function(a){return arguments.length?(r=+a,s):r},s}function e$(n){const t=+this._x.call(null,n);return iV(this.cover(t),t,n)}function iV(n,t,e){if(isNaN(t))return n;var i,r=n._root,s={data:e},a=n._x0,l=n._x1,c,f,m,g,y;if(!r)return n._root=s,n;for(;r.length;)if((m=t>=(c=(a+l)/2))?a=c:l=c,i=r,!(r=r[g=+m]))return i[g]=s,n;if(f=+n._x.call(null,r.data),t===f)return s.next=r,i?i[g]=s:n._root=s,n;do i=i?i[g]=new Array(2):n._root=new Array(2),(m=t>=(c=(a+l)/2))?a=c:l=c;while((g=+m)==(y=+(f>=c)));return i[y]=r,i[g]=s,n}function n$(n){Array.isArray(n)||(n=Array.from(n));const t=n.length,e=new Float64Array(t);let i=1/0,r=-1/0;for(let s=0,a;s<t;++s)isNaN(a=+this._x.call(null,n[s]))||(e[s]=a,a<i&&(i=a),a>r&&(r=a));if(i>r)return this;this.cover(i).cover(r);for(let s=0;s<t;++s)iV(this,e[s],n[s]);return this}function i$(n){if(isNaN(n=+n))return this;var t=this._x0,e=this._x1;if(isNaN(t))e=(t=Math.floor(n))+1;else{for(var i=e-t||1,r=this._root,s,a;t>n||n>=e;)switch(a=+(n<t),s=new Array(2),s[a]=r,r=s,i*=2,a){case 0:e=t+i;break;case 1:t=e-i;break}this._root&&this._root.length&&(this._root=r)}return this._x0=t,this._x1=e,this}function r$(){var n=[];return this.visit(function(t){if(!t.length)do n.push(t.data);while(t=t.next)}),n}function s$(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function lh(n,t,e){this.node=n,this.x0=t,this.x1=e}function a$(n,t){var e,i=this._x0,r,s,a=this._x1,l=[],c=this._root,f,m;for(c&&l.push(new lh(c,i,a)),t==null?t=1/0:(i=n-t,a=n+t);f=l.pop();)if(!(!(c=f.node)||(r=f.x0)>a||(s=f.x1)<i))if(c.length){var g=(r+s)/2;l.push(new lh(c[1],g,s),new lh(c[0],r,g)),(m=+(n>=g))&&(f=l[l.length-1],l[l.length-1]=l[l.length-1-m],l[l.length-1-m]=f)}else{var y=Math.abs(n-+this._x.call(null,c.data));y<t&&(t=y,i=n-y,a=n+y,e=c.data)}return e}function o$(n){if(isNaN(c=+this._x.call(null,n)))return this;var t,e=this._root,i,r,s,a=this._x0,l=this._x1,c,f,m,g,y;if(!e)return this;if(e.length)for(;;){if((m=c>=(f=(a+l)/2))?a=f:l=f,t=e,!(e=e[g=+m]))return this;if(!e.length)break;t[g+1&1]&&(i=t,y=g)}for(;e.data!==n;)if(r=e,!(e=e.next))return this;return(s=e.next)&&delete e.next,r?(s?r.next=s:delete r.next,this):t?(s?t[g]=s:delete t[g],(e=t[0]||t[1])&&e===(t[1]||t[0])&&!e.length&&(i?i[y]=e:this._root=e),this):(this._root=s,this)}function l$(n){for(var t=0,e=n.length;t<e;++t)this.remove(n[t]);return this}function u$(){return this._root}function c$(){var n=0;return this.visit(function(t){if(!t.length)do++n;while(t=t.next)}),n}function f$(n){var t=[],e,i=this._root,r,s,a;for(i&&t.push(new lh(i,this._x0,this._x1));e=t.pop();)if(!n(i=e.node,s=e.x0,a=e.x1)&&i.length){var l=(s+a)/2;(r=i[1])&&t.push(new lh(r,l,a)),(r=i[0])&&t.push(new lh(r,s,l))}return this}function h$(n){var t=[],e=[],i;for(this._root&&t.push(new lh(this._root,this._x0,this._x1));i=t.pop();){var r=i.node;if(r.length){var s,a=i.x0,l=i.x1,c=(a+l)/2;(s=r[0])&&t.push(new lh(s,a,c)),(s=r[1])&&t.push(new lh(s,c,l))}e.push(i)}for(;i=e.pop();)n(i.node,i.x0,i.x1);return this}function d$(n){return n[0]}function p$(n){return arguments.length?(this._x=n,this):this._x}function rV(n,t){var e=new MO(t??d$,NaN,NaN);return n==null?e:e.addAll(n)}function MO(n,t,e){this._x=n,this._x0=t,this._x1=e,this._root=void 0}function s3(n){for(var t={data:n.data},e=t;n=n.next;)e=e.next={data:n.data};return t}var Vo=rV.prototype=MO.prototype;Vo.copy=function(){var n=new MO(this._x,this._x0,this._x1),t=this._root,e,i;if(!t)return n;if(!t.length)return n._root=s3(t),n;for(e=[{source:t,target:n._root=new Array(2)}];t=e.pop();)for(var r=0;r<2;++r)(i=t.source[r])&&(i.length?e.push({source:i,target:t.target[r]=new Array(2)}):t.target[r]=s3(i));return n};Vo.add=e$;Vo.addAll=n$;Vo.cover=i$;Vo.data=r$;Vo.extent=s$;Vo.find=a$;Vo.remove=o$;Vo.removeAll=l$;Vo.root=u$;Vo.size=c$;Vo.visit=f$;Vo.visitAfter=h$;Vo.x=p$;function m$(n){const t=+this._x.call(null,n),e=+this._y.call(null,n);return sV(this.cover(t,e),t,e,n)}function sV(n,t,e,i){if(isNaN(t)||isNaN(e))return n;var r,s=n._root,a={data:i},l=n._x0,c=n._y0,f=n._x1,m=n._y1,g,y,v,S,E,T,x,R;if(!s)return n._root=a,n;for(;s.length;)if((E=t>=(g=(l+f)/2))?l=g:f=g,(T=e>=(y=(c+m)/2))?c=y:m=y,r=s,!(s=s[x=T<<1|E]))return r[x]=a,n;if(v=+n._x.call(null,s.data),S=+n._y.call(null,s.data),t===v&&e===S)return a.next=s,r?r[x]=a:n._root=a,n;do r=r?r[x]=new Array(4):n._root=new Array(4),(E=t>=(g=(l+f)/2))?l=g:f=g,(T=e>=(y=(c+m)/2))?c=y:m=y;while((x=T<<1|E)===(R=(S>=y)<<1|v>=g));return r[R]=s,r[x]=a,n}function g$(n){var t,e,i=n.length,r,s,a=new Array(i),l=new Array(i),c=1/0,f=1/0,m=-1/0,g=-1/0;for(e=0;e<i;++e)isNaN(r=+this._x.call(null,t=n[e]))||isNaN(s=+this._y.call(null,t))||(a[e]=r,l[e]=s,r<c&&(c=r),r>m&&(m=r),s<f&&(f=s),s>g&&(g=s));if(c>m||f>g)return this;for(this.cover(c,f).cover(m,g),e=0;e<i;++e)sV(this,a[e],l[e],n[e]);return this}function y$(n,t){if(isNaN(n=+n)||isNaN(t=+t))return this;var e=this._x0,i=this._y0,r=this._x1,s=this._y1;if(isNaN(e))r=(e=Math.floor(n))+1,s=(i=Math.floor(t))+1;else{for(var a=r-e||1,l=this._root,c,f;e>n||n>=r||i>t||t>=s;)switch(f=(t<i)<<1|n<e,c=new Array(4),c[f]=l,l=c,a*=2,f){case 0:r=e+a,s=i+a;break;case 1:e=r-a,s=i+a;break;case 2:r=e+a,i=s-a;break;case 3:e=r-a,i=s-a;break}this._root&&this._root.length&&(this._root=l)}return this._x0=e,this._y0=i,this._x1=r,this._y1=s,this}function _$(){var n=[];return this.visit(function(t){if(!t.length)do n.push(t.data);while(t=t.next)}),n}function v$(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Wa(n,t,e,i,r){this.node=n,this.x0=t,this.y0=e,this.x1=i,this.y1=r}function x$(n,t,e){var i,r=this._x0,s=this._y0,a,l,c,f,m=this._x1,g=this._y1,y=[],v=this._root,S,E;for(v&&y.push(new Wa(v,r,s,m,g)),e==null?e=1/0:(r=n-e,s=t-e,m=n+e,g=t+e,e*=e);S=y.pop();)if(!(!(v=S.node)||(a=S.x0)>m||(l=S.y0)>g||(c=S.x1)<r||(f=S.y1)<s))if(v.length){var T=(a+c)/2,x=(l+f)/2;y.push(new Wa(v[3],T,x,c,f),new Wa(v[2],a,x,T,f),new Wa(v[1],T,l,c,x),new Wa(v[0],a,l,T,x)),(E=(t>=x)<<1|n>=T)&&(S=y[y.length-1],y[y.length-1]=y[y.length-1-E],y[y.length-1-E]=S)}else{var R=n-+this._x.call(null,v.data),D=t-+this._y.call(null,v.data),O=R*R+D*D;if(O<e){var N=Math.sqrt(e=O);r=n-N,s=t-N,m=n+N,g=t+N,i=v.data}}return i}function b$(n){if(isNaN(m=+this._x.call(null,n))||isNaN(g=+this._y.call(null,n)))return this;var t,e=this._root,i,r,s,a=this._x0,l=this._y0,c=this._x1,f=this._y1,m,g,y,v,S,E,T,x;if(!e)return this;if(e.length)for(;;){if((S=m>=(y=(a+c)/2))?a=y:c=y,(E=g>=(v=(l+f)/2))?l=v:f=v,t=e,!(e=e[T=E<<1|S]))return this;if(!e.length)break;(t[T+1&3]||t[T+2&3]||t[T+3&3])&&(i=t,x=T)}for(;e.data!==n;)if(r=e,!(e=e.next))return this;return(s=e.next)&&delete e.next,r?(s?r.next=s:delete r.next,this):t?(s?t[T]=s:delete t[T],(e=t[0]||t[1]||t[2]||t[3])&&e===(t[3]||t[2]||t[1]||t[0])&&!e.length&&(i?i[x]=e:this._root=e),this):(this._root=s,this)}function S$(n){for(var t=0,e=n.length;t<e;++t)this.remove(n[t]);return this}function E$(){return this._root}function T$(){var n=0;return this.visit(function(t){if(!t.length)do++n;while(t=t.next)}),n}function M$(n){var t=[],e,i=this._root,r,s,a,l,c;for(i&&t.push(new Wa(i,this._x0,this._y0,this._x1,this._y1));e=t.pop();)if(!n(i=e.node,s=e.x0,a=e.y0,l=e.x1,c=e.y1)&&i.length){var f=(s+l)/2,m=(a+c)/2;(r=i[3])&&t.push(new Wa(r,f,m,l,c)),(r=i[2])&&t.push(new Wa(r,s,m,f,c)),(r=i[1])&&t.push(new Wa(r,f,a,l,m)),(r=i[0])&&t.push(new Wa(r,s,a,f,m))}return this}function A$(n){var t=[],e=[],i;for(this._root&&t.push(new Wa(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var s,a=i.x0,l=i.y0,c=i.x1,f=i.y1,m=(a+c)/2,g=(l+f)/2;(s=r[0])&&t.push(new Wa(s,a,l,m,g)),(s=r[1])&&t.push(new Wa(s,m,l,c,g)),(s=r[2])&&t.push(new Wa(s,a,g,m,f)),(s=r[3])&&t.push(new Wa(s,m,g,c,f))}e.push(i)}for(;i=e.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function w$(n){return n[0]}function C$(n){return arguments.length?(this._x=n,this):this._x}function R$(n){return n[1]}function O$(n){return arguments.length?(this._y=n,this):this._y}function aV(n,t,e){var i=new AO(t??w$,e??R$,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function AO(n,t,e,i,r,s){this._x=n,this._y=t,this._x0=e,this._y0=i,this._x1=r,this._y1=s,this._root=void 0}function a3(n){for(var t={data:n.data},e=t;n=n.next;)e=e.next={data:n.data};return t}var Qa=aV.prototype=AO.prototype;Qa.copy=function(){var n=new AO(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,e,i;if(!t)return n;if(!t.length)return n._root=a3(t),n;for(e=[{source:t,target:n._root=new Array(4)}];t=e.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?e.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=a3(i));return n};Qa.add=m$;Qa.addAll=g$;Qa.cover=y$;Qa.data=_$;Qa.extent=v$;Qa.find=x$;Qa.remove=b$;Qa.removeAll=S$;Qa.root=E$;Qa.size=T$;Qa.visit=M$;Qa.visitAfter=A$;Qa.x=C$;Qa.y=O$;function D$(n){const t=+this._x.call(null,n),e=+this._y.call(null,n),i=+this._z.call(null,n);return oV(this.cover(t,e,i),t,e,i,n)}function oV(n,t,e,i,r){if(isNaN(t)||isNaN(e)||isNaN(i))return n;var s,a=n._root,l={data:r},c=n._x0,f=n._y0,m=n._z0,g=n._x1,y=n._y1,v=n._z1,S,E,T,x,R,D,O,N,B,L,U;if(!a)return n._root=l,n;for(;a.length;)if((O=t>=(S=(c+g)/2))?c=S:g=S,(N=e>=(E=(f+y)/2))?f=E:y=E,(B=i>=(T=(m+v)/2))?m=T:v=T,s=a,!(a=a[L=B<<2|N<<1|O]))return s[L]=l,n;if(x=+n._x.call(null,a.data),R=+n._y.call(null,a.data),D=+n._z.call(null,a.data),t===x&&e===R&&i===D)return l.next=a,s?s[L]=l:n._root=l,n;do s=s?s[L]=new Array(8):n._root=new Array(8),(O=t>=(S=(c+g)/2))?c=S:g=S,(N=e>=(E=(f+y)/2))?f=E:y=E,(B=i>=(T=(m+v)/2))?m=T:v=T;while((L=B<<2|N<<1|O)===(U=(D>=T)<<2|(R>=E)<<1|x>=S));return s[U]=a,s[L]=l,n}function N$(n){Array.isArray(n)||(n=Array.from(n));const t=n.length,e=new Float64Array(t),i=new Float64Array(t),r=new Float64Array(t);let s=1/0,a=1/0,l=1/0,c=-1/0,f=-1/0,m=-1/0;for(let g=0,y,v,S,E;g<t;++g)isNaN(v=+this._x.call(null,y=n[g]))||isNaN(S=+this._y.call(null,y))||isNaN(E=+this._z.call(null,y))||(e[g]=v,i[g]=S,r[g]=E,v<s&&(s=v),v>c&&(c=v),S<a&&(a=S),S>f&&(f=S),E<l&&(l=E),E>m&&(m=E));if(s>c||a>f||l>m)return this;this.cover(s,a,l).cover(c,f,m);for(let g=0;g<t;++g)oV(this,e[g],i[g],r[g],n[g]);return this}function I$(n,t,e){if(isNaN(n=+n)||isNaN(t=+t)||isNaN(e=+e))return this;var i=this._x0,r=this._y0,s=this._z0,a=this._x1,l=this._y1,c=this._z1;if(isNaN(i))a=(i=Math.floor(n))+1,l=(r=Math.floor(t))+1,c=(s=Math.floor(e))+1;else{for(var f=a-i||1,m=this._root,g,y;i>n||n>=a||r>t||t>=l||s>e||e>=c;)switch(y=(e<s)<<2|(t<r)<<1|n<i,g=new Array(8),g[y]=m,m=g,f*=2,y){case 0:a=i+f,l=r+f,c=s+f;break;case 1:i=a-f,l=r+f,c=s+f;break;case 2:a=i+f,r=l-f,c=s+f;break;case 3:i=a-f,r=l-f,c=s+f;break;case 4:a=i+f,l=r+f,s=c-f;break;case 5:i=a-f,l=r+f,s=c-f;break;case 6:a=i+f,r=l-f,s=c-f;break;case 7:i=a-f,r=l-f,s=c-f;break}this._root&&this._root.length&&(this._root=m)}return this._x0=i,this._y0=r,this._z0=s,this._x1=a,this._y1=l,this._z1=c,this}function P$(){var n=[];return this.visit(function(t){if(!t.length)do n.push(t.data);while(t=t.next)}),n}function L$(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Fi(n,t,e,i,r,s,a){this.node=n,this.x0=t,this.y0=e,this.z0=i,this.x1=r,this.y1=s,this.z1=a}function U$(n,t,e,i){var r,s=this._x0,a=this._y0,l=this._z0,c,f,m,g,y,v,S=this._x1,E=this._y1,T=this._z1,x=[],R=this._root,D,O;for(R&&x.push(new Fi(R,s,a,l,S,E,T)),i==null?i=1/0:(s=n-i,a=t-i,l=e-i,S=n+i,E=t+i,T=e+i,i*=i);D=x.pop();)if(!(!(R=D.node)||(c=D.x0)>S||(f=D.y0)>E||(m=D.z0)>T||(g=D.x1)<s||(y=D.y1)<a||(v=D.z1)<l))if(R.length){var N=(c+g)/2,B=(f+y)/2,L=(m+v)/2;x.push(new Fi(R[7],N,B,L,g,y,v),new Fi(R[6],c,B,L,N,y,v),new Fi(R[5],N,f,L,g,B,v),new Fi(R[4],c,f,L,N,B,v),new Fi(R[3],N,B,m,g,y,L),new Fi(R[2],c,B,m,N,y,L),new Fi(R[1],N,f,m,g,B,L),new Fi(R[0],c,f,m,N,B,L)),(O=(e>=L)<<2|(t>=B)<<1|n>=N)&&(D=x[x.length-1],x[x.length-1]=x[x.length-1-O],x[x.length-1-O]=D)}else{var U=n-+this._x.call(null,R.data),I=t-+this._y.call(null,R.data),w=e-+this._z.call(null,R.data),V=U*U+I*I+w*w;if(V<i){var G=Math.sqrt(i=V);s=n-G,a=t-G,l=e-G,S=n+G,E=t+G,T=e+G,r=R.data}}return r}const z$=(n,t,e,i,r,s)=>Math.sqrt((n-i)**2+(t-r)**2+(e-s)**2);function B$(n,t,e,i){const r=[],s=n-i,a=t-i,l=e-i,c=n+i,f=t+i,m=e+i;return this.visit((g,y,v,S,E,T,x)=>{if(!g.length)do{const R=g.data;z$(n,t,e,this._x(R),this._y(R),this._z(R))<=i&&r.push(R)}while(g=g.next);return y>c||v>f||S>m||E<s||T<a||x<l}),r}function V$(n){if(isNaN(y=+this._x.call(null,n))||isNaN(v=+this._y.call(null,n))||isNaN(S=+this._z.call(null,n)))return this;var t,e=this._root,i,r,s,a=this._x0,l=this._y0,c=this._z0,f=this._x1,m=this._y1,g=this._z1,y,v,S,E,T,x,R,D,O,N,B;if(!e)return this;if(e.length)for(;;){if((R=y>=(E=(a+f)/2))?a=E:f=E,(D=v>=(T=(l+m)/2))?l=T:m=T,(O=S>=(x=(c+g)/2))?c=x:g=x,t=e,!(e=e[N=O<<2|D<<1|R]))return this;if(!e.length)break;(t[N+1&7]||t[N+2&7]||t[N+3&7]||t[N+4&7]||t[N+5&7]||t[N+6&7]||t[N+7&7])&&(i=t,B=N)}for(;e.data!==n;)if(r=e,!(e=e.next))return this;return(s=e.next)&&delete e.next,r?(s?r.next=s:delete r.next,this):t?(s?t[N]=s:delete t[N],(e=t[0]||t[1]||t[2]||t[3]||t[4]||t[5]||t[6]||t[7])&&e===(t[7]||t[6]||t[5]||t[4]||t[3]||t[2]||t[1]||t[0])&&!e.length&&(i?i[B]=e:this._root=e),this):(this._root=s,this)}function F$(n){for(var t=0,e=n.length;t<e;++t)this.remove(n[t]);return this}function k$(){return this._root}function H$(){var n=0;return this.visit(function(t){if(!t.length)do++n;while(t=t.next)}),n}function G$(n){var t=[],e,i=this._root,r,s,a,l,c,f,m;for(i&&t.push(new Fi(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));e=t.pop();)if(!n(i=e.node,s=e.x0,a=e.y0,l=e.z0,c=e.x1,f=e.y1,m=e.z1)&&i.length){var g=(s+c)/2,y=(a+f)/2,v=(l+m)/2;(r=i[7])&&t.push(new Fi(r,g,y,v,c,f,m)),(r=i[6])&&t.push(new Fi(r,s,y,v,g,f,m)),(r=i[5])&&t.push(new Fi(r,g,a,v,c,y,m)),(r=i[4])&&t.push(new Fi(r,s,a,v,g,y,m)),(r=i[3])&&t.push(new Fi(r,g,y,l,c,f,v)),(r=i[2])&&t.push(new Fi(r,s,y,l,g,f,v)),(r=i[1])&&t.push(new Fi(r,g,a,l,c,y,v)),(r=i[0])&&t.push(new Fi(r,s,a,l,g,y,v))}return this}function q$(n){var t=[],e=[],i;for(this._root&&t.push(new Fi(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=t.pop();){var r=i.node;if(r.length){var s,a=i.x0,l=i.y0,c=i.z0,f=i.x1,m=i.y1,g=i.z1,y=(a+f)/2,v=(l+m)/2,S=(c+g)/2;(s=r[0])&&t.push(new Fi(s,a,l,c,y,v,S)),(s=r[1])&&t.push(new Fi(s,y,l,c,f,v,S)),(s=r[2])&&t.push(new Fi(s,a,v,c,y,m,S)),(s=r[3])&&t.push(new Fi(s,y,v,c,f,m,S)),(s=r[4])&&t.push(new Fi(s,a,l,S,y,v,g)),(s=r[5])&&t.push(new Fi(s,y,l,S,f,v,g)),(s=r[6])&&t.push(new Fi(s,a,v,S,y,m,g)),(s=r[7])&&t.push(new Fi(s,y,v,S,f,m,g))}e.push(i)}for(;i=e.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function j$(n){return n[0]}function X$(n){return arguments.length?(this._x=n,this):this._x}function W$(n){return n[1]}function Y$(n){return arguments.length?(this._y=n,this):this._y}function $$(n){return n[2]}function K$(n){return arguments.length?(this._z=n,this):this._z}function lV(n,t,e,i){var r=new wO(t??j$,e??W$,i??$$,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function wO(n,t,e,i,r,s,a,l,c){this._x=n,this._y=t,this._z=e,this._x0=i,this._y0=r,this._z0=s,this._x1=a,this._y1=l,this._z1=c,this._root=void 0}function o3(n){for(var t={data:n.data},e=t;n=n.next;)e=e.next={data:n.data};return t}var ta=lV.prototype=wO.prototype;ta.copy=function(){var n=new wO(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),t=this._root,e,i;if(!t)return n;if(!t.length)return n._root=o3(t),n;for(e=[{source:t,target:n._root=new Array(8)}];t=e.pop();)for(var r=0;r<8;++r)(i=t.source[r])&&(i.length?e.push({source:i,target:t.target[r]=new Array(8)}):t.target[r]=o3(i));return n};ta.add=D$;ta.addAll=N$;ta.cover=I$;ta.data=P$;ta.extent=L$;ta.find=U$;ta.findAllWithinRadius=B$;ta.remove=V$;ta.removeAll=F$;ta.root=k$;ta.size=H$;ta.visit=G$;ta.visitAfter=q$;ta.x=X$;ta.y=Y$;ta.z=K$;function sh(n){return function(){return n}}function th(n){return(n()-.5)*1e-6}function Z$(n){return n.index}function l3(n,t){var e=n.get(t);if(!e)throw new Error("node not found: "+t);return e}function Q$(n){var t=Z$,e=y,i,r=sh(30),s,a,l,c,f,m,g=1;n==null&&(n=[]);function y(x){return 1/Math.min(c[x.source.index],c[x.target.index])}function v(x){for(var R=0,D=n.length;R<g;++R)for(var O=0,N,B,L,U=0,I=0,w=0,V,G;O<D;++O)N=n[O],B=N.source,L=N.target,U=L.x+L.vx-B.x-B.vx||th(m),l>1&&(I=L.y+L.vy-B.y-B.vy||th(m)),l>2&&(w=L.z+L.vz-B.z-B.vz||th(m)),V=Math.sqrt(U*U+I*I+w*w),V=(V-s[O])/V*x*i[O],U*=V,I*=V,w*=V,L.vx-=U*(G=f[O]),l>1&&(L.vy-=I*G),l>2&&(L.vz-=w*G),B.vx+=U*(G=1-G),l>1&&(B.vy+=I*G),l>2&&(B.vz+=w*G)}function S(){if(a){var x,R=a.length,D=n.length,O=new Map(a.map((B,L)=>[t(B,L,a),B])),N;for(x=0,c=new Array(R);x<D;++x)N=n[x],N.index=x,typeof N.source!="object"&&(N.source=l3(O,N.source)),typeof N.target!="object"&&(N.target=l3(O,N.target)),c[N.source.index]=(c[N.source.index]||0)+1,c[N.target.index]=(c[N.target.index]||0)+1;for(x=0,f=new Array(D);x<D;++x)N=n[x],f[x]=c[N.source.index]/(c[N.source.index]+c[N.target.index]);i=new Array(D),E(),s=new Array(D),T()}}function E(){if(a)for(var x=0,R=n.length;x<R;++x)i[x]=+e(n[x],x,n)}function T(){if(a)for(var x=0,R=n.length;x<R;++x)s[x]=+r(n[x],x,n)}return v.initialize=function(x,...R){a=x,m=R.find(D=>typeof D=="function")||Math.random,l=R.find(D=>[1,2,3].includes(D))||2,S()},v.links=function(x){return arguments.length?(n=x,S(),v):n},v.id=function(x){return arguments.length?(t=x,v):t},v.iterations=function(x){return arguments.length?(g=+x,v):g},v.strength=function(x){return arguments.length?(e=typeof x=="function"?x:sh(+x),E(),v):e},v.distance=function(x){return arguments.length?(r=typeof x=="function"?x:sh(+x),T(),v):r},v}var J$={value:()=>{}};function uV(){for(var n=0,t=arguments.length,e={},i;n<t;++n){if(!(i=arguments[n]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new HE(e)}function HE(n){this._=n}function tK(n,t){return n.trim().split(/^|\s+/).map(function(e){var i="",r=e.indexOf(".");if(r>=0&&(i=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}HE.prototype=uV.prototype={constructor:HE,on:function(n,t){var e=this._,i=tK(n+"",e),r,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((r=(n=i[s]).type)&&(r=eK(e[r],n.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(r=(n=i[s]).type)e[r]=u3(e[r],n.name,t);else if(t==null)for(r in e)e[r]=u3(e[r],n.name,null);return this},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new HE(n)},call:function(n,t){if((r=arguments.length-2)>0)for(var e=new Array(r),i=0,r,s;i<r;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],i=0,r=s.length;i<r;++i)s[i].value.apply(t,e)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,s=i.length;r<s;++r)i[r].value.apply(t,e)}};function eK(n,t){for(var e=0,i=n.length,r;e<i;++e)if((r=n[e]).name===t)return r.value}function u3(n,t,e){for(var i=0,r=n.length;i<r;++i)if(n[i].name===t){n[i]=J$,n=n.slice(0,i).concat(n.slice(i+1));break}return e!=null&&n.push({name:t,value:e}),n}var Xy=0,l0=0,jv=0,cV=1e3,W1,u0,Y1=0,Um=0,mM=0,cx=typeof performance=="object"&&performance.now?performance:Date,fV=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function hV(){return Um||(fV(nK),Um=cx.now()+mM)}function nK(){Um=0}function dR(){this._call=this._time=this._next=null}dR.prototype=dV.prototype={constructor:dR,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?hV():+e)+(t==null?0:+t),!this._next&&u0!==this&&(u0?u0._next=this:W1=this,u0=this),this._call=n,this._time=e,pR()},stop:function(){this._call&&(this._call=null,this._time=1/0,pR())}};function dV(n,t,e){var i=new dR;return i.restart(n,t,e),i}function iK(){hV(),++Xy;for(var n=W1,t;n;)(t=Um-n._time)>=0&&n._call.call(void 0,t),n=n._next;--Xy}function c3(){Um=(Y1=cx.now())+mM,Xy=l0=0;try{iK()}finally{Xy=0,sK(),Um=0}}function rK(){var n=cx.now(),t=n-Y1;t>cV&&(mM-=t,Y1=n)}function sK(){for(var n,t=W1,e,i=1/0;t;)t._call?(i>t._time&&(i=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:W1=e);u0=n,pR(i)}function pR(n){if(!Xy){l0&&(l0=clearTimeout(l0));var t=n-Um;t>24?(n<1/0&&(l0=setTimeout(c3,n-cx.now()-mM)),jv&&(jv=clearInterval(jv))):(jv||(Y1=cx.now(),jv=setInterval(rK,cV)),Xy=1,fV(c3))}}const aK=1664525,oK=1013904223,f3=4294967296;function lK(){let n=1;return()=>(n=(aK*n+oK)%f3)/f3}var h3=3;function Yw(n){return n.x}function d3(n){return n.y}function uK(n){return n.z}var cK=10,fK=Math.PI*(3-Math.sqrt(5)),hK=Math.PI*20/(9+Math.sqrt(221));function dK(n,t){t=t||2;var e=Math.min(h3,Math.max(1,Math.round(t))),i,r=1,s=.001,a=1-Math.pow(s,1/300),l=0,c=.6,f=new Map,m=dV(v),g=uV("tick","end"),y=lK();n==null&&(n=[]);function v(){S(),g.call("tick",i),r<s&&(m.stop(),g.call("end",i))}function S(x){var R,D=n.length,O;x===void 0&&(x=1);for(var N=0;N<x;++N)for(r+=(l-r)*a,f.forEach(function(B){B(r)}),R=0;R<D;++R)O=n[R],O.fx==null?O.x+=O.vx*=c:(O.x=O.fx,O.vx=0),e>1&&(O.fy==null?O.y+=O.vy*=c:(O.y=O.fy,O.vy=0)),e>2&&(O.fz==null?O.z+=O.vz*=c:(O.z=O.fz,O.vz=0));return i}function E(){for(var x=0,R=n.length,D;x<R;++x){if(D=n[x],D.index=x,D.fx!=null&&(D.x=D.fx),D.fy!=null&&(D.y=D.fy),D.fz!=null&&(D.z=D.fz),isNaN(D.x)||e>1&&isNaN(D.y)||e>2&&isNaN(D.z)){var O=cK*(e>2?Math.cbrt(.5+x):e>1?Math.sqrt(.5+x):x),N=x*fK,B=x*hK;e===1?D.x=O:e===2?(D.x=O*Math.cos(N),D.y=O*Math.sin(N)):(D.x=O*Math.sin(N)*Math.cos(B),D.y=O*Math.cos(N),D.z=O*Math.sin(N)*Math.sin(B))}(isNaN(D.vx)||e>1&&isNaN(D.vy)||e>2&&isNaN(D.vz))&&(D.vx=0,e>1&&(D.vy=0),e>2&&(D.vz=0))}}function T(x){return x.initialize&&x.initialize(n,y,e),x}return E(),i={tick:S,restart:function(){return m.restart(v),i},stop:function(){return m.stop(),i},numDimensions:function(x){return arguments.length?(e=Math.min(h3,Math.max(1,Math.round(x))),f.forEach(T),i):e},nodes:function(x){return arguments.length?(n=x,E(),f.forEach(T),i):n},alpha:function(x){return arguments.length?(r=+x,i):r},alphaMin:function(x){return arguments.length?(s=+x,i):s},alphaDecay:function(x){return arguments.length?(a=+x,i):+a},alphaTarget:function(x){return arguments.length?(l=+x,i):l},velocityDecay:function(x){return arguments.length?(c=1-x,i):1-c},randomSource:function(x){return arguments.length?(y=x,f.forEach(T),i):y},force:function(x,R){return arguments.length>1?(R==null?f.delete(x):f.set(x,T(R)),i):f.get(x)},find:function(){var x=Array.prototype.slice.call(arguments),R=x.shift()||0,D=(e>1?x.shift():null)||0,O=(e>2?x.shift():null)||0,N=x.shift()||1/0,B=0,L=n.length,U,I,w,V,G,k;for(N*=N,B=0;B<L;++B)G=n[B],U=R-G.x,I=D-(G.y||0),w=O-(G.z||0),V=U*U+I*I+w*w,V<N&&(k=G,N=V);return k},on:function(x,R){return arguments.length>1?(g.on(x,R),i):g.on(x)}}}function pK(){var n,t,e,i,r,s=sh(-30),a,l=1,c=1/0,f=.81;function m(S){var E,T=n.length,x=(t===1?rV(n,Yw):t===2?aV(n,Yw,d3):t===3?lV(n,Yw,d3,uK):null).visitAfter(y);for(r=S,E=0;E<T;++E)e=n[E],x.visit(v)}function g(){if(n){var S,E=n.length,T;for(a=new Array(E),S=0;S<E;++S)T=n[S],a[T.index]=+s(T,S,n)}}function y(S){var E=0,T,x,R=0,D,O,N,B,L=S.length;if(L){for(D=O=N=B=0;B<L;++B)(T=S[B])&&(x=Math.abs(T.value))&&(E+=T.value,R+=x,D+=x*(T.x||0),O+=x*(T.y||0),N+=x*(T.z||0));E*=Math.sqrt(4/L),S.x=D/R,t>1&&(S.y=O/R),t>2&&(S.z=N/R)}else{T=S,T.x=T.data.x,t>1&&(T.y=T.data.y),t>2&&(T.z=T.data.z);do E+=a[T.data.index];while(T=T.next)}S.value=E}function v(S,E,T,x,R){if(!S.value)return!0;var D=[T,x,R][t-1],O=S.x-e.x,N=t>1?S.y-e.y:0,B=t>2?S.z-e.z:0,L=D-E,U=O*O+N*N+B*B;if(L*L/f<U)return U<c&&(O===0&&(O=th(i),U+=O*O),t>1&&N===0&&(N=th(i),U+=N*N),t>2&&B===0&&(B=th(i),U+=B*B),U<l&&(U=Math.sqrt(l*U)),e.vx+=O*S.value*r/U,t>1&&(e.vy+=N*S.value*r/U),t>2&&(e.vz+=B*S.value*r/U)),!0;if(S.length||U>=c)return;(S.data!==e||S.next)&&(O===0&&(O=th(i),U+=O*O),t>1&&N===0&&(N=th(i),U+=N*N),t>2&&B===0&&(B=th(i),U+=B*B),U<l&&(U=Math.sqrt(l*U)));do S.data!==e&&(L=a[S.data.index]*r/U,e.vx+=O*L,t>1&&(e.vy+=N*L),t>2&&(e.vz+=B*L));while(S=S.next)}return m.initialize=function(S,...E){n=S,i=E.find(T=>typeof T=="function")||Math.random,t=E.find(T=>[1,2,3].includes(T))||2,g()},m.strength=function(S){return arguments.length?(s=typeof S=="function"?S:sh(+S),g(),m):s},m.distanceMin=function(S){return arguments.length?(l=S*S,m):Math.sqrt(l)},m.distanceMax=function(S){return arguments.length?(c=S*S,m):Math.sqrt(c)},m.theta=function(S){return arguments.length?(f=S*S,m):Math.sqrt(f)},m}function mK(n,t,e,i){var r,s,a=sh(.1),l,c;typeof n!="function"&&(n=sh(+n)),t==null&&(t=0),e==null&&(e=0),i==null&&(i=0);function f(g){for(var y=0,v=r.length;y<v;++y){var S=r[y],E=S.x-t||1e-6,T=(S.y||0)-e||1e-6,x=(S.z||0)-i||1e-6,R=Math.sqrt(E*E+T*T+x*x),D=(c[y]-R)*l[y]*g/R;S.vx+=E*D,s>1&&(S.vy+=T*D),s>2&&(S.vz+=x*D)}}function m(){if(r){var g,y=r.length;for(l=new Array(y),c=new Array(y),g=0;g<y;++g)c[g]=+n(r[g],g,r),l[g]=isNaN(c[g])?0:+a(r[g],g,r)}}return f.initialize=function(g,...y){r=g,s=y.find(v=>[1,2,3].includes(v))||2,m()},f.strength=function(g){return arguments.length?(a=typeof g=="function"?g:sh(+g),m(),f):a},f.radius=function(g){return arguments.length?(n=typeof g=="function"?g:sh(+g),m(),f):n},f.x=function(g){return arguments.length?(t=+g,f):t},f.y=function(g){return arguments.length?(e=+g,f):e},f.z=function(g){return arguments.length?(i=+g,f):i},f}var $w,p3;function CO(){if(p3)return $w;p3=1,$w=function(i){t(i);var r=n(i);return i.on=r.on,i.off=r.off,i.fire=r.fire,i};function n(e){var i=Object.create(null);return{on:function(r,s,a){if(typeof s!="function")throw new Error("callback is expected to be a function");var l=i[r];return l||(l=i[r]=[]),l.push({callback:s,ctx:a}),e},off:function(r,s){var a=typeof r>"u";if(a)return i=Object.create(null),e;if(i[r]){var l=typeof s!="function";if(l)delete i[r];else for(var c=i[r],f=0;f<c.length;++f)c[f].callback===s&&c.splice(f,1)}return e},fire:function(r){var s=i[r];if(!s)return e;var a;arguments.length>1&&(a=Array.prototype.splice.call(arguments,1));for(var l=0;l<s.length;++l){var c=s[l];c.callback.apply(c.ctx,a)}return e}}}function t(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var i=["on","fire","off"],r=0;r<i.length;++r)if(e.hasOwnProperty(i[r]))throw new Error("Subject cannot be eventified, since it already has property '"+i[r]+"'")}return $w}var Kw,m3;function gK(){if(m3)return Kw;m3=1,Kw=t;var n=CO();function t(a){if(a=a||{},"uniqueLinkId"in a&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),a.multigraph=a.uniqueLinkId),a.multigraph===void 0&&(a.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var l=new Map,c=new Map,f={},m=0,g=a.multigraph?w:I,y=[],v=wt,S=wt,E=wt,T=wt,x={version:20,addNode:N,addLink:U,removeLink:st,removeNode:L,getNode:B,getNodeCount:V,getLinkCount:G,getEdgeCount:G,getLinksCount:G,getNodesCount:V,getLinks:k,forEachNode:lt,forEachLinkedNode:ct,forEachLink:at,beginUpdate:E,endUpdate:T,clear:Z,hasLink:Y,hasNode:B,getLink:Y};return n(x),R(),x;function R(){var ft=x.on;x.on=mt;function mt(){return x.beginUpdate=E=zt,x.endUpdate=T=nt,v=D,S=O,x.on=ft,ft.apply(x,arguments)}}function D(ft,mt){y.push({link:ft,changeType:mt})}function O(ft,mt){y.push({node:ft,changeType:mt})}function N(ft,mt){if(ft===void 0)throw new Error("Invalid node identifier");E();var Dt=B(ft);return Dt?(Dt.data=mt,S(Dt,"update")):(Dt=new e(ft,mt),S(Dt,"add")),l.set(ft,Dt),T(),Dt}function B(ft){return l.get(ft)}function L(ft){var mt=B(ft);if(!mt)return!1;E();var Dt=mt.links;return Dt&&(Dt.forEach(it),mt.links=null),l.delete(ft),S(mt,"remove"),T(),!0}function U(ft,mt,Dt){E();var Wt=B(ft)||N(ft),Nt=B(mt)||N(mt),Jt=g(ft,mt,Dt),Pt=c.has(Jt.id);return c.set(Jt.id,Jt),i(Wt,Jt),ft!==mt&&i(Nt,Jt),v(Jt,Pt?"update":"add"),T(),Jt}function I(ft,mt,Dt){var Wt=s(ft,mt),Nt=c.get(Wt);return Nt?(Nt.data=Dt,Nt):new r(ft,mt,Dt,Wt)}function w(ft,mt,Dt){var Wt=s(ft,mt),Nt=f.hasOwnProperty(Wt);if(Nt||Y(ft,mt)){Nt||(f[Wt]=0);var Jt="@"+ ++f[Wt];Wt=s(ft+Jt,mt+Jt)}return new r(ft,mt,Dt,Wt)}function V(){return l.size}function G(){return c.size}function k(ft){var mt=B(ft);return mt?mt.links:null}function st(ft,mt){return mt!==void 0&&(ft=Y(ft,mt)),it(ft)}function it(ft){if(!ft||!c.get(ft.id))return!1;E(),c.delete(ft.id);var mt=B(ft.fromId),Dt=B(ft.toId);return mt&&mt.links.delete(ft),Dt&&Dt.links.delete(ft),v(ft,"remove"),T(),!0}function Y(ft,mt){if(!(ft===void 0||mt===void 0))return c.get(s(ft,mt))}function Z(){E(),lt(function(ft){L(ft.id)}),T()}function at(ft){if(typeof ft=="function")for(var mt=c.values(),Dt=mt.next();!Dt.done;){if(ft(Dt.value))return!0;Dt=mt.next()}}function ct(ft,mt,Dt){var Wt=B(ft);if(Wt&&Wt.links&&typeof mt=="function")return Dt?pt(Wt.links,ft,mt):$(Wt.links,ft,mt)}function $(ft,mt,Dt){for(var Wt,Nt=ft.values(),Jt=Nt.next();!Jt.done;){var Pt=Jt.value,kt=Pt.fromId===mt?Pt.toId:Pt.fromId;if(Wt=Dt(l.get(kt),Pt),Wt)return!0;Jt=Nt.next()}}function pt(ft,mt,Dt){for(var Wt,Nt=ft.values(),Jt=Nt.next();!Jt.done;){var Pt=Jt.value;if(Pt.fromId===mt&&(Wt=Dt(l.get(Pt.toId),Pt),Wt))return!0;Jt=Nt.next()}}function wt(){}function zt(){m+=1}function nt(){m-=1,m===0&&y.length>0&&(x.fire("changed",y),y.length=0)}function lt(ft){if(typeof ft!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+ft);for(var mt=l.values(),Dt=mt.next();!Dt.done;){if(ft(Dt.value))return!0;Dt=mt.next()}}}function e(a,l){this.id=a,this.links=null,this.data=l}function i(a,l){a.links?a.links.add(l):a.links=new Set([l])}function r(a,l,c,f){this.fromId=a,this.toId=l,this.data=c,this.id=f}function s(a,l){return a.toString()+"👉 "+l.toString()}return Kw}var yK=gK();const _K=c_(yK);var mE={exports:{}},uy={exports:{}},Zw,g3;function pV(){return g3||(g3=1,Zw=function(t){return t===0?"x":t===1?"y":t===2?"z":"c"+(t+1)}),Zw}var Qw,y3;function v_(){if(y3)return Qw;y3=1;const n=pV();return Qw=function(e){return i;function i(r,s){let a=s&&s.indent||0,l=s&&s.join!==void 0?s.join:`
`,c=Array(a+1).join(" "),f=[];for(let m=0;m<e;++m){let g=n(m),y=m===0?"":c;f.push(y+r.replace(/{var}/g,g))}return f.join(l)}},Qw}var _3;function vK(){if(_3)return uy.exports;_3=1;const n=v_();uy.exports=t,uy.exports.generateCreateBodyFunctionBody=e,uy.exports.getVectorCode=r,uy.exports.getBodyCode=i;function t(s,a){let l=e(s,a),{Body:c}=new Function(l)();return c}function e(s,a){return`
${r(s,a)}
${i(s)}
return {Body: Body, Vector: Vector};
`}function i(s){let a=n(s),l=a("{var}",{join:", "});return`
function Body(${l}) {
  this.isPinned = false;
  this.pos = new Vector(${l});
  this.force = new Vector();
  this.velocity = new Vector();
  this.mass = 1;

  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.reset = function() {
  this.force.reset();
  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.setPosition = function (${l}) {
  ${a("this.pos.{var} = {var} || 0;",{indent:2})}
};`}function r(s,a){let l=n(s),c="";return a&&(c=`${l(`
	   var v{var};
	Object.defineProperty(this, '{var}', {
	  set: function(v) { 
	    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');
	    v{var} = v; 
	  },
	  get: function() { return v{var}; }
	});`)}`),`function Vector(${l("{var}",{join:", "})}) {
  ${c}
    if (typeof arguments[0] === 'object') {
      // could be another vector
      let v = arguments[0];
      ${l('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}
      ${l("this.{var} = v.{var};",{indent:4})}
    } else {
      ${l('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}
    }
  }
  
  Vector.prototype.reset = function () {
    ${l("this.{var} = ",{join:""})}0;
  };`}return uy.exports}var Yf={exports:{}},v3;function xK(){if(v3)return Yf.exports;v3=1;const n=v_(),t=pV();Yf.exports=e,Yf.exports.generateQuadTreeFunctionBody=i,Yf.exports.getInsertStackCode=c,Yf.exports.getQuadNodeCode=l,Yf.exports.isSamePosition=r,Yf.exports.getChildBodyCode=a,Yf.exports.setChildBodyCode=s;function e(f){let m=i(f);return new Function(m)()}function i(f){let m=n(f),g=Math.pow(2,f);return`
${c()}
${l(f)}
${r(f)}
${a(f)}
${s(f)}

function createQuadTree(options, random) {
  options = options || {};
  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;
  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;

  var gravity = options.gravity;
  var updateQueue = [];
  var insertStack = new InsertStack();
  var theta = options.theta;

  var nodesCache = [];
  var currentInCache = 0;
  var root = newNode();

  return {
    insertBodies: insertBodies,

    /**
     * Gets root node if it is present
     */
    getRoot: function() {
      return root;
    },

    updateBodyForce: update,

    options: function(newOptions) {
      if (newOptions) {
        if (typeof newOptions.gravity === 'number') {
          gravity = newOptions.gravity;
        }
        if (typeof newOptions.theta === 'number') {
          theta = newOptions.theta;
        }

        return this;
      }

      return {
        gravity: gravity,
        theta: theta
      };
    }
  };

  function newNode() {
    // To avoid pressure on GC we reuse nodes.
    var node = nodesCache[currentInCache];
    if (node) {
${E("      node.")}
      node.body = null;
      node.mass = ${m("node.mass_{var} = ",{join:""})}0;
      ${m("node.min_{var} = node.max_{var} = ",{join:""})}0;
    } else {
      node = new QuadNode();
      nodesCache[currentInCache] = node;
    }

    ++currentInCache;
    return node;
  }

  function update(sourceBody) {
    var queue = updateQueue;
    var v;
    ${m("var d{var};",{indent:4})}
    var r; 
    ${m("var f{var} = 0;",{indent:4})}
    var queueLength = 1;
    var shiftIdx = 0;
    var pushIdx = 1;

    queue[0] = root;

    while (queueLength) {
      var node = queue[shiftIdx];
      var body = node.body;

      queueLength -= 1;
      shiftIdx += 1;
      var differentBody = (body !== sourceBody);
      if (body && differentBody) {
        // If the current node is a leaf node (and it is not source body),
        // calculate the force exerted by the current node on body, and add this
        // amount to body's net force.
        ${m("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${m("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Poor man's protection against zero distance.
          ${m("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${m("d{var} * d{var}",{join:" + "})});
        }

        // This is standard gravitation force calculation but we divide
        // by r^3 to save two operations when normalizing force vector.
        v = gravity * body.mass * sourceBody.mass / (r * r * r);
        ${m("f{var} += v * d{var};",{indent:8})}
      } else if (differentBody) {
        // Otherwise, calculate the ratio s / r,  where s is the width of the region
        // represented by the internal node, and r is the distance between the body
        // and the node's center-of-mass
        ${m("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${m("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Sorry about code duplication. I don't want to create many functions
          // right away. Just want to see performance first.
          ${m("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${m("d{var} * d{var}",{join:" + "})});
        }
        // If s / r < θ, treat this internal node as a single body, and calculate the
        // force it exerts on sourceBody, and add this amount to sourceBody's net force.
        if ((node.max_${t(0)} - node.min_${t(0)}) / r < theta) {
          // in the if statement above we consider node's width only
          // because the region was made into square during tree creation.
          // Thus there is no difference between using width or height.
          v = gravity * node.mass * sourceBody.mass / (r * r * r);
          ${m("f{var} += v * d{var};",{indent:10})}
        } else {
          // Otherwise, run the procedure recursively on each of the current node's children.

          // I intentionally unfolded this loop, to save several CPU cycles.
${S()}
        }
      }
    }

    ${m("sourceBody.force.{var} += f{var};",{indent:4})}
  }

  function insertBodies(bodies) {
    ${m("var {var}min = Number.MAX_VALUE;",{indent:4})}
    ${m("var {var}max = Number.MIN_VALUE;",{indent:4})}
    var i = bodies.length;

    // To reduce quad tree depth we are looking for exact bounding box of all particles.
    while (i--) {
      var pos = bodies[i].pos;
      ${m("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}
      ${m("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}
    }

    // Makes the bounds square.
    var maxSideLength = -Infinity;
    ${m("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}

    currentInCache = 0;
    root = newNode();
    ${m("root.min_{var} = {var}min;",{indent:4})}
    ${m("root.max_{var} = {var}min + maxSideLength;",{indent:4})}

    i = bodies.length - 1;
    if (i >= 0) {
      root.body = bodies[i];
    }
    while (i--) {
      insert(bodies[i], root);
    }
  }

  function insert(newBody) {
    insertStack.reset();
    insertStack.push(root, newBody);

    while (!insertStack.isEmpty()) {
      var stackItem = insertStack.pop();
      var node = stackItem.node;
      var body = stackItem.body;

      if (!node.body) {
        // This is internal node. Update the total mass of the node and center-of-mass.
        ${m("var {var} = body.pos.{var};",{indent:8})}
        node.mass += body.mass;
        ${m("node.mass_{var} += body.mass * {var};",{indent:8})}

        // Recursively insert the body in the appropriate quadrant.
        // But first find the appropriate quadrant.
        var quadIdx = 0; // Assume we are in the 0's quad.
        ${m("var min_{var} = node.min_{var};",{indent:8})}
        ${m("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}

${v(8)}

        var child = getChild(node, quadIdx);

        if (!child) {
          // The node is internal but this quadrant is not taken. Add
          // subnode to it.
          child = newNode();
          ${m("child.min_{var} = min_{var};",{indent:10})}
          ${m("child.max_{var} = max_{var};",{indent:10})}
          child.body = body;

          setChild(node, quadIdx, child);
        } else {
          // continue searching in this quadrant.
          insertStack.push(child, body);
        }
      } else {
        // We are trying to add to the leaf node.
        // We have to convert current leaf into internal node
        // and continue adding two nodes.
        var oldBody = node.body;
        node.body = null; // internal nodes do not cary bodies

        if (isSamePosition(oldBody.pos, body.pos)) {
          // Prevent infinite subdivision by bumping one node
          // anywhere in this quadrant
          var retriesCount = 3;
          do {
            var offset = random.nextDouble();
            ${m("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}

            ${m("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}
            retriesCount -= 1;
            // Make sure we don't bump it out of the box. If we do, next iteration should fix it
          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));

          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {
            // This is very bad, we ran out of precision.
            // if we do not return from the method we'll get into
            // infinite loop here. So we sacrifice correctness of layout, and keep the app running
            // Next layout iteration should get larger bounding box in the first step and fix this
            return;
          }
        }
        // Next iteration should subdivide node further.
        insertStack.push(node, oldBody);
        insertStack.push(node, body);
      }
    }
  }
}
return createQuadTree;

`;function v(T){let x=[],R=Array(T+1).join(" ");for(let D=0;D<f;++D)x.push(R+`if (${t(D)} > max_${t(D)}) {`),x.push(R+`  quadIdx = quadIdx + ${Math.pow(2,D)};`),x.push(R+`  min_${t(D)} = max_${t(D)};`),x.push(R+`  max_${t(D)} = node.max_${t(D)};`),x.push(R+"}");return x.join(`
`)}function S(){let T=Array(11).join(" "),x=[];for(let R=0;R<g;++R)x.push(T+`if (node.quad${R}) {`),x.push(T+`  queue[pushIdx] = node.quad${R};`),x.push(T+"  queueLength += 1;"),x.push(T+"  pushIdx += 1;"),x.push(T+"}");return x.join(`
`)}function E(T){let x=[];for(let R=0;R<g;++R)x.push(`${T}quad${R} = null;`);return x.join(`
`)}}function r(f){let m=n(f);return`
  function isSamePosition(point1, point2) {
    ${m("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}
  
    return ${m("d{var} < 1e-8",{join:" && "})};
  }  
`}function s(f){var m=Math.pow(2,f);return`
function setChild(node, idx, child) {
  ${g()}
}`;function g(){let y=[];for(let v=0;v<m;++v){let S=v===0?"  ":"  else ";y.push(`${S}if (idx === ${v}) node.quad${v} = child;`)}return y.join(`
`)}}function a(f){return`function getChild(node, idx) {
${m()}
  return null;
}`;function m(){let g=[],y=Math.pow(2,f);for(let v=0;v<y;++v)g.push(`  if (idx === ${v}) return node.quad${v};`);return g.join(`
`)}}function l(f){let m=n(f),g=Math.pow(2,f);var y=`
function QuadNode() {
  // body stored inside this node. In quad tree only leaf nodes (by construction)
  // contain bodies:
  this.body = null;

  // Child nodes are stored in quads. Each quad is presented by number:
  // 0 | 1
  // -----
  // 2 | 3
${v("  this.")}

  // Total mass of current node
  this.mass = 0;

  // Center of mass coordinates
  ${m("this.mass_{var} = 0;",{indent:2})}

  // bounding box coordinates
  ${m("this.min_{var} = 0;",{indent:2})}
  ${m("this.max_{var} = 0;",{indent:2})}
}
`;return y;function v(S){let E=[];for(let T=0;T<g;++T)E.push(`${S}quad${T} = null;`);return E.join(`
`)}}function c(){return`
/**
 * Our implementation of QuadTree is non-recursive to avoid GC hit
 * This data structure represent stack of elements
 * which we are trying to insert into quad tree.
 */
function InsertStack () {
    this.stack = [];
    this.popIdx = 0;
}

InsertStack.prototype = {
    isEmpty: function() {
        return this.popIdx === 0;
    },
    push: function (node, body) {
        var item = this.stack[this.popIdx];
        if (!item) {
            // we are trying to avoid memory pressure: create new element
            // only when absolutely necessary
            this.stack[this.popIdx] = new InsertStackElement(node, body);
        } else {
            item.node = node;
            item.body = body;
        }
        ++this.popIdx;
    },
    pop: function () {
        if (this.popIdx > 0) {
            return this.stack[--this.popIdx];
        }
    },
    reset: function () {
        this.popIdx = 0;
    }
};

function InsertStackElement(node, body) {
    this.node = node; // QuadTree node
    this.body = body; // physical body which needs to be inserted to node
}
`}return Yf.exports}var gE={exports:{}},x3;function bK(){if(x3)return gE.exports;x3=1,gE.exports=t,gE.exports.generateFunctionBody=e;const n=v_();function t(i){let r=e(i);return new Function("bodies","settings","random",r)}function e(i){let r=n(i);return`
  var boundingBox = {
    ${r("min_{var}: 0, max_{var}: 0,",{indent:4})}
  };

  return {
    box: boundingBox,

    update: updateBoundingBox,

    reset: resetBoundingBox,

    getBestNewPosition: function (neighbors) {
      var ${r("base_{var} = 0",{join:", "})};

      if (neighbors.length) {
        for (var i = 0; i < neighbors.length; ++i) {
          let neighborPos = neighbors[i].pos;
          ${r("base_{var} += neighborPos.{var};",{indent:10})}
        }

        ${r("base_{var} /= neighbors.length;",{indent:8})}
      } else {
        ${r("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}
      }

      var springLength = settings.springLength;
      return {
        ${r("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}
      };
    }
  };

  function updateBoundingBox() {
    var i = bodies.length;
    if (i === 0) return; // No bodies - no borders.

    ${r("var max_{var} = -Infinity;",{indent:4})}
    ${r("var min_{var} = Infinity;",{indent:4})}

    while(i--) {
      // this is O(n), it could be done faster with quadtree, if we check the root node bounds
      var bodyPos = bodies[i].pos;
      ${r("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}
      ${r("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}
    }

    ${r("boundingBox.min_{var} = min_{var};",{indent:4})}
    ${r("boundingBox.max_{var} = max_{var};",{indent:4})}
  }

  function resetBoundingBox() {
    ${r("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}
  }
`}return gE.exports}var yE={exports:{}},b3;function SK(){if(b3)return yE.exports;b3=1;const n=v_();yE.exports=t,yE.exports.generateCreateDragForceFunctionBody=e;function t(i){let r=e(i);return new Function("options",r)}function e(i){return`
  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');

  return {
    update: function(body) {
      ${n(i)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}
    }
  };
`}return yE.exports}var _E={exports:{}},S3;function EK(){if(S3)return _E.exports;S3=1;const n=v_();_E.exports=t,_E.exports.generateCreateSpringForceFunctionBody=e;function t(i){let r=e(i);return new Function("options","random",r)}function e(i){let r=n(i);return`
  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');
  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');

  return {
    /**
     * Updates forces acting on a spring
     */
    update: function (spring) {
      var body1 = spring.from;
      var body2 = spring.to;
      var length = spring.length < 0 ? options.springLength : spring.length;
      ${r("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}
      var r = Math.sqrt(${r("d{var} * d{var}",{join:" + "})});

      if (r === 0) {
        ${r("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}
        r = Math.sqrt(${r("d{var} * d{var}",{join:" + "})});
      }

      var d = r - length;
      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;

      ${r("body1.force.{var} += coefficient * d{var}",{indent:6})};
      body1.springCount += 1;
      body1.springLength += r;

      ${r("body2.force.{var} -= coefficient * d{var}",{indent:6})};
      body2.springCount += 1;
      body2.springLength += r;
    }
  };
`}return _E.exports}var vE={exports:{}},E3;function TK(){if(E3)return vE.exports;E3=1;const n=v_();vE.exports=t,vE.exports.generateIntegratorFunctionBody=e;function t(i){let r=e(i);return new Function("bodies","timeStep","adaptiveTimeStepWeight",r)}function e(i){let r=n(i);return`
  var length = bodies.length;
  if (length === 0) return 0;

  ${r("var d{var} = 0, t{var} = 0;",{indent:2})}

  for (var i = 0; i < length; ++i) {
    var body = bodies[i];
    if (body.isPinned) continue;

    if (adaptiveTimeStepWeight && body.springCount) {
      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);
    }

    var coeff = timeStep / body.mass;

    ${r("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}
    ${r("var v{var} = body.velocity.{var};",{indent:4})}
    var v = Math.sqrt(${r("v{var} * v{var}",{join:" + "})});

    if (v > 1) {
      // We normalize it so that we move within timeStep range. 
      // for the case when v <= 1 - we let velocity to fade out.
      ${r("body.velocity.{var} = v{var} / v;",{indent:6})}
    }

    ${r("d{var} = timeStep * body.velocity.{var};",{indent:4})}

    ${r("body.pos.{var} += d{var};",{indent:4})}

    ${r("t{var} += Math.abs(d{var});",{indent:4})}
  }

  return (${r("t{var} * t{var}",{join:" + "})})/length;
`}return vE.exports}var Jw,T3;function MK(){if(T3)return Jw;T3=1,Jw=n;function n(t,e,i,r){this.from=t,this.to=e,this.length=i,this.coefficient=r}return Jw}var tC,M3;function AK(){if(M3)return tC;M3=1,tC=n;function n(t,e){var i;if(t||(t={}),e){for(i in e)if(e.hasOwnProperty(i)){var r=t.hasOwnProperty(i),s=typeof e[i],a=!r||typeof t[i]!==s;a?t[i]=e[i]:s==="object"&&(t[i]=n(t[i],e[i]))}}return t}return tC}var Xv={exports:{}},A3;function wK(){if(A3)return Xv.exports;A3=1,Xv.exports=n,Xv.exports.random=n,Xv.exports.randomIterator=l;function n(c){var f=typeof c=="number"?c:+new Date;return new t(f)}function t(c){this.seed=c}t.prototype.next=a,t.prototype.nextDouble=s,t.prototype.uniform=s,t.prototype.gaussian=e;function e(){var c,f,m;do f=this.nextDouble()*2-1,m=this.nextDouble()*2-1,c=f*f+m*m;while(c>=1||c===0);return f*Math.sqrt(-2*Math.log(c)/c)}t.prototype.levy=i;function i(){var c=1.5,f=Math.pow(r(1+c)*Math.sin(Math.PI*c/2)/(r((1+c)/2)*c*Math.pow(2,(c-1)/2)),1/c);return this.gaussian()*f/Math.pow(Math.abs(this.gaussian()),1/c)}function r(c){return Math.sqrt(2*Math.PI/c)*Math.pow(1/Math.E*(c+1/(12*c-1/(10*c))),c)}function s(){var c=this.seed;return c=c+2127912214+(c<<12)&4294967295,c=(c^3345072700^c>>>19)&4294967295,c=c+374761393+(c<<5)&4294967295,c=(c+3550635116^c<<9)&4294967295,c=c+4251993797+(c<<3)&4294967295,c=(c^3042594569^c>>>16)&4294967295,this.seed=c,(c&268435455)/268435456}function a(c){return Math.floor(this.nextDouble()*c)}function l(c,f){var m=f||n();if(typeof m.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:y,shuffle:g};function g(){var v,S,E;for(v=c.length-1;v>0;--v)S=m.next(v+1),E=c[S],c[S]=c[v],c[v]=E;return c}function y(v){var S,E,T;for(S=c.length-1;S>0;--S)E=m.next(S+1),T=c[E],c[E]=c[S],c[S]=T,v(T);c.length&&v(c[0])}}return Xv.exports}var eC,w3;function C3(){if(w3)return eC;w3=1,eC=l;var n=vK(),t=xK(),e=bK(),i=SK(),r=EK(),s=TK(),a={};function l(m){var g=MK(),y=AK(),v=CO();if(m){if(m.springCoeff!==void 0)throw new Error("springCoeff was renamed to springCoefficient");if(m.dragCoeff!==void 0)throw new Error("dragCoeff was renamed to dragCoefficient")}m=y(m,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var S=a[m.dimensions];if(!S){var E=m.dimensions;S={Body:n(E,m.debug),createQuadTree:t(E),createBounds:e(E),createDragForce:i(E),createSpringForce:r(E),integrate:s(E)},a[E]=S}var T=S.Body,x=S.createQuadTree,R=S.createBounds,D=S.createDragForce,O=S.createSpringForce,N=S.integrate,B=lt=>new T(lt),L=wK().random(42),U=[],I=[],w=x(m,L),V=R(U,m,L),G=O(m,L),k=D(m),st=0,it=[],Y=new Map,Z=0;$("nbody",zt),$("spring",nt);var at={bodies:U,quadTree:w,springs:I,settings:m,addForce:$,removeForce:pt,getForces:wt,step:function(){for(var lt=0;lt<it.length;++lt)it[lt](Z);var ft=N(U,m.timeStep,m.adaptiveTimeStepWeight);return Z+=1,ft},addBody:function(lt){if(!lt)throw new Error("Body is required");return U.push(lt),lt},addBodyAt:function(lt){if(!lt)throw new Error("Body position is required");var ft=B(lt);return U.push(ft),ft},removeBody:function(lt){if(lt){var ft=U.indexOf(lt);if(!(ft<0))return U.splice(ft,1),U.length===0&&V.reset(),!0}},addSpring:function(lt,ft,mt,Dt){if(!lt||!ft)throw new Error("Cannot add null spring to force simulator");typeof mt!="number"&&(mt=-1);var Wt=new g(lt,ft,mt,Dt>=0?Dt:-1);return I.push(Wt),Wt},getTotalMovement:function(){return st},removeSpring:function(lt){if(lt){var ft=I.indexOf(lt);if(ft>-1)return I.splice(ft,1),!0}},getBestNewBodyPosition:function(lt){return V.getBestNewPosition(lt)},getBBox:ct,getBoundingBox:ct,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(lt){return lt!==void 0?(m.gravity=lt,w.options({gravity:lt}),this):m.gravity},theta:function(lt){return lt!==void 0?(m.theta=lt,w.options({theta:lt}),this):m.theta},random:L};return c(m,at),v(at),at;function ct(){return V.update(),V.box}function $(lt,ft){if(Y.has(lt))throw new Error("Force "+lt+" is already added");Y.set(lt,ft),it.push(ft)}function pt(lt){var ft=it.indexOf(Y.get(lt));ft<0||(it.splice(ft,1),Y.delete(lt))}function wt(){return Y}function zt(){if(U.length!==0){w.insertBodies(U);for(var lt=U.length;lt--;){var ft=U[lt];ft.isPinned||(ft.reset(),w.updateBodyForce(ft),k.update(ft))}}}function nt(){for(var lt=I.length;lt--;)G.update(I[lt])}}function c(m,g){for(var y in m)f(m,g,y)}function f(m,g,y){if(m.hasOwnProperty(y)&&typeof g[y]!="function"){var v=Number.isFinite(m[y]);v?g[y]=function(S){if(S!==void 0){if(!Number.isFinite(S))throw new Error("Value of "+y+" should be a valid number.");return m[y]=S,g}return m[y]}:g[y]=function(S){return S!==void 0?(m[y]=S,g):m[y]}}}return eC}var R3;function CK(){if(R3)return mE.exports;R3=1,mE.exports=t,mE.exports.simulator=C3();var n=CO();function t(i,r){if(!i)throw new Error("Graph structure cannot be undefined");var s=r&&r.createSimulator||C3(),a=s(r);if(Array.isArray(r))throw new Error("Physics settings is expected to be an object");var l=i.version>19?Y:it;r&&typeof r.nodeMass=="function"&&(l=r.nodeMass);var c=new Map,f={},m=0,g=a.settings.springTransform||e;B(),D();var y=!1,v={step:function(){if(m===0)return S(!0),!0;var Z=a.step();v.lastMove=Z,v.fire("step");var at=Z/m,ct=at<=.01;return S(ct),ct},getNodePosition:function(Z){return st(Z).pos},setNodePosition:function(Z){var at=st(Z);at.setPosition.apply(at,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(Z){var at=f[Z];if(at)return{from:at.from.pos,to:at.to.pos}},getGraphRect:function(){return a.getBBox()},forEachBody:E,pinNode:function(Z,at){var ct=st(Z.id);ct.isPinned=!!at},isNodePinned:function(Z){return st(Z.id).isPinned},dispose:function(){i.off("changed",N),v.fire("disposed")},getBody:R,getSpring:x,getForceVectorLength:T,simulator:a,graph:i,lastMove:0};return n(v),v;function S(Z){y!==Z&&(y=Z,O(Z))}function E(Z){c.forEach(Z)}function T(){var Z=0,at=0;return E(function(ct){Z+=Math.abs(ct.force.x),at+=Math.abs(ct.force.y)}),Math.sqrt(Z*Z+at*at)}function x(Z,at){var ct;if(at===void 0)typeof Z!="object"?ct=Z:ct=Z.id;else{var $=i.hasLink(Z,at);if(!$)return;ct=$.id}return f[ct]}function R(Z){return c.get(Z)}function D(){i.on("changed",N)}function O(Z){v.fire("stable",Z)}function N(Z){for(var at=0;at<Z.length;++at){var ct=Z[at];ct.changeType==="add"?(ct.node&&L(ct.node.id),ct.link&&I(ct.link)):ct.changeType==="remove"&&(ct.node&&U(ct.node),ct.link&&w(ct.link))}m=i.getNodesCount()}function B(){m=0,i.forEachNode(function(Z){L(Z.id),m+=1}),i.forEachLink(I)}function L(Z){var at=c.get(Z);if(!at){var ct=i.getNode(Z);if(!ct)throw new Error("initBody() was called with unknown node id");var $=ct.position;if(!$){var pt=V(ct);$=a.getBestNewBodyPosition(pt)}at=a.addBodyAt($),at.id=Z,c.set(Z,at),G(Z),k(ct)&&(at.isPinned=!0)}}function U(Z){var at=Z.id,ct=c.get(at);ct&&(c.delete(at),a.removeBody(ct))}function I(Z){G(Z.fromId),G(Z.toId);var at=c.get(Z.fromId),ct=c.get(Z.toId),$=a.addSpring(at,ct,Z.length);g(Z,$),f[Z.id]=$}function w(Z){var at=f[Z.id];if(at){var ct=i.getNode(Z.fromId),$=i.getNode(Z.toId);ct&&G(ct.id),$&&G($.id),delete f[Z.id],a.removeSpring(at)}}function V(Z){var at=[];if(!Z.links)return at;for(var ct=Math.min(Z.links.length,2),$=0;$<ct;++$){var pt=Z.links[$],wt=pt.fromId!==Z.id?c.get(pt.fromId):c.get(pt.toId);wt&&wt.pos&&at.push(wt)}return at}function G(Z){var at=c.get(Z);if(at.mass=l(Z),Number.isNaN(at.mass))throw new Error("Node mass should be a number")}function k(Z){return Z&&(Z.isPinned||Z.data&&Z.data.isPinned)}function st(Z){var at=c.get(Z);return at||(L(Z),at=c.get(Z)),at}function it(Z){var at=i.getLinks(Z);return at?1+at.length/3:1}function Y(Z){var at=i.getLinks(Z);return at?1+at.size/3:1}}function e(){}return mE.exports}var RK=CK();const OK=c_(RK);function mR(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var DK=typeof global=="object"&&global&&global.Object===Object&&global,NK=typeof self=="object"&&self&&self.Object===Object&&self,mV=DK||NK||Function("return this")(),nC=function(){return mV.Date.now()},IK=/\s/;function PK(n){for(var t=n.length;t--&&IK.test(n.charAt(t)););return t}var LK=/^\s+/;function UK(n){return n&&n.slice(0,PK(n)+1).replace(LK,"")}var $1=mV.Symbol,gV=Object.prototype,zK=gV.hasOwnProperty,BK=gV.toString,Wv=$1?$1.toStringTag:void 0;function VK(n){var t=zK.call(n,Wv),e=n[Wv];try{n[Wv]=void 0;var i=!0}catch{}var r=BK.call(n);return i&&(t?n[Wv]=e:delete n[Wv]),r}var FK=Object.prototype,kK=FK.toString;function HK(n){return kK.call(n)}var GK="[object Null]",qK="[object Undefined]",O3=$1?$1.toStringTag:void 0;function jK(n){return n==null?n===void 0?qK:GK:O3&&O3 in Object(n)?VK(n):HK(n)}function XK(n){return n!=null&&typeof n=="object"}var WK="[object Symbol]";function YK(n){return typeof n=="symbol"||XK(n)&&jK(n)==WK}var D3=NaN,$K=/^[-+]0x[0-9a-f]+$/i,KK=/^0b[01]+$/i,ZK=/^0o[0-7]+$/i,QK=parseInt;function N3(n){if(typeof n=="number")return n;if(YK(n))return D3;if(mR(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=mR(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=UK(n);var e=KK.test(n);return e||ZK.test(n)?QK(n.slice(2),e?2:8):$K.test(n)?D3:+n}var JK="Expected a function",tZ=Math.max,eZ=Math.min;function nZ(n,t,e){var i,r,s,a,l,c,f=0,m=!1,g=!1,y=!0;if(typeof n!="function")throw new TypeError(JK);t=N3(t)||0,mR(e)&&(m=!!e.leading,g="maxWait"in e,s=g?tZ(N3(e.maxWait)||0,t):s,y="trailing"in e?!!e.trailing:y);function v(B){var L=i,U=r;return i=r=void 0,f=B,a=n.apply(U,L),a}function S(B){return f=B,l=setTimeout(x,t),m?v(B):a}function E(B){var L=B-c,U=B-f,I=t-L;return g?eZ(I,s-U):I}function T(B){var L=B-c,U=B-f;return c===void 0||L>=t||L<0||g&&U>=s}function x(){var B=nC();if(T(B))return R(B);l=setTimeout(x,E(B))}function R(B){return l=void 0,y&&i?v(B):(i=r=void 0,a)}function D(){l!==void 0&&clearTimeout(l),f=0,i=c=r=l=void 0}function O(){return l===void 0?a:R(nC())}function N(){var B=nC(),L=T(B);if(i=arguments,r=this,c=B,L){if(l===void 0)return S(c);if(g)return clearTimeout(l),l=setTimeout(x,t),v(c)}return l===void 0&&(l=setTimeout(x,t)),a}return N.cancel=D,N.flush=O,N}function I3(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=Array(t);e<t;e++)i[e]=n[e];return i}function iZ(n){if(Array.isArray(n))return n}function rZ(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function sZ(n,t,e){return Object.defineProperty(n,"prototype",{writable:!1}),n}function aZ(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i,r,s,a,l=[],c=!0,f=!1;try{if(s=(e=e.call(n)).next,t!==0)for(;!(c=(i=s.call(e)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(m){f=!0,r=m}finally{try{if(!c&&e.return!=null&&(a=e.return(),Object(a)!==a))return}finally{if(f)throw r}}return l}}function oZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lZ(n,t){return iZ(n)||aZ(n,t)||uZ(n,t)||oZ()}function uZ(n,t){if(n){if(typeof n=="string")return I3(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?I3(n,t):void 0}}var cZ=sZ(function n(t,e){var i=e.default,r=i===void 0?null:i,s=e.triggerUpdate,a=s===void 0?!0:s,l=e.onChange,c=l===void 0?function(f,m){}:l;rZ(this,n),this.name=t,this.defaultVal=r,this.triggerUpdate=a,this.onChange=c});function fZ(n){var t=n.stateInit,e=t===void 0?function(){return{}}:t,i=n.props,r=i===void 0?{}:i,s=n.methods,a=s===void 0?{}:s,l=n.aliases,c=l===void 0?{}:l,f=n.init,m=f===void 0?function(){}:f,g=n.update,y=g===void 0?function(){}:g,v=Object.keys(r).map(function(S){return new cZ(S,r[S])});return function S(){for(var E=arguments.length,T=new Array(E),x=0;x<E;x++)T[x]=arguments[x];var R=!!(this instanceof S&&this.constructor),D=R?T.shift():void 0,O=T[0],N=O===void 0?{}:O,B=Object.assign({},e instanceof Function?e(N):e,{initialised:!1}),L={};function U(V){return I(V,N),w(),U}var I=function(G,k){m.call(U,G,B,k),B.initialised=!0},w=nZ(function(){B.initialised&&(y.call(U,B,L),L={})},1);return v.forEach(function(V){U[V.name]=G(V);function G(k){var st=k.name,it=k.triggerUpdate,Y=it===void 0?!1:it,Z=k.onChange,at=Z===void 0?function(pt,wt){}:Z,ct=k.defaultVal,$=ct===void 0?null:ct;return function(pt){var wt=B[st];if(!arguments.length)return wt;var zt=pt===void 0?$:pt;return B[st]=zt,at.call(U,zt,B,wt),!L.hasOwnProperty(st)&&(L[st]=wt),Y&&w(),U}}}),Object.keys(a).forEach(function(V){U[V]=function(){for(var G,k=arguments.length,st=new Array(k),it=0;it<k;it++)st[it]=arguments[it];return(G=a[V]).call.apply(G,[U,B].concat(st))}}),Object.entries(c).forEach(function(V){var G=lZ(V,2),k=G[0],st=G[1];return U[k]=U[st]}),U.resetProps=function(){return v.forEach(function(V){U[V.name](V.defaultVal)}),U},U.resetProps(),B._rerender=w,R&&D&&U(D),U}}var hi=function(n){return typeof n=="function"?n:typeof n=="string"?function(t){return t[n]}:function(t){return n}};class P3 extends Map{constructor(t,e=pZ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(L3(this,t))}has(t){return super.has(L3(this,t))}set(t,e){return super.set(hZ(this,t),e)}delete(t){return super.delete(dZ(this,t))}}function L3({_intern:n,_key:t},e){const i=t(e);return n.has(i)?n.get(i):e}function hZ({_intern:n,_key:t},e){const i=t(e);return n.has(i)?n.get(i):(n.set(i,e),e)}function dZ({_intern:n,_key:t},e){const i=t(e);return n.has(i)&&(e=n.get(i),n.delete(i)),e}function pZ(n){return n!==null&&typeof n=="object"?n.valueOf():n}function mZ(n,t){let e;if(t===void 0)for(const i of n)i!=null&&(e<i||e===void 0&&i>=i)&&(e=i);else{let i=-1;for(let r of n)(r=t(r,++i,n))!=null&&(e<r||e===void 0&&r>=r)&&(e=r)}return e}function gZ(n,t){let e;if(t===void 0)for(const i of n)i!=null&&(e>i||e===void 0&&i>=i)&&(e=i);else{let i=-1;for(let r of n)(r=t(r,++i,n))!=null&&(e>r||e===void 0&&r>=r)&&(e=r)}return e}function gR(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=Array(t);e<t;e++)i[e]=n[e];return i}function yZ(n){if(Array.isArray(n))return n}function _Z(n){if(Array.isArray(n))return gR(n)}function yV(n,t,e){if(typeof n=="function"?n===t:n.has(t))return arguments.length<3?t:e;throw new TypeError("Private element is not present on this object")}function vZ(n,t){if(t.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function xZ(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function ya(n,t){return n.get(yV(n,t))}function cy(n,t,e){vZ(n,t),t.set(n,e)}function xE(n,t,e){return n.set(yV(n,t),e),e}function bZ(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,OZ(i.key),i)}}function SZ(n,t,e){return t&&bZ(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function EZ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function TZ(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i,r,s,a,l=[],c=!0,f=!1;try{if(s=(e=e.call(n)).next,t!==0)for(;!(c=(i=s.call(e)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(m){f=!0,r=m}finally{try{if(!c&&e.return!=null&&(a=e.return(),Object(a)!==a))return}finally{if(f)throw r}}return l}}function MZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wZ(n,t){return yZ(n)||TZ(n,t)||_V(n,t)||MZ()}function CZ(n){return _Z(n)||EZ(n)||_V(n)||AZ()}function RZ(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function OZ(n){var t=RZ(n,"string");return typeof t=="symbol"?t:t+""}function _V(n,t){if(n){if(typeof n=="string")return gR(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?gR(n,t):void 0}}var fy=new WeakMap,Yv=new WeakMap,hy=new WeakMap,iC=new WeakMap,rC=new WeakMap,sC=new WeakMap,DZ=function(){function n(){xZ(this,n),cy(this,fy,new Map),cy(this,Yv,new Map),cy(this,hy,function(t){return t}),cy(this,iC,function(){return{}}),cy(this,rC,function(){}),cy(this,sC,function(){})}return SZ(n,[{key:"getObj",value:function(e){return ya(fy,this).get(ya(hy,this).call(this,e))}},{key:"getData",value:function(e){return ya(Yv,this).get(e)}},{key:"entries",value:function(){return CZ(ya(Yv,this).entries()).map(function(e){var i=wZ(e,2),r=i[0],s=i[1];return[s,r]})}},{key:"id",value:function(e){return xE(hy,this,hi(e)),this}},{key:"onCreateObj",value:function(e){return xE(iC,this,e),this}},{key:"onUpdateObj",value:function(e){return xE(rC,this,e),this}},{key:"onRemoveObj",value:function(e){return xE(sC,this,e),this}},{key:"digest",value:function(e){var i=this;e.filter(function(s){return!ya(fy,i).has(ya(hy,i).call(i,s))}).forEach(function(s){var a=ya(iC,i).call(i,s);ya(fy,i).set(ya(hy,i).call(i,s),a),ya(Yv,i).set(a,s)});var r=new Map(e.map(function(s){return[ya(hy,i).call(i,s),s]}));return ya(fy,this).forEach(function(s,a){r.has(a)?ya(rC,i).call(i,s,r.get(a)):(ya(sC,i).call(i,s,a),ya(fy,i).delete(a),ya(Yv,i).delete(s))}),this}},{key:"clear",value:function(){return this.digest([]),this}}])}();function NZ(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n);break}return this}const U3=Symbol("implicit");function vV(){var n=new P3,t=[],e=[],i=U3;function r(s){let a=n.get(s);if(a===void 0){if(i!==U3)return i;n.set(s,a=t.push(s)-1)}return e[a%e.length]}return r.domain=function(s){if(!arguments.length)return t.slice();t=[],n=new P3;for(const a of s)n.has(a)||n.set(a,t.push(a)-1);return r},r.range=function(s){return arguments.length?(e=Array.from(s),r):e.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return vV(t,e).unknown(i)},NZ.apply(r,arguments),r}function IZ(n){for(var t=n.length/6|0,e=new Array(t),i=0;i<t;)e[i]="#"+n.slice(i*6,++i*6);return e}const PZ=IZ("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function K1(n){"@babel/helpers - typeof";return K1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K1(n)}var LZ=/^\s+/,UZ=/\s+$/;function ke(n,t){if(n=n||"",t=t||{},n instanceof ke)return n;if(!(this instanceof ke))return new ke(n,t);var e=zZ(n);this._originalInput=n,this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||e.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=e.ok}ke.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),e,i,r,s,a,l;return e=t.r/255,i=t.g/255,r=t.b/255,e<=.03928?s=e/12.92:s=Math.pow((e+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),r<=.03928?l=r/12.92:l=Math.pow((r+.055)/1.055,2.4),.2126*s+.7152*a+.0722*l},setAlpha:function(t){return this._a=xV(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=B3(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=B3(this._r,this._g,this._b),e=Math.round(t.h*360),i=Math.round(t.s*100),r=Math.round(t.v*100);return this._a==1?"hsv("+e+", "+i+"%, "+r+"%)":"hsva("+e+", "+i+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=z3(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=z3(this._r,this._g,this._b),e=Math.round(t.h*360),i=Math.round(t.s*100),r=Math.round(t.l*100);return this._a==1?"hsl("+e+", "+i+"%, "+r+"%)":"hsla("+e+", "+i+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return V3(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return kZ(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(sr(this._r,255)*100)+"%",g:Math.round(sr(this._g,255)*100)+"%",b:Math.round(sr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(sr(this._r,255)*100)+"%, "+Math.round(sr(this._g,255)*100)+"%, "+Math.round(sr(this._b,255)*100)+"%)":"rgba("+Math.round(sr(this._r,255)*100)+"%, "+Math.round(sr(this._g,255)*100)+"%, "+Math.round(sr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:JZ[V3(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e="#"+F3(this._r,this._g,this._b,this._a),i=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var s=ke(t);i="#"+F3(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,r=this._a<1&&this._a>=0,s=!e&&r&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return s?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(i=this.toRgbString()),t==="prgb"&&(i=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(i=this.toHexString()),t==="hex3"&&(i=this.toHexString(!0)),t==="hex4"&&(i=this.toHex8String(!0)),t==="hex8"&&(i=this.toHex8String()),t==="name"&&(i=this.toName()),t==="hsl"&&(i=this.toHslString()),t==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return ke(this.toString())},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(jZ,arguments)},brighten:function(){return this._applyModification(XZ,arguments)},darken:function(){return this._applyModification(WZ,arguments)},desaturate:function(){return this._applyModification(HZ,arguments)},saturate:function(){return this._applyModification(GZ,arguments)},greyscale:function(){return this._applyModification(qZ,arguments)},spin:function(){return this._applyModification(YZ,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(ZZ,arguments)},complement:function(){return this._applyCombination($Z,arguments)},monochromatic:function(){return this._applyCombination(QZ,arguments)},splitcomplement:function(){return this._applyCombination(KZ,arguments)},triad:function(){return this._applyCombination(k3,[3])},tetrad:function(){return this._applyCombination(k3,[4])}};ke.fromRatio=function(n,t){if(K1(n)=="object"){var e={};for(var i in n)n.hasOwnProperty(i)&&(i==="a"?e[i]=n[i]:e[i]=c0(n[i]));n=e}return ke(n,t)};function zZ(n){var t={r:0,g:0,b:0},e=1,i=null,r=null,s=null,a=!1,l=!1;return typeof n=="string"&&(n=iQ(n)),K1(n)=="object"&&($f(n.r)&&$f(n.g)&&$f(n.b)?(t=BZ(n.r,n.g,n.b),a=!0,l=String(n.r).substr(-1)==="%"?"prgb":"rgb"):$f(n.h)&&$f(n.s)&&$f(n.v)?(i=c0(n.s),r=c0(n.v),t=FZ(n.h,i,r),a=!0,l="hsv"):$f(n.h)&&$f(n.s)&&$f(n.l)&&(i=c0(n.s),s=c0(n.l),t=VZ(n.h,i,s),a=!0,l="hsl"),n.hasOwnProperty("a")&&(e=n.a)),e=xV(e),{ok:a,format:n.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:e}}function BZ(n,t,e){return{r:sr(n,255)*255,g:sr(t,255)*255,b:sr(e,255)*255}}function z3(n,t,e){n=sr(n,255),t=sr(t,255),e=sr(e,255);var i=Math.max(n,t,e),r=Math.min(n,t,e),s,a,l=(i+r)/2;if(i==r)s=a=0;else{var c=i-r;switch(a=l>.5?c/(2-i-r):c/(i+r),i){case n:s=(t-e)/c+(t<e?6:0);break;case t:s=(e-n)/c+2;break;case e:s=(n-t)/c+4;break}s/=6}return{h:s,s:a,l}}function VZ(n,t,e){var i,r,s;n=sr(n,360),t=sr(t,100),e=sr(e,100);function a(f,m,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?f+(m-f)*6*g:g<1/2?m:g<2/3?f+(m-f)*(2/3-g)*6:f}if(t===0)i=r=s=e;else{var l=e<.5?e*(1+t):e+t-e*t,c=2*e-l;i=a(c,l,n+1/3),r=a(c,l,n),s=a(c,l,n-1/3)}return{r:i*255,g:r*255,b:s*255}}function B3(n,t,e){n=sr(n,255),t=sr(t,255),e=sr(e,255);var i=Math.max(n,t,e),r=Math.min(n,t,e),s,a,l=i,c=i-r;if(a=i===0?0:c/i,i==r)s=0;else{switch(i){case n:s=(t-e)/c+(t<e?6:0);break;case t:s=(e-n)/c+2;break;case e:s=(n-t)/c+4;break}s/=6}return{h:s,s:a,v:l}}function FZ(n,t,e){n=sr(n,360)*6,t=sr(t,100),e=sr(e,100);var i=Math.floor(n),r=n-i,s=e*(1-t),a=e*(1-r*t),l=e*(1-(1-r)*t),c=i%6,f=[e,a,s,s,l,e][c],m=[l,e,e,a,s,s][c],g=[s,s,l,e,e,a][c];return{r:f*255,g:m*255,b:g*255}}function V3(n,t,e,i){var r=[Lu(Math.round(n).toString(16)),Lu(Math.round(t).toString(16)),Lu(Math.round(e).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function kZ(n,t,e,i,r){var s=[Lu(Math.round(n).toString(16)),Lu(Math.round(t).toString(16)),Lu(Math.round(e).toString(16)),Lu(bV(i))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function F3(n,t,e,i){var r=[Lu(bV(i)),Lu(Math.round(n).toString(16)),Lu(Math.round(t).toString(16)),Lu(Math.round(e).toString(16))];return r.join("")}ke.equals=function(n,t){return!n||!t?!1:ke(n).toRgbString()==ke(t).toRgbString()};ke.random=function(){return ke.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function HZ(n,t){t=t===0?0:t||10;var e=ke(n).toHsl();return e.s-=t/100,e.s=gM(e.s),ke(e)}function GZ(n,t){t=t===0?0:t||10;var e=ke(n).toHsl();return e.s+=t/100,e.s=gM(e.s),ke(e)}function qZ(n){return ke(n).desaturate(100)}function jZ(n,t){t=t===0?0:t||10;var e=ke(n).toHsl();return e.l+=t/100,e.l=gM(e.l),ke(e)}function XZ(n,t){t=t===0?0:t||10;var e=ke(n).toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(t/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(t/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(t/100)))),ke(e)}function WZ(n,t){t=t===0?0:t||10;var e=ke(n).toHsl();return e.l-=t/100,e.l=gM(e.l),ke(e)}function YZ(n,t){var e=ke(n).toHsl(),i=(e.h+t)%360;return e.h=i<0?360+i:i,ke(e)}function $Z(n){var t=ke(n).toHsl();return t.h=(t.h+180)%360,ke(t)}function k3(n,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var e=ke(n).toHsl(),i=[ke(n)],r=360/t,s=1;s<t;s++)i.push(ke({h:(e.h+s*r)%360,s:e.s,l:e.l}));return i}function KZ(n){var t=ke(n).toHsl(),e=t.h;return[ke(n),ke({h:(e+72)%360,s:t.s,l:t.l}),ke({h:(e+216)%360,s:t.s,l:t.l})]}function ZZ(n,t,e){t=t||6,e=e||30;var i=ke(n).toHsl(),r=360/e,s=[ke(n)];for(i.h=(i.h-(r*t>>1)+720)%360;--t;)i.h=(i.h+r)%360,s.push(ke(i));return s}function QZ(n,t){t=t||6;for(var e=ke(n).toHsv(),i=e.h,r=e.s,s=e.v,a=[],l=1/t;t--;)a.push(ke({h:i,s:r,v:s})),s=(s+l)%1;return a}ke.mix=function(n,t,e){e=e===0?0:e||50;var i=ke(n).toRgb(),r=ke(t).toRgb(),s=e/100,a={r:(r.r-i.r)*s+i.r,g:(r.g-i.g)*s+i.g,b:(r.b-i.b)*s+i.b,a:(r.a-i.a)*s+i.a};return ke(a)};ke.readability=function(n,t){var e=ke(n),i=ke(t);return(Math.max(e.getLuminance(),i.getLuminance())+.05)/(Math.min(e.getLuminance(),i.getLuminance())+.05)};ke.isReadable=function(n,t,e){var i=ke.readability(n,t),r,s;switch(s=!1,r=rQ(e),r.level+r.size){case"AAsmall":case"AAAlarge":s=i>=4.5;break;case"AAlarge":s=i>=3;break;case"AAAsmall":s=i>=7;break}return s};ke.mostReadable=function(n,t,e){var i=null,r=0,s,a,l,c;e=e||{},a=e.includeFallbackColors,l=e.level,c=e.size;for(var f=0;f<t.length;f++)s=ke.readability(n,t[f]),s>r&&(r=s,i=ke(t[f]));return ke.isReadable(n,i,{level:l,size:c})||!a?i:(e.includeFallbackColors=!1,ke.mostReadable(n,["#fff","#000"],e))};var yR=ke.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},JZ=ke.hexNames=tQ(yR);function tQ(n){var t={};for(var e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function xV(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function sr(n,t){eQ(n)&&(n="100%");var e=nQ(n);return n=Math.min(t,Math.max(0,parseFloat(n))),e&&(n=parseInt(n*t,10)/100),Math.abs(n-t)<1e-6?1:n%t/parseFloat(t)}function gM(n){return Math.min(1,Math.max(0,n))}function sl(n){return parseInt(n,16)}function eQ(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function nQ(n){return typeof n=="string"&&n.indexOf("%")!=-1}function Lu(n){return n.length==1?"0"+n:""+n}function c0(n){return n<=1&&(n=n*100+"%"),n}function bV(n){return Math.round(parseFloat(n)*255).toString(16)}function H3(n){return sl(n)/255}var Ru=function(){var n="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",e="(?:"+t+")|(?:"+n+")",i="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",r="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function $f(n){return!!Ru.CSS_UNIT.exec(n)}function iQ(n){n=n.replace(LZ,"").replace(UZ,"").toLowerCase();var t=!1;if(yR[n])n=yR[n],t=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e;return(e=Ru.rgb.exec(n))?{r:e[1],g:e[2],b:e[3]}:(e=Ru.rgba.exec(n))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=Ru.hsl.exec(n))?{h:e[1],s:e[2],l:e[3]}:(e=Ru.hsla.exec(n))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=Ru.hsv.exec(n))?{h:e[1],s:e[2],v:e[3]}:(e=Ru.hsva.exec(n))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=Ru.hex8.exec(n))?{r:sl(e[1]),g:sl(e[2]),b:sl(e[3]),a:H3(e[4]),format:t?"name":"hex8"}:(e=Ru.hex6.exec(n))?{r:sl(e[1]),g:sl(e[2]),b:sl(e[3]),format:t?"name":"hex"}:(e=Ru.hex4.exec(n))?{r:sl(e[1]+""+e[1]),g:sl(e[2]+""+e[2]),b:sl(e[3]+""+e[3]),a:H3(e[4]+""+e[4]),format:t?"name":"hex8"}:(e=Ru.hex3.exec(n))?{r:sl(e[1]+""+e[1]),g:sl(e[2]+""+e[2]),b:sl(e[3]+""+e[3]),format:t?"name":"hex"}:!1}function rQ(n){var t,e;return n=n||{level:"AA",size:"small"},t=(n.level||"AA").toUpperCase(),e=(n.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),e!=="small"&&e!=="large"&&(e="small"),{level:t,size:e}}function _R(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=Array(t);e<t;e++)i[e]=n[e];return i}function sQ(n){if(Array.isArray(n))return n}function aQ(n){if(Array.isArray(n))return _R(n)}function SV(n,t,e){if(typeof n=="function"?n===t:n.has(t))return arguments.length<3?t:e;throw new TypeError("Private element is not present on this object")}function oQ(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function EV(n,t,e){return t=Wy(t),mQ(n,RO()?Reflect.construct(t,e||[],Wy(n).constructor):t.apply(n,e))}function lQ(n,t){if(t.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function TV(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function aC(n,t){return n.get(SV(n,t))}function G3(n,t,e){lQ(n,t),t.set(n,e)}function q3(n,t,e){return n.set(SV(n,t),e),e}function MV(n,t,e){if(RO())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var r=new(n.bind.apply(n,i));return r}function uQ(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,CV(i.key),i)}}function AV(n,t,e){return t&&uQ(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function yM(n,t,e){return(t=CV(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function vR(){return vR=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(n,t,e){var i=gQ(n,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?n:e):r.value}},vR.apply(null,arguments)}function Wy(n){return Wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wy(n)}function wV(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&xR(n,t)}function RO(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RO=function(){return!!n})()}function cQ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function fQ(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i,r,s,a,l=[],c=!0,f=!1;try{if(s=(e=e.call(n)).next,t!==0)for(;!(c=(i=s.call(e)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(m){f=!0,r=m}finally{try{if(!c&&e.return!=null&&(a=e.return(),Object(a)!==a))return}finally{if(f)throw r}}return l}}function hQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j3(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function pQ(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?j3(Object(e),!0).forEach(function(i){yM(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):j3(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function mQ(n,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oQ(n)}function xR(n,t){return xR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},xR(n,t)}function D0(n,t){return sQ(n)||fQ(n,t)||RV(n,t)||hQ()}function gQ(n,t){for(;!{}.hasOwnProperty.call(n,t)&&(n=Wy(n))!==null;);return n}function oC(n,t,e,i){var r=vR(Wy(n.prototype),t,e);return typeof r=="function"?function(s){return r.apply(e,s)}:r}function Du(n){return aQ(n)||cQ(n)||RV(n)||dQ()}function yQ(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function CV(n){var t=yQ(n,"string");return typeof t=="symbol"?t:t+""}function bR(n){"@babel/helpers - typeof";return bR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bR(n)}function RV(n,t){if(n){if(typeof n=="string")return _R(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_R(n,t):void 0}}var OV=function(t){t instanceof Array?t.forEach(OV):(t.map&&t.map.dispose(),t.dispose())},DV=function(t){t.geometry&&t.geometry.dispose(),t.material&&OV(t.material),t.texture&&t.texture.dispose(),t.children&&t.children.forEach(DV)},SR=function(t){for(;t.children.length;){var e=t.children[0];t.remove(e),DV(e)}},lC=new WeakMap,bE=new WeakMap,$v=function(n){function t(e){var i,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.dataBindAttr,a=s===void 0?"__data":s,l=r.objBindAttr,c=l===void 0?"__threeObj":l;return TV(this,t),i=EV(this,t),yM(i,"scene",void 0),G3(i,lC,void 0),G3(i,bE,void 0),i.scene=e,q3(lC,i,a),q3(bE,i,c),i.onRemoveObj(function(){}),i}return wV(t,n),AV(t,[{key:"onCreateObj",value:function(i){var r=this;return oC(t,"onCreateObj",this)([function(s){var a=i(s);return s[aC(bE,r)]=a,a[aC(lC,r)]=s,r.scene.add(a),a}]),this}},{key:"onRemoveObj",value:function(i){var r=this;return oC(t,"onRemoveObj",this)([function(s,a){var l=oC(t,"getData",r)([s]);i(s,a),r.scene.remove(s),SR(s),delete l[aC(bE,r)]}]),this}}])}(DZ),Kv=function(t){return isNaN(t)?parseInt(ke(t).toHex(),16):t},uC=function(t){return isNaN(t)?ke(t).getAlpha():1},_Q=vV(PZ);function X3(n,t,e){!t||typeof e!="string"||n.filter(function(i){return!i[e]}).forEach(function(i){i[e]=_Q(t(i))})}function vQ(n,t){var e=n.nodes,i=n.links,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.nodeFilter,a=s===void 0?function(){return!0}:s,l=r.onLoopError,c=l===void 0?function(v){throw"Invalid DAG structure! Found cycle in node path: ".concat(v.join(" -> "),".")}:l,f={};e.forEach(function(v){return f[t(v)]={data:v,out:[],depth:-1,skip:!a(v)}}),i.forEach(function(v){var S=v.source,E=v.target,T=O(S),x=O(E);if(!f.hasOwnProperty(T))throw"Missing source node with id: ".concat(T);if(!f.hasOwnProperty(x))throw"Missing target node with id: ".concat(x);var R=f[T],D=f[x];R.out.push(D);function O(N){return bR(N)==="object"?t(N):N}});var m=[];y(Object.values(f));var g=Object.assign.apply(Object,[{}].concat(Du(Object.entries(f).filter(function(v){var S=D0(v,2),E=S[1];return!E.skip}).map(function(v){var S=D0(v,2),E=S[0],T=S[1];return yM({},E,T.depth)}))));return g;function y(v){for(var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,T=function(){var O=v[x];if(S.indexOf(O)!==-1){var N=[].concat(Du(S.slice(S.indexOf(O))),[O]).map(function(B){return t(B.data)});return m.some(function(B){return B.length===N.length&&B.every(function(L,U){return L===N[U]})})||(m.push(N),c(N)),1}E>O.depth&&(O.depth=E,y(O.out,[].concat(Du(S),[O]),E+(O.skip?0:1)))},x=0,R=v.length;x<R;x++)T()}}var en=window.THREE?window.THREE:{Group:Md,Mesh:$r,MeshLambertMaterial:rO,Color:Ne,BufferGeometry:bn,BufferAttribute:wi,Matrix4:nn,Vector3:ut,SphereGeometry:g_,CylinderGeometry:Hm,TubeGeometry:Fx,ConeGeometry:Bx,Line:dh,LineBasicMaterial:Oa,QuadraticBezierCurve3:tM,CubicBezierCurve3:J2,Box3:Ks},W3={graph:_K,forcelayout:OK},xQ=2,cC=new en.BufferGeometry().setAttribute?"setAttribute":"addAttribute",SE=new en.BufferGeometry().applyMatrix4?"applyMatrix4":"applyMatrix",bQ=fZ({props:{jsonUrl:{onChange:function(t,e){var i=this;t&&!e.fetchingJson&&(e.fetchingJson=!0,e.onLoading(),fetch(t).then(function(r){return r.json()}).then(function(r){e.fetchingJson=!1,e.onFinishLoading(r),i.graphData(r)}))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(t,e){e.engineRunning=!1}},numDimensions:{default:3,onChange:function(t,e){var i=e.d3ForceLayout.force("charge");i&&i.strength(t>2?-60:-30),t<3&&r(e.graphData.nodes,"z"),t<2&&r(e.graphData.nodes,"y");function r(s,a){s.forEach(function(l){delete l[a],delete l["v".concat(a)]})}}},dagMode:{onChange:function(t,e){!t&&e.forceEngine==="d3"&&(e.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=i.fz=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(t){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.alphaDecay(t)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.alphaTarget(t)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.velocityDecay(t)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(t){return t._flushObjects=!0,t._rerender(),this},d3Force:function(t,e,i){return i===void 0?t.d3ForceLayout.force(e):(t.d3ForceLayout.force(e,i),this)},d3ReheatSimulation:function(t){return t.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(t){return t.cntTicks=0,t.startTickTime=new Date,t.engineRunning=!0,this},tickFrame:function(t){var e=t.forceEngine!=="ngraph";return t.engineRunning&&i(),r(),s(),this;function i(){++t.cntTicks>t.cooldownTicks||new Date-t.startTickTime>t.cooldownTime||e&&t.d3AlphaMin>0&&t.d3ForceLayout.alpha()<t.d3AlphaMin?(t.engineRunning=!1,t.onEngineStop()):(t.layout[e?"tick":"step"](),t.onEngineTick());var a=hi(t.nodeThreeObjectExtend);t.nodeDataMapper.entries().forEach(function(y){var v=D0(y,2),S=v[0],E=v[1];if(E){var T=e?S:t.layout.getNodePosition(S[t.nodeId]),x=a(S);(!t.nodePositionUpdate||!t.nodePositionUpdate(x?E.children[0]:E,{x:T.x,y:T.y,z:T.z},S)||x)&&(E.position.x=T.x,E.position.y=T.y||0,E.position.z=T.z||0)}});var l=hi(t.linkWidth),c=hi(t.linkCurvature),f=hi(t.linkCurveRotation),m=hi(t.linkThreeObjectExtend);t.linkDataMapper.entries().forEach(function(y){var v=D0(y,2),S=v[0],E=v[1];if(E){var T=e?S:t.layout.getLinkPosition(t.layout.graph.getLink(S.source,S.target).id),x=T[e?"source":"from"],R=T[e?"target":"to"];if(!(!x||!R||!x.hasOwnProperty("x")||!R.hasOwnProperty("x"))){g(S);var D=m(S);if(!(t.linkPositionUpdate&&t.linkPositionUpdate(D?E.children[1]:E,{start:{x:x.x,y:x.y,z:x.z},end:{x:R.x,y:R.y,z:R.z}},S)&&!D)){var O=30,N=S.__curve,B=E.children.length?E.children[0]:E;if(B.type==="Line"){if(N){var U=N.getPoints(O);B.geometry.getAttribute("position").array.length!==U.length*3&&B.geometry[cC]("position",new en.BufferAttribute(new Float32Array(U.length*3),3)),B.geometry.setFromPoints(U)}else{var L=B.geometry.getAttribute("position");(!L||!L.array||L.array.length!==6)&&B.geometry[cC]("position",L=new en.BufferAttribute(new Float32Array(2*3),3)),L.array[0]=x.x,L.array[1]=x.y||0,L.array[2]=x.z||0,L.array[3]=R.x,L.array[4]=R.y||0,L.array[5]=R.z||0,L.needsUpdate=!0}B.geometry.computeBoundingSphere()}else if(B.type==="Mesh")if(N){B.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(B.position.set(0,0,0),B.rotation.set(0,0,0),B.scale.set(1,1,1));var it=Math.ceil(l(S)*10)/10,Y=it/2,Z=new en.TubeGeometry(N,O,Y,t.linkResolution,!1);B.geometry.dispose(),B.geometry=Z}else{if(!B.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var I=Math.ceil(l(S)*10)/10,w=I/2,V=new en.CylinderGeometry(w,w,1,t.linkResolution,1,!1);V[SE](new en.Matrix4().makeTranslation(0,1/2,0)),V[SE](new en.Matrix4().makeRotationX(Math.PI/2)),B.geometry.dispose(),B.geometry=V}var G=new en.Vector3(x.x,x.y||0,x.z||0),k=new en.Vector3(R.x,R.y||0,R.z||0),st=G.distanceTo(k);B.position.x=G.x,B.position.y=G.y,B.position.z=G.z,B.scale.z=st,B.parent.localToWorld(k),B.lookAt(k)}}}}});function g(y){var v=e?y:t.layout.getLinkPosition(t.layout.graph.getLink(y.source,y.target).id),S=v[e?"source":"from"],E=v[e?"target":"to"];if(!(!S||!E||!S.hasOwnProperty("x")||!E.hasOwnProperty("x"))){var T=c(y);if(!T)y.__curve=null;else{var x=new en.Vector3(S.x,S.y||0,S.z||0),R=new en.Vector3(E.x,E.y||0,E.z||0),D=x.distanceTo(R),O,N=f(y);if(D>0){var B=E.x-S.x,L=E.y-S.y||0,U=new en.Vector3().subVectors(R,x),I=U.clone().multiplyScalar(T).cross(B!==0||L!==0?new en.Vector3(0,0,1):new en.Vector3(0,1,0)).applyAxisAngle(U.normalize(),N).add(new en.Vector3().addVectors(x,R).divideScalar(2));O=new en.QuadraticBezierCurve3(x,I,R)}else{var w=T*70,V=-N,G=V+Math.PI/2;O=new en.CubicBezierCurve3(x,new en.Vector3(w*Math.cos(G),w*Math.sin(G),0).add(x),new en.Vector3(w*Math.cos(V),w*Math.sin(V),0).add(x),R)}y.__curve=O}}}}function r(){var a=hi(t.linkDirectionalArrowRelPos),l=hi(t.linkDirectionalArrowLength),c=hi(t.nodeVal);t.arrowDataMapper.entries().forEach(function(f){var m=D0(f,2),g=m[0],y=m[1];if(y){var v=e?g:t.layout.getLinkPosition(t.layout.graph.getLink(g.source,g.target).id),S=v[e?"source":"from"],E=v[e?"target":"to"];if(!(!S||!E||!S.hasOwnProperty("x")||!E.hasOwnProperty("x"))){var T=Math.cbrt(Math.max(0,c(S)||1))*t.nodeRelSize,x=Math.cbrt(Math.max(0,c(E)||1))*t.nodeRelSize,R=l(g),D=a(g),O=g.__curve?function(w){return g.__curve.getPoint(w)}:function(w){var V=function(k,st,it,Y){return st[k]+(it[k]-st[k])*Y||0};return{x:V("x",S,E,w),y:V("y",S,E,w),z:V("z",S,E,w)}},N=g.__curve?g.__curve.getLength():Math.sqrt(["x","y","z"].map(function(w){return Math.pow((E[w]||0)-(S[w]||0),2)}).reduce(function(w,V){return w+V},0)),B=T+R+(N-T-x-R)*D,L=O(B/N),U=O((B-R)/N);["x","y","z"].forEach(function(w){return y.position[w]=U[w]});var I=MV(en.Vector3,Du(["x","y","z"].map(function(w){return L[w]})));y.parent.localToWorld(I),y.lookAt(I)}}})}function s(){var a=hi(t.linkDirectionalParticleSpeed);t.graphData.links.forEach(function(l){var c=t.particlesDataMapper.getObj(l),f=c&&c.children,m=l.__singleHopPhotonsObj&&l.__singleHopPhotonsObj.children;if(!((!m||!m.length)&&(!f||!f.length))){var g=e?l:t.layout.getLinkPosition(t.layout.graph.getLink(l.source,l.target).id),y=g[e?"source":"from"],v=g[e?"target":"to"];if(!(!y||!v||!y.hasOwnProperty("x")||!v.hasOwnProperty("x"))){var S=a(l),E=l.__curve?function(x){return l.__curve.getPoint(x)}:function(x){var R=function(O,N,B,L){return N[O]+(B[O]-N[O])*L||0};return{x:R("x",y,v,x),y:R("y",y,v,x),z:R("z",y,v,x)}},T=[].concat(Du(f||[]),Du(m||[]));T.forEach(function(x,R){var D=x.parent.__linkThreeObjType==="singleHopPhotons";if(x.hasOwnProperty("__progressRatio")||(x.__progressRatio=D?0:R/f.length),x.__progressRatio+=S,x.__progressRatio>=1)if(!D)x.__progressRatio=x.__progressRatio%1;else{x.parent.remove(x),SR(x);return}var O=x.__progressRatio,N=E(O);["x","y","z"].forEach(function(B){return x.position[B]=N[B]})})}}})}},emitParticle:function(t,e){if(e&&t.graphData.links.includes(e)){if(!e.__singleHopPhotonsObj){var i=new en.Group;i.__linkThreeObjType="singleHopPhotons",e.__singleHopPhotonsObj=i,t.graphScene.add(i)}var r=hi(t.linkDirectionalParticleWidth),s=Math.ceil(r(e)*10)/10/2,a=t.linkDirectionalParticleResolution,l=new en.SphereGeometry(s,a,a),c=hi(t.linkColor),f=hi(t.linkDirectionalParticleColor),m=f(e)||c(e)||"#f0f0f0",g=new en.Color(Kv(m)),y=t.linkOpacity*3,v=new en.MeshLambertMaterial({color:g,transparent:!0,opacity:y});e.__singleHopPhotonsObj.add(new en.Mesh(l,v))}return this},getGraphBbox:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};if(!t.initialised)return null;var i=function r(s){var a=[];if(s.geometry){s.geometry.computeBoundingBox();var l=new en.Box3;l.copy(s.geometry.boundingBox).applyMatrix4(s.matrixWorld),a.push(l)}return a.concat.apply(a,Du((s.children||[]).filter(function(c){return!c.hasOwnProperty("__graphObjType")||c.__graphObjType==="node"&&e(c.__data)}).map(r)))}(t.graphScene);return i.length?Object.assign.apply(Object,Du(["x","y","z"].map(function(r){return yM({},r,[gZ(i,function(s){return s.min[r]}),mZ(i,function(s){return s.max[r]})])}))):null}},stateInit:function(){return{d3ForceLayout:dK().force("link",Q$()).force("charge",pK()).force("center",t$()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(t,e){e.graphScene=t,e.nodeDataMapper=new $v(t,{objBindAttr:"__threeObj"}),e.linkDataMapper=new $v(t,{objBindAttr:"__lineObj"}),e.arrowDataMapper=new $v(t,{objBindAttr:"__arrowObj"}),e.particlesDataMapper=new $v(t,{objBindAttr:"__photonsObj"})},update:function(t,e){var i=function(lt){return lt.some(function(ft){return e.hasOwnProperty(ft)})};if(t.engineRunning=!1,typeof t.onUpdate=="function"&&t.onUpdate(),t.nodeAutoColorBy!==null&&i(["nodeAutoColorBy","graphData","nodeColor"])&&X3(t.graphData.nodes,hi(t.nodeAutoColorBy),t.nodeColor),t.linkAutoColorBy!==null&&i(["linkAutoColorBy","graphData","linkColor"])&&X3(t.graphData.links,hi(t.linkAutoColorBy),t.linkColor),t._flushObjects||i(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var r=hi(t.nodeThreeObject),s=hi(t.nodeThreeObjectExtend),a=hi(t.nodeVal),l=hi(t.nodeColor),c=hi(t.nodeVisibility),f={},m={};(t._flushObjects||i(["nodeThreeObject","nodeThreeObjectExtend"]))&&t.nodeDataMapper.clear(),t.nodeDataMapper.onCreateObj(function(nt){var lt=r(nt),ft=s(nt);lt&&t.nodeThreeObject===lt&&(lt=lt.clone());var mt;return lt&&!ft?mt=lt:(mt=new en.Mesh,mt.__graphDefaultObj=!0,lt&&ft&&mt.add(lt)),mt.__graphObjType="node",mt}).onUpdateObj(function(nt,lt){if(nt.__graphDefaultObj){var ft=a(lt)||1,mt=Math.cbrt(ft)*t.nodeRelSize,Dt=t.nodeResolution;(!nt.geometry.type.match(/^Sphere(Buffer)?Geometry$/)||nt.geometry.parameters.radius!==mt||nt.geometry.parameters.widthSegments!==Dt)&&(f.hasOwnProperty(ft)||(f[ft]=new en.SphereGeometry(mt,Dt,Dt)),nt.geometry.dispose(),nt.geometry=f[ft]);var Wt=l(lt),Nt=new en.Color(Kv(Wt||"#ffffaa")),Jt=t.nodeOpacity*uC(Wt);(nt.material.type!=="MeshLambertMaterial"||!nt.material.color.equals(Nt)||nt.material.opacity!==Jt)&&(m.hasOwnProperty(Wt)||(m[Wt]=new en.MeshLambertMaterial({color:Nt,transparent:!0,opacity:Jt})),nt.material.dispose(),nt.material=m[Wt])}}).digest(t.graphData.nodes.filter(c))}if(t._flushObjects||i(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var g=hi(t.linkThreeObject),y=hi(t.linkThreeObjectExtend),v=hi(t.linkMaterial),S=hi(t.linkVisibility),E=hi(t.linkColor),T=hi(t.linkWidth),x={},R={},D={},O=t.graphData.links.filter(S);if((t._flushObjects||i(["linkThreeObject","linkThreeObjectExtend","linkWidth"]))&&t.linkDataMapper.clear(),t.linkDataMapper.onRemoveObj(function(nt){var lt=nt.__data&&nt.__data.__singleHopPhotonsObj;lt&&(lt.parent.remove(lt),SR(lt),delete nt.__data.__singleHopPhotonsObj)}).onCreateObj(function(nt){var lt=g(nt),ft=y(nt);lt&&t.linkThreeObject===lt&&(lt=lt.clone());var mt;if(!lt||ft){var Dt=!!T(nt);if(Dt)mt=new en.Mesh;else{var Wt=new en.BufferGeometry;Wt[cC]("position",new en.BufferAttribute(new Float32Array(2*3),3)),mt=new en.Line(Wt)}}var Nt;return lt?ft?(Nt=new en.Group,Nt.__graphDefaultObj=!0,Nt.add(mt),Nt.add(lt)):Nt=lt:(Nt=mt,Nt.__graphDefaultObj=!0),Nt.renderOrder=10,Nt.__graphObjType="link",Nt}).onUpdateObj(function(nt,lt){if(nt.__graphDefaultObj){var ft=nt.children.length?nt.children[0]:nt,mt=Math.ceil(T(lt)*10)/10,Dt=!!mt;if(Dt){var Wt=mt/2,Nt=t.linkResolution;if(!ft.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||ft.geometry.parameters.radiusTop!==Wt||ft.geometry.parameters.radialSegments!==Nt){if(!x.hasOwnProperty(mt)){var Jt=new en.CylinderGeometry(Wt,Wt,1,Nt,1,!1);Jt[SE](new en.Matrix4().makeTranslation(0,1/2,0)),Jt[SE](new en.Matrix4().makeRotationX(Math.PI/2)),x[mt]=Jt}ft.geometry.dispose(),ft.geometry=x[mt]}}var Pt=v(lt);if(Pt)ft.material=Pt;else{var kt=E(lt),tt=new en.Color(Kv(kt||"#f0f0f0")),se=t.linkOpacity*uC(kt),$t=Dt?"MeshLambertMaterial":"LineBasicMaterial";if(ft.material.type!==$t||!ft.material.color.equals(tt)||ft.material.opacity!==se){var ce=Dt?R:D;ce.hasOwnProperty(kt)||(ce[kt]=new en[$t]({color:tt,transparent:se<1,opacity:se,depthWrite:se>=1})),ft.material.dispose(),ft.material=ce[kt]}}}}).digest(O),t.linkDirectionalArrowLength||e.hasOwnProperty("linkDirectionalArrowLength")){var N=hi(t.linkDirectionalArrowLength),B=hi(t.linkDirectionalArrowColor);t.arrowDataMapper.onCreateObj(function(){var nt=new en.Mesh(void 0,new en.MeshLambertMaterial({transparent:!0}));return nt.__linkThreeObjType="arrow",nt}).onUpdateObj(function(nt,lt){var ft=N(lt),mt=t.linkDirectionalArrowResolution;if(!nt.geometry.type.match(/^Cone(Buffer)?Geometry$/)||nt.geometry.parameters.height!==ft||nt.geometry.parameters.radialSegments!==mt){var Dt=new en.ConeGeometry(ft*.25,ft,mt);Dt.translate(0,ft/2,0),Dt.rotateX(Math.PI/2),nt.geometry.dispose(),nt.geometry=Dt}var Wt=B(lt)||E(lt)||"#f0f0f0";nt.material.color=new en.Color(Kv(Wt)),nt.material.opacity=t.linkOpacity*3*uC(Wt)}).digest(O.filter(N))}if(t.linkDirectionalParticles||e.hasOwnProperty("linkDirectionalParticles")){var L=hi(t.linkDirectionalParticles),U=hi(t.linkDirectionalParticleWidth),I=hi(t.linkDirectionalParticleColor),w={},V={};t.particlesDataMapper.onCreateObj(function(){var nt=new en.Group;return nt.__linkThreeObjType="photons",nt.__photonDataMapper=new $v(nt),nt}).onUpdateObj(function(nt,lt){var ft=Math.round(Math.abs(L(lt))),mt=!!nt.children.length&&nt.children[0],Dt=Math.ceil(U(lt)*10)/10/2,Wt=t.linkDirectionalParticleResolution,Nt;mt&&mt.geometry.parameters.radius===Dt&&mt.geometry.parameters.widthSegments===Wt?Nt=mt.geometry:(V.hasOwnProperty(Dt)||(V[Dt]=new en.SphereGeometry(Dt,Wt,Wt)),Nt=V[Dt],mt&&mt.geometry.dispose());var Jt=I(lt)||E(lt)||"#f0f0f0",Pt=new en.Color(Kv(Jt)),kt=t.linkOpacity*3,tt;mt&&mt.material.color.equals(Pt)&&mt.material.opacity===kt?tt=mt.material:(w.hasOwnProperty(Jt)||(w[Jt]=new en.MeshLambertMaterial({color:Pt,transparent:!0,opacity:kt})),tt=w[Jt],mt&&mt.material.dispose()),nt.__photonDataMapper.id(function(se){return se.idx}).onCreateObj(function(){return new en.Mesh(Nt,tt)}).onUpdateObj(function(se){se.geometry=Nt,se.material=tt}).digest(Du(new Array(ft)).map(function(se,$t){return{idx:$t}}))}).digest(O.filter(L))}}if(t._flushObjects=!1,i(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){t.engineRunning=!1,t.graphData.links.forEach(function(nt){nt.source=nt[t.linkSource],nt.target=nt[t.linkTarget]});var G=t.forceEngine!=="ngraph",k;if(G){(k=t.d3ForceLayout).stop().alpha(1).numDimensions(t.numDimensions).nodes(t.graphData.nodes);var st=t.d3ForceLayout.force("link");st&&st.id(function(nt){return nt[t.nodeId]}).links(t.graphData.links);var it=t.dagMode&&vQ(t.graphData,function(nt){return nt[t.nodeId]},{nodeFilter:t.dagNodeFilter,onLoopError:t.onDagError||void 0}),Y=Math.max.apply(Math,Du(Object.values(it||[]))),Z=t.dagLevelDistance||t.graphData.nodes.length/(Y||1)*xQ*(["radialin","radialout"].indexOf(t.dagMode)!==-1?.7:1);if(["lr","rl","td","bu","zin","zout"].includes(e.dagMode)){var at=["lr","rl"].includes(e.dagMode)?"fx":["td","bu"].includes(e.dagMode)?"fy":"fz";t.graphData.nodes.filter(t.dagNodeFilter).forEach(function(nt){return delete nt[at]})}if(["lr","rl","td","bu","zin","zout"].includes(t.dagMode)){var ct=["rl","td","zout"].includes(t.dagMode),$=function(lt){return(it[lt[t.nodeId]]-Y/2)*Z*(ct?-1:1)},pt=["lr","rl"].includes(t.dagMode)?"fx":["td","bu"].includes(t.dagMode)?"fy":"fz";t.graphData.nodes.filter(t.dagNodeFilter).forEach(function(nt){return nt[pt]=$(nt)})}t.d3ForceLayout.force("dagRadial",["radialin","radialout"].indexOf(t.dagMode)!==-1?mK(function(nt){var lt=it[nt[t.nodeId]]||-1;return(t.dagMode==="radialin"?Y-lt:lt)*Z}).strength(function(nt){return t.dagNodeFilter(nt)?1:0}):null)}else{var wt=W3.graph();t.graphData.nodes.forEach(function(nt){wt.addNode(nt[t.nodeId])}),t.graphData.links.forEach(function(nt){wt.addLink(nt.source,nt.target)}),k=W3.forcelayout(wt,pQ({dimensions:t.numDimensions},t.ngraphPhysics)),k.graph=wt}for(var zt=0;zt<t.warmupTicks&&!(G&&t.d3AlphaMin>0&&t.d3ForceLayout.alpha()<t.d3AlphaMin);zt++)k[G?"tick":"step"]();t.layout=k,this.resetCountdown()}t.engineRunning=!0,t.onFinishUpdate()}});function SQ(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=function(r){function s(){var a;TV(this,s);for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return a=EV(this,s,[].concat(c)),a.__kapsuleInstance=MV(n,[].concat(Du(e?[a]:[]),c)),a}return wV(s,r),AV(s)}(t);return Object.keys(n()).forEach(function(r){return i.prototype[r]=function(){var s,a=(s=this.__kapsuleInstance)[r].apply(s,arguments);return a===this.__kapsuleInstance?this:a}}),i}var EQ=window.THREE?window.THREE:{Group:Md},TQ=SQ(bQ,EQ.Group,!0);function MQ(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i,r,s,a,l=[],c=!0,f=!1;try{if(s=(e=e.call(n)).next,t===0){if(Object(e)!==e)return;c=!1}else for(;!(c=(i=s.call(e)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(m){f=!0,r=m}finally{try{if(!c&&e.return!=null&&(a=e.return(),Object(a)!==a))return}finally{if(f)throw r}}return l}}function AQ(n,t,e){return t=PQ(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Y3(n,t){return RQ(n)||MQ(n,t)||NV(n,t)||NQ()}function wQ(n){return CQ(n)||OQ(n)||NV(n)||DQ()}function CQ(n){if(Array.isArray(n))return ER(n)}function RQ(n){if(Array.isArray(n))return n}function OQ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function NV(n,t){if(n){if(typeof n=="string")return ER(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ER(n,t)}}function ER(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function DQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IQ(n,t){if(typeof n!="object"||n===null)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function PQ(n){var t=IQ(n,"string");return typeof t=="symbol"?t:String(t)}var LQ=function(t,e){var i=new Set(e);return Object.assign.apply(Object,[{}].concat(wQ(Object.entries(t).filter(function(r){var s=Y3(r,1),a=s[0];return!i.has(a)}).map(function(r){var s=Y3(r,2),a=s[0],l=s[1];return AQ({},a,l)}))))};function TR(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=Array(t);e<t;e++)i[e]=n[e];return i}function UQ(n){if(Array.isArray(n))return n}function zQ(n){if(Array.isArray(n))return TR(n)}function BQ(n,t,e){return(t=WQ(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function VQ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function FQ(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i,r,s,a,l=[],c=!0,f=!1;try{if(s=(e=e.call(n)).next,t!==0)for(;!(c=(i=s.call(e)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(m){f=!0,r=m}finally{try{if(!c&&e.return!=null&&(a=e.return(),Object(a)!==a))return}finally{if(f)throw r}}return l}}function kQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $3(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Z1(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?$3(Object(e),!0).forEach(function(i){BQ(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):$3(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function GQ(n,t){if(n==null)return{};var e,i,r=qQ(n,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)e=s[i],t.indexOf(e)===-1&&{}.propertyIsEnumerable.call(n,e)&&(r[e]=n[e])}return r}function qQ(n,t){if(n==null)return{};var e={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(t.indexOf(i)!==-1)continue;e[i]=n[i]}return e}function jQ(n,t){return UQ(n)||FQ(n,t)||IV(n,t)||kQ()}function fC(n){return zQ(n)||VQ(n)||IV(n)||HQ()}function XQ(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function WQ(n){var t=XQ(n,"string");return typeof t=="symbol"?t:t+""}function IV(n,t){if(n){if(typeof n=="string")return TR(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?TR(n,t):void 0}}function YQ(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.methodNames,i=e===void 0?[]:e,r=t.initPropNames,s=r===void 0?[]:r;return ot.forwardRef(function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=arguments.length>1?arguments[1]:void 0,c=ot.useMemo(function(){return new n(Object.fromEntries(s.filter(function(y){return a.hasOwnProperty(y)}).map(function(y){return[y,a[y]]})))},[]);ot.useEffect(function(){return c._destructor instanceof Function?c._destructor:void 0},[c]);var f=ot.useCallback(function(y){for(var v=arguments.length,S=new Array(v>1?v-1:0),E=1;E<v;E++)S[E-1]=arguments[E];return c[y]instanceof Function?c[y].apply(c,S):void 0},[c]),m=Object.fromEntries(Object.entries(a).filter(function(y){var v=jQ(y,1),S=v[0];return!c[S]||!(c[S]instanceof Function)})),g=ot.useRef({});return Object.keys(LQ(a,[].concat(fC(i),fC(s),fC(Object.keys(m))))).filter(function(y){return g.current[y]!==a[y]}).forEach(function(y){return f(y,a[y])}),g.current=a,ot.useImperativeHandle(l,function(){return Object.fromEntries(i.map(function(y){return[y,function(){for(var v=arguments.length,S=new Array(v),E=0;E<v;E++)S[E]=arguments[E];return f.apply(void 0,[y].concat(S))}]}))}),ot.createElement("primitive",Z1(Z1({},m),{},{object:c}))})}var $Q=["onNodeHover","onLinkHover","onNodeClick","onLinkClick"],KQ=YQ(TQ,{initPropNames:[],methodNames:["emitParticle","getGraphBbox","d3ReheatSimulation","d3Force","resetCountdown","tickFrame","refresh"]}),K3=function(t){var e,i=t.intersections,r=function(a){return a?a.hasOwnProperty("__graphObjType")?a:r(a.parent):null};return r((e=i.find(function(s){return r(s.object)}))===null||e===void 0?void 0:e.object)},EE=function(t){return t==null?void 0:t.__data},ZQ=ot.forwardRef(function(n,t){var e=n.onNodeHover,i=n.onLinkHover,r=n.onNodeClick,s=n.onLinkClick,a=GQ(n,$Q),l=ot.useRef(null),c=ot.useCallback(function(m){if(!(!e&&!i)){var g=K3(m);if(g!==l.current){var y=l.current;l.current=g,y&&(!g||g.__graphObjType!==y.__graphObjType)&&({node:e,link:i}[y==null?void 0:y.__graphObjType]||function(){})(null,EE(y)),({node:e,link:i}[g==null?void 0:g.__graphObjType]||function(){})(EE(g),(g==null?void 0:g.__graphObjType)===(y==null?void 0:y.__graphObjType)?EE(y):null)}}},[e,i]),f=ot.useCallback(function(m){var g=K3(m),y={node:r,link:s}[g==null?void 0:g.__graphObjType];g&&y&&(y(EE(g),m),m.stopPropagation())},[r,s]);return ot.createElement(KQ,Z1(Z1({},a),{},{ref:t,onPointerMove:c,onClick:f}))});function Jf(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function PV(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t}/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var fl={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Yy={duration:.5,overwrite:!1,delay:0},OO,Qs,ar,$c=1e8,Ma=1/$c,MR=Math.PI*2,QQ=MR/4,JQ=0,LV=Math.sqrt,tJ=Math.cos,eJ=Math.sin,Ps=function(t){return typeof t=="string"},Vr=function(t){return typeof t=="function"},mh=function(t){return typeof t=="number"},DO=function(t){return typeof t>"u"},ef=function(t){return typeof t=="object"},No=function(t){return t!==!1},NO=function(){return typeof window<"u"},TE=function(t){return Vr(t)||Ps(t)},UV=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Aa=Array.isArray,AR=/(?:-?\.?\d|\.)+/gi,zV=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Oy=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,hC=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,BV=/[+-]=-?[.\d]+/,VV=/[^,'"\[\]\s]+/gi,nJ=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Sr,Lc,wR,IO,pl={},Q1={},FV,kV=function(t){return(Q1=$y(t,pl))&&Uo},PO=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},fx=function(t,e){return!e&&console.warn(t)},HV=function(t,e){return t&&(pl[t]=e)&&Q1&&(Q1[t]=e)||pl},hx=function(){return 0},iJ={suppressEvents:!0,isStart:!0,kill:!1},GE={suppressEvents:!0,kill:!1},rJ={suppressEvents:!0},LO={},Od=[],CR={},GV,al={},dC={},Z3=30,qE=[],UO="",zO=function(t){var e=t[0],i,r;if(ef(e)||Vr(e)||(t=[t]),!(i=(e._gsap||{}).harness)){for(r=qE.length;r--&&!qE[r].targetTest(e););i=qE[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new dF(t[r],i)))||t.splice(r,1);return t},Mm=function(t){return t._gsap||zO(Gl(t))[0]._gsap},qV=function(t,e,i){return(i=t[e])&&Vr(i)?t[e]():DO(i)&&t.getAttribute&&t.getAttribute(e)||i},Io=function(t,e){return(t=t.split(",")).forEach(e)||t},Xr=function(t){return Math.round(t*1e5)/1e5||0},ls=function(t){return Math.round(t*1e7)/1e7||0},Iy=function(t,e){var i=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),i==="+"?t+r:i==="-"?t-r:i==="*"?t*r:t/r},sJ=function(t,e){for(var i=e.length,r=0;t.indexOf(e[r])<0&&++r<i;);return r<i},J1=function(){var t=Od.length,e=Od.slice(0),i,r;for(CR={},Od.length=0,i=0;i<t;i++)r=e[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},jV=function(t,e,i,r){Od.length&&!Qs&&J1(),t.render(e,i,Qs&&e<0&&(t._initted||t._startAt)),Od.length&&!Qs&&J1()},XV=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(VV).length<2?e:Ps(t)?t.trim():t},WV=function(t){return t},ml=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},aJ=function(t){return function(e,i){for(var r in i)r in e||r==="duration"&&t||r==="ease"||(e[r]=i[r])}},$y=function(t,e){for(var i in e)t[i]=e[i];return t},Q3=function n(t,e){for(var i in e)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=ef(e[i])?n(t[i]||(t[i]={}),e[i]):e[i]);return t},tT=function(t,e){var i={},r;for(r in t)r in e||(i[r]=t[r]);return i},N0=function(t){var e=t.parent||Sr,i=t.keyframes?aJ(Aa(t.keyframes)):ml;if(No(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},oJ=function(t,e){for(var i=t.length,r=i===e.length;r&&i--&&t[i]===e[i];);return i<0},YV=function(t,e,i,r,s){var a=t[r],l;if(s)for(l=e[s];a&&a[s]>l;)a=a._prev;return a?(e._next=a._next,a._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[r]=e,e._prev=a,e.parent=e._dp=t,e},_M=function(t,e,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=e._prev,a=e._next;s?s._next=a:t[i]===e&&(t[i]=a),a?a._prev=s:t[r]===e&&(t[r]=s),e._next=e._prev=e.parent=null},Vd=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Am=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},lJ=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},RR=function(t,e,i,r){return t._startAt&&(Qs?t._startAt.revert(GE):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},uJ=function n(t){return!t||t._ts&&n(t.parent)},J3=function(t){return t._repeat?Ky(t._tTime,t=t.duration()+t._rDelay)*t:0},Ky=function(t,e){var i=Math.floor(t=ls(t/e));return t&&i===t?i-1:i},eT=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},vM=function(t){return t._end=ls(t._start+(t._tDur/Math.abs(t._ts||t._rts||Ma)||0))},xM=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=ls(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),vM(t),i._dirty||Am(i,t)),t},$V=function(t,e){var i;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(i=eT(t.rawTime(),e),(!e._dur||jx(0,e.totalDuration(),i)-e._tTime>Ma)&&e.render(i,!0)),Am(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-1e-8}},Fc=function(t,e,i,r){return e.parent&&Vd(e),e._start=ls((mh(i)?i:i||t!==Sr?zl(t,i,e):t._time)+e._delay),e._end=ls(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),YV(t,e,"_first","_last",t._sort?"_start":0),OR(e)||(t._recent=e),r||$V(t,e),t._ts<0&&xM(t,t._tTime),t},KV=function(t,e){return(pl.ScrollTrigger||PO("scrollTrigger",e))&&pl.ScrollTrigger.create(e,t)},ZV=function(t,e,i,r,s){if(VO(t,e,s),!t._initted)return 1;if(!i&&t._pt&&!Qs&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&GV!==ol.frame)return Od.push(t),t._lazy=[s,r],1},cJ=function n(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||n(e))},OR=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},fJ=function(t,e,i,r){var s=t.ratio,a=e<0||!e&&(!t._start&&cJ(t)&&!(!t._initted&&OR(t))||(t._ts<0||t._dp._ts<0)&&!OR(t))?0:1,l=t._rDelay,c=0,f,m,g;if(l&&t._repeat&&(c=jx(0,t._tDur,e),m=Ky(c,l),t._yoyo&&m&1&&(a=1-a),m!==Ky(t._tTime,l)&&(s=1-a,t.vars.repeatRefresh&&t._initted&&t.invalidate())),a!==s||Qs||r||t._zTime===Ma||!e&&t._zTime){if(!t._initted&&ZV(t,e,r,i,c))return;for(g=t._zTime,t._zTime=e||(i?Ma:0),i||(i=e&&!g),t.ratio=a,t._from&&(a=1-a),t._time=0,t._tTime=c,f=t._pt;f;)f.r(a,f.d),f=f._next;e<0&&RR(t,e,i,!0),t._onUpdate&&!i&&ul(t,"onUpdate"),c&&t._repeat&&!i&&t.parent&&ul(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===a&&(a&&Vd(t,1),!i&&!Qs&&(ul(t,a?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},hJ=function(t,e,i){var r;if(i>e)for(r=t._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<e)return r;r=r._prev}},Zy=function(t,e,i,r){var s=t._repeat,a=ls(e)||0,l=t._tTime/t._tDur;return l&&!r&&(t._time*=a/t._dur),t._dur=a,t._tDur=s?s<0?1e10:ls(a*(s+1)+t._rDelay*s):a,l>0&&!r&&xM(t,t._tTime=t._tDur*l),t.parent&&vM(t),i||Am(t.parent,t),t},tL=function(t){return t instanceof Ya?Am(t):Zy(t,t._dur)},dJ={_start:0,endTime:hx,totalDuration:hx},zl=function n(t,e,i){var r=t.labels,s=t._recent||dJ,a=t.duration()>=$c?s.endTime(!1):t._dur,l,c,f;return Ps(e)&&(isNaN(e)||e in r)?(c=e.charAt(0),f=e.substr(-1)==="%",l=e.indexOf("="),c==="<"||c===">"?(l>=0&&(e=e.replace(/=/,"")),(c==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(f?(l<0?s:i).totalDuration()/100:1)):l<0?(e in r||(r[e]=a),r[e]):(c=parseFloat(e.charAt(l-1)+e.substr(l+1)),f&&i&&(c=c/100*(Aa(i)?i[0]:i).totalDuration()),l>1?n(t,e.substr(0,l-1),i)+c:a+c)):e==null?a:+e},I0=function(t,e,i){var r=mh(e[1]),s=(r?2:1)+(t<2?0:1),a=e[s],l,c;if(r&&(a.duration=e[1]),a.parent=i,t){for(l=a,c=i;c&&!("immediateRender"in l);)l=c.vars.defaults||{},c=No(c.vars.inherit)&&c.parent;a.immediateRender=No(l.immediateRender),t<2?a.runBackwards=1:a.startAt=e[s-1]}return new os(e[0],a,e[s+1])},Jd=function(t,e){return t||t===0?e(t):e},jx=function(t,e,i){return i<t?t:i>e?e:i},Ea=function(t,e){return!Ps(t)||!(e=nJ.exec(t))?"":e[1]},pJ=function(t,e,i){return Jd(i,function(r){return jx(t,e,r)})},DR=[].slice,QV=function(t,e){return t&&ef(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&ef(t[0]))&&!t.nodeType&&t!==Lc},mJ=function(t,e,i){return i===void 0&&(i=[]),t.forEach(function(r){var s;return Ps(r)&&!e||QV(r,1)?(s=i).push.apply(s,Gl(r)):i.push(r)})||i},Gl=function(t,e,i){return ar&&!e&&ar.selector?ar.selector(t):Ps(t)&&!i&&(wR||!Qy())?DR.call((e||IO).querySelectorAll(t),0):Aa(t)?mJ(t,i):QV(t)?DR.call(t,0):t?[t]:[]},NR=function(t){return t=Gl(t)[0]||fx("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return Gl(e,i.querySelectorAll?i:i===t?fx("Invalid scope")||IO.createElement("div"):t)}},JV=function(t){return t.sort(function(){return .5-Math.random()})},tF=function(t){if(Vr(t))return t;var e=ef(t)?t:{each:t},i=wm(e.ease),r=e.from||0,s=parseFloat(e.base)||0,a={},l=r>0&&r<1,c=isNaN(r)||l,f=e.axis,m=r,g=r;return Ps(r)?m=g={center:.5,edges:.5,end:1}[r]||0:!l&&c&&(m=r[0],g=r[1]),function(y,v,S){var E=(S||e).length,T=a[E],x,R,D,O,N,B,L,U,I;if(!T){if(I=e.grid==="auto"?0:(e.grid||[1,$c])[1],!I){for(L=-1e8;L<(L=S[I++].getBoundingClientRect().left)&&I<E;);I<E&&I--}for(T=a[E]=[],x=c?Math.min(I,E)*m-.5:r%I,R=I===$c?0:c?E*g/I-.5:r/I|0,L=0,U=$c,B=0;B<E;B++)D=B%I-x,O=R-(B/I|0),T[B]=N=f?Math.abs(f==="y"?O:D):LV(D*D+O*O),N>L&&(L=N),N<U&&(U=N);r==="random"&&JV(T),T.max=L-U,T.min=U,T.v=E=(parseFloat(e.amount)||parseFloat(e.each)*(I>E?E-1:f?f==="y"?E/I:I:Math.max(I,E/I))||0)*(r==="edges"?-1:1),T.b=E<0?s-E:s,T.u=Ea(e.amount||e.each)||0,i=i&&E<0?cF(i):i}return E=(T[y]-T.min)/T.max||0,ls(T.b+(i?i(E):E)*T.v)+T.u}},IR=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var r=ls(Math.round(parseFloat(i)/t)*t*e);return(r-r%1)/e+(mh(i)?0:Ea(i))}},eF=function(t,e){var i=Aa(t),r,s;return!i&&ef(t)&&(r=i=t.radius||$c,t.values?(t=Gl(t.values),(s=!mh(t[0]))&&(r*=r)):t=IR(t.increment)),Jd(e,i?Vr(t)?function(a){return s=t(a),Math.abs(s-a)<=r?s:a}:function(a){for(var l=parseFloat(s?a.x:a),c=parseFloat(s?a.y:0),f=$c,m=0,g=t.length,y,v;g--;)s?(y=t[g].x-l,v=t[g].y-c,y=y*y+v*v):y=Math.abs(t[g]-l),y<f&&(f=y,m=g);return m=!r||f<=r?t[m]:a,s||m===a||mh(a)?m:m+Ea(a)}:IR(t))},nF=function(t,e,i,r){return Jd(Aa(t)?!e:i===!0?!!(i=0):!r,function(){return Aa(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+i*.99))/i)*i*r)/r})},gJ=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(r){return e.reduce(function(s,a){return a(s)},r)}},yJ=function(t,e){return function(i){return t(parseFloat(i))+(e||Ea(i))}},_J=function(t,e,i){return rF(t,e,0,1,i)},iF=function(t,e,i){return Jd(i,function(r){return t[~~e(r)]})},vJ=function n(t,e,i){var r=e-t;return Aa(t)?iF(t,n(0,t.length),e):Jd(i,function(s){return(r+(s-t)%r)%r+t})},xJ=function n(t,e,i){var r=e-t,s=r*2;return Aa(t)?iF(t,n(0,t.length-1),e):Jd(i,function(a){return a=(s+(a-t)%s)%s||0,t+(a>r?s-a:a)})},dx=function(t){for(var e=0,i="",r,s,a,l;~(r=t.indexOf("random(",e));)a=t.indexOf(")",r),l=t.charAt(r+7)==="[",s=t.substr(r+7,a-r-7).match(l?VV:AR),i+=t.substr(e,r-e)+nF(l?s:+s[0],l?0:+s[1],+s[2]||1e-5),e=a+1;return i+t.substr(e,t.length-e)},rF=function(t,e,i,r,s){var a=e-t,l=r-i;return Jd(s,function(c){return i+((c-t)/a*l||0)})},bJ=function n(t,e,i,r){var s=isNaN(t+e)?0:function(v){return(1-v)*t+v*e};if(!s){var a=Ps(t),l={},c,f,m,g,y;if(i===!0&&(r=1)&&(i=null),a)t={p:t},e={p:e};else if(Aa(t)&&!Aa(e)){for(m=[],g=t.length,y=g-2,f=1;f<g;f++)m.push(n(t[f-1],t[f]));g--,s=function(S){S*=g;var E=Math.min(y,~~S);return m[E](S-E)},i=e}else r||(t=$y(Aa(t)?[]:{},t));if(!m){for(c in e)BO.call(l,t,c,"get",e[c]);s=function(S){return HO(S,l)||(a?t.p:t)}}}return Jd(i,s)},eL=function(t,e,i){var r=t.labels,s=$c,a,l,c;for(a in r)l=r[a]-e,l<0==!!i&&l&&s>(l=Math.abs(l))&&(c=a,s=l);return c},ul=function(t,e,i){var r=t.vars,s=r[e],a=ar,l=t._ctx,c,f,m;if(s)return c=r[e+"Params"],f=r.callbackScope||t,i&&Od.length&&J1(),l&&(ar=l),m=c?s.apply(f,c):s.call(f),ar=a,m},f0=function(t){return Vd(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Qs),t.progress()<1&&ul(t,"onInterrupt"),t},Dy,sF=[],aF=function(t){if(t)if(t=!t.name&&t.default||t,NO()||t.headless){var e=t.name,i=Vr(t),r=e&&!i&&t.init?function(){this._props=[]}:t,s={init:hx,render:HO,add:BO,kill:zJ,modifier:UJ,rawVars:0},a={targetTest:0,get:0,getSetter:kO,aliases:{},register:0};if(Qy(),t!==r){if(al[e])return;ml(r,ml(tT(t,s),a)),$y(r.prototype,$y(s,tT(t,a))),al[r.prop=e]=r,t.targetTest&&(qE.push(r),LO[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}HV(e,r),t.register&&t.register(Uo,r,Po)}else sF.push(t)},Vi=255,h0={aqua:[0,Vi,Vi],lime:[0,Vi,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Vi],navy:[0,0,128],white:[Vi,Vi,Vi],olive:[128,128,0],yellow:[Vi,Vi,0],orange:[Vi,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Vi,0,0],pink:[Vi,192,203],cyan:[0,Vi,Vi],transparent:[Vi,Vi,Vi,0]},pC=function(t,e,i){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(i-e)*t*6:t<.5?i:t*3<2?e+(i-e)*(2/3-t)*6:e)*Vi+.5|0},oF=function(t,e,i){var r=t?mh(t)?[t>>16,t>>8&Vi,t&Vi]:0:h0.black,s,a,l,c,f,m,g,y,v,S;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),h0[t])r=h0[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),a=t.charAt(2),l=t.charAt(3),t="#"+s+s+a+a+l+l+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&Vi,r&Vi,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&Vi,t&Vi]}else if(t.substr(0,3)==="hsl"){if(r=S=t.match(AR),!e)c=+r[0]%360/360,f=+r[1]/100,m=+r[2]/100,a=m<=.5?m*(f+1):m+f-m*f,s=m*2-a,r.length>3&&(r[3]*=1),r[0]=pC(c+1/3,s,a),r[1]=pC(c,s,a),r[2]=pC(c-1/3,s,a);else if(~t.indexOf("="))return r=t.match(zV),i&&r.length<4&&(r[3]=1),r}else r=t.match(AR)||h0.transparent;r=r.map(Number)}return e&&!S&&(s=r[0]/Vi,a=r[1]/Vi,l=r[2]/Vi,g=Math.max(s,a,l),y=Math.min(s,a,l),m=(g+y)/2,g===y?c=f=0:(v=g-y,f=m>.5?v/(2-g-y):v/(g+y),c=g===s?(a-l)/v+(a<l?6:0):g===a?(l-s)/v+2:(s-a)/v+4,c*=60),r[0]=~~(c+.5),r[1]=~~(f*100+.5),r[2]=~~(m*100+.5)),i&&r.length<4&&(r[3]=1),r},lF=function(t){var e=[],i=[],r=-1;return t.split(Dd).forEach(function(s){var a=s.match(Oy)||[];e.push.apply(e,a),i.push(r+=a.length+1)}),e.c=i,e},nL=function(t,e,i){var r="",s=(t+r).match(Dd),a=e?"hsla(":"rgba(",l=0,c,f,m,g;if(!s)return t;if(s=s.map(function(y){return(y=oF(y,e,1))&&a+(e?y[0]+","+y[1]+"%,"+y[2]+"%,"+y[3]:y.join(","))+")"}),i&&(m=lF(t),c=i.c,c.join(r)!==m.c.join(r)))for(f=t.replace(Dd,"1").split(Oy),g=f.length-1;l<g;l++)r+=f[l]+(~c.indexOf(l)?s.shift()||a+"0,0,0,0)":(m.length?m:s.length?s:i).shift());if(!f)for(f=t.split(Dd),g=f.length-1;l<g;l++)r+=f[l]+s[l];return r+f[g]},Dd=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in h0)n+="|"+t+"\\b";return new RegExp(n+")","gi")}(),SJ=/hsl[a]?\(/,uF=function(t){var e=t.join(" "),i;if(Dd.lastIndex=0,Dd.test(e))return i=SJ.test(e),t[1]=nL(t[1],i),t[0]=nL(t[0],i,lF(t[1])),!0},px,ol=function(){var n=Date.now,t=500,e=33,i=n(),r=i,s=1e3/240,a=s,l=[],c,f,m,g,y,v,S=function E(T){var x=n()-r,R=T===!0,D,O,N,B;if((x>t||x<0)&&(i+=x-e),r+=x,N=r-i,D=N-a,(D>0||R)&&(B=++g.frame,y=N-g.time*1e3,g.time=N=N/1e3,a+=D+(D>=s?4:s-D),O=1),R||(c=f(E)),O)for(v=0;v<l.length;v++)l[v](N,y,B,T)};return g={time:0,frame:0,tick:function(){S(!0)},deltaRatio:function(T){return y/(1e3/(T||60))},wake:function(){FV&&(!wR&&NO()&&(Lc=wR=window,IO=Lc.document||{},pl.gsap=Uo,(Lc.gsapVersions||(Lc.gsapVersions=[])).push(Uo.version),kV(Q1||Lc.GreenSockGlobals||!Lc.gsap&&Lc||{}),sF.forEach(aF)),m=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&g.sleep(),f=m||function(T){return setTimeout(T,a-g.time*1e3+1|0)},px=1,S(2))},sleep:function(){(m?cancelAnimationFrame:clearTimeout)(c),px=0,f=hx},lagSmoothing:function(T,x){t=T||1/0,e=Math.min(x||33,t)},fps:function(T){s=1e3/(T||240),a=g.time*1e3+s},add:function(T,x,R){var D=x?function(O,N,B,L){T(O,N,B,L),g.remove(D)}:T;return g.remove(T),l[R?"unshift":"push"](D),Qy(),D},remove:function(T,x){~(x=l.indexOf(T))&&l.splice(x,1)&&v>=x&&v--},_listeners:l},g}(),Qy=function(){return!px&&ol.wake()},Wn={},EJ=/^[\d.\-M][\d.\-,\s]/,TJ=/["']/g,MJ=function(t){for(var e={},i=t.substr(1,t.length-3).split(":"),r=i[0],s=1,a=i.length,l,c,f;s<a;s++)c=i[s],l=s!==a-1?c.lastIndexOf(","):c.length,f=c.substr(0,l),e[r]=isNaN(f)?f.replace(TJ,"").trim():+f,r=c.substr(l+1).trim();return e},AJ=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<i?t.indexOf(")",i+1):i)},wJ=function(t){var e=(t+"").split("("),i=Wn[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[MJ(e[1])]:AJ(t).split(",").map(XV)):Wn._CE&&EJ.test(t)?Wn._CE("",t):i},cF=function(t){return function(e){return 1-t(1-e)}},fF=function n(t,e){for(var i=t._first,r;i;)i instanceof Ya?n(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?n(i.timeline,e):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=e)),i=i._next},wm=function(t,e){return t&&(Vr(t)?t:Wn[t]||wJ(t))||e},jm=function(t,e,i,r){i===void 0&&(i=function(c){return 1-e(1-c)}),r===void 0&&(r=function(c){return c<.5?e(c*2)/2:1-e((1-c)*2)/2});var s={easeIn:e,easeOut:i,easeInOut:r},a;return Io(t,function(l){Wn[l]=pl[l]=s,Wn[a=l.toLowerCase()]=i;for(var c in s)Wn[a+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=Wn[l+"."+c]=s[c]}),s},hF=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},mC=function n(t,e,i){var r=e>=1?e:1,s=(i||(t?.3:.45))/(e<1?e:1),a=s/MR*(Math.asin(1/r)||0),l=function(m){return m===1?1:r*Math.pow(2,-10*m)*eJ((m-a)*s)+1},c=t==="out"?l:t==="in"?function(f){return 1-l(1-f)}:hF(l);return s=MR/s,c.config=function(f,m){return n(t,f,m)},c},gC=function n(t,e){e===void 0&&(e=1.70158);var i=function(a){return a?--a*a*((e+1)*a+e)+1:0},r=t==="out"?i:t==="in"?function(s){return 1-i(1-s)}:hF(i);return r.config=function(s){return n(t,s)},r};Io("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,t){var e=t<5?t+1:t;jm(n+",Power"+(e-1),t?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(i*2,e)/2:1-Math.pow((1-i)*2,e)/2})});Wn.Linear.easeNone=Wn.none=Wn.Linear.easeIn;jm("Elastic",mC("in"),mC("out"),mC());(function(n,t){var e=1/t,i=2*e,r=2.5*e,s=function(l){return l<e?n*l*l:l<i?n*Math.pow(l-1.5/t,2)+.75:l<r?n*(l-=2.25/t)*l+.9375:n*Math.pow(l-2.625/t,2)+.984375};jm("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);jm("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});jm("Circ",function(n){return-(LV(1-n*n)-1)});jm("Sine",function(n){return n===1?1:-tJ(n*QQ)+1});jm("Back",gC("in"),gC("out"),gC());Wn.SteppedEase=Wn.steps=pl.SteppedEase={config:function(t,e){t===void 0&&(t=1);var i=1/t,r=t+(e?0:1),s=e?1:0,a=1-Ma;return function(l){return((r*jx(0,a,l)|0)+s)*i}}};Yy.ease=Wn["quad.out"];Io("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return UO+=n+","+n+"Params,"});var dF=function(t,e){this.id=JQ++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:qV,this.set=e?e.getSetter:kO},mx=function(){function n(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Zy(this,+e.duration,1,1),this.data=e.data,ar&&(this._ctx=ar,ar.data.push(this)),px||ol.wake()}var t=n.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,Zy(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,r){if(Qy(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(xM(this,i),!s._dp||s.parent||$V(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Fc(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Ma||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),jV(this,i,r)),this},t.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+J3(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},t.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+J3(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?Ky(this._tTime,s)+1:1},t.timeScale=function(i,r){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?eT(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-1e-8?0:this._rts,this.totalTime(jx(-Math.abs(this._delay),this._tDur,s),r!==!1),vM(this),lJ(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Qy(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ma&&(this._tTime-=Ma)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Fc(r,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(No(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?eT(r.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=rJ);var r=Qs;return Qs=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Qs=r,this},t.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,tL(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,tL(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,r){return this.totalTime(zl(this,i),No(r))},t.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,No(r)),this._dur||(this._zTime=-1e-8),this},t.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},t.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var i=this.parent||this._dp,r=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-Ma)},t.eventCallback=function(i,r,s){var a=this.vars;return arguments.length>1?(r?(a[i]=r,s&&(a[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=r)):delete a[i],this):a[i]},t.then=function(i){var r=this;return new Promise(function(s){var a=Vr(i)?i:WV,l=function(){var f=r.then;r.then=null,Vr(a)&&(a=a(r))&&(a.then||a===r)&&(r.then=f),s(a),r.then=f};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?l():r._prom=l})},t.kill=function(){f0(this)},n}();ml(mx.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Ya=function(n){PV(t,n);function t(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=No(i.sortChildren),Sr&&Fc(i.parent||Sr,Jf(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&KV(Jf(s),i.scrollTrigger),s}var e=t.prototype;return e.to=function(r,s,a){return I0(0,arguments,this),this},e.from=function(r,s,a){return I0(1,arguments,this),this},e.fromTo=function(r,s,a,l){return I0(2,arguments,this),this},e.set=function(r,s,a){return s.duration=0,s.parent=this,N0(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new os(r,s,zl(this,a),1),this},e.call=function(r,s,a){return Fc(this,os.delayedCall(0,r,s),a)},e.staggerTo=function(r,s,a,l,c,f,m){return a.duration=s,a.stagger=a.stagger||l,a.onComplete=f,a.onCompleteParams=m,a.parent=this,new os(r,a,zl(this,c)),this},e.staggerFrom=function(r,s,a,l,c,f,m){return a.runBackwards=1,N0(a).immediateRender=No(a.immediateRender),this.staggerTo(r,s,a,l,c,f,m)},e.staggerFromTo=function(r,s,a,l,c,f,m,g){return l.startAt=a,N0(l).immediateRender=No(l.immediateRender),this.staggerTo(r,s,l,c,f,m,g)},e.render=function(r,s,a){var l=this._time,c=this._dirty?this.totalDuration():this._tDur,f=this._dur,m=r<=0?0:ls(r),g=this._zTime<0!=r<0&&(this._initted||!f),y,v,S,E,T,x,R,D,O,N,B,L;if(this!==Sr&&m>c&&r>=0&&(m=c),m!==this._tTime||a||g){if(l!==this._time&&f&&(m+=this._time-l,r+=this._time-l),y=m,O=this._start,D=this._ts,x=!D,g&&(f||(l=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(B=this._yoyo,T=f+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(T*100+r,s,a);if(y=ls(m%T),m===c?(E=this._repeat,y=f):(N=ls(m/T),E=~~N,E&&E===N&&(y=f,E--),y>f&&(y=f)),N=Ky(this._tTime,T),!l&&this._tTime&&N!==E&&this._tTime-N*T-this._dur<=0&&(N=E),B&&E&1&&(y=f-y,L=1),E!==N&&!this._lock){var U=B&&N&1,I=U===(B&&E&1);if(E<N&&(U=!U),l=U?0:m%f?f:m,this._lock=1,this.render(l||(L?0:ls(E*T)),s,!f)._lock=0,this._tTime=m,!s&&this.parent&&ul(this,"onRepeat"),this.vars.repeatRefresh&&!L&&(this.invalidate()._lock=1),l&&l!==this._time||x!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(f=this._dur,c=this._tDur,I&&(this._lock=2,l=U?f:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!L&&this.invalidate()),this._lock=0,!this._ts&&!x)return this;fF(this,L)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(R=hJ(this,ls(l),ls(y)),R&&(m-=y-(y=R._start))),this._tTime=m,this._time=y,this._act=!D,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,l=0),!l&&y&&!s&&!E&&(ul(this,"onStart"),this._tTime!==m))return this;if(y>=l&&r>=0)for(v=this._first;v;){if(S=v._next,(v._act||y>=v._start)&&v._ts&&R!==v){if(v.parent!==this)return this.render(r,s,a);if(v.render(v._ts>0?(y-v._start)*v._ts:(v._dirty?v.totalDuration():v._tDur)+(y-v._start)*v._ts,s,a),y!==this._time||!this._ts&&!x){R=0,S&&(m+=this._zTime=-1e-8);break}}v=S}else{v=this._last;for(var w=r<0?r:y;v;){if(S=v._prev,(v._act||w<=v._end)&&v._ts&&R!==v){if(v.parent!==this)return this.render(r,s,a);if(v.render(v._ts>0?(w-v._start)*v._ts:(v._dirty?v.totalDuration():v._tDur)+(w-v._start)*v._ts,s,a||Qs&&(v._initted||v._startAt)),y!==this._time||!this._ts&&!x){R=0,S&&(m+=this._zTime=w?-1e-8:Ma);break}}v=S}}if(R&&!s&&(this.pause(),R.render(y>=l?0:-1e-8)._zTime=y>=l?1:-1,this._ts))return this._start=O,vM(this),this.render(r,s,a);this._onUpdate&&!s&&ul(this,"onUpdate",!0),(m===c&&this._tTime>=this.totalDuration()||!m&&l)&&(O===this._start||Math.abs(D)!==Math.abs(this._ts))&&(this._lock||((r||!f)&&(m===c&&this._ts>0||!m&&this._ts<0)&&Vd(this,1),!s&&!(r<0&&!l)&&(m||l||!c)&&(ul(this,m===c&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(m<c&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(r,s){var a=this;if(mh(s)||(s=zl(this,s,r)),!(r instanceof mx)){if(Aa(r))return r.forEach(function(l){return a.add(l,s)}),this;if(Ps(r))return this.addLabel(r,s);if(Vr(r))r=os.delayedCall(0,r);else return this}return this!==r?Fc(this,r,s):this},e.getChildren=function(r,s,a,l){r===void 0&&(r=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),l===void 0&&(l=-1e8);for(var c=[],f=this._first;f;)f._start>=l&&(f instanceof os?s&&c.push(f):(a&&c.push(f),r&&c.push.apply(c,f.getChildren(!0,s,a)))),f=f._next;return c},e.getById=function(r){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===r)return s[a]},e.remove=function(r){return Ps(r)?this.removeLabel(r):Vr(r)?this.killTweensOf(r):(r.parent===this&&_M(this,r),r===this._recent&&(this._recent=this._last),Am(this))},e.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ls(ol.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},e.addLabel=function(r,s){return this.labels[r]=zl(this,s),this},e.removeLabel=function(r){return delete this.labels[r],this},e.addPause=function(r,s,a){var l=os.delayedCall(0,s||hx,a);return l.data="isPause",this._hasPause=1,Fc(this,l,zl(this,r))},e.removePause=function(r){var s=this._first;for(r=zl(this,r);s;)s._start===r&&s.data==="isPause"&&Vd(s),s=s._next},e.killTweensOf=function(r,s,a){for(var l=this.getTweensOf(r,a),c=l.length;c--;)Ad!==l[c]&&l[c].kill(r,s);return this},e.getTweensOf=function(r,s){for(var a=[],l=Gl(r),c=this._first,f=mh(s),m;c;)c instanceof os?sJ(c._targets,l)&&(f?(!Ad||c._initted&&c._ts)&&c.globalTime(0)<=s&&c.globalTime(c.totalDuration())>s:!s||c.isActive())&&a.push(c):(m=c.getTweensOf(l,s)).length&&a.push.apply(a,m),c=c._next;return a},e.tweenTo=function(r,s){s=s||{};var a=this,l=zl(a,r),c=s,f=c.startAt,m=c.onStart,g=c.onStartParams,y=c.immediateRender,v,S=os.to(a,ml({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:s.duration||Math.abs((l-(f&&"time"in f?f.time:a._time))/a.timeScale())||Ma,onStart:function(){if(a.pause(),!v){var T=s.duration||Math.abs((l-(f&&"time"in f?f.time:a._time))/a.timeScale());S._dur!==T&&Zy(S,T,0,1).render(S._time,!0,!0),v=1}m&&m.apply(S,g||[])}},s));return y?S.render(0):S},e.tweenFromTo=function(r,s,a){return this.tweenTo(s,ml({startAt:{time:zl(this,r)}},a))},e.recent=function(){return this._recent},e.nextLabel=function(r){return r===void 0&&(r=this._time),eL(this,zl(this,r))},e.previousLabel=function(r){return r===void 0&&(r=this._time),eL(this,zl(this,r),1)},e.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Ma)},e.shiftChildren=function(r,s,a){a===void 0&&(a=0);for(var l=this._first,c=this.labels,f;l;)l._start>=a&&(l._start+=r,l._end+=r),l=l._next;if(s)for(f in c)c[f]>=a&&(c[f]+=r);return Am(this)},e.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},e.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Am(this)},e.totalDuration=function(r){var s=0,a=this,l=a._last,c=$c,f,m,g;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-r:r));if(a._dirty){for(g=a.parent;l;)f=l._prev,l._dirty&&l.totalDuration(),m=l._start,m>c&&a._sort&&l._ts&&!a._lock?(a._lock=1,Fc(a,l,m-l._delay,1)._lock=0):c=m,m<0&&l._ts&&(s-=m,(!g&&!a._dp||g&&g.smoothChildTiming)&&(a._start+=m/a._ts,a._time-=m,a._tTime-=m),a.shiftChildren(-m,!1,-1/0),c=0),l._end>s&&l._ts&&(s=l._end),l=f;Zy(a,a===Sr&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},t.updateRoot=function(r){if(Sr._ts&&(jV(Sr,eT(r,Sr)),GV=ol.frame),ol.frame>=Z3){Z3+=fl.autoSleep||120;var s=Sr._first;if((!s||!s._ts)&&fl.autoSleep&&ol._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||ol.sleep()}}},t}(mx);ml(Ya.prototype,{_lock:0,_hasPause:0,_forcing:0});var CJ=function(t,e,i,r,s,a,l){var c=new Po(this._pt,t,e,0,1,vF,null,s),f=0,m=0,g,y,v,S,E,T,x,R;for(c.b=i,c.e=r,i+="",r+="",(x=~r.indexOf("random("))&&(r=dx(r)),a&&(R=[i,r],a(R,t,e),i=R[0],r=R[1]),y=i.match(hC)||[];g=hC.exec(r);)S=g[0],E=r.substring(f,g.index),v?v=(v+1)%5:E.substr(-5)==="rgba("&&(v=1),S!==y[m++]&&(T=parseFloat(y[m-1])||0,c._pt={_next:c._pt,p:E||m===1?E:",",s:T,c:S.charAt(1)==="="?Iy(T,S)-T:parseFloat(S)-T,m:v&&v<4?Math.round:0},f=hC.lastIndex);return c.c=f<r.length?r.substring(f,r.length):"",c.fp=l,(BV.test(r)||x)&&(c.e=0),this._pt=c,c},BO=function(t,e,i,r,s,a,l,c,f,m){Vr(r)&&(r=r(s||0,t,a));var g=t[e],y=i!=="get"?i:Vr(g)?f?t[e.indexOf("set")||!Vr(t["get"+e.substr(3)])?e:"get"+e.substr(3)](f):t[e]():g,v=Vr(g)?f?IJ:yF:FO,S;if(Ps(r)&&(~r.indexOf("random(")&&(r=dx(r)),r.charAt(1)==="="&&(S=Iy(y,r)+(Ea(y)||0),(S||S===0)&&(r=S))),!m||y!==r||PR)return!isNaN(y*r)&&r!==""?(S=new Po(this._pt,t,e,+y||0,r-(y||0),typeof g=="boolean"?LJ:_F,0,v),f&&(S.fp=f),l&&S.modifier(l,this,t),this._pt=S):(!g&&!(e in t)&&PO(e,r),CJ.call(this,t,e,y,r,v,c||fl.stringFilter,f))},RJ=function(t,e,i,r,s){if(Vr(t)&&(t=P0(t,s,e,i,r)),!ef(t)||t.style&&t.nodeType||Aa(t)||UV(t))return Ps(t)?P0(t,s,e,i,r):t;var a={},l;for(l in t)a[l]=P0(t[l],s,e,i,r);return a},pF=function(t,e,i,r,s,a){var l,c,f,m;if(al[t]&&(l=new al[t]).init(s,l.rawVars?e[t]:RJ(e[t],r,s,a,i),i,r,a)!==!1&&(i._pt=c=new Po(i._pt,s,t,0,1,l.render,l,0,l.priority),i!==Dy))for(f=i._ptLookup[i._targets.indexOf(s)],m=l._props.length;m--;)f[l._props[m]]=c;return l},Ad,PR,VO=function n(t,e,i){var r=t.vars,s=r.ease,a=r.startAt,l=r.immediateRender,c=r.lazy,f=r.onUpdate,m=r.runBackwards,g=r.yoyoEase,y=r.keyframes,v=r.autoRevert,S=t._dur,E=t._startAt,T=t._targets,x=t.parent,R=x&&x.data==="nested"?x.vars.targets:T,D=t._overwrite==="auto"&&!OO,O=t.timeline,N,B,L,U,I,w,V,G,k,st,it,Y,Z;if(O&&(!y||!s)&&(s="none"),t._ease=wm(s,Yy.ease),t._yEase=g?cF(wm(g===!0?s:g,Yy.ease)):0,g&&t._yoyo&&!t._repeat&&(g=t._yEase,t._yEase=t._ease,t._ease=g),t._from=!O&&!!r.runBackwards,!O||y&&!r.stagger){if(G=T[0]?Mm(T[0]).harness:0,Y=G&&r[G.prop],N=tT(r,LO),E&&(E._zTime<0&&E.progress(1),e<0&&m&&l&&!v?E.render(-1,!0):E.revert(m&&S?GE:iJ),E._lazy=0),a){if(Vd(t._startAt=os.set(T,ml({data:"isStart",overwrite:!1,parent:x,immediateRender:!0,lazy:!E&&No(c),startAt:null,delay:0,onUpdate:f&&function(){return ul(t,"onUpdate")},stagger:0},a))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(Qs||!l&&!v)&&t._startAt.revert(GE),l&&S&&e<=0&&i<=0){e&&(t._zTime=e);return}}else if(m&&S&&!E){if(e&&(l=!1),L=ml({overwrite:!1,data:"isFromStart",lazy:l&&!E&&No(c),immediateRender:l,stagger:0,parent:x},N),Y&&(L[G.prop]=Y),Vd(t._startAt=os.set(T,L)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(Qs?t._startAt.revert(GE):t._startAt.render(-1,!0)),t._zTime=e,!l)n(t._startAt,Ma,Ma);else if(!e)return}for(t._pt=t._ptCache=0,c=S&&No(c)||c&&!S,B=0;B<T.length;B++){if(I=T[B],V=I._gsap||zO(T)[B]._gsap,t._ptLookup[B]=st={},CR[V.id]&&Od.length&&J1(),it=R===T?B:R.indexOf(I),G&&(k=new G).init(I,Y||N,t,it,R)!==!1&&(t._pt=U=new Po(t._pt,I,k.name,0,1,k.render,k,0,k.priority),k._props.forEach(function(at){st[at]=U}),k.priority&&(w=1)),!G||Y)for(L in N)al[L]&&(k=pF(L,N,t,it,I,R))?k.priority&&(w=1):st[L]=U=BO.call(t,I,L,"get",N[L],it,R,0,r.stringFilter);t._op&&t._op[B]&&t.kill(I,t._op[B]),D&&t._pt&&(Ad=t,Sr.killTweensOf(I,st,t.globalTime(e)),Z=!t.parent,Ad=0),t._pt&&c&&(CR[V.id]=1)}w&&xF(t),t._onInit&&t._onInit(t)}t._onUpdate=f,t._initted=(!t._op||t._pt)&&!Z,y&&e<=0&&O.render($c,!0,!0)},OJ=function(t,e,i,r,s,a,l,c){var f=(t._pt&&t._ptCache||(t._ptCache={}))[e],m,g,y,v;if(!f)for(f=t._ptCache[e]=[],y=t._ptLookup,v=t._targets.length;v--;){if(m=y[v][e],m&&m.d&&m.d._pt)for(m=m.d._pt;m&&m.p!==e&&m.fp!==e;)m=m._next;if(!m)return PR=1,t.vars[e]="+=0",VO(t,l),PR=0,c?fx(e+" not eligible for reset"):1;f.push(m)}for(v=f.length;v--;)g=f[v],m=g._pt||g,m.s=(r||r===0)&&!s?r:m.s+(r||0)+a*m.c,m.c=i-m.s,g.e&&(g.e=Xr(i)+Ea(g.e)),g.b&&(g.b=m.s+Ea(g.b))},DJ=function(t,e){var i=t[0]?Mm(t[0]).harness:0,r=i&&i.aliases,s,a,l,c;if(!r)return e;s=$y({},e);for(a in r)if(a in s)for(c=r[a].split(","),l=c.length;l--;)s[c[l]]=s[a];return s},NJ=function(t,e,i,r){var s=e.ease||r||"power1.inOut",a,l;if(Aa(e))l=i[t]||(i[t]=[]),e.forEach(function(c,f){return l.push({t:f/(e.length-1)*100,v:c,e:s})});else for(a in e)l=i[a]||(i[a]=[]),a==="ease"||l.push({t:parseFloat(t),v:e[a],e:s})},P0=function(t,e,i,r,s){return Vr(t)?t.call(e,i,r,s):Ps(t)&&~t.indexOf("random(")?dx(t):t},mF=UO+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",gF={};Io(mF+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return gF[n]=1});var os=function(n){PV(t,n);function t(i,r,s,a){var l;typeof r=="number"&&(s.duration=r,r=s,s=null),l=n.call(this,a?r:N0(r))||this;var c=l.vars,f=c.duration,m=c.delay,g=c.immediateRender,y=c.stagger,v=c.overwrite,S=c.keyframes,E=c.defaults,T=c.scrollTrigger,x=c.yoyoEase,R=r.parent||Sr,D=(Aa(i)||UV(i)?mh(i[0]):"length"in r)?[i]:Gl(i),O,N,B,L,U,I,w,V;if(l._targets=D.length?zO(D):fx("GSAP target "+i+" not found. https://gsap.com",!fl.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=v,S||y||TE(f)||TE(m)){if(r=l.vars,O=l.timeline=new Ya({data:"nested",defaults:E||{},targets:R&&R.data==="nested"?R.vars.targets:D}),O.kill(),O.parent=O._dp=Jf(l),O._start=0,y||TE(f)||TE(m)){if(L=D.length,w=y&&tF(y),ef(y))for(U in y)~mF.indexOf(U)&&(V||(V={}),V[U]=y[U]);for(N=0;N<L;N++)B=tT(r,gF),B.stagger=0,x&&(B.yoyoEase=x),V&&$y(B,V),I=D[N],B.duration=+P0(f,Jf(l),N,I,D),B.delay=(+P0(m,Jf(l),N,I,D)||0)-l._delay,!y&&L===1&&B.delay&&(l._delay=m=B.delay,l._start+=m,B.delay=0),O.to(I,B,w?w(N,I,D):0),O._ease=Wn.none;O.duration()?f=m=0:l.timeline=0}else if(S){N0(ml(O.vars.defaults,{ease:"none"})),O._ease=wm(S.ease||r.ease||"none");var G=0,k,st,it;if(Aa(S))S.forEach(function(Y){return O.to(D,Y,">")}),O.duration();else{B={};for(U in S)U==="ease"||U==="easeEach"||NJ(U,S[U],B,S.easeEach);for(U in B)for(k=B[U].sort(function(Y,Z){return Y.t-Z.t}),G=0,N=0;N<k.length;N++)st=k[N],it={ease:st.e,duration:(st.t-(N?k[N-1].t:0))/100*f},it[U]=st.v,O.to(D,it,G),G+=it.duration;O.duration()<f&&O.to({},{duration:f-O.duration()})}}f||l.duration(f=O.duration())}else l.timeline=0;return v===!0&&!OO&&(Ad=Jf(l),Sr.killTweensOf(D),Ad=0),Fc(R,Jf(l),s),r.reversed&&l.reverse(),r.paused&&l.paused(!0),(g||!f&&!S&&l._start===ls(R._time)&&No(g)&&uJ(Jf(l))&&R.data!=="nested")&&(l._tTime=-1e-8,l.render(Math.max(0,-m)||0)),T&&KV(Jf(l),T),l}var e=t.prototype;return e.render=function(r,s,a){var l=this._time,c=this._tDur,f=this._dur,m=r<0,g=r>c-Ma&&!m?c:r<Ma?0:r,y,v,S,E,T,x,R,D,O;if(!f)fJ(this,r,s,a);else if(g!==this._tTime||!r||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m||this._lazy){if(y=g,D=this.timeline,this._repeat){if(E=f+this._rDelay,this._repeat<-1&&m)return this.totalTime(E*100+r,s,a);if(y=ls(g%E),g===c?(S=this._repeat,y=f):(T=ls(g/E),S=~~T,S&&S===T?(y=f,S--):y>f&&(y=f)),x=this._yoyo&&S&1,x&&(O=this._yEase,y=f-y),T=Ky(this._tTime,E),y===l&&!a&&this._initted&&S===T)return this._tTime=g,this;S!==T&&(D&&this._yEase&&fF(D,x),this.vars.repeatRefresh&&!x&&!this._lock&&y!==E&&this._initted&&(this._lock=a=1,this.render(ls(E*S),!0).invalidate()._lock=0))}if(!this._initted){if(ZV(this,m?r:y,a,s,g))return this._tTime=0,this;if(l!==this._time&&!(a&&this.vars.repeatRefresh&&S!==T))return this;if(f!==this._dur)return this.render(r,s,a)}if(this._tTime=g,this._time=y,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=R=(O||this._ease)(y/f),this._from&&(this.ratio=R=1-R),y&&!l&&!s&&!S&&(ul(this,"onStart"),this._tTime!==g))return this;for(v=this._pt;v;)v.r(R,v.d),v=v._next;D&&D.render(r<0?r:D._dur*D._ease(y/this._dur),s,a)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(m&&RR(this,r,s,a),ul(this,"onUpdate")),this._repeat&&S!==T&&this.vars.onRepeat&&!s&&this.parent&&ul(this,"onRepeat"),(g===this._tDur||!g)&&this._tTime===g&&(m&&!this._onUpdate&&RR(this,r,!0,!0),(r||!f)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&Vd(this,1),!s&&!(m&&!l)&&(g||l||x)&&(ul(this,g===c?"onComplete":"onReverseComplete",!0),this._prom&&!(g<c&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},e.resetTo=function(r,s,a,l,c){px||ol.wake(),this._ts||this.play();var f=Math.min(this._dur,(this._dp._time-this._start)*this._ts),m;return this._initted||VO(this,f),m=this._ease(f/this._dur),OJ(this,r,s,a,l,m,f,c)?this.resetTo(r,s,a,l,1):(xM(this,0),this.parent||YV(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?f0(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Qs),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,Ad&&Ad.vars.overwrite!==!0)._first||f0(this),this.parent&&a!==this.timeline.totalDuration()&&Zy(this,this._dur*this.timeline._tDur/a,0,1),this}var l=this._targets,c=r?Gl(r):l,f=this._ptLookup,m=this._pt,g,y,v,S,E,T,x;if((!s||s==="all")&&oJ(l,c))return s==="all"&&(this._pt=0),f0(this);for(g=this._op=this._op||[],s!=="all"&&(Ps(s)&&(E={},Io(s,function(R){return E[R]=1}),s=E),s=DJ(l,s)),x=l.length;x--;)if(~c.indexOf(l[x])){y=f[x],s==="all"?(g[x]=s,S=y,v={}):(v=g[x]=g[x]||{},S=s);for(E in S)T=y&&y[E],T&&((!("kill"in T.d)||T.d.kill(E)===!0)&&_M(this,T,"_pt"),delete y[E]),v!=="all"&&(v[E]=1)}return this._initted&&!this._pt&&m&&f0(this),this},t.to=function(r,s){return new t(r,s,arguments[2])},t.from=function(r,s){return I0(1,arguments)},t.delayedCall=function(r,s,a,l){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:l})},t.fromTo=function(r,s,a){return I0(2,arguments)},t.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(r,s)},t.killTweensOf=function(r,s,a){return Sr.killTweensOf(r,s,a)},t}(mx);ml(os.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Io("staggerTo,staggerFrom,staggerFromTo",function(n){os[n]=function(){var t=new Ya,e=DR.call(arguments,0);return e.splice(n==="staggerFromTo"?5:4,0,0),t[n].apply(t,e)}});var FO=function(t,e,i){return t[e]=i},yF=function(t,e,i){return t[e](i)},IJ=function(t,e,i,r){return t[e](r.fp,i)},PJ=function(t,e,i){return t.setAttribute(e,i)},kO=function(t,e){return Vr(t[e])?yF:DO(t[e])&&t.setAttribute?PJ:FO},_F=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},LJ=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},vF=function(t,e){var i=e._pt,r="";if(!t&&e.b)r=e.b;else if(t===1&&e.e)r=e.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+r,i=i._next;r+=e.c}e.set(e.t,e.p,r,e)},HO=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},UJ=function(t,e,i,r){for(var s=this._pt,a;s;)a=s._next,s.p===r&&s.modifier(t,e,i),s=a},zJ=function(t){for(var e=this._pt,i,r;e;)r=e._next,e.p===t&&!e.op||e.op===t?_M(this,e,"_pt"):e.dep||(i=1),e=r;return!i},BJ=function(t,e,i,r){r.mSet(t,e,r.m.call(r.tween,i,r.mt),r)},xF=function(t){for(var e=t._pt,i,r,s,a;e;){for(i=e._next,r=s;r&&r.pr>e.pr;)r=r._next;(e._prev=r?r._prev:a)?e._prev._next=e:s=e,(e._next=r)?r._prev=e:a=e,e=i}t._pt=s},Po=function(){function n(e,i,r,s,a,l,c,f,m){this.t=i,this.s=s,this.c=a,this.p=r,this.r=l||_F,this.d=c||this,this.set=f||FO,this.pr=m||0,this._next=e,e&&(e._prev=this)}var t=n.prototype;return t.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=BJ,this.m=i,this.mt=s,this.tween=r},n}();Io(UO+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return LO[n]=1});pl.TweenMax=pl.TweenLite=os;pl.TimelineLite=pl.TimelineMax=Ya;Sr=new Ya({sortChildren:!1,defaults:Yy,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});fl.stringFilter=uF;var Cm=[],jE={},VJ=[],iL=0,FJ=0,yC=function(t){return(jE[t]||VJ).map(function(e){return e()})},LR=function(){var t=Date.now(),e=[];t-iL>2&&(yC("matchMediaInit"),Cm.forEach(function(i){var r=i.queries,s=i.conditions,a,l,c,f;for(l in r)a=Lc.matchMedia(r[l]).matches,a&&(c=1),a!==s[l]&&(s[l]=a,f=1);f&&(i.revert(),c&&e.push(i))}),yC("matchMediaRevert"),e.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),iL=t,yC("matchMedia"))},bF=function(){function n(e,i){this.selector=i&&NR(i),this.data=[],this._r=[],this.isReverted=!1,this.id=FJ++,e&&this.add(e)}var t=n.prototype;return t.add=function(i,r,s){Vr(i)&&(s=r,r=i,i=Vr);var a=this,l=function(){var f=ar,m=a.selector,g;return f&&f!==a&&f.data.push(a),s&&(a.selector=NR(s)),ar=a,g=r.apply(a,arguments),Vr(g)&&a._r.push(g),ar=f,a.selector=m,a.isReverted=!1,g};return a.last=l,i===Vr?l(a,function(c){return a.add(null,c)}):i?a[i]=l:l},t.ignore=function(i){var r=ar;ar=null,i(this),ar=r},t.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof os&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,r){var s=this;if(i?function(){for(var l=s.getTweens(),c=s.data.length,f;c--;)f=s.data[c],f.data==="isFlip"&&(f.revert(),f.getChildren(!0,!0,!1).forEach(function(m){return l.splice(l.indexOf(m),1)}));for(l.map(function(m){return{g:m._dur||m._delay||m._sat&&!m._sat.vars.immediateRender?m.globalTime(0):-1/0,t:m}}).sort(function(m,g){return g.g-m.g||-1/0}).forEach(function(m){return m.t.revert(i)}),c=s.data.length;c--;)f=s.data[c],f instanceof Ya?f.data!=="nested"&&(f.scrollTrigger&&f.scrollTrigger.revert(),f.kill()):!(f instanceof os)&&f.revert&&f.revert(i);s._r.forEach(function(m){return m(i,s)}),s.isReverted=!0}():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),r)for(var a=Cm.length;a--;)Cm[a].id===this.id&&Cm.splice(a,1)},t.revert=function(i){this.kill(i||{})},n}(),kJ=function(){function n(e){this.contexts=[],this.scope=e,ar&&ar.data.push(this)}var t=n.prototype;return t.add=function(i,r,s){ef(i)||(i={matches:i});var a=new bF(0,s||this.scope),l=a.conditions={},c,f,m;ar&&!a.selector&&(a.selector=ar.selector),this.contexts.push(a),r=a.add("onMatch",r),a.queries=i;for(f in i)f==="all"?m=1:(c=Lc.matchMedia(i[f]),c&&(Cm.indexOf(a)<0&&Cm.push(a),(l[f]=c.matches)&&(m=1),c.addListener?c.addListener(LR):c.addEventListener("change",LR)));return m&&r(a,function(g){return a.add(null,g)}),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),nT={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(r){return aF(r)})},timeline:function(t){return new Ya(t)},getTweensOf:function(t,e){return Sr.getTweensOf(t,e)},getProperty:function(t,e,i,r){Ps(t)&&(t=Gl(t)[0]);var s=Mm(t||{}).get,a=i?WV:XV;return i==="native"&&(i=""),t&&(e?a((al[e]&&al[e].get||s)(t,e,i,r)):function(l,c,f){return a((al[l]&&al[l].get||s)(t,l,c,f))})},quickSetter:function(t,e,i){if(t=Gl(t),t.length>1){var r=t.map(function(m){return Uo.quickSetter(m,e,i)}),s=r.length;return function(m){for(var g=s;g--;)r[g](m)}}t=t[0]||{};var a=al[e],l=Mm(t),c=l.harness&&(l.harness.aliases||{})[e]||e,f=a?function(m){var g=new a;Dy._pt=0,g.init(t,i?m+i:m,Dy,0,[t]),g.render(1,g),Dy._pt&&HO(1,Dy)}:l.set(t,c);return a?f:function(m){return f(t,c,i?m+i:m,l,1)}},quickTo:function(t,e,i){var r,s=Uo.to(t,ml((r={},r[e]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),a=function(c,f,m){return s.resetTo(e,c,f,m)};return a.tween=s,a},isTweening:function(t){return Sr.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=wm(t.ease,Yy.ease)),Q3(Yy,t||{})},config:function(t){return Q3(fl,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,r=t.plugins,s=t.defaults,a=t.extendTimeline;(r||"").split(",").forEach(function(l){return l&&!al[l]&&!pl[l]&&fx(e+" effect requires "+l+" plugin.")}),dC[e]=function(l,c,f){return i(Gl(l),ml(c||{},s),f)},a&&(Ya.prototype[e]=function(l,c,f){return this.add(dC[e](l,ef(c)?c:(f=c)&&{},this),f)})},registerEase:function(t,e){Wn[t]=wm(e)},parseEase:function(t,e){return arguments.length?wm(t,e):Wn},getById:function(t){return Sr.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var i=new Ya(t),r,s;for(i.smoothChildTiming=No(t.smoothChildTiming),Sr.remove(i),i._dp=0,i._time=i._tTime=Sr._time,r=Sr._first;r;)s=r._next,(e||!(!r._dur&&r instanceof os&&r.vars.onComplete===r._targets[0]))&&Fc(i,r,r._start-r._delay),r=s;return Fc(Sr,i,0),i},context:function(t,e){return t?new bF(t,e):ar},matchMedia:function(t){return new kJ(t)},matchMediaRefresh:function(){return Cm.forEach(function(t){var e=t.conditions,i,r;for(r in e)e[r]&&(e[r]=!1,i=1);i&&t.revert()})||LR()},addEventListener:function(t,e){var i=jE[t]||(jE[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=jE[t],r=i&&i.indexOf(e);r>=0&&i.splice(r,1)},utils:{wrap:vJ,wrapYoyo:xJ,distribute:tF,random:nF,snap:eF,normalize:_J,getUnit:Ea,clamp:pJ,splitColor:oF,toArray:Gl,selector:NR,mapRange:rF,pipe:gJ,unitize:yJ,interpolate:bJ,shuffle:JV},install:kV,effects:dC,ticker:ol,updateRoot:Ya.updateRoot,plugins:al,globalTimeline:Sr,core:{PropTween:Po,globals:HV,Tween:os,Timeline:Ya,Animation:mx,getCache:Mm,_removeLinkedListItem:_M,reverting:function(){return Qs},context:function(t){return t&&ar&&(ar.data.push(t),t._ctx=ar),ar},suppressOverwrites:function(t){return OO=t}}};Io("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return nT[n]=os[n]});ol.add(Ya.updateRoot);Dy=nT.to({},{duration:0});var HJ=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},GJ=function(t,e){var i=t._targets,r,s,a;for(r in e)for(s=i.length;s--;)a=t._ptLookup[s][r],a&&(a=a.d)&&(a._pt&&(a=HJ(a,r)),a&&a.modifier&&a.modifier(e[r],t,i[s],r))},_C=function(t,e){return{name:t,rawVars:1,init:function(r,s,a){a._onInit=function(l){var c,f;if(Ps(s)&&(c={},Io(s,function(m){return c[m]=1}),s=c),e){c={};for(f in s)c[f]=e(s[f]);s=c}GJ(l,s)}}}},Uo=nT.registerPlugin({name:"attr",init:function(t,e,i,r,s){var a,l,c;this.tween=i;for(a in e)c=t.getAttribute(a)||"",l=this.add(t,"setAttribute",(c||0)+"",e[a],r,s,0,0,a),l.op=a,l.b=c,this._props.push(a)},render:function(t,e){for(var i=e._pt;i;)Qs?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},_C("roundProps",IR),_C("modifiers"),_C("snap",eF))||nT;os.version=Ya.version=Uo.version="3.12.7";FV=1;NO()&&Qy();Wn.Power0;Wn.Power1;Wn.Power2;Wn.Power3;Wn.Power4;Wn.Linear;Wn.Quad;Wn.Cubic;Wn.Quart;Wn.Quint;Wn.Strong;Wn.Elastic;Wn.Back;Wn.SteppedEase;Wn.Bounce;Wn.Sine;Wn.Expo;Wn.Circ;/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var rL,wd,Py,GO,ym,sL,qO,qJ=function(){return typeof window<"u"},gh={},um=180/Math.PI,Ly=Math.PI/180,dy=Math.atan2,aL=1e8,jO=/([A-Z])/g,jJ=/(left|right|width|margin|padding|x)/i,XJ=/[\s,\(]\S/,qc={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},UR=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},WJ=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},YJ=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},$J=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},SF=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},EF=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},KJ=function(t,e,i){return t.style[e]=i},ZJ=function(t,e,i){return t.style.setProperty(e,i)},QJ=function(t,e,i){return t._gsap[e]=i},JJ=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},ttt=function(t,e,i,r,s){var a=t._gsap;a.scaleX=a.scaleY=i,a.renderTransform(s,a)},ett=function(t,e,i,r,s){var a=t._gsap;a[e]=i,a.renderTransform(s,a)},Tr="transform",Lo=Tr+"Origin",ntt=function n(t,e){var i=this,r=this.target,s=r.style,a=r._gsap;if(t in gh&&s){if(this.tfm=this.tfm||{},t!=="transform")t=qc[t]||t,~t.indexOf(",")?t.split(",").forEach(function(l){return i.tfm[l]=eh(r,l)}):this.tfm[t]=a.x?a[t]:eh(r,t),t===Lo&&(this.tfm.zOrigin=a.zOrigin);else return qc.transform.split(",").forEach(function(l){return n.call(i,l,e)});if(this.props.indexOf(Tr)>=0)return;a.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Lo,e,"")),t=Tr}(s||e)&&this.props.push(t,e,s[t])},TF=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},itt=function(){var t=this.props,e=this.target,i=e.style,r=e._gsap,s,a;for(s=0;s<t.length;s+=3)t[s+1]?t[s+1]===2?e[t[s]](t[s+2]):e[t[s]]=t[s+2]:t[s+2]?i[t[s]]=t[s+2]:i.removeProperty(t[s].substr(0,2)==="--"?t[s]:t[s].replace(jO,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)r[a]=this.tfm[a];r.svg&&(r.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),s=qO(),(!s||!s.isStart)&&!i[Tr]&&(TF(i),r.zOrigin&&i[Lo]&&(i[Lo]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},MF=function(t,e){var i={target:t,props:[],revert:itt,save:ntt};return t._gsap||Uo.core.getCache(t),e&&t.style&&t.nodeType&&e.split(",").forEach(function(r){return i.save(r)}),i},AF,zR=function(t,e){var i=wd.createElementNS?wd.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):wd.createElement(t);return i&&i.style?i:wd.createElement(t)},Kc=function n(t,e,i){var r=getComputedStyle(t);return r[e]||r.getPropertyValue(e.replace(jO,"-$1").toLowerCase())||r.getPropertyValue(e)||!i&&n(t,Jy(e)||e,1)||""},oL="O,Moz,ms,Ms,Webkit".split(","),Jy=function(t,e,i){var r=e||ym,s=r.style,a=5;if(t in s&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);a--&&!(oL[a]+t in s););return a<0?null:(a===3?"ms":a>=0?oL[a]:"")+t},BR=function(){qJ()&&window.document&&(rL=window,wd=rL.document,Py=wd.documentElement,ym=zR("div")||{style:{}},zR("div"),Tr=Jy(Tr),Lo=Tr+"Origin",ym.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",AF=!!Jy("perspective"),qO=Uo.core.reverting,GO=1)},lL=function(t){var e=t.ownerSVGElement,i=zR("svg",e&&e.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=t.cloneNode(!0),s;r.style.display="block",i.appendChild(r),Py.appendChild(i);try{s=r.getBBox()}catch{}return i.removeChild(r),Py.removeChild(i),s},uL=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},wF=function(t){var e,i;try{e=t.getBBox()}catch{e=lL(t),i=1}return e&&(e.width||e.height)||i||(e=lL(t)),e&&!e.width&&!e.x&&!e.y?{x:+uL(t,["x","cx","x1"])||0,y:+uL(t,["y","cy","y1"])||0,width:0,height:0}:e},CF=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&wF(t))},zm=function(t,e){if(e){var i=t.style,r;e in gh&&e!==Lo&&(e=Tr),i.removeProperty?(r=e.substr(0,2),(r==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),i.removeProperty(r==="--"?e:e.replace(jO,"-$1").toLowerCase())):i.removeAttribute(e)}},Cd=function(t,e,i,r,s,a){var l=new Po(t._pt,e,i,0,1,a?EF:SF);return t._pt=l,l.b=r,l.e=s,t._props.push(i),l},cL={deg:1,rad:1,turn:1},rtt={grid:1,flex:1},Fd=function n(t,e,i,r){var s=parseFloat(i)||0,a=(i+"").trim().substr((s+"").length)||"px",l=ym.style,c=jJ.test(e),f=t.tagName.toLowerCase()==="svg",m=(f?"client":"offset")+(c?"Width":"Height"),g=100,y=r==="px",v=r==="%",S,E,T,x;if(r===a||!s||cL[r]||cL[a])return s;if(a!=="px"&&!y&&(s=n(t,e,i,"px")),x=t.getCTM&&CF(t),(v||a==="%")&&(gh[e]||~e.indexOf("adius")))return S=x?t.getBBox()[c?"width":"height"]:t[m],Xr(v?s/S*g:s/100*S);if(l[c?"width":"height"]=g+(y?a:r),E=r!=="rem"&&~e.indexOf("adius")||r==="em"&&t.appendChild&&!f?t:t.parentNode,x&&(E=(t.ownerSVGElement||{}).parentNode),(!E||E===wd||!E.appendChild)&&(E=wd.body),T=E._gsap,T&&v&&T.width&&c&&T.time===ol.time&&!T.uncache)return Xr(s/T.width*g);if(v&&(e==="height"||e==="width")){var R=t.style[e];t.style[e]=g+r,S=t[m],R?t.style[e]=R:zm(t,e)}else(v||a==="%")&&!rtt[Kc(E,"display")]&&(l.position=Kc(t,"position")),E===t&&(l.position="static"),E.appendChild(ym),S=ym[m],E.removeChild(ym),l.position="absolute";return c&&v&&(T=Mm(E),T.time=ol.time,T.width=E[m]),Xr(y?S*s/g:S&&s?g/S*s:0)},eh=function(t,e,i,r){var s;return GO||BR(),e in qc&&e!=="transform"&&(e=qc[e],~e.indexOf(",")&&(e=e.split(",")[0])),gh[e]&&e!=="transform"?(s=yx(t,r),s=e!=="transformOrigin"?s[e]:s.svg?s.origin:rT(Kc(t,Lo))+" "+s.zOrigin+"px"):(s=t.style[e],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=iT[e]&&iT[e](t,e,i)||Kc(t,e)||qV(t,e)||(e==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?Fd(t,e,s,i)+i:s},stt=function(t,e,i,r){if(!i||i==="none"){var s=Jy(e,t,1),a=s&&Kc(t,s,1);a&&a!==i?(e=s,i=a):e==="borderColor"&&(i=Kc(t,"borderTopColor"))}var l=new Po(this._pt,t.style,e,0,1,vF),c=0,f=0,m,g,y,v,S,E,T,x,R,D,O,N;if(l.b=i,l.e=r,i+="",r+="",r==="auto"&&(E=t.style[e],t.style[e]=r,r=Kc(t,e)||r,E?t.style[e]=E:zm(t,e)),m=[i,r],uF(m),i=m[0],r=m[1],y=i.match(Oy)||[],N=r.match(Oy)||[],N.length){for(;g=Oy.exec(r);)T=g[0],R=r.substring(c,g.index),S?S=(S+1)%5:(R.substr(-5)==="rgba("||R.substr(-5)==="hsla(")&&(S=1),T!==(E=y[f++]||"")&&(v=parseFloat(E)||0,O=E.substr((v+"").length),T.charAt(1)==="="&&(T=Iy(v,T)+O),x=parseFloat(T),D=T.substr((x+"").length),c=Oy.lastIndex-D.length,D||(D=D||fl.units[e]||O,c===r.length&&(r+=D,l.e+=D)),O!==D&&(v=Fd(t,e,E,D)||0),l._pt={_next:l._pt,p:R||f===1?R:",",s:v,c:x-v,m:S&&S<4||e==="zIndex"?Math.round:0});l.c=c<r.length?r.substring(c,r.length):""}else l.r=e==="display"&&r==="none"?EF:SF;return BV.test(r)&&(l.e=0),this._pt=l,l},fL={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},att=function(t){var e=t.split(" "),i=e[0],r=e[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(t=i,i=r,r=t),e[0]=fL[i]||i,e[1]=fL[r]||r,e.join(" ")},ott=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i=e.t,r=i.style,s=e.u,a=i._gsap,l,c,f;if(s==="all"||s===!0)r.cssText="",c=1;else for(s=s.split(","),f=s.length;--f>-1;)l=s[f],gh[l]&&(c=1,l=l==="transformOrigin"?Lo:Tr),zm(i,l);c&&(zm(i,Tr),a&&(a.svg&&i.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",yx(i,1),a.uncache=1,TF(r)))}},iT={clearProps:function(t,e,i,r,s){if(s.data!=="isFromStart"){var a=t._pt=new Po(t._pt,e,i,0,0,ott);return a.u=r,a.pr=-10,a.tween=s,t._props.push(i),1}}},gx=[1,0,0,1,0,0],RF={},OF=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},hL=function(t){var e=Kc(t,Tr);return OF(e)?gx:e.substr(7).match(zV).map(Xr)},XO=function(t,e){var i=t._gsap||Mm(t),r=t.style,s=hL(t),a,l,c,f;return i.svg&&t.getAttribute("transform")?(c=t.transform.baseVal.consolidate().matrix,s=[c.a,c.b,c.c,c.d,c.e,c.f],s.join(",")==="1,0,0,1,0,0"?gx:s):(s===gx&&!t.offsetParent&&t!==Py&&!i.svg&&(c=r.display,r.display="block",a=t.parentNode,(!a||!t.offsetParent&&!t.getBoundingClientRect().width)&&(f=1,l=t.nextElementSibling,Py.appendChild(t)),s=hL(t),c?r.display=c:zm(t,"display"),f&&(l?a.insertBefore(t,l):a?a.appendChild(t):Py.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},VR=function(t,e,i,r,s,a){var l=t._gsap,c=s||XO(t,!0),f=l.xOrigin||0,m=l.yOrigin||0,g=l.xOffset||0,y=l.yOffset||0,v=c[0],S=c[1],E=c[2],T=c[3],x=c[4],R=c[5],D=e.split(" "),O=parseFloat(D[0])||0,N=parseFloat(D[1])||0,B,L,U,I;i?c!==gx&&(L=v*T-S*E)&&(U=O*(T/L)+N*(-E/L)+(E*R-T*x)/L,I=O*(-S/L)+N*(v/L)-(v*R-S*x)/L,O=U,N=I):(B=wF(t),O=B.x+(~D[0].indexOf("%")?O/100*B.width:O),N=B.y+(~(D[1]||D[0]).indexOf("%")?N/100*B.height:N)),r||r!==!1&&l.smooth?(x=O-f,R=N-m,l.xOffset=g+(x*v+R*E)-x,l.yOffset=y+(x*S+R*T)-R):l.xOffset=l.yOffset=0,l.xOrigin=O,l.yOrigin=N,l.smooth=!!r,l.origin=e,l.originIsAbsolute=!!i,t.style[Lo]="0px 0px",a&&(Cd(a,l,"xOrigin",f,O),Cd(a,l,"yOrigin",m,N),Cd(a,l,"xOffset",g,l.xOffset),Cd(a,l,"yOffset",y,l.yOffset)),t.setAttribute("data-svg-origin",O+" "+N)},yx=function(t,e){var i=t._gsap||new dF(t);if("x"in i&&!e&&!i.uncache)return i;var r=t.style,s=i.scaleX<0,a="px",l="deg",c=getComputedStyle(t),f=Kc(t,Lo)||"0",m,g,y,v,S,E,T,x,R,D,O,N,B,L,U,I,w,V,G,k,st,it,Y,Z,at,ct,$,pt,wt,zt,nt,lt;return m=g=y=E=T=x=R=D=O=0,v=S=1,i.svg=!!(t.getCTM&&CF(t)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(r[Tr]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[Tr]!=="none"?c[Tr]:"")),r.scale=r.rotate=r.translate="none"),L=XO(t,i.svg),i.svg&&(i.uncache?(at=t.getBBox(),f=i.xOrigin-at.x+"px "+(i.yOrigin-at.y)+"px",Z=""):Z=!e&&t.getAttribute("data-svg-origin"),VR(t,Z||f,!!Z||i.originIsAbsolute,i.smooth!==!1,L)),N=i.xOrigin||0,B=i.yOrigin||0,L!==gx&&(V=L[0],G=L[1],k=L[2],st=L[3],m=it=L[4],g=Y=L[5],L.length===6?(v=Math.sqrt(V*V+G*G),S=Math.sqrt(st*st+k*k),E=V||G?dy(G,V)*um:0,R=k||st?dy(k,st)*um+E:0,R&&(S*=Math.abs(Math.cos(R*Ly))),i.svg&&(m-=N-(N*V+B*k),g-=B-(N*G+B*st))):(lt=L[6],zt=L[7],$=L[8],pt=L[9],wt=L[10],nt=L[11],m=L[12],g=L[13],y=L[14],U=dy(lt,wt),T=U*um,U&&(I=Math.cos(-U),w=Math.sin(-U),Z=it*I+$*w,at=Y*I+pt*w,ct=lt*I+wt*w,$=it*-w+$*I,pt=Y*-w+pt*I,wt=lt*-w+wt*I,nt=zt*-w+nt*I,it=Z,Y=at,lt=ct),U=dy(-k,wt),x=U*um,U&&(I=Math.cos(-U),w=Math.sin(-U),Z=V*I-$*w,at=G*I-pt*w,ct=k*I-wt*w,nt=st*w+nt*I,V=Z,G=at,k=ct),U=dy(G,V),E=U*um,U&&(I=Math.cos(U),w=Math.sin(U),Z=V*I+G*w,at=it*I+Y*w,G=G*I-V*w,Y=Y*I-it*w,V=Z,it=at),T&&Math.abs(T)+Math.abs(E)>359.9&&(T=E=0,x=180-x),v=Xr(Math.sqrt(V*V+G*G+k*k)),S=Xr(Math.sqrt(Y*Y+lt*lt)),U=dy(it,Y),R=Math.abs(U)>2e-4?U*um:0,O=nt?1/(nt<0?-nt:nt):0),i.svg&&(Z=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!OF(Kc(t,Tr)),Z&&t.setAttribute("transform",Z))),Math.abs(R)>90&&Math.abs(R)<270&&(s?(v*=-1,R+=E<=0?180:-180,E+=E<=0?180:-180):(S*=-1,R+=R<=0?180:-180)),e=e||i.uncache,i.x=m-((i.xPercent=m&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-m)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+a,i.y=g-((i.yPercent=g&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-g)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+a,i.z=y+a,i.scaleX=Xr(v),i.scaleY=Xr(S),i.rotation=Xr(E)+l,i.rotationX=Xr(T)+l,i.rotationY=Xr(x)+l,i.skewX=R+l,i.skewY=D+l,i.transformPerspective=O+a,(i.zOrigin=parseFloat(f.split(" ")[2])||!e&&i.zOrigin||0)&&(r[Lo]=rT(f)),i.xOffset=i.yOffset=0,i.force3D=fl.force3D,i.renderTransform=i.svg?utt:AF?DF:ltt,i.uncache=0,i},rT=function(t){return(t=t.split(" "))[0]+" "+t[1]},vC=function(t,e,i){var r=Ea(e);return Xr(parseFloat(e)+parseFloat(Fd(t,"x",i+"px",r)))+r},ltt=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,DF(t,e)},em="0deg",Zv="0px",nm=") ",DF=function(t,e){var i=e||this,r=i.xPercent,s=i.yPercent,a=i.x,l=i.y,c=i.z,f=i.rotation,m=i.rotationY,g=i.rotationX,y=i.skewX,v=i.skewY,S=i.scaleX,E=i.scaleY,T=i.transformPerspective,x=i.force3D,R=i.target,D=i.zOrigin,O="",N=x==="auto"&&t&&t!==1||x===!0;if(D&&(g!==em||m!==em)){var B=parseFloat(m)*Ly,L=Math.sin(B),U=Math.cos(B),I;B=parseFloat(g)*Ly,I=Math.cos(B),a=vC(R,a,L*I*-D),l=vC(R,l,-Math.sin(B)*-D),c=vC(R,c,U*I*-D+D)}T!==Zv&&(O+="perspective("+T+nm),(r||s)&&(O+="translate("+r+"%, "+s+"%) "),(N||a!==Zv||l!==Zv||c!==Zv)&&(O+=c!==Zv||N?"translate3d("+a+", "+l+", "+c+") ":"translate("+a+", "+l+nm),f!==em&&(O+="rotate("+f+nm),m!==em&&(O+="rotateY("+m+nm),g!==em&&(O+="rotateX("+g+nm),(y!==em||v!==em)&&(O+="skew("+y+", "+v+nm),(S!==1||E!==1)&&(O+="scale("+S+", "+E+nm),R.style[Tr]=O||"translate(0, 0)"},utt=function(t,e){var i=e||this,r=i.xPercent,s=i.yPercent,a=i.x,l=i.y,c=i.rotation,f=i.skewX,m=i.skewY,g=i.scaleX,y=i.scaleY,v=i.target,S=i.xOrigin,E=i.yOrigin,T=i.xOffset,x=i.yOffset,R=i.forceCSS,D=parseFloat(a),O=parseFloat(l),N,B,L,U,I;c=parseFloat(c),f=parseFloat(f),m=parseFloat(m),m&&(m=parseFloat(m),f+=m,c+=m),c||f?(c*=Ly,f*=Ly,N=Math.cos(c)*g,B=Math.sin(c)*g,L=Math.sin(c-f)*-y,U=Math.cos(c-f)*y,f&&(m*=Ly,I=Math.tan(f-m),I=Math.sqrt(1+I*I),L*=I,U*=I,m&&(I=Math.tan(m),I=Math.sqrt(1+I*I),N*=I,B*=I)),N=Xr(N),B=Xr(B),L=Xr(L),U=Xr(U)):(N=g,U=y,B=L=0),(D&&!~(a+"").indexOf("px")||O&&!~(l+"").indexOf("px"))&&(D=Fd(v,"x",a,"px"),O=Fd(v,"y",l,"px")),(S||E||T||x)&&(D=Xr(D+S-(S*N+E*L)+T),O=Xr(O+E-(S*B+E*U)+x)),(r||s)&&(I=v.getBBox(),D=Xr(D+r/100*I.width),O=Xr(O+s/100*I.height)),I="matrix("+N+","+B+","+L+","+U+","+D+","+O+")",v.setAttribute("transform",I),R&&(v.style[Tr]=I)},ctt=function(t,e,i,r,s){var a=360,l=Ps(s),c=parseFloat(s)*(l&&~s.indexOf("rad")?um:1),f=c-r,m=r+f+"deg",g,y;return l&&(g=s.split("_")[1],g==="short"&&(f%=a,f!==f%(a/2)&&(f+=f<0?a:-360)),g==="cw"&&f<0?f=(f+a*aL)%a-~~(f/a)*a:g==="ccw"&&f>0&&(f=(f-a*aL)%a-~~(f/a)*a)),t._pt=y=new Po(t._pt,e,i,r,f,WJ),y.e=m,y.u="deg",t._props.push(i),y},dL=function(t,e){for(var i in e)t[i]=e[i];return t},ftt=function(t,e,i){var r=dL({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=i.style,l,c,f,m,g,y,v,S;r.svg?(f=i.getAttribute("transform"),i.setAttribute("transform",""),a[Tr]=e,l=yx(i,1),zm(i,Tr),i.setAttribute("transform",f)):(f=getComputedStyle(i)[Tr],a[Tr]=e,l=yx(i,1),a[Tr]=f);for(c in gh)f=r[c],m=l[c],f!==m&&s.indexOf(c)<0&&(v=Ea(f),S=Ea(m),g=v!==S?Fd(i,c,f,S):parseFloat(f),y=parseFloat(m),t._pt=new Po(t._pt,l,c,g,y-g,UR),t._pt.u=S||0,t._props.push(c));dL(l,r)};Io("padding,margin,Width,Radius",function(n,t){var e="Top",i="Right",r="Bottom",s="Left",a=(t<3?[e,i,r,s]:[e+s,e+i,r+i,r+s]).map(function(l){return t<2?n+l:"border"+l+n});iT[t>1?"border"+n:n]=function(l,c,f,m,g){var y,v;if(arguments.length<4)return y=a.map(function(S){return eh(l,S,f)}),v=y.join(" "),v.split(y[0]).length===5?y[0]:v;y=(m+"").split(" "),v={},a.forEach(function(S,E){return v[S]=y[E]=y[E]||y[(E-1)/2|0]}),l.init(c,v,g)}});var NF={name:"css",register:BR,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,r,s){var a=this._props,l=t.style,c=i.vars.startAt,f,m,g,y,v,S,E,T,x,R,D,O,N,B,L,U;GO||BR(),this.styles=this.styles||MF(t),U=this.styles.props,this.tween=i;for(E in e)if(E!=="autoRound"&&(m=e[E],!(al[E]&&pF(E,e,i,r,t,s)))){if(v=typeof m,S=iT[E],v==="function"&&(m=m.call(i,r,t,s),v=typeof m),v==="string"&&~m.indexOf("random(")&&(m=dx(m)),S)S(this,t,E,m,i)&&(L=1);else if(E.substr(0,2)==="--")f=(getComputedStyle(t).getPropertyValue(E)+"").trim(),m+="",Dd.lastIndex=0,Dd.test(f)||(T=Ea(f),x=Ea(m)),x?T!==x&&(f=Fd(t,E,f,x)+x):T&&(m+=T),this.add(l,"setProperty",f,m,r,s,0,0,E),a.push(E),U.push(E,0,l[E]);else if(v!=="undefined"){if(c&&E in c?(f=typeof c[E]=="function"?c[E].call(i,r,t,s):c[E],Ps(f)&&~f.indexOf("random(")&&(f=dx(f)),Ea(f+"")||f==="auto"||(f+=fl.units[E]||Ea(eh(t,E))||""),(f+"").charAt(1)==="="&&(f=eh(t,E))):f=eh(t,E),y=parseFloat(f),R=v==="string"&&m.charAt(1)==="="&&m.substr(0,2),R&&(m=m.substr(2)),g=parseFloat(m),E in qc&&(E==="autoAlpha"&&(y===1&&eh(t,"visibility")==="hidden"&&g&&(y=0),U.push("visibility",0,l.visibility),Cd(this,l,"visibility",y?"inherit":"hidden",g?"inherit":"hidden",!g)),E!=="scale"&&E!=="transform"&&(E=qc[E],~E.indexOf(",")&&(E=E.split(",")[0]))),D=E in gh,D){if(this.styles.save(E),O||(N=t._gsap,N.renderTransform&&!e.parseTransform||yx(t,e.parseTransform),B=e.smoothOrigin!==!1&&N.smooth,O=this._pt=new Po(this._pt,l,Tr,0,1,N.renderTransform,N,0,-1),O.dep=1),E==="scale")this._pt=new Po(this._pt,N,"scaleY",N.scaleY,(R?Iy(N.scaleY,R+g):g)-N.scaleY||0,UR),this._pt.u=0,a.push("scaleY",E),E+="X";else if(E==="transformOrigin"){U.push(Lo,0,l[Lo]),m=att(m),N.svg?VR(t,m,0,B,0,this):(x=parseFloat(m.split(" ")[2])||0,x!==N.zOrigin&&Cd(this,N,"zOrigin",N.zOrigin,x),Cd(this,l,E,rT(f),rT(m)));continue}else if(E==="svgOrigin"){VR(t,m,1,B,0,this);continue}else if(E in RF){ctt(this,N,E,y,R?Iy(y,R+m):m);continue}else if(E==="smoothOrigin"){Cd(this,N,"smooth",N.smooth,m);continue}else if(E==="force3D"){N[E]=m;continue}else if(E==="transform"){ftt(this,m,t);continue}}else E in l||(E=Jy(E)||E);if(D||(g||g===0)&&(y||y===0)&&!XJ.test(m)&&E in l)T=(f+"").substr((y+"").length),g||(g=0),x=Ea(m)||(E in fl.units?fl.units[E]:T),T!==x&&(y=Fd(t,E,f,x)),this._pt=new Po(this._pt,D?N:l,E,y,(R?Iy(y,R+g):g)-y,!D&&(x==="px"||E==="zIndex")&&e.autoRound!==!1?$J:UR),this._pt.u=x||0,T!==x&&x!=="%"&&(this._pt.b=f,this._pt.r=YJ);else if(E in l)stt.call(this,t,E,f,R?R+m:m);else if(E in t)this.add(t,E,f||t[E],R?R+m:m,r,s);else if(E!=="parseTransform"){PO(E,m);continue}D||(E in l?U.push(E,0,l[E]):typeof t[E]=="function"?U.push(E,2,t[E]()):U.push(E,1,f||t[E])),a.push(E)}}L&&xF(this)},render:function(t,e){if(e.tween._time||!qO())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:eh,aliases:qc,getSetter:function(t,e,i){var r=qc[e];return r&&r.indexOf(",")<0&&(e=r),e in gh&&e!==Lo&&(t._gsap.x||eh(t,"x"))?i&&sL===i?e==="scale"?JJ:QJ:(sL=i||{})&&(e==="scale"?ttt:ett):t.style&&!DO(t.style[e])?KJ:~e.indexOf("-")?ZJ:kO(t,e)},core:{_removeProperty:zm,_getMatrix:XO}};Uo.utils.checkPrefix=Jy;Uo.core.getStyleSaver=MF;(function(n,t,e,i){var r=Io(n+","+t+","+e,function(s){gh[s]=1});Io(t,function(s){fl.units[s]="deg",RF[s]=1}),qc[r[13]]=n+","+t,Io(i,function(s){var a=s.split(":");qc[a[1]]=r[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Io("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){fl.units[n]="px"});Uo.registerPlugin(NF);var IF=Uo.registerPlugin(NF)||Uo;IF.core.Tween;const htt=(n,t,e=50)=>{if(!n)return;const i=new ut;n.getPosition(i);const r=new ut().subVectors(i,t).normalize(),s=new ut().copy(t).addScaledVector(r,e);IF.to(i,{x:s.x,y:s.y,z:s.z,duration:1.5,ease:"power2.out",onUpdate:()=>{n.setLookAt(i.x,i.y,i.z,t.x,t.y,t.z,!0)}})},dtt=()=>{};var pL={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},ptt=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[e++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=n[e++],a=n[e++],l=n[e++],c=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(c>>10)),t[i++]=String.fromCharCode(56320+(c&1023))}else{const s=n[e++],a=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},LF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],a=r+1<n.length,l=a?n[r+1]:0,c=r+2<n.length,f=c?n[r+2]:0,m=s>>2,g=(s&3)<<4|l>>4;let y=(l&15)<<2|f>>6,v=f&63;c||(v=64,a||(y=64)),i.push(e[m],e[g],e[y],e[v])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(PF(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):ptt(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=e[n.charAt(r++)],l=r<n.length?e[n.charAt(r)]:0;++r;const f=r<n.length?e[n.charAt(r)]:64;++r;const g=r<n.length?e[n.charAt(r)]:64;if(++r,s==null||l==null||f==null||g==null)throw new mtt;const y=s<<2|l>>4;if(i.push(y),f!==64){const v=l<<4&240|f>>2;if(i.push(v),g!==64){const S=f<<6&192|g;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class mtt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gtt=function(n){const t=PF(n);return LF.encodeByteArray(t,!0)},sT=function(n){return gtt(n).replace(/\./g,"")},ytt=function(n){try{return LF.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _tt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vtt=()=>_tt().__FIREBASE_DEFAULTS__,xtt=()=>{if(typeof process>"u"||typeof pL>"u")return;const n=pL.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},btt=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&ytt(n[1]);return t&&JSON.parse(t)},WO=()=>{try{return dtt()||vtt()||xtt()||btt()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Stt=n=>{var t,e;return(e=(t=WO())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},Ett=n=>{const t=Stt(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},UF=()=>{var n;return(n=WO())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ttt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mtt(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[sT(JSON.stringify(e)),sT(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Att(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wtt(){var n;const t=(n=WO())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ctt(){return!wtt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rtt(){try{return typeof indexedDB=="object"}catch{return!1}}function Ott(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dtt="FirebaseError";class x_ extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=Dtt,Object.setPrototypeOf(this,x_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zF.prototype.create)}}class zF{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?Ntt(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new x_(r,l,i)}}function Ntt(n,t){return n.replace(Itt,(e,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const Itt=/\{\$([^}]+)}/g;function aT(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const r of e){if(!i.includes(r))return!1;const s=n[r],a=t[r];if(mL(s)&&mL(a)){if(!aT(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!e.includes(r))return!1;return!0}function mL(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(n){return n&&n._delegate?n._delegate:n}class vx{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ptt{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new Ttt;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Utt(t))try{this.getOrInitializeService({instanceIdentifier:cm})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=cm){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=cm){return this.instances.has(t)}getOptions(t=cm){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,e){var i;const r=this.normalizeInstanceIdentifier(e),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&t(a,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Ltt(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=cm){return this.component?this.component.multipleInstances?t:cm:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ltt(n){return n===cm?void 0:n}function Utt(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ztt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Ptt(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Jn||(Jn={}));const Btt={debug:Jn.DEBUG,verbose:Jn.VERBOSE,info:Jn.INFO,warn:Jn.WARN,error:Jn.ERROR,silent:Jn.SILENT},Vtt=Jn.INFO,Ftt={[Jn.DEBUG]:"log",[Jn.VERBOSE]:"log",[Jn.INFO]:"info",[Jn.WARN]:"warn",[Jn.ERROR]:"error"},ktt=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),r=Ftt[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class BF{constructor(t){this.name=t,this._logLevel=Vtt,this._logHandler=ktt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Jn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Btt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Jn.DEBUG,...t),this._logHandler(this,Jn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Jn.VERBOSE,...t),this._logHandler(this,Jn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Jn.INFO,...t),this._logHandler(this,Jn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Jn.WARN,...t),this._logHandler(this,Jn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Jn.ERROR,...t),this._logHandler(this,Jn.ERROR,...t)}}const Htt=(n,t)=>t.some(e=>n instanceof e);let gL,yL;function Gtt(){return gL||(gL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qtt(){return yL||(yL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VF=new WeakMap,FR=new WeakMap,FF=new WeakMap,xC=new WeakMap,YO=new WeakMap;function jtt(n){const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{e(Nd(n.result)),r()},a=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&VF.set(e,n)}).catch(()=>{}),YO.set(t,n),t}function Xtt(n){if(FR.has(n))return;const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{e(),r()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});FR.set(n,t)}let kR={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return FR.get(n);if(t==="objectStoreNames")return n.objectStoreNames||FF.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Nd(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function Wtt(n){kR=n(kR)}function Ytt(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(bC(this),t,...e);return FF.set(i,t.sort?t.sort():[t]),Nd(i)}:qtt().includes(n)?function(...t){return n.apply(bC(this),t),Nd(VF.get(this))}:function(...t){return Nd(n.apply(bC(this),t))}}function $tt(n){return typeof n=="function"?Ytt(n):(n instanceof IDBTransaction&&Xtt(n),Htt(n,Gtt())?new Proxy(n,kR):n)}function Nd(n){if(n instanceof IDBRequest)return jtt(n);if(xC.has(n))return xC.get(n);const t=$tt(n);return t!==n&&(xC.set(n,t),YO.set(t,n)),t}const bC=n=>YO.get(n);function Ktt(n,t,{blocked:e,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(n,t),l=Nd(a);return i&&a.addEventListener("upgradeneeded",c=>{i(Nd(a.result),c.oldVersion,c.newVersion,Nd(a.transaction),c)}),e&&a.addEventListener("blocked",c=>e(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const Ztt=["get","getKey","getAll","getAllKeys","count"],Qtt=["put","add","delete","clear"],SC=new Map;function _L(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(SC.get(t))return SC.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,r=Qtt.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Ztt.includes(e)))return;const s=async function(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let f=c.store;return i&&(f=f.index(l.shift())),(await Promise.all([f[e](...l),r&&c.done]))[0]};return SC.set(t,s),s}Wtt(n=>({...n,get:(t,e,i)=>_L(t,e)||n.get(t,e,i),has:(t,e)=>!!_L(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jtt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(tet(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function tet(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const HR="@firebase/app",vL="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new BF("@firebase/app"),eet="@firebase/app-compat",net="@firebase/analytics-compat",iet="@firebase/analytics",ret="@firebase/app-check-compat",set="@firebase/app-check",aet="@firebase/auth",oet="@firebase/auth-compat",uet="@firebase/database",cet="@firebase/data-connect",fet="@firebase/database-compat",het="@firebase/functions",det="@firebase/functions-compat",pet="@firebase/installations",met="@firebase/installations-compat",get="@firebase/messaging",yet="@firebase/messaging-compat",_et="@firebase/performance",vet="@firebase/performance-compat",xet="@firebase/remote-config",bet="@firebase/remote-config-compat",Eet="@firebase/storage",Tet="@firebase/storage-compat",Met="@firebase/firestore",Aet="@firebase/vertexai",wet="@firebase/firestore-compat",Cet="firebase",Ret="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="[DEFAULT]",Oet={[HR]:"fire-core",[eet]:"fire-core-compat",[iet]:"fire-analytics",[net]:"fire-analytics-compat",[set]:"fire-app-check",[ret]:"fire-app-check-compat",[aet]:"fire-auth",[oet]:"fire-auth-compat",[uet]:"fire-rtdb",[cet]:"fire-data-connect",[fet]:"fire-rtdb-compat",[het]:"fire-fn",[det]:"fire-fn-compat",[pet]:"fire-iid",[met]:"fire-iid-compat",[get]:"fire-fcm",[yet]:"fire-fcm-compat",[_et]:"fire-perf",[vet]:"fire-perf-compat",[xet]:"fire-rc",[bet]:"fire-rc-compat",[Eet]:"fire-gcs",[Tet]:"fire-gcs-compat",[Met]:"fire-fst",[wet]:"fire-fst-compat",[Aet]:"fire-vertex","fire-js":"fire-js",[Cet]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=new Map,Det=new Map,qR=new Map;function xL(n,t){try{n.container.addComponent(t)}catch(e){yh.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function lT(n){const t=n.name;if(qR.has(t))return yh.debug(`There were multiple attempts to register component ${t}.`),!1;qR.set(t,n);for(const e of oT.values())xL(e,n);for(const e of Det.values())xL(e,n);return!0}function Net(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Iet(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pet={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Id=new zF("app","Firebase",Pet);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Let{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new vx("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Id.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uet=Ret;function kF(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:GR,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw Id.create("bad-app-name",{appName:String(r)});if(e||(e=UF()),!e)throw Id.create("no-options");const s=oT.get(r);if(s){if(aT(e,s.options)&&aT(i,s.config))return s;throw Id.create("duplicate-app",{appName:r})}const a=new ztt(r);for(const c of qR.values())a.addComponent(c);const l=new Let(e,i,a);return oT.set(r,l),l}function zet(n=GR){const t=oT.get(n);if(!t&&n===GR&&UF())return kF();if(!t)throw Id.create("no-app",{appName:n});return t}function Uy(n,t,e){var i;let r=(i=Oet[n])!==null&&i!==void 0?i:n;e&&(r+=`-${e}`);const s=r.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${t}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),yh.warn(l.join(" "));return}lT(new vx(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bet="firebase-heartbeat-database",Vet=1,xx="firebase-heartbeat-store";let EC=null;function HF(){return EC||(EC=Ktt(Bet,Vet,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(xx)}catch(e){console.warn(e)}}}}).catch(n=>{throw Id.create("idb-open",{originalErrorMessage:n.message})})),EC}async function Fet(n){try{const e=(await HF()).transaction(xx),i=await e.objectStore(xx).get(GF(n));return await e.done,i}catch(t){if(t instanceof x_)yh.warn(t.message);else{const e=Id.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});yh.warn(e.message)}}}async function bL(n,t){try{const i=(await HF()).transaction(xx,"readwrite");await i.objectStore(xx).put(t,GF(n)),await i.done}catch(e){if(e instanceof x_)yh.warn(e.message);else{const i=Id.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});yh.warn(i.message)}}}function GF(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ket=1024,Het=30;class Get{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new jet(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=SL();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>Het){const a=Xet(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){yh.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=SL(),{heartbeatsToSend:i,unsentEntries:r}=qet(this._heartbeatsCache.heartbeats),s=sT(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return yh.warn(e),""}}}function SL(){return new Date().toISOString().substring(0,10)}function qet(n,t=ket){const e=[];let i=n.slice();for(const r of n){const s=e.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),EL(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),EL(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class jet{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rtt()?Ott().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Fet(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return bL(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return bL(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function EL(n){return sT(JSON.stringify({version:2,heartbeats:n})).length}function Xet(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wet(n){lT(new vx("platform-logger",t=>new Jtt(t),"PRIVATE")),lT(new vx("heartbeat",t=>new Get(t),"PRIVATE")),Uy(HR,vL,n),Uy(HR,vL,"esm2017"),Uy("fire-js","")}Wet("");var Yet="firebase",$et="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Uy(Yet,$et,"app");var TL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pd,qF;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(L,U){function I(){}I.prototype=U.prototype,L.D=U.prototype,L.prototype=new I,L.prototype.constructor=L,L.C=function(w,V,G){for(var k=Array(arguments.length-2),st=2;st<arguments.length;st++)k[st-2]=arguments[st];return U.prototype[V].apply(w,k)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(L,U,I){I||(I=0);var w=Array(16);if(typeof U=="string")for(var V=0;16>V;++V)w[V]=U.charCodeAt(I++)|U.charCodeAt(I++)<<8|U.charCodeAt(I++)<<16|U.charCodeAt(I++)<<24;else for(V=0;16>V;++V)w[V]=U[I++]|U[I++]<<8|U[I++]<<16|U[I++]<<24;U=L.g[0],I=L.g[1],V=L.g[2];var G=L.g[3],k=U+(G^I&(V^G))+w[0]+3614090360&4294967295;U=I+(k<<7&4294967295|k>>>25),k=G+(V^U&(I^V))+w[1]+3905402710&4294967295,G=U+(k<<12&4294967295|k>>>20),k=V+(I^G&(U^I))+w[2]+606105819&4294967295,V=G+(k<<17&4294967295|k>>>15),k=I+(U^V&(G^U))+w[3]+3250441966&4294967295,I=V+(k<<22&4294967295|k>>>10),k=U+(G^I&(V^G))+w[4]+4118548399&4294967295,U=I+(k<<7&4294967295|k>>>25),k=G+(V^U&(I^V))+w[5]+1200080426&4294967295,G=U+(k<<12&4294967295|k>>>20),k=V+(I^G&(U^I))+w[6]+2821735955&4294967295,V=G+(k<<17&4294967295|k>>>15),k=I+(U^V&(G^U))+w[7]+4249261313&4294967295,I=V+(k<<22&4294967295|k>>>10),k=U+(G^I&(V^G))+w[8]+1770035416&4294967295,U=I+(k<<7&4294967295|k>>>25),k=G+(V^U&(I^V))+w[9]+2336552879&4294967295,G=U+(k<<12&4294967295|k>>>20),k=V+(I^G&(U^I))+w[10]+4294925233&4294967295,V=G+(k<<17&4294967295|k>>>15),k=I+(U^V&(G^U))+w[11]+2304563134&4294967295,I=V+(k<<22&4294967295|k>>>10),k=U+(G^I&(V^G))+w[12]+1804603682&4294967295,U=I+(k<<7&4294967295|k>>>25),k=G+(V^U&(I^V))+w[13]+4254626195&4294967295,G=U+(k<<12&4294967295|k>>>20),k=V+(I^G&(U^I))+w[14]+2792965006&4294967295,V=G+(k<<17&4294967295|k>>>15),k=I+(U^V&(G^U))+w[15]+1236535329&4294967295,I=V+(k<<22&4294967295|k>>>10),k=U+(V^G&(I^V))+w[1]+4129170786&4294967295,U=I+(k<<5&4294967295|k>>>27),k=G+(I^V&(U^I))+w[6]+3225465664&4294967295,G=U+(k<<9&4294967295|k>>>23),k=V+(U^I&(G^U))+w[11]+643717713&4294967295,V=G+(k<<14&4294967295|k>>>18),k=I+(G^U&(V^G))+w[0]+3921069994&4294967295,I=V+(k<<20&4294967295|k>>>12),k=U+(V^G&(I^V))+w[5]+3593408605&4294967295,U=I+(k<<5&4294967295|k>>>27),k=G+(I^V&(U^I))+w[10]+38016083&4294967295,G=U+(k<<9&4294967295|k>>>23),k=V+(U^I&(G^U))+w[15]+3634488961&4294967295,V=G+(k<<14&4294967295|k>>>18),k=I+(G^U&(V^G))+w[4]+3889429448&4294967295,I=V+(k<<20&4294967295|k>>>12),k=U+(V^G&(I^V))+w[9]+568446438&4294967295,U=I+(k<<5&4294967295|k>>>27),k=G+(I^V&(U^I))+w[14]+3275163606&4294967295,G=U+(k<<9&4294967295|k>>>23),k=V+(U^I&(G^U))+w[3]+4107603335&4294967295,V=G+(k<<14&4294967295|k>>>18),k=I+(G^U&(V^G))+w[8]+1163531501&4294967295,I=V+(k<<20&4294967295|k>>>12),k=U+(V^G&(I^V))+w[13]+2850285829&4294967295,U=I+(k<<5&4294967295|k>>>27),k=G+(I^V&(U^I))+w[2]+4243563512&4294967295,G=U+(k<<9&4294967295|k>>>23),k=V+(U^I&(G^U))+w[7]+1735328473&4294967295,V=G+(k<<14&4294967295|k>>>18),k=I+(G^U&(V^G))+w[12]+2368359562&4294967295,I=V+(k<<20&4294967295|k>>>12),k=U+(I^V^G)+w[5]+4294588738&4294967295,U=I+(k<<4&4294967295|k>>>28),k=G+(U^I^V)+w[8]+2272392833&4294967295,G=U+(k<<11&4294967295|k>>>21),k=V+(G^U^I)+w[11]+1839030562&4294967295,V=G+(k<<16&4294967295|k>>>16),k=I+(V^G^U)+w[14]+4259657740&4294967295,I=V+(k<<23&4294967295|k>>>9),k=U+(I^V^G)+w[1]+2763975236&4294967295,U=I+(k<<4&4294967295|k>>>28),k=G+(U^I^V)+w[4]+1272893353&4294967295,G=U+(k<<11&4294967295|k>>>21),k=V+(G^U^I)+w[7]+4139469664&4294967295,V=G+(k<<16&4294967295|k>>>16),k=I+(V^G^U)+w[10]+3200236656&4294967295,I=V+(k<<23&4294967295|k>>>9),k=U+(I^V^G)+w[13]+681279174&4294967295,U=I+(k<<4&4294967295|k>>>28),k=G+(U^I^V)+w[0]+3936430074&4294967295,G=U+(k<<11&4294967295|k>>>21),k=V+(G^U^I)+w[3]+3572445317&4294967295,V=G+(k<<16&4294967295|k>>>16),k=I+(V^G^U)+w[6]+76029189&4294967295,I=V+(k<<23&4294967295|k>>>9),k=U+(I^V^G)+w[9]+3654602809&4294967295,U=I+(k<<4&4294967295|k>>>28),k=G+(U^I^V)+w[12]+3873151461&4294967295,G=U+(k<<11&4294967295|k>>>21),k=V+(G^U^I)+w[15]+530742520&4294967295,V=G+(k<<16&4294967295|k>>>16),k=I+(V^G^U)+w[2]+3299628645&4294967295,I=V+(k<<23&4294967295|k>>>9),k=U+(V^(I|~G))+w[0]+4096336452&4294967295,U=I+(k<<6&4294967295|k>>>26),k=G+(I^(U|~V))+w[7]+1126891415&4294967295,G=U+(k<<10&4294967295|k>>>22),k=V+(U^(G|~I))+w[14]+2878612391&4294967295,V=G+(k<<15&4294967295|k>>>17),k=I+(G^(V|~U))+w[5]+4237533241&4294967295,I=V+(k<<21&4294967295|k>>>11),k=U+(V^(I|~G))+w[12]+1700485571&4294967295,U=I+(k<<6&4294967295|k>>>26),k=G+(I^(U|~V))+w[3]+2399980690&4294967295,G=U+(k<<10&4294967295|k>>>22),k=V+(U^(G|~I))+w[10]+4293915773&4294967295,V=G+(k<<15&4294967295|k>>>17),k=I+(G^(V|~U))+w[1]+2240044497&4294967295,I=V+(k<<21&4294967295|k>>>11),k=U+(V^(I|~G))+w[8]+1873313359&4294967295,U=I+(k<<6&4294967295|k>>>26),k=G+(I^(U|~V))+w[15]+4264355552&4294967295,G=U+(k<<10&4294967295|k>>>22),k=V+(U^(G|~I))+w[6]+2734768916&4294967295,V=G+(k<<15&4294967295|k>>>17),k=I+(G^(V|~U))+w[13]+1309151649&4294967295,I=V+(k<<21&4294967295|k>>>11),k=U+(V^(I|~G))+w[4]+4149444226&4294967295,U=I+(k<<6&4294967295|k>>>26),k=G+(I^(U|~V))+w[11]+3174756917&4294967295,G=U+(k<<10&4294967295|k>>>22),k=V+(U^(G|~I))+w[2]+718787259&4294967295,V=G+(k<<15&4294967295|k>>>17),k=I+(G^(V|~U))+w[9]+3951481745&4294967295,L.g[0]=L.g[0]+U&4294967295,L.g[1]=L.g[1]+(V+(k<<21&4294967295|k>>>11))&4294967295,L.g[2]=L.g[2]+V&4294967295,L.g[3]=L.g[3]+G&4294967295}i.prototype.u=function(L,U){U===void 0&&(U=L.length);for(var I=U-this.blockSize,w=this.B,V=this.h,G=0;G<U;){if(V==0)for(;G<=I;)r(this,L,G),G+=this.blockSize;if(typeof L=="string"){for(;G<U;)if(w[V++]=L.charCodeAt(G++),V==this.blockSize){r(this,w),V=0;break}}else for(;G<U;)if(w[V++]=L[G++],V==this.blockSize){r(this,w),V=0;break}}this.h=V,this.o+=U},i.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var U=1;U<L.length-8;++U)L[U]=0;var I=8*this.o;for(U=L.length-8;U<L.length;++U)L[U]=I&255,I/=256;for(this.u(L),L=Array(16),U=I=0;4>U;++U)for(var w=0;32>w;w+=8)L[I++]=this.g[U]>>>w&255;return L};function s(L,U){var I=l;return Object.prototype.hasOwnProperty.call(I,L)?I[L]:I[L]=U(L)}function a(L,U){this.h=U;for(var I=[],w=!0,V=L.length-1;0<=V;V--){var G=L[V]|0;w&&G==U||(I[V]=G,w=!1)}this.g=I}var l={};function c(L){return-128<=L&&128>L?s(L,function(U){return new a([U|0],0>U?-1:0)}):new a([L|0],0>L?-1:0)}function f(L){if(isNaN(L)||!isFinite(L))return g;if(0>L)return T(f(-L));for(var U=[],I=1,w=0;L>=I;w++)U[w]=L/I|0,I*=4294967296;return new a(U,0)}function m(L,U){if(L.length==0)throw Error("number format error: empty string");if(U=U||10,2>U||36<U)throw Error("radix out of range: "+U);if(L.charAt(0)=="-")return T(m(L.substring(1),U));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=f(Math.pow(U,8)),w=g,V=0;V<L.length;V+=8){var G=Math.min(8,L.length-V),k=parseInt(L.substring(V,V+G),U);8>G?(G=f(Math.pow(U,G)),w=w.j(G).add(f(k))):(w=w.j(I),w=w.add(f(k)))}return w}var g=c(0),y=c(1),v=c(16777216);n=a.prototype,n.m=function(){if(E(this))return-T(this).m();for(var L=0,U=1,I=0;I<this.g.length;I++){var w=this.i(I);L+=(0<=w?w:4294967296+w)*U,U*=4294967296}return L},n.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(S(this))return"0";if(E(this))return"-"+T(this).toString(L);for(var U=f(Math.pow(L,6)),I=this,w="";;){var V=O(I,U).g;I=x(I,V.j(U));var G=((0<I.g.length?I.g[0]:I.h)>>>0).toString(L);if(I=V,S(I))return G+w;for(;6>G.length;)G="0"+G;w=G+w}},n.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function S(L){if(L.h!=0)return!1;for(var U=0;U<L.g.length;U++)if(L.g[U]!=0)return!1;return!0}function E(L){return L.h==-1}n.l=function(L){return L=x(this,L),E(L)?-1:S(L)?0:1};function T(L){for(var U=L.g.length,I=[],w=0;w<U;w++)I[w]=~L.g[w];return new a(I,~L.h).add(y)}n.abs=function(){return E(this)?T(this):this},n.add=function(L){for(var U=Math.max(this.g.length,L.g.length),I=[],w=0,V=0;V<=U;V++){var G=w+(this.i(V)&65535)+(L.i(V)&65535),k=(G>>>16)+(this.i(V)>>>16)+(L.i(V)>>>16);w=k>>>16,G&=65535,k&=65535,I[V]=k<<16|G}return new a(I,I[I.length-1]&-2147483648?-1:0)};function x(L,U){return L.add(T(U))}n.j=function(L){if(S(this)||S(L))return g;if(E(this))return E(L)?T(this).j(T(L)):T(T(this).j(L));if(E(L))return T(this.j(T(L)));if(0>this.l(v)&&0>L.l(v))return f(this.m()*L.m());for(var U=this.g.length+L.g.length,I=[],w=0;w<2*U;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var V=0;V<L.g.length;V++){var G=this.i(w)>>>16,k=this.i(w)&65535,st=L.i(V)>>>16,it=L.i(V)&65535;I[2*w+2*V]+=k*it,R(I,2*w+2*V),I[2*w+2*V+1]+=G*it,R(I,2*w+2*V+1),I[2*w+2*V+1]+=k*st,R(I,2*w+2*V+1),I[2*w+2*V+2]+=G*st,R(I,2*w+2*V+2)}for(w=0;w<U;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=U;w<2*U;w++)I[w]=0;return new a(I,0)};function R(L,U){for(;(L[U]&65535)!=L[U];)L[U+1]+=L[U]>>>16,L[U]&=65535,U++}function D(L,U){this.g=L,this.h=U}function O(L,U){if(S(U))throw Error("division by zero");if(S(L))return new D(g,g);if(E(L))return U=O(T(L),U),new D(T(U.g),T(U.h));if(E(U))return U=O(L,T(U)),new D(T(U.g),U.h);if(30<L.g.length){if(E(L)||E(U))throw Error("slowDivide_ only works with positive integers.");for(var I=y,w=U;0>=w.l(L);)I=N(I),w=N(w);var V=B(I,1),G=B(w,1);for(w=B(w,2),I=B(I,2);!S(w);){var k=G.add(w);0>=k.l(L)&&(V=V.add(I),G=k),w=B(w,1),I=B(I,1)}return U=x(L,V.j(U)),new D(V,U)}for(V=g;0<=L.l(U);){for(I=Math.max(1,Math.floor(L.m()/U.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),G=f(I),k=G.j(U);E(k)||0<k.l(L);)I-=w,G=f(I),k=G.j(U);S(G)&&(G=y),V=V.add(G),L=x(L,k)}return new D(V,L)}n.A=function(L){return O(this,L).h},n.and=function(L){for(var U=Math.max(this.g.length,L.g.length),I=[],w=0;w<U;w++)I[w]=this.i(w)&L.i(w);return new a(I,this.h&L.h)},n.or=function(L){for(var U=Math.max(this.g.length,L.g.length),I=[],w=0;w<U;w++)I[w]=this.i(w)|L.i(w);return new a(I,this.h|L.h)},n.xor=function(L){for(var U=Math.max(this.g.length,L.g.length),I=[],w=0;w<U;w++)I[w]=this.i(w)^L.i(w);return new a(I,this.h^L.h)};function N(L){for(var U=L.g.length+1,I=[],w=0;w<U;w++)I[w]=L.i(w)<<1|L.i(w-1)>>>31;return new a(I,L.h)}function B(L,U){var I=U>>5;U%=32;for(var w=L.g.length-I,V=[],G=0;G<w;G++)V[G]=0<U?L.i(G+I)>>>U|L.i(G+I+1)<<32-U:L.i(G+I);return new a(V,L.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,qF=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,Pd=a}).apply(typeof TL<"u"?TL:typeof self<"u"?self:typeof window<"u"?window:{});var ME=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jF,d0,XF,XE,jR,WF,YF,$F;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(M,F,j){return M==Array.prototype||M==Object.prototype||(M[F]=j.value),M};function e(M){M=[typeof globalThis=="object"&&globalThis,M,typeof window=="object"&&window,typeof self=="object"&&self,typeof ME=="object"&&ME];for(var F=0;F<M.length;++F){var j=M[F];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var i=e(this);function r(M,F){if(F)t:{var j=i;M=M.split(".");for(var et=0;et<M.length-1;et++){var Tt=M[et];if(!(Tt in j))break t;j=j[Tt]}M=M[M.length-1],et=j[M],F=F(et),F!=et&&F!=null&&t(j,M,{configurable:!0,writable:!0,value:F})}}function s(M,F){M instanceof String&&(M+="");var j=0,et=!1,Tt={next:function(){if(!et&&j<M.length){var jt=j++;return{value:F(jt,M[jt]),done:!1}}return et=!0,{done:!0,value:void 0}}};return Tt[Symbol.iterator]=function(){return Tt},Tt}r("Array.prototype.values",function(M){return M||function(){return s(this,function(F,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(M){var F=typeof M;return F=F!="object"?F:M?Array.isArray(M)?"array":F:"null",F=="array"||F=="object"&&typeof M.length=="number"}function f(M){var F=typeof M;return F=="object"&&M!=null||F=="function"}function m(M,F,j){return M.call.apply(M.bind,arguments)}function g(M,F,j){if(!M)throw Error();if(2<arguments.length){var et=Array.prototype.slice.call(arguments,2);return function(){var Tt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Tt,et),M.apply(F,Tt)}}return function(){return M.apply(F,arguments)}}function y(M,F,j){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,y.apply(null,arguments)}function v(M,F){var j=Array.prototype.slice.call(arguments,1);return function(){var et=j.slice();return et.push.apply(et,arguments),M.apply(this,et)}}function S(M,F){function j(){}j.prototype=F.prototype,M.aa=F.prototype,M.prototype=new j,M.prototype.constructor=M,M.Qb=function(et,Tt,jt){for(var ye=Array(arguments.length-2),zn=2;zn<arguments.length;zn++)ye[zn-2]=arguments[zn];return F.prototype[Tt].apply(et,ye)}}function E(M){const F=M.length;if(0<F){const j=Array(F);for(let et=0;et<F;et++)j[et]=M[et];return j}return[]}function T(M,F){for(let j=1;j<arguments.length;j++){const et=arguments[j];if(c(et)){const Tt=M.length||0,jt=et.length||0;M.length=Tt+jt;for(let ye=0;ye<jt;ye++)M[Tt+ye]=et[ye]}else M.push(et)}}class x{constructor(F,j){this.i=F,this.j=j,this.h=0,this.g=null}get(){let F;return 0<this.h?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function R(M){return/^[\s\xa0]*$/.test(M)}function D(){var M=l.navigator;return M&&(M=M.userAgent)?M:""}function O(M){return O[" "](M),M}O[" "]=function(){};var N=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function B(M,F,j){for(const et in M)F.call(j,M[et],et,M)}function L(M,F){for(const j in M)F.call(void 0,M[j],j,M)}function U(M){const F={};for(const j in M)F[j]=M[j];return F}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(M,F){let j,et;for(let Tt=1;Tt<arguments.length;Tt++){et=arguments[Tt];for(j in et)M[j]=et[j];for(let jt=0;jt<I.length;jt++)j=I[jt],Object.prototype.hasOwnProperty.call(et,j)&&(M[j]=et[j])}}function V(M){var F=1;M=M.split(":");const j=[];for(;0<F&&M.length;)j.push(M.shift()),F--;return M.length&&j.push(M.join(":")),j}function G(M){l.setTimeout(()=>{throw M},0)}function k(){var M=ct;let F=null;return M.g&&(F=M.g,M.g=M.g.next,M.g||(M.h=null),F.next=null),F}class st{constructor(){this.h=this.g=null}add(F,j){const et=it.get();et.set(F,j),this.h?this.h.next=et:this.g=et,this.h=et}}var it=new x(()=>new Y,M=>M.reset());class Y{constructor(){this.next=this.g=this.h=null}set(F,j){this.h=F,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,at=!1,ct=new st,$=()=>{const M=l.Promise.resolve(void 0);Z=()=>{M.then(pt)}};var pt=()=>{for(var M;M=k();){try{M.h.call(M.g)}catch(j){G(j)}var F=it;F.j(M),100>F.h&&(F.h++,M.next=F.g,F.g=M)}at=!1};function wt(){this.s=this.s,this.C=this.C}wt.prototype.s=!1,wt.prototype.ma=function(){this.s||(this.s=!0,this.N())},wt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function zt(M,F){this.type=M,this.g=this.target=F,this.defaultPrevented=!1}zt.prototype.h=function(){this.defaultPrevented=!0};var nt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var M=!1,F=Object.defineProperty({},"passive",{get:function(){M=!0}});try{const j=()=>{};l.addEventListener("test",j,F),l.removeEventListener("test",j,F)}catch{}return M}();function lt(M,F){if(zt.call(this,M?M.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,M){var j=this.type=M.type,et=M.changedTouches&&M.changedTouches.length?M.changedTouches[0]:null;if(this.target=M.target||M.srcElement,this.g=F,F=M.relatedTarget){if(N){t:{try{O(F.nodeName);var Tt=!0;break t}catch{}Tt=!1}Tt||(F=null)}}else j=="mouseover"?F=M.fromElement:j=="mouseout"&&(F=M.toElement);this.relatedTarget=F,et?(this.clientX=et.clientX!==void 0?et.clientX:et.pageX,this.clientY=et.clientY!==void 0?et.clientY:et.pageY,this.screenX=et.screenX||0,this.screenY=et.screenY||0):(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0),this.button=M.button,this.key=M.key||"",this.ctrlKey=M.ctrlKey,this.altKey=M.altKey,this.shiftKey=M.shiftKey,this.metaKey=M.metaKey,this.pointerId=M.pointerId||0,this.pointerType=typeof M.pointerType=="string"?M.pointerType:ft[M.pointerType]||"",this.state=M.state,this.i=M,M.defaultPrevented&&lt.aa.h.call(this)}}S(lt,zt);var ft={2:"touch",3:"pen",4:"mouse"};lt.prototype.h=function(){lt.aa.h.call(this);var M=this.i;M.preventDefault?M.preventDefault():M.returnValue=!1};var mt="closure_listenable_"+(1e6*Math.random()|0),Dt=0;function Wt(M,F,j,et,Tt){this.listener=M,this.proxy=null,this.src=F,this.type=j,this.capture=!!et,this.ha=Tt,this.key=++Dt,this.da=this.fa=!1}function Nt(M){M.da=!0,M.listener=null,M.proxy=null,M.src=null,M.ha=null}function Jt(M){this.src=M,this.g={},this.h=0}Jt.prototype.add=function(M,F,j,et,Tt){var jt=M.toString();M=this.g[jt],M||(M=this.g[jt]=[],this.h++);var ye=kt(M,F,et,Tt);return-1<ye?(F=M[ye],j||(F.fa=!1)):(F=new Wt(F,this.src,jt,!!et,Tt),F.fa=j,M.push(F)),F};function Pt(M,F){var j=F.type;if(j in M.g){var et=M.g[j],Tt=Array.prototype.indexOf.call(et,F,void 0),jt;(jt=0<=Tt)&&Array.prototype.splice.call(et,Tt,1),jt&&(Nt(F),M.g[j].length==0&&(delete M.g[j],M.h--))}}function kt(M,F,j,et){for(var Tt=0;Tt<M.length;++Tt){var jt=M[Tt];if(!jt.da&&jt.listener==F&&jt.capture==!!j&&jt.ha==et)return Tt}return-1}var tt="closure_lm_"+(1e6*Math.random()|0),se={};function $t(M,F,j,et,Tt){if(Array.isArray(F)){for(var jt=0;jt<F.length;jt++)$t(M,F[jt],j,et,Tt);return null}return j=Vt(j),M&&M[mt]?M.K(F,j,f(et)?!!et.capture:!1,Tt):ce(M,F,j,!1,et,Tt)}function ce(M,F,j,et,Tt,jt){if(!F)throw Error("Invalid event type");var ye=f(Tt)?!!Tt.capture:!!Tt,zn=ht(M);if(zn||(M[tt]=zn=new Jt(M)),j=zn.add(F,j,et,ye,jt),j.proxy)return j;if(et=rt(),j.proxy=et,et.src=M,et.listener=j,M.addEventListener)nt||(Tt=ye),Tt===void 0&&(Tt=!1),M.addEventListener(F.toString(),et,Tt);else if(M.attachEvent)M.attachEvent(W(F.toString()),et);else if(M.addListener&&M.removeListener)M.addListener(et);else throw Error("addEventListener and attachEvent are unavailable.");return j}function rt(){function M(j){return F.call(M.src,M.listener,j)}const F=q;return M}function _t(M,F,j,et,Tt){if(Array.isArray(F))for(var jt=0;jt<F.length;jt++)_t(M,F[jt],j,et,Tt);else et=f(et)?!!et.capture:!!et,j=Vt(j),M&&M[mt]?(M=M.i,F=String(F).toString(),F in M.g&&(jt=M.g[F],j=kt(jt,j,et,Tt),-1<j&&(Nt(jt[j]),Array.prototype.splice.call(jt,j,1),jt.length==0&&(delete M.g[F],M.h--)))):M&&(M=ht(M))&&(F=M.g[F.toString()],M=-1,F&&(M=kt(F,j,et,Tt)),(j=-1<M?F[M]:null)&&gt(j))}function gt(M){if(typeof M!="number"&&M&&!M.da){var F=M.src;if(F&&F[mt])Pt(F.i,M);else{var j=M.type,et=M.proxy;F.removeEventListener?F.removeEventListener(j,et,M.capture):F.detachEvent?F.detachEvent(W(j),et):F.addListener&&F.removeListener&&F.removeListener(et),(j=ht(F))?(Pt(j,M),j.h==0&&(j.src=null,F[tt]=null)):Nt(M)}}}function W(M){return M in se?se[M]:se[M]="on"+M}function q(M,F){if(M.da)M=!0;else{F=new lt(F,this);var j=M.listener,et=M.ha||M.src;M.fa&&gt(M),M=j.call(et,F)}return M}function ht(M){return M=M[tt],M instanceof Jt?M:null}var xt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vt(M){return typeof M=="function"?M:(M[xt]||(M[xt]=function(F){return M.handleEvent(F)}),M[xt])}function Lt(){wt.call(this),this.i=new Jt(this),this.M=this,this.F=null}S(Lt,wt),Lt.prototype[mt]=!0,Lt.prototype.removeEventListener=function(M,F,j,et){_t(this,M,F,j,et)};function le(M,F){var j,et=M.F;if(et)for(j=[];et;et=et.F)j.push(et);if(M=M.M,et=F.type||F,typeof F=="string")F=new zt(F,M);else if(F instanceof zt)F.target=F.target||M;else{var Tt=F;F=new zt(et,M),w(F,Tt)}if(Tt=!0,j)for(var jt=j.length-1;0<=jt;jt--){var ye=F.g=j[jt];Tt=fe(ye,et,!0,F)&&Tt}if(ye=F.g=M,Tt=fe(ye,et,!0,F)&&Tt,Tt=fe(ye,et,!1,F)&&Tt,j)for(jt=0;jt<j.length;jt++)ye=F.g=j[jt],Tt=fe(ye,et,!1,F)&&Tt}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var M=this.i,F;for(F in M.g){for(var j=M.g[F],et=0;et<j.length;et++)Nt(j[et]);delete M.g[F],M.h--}}this.F=null},Lt.prototype.K=function(M,F,j,et){return this.i.add(String(M),F,!1,j,et)},Lt.prototype.L=function(M,F,j,et){return this.i.add(String(M),F,!0,j,et)};function fe(M,F,j,et){if(F=M.i.g[String(F)],!F)return!0;F=F.concat();for(var Tt=!0,jt=0;jt<F.length;++jt){var ye=F[jt];if(ye&&!ye.da&&ye.capture==j){var zn=ye.listener,Ji=ye.ha||ye.src;ye.fa&&Pt(M.i,ye),Tt=zn.call(Ji,et)!==!1&&Tt}}return Tt&&!et.defaultPrevented}function Se(M,F,j){if(typeof M=="function")j&&(M=y(M,j));else if(M&&typeof M.handleEvent=="function")M=y(M.handleEvent,M);else throw Error("Invalid listener argument");return 2147483647<Number(F)?-1:l.setTimeout(M,F||0)}function He(M){M.g=Se(()=>{M.g=null,M.i&&(M.i=!1,He(M))},M.l);const F=M.h;M.h=null,M.m.apply(null,F)}class Kt extends wt{constructor(F,j){super(),this.m=F,this.l=j,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:He(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xe(M){wt.call(this),this.h=M,this.g={}}S(xe,wt);var De=[];function Ae(M){B(M.g,function(F,j){this.g.hasOwnProperty(j)&&gt(F)},M),M.g={}}xe.prototype.N=function(){xe.aa.N.call(this),Ae(this)},xe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yt=l.JSON.stringify,Oe=l.JSON.parse,Te=class{stringify(M){return l.JSON.stringify(M,void 0)}parse(M){return l.JSON.parse(M,void 0)}};function fn(){}fn.prototype.h=null;function bt(M){return M.h||(M.h=M.i())}function Me(){}var Xt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ne(){zt.call(this,"d")}S(ne,zt);function _e(){zt.call(this,"c")}S(_e,zt);var ve={},je=null;function Yn(){return je=je||new Lt}ve.La="serverreachability";function Ci(M){zt.call(this,ve.La,M)}S(Ci,zt);function yn(M){const F=Yn();le(F,new Ci(F))}ve.STAT_EVENT="statevent";function kr(M,F){zt.call(this,ve.STAT_EVENT,M),this.stat=F}S(kr,zt);function $n(M){const F=Yn();le(F,new kr(F,M))}ve.Ma="timingevent";function Hu(M,F){zt.call(this,ve.Ma,M),this.size=F}S(Hu,zt);function Da(M,F){if(typeof M!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){M()},F)}function Qr(){this.g=!0}Qr.prototype.xa=function(){this.g=!1};function Ls(M,F,j,et,Tt,jt){M.info(function(){if(M.g)if(jt)for(var ye="",zn=jt.split("&"),Ji=0;Ji<zn.length;Ji++){var Bn=zn[Ji].split("=");if(1<Bn.length){var cr=Bn[0];Bn=Bn[1];var wr=cr.split("_");ye=2<=wr.length&&wr[1]=="type"?ye+(cr+"="+Bn+"&"):ye+(cr+"=redacted&")}}else ye=null;else ye=jt;return"XMLHTTP REQ ("+et+") [attempt "+Tt+"]: "+F+`
`+j+`
`+ye})}function Gu(M,F,j,et,Tt,jt,ye){M.info(function(){return"XMLHTTP RESP ("+et+") [ attempt "+Tt+"]: "+F+`
`+j+`
`+jt+" "+ye})}function Jr(M,F,j,et){M.info(function(){return"XMLHTTP TEXT ("+F+"): "+Gi(M,j)+(et?" "+et:"")})}function Ki(M,F){M.info(function(){return"TIMEOUT: "+F})}Qr.prototype.info=function(){};function Gi(M,F){if(!M.g)return F;if(!F)return null;try{var j=JSON.parse(F);if(j){for(M=0;M<j.length;M++)if(Array.isArray(j[M])){var et=j[M];if(!(2>et.length)){var Tt=et[1];if(Array.isArray(Tt)&&!(1>Tt.length)){var jt=Tt[0];if(jt!="noop"&&jt!="stop"&&jt!="close")for(var ye=1;ye<Tt.length;ye++)Tt[ye]=""}}}}return Yt(j)}catch{return F}}var an={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ea={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},to;function Xl(){}S(Xl,fn),Xl.prototype.g=function(){return new XMLHttpRequest},Xl.prototype.i=function(){return{}},to=new Xl;function Na(M,F,j,et){this.j=M,this.i=F,this.l=j,this.R=et||1,this.U=new xe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new uf}function uf(){this.i=null,this.g="",this.h=!1}var eo={},Fo={};function Us(M,F,j){M.L=1,M.v=Zi(ui(F)),M.m=j,M.P=!0,K(M,null)}function K(M,F){M.F=Date.now(),It(M),M.A=ui(M.v);var j=M.A,et=M.R;Array.isArray(et)||(et=[String(et)]),yl(j.i,"t",et),M.C=0,j=M.j.J,M.h=new uf,M.g=ro(M.j,j?F:null,!M.m),0<M.O&&(M.M=new Kt(y(M.Y,M,M.g),M.O)),F=M.U,j=M.g,et=M.ca;var Tt="readystatechange";Array.isArray(Tt)||(Tt&&(De[0]=Tt.toString()),Tt=De);for(var jt=0;jt<Tt.length;jt++){var ye=$t(j,Tt[jt],et||F.handleEvent,!1,F.h||F);if(!ye)break;F.g[ye.key]=ye}F=M.H?U(M.H):{},M.m?(M.u||(M.u="POST"),F["Content-Type"]="application/x-www-form-urlencoded",M.g.ea(M.A,M.u,M.m,F)):(M.u="GET",M.g.ea(M.A,M.u,null,F)),yn(),Ls(M.i,M.u,M.A,M.l,M.R,M.m)}Na.prototype.ca=function(M){M=M.target;const F=this.M;F&&Pa(M)==3?F.j():this.Y(M)},Na.prototype.Y=function(M){try{if(M==this.g)t:{const wr=Pa(this.g);var F=this.g.Ba();const fr=this.g.Z();if(!(3>wr)&&(wr!=3||this.g&&(this.h.h||this.g.oa()||rp(this.g)))){this.J||wr!=4||F==7||(F==8||0>=fr?yn(3):yn(2)),ae(this);var j=this.g.Z();this.X=j;e:if(vt(this)){var et=rp(this.g);M="";var Tt=et.length,jt=Pa(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){be(this),ge(this);var ye="";break e}this.h.i=new l.TextDecoder}for(F=0;F<Tt;F++)this.h.h=!0,M+=this.h.i.decode(et[F],{stream:!(jt&&F==Tt-1)});et.length=0,this.h.g+=M,this.C=0,ye=this.h.g}else ye=this.g.oa();if(this.o=j==200,Gu(this.i,this.u,this.A,this.l,this.R,wr,j),this.o){if(this.T&&!this.K){e:{if(this.g){var zn,Ji=this.g;if((zn=Ji.g?Ji.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(zn)){var Bn=zn;break e}}Bn=null}if(j=Bn)Jr(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ee(this,j);else{this.o=!1,this.s=3,$n(12),be(this),ge(this);break t}}if(this.P){j=!0;let es;for(;!this.J&&this.C<ye.length;)if(es=Ut(this,ye),es==Fo){wr==4&&(this.s=4,$n(14),j=!1),Jr(this.i,this.l,null,"[Incomplete Response]");break}else if(es==eo){this.s=4,$n(15),Jr(this.i,this.l,ye,"[Invalid Chunk]"),j=!1;break}else Jr(this.i,this.l,es,null),Ee(this,es);if(vt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wr!=4||ye.length!=0||this.h.h||(this.s=1,$n(16),j=!1),this.o=this.o&&j,!j)Jr(this.i,this.l,ye,"[Invalid Chunked Response]"),be(this),ge(this);else if(0<ye.length&&!this.W){this.W=!0;var cr=this.j;cr.g==this&&cr.ba&&!cr.M&&(cr.j.info("Great, no buffering proxy detected. Bytes received: "+ye.length),Kl(cr),cr.M=!0,$n(11))}}else Jr(this.i,this.l,ye,null),Ee(this,ye);wr==4&&be(this),this.o&&!this.J&&(wr==4?Ch(this.j,this):(this.o=!1,It(this)))}else A_(this.g),j==400&&0<ye.indexOf("Unknown SID")?(this.s=3,$n(12)):(this.s=0,$n(13)),be(this),ge(this)}}}catch{}finally{}};function vt(M){return M.g?M.u=="GET"&&M.L!=2&&M.j.Ca:!1}function Ut(M,F){var j=M.C,et=F.indexOf(`
`,j);return et==-1?Fo:(j=Number(F.substring(j,et)),isNaN(j)?eo:(et+=1,et+j>F.length?Fo:(F=F.slice(et,et+j),M.C=et+j,F)))}Na.prototype.cancel=function(){this.J=!0,be(this)};function It(M){M.S=Date.now()+M.I,At(M,M.I)}function At(M,F){if(M.B!=null)throw Error("WatchDog timer not null");M.B=Da(y(M.ba,M),F)}function ae(M){M.B&&(l.clearTimeout(M.B),M.B=null)}Na.prototype.ba=function(){this.B=null;const M=Date.now();0<=M-this.S?(Ki(this.i,this.A),this.L!=2&&(yn(),$n(17)),be(this),this.s=2,ge(this)):At(this,this.S-M)};function ge(M){M.j.G==0||M.J||Ch(M.j,M)}function be(M){ae(M);var F=M.M;F&&typeof F.ma=="function"&&F.ma(),M.M=null,Ae(M.U),M.g&&(F=M.g,M.g=null,F.abort(),F.ma())}function Ee(M,F){try{var j=M.j;if(j.G!=0&&(j.g==M||vn(j.h,M))){if(!M.K&&vn(j.h,M)&&j.G==3){try{var et=j.Da.g.parse(F)}catch{et=null}if(Array.isArray(et)&&et.length==3){var Tt=et;if(Tt[0]==0){t:if(!j.u){if(j.g)if(j.g.F+3e3<M.F)Ju(j),hf(j);else break t;gf(j),$n(18)}}else j.za=Tt[1],0<j.za-j.T&&37500>Tt[2]&&j.F&&j.v==0&&!j.C&&(j.C=Da(y(j.Za,j),6e3));if(1>=Sn(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else _l(j,11)}else if((M.K||j.g==M)&&Ju(j),!R(F))for(Tt=j.Da.g.parse(F),F=0;F<Tt.length;F++){let Bn=Tt[F];if(j.T=Bn[0],Bn=Bn[1],j.G==2)if(Bn[0]=="c"){j.K=Bn[1],j.ia=Bn[2];const cr=Bn[3];cr!=null&&(j.la=cr,j.j.info("VER="+j.la));const wr=Bn[4];wr!=null&&(j.Aa=wr,j.j.info("SVER="+j.Aa));const fr=Bn[5];fr!=null&&typeof fr=="number"&&0<fr&&(et=1.5*fr,j.L=et,j.j.info("backChannelRequestTimeoutMs_="+et)),et=j;const es=M.g;if(es){const oo=es.g?es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oo){var jt=et.h;jt.g||oo.indexOf("spdy")==-1&&oo.indexOf("quic")==-1&&oo.indexOf("h2")==-1||(jt.j=jt.l,jt.g=new Set,jt.h&&(si(jt,jt.h),jt.h=null))}if(et.D){const Nh=es.g?es.g.getResponseHeader("X-HTTP-Session-Id"):null;Nh&&(et.ya=Nh,Qe(et.I,et.D,Nh))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-M.F,j.j.info("Handshake RTT: "+j.R+"ms")),et=j;var ye=M;if(et.qa=up(et,et.J?et.ia:null,et.W),ye.K){Nn(et.h,ye);var zn=ye,Ji=et.L;Ji&&(zn.I=Ji),zn.B&&(ae(zn),It(zn)),et.g=ye}else op(et);0<j.i.length&&df(j)}else Bn[0]!="stop"&&Bn[0]!="close"||_l(j,7);else j.G==3&&(Bn[0]=="stop"||Bn[0]=="close"?Bn[0]=="stop"?_l(j,7):wh(j):Bn[0]!="noop"&&j.l&&j.l.ta(Bn),j.v=0)}}yn(4)}catch{}}var Ye=class{constructor(M,F){this.g=M,this.map=F}};function Xe(M){this.l=M||10,l.PerformanceNavigationTiming?(M=l.performance.getEntriesByType("navigation"),M=0<M.length&&(M[0].nextHopProtocol=="hq"||M[0].nextHopProtocol=="h2")):M=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=M?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ue(M){return M.h?!0:M.g?M.g.size>=M.j:!1}function Sn(M){return M.h?1:M.g?M.g.size:0}function vn(M,F){return M.h?M.h==F:M.g?M.g.has(F):!1}function si(M,F){M.g?M.g.add(F):M.h=F}function Nn(M,F){M.h&&M.h==F?M.h=null:M.g&&M.g.has(F)&&M.g.delete(F)}Xe.prototype.cancel=function(){if(this.i=Ke(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const M of this.g.values())M.cancel();this.g.clear()}};function Ke(M){if(M.h!=null)return M.i.concat(M.h.D);if(M.g!=null&&M.g.size!==0){let F=M.i;for(const j of M.g.values())F=F.concat(j.D);return F}return E(M.i)}function Fe(M){if(M.V&&typeof M.V=="function")return M.V();if(typeof Map<"u"&&M instanceof Map||typeof Set<"u"&&M instanceof Set)return Array.from(M.values());if(typeof M=="string")return M.split("");if(c(M)){for(var F=[],j=M.length,et=0;et<j;et++)F.push(M[et]);return F}F=[],j=0;for(et in M)F[j++]=M[et];return F}function er(M){if(M.na&&typeof M.na=="function")return M.na();if(!M.V||typeof M.V!="function"){if(typeof Map<"u"&&M instanceof Map)return Array.from(M.keys());if(!(typeof Set<"u"&&M instanceof Set)){if(c(M)||typeof M=="string"){var F=[];M=M.length;for(var j=0;j<M;j++)F.push(j);return F}F=[],j=0;for(const et in M)F[j++]=et;return F}}}function En(M,F){if(M.forEach&&typeof M.forEach=="function")M.forEach(F,void 0);else if(c(M)||typeof M=="string")Array.prototype.forEach.call(M,F,void 0);else for(var j=er(M),et=Fe(M),Tt=et.length,jt=0;jt<Tt;jt++)F.call(void 0,et[jt],j&&j[jt],M)}var ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zs(M,F){if(M){M=M.split("&");for(var j=0;j<M.length;j++){var et=M[j].indexOf("="),Tt=null;if(0<=et){var jt=M[j].substring(0,et);Tt=M[j].substring(et+1)}else jt=M[j];F(jt,Tt?decodeURIComponent(Tt.replace(/\+/g," ")):"")}}}function qi(M){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,M instanceof qi){this.h=M.h,kn(this,M.j),this.o=M.o,this.g=M.g,lr(this,M.s),this.l=M.l;var F=M.i,j=new ko;j.i=F.i,F.g&&(j.g=new Map(F.g),j.h=F.h),Ar(this,j),this.m=M.m}else M&&(F=String(M).match(ts))?(this.h=!1,kn(this,F[1]||"",!0),this.o=cs(F[2]||""),this.g=cs(F[3]||"",!0),lr(this,F[4]),this.l=cs(F[5]||"",!0),Ar(this,F[6]||"",!0),this.m=cs(F[7]||"")):(this.h=!1,this.i=new ko(null,this.h))}qi.prototype.toString=function(){var M=[],F=this.j;F&&M.push(ur(F,qu,!0),":");var j=this.g;return(j||F=="file")&&(M.push("//"),(F=this.o)&&M.push(ur(F,qu,!0),"@"),M.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&M.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&M.push("/"),M.push(ur(j,j.charAt(0)=="/"?cf:ep,!0))),(j=this.i.toString())&&M.push("?",j),(j=this.m)&&M.push("#",ur(j,Zm)),M.join("")};function ui(M){return new qi(M)}function kn(M,F,j){M.j=j?cs(F,!0):F,M.j&&(M.j=M.j.replace(/:$/,""))}function lr(M,F){if(F){if(F=Number(F),isNaN(F)||0>F)throw Error("Bad port number "+F);M.s=F}else M.s=null}function Ar(M,F,j){F instanceof ko?(M.i=F,Mh(M.i,M.h)):(j||(F=ur(F,Km)),M.i=new ko(F,M.h))}function Qe(M,F,j){M.i.set(F,j)}function Zi(M){return Qe(M,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),M}function cs(M,F){return M?F?decodeURI(M.replace(/%25/g,"%2525")):decodeURIComponent(M):""}function ur(M,F,j){return typeof M=="string"?(M=encodeURI(M).replace(F,Th),j&&(M=M.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M):null}function Th(M){return M=M.charCodeAt(0),"%"+(M>>4&15).toString(16)+(M&15).toString(16)}var qu=/[#\/\?@]/g,ep=/[#\?:]/g,cf=/[#\?]/g,Km=/[#\?@]/g,Zm=/#/g;function ko(M,F){this.h=this.g=null,this.i=M||null,this.j=!!F}function Ia(M){M.g||(M.g=new Map,M.h=0,M.i&&zs(M.i,function(F,j){M.add(decodeURIComponent(F.replace(/\+/g," ")),j)}))}n=ko.prototype,n.add=function(M,F){Ia(this),this.i=null,M=Ho(this,M);var j=this.g.get(M);return j||this.g.set(M,j=[]),j.push(F),this.h+=1,this};function ju(M,F){Ia(M),F=Ho(M,F),M.g.has(F)&&(M.i=null,M.h-=M.g.get(F).length,M.g.delete(F))}function gl(M,F){return Ia(M),F=Ho(M,F),M.g.has(F)}n.forEach=function(M,F){Ia(this),this.g.forEach(function(j,et){j.forEach(function(Tt){M.call(F,Tt,et,this)},this)},this)},n.na=function(){Ia(this);const M=Array.from(this.g.values()),F=Array.from(this.g.keys()),j=[];for(let et=0;et<F.length;et++){const Tt=M[et];for(let jt=0;jt<Tt.length;jt++)j.push(F[et])}return j},n.V=function(M){Ia(this);let F=[];if(typeof M=="string")gl(this,M)&&(F=F.concat(this.g.get(Ho(this,M))));else{M=Array.from(this.g.values());for(let j=0;j<M.length;j++)F=F.concat(M[j])}return F},n.set=function(M,F){return Ia(this),this.i=null,M=Ho(this,M),gl(this,M)&&(this.h-=this.g.get(M).length),this.g.set(M,[F]),this.h+=1,this},n.get=function(M,F){return M?(M=this.V(M),0<M.length?String(M[0]):F):F};function yl(M,F,j){ju(M,F),0<j.length&&(M.i=null,M.g.set(Ho(M,F),E(j)),M.h+=j.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const M=[],F=Array.from(this.g.keys());for(var j=0;j<F.length;j++){var et=F[j];const jt=encodeURIComponent(String(et)),ye=this.V(et);for(et=0;et<ye.length;et++){var Tt=jt;ye[et]!==""&&(Tt+="="+encodeURIComponent(String(ye[et]))),M.push(Tt)}}return this.i=M.join("&")};function Ho(M,F){return F=String(F),M.j&&(F=F.toLowerCase()),F}function Mh(M,F){F&&!M.j&&(Ia(M),M.i=null,M.g.forEach(function(j,et){var Tt=et.toLowerCase();et!=Tt&&(ju(this,et),yl(this,Tt,j))},M)),M.j=F}function np(M,F){const j=new Qr;if(l.Image){const et=new Image;et.onload=v(na,j,"TestLoadImage: loaded",!0,F,et),et.onerror=v(na,j,"TestLoadImage: error",!1,F,et),et.onabort=v(na,j,"TestLoadImage: abort",!1,F,et),et.ontimeout=v(na,j,"TestLoadImage: timeout",!1,F,et),l.setTimeout(function(){et.ontimeout&&et.ontimeout()},1e4),et.src=M}else F(!1)}function Xu(M,F){const j=new Qr,et=new AbortController,Tt=setTimeout(()=>{et.abort(),na(j,"TestPingServer: timeout",!1,F)},1e4);fetch(M,{signal:et.signal}).then(jt=>{clearTimeout(Tt),jt.ok?na(j,"TestPingServer: ok",!0,F):na(j,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(Tt),na(j,"TestPingServer: error",!1,F)})}function na(M,F,j,et,Tt){try{Tt&&(Tt.onload=null,Tt.onerror=null,Tt.onabort=null,Tt.ontimeout=null),et(j)}catch{}}function Wu(){this.g=new Te}function Go(M,F,j){const et=j||"";try{En(M,function(Tt,jt){let ye=Tt;f(Tt)&&(ye=Yt(Tt)),F.push(et+jt+"="+encodeURIComponent(ye))})}catch(Tt){throw F.push(et+"type="+encodeURIComponent("_badmap")),Tt}}function Yu(M){this.l=M.Ub||null,this.j=M.eb||!1}S(Yu,fn),Yu.prototype.g=function(){return new Wl(this.l,this.j)},Yu.prototype.i=function(M){return function(){return M}}({});function Wl(M,F){Lt.call(this),this.D=M,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Wl,Lt),n=Wl.prototype,n.open=function(M,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=M,this.A=F,this.readyState=1,no(this)},n.send=function(M){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const F={headers:this.u,method:this.B,credentials:this.m,cache:void 0};M&&(F.body=M),(this.D||l).fetch(new Request(this.A,F)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ia(this)),this.readyState=0},n.Sa=function(M){if(this.g&&(this.l=M,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=M.headers,this.readyState=2,no(this)),this.g&&(this.readyState=3,no(this),this.g)))if(this.responseType==="arraybuffer")M.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in M){if(this.j=M.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ah(this)}else M.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ah(M){M.j.read().then(M.Pa.bind(M)).catch(M.ga.bind(M))}n.Pa=function(M){if(this.g){if(this.o&&M.value)this.response.push(M.value);else if(!this.o){var F=M.value?M.value:new Uint8Array(0);(F=this.v.decode(F,{stream:!M.done}))&&(this.response=this.responseText+=F)}M.done?ia(this):no(this),this.readyState==3&&Ah(this)}},n.Ra=function(M){this.g&&(this.response=this.responseText=M,ia(this))},n.Qa=function(M){this.g&&(this.response=M,ia(this))},n.ga=function(){this.g&&ia(this)};function ia(M){M.readyState=4,M.l=null,M.j=null,M.v=null,no(M)}n.setRequestHeader=function(M,F){this.u.append(M,F)},n.getResponseHeader=function(M){return this.h&&this.h.get(M.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const M=[],F=this.h.entries();for(var j=F.next();!j.done;)j=j.value,M.push(j[0]+": "+j[1]),j=F.next();return M.join(`\r
`)};function no(M){M.onreadystatechange&&M.onreadystatechange.call(M)}Object.defineProperty(Wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(M){this.m=M?"include":"same-origin"}});function $u(M){let F="";return B(M,function(j,et){F+=et,F+=":",F+=j,F+=`\r
`}),F}function Hr(M,F,j){t:{for(et in j){var et=!1;break t}et=!0}et||(j=$u(j),typeof M=="string"?j!=null&&encodeURIComponent(String(j)):Qe(M,F,j))}function ei(M){Lt.call(this),this.headers=new Map,this.o=M||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(ei,Lt);var Ku=/^https?$/i,Zu=["POST","PUT"];n=ei.prototype,n.Ha=function(M){this.J=M},n.ea=function(M,F,j,et){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+M);F=F?F.toUpperCase():"GET",this.D=M,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():to.g(),this.v=this.o?bt(this.o):bt(to),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(F,String(M),!0),this.B=!1}catch(jt){ip(this,jt);return}if(M=j||"",j=new Map(this.headers),et)if(Object.getPrototypeOf(et)===Object.prototype)for(var Tt in et)j.set(Tt,et[Tt]);else if(typeof et.keys=="function"&&typeof et.get=="function")for(const jt of et.keys())j.set(jt,et.get(jt));else throw Error("Unknown input type for opt_headers: "+String(et));et=Array.from(j.keys()).find(jt=>jt.toLowerCase()=="content-type"),Tt=l.FormData&&M instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Zu,F,void 0))||et||Tt||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[jt,ye]of j)this.g.setRequestHeader(jt,ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$l(this),this.u=!0,this.g.send(M),this.u=!1}catch(jt){ip(this,jt)}};function ip(M,F){M.h=!1,M.g&&(M.j=!0,M.g.abort(),M.j=!1),M.l=F,M.m=5,io(M),qo(M)}function io(M){M.A||(M.A=!0,le(M,"complete"),le(M,"error"))}n.abort=function(M){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=M||7,le(this,"complete"),le(this,"abort"),qo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qo(this,!0)),ei.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Yl(this):this.bb())},n.bb=function(){Yl(this)};function Yl(M){if(M.h&&typeof a<"u"&&(!M.v[1]||Pa(M)!=4||M.Z()!=2)){if(M.u&&Pa(M)==4)Se(M.Ea,0,M);else if(le(M,"readystatechange"),Pa(M)==4){M.h=!1;try{const ye=M.Z();t:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break t;default:F=!1}var j;if(!(j=F)){var et;if(et=ye===0){var Tt=String(M.D).match(ts)[1]||null;!Tt&&l.self&&l.self.location&&(Tt=l.self.location.protocol.slice(0,-1)),et=!Ku.test(Tt?Tt.toLowerCase():"")}j=et}if(j)le(M,"complete"),le(M,"success");else{M.m=6;try{var jt=2<Pa(M)?M.g.statusText:""}catch{jt=""}M.l=jt+" ["+M.Z()+"]",io(M)}}finally{qo(M)}}}}function qo(M,F){if(M.g){$l(M);const j=M.g,et=M.v[0]?()=>{}:null;M.g=null,M.v=null,F||le(M,"ready");try{j.onreadystatechange=et}catch{}}}function $l(M){M.I&&(l.clearTimeout(M.I),M.I=null)}n.isActive=function(){return!!this.g};function Pa(M){return M.g?M.g.readyState:0}n.Z=function(){try{return 2<Pa(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(M){if(this.g){var F=this.g.responseText;return M&&F.indexOf(M)==0&&(F=F.substring(M.length)),Oe(F)}};function rp(M){try{if(!M.g)return null;if("response"in M.g)return M.g.response;switch(M.H){case"":case"text":return M.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in M.g)return M.g.mozResponseArrayBuffer}return null}catch{return null}}function A_(M){const F={};M=(M.g&&2<=Pa(M)&&M.g.getAllResponseHeaders()||"").split(`\r
`);for(let et=0;et<M.length;et++){if(R(M[et]))continue;var j=V(M[et]);const Tt=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const jt=F[Tt]||[];F[Tt]=jt,jt.push(j)}L(F,function(et){return et.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qi(M,F,j){return j&&j.internalChannelParams&&j.internalChannelParams[M]||F}function ff(M){this.Aa=0,this.i=[],this.j=new Qr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qi("failFast",!1,M),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qi("baseRetryDelayMs",5e3,M),this.cb=Qi("retryDelaySeedMs",1e4,M),this.Wa=Qi("forwardChannelMaxRetries",2,M),this.wa=Qi("forwardChannelRequestTimeoutMs",2e4,M),this.pa=M&&M.xmlHttpFactory||void 0,this.Xa=M&&M.Tb||void 0,this.Ca=M&&M.useFetchStreams||!1,this.L=void 0,this.J=M&&M.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(M&&M.concurrentRequestLimit),this.Da=new Wu,this.P=M&&M.fastHandshake||!1,this.O=M&&M.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=M&&M.Rb||!1,M&&M.xa&&this.j.xa(),M&&M.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&M&&M.detectBufferingProxy||!1,this.ja=void 0,M&&M.longPollingTimeout&&0<M.longPollingTimeout&&(this.ja=M.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ff.prototype,n.la=8,n.G=1,n.connect=function(M,F,j,et){$n(0),this.W=M,this.H=F||{},j&&et!==void 0&&(this.H.OSID=j,this.H.OAID=et),this.F=this.X,this.I=up(this,null,this.W),df(this)};function wh(M){if(sp(M),M.G==3){var F=M.U++,j=ui(M.I);if(Qe(j,"SID",M.K),Qe(j,"RID",F),Qe(j,"TYPE","terminate"),Qu(M,j),F=new Na(M,M.j,F),F.L=2,F.v=Zi(ui(j)),j=!1,l.navigator&&l.navigator.sendBeacon)try{j=l.navigator.sendBeacon(F.v.toString(),"")}catch{}!j&&l.Image&&(new Image().src=F.v,j=!0),j||(F.g=ro(F.j,null),F.g.ea(F.v)),F.F=Date.now(),It(F)}Rh(M)}function hf(M){M.g&&(Kl(M),M.g.cancel(),M.g=null)}function sp(M){hf(M),M.u&&(l.clearTimeout(M.u),M.u=null),Ju(M),M.h.cancel(),M.s&&(typeof M.s=="number"&&l.clearTimeout(M.s),M.s=null)}function df(M){if(!Ue(M.h)&&!M.s){M.s=!0;var F=M.Ga;Z||$(),at||(Z(),at=!0),ct.add(F,M),M.B=0}}function pf(M,F){return Sn(M.h)>=M.h.j-(M.s?1:0)?!1:M.s?(M.i=F.D.concat(M.i),!0):M.G==1||M.G==2||M.B>=(M.Va?0:M.Wa)?!1:(M.s=Da(y(M.Ga,M,F),yf(M,M.B)),M.B++,!0)}n.Ga=function(M){if(this.s)if(this.s=null,this.G==1){if(!M){this.U=Math.floor(1e5*Math.random()),M=this.U++;const Tt=new Na(this,this.j,M);let jt=this.o;if(this.S&&(jt?(jt=U(jt),w(jt,this.S)):jt=this.S),this.m!==null||this.O||(Tt.H=jt,jt=null),this.P)t:{for(var F=0,j=0;j<this.i.length;j++){e:{var et=this.i[j];if("__data__"in et.map&&(et=et.map.__data__,typeof et=="string")){et=et.length;break e}et=void 0}if(et===void 0)break;if(F+=et,4096<F){F=j;break t}if(F===4096||j===this.i.length-1){F=j+1;break t}}F=1e3}else F=1e3;F=ap(this,Tt,F),j=ui(this.I),Qe(j,"RID",M),Qe(j,"CVER",22),this.D&&Qe(j,"X-HTTP-Session-Id",this.D),Qu(this,j),jt&&(this.O?F="headers="+encodeURIComponent(String($u(jt)))+"&"+F:this.m&&Hr(j,this.m,jt)),si(this.h,Tt),this.Ua&&Qe(j,"TYPE","init"),this.P?(Qe(j,"$req",F),Qe(j,"SID","null"),Tt.T=!0,Us(Tt,j,null)):Us(Tt,j,F),this.G=2}}else this.G==3&&(M?mf(this,M):this.i.length==0||Ue(this.h)||mf(this))};function mf(M,F){var j;F?j=F.l:j=M.U++;const et=ui(M.I);Qe(et,"SID",M.K),Qe(et,"RID",j),Qe(et,"AID",M.T),Qu(M,et),M.m&&M.o&&Hr(et,M.m,M.o),j=new Na(M,M.j,j,M.B+1),M.m===null&&(j.H=M.o),F&&(M.i=F.D.concat(M.i)),F=ap(M,j,1e3),j.I=Math.round(.5*M.wa)+Math.round(.5*M.wa*Math.random()),si(M.h,j),Us(j,et,F)}function Qu(M,F){M.H&&B(M.H,function(j,et){Qe(F,et,j)}),M.l&&En({},function(j,et){Qe(F,et,j)})}function ap(M,F,j){j=Math.min(M.i.length,j);var et=M.l?y(M.l.Na,M.l,M):null;t:{var Tt=M.i;let jt=-1;for(;;){const ye=["count="+j];jt==-1?0<j?(jt=Tt[0].g,ye.push("ofs="+jt)):jt=0:ye.push("ofs="+jt);let zn=!0;for(let Ji=0;Ji<j;Ji++){let Bn=Tt[Ji].g;const cr=Tt[Ji].map;if(Bn-=jt,0>Bn)jt=Math.max(0,Tt[Ji].g-100),zn=!1;else try{Go(cr,ye,"req"+Bn+"_")}catch{et&&et(cr)}}if(zn){et=ye.join("&");break t}}}return M=M.i.splice(0,j),F.D=M,et}function op(M){if(!M.g&&!M.u){M.Y=1;var F=M.Fa;Z||$(),at||(Z(),at=!0),ct.add(F,M),M.v=0}}function gf(M){return M.g||M.u||3<=M.v?!1:(M.Y++,M.u=Da(y(M.Fa,M),yf(M,M.v)),M.v++,!0)}n.Fa=function(){if(this.u=null,lp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var M=2*this.R;this.j.info("BP detection timer enabled: "+M),this.A=Da(y(this.ab,this),M)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$n(10),hf(this),lp(this))};function Kl(M){M.A!=null&&(l.clearTimeout(M.A),M.A=null)}function lp(M){M.g=new Na(M,M.j,"rpc",M.Y),M.m===null&&(M.g.H=M.o),M.g.O=0;var F=ui(M.qa);Qe(F,"RID","rpc"),Qe(F,"SID",M.K),Qe(F,"AID",M.T),Qe(F,"CI",M.F?"0":"1"),!M.F&&M.ja&&Qe(F,"TO",M.ja),Qe(F,"TYPE","xmlhttp"),Qu(M,F),M.m&&M.o&&Hr(F,M.m,M.o),M.L&&(M.g.I=M.L);var j=M.g;M=M.ia,j.L=1,j.v=Zi(ui(F)),j.m=null,j.P=!0,K(j,M)}n.Za=function(){this.C!=null&&(this.C=null,hf(this),gf(this),$n(19))};function Ju(M){M.C!=null&&(l.clearTimeout(M.C),M.C=null)}function Ch(M,F){var j=null;if(M.g==F){Ju(M),Kl(M),M.g=null;var et=2}else if(vn(M.h,F))j=F.D,Nn(M.h,F),et=1;else return;if(M.G!=0){if(F.o)if(et==1){j=F.m?F.m.length:0,F=Date.now()-F.F;var Tt=M.B;et=Yn(),le(et,new Hu(et,j)),df(M)}else op(M);else if(Tt=F.s,Tt==3||Tt==0&&0<F.X||!(et==1&&pf(M,F)||et==2&&gf(M)))switch(j&&0<j.length&&(F=M.h,F.i=F.i.concat(j)),Tt){case 1:_l(M,5);break;case 4:_l(M,10);break;case 3:_l(M,6);break;default:_l(M,2)}}}function yf(M,F){let j=M.Ta+Math.floor(Math.random()*M.cb);return M.isActive()||(j*=2),j*F}function _l(M,F){if(M.j.info("Error code "+F),F==2){var j=y(M.fb,M),et=M.Xa;const Tt=!et;et=new qi(et||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||kn(et,"https"),Zi(et),Tt?np(et.toString(),j):Xu(et.toString(),j)}else $n(2);M.G=0,M.l&&M.l.sa(F),Rh(M),sp(M)}n.fb=function(M){M?(this.j.info("Successfully pinged google.com"),$n(2)):(this.j.info("Failed to ping google.com"),$n(1))};function Rh(M){if(M.G=0,M.ka=[],M.l){const F=Ke(M.h);(F.length!=0||M.i.length!=0)&&(T(M.ka,F),T(M.ka,M.i),M.h.i.length=0,E(M.i),M.i.length=0),M.l.ra()}}function up(M,F,j){var et=j instanceof qi?ui(j):new qi(j);if(et.g!="")F&&(et.g=F+"."+et.g),lr(et,et.s);else{var Tt=l.location;et=Tt.protocol,F=F?F+"."+Tt.hostname:Tt.hostname,Tt=+Tt.port;var jt=new qi(null);et&&kn(jt,et),F&&(jt.g=F),Tt&&lr(jt,Tt),j&&(jt.l=j),et=jt}return j=M.D,F=M.ya,j&&F&&Qe(et,j,F),Qe(et,"VER",M.la),Qu(M,et),et}function ro(M,F,j){if(F&&!M.J)throw Error("Can't create secondary domain capable XhrIo object.");return F=M.Ca&&!M.pa?new ei(new Yu({eb:j})):new ei(M.pa),F.Ha(M.J),F}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oh(){}n=Oh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Dh(){}Dh.prototype.g=function(M,F){return new xs(M,F)};function xs(M,F){Lt.call(this),this.g=new ff(F),this.l=M,this.h=F&&F.messageUrlParams||null,M=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(M?M["X-Client-Protocol"]="webchannel":M={"X-Client-Protocol":"webchannel"}),this.g.o=M,M=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(M?M["X-WebChannel-Content-Type"]=F.messageContentType:M={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.va&&(M?M["X-WebChannel-Client-Profile"]=F.va:M={"X-WebChannel-Client-Profile":F.va}),this.g.S=M,(M=F&&F.Sb)&&!R(M)&&(this.g.m=M),this.v=F&&F.supportsCrossDomainXhr||!1,this.u=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!R(F)&&(this.g.D=F,M=this.h,M!==null&&F in M&&(M=this.h,F in M&&delete M[F])),this.j=new ao(this)}S(xs,Lt),xs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xs.prototype.close=function(){wh(this.g)},xs.prototype.o=function(M){var F=this.g;if(typeof M=="string"){var j={};j.__data__=M,M=j}else this.u&&(j={},j.__data__=Yt(M),M=j);F.i.push(new Ye(F.Ya++,M)),F.G==3&&df(F)},xs.prototype.N=function(){this.g.l=null,delete this.j,wh(this.g),delete this.g,xs.aa.N.call(this)};function jo(M){ne.call(this),M.__headers__&&(this.headers=M.__headers__,this.statusCode=M.__status__,delete M.__headers__,delete M.__status__);var F=M.__sm__;if(F){t:{for(const j in F){M=j;break t}M=void 0}(this.i=M)&&(M=this.i,F=F!==null&&M in F?F[M]:void 0),this.data=F}else this.data=M}S(jo,ne);function so(){_e.call(this),this.status=1}S(so,_e);function ao(M){this.g=M}S(ao,Oh),ao.prototype.ua=function(){le(this.g,"a")},ao.prototype.ta=function(M){le(this.g,new jo(M))},ao.prototype.sa=function(M){le(this.g,new so)},ao.prototype.ra=function(){le(this.g,"b")},Dh.prototype.createWebChannel=Dh.prototype.g,xs.prototype.send=xs.prototype.o,xs.prototype.open=xs.prototype.m,xs.prototype.close=xs.prototype.close,$F=function(){return new Dh},YF=function(){return Yn()},WF=ve,jR={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},an.NO_ERROR=0,an.TIMEOUT=8,an.HTTP_ERROR=6,XE=an,ea.COMPLETE="complete",XF=ea,Me.EventType=Xt,Xt.OPEN="a",Xt.CLOSE="b",Xt.ERROR="c",Xt.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,d0=Me,ei.prototype.listenOnce=ei.prototype.L,ei.prototype.getLastError=ei.prototype.Ka,ei.prototype.getLastErrorCode=ei.prototype.Ba,ei.prototype.getStatus=ei.prototype.Z,ei.prototype.getResponseJson=ei.prototype.Oa,ei.prototype.getResponseText=ei.prototype.oa,ei.prototype.send=ei.prototype.ea,ei.prototype.setWithCredentials=ei.prototype.Ha,jF=ei}).apply(typeof ME<"u"?ME:typeof self<"u"?self:typeof window<"u"?window:{});const ML="@firebase/firestore",AL="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}xa.UNAUTHENTICATED=new xa(null),xa.GOOGLE_CREDENTIALS=new xa("google-credentials-uid"),xa.FIRST_PARTY=new xa("first-party-uid"),xa.MOCK_USER=new xa("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b_="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=new BF("@firebase/firestore");function by(){return Bm.logLevel}function Ie(n,...t){if(Bm.logLevel<=Jn.DEBUG){const e=t.map($O);Bm.debug(`Firestore (${b_}): ${n}`,...e)}}function _h(n,...t){if(Bm.logLevel<=Jn.ERROR){const e=t.map($O);Bm.error(`Firestore (${b_}): ${n}`,...e)}}function t_(n,...t){if(Bm.logLevel<=Jn.WARN){const e=t.map($O);Bm.warn(`Firestore (${b_}): ${n}`,...e)}}function $O(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(n="Unexpected state"){const t=`FIRESTORE (${b_}) INTERNAL ASSERTION FAILED: `+n;throw _h(t),new Error(t)}function bi(n,t){n||rn()}function gn(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends x_{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ket{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(xa.UNAUTHENTICATED))}shutdown(){}}class Zet{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class Qet{constructor(t){this.t=t,this.currentUser=xa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){bi(this.o===void 0);let i=this.i;const r=c=>this.i!==i?(i=this.i,e(c)):Promise.resolve();let s=new Ld;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ld,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ld)}},0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(bi(typeof i.accessToken=="string"),new KF(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return bi(t===null||typeof t=="string"),new xa(t)}}class Jet{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=xa.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class tnt{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new Jet(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(xa.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wL{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ent{constructor(t,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Iet(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){bi(this.o===void 0);const i=s=>{s.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,Ie("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new wL(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(bi(typeof e.token=="string"),this.R=e.token,new wL(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nnt(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=nnt(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%62))}return i}}function Un(n,t){return n<t?-1:n>t?1:0}function XR(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=n.codePointAt(e),r=t.codePointAt(e);if(i!==r){if(i<128&&r<128)return Un(i,r);{const s=ZF(),a=int(s.encode(CL(n,e)),s.encode(CL(t,e)));return a!==0?a:Un(i,r)}}e+=i>65535?2:1}return Un(n.length,t.length)}function CL(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function int(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return Un(n[e],t[e]);return Un(n.length,t.length)}function e_(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=-62135596800,OL=1e6;class gs{static now(){return gs.fromMillis(Date.now())}static fromDate(t){return gs.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*OL);return new gs(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new qe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new qe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<RL)throw new qe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new qe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/OL}_compareTo(t){return this.seconds===t.seconds?Un(this.nanoseconds,t.nanoseconds):Un(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-RL;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{static fromTimestamp(t){return new hn(t)}static min(){return new hn(new gs(0,0))}static max(){return new hn(new gs(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL="__name__";class Uc{constructor(t,e,i){e===void 0?e=0:e>t.length&&rn(),i===void 0?i=t.length-e:i>t.length-e&&rn(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return Uc.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Uc?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=Uc.compareSegments(t.get(r),e.get(r));if(s!==0)return s}return Un(t.length,e.length)}static compareSegments(t,e){const i=Uc.isNumericId(t),r=Uc.isNumericId(e);return i&&!r?-1:!i&&r?1:i&&r?Uc.extractNumericId(t).compare(Uc.extractNumericId(e)):XR(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Pd.fromString(t.substring(4,t.length-2))}}class or extends Uc{construct(t,e,i){return new or(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new qe(pe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new or(e)}static emptyPath(){return new or([])}}const rnt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ys extends Uc{construct(t,e,i){return new Ys(t,e,i)}static isValidIdentifier(t){return rnt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ys.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===DL}static keyField(){return new Ys([DL])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(i.length===0)throw new qe(pe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new qe(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new qe(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=c,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new qe(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ys(e)}static emptyPath(){return new Ys([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.path=t}static fromPath(t){return new $e(or.fromString(t))}static fromName(t){return new $e(or.fromString(t).popFirst(5))}static empty(){return new $e(or.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&or.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return or.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new $e(new or(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=-1;function snt(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=hn.fromTimestamp(i===1e9?new gs(e+1,0):new gs(e,i));return new kd(r,$e.empty(),t)}function ant(n){return new kd(n.readTime,n.key,bx)}class kd{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new kd(hn.min(),$e.empty(),bx)}static max(){return new kd(hn.max(),$e.empty(),bx)}}function ont(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=$e.comparator(n.documentKey,t.documentKey),e!==0?e:Un(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lnt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class unt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S_(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==lnt)throw n;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&rn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new re((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof re?e:re.resolve(e)}catch(e){return re.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):re.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):re.reject(e)}static resolve(t){return new re((e,i)=>{e(t)})}static reject(t){return new re((e,i)=>{i(t)})}static waitFor(t){return new re((e,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&e()},c=>i(c))}),a=!0,s===r&&e()})}static or(t){let e=re.resolve(!1);for(const i of t)e=e.next(r=>r?re.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new re((i,r)=>{const s=t.length,a=new Array(s);let l=0;for(let c=0;c<s;c++){const f=c;e(t[f]).next(m=>{a[f]=m,++l,l===s&&i(a)},m=>r(m))}})}static doWhile(t,e){return new re((i,r)=>{const s=()=>{t()===!0?e().next(()=>{s()},r):i()};s()})}}function cnt(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function E_(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.oe(i),this._e=i=>e.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}bM.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=-1;function SM(n){return n==null}function uT(n){return n===0&&1/n==-1/0}function fnt(n){return typeof n=="number"&&Number.isInteger(n)&&!uT(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF="";function hnt(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=NL(t)),t=dnt(n.get(e),t);return NL(t)}function dnt(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="";break;case JF:e+="";break;default:e+=s}}return e}function NL(n){return n+JF+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Xm(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function t5(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(t,e){this.comparator=t,this.root=e||Xs.EMPTY}insert(t,e){return new Mr(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Xs.BLACK,null,null))}remove(t){return new Mr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Xs.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new AE(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new AE(this.root,t,this.comparator,!1)}getReverseIterator(){return new AE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new AE(this.root,t,this.comparator,!0)}}class AE{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Xs{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??Xs.RED,this.left=r??Xs.EMPTY,this.right=s??Xs.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new Xs(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Xs.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return Xs.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Xs.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Xs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rn();const t=this.left.check();if(t!==this.right.check())throw rn();return t+(this.isRed()?0:1)}}Xs.EMPTY=null,Xs.RED=!0,Xs.BLACK=!1;Xs.EMPTY=new class{constructor(){this.size=0}get key(){throw rn()}get value(){throw rn()}get color(){throw rn()}get left(){throw rn()}get right(){throw rn()}copy(t,e,i,r,s){return this}insert(t,e,i){return new Xs(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(t){this.comparator=t,this.data=new Mr(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new PL(this.data.getIterator())}getIteratorFrom(t){return new PL(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof ys)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new ys(this.comparator);return e.data=t,e}}class PL{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(t){this.fields=t,t.sort(Ys.comparator)}static empty(){return new Uu([])}unionWith(t){let e=new ys(Ys.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Uu(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return e_(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new e5("Invalid base64 string: "+s):s}}(t);return new Js(e)}static fromUint8Array(t){const e=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new Js(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Un(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Js.EMPTY_BYTE_STRING=new Js("");const pnt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hd(n){if(bi(!!n),typeof n=="string"){let t=0;const e=pnt.exec(n);if(bi(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Wr(n.seconds),nanos:Wr(n.nanos)}}function Wr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Gd(n){return typeof n=="string"?Js.fromBase64String(n):Js.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5="server_timestamp",i5="__type__",r5="__previous_value__",s5="__local_write_time__";function ZO(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[i5])===null||e===void 0?void 0:e.stringValue)===n5}function EM(n){const t=n.mapValue.fields[r5];return ZO(t)?EM(t):t}function Sx(n){const t=Hd(n.mapValue.fields[s5].timestampValue);return new gs(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mnt{constructor(t,e,i,r,s,a,l,c,f){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f}}const cT="(default)";class Ex{constructor(t,e){this.projectId=t,this.database=e||cT}static empty(){return new Ex("","")}get isDefaultDatabase(){return this.database===cT}isEqual(t){return t instanceof Ex&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5="__type__",gnt="__max__",wE={mapValue:{}},o5="__vector__",fT="value";function qd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ZO(n)?4:_nt(n)?9007199254740991:ynt(n)?10:11:rn()}function nf(n,t){if(n===t)return!0;const e=qd(n);if(e!==qd(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Sx(n).isEqual(Sx(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Hd(r.timestampValue),l=Hd(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,s){return Gd(r.bytesValue).isEqual(Gd(s.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,s){return Wr(r.geoPointValue.latitude)===Wr(s.geoPointValue.latitude)&&Wr(r.geoPointValue.longitude)===Wr(s.geoPointValue.longitude)}(n,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Wr(r.integerValue)===Wr(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Wr(r.doubleValue),l=Wr(s.doubleValue);return a===l?uT(a)===uT(l):isNaN(a)&&isNaN(l)}return!1}(n,t);case 9:return e_(n.arrayValue.values||[],t.arrayValue.values||[],nf);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(IL(a)!==IL(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!nf(a[c],l[c])))return!1;return!0}(n,t);default:return rn()}}function Tx(n,t){return(n.values||[]).find(e=>nf(e,t))!==void 0}function n_(n,t){if(n===t)return 0;const e=qd(n),i=qd(t);if(e!==i)return Un(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Un(n.booleanValue,t.booleanValue);case 2:return function(s,a){const l=Wr(s.integerValue||s.doubleValue),c=Wr(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,t);case 3:return LL(n.timestampValue,t.timestampValue);case 4:return LL(Sx(n),Sx(t));case 5:return XR(n.stringValue,t.stringValue);case 6:return function(s,a){const l=Gd(s),c=Gd(a);return l.compareTo(c)}(n.bytesValue,t.bytesValue);case 7:return function(s,a){const l=s.split("/"),c=a.split("/");for(let f=0;f<l.length&&f<c.length;f++){const m=Un(l[f],c[f]);if(m!==0)return m}return Un(l.length,c.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,a){const l=Un(Wr(s.latitude),Wr(a.latitude));return l!==0?l:Un(Wr(s.longitude),Wr(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return UL(n.arrayValue,t.arrayValue);case 10:return function(s,a){var l,c,f,m;const g=s.fields||{},y=a.fields||{},v=(l=g[fT])===null||l===void 0?void 0:l.arrayValue,S=(c=y[fT])===null||c===void 0?void 0:c.arrayValue,E=Un(((f=v==null?void 0:v.values)===null||f===void 0?void 0:f.length)||0,((m=S==null?void 0:S.values)===null||m===void 0?void 0:m.length)||0);return E!==0?E:UL(v,S)}(n.mapValue,t.mapValue);case 11:return function(s,a){if(s===wE.mapValue&&a===wE.mapValue)return 0;if(s===wE.mapValue)return 1;if(a===wE.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),f=a.fields||{},m=Object.keys(f);c.sort(),m.sort();for(let g=0;g<c.length&&g<m.length;++g){const y=XR(c[g],m[g]);if(y!==0)return y;const v=n_(l[c[g]],f[m[g]]);if(v!==0)return v}return Un(c.length,m.length)}(n.mapValue,t.mapValue);default:throw rn()}}function LL(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Un(n,t);const e=Hd(n),i=Hd(t),r=Un(e.seconds,i.seconds);return r!==0?r:Un(e.nanos,i.nanos)}function UL(n,t){const e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){const s=n_(e[r],i[r]);if(s)return s}return Un(e.length,i.length)}function i_(n){return WR(n)}function WR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=Hd(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Gd(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return $e.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(const s of e.values||[])r?r=!1:i+=",",i+=WR(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${WR(e.fields[a])}`;return r+"}"}(n.mapValue):rn()}function WE(n){switch(qd(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=EM(n);return t?16+WE(t):16;case 5:return 2*n.stringValue.length;case 6:return Gd(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+WE(s),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return Xm(i.fields,(s,a)=>{r+=s.length+WE(a)}),r}(n.mapValue);default:throw rn()}}function YR(n){return!!n&&"integerValue"in n}function QO(n){return!!n&&"arrayValue"in n}function zL(n){return!!n&&"nullValue"in n}function BL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function YE(n){return!!n&&"mapValue"in n}function ynt(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[a5])===null||e===void 0?void 0:e.stringValue)===o5}function L0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Xm(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=L0(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=L0(n.arrayValue.values[e]);return t}return Object.assign({},n)}function _nt(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===gnt}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(t){this.value=t}static empty(){return new kl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!YE(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=L0(e)}setAll(t){let e=Ys.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!e.isImmediateParentOf(l)){const c=this.getFieldsMap(e);this.applyChanges(c,i,r),i={},r=[],e=l.popLast()}a?i[l.lastSegment()]=L0(a):r.push(l.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());YE(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return nf(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];YE(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Xm(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new kl(L0(this.value))}}function l5(n){const t=[];return Xm(n.fields,(e,i)=>{const r=new Ys([e]);if(YE(i)){const s=l5(i.mapValue).fields;if(s.length===0)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new Uu(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(t,e,i,r,s,a,l){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new Sa(t,0,hn.min(),hn.min(),hn.min(),kl.empty(),0)}static newFoundDocument(t,e,i,r){return new Sa(t,1,e,hn.min(),i,r,0)}static newNoDocument(t,e){return new Sa(t,2,e,hn.min(),hn.min(),kl.empty(),0)}static newUnknownDocument(t,e){return new Sa(t,3,e,hn.min(),hn.min(),kl.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(hn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=kl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=kl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=hn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Sa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Sa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(t,e){this.position=t,this.inclusive=e}}function VL(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],a=n.position[r];if(s.field.isKeyField()?i=$e.comparator($e.fromName(a.referenceValue),e.key):i=n_(a,e.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function FL(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!nf(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(t,e="asc"){this.field=t,this.dir=e}}function vnt(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{}class ps extends u5{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new bnt(t,e,i):e==="array-contains"?new Tnt(t,i):e==="in"?new Mnt(t,i):e==="not-in"?new Ant(t,i):e==="array-contains-any"?new wnt(t,i):new ps(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new Snt(t,i):new Ent(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(n_(e,this.value)):e!==null&&qd(this.value)===qd(e)&&this.matchesComparison(n_(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return rn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rf extends u5{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new rf(t,e)}matches(t){return c5(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function c5(n){return n.op==="and"}function f5(n){return xnt(n)&&c5(n)}function xnt(n){for(const t of n.filters)if(t instanceof rf)return!1;return!0}function $R(n){if(n instanceof ps)return n.field.canonicalString()+n.op.toString()+i_(n.value);if(f5(n))return n.filters.map(t=>$R(t)).join(",");{const t=n.filters.map(e=>$R(e)).join(",");return`${n.op}(${t})`}}function h5(n,t){return n instanceof ps?function(i,r){return r instanceof ps&&i.op===r.op&&i.field.isEqual(r.field)&&nf(i.value,r.value)}(n,t):n instanceof rf?function(i,r){return r instanceof rf&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&h5(a,r.filters[l]),!0):!1}(n,t):void rn()}function d5(n){return n instanceof ps?function(e){return`${e.field.canonicalString()} ${e.op} ${i_(e.value)}`}(n):n instanceof rf?function(e){return e.op.toString()+" {"+e.getFilters().map(d5).join(" ,")+"}"}(n):"Filter"}class bnt extends ps{constructor(t,e,i){super(t,e,i),this.key=$e.fromName(i.referenceValue)}matches(t){const e=$e.comparator(t.key,this.key);return this.matchesComparison(e)}}class Snt extends ps{constructor(t,e){super(t,"in",e),this.keys=p5("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Ent extends ps{constructor(t,e){super(t,"not-in",e),this.keys=p5("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function p5(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>$e.fromName(i.referenceValue))}class Tnt extends ps{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return QO(e)&&Tx(e.arrayValue,this.value)}}class Mnt extends ps{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Tx(this.value.arrayValue,e)}}class Ant extends ps{constructor(t,e){super(t,"not-in",e)}matches(t){if(Tx(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!Tx(this.value.arrayValue,e)}}class wnt extends ps{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!QO(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Tx(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cnt{constructor(t,e=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.le=null}}function kL(n,t=null,e=[],i=[],r=null,s=null,a=null){return new Cnt(n,t,e,i,r,s,a)}function JO(n){const t=gn(n);if(t.le===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>$R(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),SM(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>i_(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>i_(i)).join(",")),t.le=e}return t.le}function tD(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!vnt(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!h5(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!FL(n.startAt,t.startAt)&&FL(n.endAt,t.endAt)}function KR(n){return $e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(t,e=null,i=[],r=[],s=null,a="F",l=null,c=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Rnt(n,t,e,i,r,s,a,l){return new TM(n,t,e,i,r,s,a,l)}function m5(n){return new TM(n)}function HL(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ont(n){return n.collectionGroup!==null}function U0(n){const t=gn(n);if(t.he===null){t.he=[];const e=new Set;for(const s of t.explicitOrderBy)t.he.push(s),e.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ys(Ys.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.he.push(new dT(s,i))}),e.has(Ys.keyField().canonicalString())||t.he.push(new dT(Ys.keyField(),i))}return t.he}function Zc(n){const t=gn(n);return t.Pe||(t.Pe=Dnt(t,U0(n))),t.Pe}function Dnt(n,t){if(n.limitType==="F")return kL(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new dT(r.field,s)});const e=n.endAt?new hT(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new hT(n.startAt.position,n.startAt.inclusive):null;return kL(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function ZR(n,t,e){return new TM(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function MM(n,t){return tD(Zc(n),Zc(t))&&n.limitType===t.limitType}function g5(n){return`${JO(Zc(n))}|lt:${n.limitType}`}function Sy(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>d5(r)).join(", ")}]`),SM(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>i_(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>i_(r)).join(",")),`Target(${i})`}(Zc(n))}; limitType=${n.limitType})`}function AM(n,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):$e.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,t)&&function(i,r){for(const s of U0(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(a,l,c){const f=VL(a,l,c);return a.inclusive?f<=0:f<0}(i.startAt,U0(i),r)||i.endAt&&!function(a,l,c){const f=VL(a,l,c);return a.inclusive?f>=0:f>0}(i.endAt,U0(i),r))}(n,t)}function Nnt(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function y5(n){return(t,e)=>{let i=!1;for(const r of U0(n)){const s=Int(r,t,e);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function Int(n,t,e){const i=n.field.isKeyField()?$e.comparator(t.key,e.key):function(s,a,l){const c=a.data.field(s),f=l.data.field(s);return c!==null&&f!==null?n_(c,f):rn()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return rn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Xm(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return t5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pnt=new Mr($e.comparator);function vh(){return Pnt}const _5=new Mr($e.comparator);function p0(...n){let t=_5;for(const e of n)t=t.insert(e.key,e);return t}function v5(n){let t=_5;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function _m(){return z0()}function x5(){return z0()}function z0(){return new Wm(n=>n.toString(),(n,t)=>n.isEqual(t))}const Lnt=new Mr($e.comparator),Unt=new ys($e.comparator);function Hn(...n){let t=Unt;for(const e of n)t=t.add(e);return t}const znt=new ys(Un);function Bnt(){return znt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uT(t)?"-0":t}}function b5(n){return{integerValue:""+n}}function Vnt(n,t){return fnt(t)?b5(t):eD(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(){this._=void 0}}function Fnt(n,t,e){return n instanceof pT?function(r,s){const a={fields:{[i5]:{stringValue:n5},[s5]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&ZO(s)&&(s=EM(s)),s&&(a.fields[r5]=s),{mapValue:a}}(e,t):n instanceof Mx?E5(n,t):n instanceof Ax?T5(n,t):function(r,s){const a=S5(r,s),l=GL(a)+GL(r.Ie);return YR(a)&&YR(r.Ie)?b5(l):eD(r.serializer,l)}(n,t)}function knt(n,t,e){return n instanceof Mx?E5(n,t):n instanceof Ax?T5(n,t):e}function S5(n,t){return n instanceof mT?function(i){return YR(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class pT extends wM{}class Mx extends wM{constructor(t){super(),this.elements=t}}function E5(n,t){const e=M5(t);for(const i of n.elements)e.some(r=>nf(r,i))||e.push(i);return{arrayValue:{values:e}}}class Ax extends wM{constructor(t){super(),this.elements=t}}function T5(n,t){let e=M5(t);for(const i of n.elements)e=e.filter(r=>!nf(r,i));return{arrayValue:{values:e}}}class mT extends wM{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function GL(n){return Wr(n.integerValue||n.doubleValue)}function M5(n){return QO(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Hnt(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof Mx&&r instanceof Mx||i instanceof Ax&&r instanceof Ax?e_(i.elements,r.elements,nf):i instanceof mT&&r instanceof mT?nf(i.Ie,r.Ie):i instanceof pT&&r instanceof pT}(n.transform,t.transform)}class Gnt{constructor(t,e){this.version=t,this.transformResults=e}}class uh{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new uh}static exists(t){return new uh(void 0,t)}static updateTime(t){return new uh(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function $E(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class CM{}function A5(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new C5(n.key,uh.none()):new Xx(n.key,n.data,uh.none());{const e=n.data,i=kl.empty();let r=new ys(Ys.comparator);for(let s of t.fields)if(!r.has(s)){let a=e.field(s);a===null&&s.length>1&&(s=s.popLast(),a=e.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new Ym(n.key,i,new Uu(r.toArray()),uh.none())}}function qnt(n,t,e){n instanceof Xx?function(r,s,a){const l=r.value.clone(),c=jL(r.fieldTransforms,s,a.transformResults);l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,t,e):n instanceof Ym?function(r,s,a){if(!$E(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=jL(r.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(w5(r)),c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,t,e):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,e)}function B0(n,t,e,i){return n instanceof Xx?function(s,a,l,c){if(!$E(s.precondition,a))return l;const f=s.value.clone(),m=XL(s.fieldTransforms,c,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(n,t,e,i):n instanceof Ym?function(s,a,l,c){if(!$E(s.precondition,a))return l;const f=XL(s.fieldTransforms,c,a),m=a.data;return m.setAll(w5(s)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,t,e,i):function(s,a,l){return $E(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,t,e)}function jnt(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=S5(i.transform,r||null);s!=null&&(e===null&&(e=kl.empty()),e.set(i.field,s))}return e||null}function qL(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&e_(i,r,(s,a)=>Hnt(s,a))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Xx extends CM{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ym extends CM{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function w5(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function jL(n,t,e){const i=new Map;bi(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,knt(a,l,e[r]))}return i}function XL(n,t,e){const i=new Map;for(const r of n){const s=r.transform,a=e.data.field(r.field);i.set(r.field,Fnt(s,a,t))}return i}class C5 extends CM{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xnt extends CM{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wnt{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&qnt(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=B0(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=B0(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=x5();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=e.has(r.key)?null:l;const c=A5(a,l);c!==null&&i.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(hn.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Hn())}isEqual(t){return this.batchId===t.batchId&&e_(this.mutations,t.mutations,(e,i)=>qL(e,i))&&e_(this.baseMutations,t.baseMutations,(e,i)=>qL(e,i))}}class nD{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){bi(t.mutations.length===i.length);let r=function(){return Lnt}();const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new nD(t,e,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ynt{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $nt{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var as,Qn;function Knt(n){switch(n){case pe.OK:return rn();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return rn()}}function R5(n){if(n===void 0)return _h("GRPC error has no .code"),pe.UNKNOWN;switch(n){case as.OK:return pe.OK;case as.CANCELLED:return pe.CANCELLED;case as.UNKNOWN:return pe.UNKNOWN;case as.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case as.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case as.INTERNAL:return pe.INTERNAL;case as.UNAVAILABLE:return pe.UNAVAILABLE;case as.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case as.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case as.NOT_FOUND:return pe.NOT_FOUND;case as.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case as.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case as.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case as.ABORTED:return pe.ABORTED;case as.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case as.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case as.DATA_LOSS:return pe.DATA_LOSS;default:return rn()}}(Qn=as||(as={}))[Qn.OK=0]="OK",Qn[Qn.CANCELLED=1]="CANCELLED",Qn[Qn.UNKNOWN=2]="UNKNOWN",Qn[Qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qn[Qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qn[Qn.NOT_FOUND=5]="NOT_FOUND",Qn[Qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qn[Qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qn[Qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qn[Qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qn[Qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qn[Qn.ABORTED=10]="ABORTED",Qn[Qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qn[Qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qn[Qn.INTERNAL=13]="INTERNAL",Qn[Qn.UNAVAILABLE=14]="UNAVAILABLE",Qn[Qn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Znt=new Pd([4294967295,4294967295],0);function WL(n){const t=ZF().encode(n),e=new qF;return e.update(t),new Uint8Array(e.digest())}function YL(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Pd([e,i],0),new Pd([r,s],0)]}class iD{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new m0(`Invalid padding: ${e}`);if(i<0)throw new m0(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new m0(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new m0(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*t.length-e,this.de=Pd.fromNumber(this.Ee)}Ae(t,e,i){let r=t.add(e.multiply(Pd.fromNumber(i)));return r.compare(Znt)===1&&(r=new Pd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const e=WL(t),[i,r]=YL(e);for(let s=0;s<this.hashCount;s++){const a=this.Ae(i,r,s);if(!this.Re(a))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new iD(s,r,e);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.Ee===0)return;const e=WL(t),[i,r]=YL(e);for(let s=0;s<this.hashCount;s++){const a=this.Ae(i,r,s);this.Ve(a)}}Ve(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class m0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,Wx.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new RM(hn.min(),r,new Mr(Un),vh(),Hn())}}class Wx{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Wx(i,e,Hn(),Hn(),Hn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(t,e,i,r){this.me=t,this.removedTargetIds=e,this.key=i,this.fe=r}}class O5{constructor(t,e){this.targetId=t,this.ge=e}}class D5{constructor(t,e,i=Js.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class $L{constructor(){this.pe=0,this.ye=KL(),this.we=Js.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Hn(),e=Hn(),i=Hn();return this.ye.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:rn()}}),new Wx(this.we,this.Se,t,e,i)}Me(){this.be=!1,this.ye=KL()}xe(t,e){this.be=!0,this.ye=this.ye.insert(t,e)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,bi(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class Qnt{constructor(t){this.ke=t,this.qe=new Map,this.Qe=vh(),this.$e=CE(),this.Ue=CE(),this.Ke=new Mr(Un)}We(t){for(const e of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(e,t.fe):this.ze(e,t.key,t.fe);for(const e of t.removedTargetIds)this.ze(e,t.key,t.fe)}je(t){this.forEachTarget(t,e=>{const i=this.He(e);switch(t.state){case 0:this.Je(e)&&i.Ce(t.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(t.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(e);break;case 3:this.Je(e)&&(i.Le(),i.Ce(t.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),i.Ce(t.resumeToken));break;default:rn()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.qe.forEach((i,r)=>{this.Je(r)&&e(r)})}Ze(t){const e=t.targetId,i=t.ge.count,r=this.Xe(e);if(r){const s=r.target;if(KR(s))if(i===0){const a=new $e(s.path);this.ze(e,a,Sa.newNoDocument(a,hn.min()))}else bi(i===1);else{const a=this.et(e);if(a!==i){const l=this.tt(t),c=l?this.nt(l,t,a):1;if(c!==0){this.Ye(e);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,f)}}}}}tt(t){const e=t.ge.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=e;let a,l;try{a=Gd(i).toUint8Array()}catch(c){if(c instanceof e5)return t_("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new iD(a,r,s)}catch(c){return t_(c instanceof m0?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ee===0?null:l}nt(t,e,i){return e.ge.count===i-this.st(t,e.targetId)?0:2}st(t,e){const i=this.ke.getRemoteKeysForTarget(e);let r=0;return i.forEach(s=>{const a=this.ke.it(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.ze(e,s,null),r++)}),r}ot(t){const e=new Map;this.qe.forEach((s,a)=>{const l=this.Xe(a);if(l){if(s.current&&KR(l.target)){const c=new $e(l.target.path);this._t(c).has(a)||this.ut(a,c)||this.ze(a,c,Sa.newNoDocument(c,t))}s.ve&&(e.set(a,s.Fe()),s.Me())}});let i=Hn();this.Ue.forEach((s,a)=>{let l=!0;a.forEachWhile(c=>{const f=this.Xe(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.Qe.forEach((s,a)=>a.setReadTime(t));const r=new RM(t,e,this.Ke,this.Qe,i);return this.Qe=vh(),this.$e=CE(),this.Ue=CE(),this.Ke=new Mr(Un),r}Ge(t,e){if(!this.Je(t))return;const i=this.ut(t,e.key)?2:0;this.He(t).xe(e.key,i),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(t)),this.Ue=this.Ue.insert(e.key,this.ct(e.key).add(t))}ze(t,e,i){if(!this.Je(t))return;const r=this.He(t);this.ut(t,e)?r.xe(e,1):r.Oe(e),this.Ue=this.Ue.insert(e,this.ct(e).delete(t)),this.Ue=this.Ue.insert(e,this.ct(e).add(t)),i&&(this.Qe=this.Qe.insert(e,i))}removeTarget(t){this.qe.delete(t)}et(t){const e=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let e=this.qe.get(t);return e||(e=new $L,this.qe.set(t,e)),e}ct(t){let e=this.Ue.get(t);return e||(e=new ys(Un),this.Ue=this.Ue.insert(t,e)),e}_t(t){let e=this.$e.get(t);return e||(e=new ys(Un),this.$e=this.$e.insert(t,e)),e}Je(t){const e=this.Xe(t)!==null;return e||Ie("WatchChangeAggregator","Detected inactive target",t),e}Xe(t){const e=this.qe.get(t);return e&&e.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new $L),this.ke.getRemoteKeysForTarget(t).forEach(e=>{this.ze(t,e,null)})}ut(t,e){return this.ke.getRemoteKeysForTarget(t).has(e)}}function CE(){return new Mr($e.comparator)}function KL(){return new Mr($e.comparator)}const Jnt={asc:"ASCENDING",desc:"DESCENDING"},tit={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eit={and:"AND",or:"OR"};class nit{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function QR(n,t){return n.useProto3Json||SM(t)?t:{value:t}}function gT(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function N5(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function iit(n,t){return gT(n,t.toTimestamp())}function Qc(n){return bi(!!n),hn.fromTimestamp(function(e){const i=Hd(e);return new gs(i.seconds,i.nanos)}(n))}function rD(n,t){return JR(n,t).canonicalString()}function JR(n,t){const e=function(r){return new or(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function I5(n){const t=or.fromString(n);return bi(B5(t)),t}function t2(n,t){return rD(n.databaseId,t.path)}function TC(n,t){const e=I5(t);if(e.get(1)!==n.databaseId.projectId)throw new qe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new qe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new $e(L5(e))}function P5(n,t){return rD(n.databaseId,t)}function rit(n){const t=I5(n);return t.length===4?or.emptyPath():L5(t)}function e2(n){return new or(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function L5(n){return bi(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function ZL(n,t,e){return{name:t2(n,t),fields:e.value.mapValue.fields}}function sit(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:rn()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(f,m){return f.useProto3Json?(bi(m===void 0||typeof m=="string"),Js.fromBase64String(m||"")):(bi(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Js.fromUint8Array(m||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(f){const m=f.code===void 0?pe.UNKNOWN:R5(f.code);return new qe(m,f.message||"")}(a);e=new D5(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=TC(n,i.document.name),s=Qc(i.document.updateTime),a=i.document.createTime?Qc(i.document.createTime):hn.min(),l=new kl({mapValue:{fields:i.document.fields}}),c=Sa.newFoundDocument(r,s,a,l),f=i.targetIds||[],m=i.removedTargetIds||[];e=new KE(f,m,c.key,c)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=TC(n,i.document),s=i.readTime?Qc(i.readTime):hn.min(),a=Sa.newNoDocument(r,s),l=i.removedTargetIds||[];e=new KE([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=TC(n,i.document),s=i.removedTargetIds||[];e=new KE([],s,r,null)}else{if(!("filter"in t))return rn();{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new $nt(r,s),l=i.targetId;e=new O5(l,a)}}return e}function ait(n,t){let e;if(t instanceof Xx)e={update:ZL(n,t.key,t.value)};else if(t instanceof C5)e={delete:t2(n,t.key)};else if(t instanceof Ym)e={update:ZL(n,t.key,t.data),updateMask:mit(t.fieldMask)};else{if(!(t instanceof Xnt))return rn();e={verify:t2(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof pT)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Mx)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ax)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof mT)return{fieldPath:a.field.canonicalString(),increment:l.Ie};throw rn()}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:iit(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:rn()}(n,t.precondition)),e}function oit(n,t){return n&&n.length>0?(bi(t!==void 0),n.map(e=>function(r,s){let a=r.updateTime?Qc(r.updateTime):Qc(s);return a.isEqual(hn.min())&&(a=Qc(s)),new Gnt(a,r.transformResults||[])}(e,t))):[]}function lit(n,t){return{documents:[P5(n,t.path)]}}function uit(n,t){const e={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=P5(n,r);const s=function(f){if(f.length!==0)return z5(rf.create(f,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const a=function(f){if(f.length!==0)return f.map(m=>function(y){return{field:Ey(y.field),direction:hit(y.dir)}}(m))}(t.orderBy);a&&(e.structuredQuery.orderBy=a);const l=QR(n,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(t.endAt)),{ht:e,parent:r}}function cit(n){let t=rit(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){bi(i===1);const m=e.from[0];m.allDescendants?r=m.collectionId:t=t.child(m.collectionId)}let s=[];e.where&&(s=function(g){const y=U5(g);return y instanceof rf&&f5(y)?y.getFilters():[y]}(e.where));let a=[];e.orderBy&&(a=function(g){return g.map(y=>function(S){return new dT(Ty(S.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(e.orderBy));let l=null;e.limit&&(l=function(g){let y;return y=typeof g=="object"?g.value:g,SM(y)?null:y}(e.limit));let c=null;e.startAt&&(c=function(g){const y=!!g.before,v=g.values||[];return new hT(v,y)}(e.startAt));let f=null;return e.endAt&&(f=function(g){const y=!g.before,v=g.values||[];return new hT(v,y)}(e.endAt)),Rnt(t,r,a,s,l,"F",c,f)}function fit(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rn()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function U5(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Ty(e.unaryFilter.field);return ps.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ty(e.unaryFilter.field);return ps.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ty(e.unaryFilter.field);return ps.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ty(e.unaryFilter.field);return ps.create(a,"!=",{nullValue:"NULL_VALUE"});default:return rn()}}(n):n.fieldFilter!==void 0?function(e){return ps.create(Ty(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rn()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return rf.create(e.compositeFilter.filters.map(i=>U5(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return rn()}}(e.compositeFilter.op))}(n):rn()}function hit(n){return Jnt[n]}function dit(n){return tit[n]}function pit(n){return eit[n]}function Ey(n){return{fieldPath:n.canonicalString()}}function Ty(n){return Ys.fromServerFormat(n.fieldPath)}function z5(n){return n instanceof ps?function(e){if(e.op==="=="){if(BL(e.value))return{unaryFilter:{field:Ey(e.field),op:"IS_NAN"}};if(zL(e.value))return{unaryFilter:{field:Ey(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(BL(e.value))return{unaryFilter:{field:Ey(e.field),op:"IS_NOT_NAN"}};if(zL(e.value))return{unaryFilter:{field:Ey(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ey(e.field),op:dit(e.op),value:e.value}}}(n):n instanceof rf?function(e){const i=e.getFilters().map(r=>z5(r));return i.length===1?i[0]:{compositeFilter:{op:pit(e.op),filters:i}}}(n):rn()}function mit(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function B5(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(t,e,i,r,s=hn.min(),a=hn.min(),l=Js.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new Rd(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Rd(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Rd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Rd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class git{constructor(t){this.Tt=t}}function yit(n){const t=cit({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ZR(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _it{constructor(){this.Tn=new vit}addToCollectionParentIndex(t,e){return this.Tn.add(e),re.resolve()}getCollectionParents(t,e){return re.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return re.resolve()}deleteFieldIndex(t,e){return re.resolve()}deleteAllFieldIndexes(t){return re.resolve()}createTargetIndexes(t,e){return re.resolve()}getDocumentsMatchingTarget(t,e){return re.resolve(null)}getIndexType(t,e){return re.resolve(0)}getFieldIndexes(t,e){return re.resolve([])}getNextCollectionGroupToUpdate(t){return re.resolve(null)}getMinOffset(t,e){return re.resolve(kd.min())}getMinOffsetFromCollectionGroup(t,e){return re.resolve(kd.min())}updateCollectionGroup(t,e,i){return re.resolve()}updateIndexEntries(t,e){return re.resolve()}}class vit{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new ys(or.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new ys(or.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},V5=41943040;class Ro{static withCacheSize(t){return new Ro(t,Ro.DEFAULT_COLLECTION_PERCENTILE,Ro.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ro.DEFAULT_COLLECTION_PERCENTILE=10,Ro.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ro.DEFAULT=new Ro(V5,Ro.DEFAULT_COLLECTION_PERCENTILE,Ro.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ro.DISABLED=new Ro(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new r_(0)}static Kn(){return new r_(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL="LruGarbageCollector",xit=1048576;function tU([n,t],[e,i]){const r=Un(n,e);return r===0?Un(t,i):r}class bit{constructor(t){this.Hn=t,this.buffer=new ys(tU),this.Jn=0}Yn(){return++this.Jn}Zn(t){const e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();tU(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Sit{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Ie(JL,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){E_(e)?Ie(JL,"Ignoring IndexedDB error during garbage collection: ",e):await S_(e)}await this.er(3e5)})}}class Eit{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return re.resolve(bM.ae);const i=new bit(e);return this.tr.forEachTarget(t,r=>i.Zn(r.sequenceNumber)).next(()=>this.tr.rr(t,r=>i.Zn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.tr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(QL)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QL):this.ir(t,e))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let i,r,s,a,l,c,f;const m=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(t,r))).next(g=>(i=g,l=Date.now(),this.removeTargets(t,i,e))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(t,i))).next(g=>(f=Date.now(),by()<=Jn.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${g} documents in `+(f-c)+`ms
Total Duration: ${f-m}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}function Tit(n,t){return new Eit(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mit{constructor(){this.changes=new Wm(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Sa.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?re.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ait{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wit{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&B0(i.mutation,r,Uu.empty(),gs.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Hn()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Hn()){const r=_m();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let a=p0();return s.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(t,e){const i=_m();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Hn()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{e.set(a,l)})})}computeViews(t,e,i,r){let s=vh();const a=z0(),l=function(){return z0()}();return e.forEach((c,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof Ym)?s=s.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),B0(m.mutation,f,m.mutation.getFieldMask(),gs.now())):a.set(f.key,Uu.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((f,m)=>a.set(f,m)),e.forEach((f,m)=>{var g;return l.set(f,new Ait(m,(g=a.get(f))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(t,e){const i=z0();let r=new Mr((a,l)=>a-l),s=Hn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(a=>{for(const l of a)l.keys().forEach(c=>{const f=e.get(c);if(f===null)return;let m=i.get(c)||Uu.empty();m=l.applyToLocalView(f,m),i.set(c,m);const g=(r.get(l.batchId)||Hn()).add(c);r=r.insert(l.batchId,g)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,m=c.value,g=x5();m.forEach(y=>{if(!s.has(y)){const v=A5(e.get(y),i.get(y));v!==null&&g.set(y,v),s=s.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(t,f,g))}return re.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(a){return $e.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Ont(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):re.resolve(_m());let l=bx,c=s;return a.next(f=>re.forEach(f,(m,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(m)?re.resolve():this.remoteDocumentCache.getEntry(t,m).next(y=>{c=c.insert(m,y)}))).next(()=>this.populateOverlays(t,f,s)).next(()=>this.computeViews(t,c,f,Hn())).next(m=>({batchId:l,changes:v5(m)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new $e(e)).next(i=>{let r=p0();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const s=e.collectionGroup;let a=p0();return this.indexManager.getCollectionParents(t,s).next(l=>re.forEach(l,c=>{const f=function(g,y){return new TM(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(e,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,f,i,r).next(m=>{m.forEach((g,y)=>{a=a.insert(g,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,e,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,s,r))).next(a=>{s.forEach((c,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,Sa.newInvalidDocument(m)))});let l=p0();return a.forEach((c,f)=>{const m=s.get(c);m!==void 0&&B0(m.mutation,f,Uu.empty(),gs.now()),AM(e,f)&&(l=l.insert(c,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cit{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return re.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:Qc(r.createTime)}}(e)),re.resolve()}getNamedQuery(t,e){return re.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,function(r){return{name:r.name,query:yit(r.bundledQuery),readTime:Qc(r.readTime)}}(e)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rit{constructor(){this.overlays=new Mr($e.comparator),this.Rr=new Map}getOverlay(t,e){return re.resolve(this.overlays.get(e))}getOverlays(t,e){const i=_m();return re.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.Et(t,e,s)}),re.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.Rr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(i)),re.resolve()}getOverlaysForCollection(t,e,i){const r=_m(),s=e.length+1,a=new $e(e.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!e.isPrefixOf(f.path))break;f.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return re.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Mr((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===e&&f.largestBatchId>i){let m=s.get(f.largestBatchId);m===null&&(m=_m(),s=s.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const l=_m(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,m)=>l.set(f,m)),!(l.size()>=r)););return re.resolve(l)}Et(t,e,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.Rr.get(r.largestBatchId).delete(i.key);this.Rr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new Ynt(e,i));let s=this.Rr.get(e);s===void 0&&(s=Hn(),this.Rr.set(e,s)),this.Rr.set(e,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oit{constructor(){this.sessionToken=Js.EMPTY_BYTE_STRING}getSessionToken(t){return re.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this.Vr=new ys(Ds.mr),this.gr=new ys(Ds.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){const i=new Ds(t,e);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.wr(new Ds(t,e))}Sr(t,e){t.forEach(i=>this.removeReference(i,e))}br(t){const e=new $e(new or([])),i=new Ds(e,t),r=new Ds(e,t+1),s=[];return this.gr.forEachInRange([i,r],a=>{this.wr(a),s.push(a.key)}),s}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const e=new $e(new or([])),i=new Ds(e,t),r=new Ds(e,t+1);let s=Hn();return this.gr.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const e=new Ds(t,0),i=this.Vr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class Ds{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return $e.comparator(t.key,e.key)||Un(t.Cr,e.Cr)}static pr(t,e){return Un(t.Cr,e.Cr)||$e.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dit{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new ys(Ds.mr)}checkEmpty(t){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Wnt(s,e,i,r);this.mutationQueue.push(a);for(const l of r)this.Mr=this.Mr.add(new Ds(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return re.resolve(a)}lookupMutationBatch(t,e){return re.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=this.Nr(i),s=r<0?0:r;return re.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?KO:this.Fr-1)}getAllMutationBatches(t){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Ds(e,0),r=new Ds(e,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([i,r],a=>{const l=this.Or(a.Cr);s.push(l)}),re.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new ys(Un);return e.forEach(r=>{const s=new Ds(r,0),a=new Ds(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,a],l=>{i=i.add(l.Cr)})}),re.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;$e.isDocumentKey(s)||(s=s.child(""));const a=new Ds(new $e(s),0);let l=new ys(Un);return this.Mr.forEachWhile(c=>{const f=c.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(l=l.add(c.Cr)),!0)},a),re.resolve(this.Br(l))}Br(t){const e=[];return t.forEach(i=>{const r=this.Or(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){bi(this.Lr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return re.forEach(e.mutations,r=>{const s=new Ds(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Mr=i})}qn(t){}containsKey(t,e){const i=new Ds(e,0),r=this.Mr.firstAfterOrEqual(i);return re.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,re.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nit{constructor(t){this.kr=t,this.docs=function(){return new Mr($e.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,a=this.kr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return re.resolve(i?i.document.mutableCopy():Sa.newInvalidDocument(e))}getEntries(t,e){let i=vh();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Sa.newInvalidDocument(r))}),re.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=vh();const a=e.path,l=new $e(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:m}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||ont(ant(m),i)<=0||(r.has(m.key)||AM(e,m))&&(s=s.insert(m.key,m.mutableCopy()))}return re.resolve(s)}getAllFromCollectionGroup(t,e,i,r){rn()}qr(t,e){return re.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new Iit(this)}getSize(t){return re.resolve(this.size)}}class Iit extends Mit{constructor(t){super(),this.Ir=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Ir.addEntry(t,r)):this.Ir.removeEntry(i)}),re.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pit{constructor(t){this.persistence=t,this.Qr=new Wm(e=>JO(e),tD),this.lastRemoteSnapshotVersion=hn.min(),this.highestTargetId=0,this.$r=0,this.Ur=new sD,this.targetCount=0,this.Kr=r_.Un()}forEachTarget(t,e){return this.Qr.forEach((i,r)=>e(r)),re.resolve()}getLastRemoteSnapshotVersion(t){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return re.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.$r&&(this.$r=e),re.resolve()}zn(t){this.Qr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Kr=new r_(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,re.resolve()}updateTargetData(t,e){return this.zn(e),re.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Ur.br(e.targetId),this.targetCount-=1,re.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Qr.forEach((a,l)=>{l.sequenceNumber<=e&&i.get(l.targetId)===null&&(this.Qr.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),re.waitFor(s).next(()=>r)}getTargetCount(t){return re.resolve(this.targetCount)}getTargetData(t,e){const i=this.Qr.get(e)||null;return re.resolve(i)}addMatchingKeys(t,e,i){return this.Ur.yr(e,i),re.resolve()}removeMatchingKeys(t,e,i){this.Ur.Sr(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),re.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Ur.br(e),re.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Ur.vr(e);return re.resolve(i)}containsKey(t,e){return re.resolve(this.Ur.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new bM(0),this.zr=!1,this.zr=!0,this.jr=new Oit,this.referenceDelegate=t(this),this.Hr=new Pit(this),this.indexManager=new _it,this.remoteDocumentCache=function(r){return new Nit(r)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new git(e),this.Yr=new Cit(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Rit,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Wr[t.toKey()];return i||(i=new Dit(e,this.referenceDelegate),this.Wr[t.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,i){Ie("MemoryPersistence","Starting transaction:",t);const r=new Lit(this.Gr.next());return this.referenceDelegate.Zr(),i(r).next(s=>this.referenceDelegate.Xr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}ei(t,e){return re.or(Object.values(this.Wr).map(i=>()=>i.containsKey(t,e)))}}class Lit extends unt{constructor(t){super(),this.currentSequenceNumber=t}}class aD{constructor(t){this.persistence=t,this.ti=new sD,this.ni=null}static ri(t){return new aD(t)}get ii(){if(this.ni)return this.ni;throw rn()}addReference(t,e,i){return this.ti.addReference(i,e),this.ii.delete(i.toString()),re.resolve()}removeReference(t,e,i){return this.ti.removeReference(i,e),this.ii.add(i.toString()),re.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),re.resolve()}removeTarget(t,e){this.ti.br(e.targetId).forEach(r=>this.ii.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.ii.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Zr(){this.ni=new Set}Xr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.ii,i=>{const r=$e.fromPath(i);return this.si(t,r).next(s=>{s||e.removeEntry(r,hn.min())})}).next(()=>(this.ni=null,e.apply(t)))}updateLimboDocument(t,e){return this.si(t,e).next(i=>{i?this.ii.delete(e.toString()):this.ii.add(e.toString())})}Jr(t){return 0}si(t,e){return re.or([()=>re.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}}class yT{constructor(t,e){this.persistence=t,this.oi=new Wm(i=>hnt(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=Tit(this,e)}static ri(t,e){return new yT(t,e)}Zr(){}Xr(t){return re.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){const e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}sr(t){let e=0;return this.rr(t,i=>{e++}).next(()=>e)}rr(t,e){return re.forEach(this.oi,(i,r)=>this.ar(t,i,r).next(s=>s?re.resolve():e(r)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.qr(t,a=>this.ar(t,a,e).next(l=>{l||(i++,s.removeEntry(a,hn.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),re.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.oi.set(i,t.currentSequenceNumber),re.resolve()}removeReference(t,e,i){return this.oi.set(i,t.currentSequenceNumber),re.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),re.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=WE(t.data.value)),e}ar(t,e,i){return re.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.oi.get(e);return re.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Hi=i,this.Ji=r}static Yi(t,e){let i=Hn(),r=Hn();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new oD(t,e.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uit{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zit{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return Ctt()?8:cnt(Att())>0?6:4}()}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,i,r){const s={result:null};return this.rs(t,e).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ss(t,e,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new Uit;return this._s(t,e,a).next(l=>{if(s.result=l,this.Xi)return this.us(t,e,a,l.size)})}).next(()=>s.result)}us(t,e,i,r){return i.documentReadCount<this.es?(by()<=Jn.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",Sy(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),re.resolve()):(by()<=Jn.DEBUG&&Ie("QueryEngine","Query:",Sy(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ts*r?(by()<=Jn.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",Sy(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Zc(e))):re.resolve())}rs(t,e){if(HL(e))return re.resolve(null);let i=Zc(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=ZR(e,null,"F"),i=Zc(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=Hn(...s);return this.ns.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(c=>{const f=this.cs(e,l);return this.ls(e,f,a,c.readTime)?this.rs(t,ZR(e,null,"F")):this.hs(t,f,e,c)}))})))}ss(t,e,i,r){return HL(e)||r.isEqual(hn.min())?re.resolve(null):this.ns.getDocuments(t,i).next(s=>{const a=this.cs(e,s);return this.ls(e,a,i,r)?re.resolve(null):(by()<=Jn.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Sy(e)),this.hs(t,a,e,snt(r,bx)).next(l=>l))})}cs(t,e){let i=new ys(y5(t));return e.forEach((r,s)=>{AM(t,s)&&(i=i.add(s))}),i}ls(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}_s(t,e,i){return by()<=Jn.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",Sy(e)),this.ns.getDocumentsMatchingQuery(t,e,kd.min(),i)}hs(t,e,i,r){return this.ns.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="LocalStore",Bit=3e8;class Vit{constructor(t,e,i,r){this.persistence=t,this.Ps=e,this.serializer=r,this.Ts=new Mr(Un),this.Is=new Wm(s=>JO(s),tD),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(i)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new wit(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ts))}}function Fit(n,t,e,i){return new Vit(n,t,e,i)}async function k5(n,t){const e=gn(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.As(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let c=Hn();for(const f of r){a.push(f.batchId);for(const m of f.mutations)c=c.add(m.key)}for(const f of s){l.push(f.batchId);for(const m of f.mutations)c=c.add(m.key)}return e.localDocuments.getDocuments(i,c).next(f=>({Rs:f,removedBatchIds:a,addedBatchIds:l}))})})}function kit(n,t){const e=gn(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.ds.newChangeBuffer({trackRemovals:!0});return function(l,c,f,m){const g=f.batch,y=g.keys();let v=re.resolve();return y.forEach(S=>{v=v.next(()=>m.getEntry(c,S)).next(E=>{const T=f.docVersions.get(S);bi(T!==null),E.version.compareTo(T)<0&&(g.applyToRemoteDocument(E,f),E.isValidDocument()&&(E.setReadTime(f.commitVersion),m.addEntry(E)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,g))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let c=Hn();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(c=c.add(l.batch.mutations[f].key));return c}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function H5(n){const t=gn(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Hr.getLastRemoteSnapshotVersion(e))}function Hit(n,t){const e=gn(n),i=t.snapshotVersion;let r=e.Ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=e.ds.newChangeBuffer({trackRemovals:!0});r=e.Ts;const l=[];t.targetChanges.forEach((m,g)=>{const y=r.get(g);if(!y)return;l.push(e.Hr.removeMatchingKeys(s,m.removedDocuments,g).next(()=>e.Hr.addMatchingKeys(s,m.addedDocuments,g)));let v=y.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?v=v.withResumeToken(Js.EMPTY_BYTE_STRING,hn.min()).withLastLimboFreeSnapshotVersion(hn.min()):m.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(m.resumeToken,i)),r=r.insert(g,v),function(E,T,x){return E.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=Bit?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(y,v,m)&&l.push(e.Hr.updateTargetData(s,v))});let c=vh(),f=Hn();if(t.documentUpdates.forEach(m=>{t.resolvedLimboDocuments.has(m)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(s,m))}),l.push(Git(s,a,t.documentUpdates).next(m=>{c=m.Vs,f=m.fs})),!i.isEqual(hn.min())){const m=e.Hr.getLastRemoteSnapshotVersion(s).next(g=>e.Hr.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(m)}return re.waitFor(l).next(()=>a.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,c,f)).next(()=>c)}).then(s=>(e.Ts=r,s))}function Git(n,t,e){let i=Hn(),r=Hn();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let a=vh();return e.forEach((l,c)=>{const f=s.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(hn.min())?(t.removeEntry(l,c.readTime),a=a.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(c),a=a.insert(l,c)):Ie(lD,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)}),{Vs:a,fs:r}})}function qit(n,t){const e=gn(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=KO),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function jit(n,t){const e=gn(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Hr.getTargetData(i,t).next(s=>s?(r=s,re.resolve(r)):e.Hr.allocateTargetId(i).next(a=>(r=new Rd(t,a,"TargetPurposeListen",i.currentSequenceNumber),e.Hr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.Ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ts=e.Ts.insert(i.targetId,i),e.Is.set(t,i.targetId)),i})}async function n2(n,t,e){const i=gn(n),r=i.Ts.get(t),s=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!E_(a))throw a;Ie(lD,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ts=i.Ts.remove(t),i.Is.delete(r.target)}function eU(n,t,e){const i=gn(n);let r=hn.min(),s=Hn();return i.persistence.runTransaction("Execute query","readwrite",a=>function(c,f,m){const g=gn(c),y=g.Is.get(m);return y!==void 0?re.resolve(g.Ts.get(y)):g.Hr.getTargetData(f,m)}(i,a,Zc(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(a,l.targetId).next(c=>{s=c})}).next(()=>i.Ps.getDocumentsMatchingQuery(a,t,e?r:hn.min(),e?s:Hn())).next(l=>(Xit(i,Nnt(t),l),{documents:l,gs:s})))}function Xit(n,t,e){let i=n.Es.get(t)||hn.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Es.set(t,i)}class nU{constructor(){this.activeTargetIds=Bnt()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Wit{constructor(){this.ho=new nU,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,i){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new nU,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yit{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU="ConnectivityMonitor";class rU{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Ie(iU,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Ie(iU,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RE=null;function i2(){return RE===null?RE=function(){return 268435456+Math.round(2147483648*Math.random())}():RE++,"0x"+RE.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="RestConnection",$it={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Kit{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${i}/databases/${r}`,this.wo=this.databaseId.database===cT?`project_id=${i}`:`project_id=${i}&database_id=${r}`}So(t,e,i,r,s){const a=i2(),l=this.bo(t,e.toUriEncodedString());Ie(MC,`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,r,s),this.vo(t,l,c,i).then(f=>(Ie(MC,`Received RPC '${t}' ${a}: `,f),f),f=>{throw t_(MC,`RPC '${t}' ${a} failed with error: `,f,"url: ",l,"request:",i),f})}Co(t,e,i,r,s,a){return this.So(t,e,i,r,s)}Do(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+b_}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}bo(t,e){const i=$it[t];return`${this.po}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zit{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="WebChannelConnection";class Qit extends Kit{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,i,r){const s=i2();return new Promise((a,l)=>{const c=new jF;c.setWithCredentials(!0),c.listenOnce(XF.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case XE.NO_ERROR:const m=c.getResponseJson();Ie(_a,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(m)),a(m);break;case XE.TIMEOUT:Ie(_a,`RPC '${t}' ${s} timed out`),l(new qe(pe.DEADLINE_EXCEEDED,"Request time out"));break;case XE.HTTP_ERROR:const g=c.getStatus();if(Ie(_a,`RPC '${t}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const v=y==null?void 0:y.error;if(v&&v.status&&v.message){const S=function(T){const x=T.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(x)>=0?x:pe.UNKNOWN}(v.status);l(new qe(S,v.message))}else l(new qe(pe.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new qe(pe.UNAVAILABLE,"Connection failed."));break;default:rn()}}finally{Ie(_a,`RPC '${t}' ${s} completed.`)}});const f=JSON.stringify(r);Ie(_a,`RPC '${t}' ${s} sending request:`,r),c.send(e,"POST",f,i,15)})}Wo(t,e,i){const r=i2(),s=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=$F(),l=YF(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,e,i),c.encodeInitMessageHeaders=!0;const m=s.join("");Ie(_a,`Creating RPC '${t}' stream ${r}: ${m}`,c);const g=a.createWebChannel(m,c);let y=!1,v=!1;const S=new Zit({Fo:T=>{v?Ie(_a,`Not sending because RPC '${t}' stream ${r} is closed:`,T):(y||(Ie(_a,`Opening RPC '${t}' stream ${r} transport.`),g.open(),y=!0),Ie(_a,`RPC '${t}' stream ${r} sending:`,T),g.send(T))},Mo:()=>g.close()}),E=(T,x,R)=>{T.listen(x,D=>{try{R(D)}catch(O){setTimeout(()=>{throw O},0)}})};return E(g,d0.EventType.OPEN,()=>{v||(Ie(_a,`RPC '${t}' stream ${r} transport opened.`),S.Qo())}),E(g,d0.EventType.CLOSE,()=>{v||(v=!0,Ie(_a,`RPC '${t}' stream ${r} transport closed`),S.Uo())}),E(g,d0.EventType.ERROR,T=>{v||(v=!0,t_(_a,`RPC '${t}' stream ${r} transport errored:`,T),S.Uo(new qe(pe.UNAVAILABLE,"The operation could not be completed")))}),E(g,d0.EventType.MESSAGE,T=>{var x;if(!v){const R=T.data[0];bi(!!R);const D=R,O=(D==null?void 0:D.error)||((x=D[0])===null||x===void 0?void 0:x.error);if(O){Ie(_a,`RPC '${t}' stream ${r} received error:`,O);const N=O.status;let B=function(I){const w=as[I];if(w!==void 0)return R5(w)}(N),L=O.message;B===void 0&&(B=pe.INTERNAL,L="Unknown error status: "+N+" with message "+O.message),v=!0,S.Uo(new qe(B,L)),g.close()}else Ie(_a,`RPC '${t}' stream ${r} received:`,R),S.Ko(R)}}),E(l,WF.STAT_EVENT,T=>{T.stat===jR.PROXY?Ie(_a,`RPC '${t}' stream ${r} detected buffering proxy`):T.stat===jR.NOPROXY&&Ie(_a,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.$o()},0),S}}function AC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(n){return new nit(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(t,e,i=1e3,r=1.5,s=6e4){this.Ti=t,this.timerId=e,this.Go=i,this.zo=r,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const e=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),r=Math.max(0,e-i);r>0&&Ie("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU="PersistentStream";class q5{constructor(t,e,i,r,s,a,l,c){this.Ti=t,this.n_=i,this.r_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new G5(t,e)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():e&&e.code===pe.RESOURCE_EXHAUSTED?(_h(e.toString()),_h("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.i_===e&&this.V_(i,r)},i=>{t(()=>{const r=new qe(pe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(r)})})}V_(t,e){const i=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{i(()=>this.m_(r))}),this.stream.onMessage(r=>{i(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Ie(sU,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget(()=>this.i_===t?e():(Ie(sU,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jit extends q5{constructor(t,e,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,a),this.serializer=s}f_(t,e){return this.connection.Wo("Listen",t,e)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const e=sit(this.serializer,t),i=function(s){if(!("targetChange"in s))return hn.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?hn.min():a.readTime?Qc(a.readTime):hn.min()}(t);return this.listener.p_(e,i)}y_(t){const e={};e.database=e2(this.serializer),e.addTarget=function(s,a){let l;const c=a.target;if(l=KR(c)?{documents:lit(s,c)}:{query:uit(s,c).ht},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=N5(s,a.resumeToken);const f=QR(s,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(hn.min())>0){l.readTime=gT(s,a.snapshotVersion.toTimestamp());const f=QR(s,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,t);const i=fit(this.serializer,t);i&&(e.labels=i),this.I_(e)}w_(t){const e={};e.database=e2(this.serializer),e.removeTarget=t,this.I_(e)}}class trt extends q5{constructor(t,e,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,a),this.serializer=s}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return bi(!!t.streamToken),this.lastStreamToken=t.streamToken,bi(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){bi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const e=oit(t.writeResults,t.commitTime),i=Qc(t.commitTime);return this.listener.v_(i,e)}C_(){const t={};t.database=e2(this.serializer),this.I_(t)}b_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>ait(this.serializer,i))};this.I_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ert{}class nrt extends ert{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new qe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,i,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.So(t,JR(e,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new qe(pe.UNKNOWN,s.toString())})}Co(t,e,i,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Co(t,JR(e,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new qe(pe.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class irt{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(_h(e),this.N_=!1):Ie("OnlineStateTracker",e)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="RemoteStore";class rrt{constructor(t,e,i,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(a=>{i.enqueueAndForget(async()=>{$m(this)&&(Ie(Vm,"Restarting streams for network reachability change."),await async function(c){const f=gn(c);f.W_.add(4),await Yx(f),f.j_.set("Unknown"),f.W_.delete(4),await DM(f)}(this))})}),this.j_=new irt(i,r)}}async function DM(n){if($m(n))for(const t of n.G_)await t(!0)}async function Yx(n){for(const t of n.G_)await t(!1)}function j5(n,t){const e=gn(n);e.K_.has(t.targetId)||(e.K_.set(t.targetId,t),hD(e)?fD(e):T_(e).c_()&&cD(e,t))}function uD(n,t){const e=gn(n),i=T_(e);e.K_.delete(t),i.c_()&&X5(e,t),e.K_.size===0&&(i.c_()?i.P_():$m(e)&&e.j_.set("Unknown"))}function cD(n,t){if(n.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(hn.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}T_(n).y_(t)}function X5(n,t){n.H_.Ne(t),T_(n).w_(t)}function fD(n){n.H_=new Qnt({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>n.K_.get(t)||null,it:()=>n.datastore.serializer.databaseId}),T_(n).start(),n.j_.B_()}function hD(n){return $m(n)&&!T_(n).u_()&&n.K_.size>0}function $m(n){return gn(n).W_.size===0}function W5(n){n.H_=void 0}async function srt(n){n.j_.set("Online")}async function art(n){n.K_.forEach((t,e)=>{cD(n,t)})}async function ort(n,t){W5(n),hD(n)?(n.j_.q_(t),fD(n)):n.j_.set("Unknown")}async function lrt(n,t,e){if(n.j_.set("Online"),t instanceof D5&&t.state===2&&t.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.K_.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.K_.delete(l),r.H_.removeTarget(l))}(n,t)}catch(i){Ie(Vm,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await _T(n,i)}else if(t instanceof KE?n.H_.We(t):t instanceof O5?n.H_.Ze(t):n.H_.je(t),!e.isEqual(hn.min()))try{const i=await H5(n.localStore);e.compareTo(i)>=0&&await function(s,a){const l=s.H_.ot(a);return l.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const m=s.K_.get(f);m&&s.K_.set(f,m.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,f)=>{const m=s.K_.get(c);if(!m)return;s.K_.set(c,m.withResumeToken(Js.EMPTY_BYTE_STRING,m.snapshotVersion)),X5(s,c);const g=new Rd(m.target,c,f,m.sequenceNumber);cD(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(n,e)}catch(i){Ie(Vm,"Failed to raise snapshot:",i),await _T(n,i)}}async function _T(n,t,e){if(!E_(t))throw t;n.W_.add(1),await Yx(n),n.j_.set("Offline"),e||(e=()=>H5(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Ie(Vm,"Retrying IndexedDB access"),await e(),n.W_.delete(1),await DM(n)})}function Y5(n,t){return t().catch(e=>_T(n,e,t))}async function NM(n){const t=gn(n),e=jd(t);let i=t.U_.length>0?t.U_[t.U_.length-1].batchId:KO;for(;urt(t);)try{const r=await qit(t.localStore,i);if(r===null){t.U_.length===0&&e.P_();break}i=r.batchId,crt(t,r)}catch(r){await _T(t,r)}$5(t)&&K5(t)}function urt(n){return $m(n)&&n.U_.length<10}function crt(n,t){n.U_.push(t);const e=jd(n);e.c_()&&e.S_&&e.b_(t.mutations)}function $5(n){return $m(n)&&!jd(n).u_()&&n.U_.length>0}function K5(n){jd(n).start()}async function frt(n){jd(n).C_()}async function hrt(n){const t=jd(n);for(const e of n.U_)t.b_(e.mutations)}async function drt(n,t,e){const i=n.U_.shift(),r=nD.from(i,t,e);await Y5(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await NM(n)}async function prt(n,t){t&&jd(n).S_&&await async function(i,r){if(function(a){return Knt(a)&&a!==pe.ABORTED}(r.code)){const s=i.U_.shift();jd(i).h_(),await Y5(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await NM(i)}}(n,t),$5(n)&&K5(n)}async function aU(n,t){const e=gn(n);e.asyncQueue.verifyOperationInProgress(),Ie(Vm,"RemoteStore received new credentials");const i=$m(e);e.W_.add(3),await Yx(e),i&&e.j_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.W_.delete(3),await DM(e)}async function mrt(n,t){const e=gn(n);t?(e.W_.delete(2),await DM(e)):t||(e.W_.add(2),await Yx(e),e.j_.set("Unknown"))}function T_(n){return n.J_||(n.J_=function(e,i,r){const s=gn(e);return s.M_(),new Jit(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{xo:srt.bind(null,n),No:art.bind(null,n),Lo:ort.bind(null,n),p_:lrt.bind(null,n)}),n.G_.push(async t=>{t?(n.J_.h_(),hD(n)?fD(n):n.j_.set("Unknown")):(await n.J_.stop(),W5(n))})),n.J_}function jd(n){return n.Y_||(n.Y_=function(e,i,r){const s=gn(e);return s.M_(),new trt(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:frt.bind(null,n),Lo:prt.bind(null,n),D_:hrt.bind(null,n),v_:drt.bind(null,n)}),n.G_.push(async t=>{t?(n.Y_.h_(),await NM(n)):(await n.Y_.stop(),n.U_.length>0&&(Ie(Vm,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Ld,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,s){const a=Date.now()+i,l=new dD(t,e,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(pe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pD(n,t){if(_h("AsyncQueue",`${t}: ${n}`),E_(n))return new qe(pe.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{static emptySet(t){return new zy(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||$e.comparator(e.key,i.key):(e,i)=>$e.comparator(e.key,i.key),this.keyedMap=p0(),this.sortedSet=new Mr(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof zy)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new zy;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(){this.Z_=new Mr($e.comparator)}track(t){const e=t.doc.key,i=this.Z_.get(e);i?t.type!==0&&i.type===3?this.Z_=this.Z_.insert(e,t):t.type===3&&i.type!==1?this.Z_=this.Z_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.Z_=this.Z_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.Z_=this.Z_.remove(e):t.type===1&&i.type===2?this.Z_=this.Z_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):rn():this.Z_=this.Z_.insert(e,t)}X_(){const t=[];return this.Z_.inorderTraversal((e,i)=>{t.push(i)}),t}}class s_{constructor(t,e,i,r,s,a,l,c,f){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(t,e,i,r,s){const a=[];return e.forEach(l=>{a.push({type:0,doc:l})}),new s_(t,e,zy.emptySet(e),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&MM(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class grt{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class yrt{constructor(){this.queries=lU(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(e,i){const r=gn(e),s=r.queries;r.queries=lU(),s.forEach((a,l)=>{for(const c of l.ta)c.onError(i)})})(this,new qe(pe.ABORTED,"Firestore shutting down"))}}function lU(){return new Wm(n=>g5(n),MM)}async function _rt(n,t){const e=gn(n);let i=3;const r=t.query;let s=e.queries.get(r);s?!s.na()&&t.ra()&&(i=2):(s=new grt,i=t.ra()?0:1);try{switch(i){case 0:s.ea=await e.onListen(r,!0);break;case 1:s.ea=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(a){const l=pD(a,`Initialization of query '${Sy(t.query)}' failed`);return void t.onError(l)}e.queries.set(r,s),s.ta.push(t),t.sa(e.onlineState),s.ea&&t.oa(s.ea)&&mD(e)}async function vrt(n,t){const e=gn(n),i=t.query;let r=3;const s=e.queries.get(i);if(s){const a=s.ta.indexOf(t);a>=0&&(s.ta.splice(a,1),s.ta.length===0?r=t.ra()?0:1:!s.na()&&t.ra()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function xrt(n,t){const e=gn(n);let i=!1;for(const r of t){const s=r.query,a=e.queries.get(s);if(a){for(const l of a.ta)l.oa(r)&&(i=!0);a.ea=r}}i&&mD(e)}function brt(n,t,e){const i=gn(n),r=i.queries.get(t);if(r)for(const s of r.ta)s.onError(e);i.queries.delete(t)}function mD(n){n.ia.forEach(t=>{t.next()})}var r2,uU;(uU=r2||(r2={}))._a="default",uU.Cache="cache";class Srt{constructor(t,e,i){this.query=t,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new s_(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ua?this.la(t)&&(this.aa.next(t),e=!0):this.ha(t,this.onlineState)&&(this.Pa(t),e=!0),this.ca=t,e}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),e=!0),e}ha(t,e){if(!t.fromCache||!this.ra())return!0;const i=e!=="Offline";return(!this.options.Ta||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}la(t){if(t.docChanges.length>0)return!0;const e=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Pa(t){t=s_.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==r2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(t){this.key=t}}class Q5{constructor(t){this.key=t}}class Ert{constructor(t,e){this.query=t,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Hn(),this.mutatedKeys=Hn(),this.ya=y5(t),this.wa=new zy(this.ya)}get Sa(){return this.fa}ba(t,e){const i=e?e.Da:new oU,r=e?e.wa:this.wa;let s=e?e.mutatedKeys:this.mutatedKeys,a=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((m,g)=>{const y=r.get(m),v=AM(this.query,g)?g:null,S=!!y&&this.mutatedKeys.has(y.key),E=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let T=!1;y&&v?y.data.isEqual(v.data)?S!==E&&(i.track({type:3,doc:v}),T=!0):this.va(y,v)||(i.track({type:2,doc:v}),T=!0,(c&&this.ya(v,c)>0||f&&this.ya(v,f)<0)&&(l=!0)):!y&&v?(i.track({type:0,doc:v}),T=!0):y&&!v&&(i.track({type:1,doc:y}),T=!0,(c||f)&&(l=!0)),T&&(v?(a=a.add(v),s=E?s.add(m):s.delete(m)):(a=a.delete(m),s=s.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),s=s.delete(m.key),i.track({type:1,doc:m})}return{wa:a,Da:i,ls:l,mutatedKeys:s}}va(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const s=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const a=t.Da.X_();a.sort((m,g)=>function(v,S){const E=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rn()}};return E(v)-E(S)}(m.type,g.type)||this.ya(m.doc,g.doc)),this.Ca(i),r=r!=null&&r;const l=e&&!r?this.Fa():[],c=this.pa.size===0&&this.current&&!r?1:0,f=c!==this.ga;return this.ga=c,a.length!==0||f?{snapshot:new s_(this.query,t.wa,s,a,t.mutatedKeys,c===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new oU,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Hn(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const e=[];return t.forEach(i=>{this.pa.has(i)||e.push(new Q5(i))}),this.pa.forEach(i=>{t.has(i)||e.push(new Z5(i))}),e}Oa(t){this.fa=t.gs,this.pa=Hn();const e=this.ba(t.documents);return this.applyChanges(e,!0)}Na(){return s_.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const gD="SyncEngine";class Trt{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class Mrt{constructor(t){this.key=t,this.Ba=!1}}class Art{constructor(t,e,i,r,s,a){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new Wm(l=>g5(l),MM),this.qa=new Map,this.Qa=new Set,this.$a=new Mr($e.comparator),this.Ua=new Map,this.Ka=new sD,this.Wa={},this.Ga=new Map,this.za=r_.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function wrt(n,t,e=!0){const i=rk(n);let r;const s=i.ka.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Na()):r=await J5(i,t,e,!0),r}async function Crt(n,t){const e=rk(n);await J5(e,t,!0,!1)}async function J5(n,t,e,i){const r=await jit(n.localStore,Zc(t)),s=r.targetId,a=n.sharedClientState.addLocalQueryTarget(s,e);let l;return i&&(l=await Rrt(n,t,s,a==="current",r.resumeToken)),n.isPrimaryClient&&e&&j5(n.remoteStore,r),l}async function Rrt(n,t,e,i,r){n.Ha=(g,y,v)=>async function(E,T,x,R){let D=T.view.ba(x);D.ls&&(D=await eU(E.localStore,T.query,!1).then(({documents:L})=>T.view.ba(L,D)));const O=R&&R.targetChanges.get(T.targetId),N=R&&R.targetMismatches.get(T.targetId)!=null,B=T.view.applyChanges(D,E.isPrimaryClient,O,N);return fU(E,T.targetId,B.Ma),B.snapshot}(n,g,y,v);const s=await eU(n.localStore,t,!0),a=new Ert(t,s.gs),l=a.ba(s.documents),c=Wx.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),f=a.applyChanges(l,n.isPrimaryClient,c);fU(n,e,f.Ma);const m=new Trt(t,e,a);return n.ka.set(t,m),n.qa.has(e)?n.qa.get(e).push(t):n.qa.set(e,[t]),f.snapshot}async function Ort(n,t,e){const i=gn(n),r=i.ka.get(t),s=i.qa.get(r.targetId);if(s.length>1)return i.qa.set(r.targetId,s.filter(a=>!MM(a,t))),void i.ka.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await n2(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&uD(i.remoteStore,r.targetId),s2(i,r.targetId)}).catch(S_)):(s2(i,r.targetId),await n2(i.localStore,r.targetId,!0))}async function Drt(n,t){const e=gn(n),i=e.ka.get(t),r=e.qa.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),uD(e.remoteStore,i.targetId))}async function Nrt(n,t,e){const i=Vrt(n);try{const r=await function(a,l){const c=gn(a),f=gs.now(),m=l.reduce((v,S)=>v.add(S.key),Hn());let g,y;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let S=vh(),E=Hn();return c.ds.getEntries(v,m).next(T=>{S=T,S.forEach((x,R)=>{R.isValidDocument()||(E=E.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,S)).next(T=>{g=T;const x=[];for(const R of l){const D=jnt(R,g.get(R.key).overlayedDocument);D!=null&&x.push(new Ym(R.key,D,l5(D.value.mapValue),uh.exists(!0)))}return c.mutationQueue.addMutationBatch(v,f,x,l)}).next(T=>{y=T;const x=T.applyToLocalDocumentSet(g,E);return c.documentOverlayCache.saveOverlays(v,T.batchId,x)})}).then(()=>({batchId:y.batchId,changes:v5(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,c){let f=a.Wa[a.currentUser.toKey()];f||(f=new Mr(Un)),f=f.insert(l,c),a.Wa[a.currentUser.toKey()]=f}(i,r.batchId,e),await $x(i,r.changes),await NM(i.remoteStore)}catch(r){const s=pD(r,"Failed to persist write");e.reject(s)}}async function tk(n,t){const e=gn(n);try{const i=await Hit(e.localStore,t);t.targetChanges.forEach((r,s)=>{const a=e.Ua.get(s);a&&(bi(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.Ba=!0:r.modifiedDocuments.size>0?bi(a.Ba):r.removedDocuments.size>0&&(bi(a.Ba),a.Ba=!1))}),await $x(e,i,t)}catch(i){await S_(i)}}function cU(n,t,e){const i=gn(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const r=[];i.ka.forEach((s,a)=>{const l=a.view.sa(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const c=gn(a);c.onlineState=l;let f=!1;c.queries.forEach((m,g)=>{for(const y of g.ta)y.sa(l)&&(f=!0)}),f&&mD(c)}(i.eventManager,t),r.length&&i.La.p_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Irt(n,t,e){const i=gn(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Ua.get(t),s=r&&r.key;if(s){let a=new Mr($e.comparator);a=a.insert(s,Sa.newNoDocument(s,hn.min()));const l=Hn().add(s),c=new RM(hn.min(),new Map,new Mr(Un),a,l);await tk(i,c),i.$a=i.$a.remove(s),i.Ua.delete(t),yD(i)}else await n2(i.localStore,t,!1).then(()=>s2(i,t,e)).catch(S_)}async function Prt(n,t){const e=gn(n),i=t.batch.batchId;try{const r=await kit(e.localStore,t);nk(e,i,null),ek(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await $x(e,r)}catch(r){await S_(r)}}async function Lrt(n,t,e){const i=gn(n);try{const r=await function(a,l){const c=gn(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return c.mutationQueue.lookupMutationBatch(f,l).next(g=>(bi(g!==null),m=g.keys(),c.mutationQueue.removeMutationBatch(f,g))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,m,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>c.localDocuments.getDocuments(f,m))})}(i.localStore,t);nk(i,t,e),ek(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await $x(i,r)}catch(r){await S_(r)}}function ek(n,t){(n.Ga.get(t)||[]).forEach(e=>{e.resolve()}),n.Ga.delete(t)}function nk(n,t,e){const i=gn(n);let r=i.Wa[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.Wa[i.currentUser.toKey()]=r}}function s2(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.qa.get(t))n.ka.delete(i),e&&n.La.Ja(i,e);n.qa.delete(t),n.isPrimaryClient&&n.Ka.br(t).forEach(i=>{n.Ka.containsKey(i)||ik(n,i)})}function ik(n,t){n.Qa.delete(t.path.canonicalString());const e=n.$a.get(t);e!==null&&(uD(n.remoteStore,e),n.$a=n.$a.remove(t),n.Ua.delete(e),yD(n))}function fU(n,t,e){for(const i of e)i instanceof Z5?(n.Ka.addReference(i.key,t),Urt(n,i)):i instanceof Q5?(Ie(gD,"Document no longer in limbo: "+i.key),n.Ka.removeReference(i.key,t),n.Ka.containsKey(i.key)||ik(n,i.key)):rn()}function Urt(n,t){const e=t.key,i=e.path.canonicalString();n.$a.get(e)||n.Qa.has(i)||(Ie(gD,"New document in limbo: "+e),n.Qa.add(i),yD(n))}function yD(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const t=n.Qa.values().next().value;n.Qa.delete(t);const e=new $e(or.fromString(t)),i=n.za.next();n.Ua.set(i,new Mrt(e)),n.$a=n.$a.insert(e,i),j5(n.remoteStore,new Rd(Zc(m5(e.path)),i,"TargetPurposeLimboResolution",bM.ae))}}async function $x(n,t,e){const i=gn(n),r=[],s=[],a=[];i.ka.isEmpty()||(i.ka.forEach((l,c)=>{a.push(i.Ha(c,t,e).then(f=>{var m;if((f||e)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=e==null?void 0:e.targetChanges.get(c.targetId))===null||m===void 0?void 0:m.current;i.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(f){r.push(f);const g=oD.Yi(c.targetId,f);s.push(g)}}))}),await Promise.all(a),i.La.p_(r),await async function(c,f){const m=gn(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>re.forEach(f,y=>re.forEach(y.Hi,v=>m.persistence.referenceDelegate.addReference(g,y.targetId,v)).next(()=>re.forEach(y.Ji,v=>m.persistence.referenceDelegate.removeReference(g,y.targetId,v)))))}catch(g){if(!E_(g))throw g;Ie(lD,"Failed to update sequence numbers: "+g)}for(const g of f){const y=g.targetId;if(!g.fromCache){const v=m.Ts.get(y),S=v.snapshotVersion,E=v.withLastLimboFreeSnapshotVersion(S);m.Ts=m.Ts.insert(y,E)}}}(i.localStore,s))}async function zrt(n,t){const e=gn(n);if(!e.currentUser.isEqual(t)){Ie(gD,"User change. New user:",t.toKey());const i=await k5(e.localStore,t);e.currentUser=t,function(s,a){s.Ga.forEach(l=>{l.forEach(c=>{c.reject(new qe(pe.CANCELLED,a))})}),s.Ga.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await $x(e,i.Rs)}}function Brt(n,t){const e=gn(n),i=e.Ua.get(t);if(i&&i.Ba)return Hn().add(i.key);{let r=Hn();const s=e.qa.get(t);if(!s)return r;for(const a of s){const l=e.ka.get(a);r=r.unionWith(l.view.Sa)}return r}}function rk(n){const t=gn(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=tk.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Brt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Irt.bind(null,t),t.La.p_=xrt.bind(null,t.eventManager),t.La.Ja=brt.bind(null,t.eventManager),t}function Vrt(n){const t=gn(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Prt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Lrt.bind(null,t),t}class vT{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=OM(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,e){return null}nu(t,e){return null}eu(t){return Fit(this.persistence,new zit,t.initialUser,this.serializer)}Xa(t){return new F5(aD.ri,this.serializer)}Za(t){return new Wit}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vT.provider={build:()=>new vT};class Frt extends vT{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){bi(this.persistence.referenceDelegate instanceof yT);const i=this.persistence.referenceDelegate.garbageCollector;return new Sit(i,t.asyncQueue,e)}Xa(t){const e=this.cacheSizeBytes!==void 0?Ro.withCacheSize(this.cacheSizeBytes):Ro.DEFAULT;return new F5(i=>yT.ri(i,e),this.serializer)}}class a2{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>cU(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=zrt.bind(null,this.syncEngine),await mrt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new yrt}()}createDatastore(t){const e=OM(t.databaseInfo.databaseId),i=function(s){return new Qit(s)}(t.databaseInfo);return function(s,a,l,c){return new nrt(s,a,l,c)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,s,a,l){return new rrt(i,r,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,e=>cU(this.syncEngine,e,0),function(){return rU.D()?new rU:new Yit}())}createSyncEngine(t,e){return function(r,s,a,l,c,f,m){const g=new Art(r,s,a,l,c,f);return m&&(g.ja=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(r){const s=gn(r);Ie(Vm,"RemoteStore shutting down."),s.W_.add(5),await Yx(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}a2.provider={build:()=>new a2};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class krt{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):_h("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="FirestoreClient";class Hrt{constructor(t,e,i,r,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=xa.UNAUTHENTICATED,this.clientId=QF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{Ie(Xd,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(Ie(Xd,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ld;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=pD(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function wC(n,t){n.asyncQueue.verifyOperationInProgress(),Ie(Xd,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await k5(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function hU(n,t){n.asyncQueue.verifyOperationInProgress();const e=await Grt(n);Ie(Xd,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>aU(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>aU(t.remoteStore,r)),n._onlineComponents=t}async function Grt(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ie(Xd,"Using user provided OfflineComponentProvider");try{await wC(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(r){return r.name==="FirebaseError"?r.code===pe.FAILED_PRECONDITION||r.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;t_("Error using user provided cache. Falling back to memory cache: "+e),await wC(n,new vT)}}else Ie(Xd,"Using default OfflineComponentProvider"),await wC(n,new Frt(void 0));return n._offlineComponents}async function sk(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ie(Xd,"Using user provided OnlineComponentProvider"),await hU(n,n._uninitializedComponentsProvider._online)):(Ie(Xd,"Using default OnlineComponentProvider"),await hU(n,new a2))),n._onlineComponents}function qrt(n){return sk(n).then(t=>t.syncEngine)}async function jrt(n){const t=await sk(n),e=t.eventManager;return e.onListen=wrt.bind(null,t.syncEngine),e.onUnlisten=Ort.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=Crt.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Drt.bind(null,t.syncEngine),e}function Xrt(n,t,e={}){const i=new Ld;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,f){const m=new krt({next:y=>{m.su(),a.enqueueAndForget(()=>vrt(s,g)),y.fromCache&&c.source==="server"?f.reject(new qe(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(y)},error:y=>f.reject(y)}),g=new Srt(l,m,{includeMetadataChanges:!0,Ta:!0});return _rt(s,g)}(await jrt(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(n,t,e){if(!e)throw new qe(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function Wrt(n,t,e,i){if(t===!0&&i===!0)throw new qe(pe.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function pU(n){if(!$e.isDocumentKey(n))throw new qe(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mU(n){if($e.isDocumentKey(n))throw new qe(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _D(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":rn()}function xT(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new qe(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=_D(n);throw new qe(pe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="firestore.googleapis.com",gU=!0;class yU{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new qe(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lk,this.ssl=gU}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:gU;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=V5;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<xit)throw new qe(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Wrt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ak((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new qe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new qe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new qe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class IM{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yU({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new qe(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yU(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Ket;switch(i.type){case"firstParty":return new tnt(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new qe(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=dU.get(e);i&&(Ie("ComponentProvider","Removing Datastore"),dU.delete(e),i.terminate())}(this),Promise.resolve()}}function Yrt(n,t,e,i={}){var r;const s=(n=xT(n,IM))._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),l=`${t}:${e}`;s.host!==lk&&s.host!==l&&t_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},s),{host:l,ssl:!1,emulatorOptions:i});if(!aT(c,a)&&(n._setSettings(c),i.mockUserToken)){let f,m;if(typeof i.mockUserToken=="string")f=i.mockUserToken,m=xa.MOCK_USER;else{f=Mtt(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new qe(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new xa(g)}n._authCredentials=new Zet(new KF(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new PM(this.firestore,t,this._query)}}class zu{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ud(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new zu(this.firestore,t,this._key)}}class Ud extends PM{constructor(t,e,i){super(t,e,m5(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new zu(this.firestore,null,new $e(t))}withConverter(t){return new Ud(this.firestore,t,this._path)}}function bT(n,t,...e){if(n=_x(n),ok("collection","path",t),n instanceof IM){const i=or.fromString(t,...e);return mU(i),new Ud(n,null,i)}{if(!(n instanceof zu||n instanceof Ud))throw new qe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(or.fromString(t,...e));return mU(i),new Ud(n.firestore,null,i)}}function $rt(n,t,...e){if(n=_x(n),arguments.length===1&&(t=QF.newId()),ok("doc","path",t),n instanceof IM){const i=or.fromString(t,...e);return pU(i),new zu(n,null,new $e(i))}{if(!(n instanceof zu||n instanceof Ud))throw new qe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(or.fromString(t,...e));return pU(i),new zu(n.firestore,n instanceof Ud?n.converter:null,new $e(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U="AsyncQueue";class vU{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new G5(this,"async_queue_retry"),this.Su=()=>{const i=AC();i&&Ie(_U,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=t;const e=AC();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const e=AC();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const e=new Ld;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!E_(t))throw t;Ie(_U,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const e=this.bu.then(()=>(this.pu=!0,t().catch(i=>{this.gu=i,this.pu=!1;const r=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(i);throw _h("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.pu=!1,i))));return this.bu=e,e}enqueueAfterDelay(t,e,i){this.Du(),this.wu.indexOf(t)>-1&&(e=0);const r=dD.createAndSchedule(this,t,e,i,s=>this.Fu(s));return this.fu.push(r),r}Du(){this.gu&&rn()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.fu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const e=this.fu.indexOf(t);this.fu.splice(e,1)}}class vD extends IM{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new vU,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new vU(t),this._firestoreClient=void 0,await t}}}function Krt(n,t){const e=typeof n=="object"?n:zet(),i=typeof n=="string"?n:cT,r=Net(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=Ett("firestore");s&&Yrt(r,...s)}return r}function uk(n){if(n._terminated)throw new qe(pe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Zrt(n),n._firestoreClient}function Zrt(n){var t,e,i;const r=n._freezeSettings(),s=function(l,c,f,m){return new mnt(l,c,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,ak(m.experimentalLongPollingOptions),m.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new Hrt(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(t){this._byteString=t}static fromBase64String(t){try{return new a_(Js.fromBase64String(t))}catch(e){throw new qe(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new a_(Js.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new qe(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ys(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new qe(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new qe(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Un(this._lat,t._lat)||Un(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qrt=/^__.*__$/;class Jrt{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Ym(t,this.data,this.fieldMask,e,this.fieldTransforms):new Xx(t,this.data,e,this.fieldTransforms)}}function fk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rn()}}class ED{constructor(t,e,i,r,s,a){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new ED(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.ku({path:i,Qu:!1});return r.$u(t),r}Uu(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.ku({path:i,Qu:!1});return r.Bu(),r}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return ST(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(fk(this.Lu)&&Qrt.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class tst{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||OM(t)}ju(t,e,i,r=!1){return new ED({Lu:t,methodName:e,zu:i,path:Ys.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function est(n){const t=n._freezeSettings(),e=OM(n._databaseId);return new tst(n._databaseId,!!t.ignoreUndefinedProperties,e)}function nst(n,t,e,i,r,s={}){const a=n.ju(s.merge||s.mergeFields?2:0,t,e,r);mk("Data must be an object, but it was:",a,i);const l=dk(i,a);let c,f;if(s.merge)c=new Uu(a.fieldMask),f=a.fieldTransforms;else if(s.mergeFields){const m=[];for(const g of s.mergeFields){const y=ist(t,g,e);if(!a.contains(y))throw new qe(pe.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);sst(m,y)||m.push(y)}c=new Uu(m),f=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,f=a.fieldTransforms;return new Jrt(new kl(l),c,f)}function hk(n,t){if(pk(n=_x(n)))return mk("Unsupported field value:",t,n),dk(n,t);if(n instanceof ck)return function(i,r){if(!fk(r.Lu))throw r.Wu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let c=hk(l,r.Ku(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(n,t)}return function(i,r){if((i=_x(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Vnt(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=gs.fromDate(i);return{timestampValue:gT(r.serializer,s)}}if(i instanceof gs){const s=new gs(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:gT(r.serializer,s)}}if(i instanceof bD)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof a_)return{bytesValue:N5(r.serializer,i._byteString)};if(i instanceof zu){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:rD(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof SD)return function(a,l){return{mapValue:{fields:{[a5]:{stringValue:o5},[fT]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw l.Wu("VectorValues must only contain numeric values.");return eD(l.serializer,f)})}}}}}}(i,r);throw r.Wu(`Unsupported field value: ${_D(i)}`)}(n,t)}function dk(n,t){const e={};return t5(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xm(n,(i,r)=>{const s=hk(r,t.qu(i));s!=null&&(e[i]=s)}),{mapValue:{fields:e}}}function pk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gs||n instanceof bD||n instanceof a_||n instanceof zu||n instanceof ck||n instanceof SD)}function mk(n,t,e){if(!pk(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const i=_D(e);throw i==="an object"?t.Wu(n+" a custom object"):t.Wu(n+" "+i)}}function ist(n,t,e){if((t=_x(t))instanceof xD)return t._internalPath;if(typeof t=="string")return gk(n,t);throw ST("Field path arguments must be of type string or ",n,!1,void 0,e)}const rst=new RegExp("[~\\*/\\[\\]]");function gk(n,t,e){if(t.search(rst)>=0)throw ST(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new xD(...t.split("."))._internalPath}catch{throw ST(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function ST(n,t,e,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${i}`),a&&(c+=` in document ${r}`),c+=")"),new qe(pe.INVALID_ARGUMENT,l+n+c)}function sst(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new zu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new ast(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(_k("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class ast extends yk{data(){return super.data()}}function _k(n,t){return typeof t=="string"?gk(n,t):t instanceof xD?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ost(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new qe(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lst{convertValue(t,e="none"){switch(qd(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Wr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Gd(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw rn()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Xm(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertVectorValue(t){var e,i,r;const s=(r=(i=(e=t.fields)===null||e===void 0?void 0:e[fT].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>Wr(a.doubleValue));return new SD(s)}convertGeoPoint(t){return new bD(Wr(t.latitude),Wr(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=EM(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Sx(t));default:return null}}convertTimestamp(t){const e=Hd(t);return new gs(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=or.fromString(t);bi(B5(i));const r=new Ex(i.get(1),i.get(3)),s=new $e(i.popFirst(5));return r.isEqual(e)||_h(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ust(n,t,e){let i;return i=n?n.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class cst extends yk{constructor(t,e,i,r,s,a){super(t,e,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new ZE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(_k("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class ZE extends cst{data(t={}){return super.data(t)}}class fst{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new OE(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new ZE(this._firestore,this._userDataWriter,i.key,i,new OE(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new qe(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const c=new ZE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new OE(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new ZE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new OE(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:hst(l.type),doc:c,oldIndex:f,newIndex:m}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function hst(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rn()}}class dst extends lst{constructor(t){super(),this.firestore=t}convertBytes(t){return new a_(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new zu(this.firestore,null,e)}}function o2(n){n=xT(n,PM);const t=xT(n.firestore,vD),e=uk(t),i=new dst(t);return ost(n._query),Xrt(e,n._query).then(r=>new fst(t,i,n,r))}function pst(n,t){const e=xT(n.firestore,vD),i=$rt(n),r=ust(n.converter,t);return mst(e,[nst(est(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,uh.exists(!1))]).then(()=>i)}function mst(n,t){return function(i,r){const s=new Ld;return i.asyncQueue.enqueueAndForget(async()=>Nrt(await qrt(i),r,s)),s.promise}(uk(n),t)}(function(t,e=!0){(function(r){b_=r})(Uet),lT(new vx("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new vD(new Qet(i.getProvider("auth-internal")),new ent(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new qe(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ex(f.options.projectId,m)}(a,r),a);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Uy(ML,AL,t),Uy(ML,AL,"esm2017")})();const gst={apiKey:"AIzaSyD6drh2aoyblA6iwk80Ko26FHK2HK_cNmk",authDomain:"black-triangle-bjj.firebaseapp.com",projectId:"black-triangle-bjj",storageBucket:"black-triangle-bjj.firebasestorage.app",messagingSenderId:"128924794161",appId:"1:128924794161:web:7968a2a259fbc8899cc410",measurementId:"G-LBWF7DFVF5"},yst=kF(gst),ET=Krt(yst),o_=qY(n=>({isAddNodeActive:!1,setIsAddNodeActive:t=>n({isAddNodeActive:t}),isLoadingFirestore:!1,setIsLoadingFirestore(t){n({isLoadingFirestore:t})}})),_st=()=>{const[n,t]=ot.useState({nodes:[],links:[]});return ot.useEffect(()=>{o_.setState({isLoadingFirestore:!0}),(async()=>{try{const r=(await o2(bT(ET,"nodos"))).docs.map(l=>({id:parseInt(l.data().index,10),nombre:l.data().nombre,posicion:l.data().posicion,uniforme:l.data().uniforme,descripcion:l.data().descripcion,linkVideo:l.data().linkVideo,likes:l.data().likes,fechaSubida:l.data().fechaSubida,subidoPor:l.data().subidoPor,autor:l.data().autor,disLikes:l.data().disLikes})),a=(await o2(bT(ET,"links"))).docs.map(l=>({source:l.data().source,target:l.data().target}));t({nodes:r,links:a})}catch(i){console.error("Error obteniendo datos:",i)}finally{o_.setState({isLoadingFirestore:!1})}})()},[]),n},vst=({cameraControlsRef:n})=>{EO(()=>{var r;return(r=t.current)==null?void 0:r.tickFrame()});const t=ot.useRef(void 0),e=_st(),i=ot.useCallback(r=>{if(!r)return;n.current||console.error("❌ cameraControlsRef no está inicializado."),console.info("Node clicked:",r);const s=new ut(r.x||0,r.y||0,r.z||0);htt(n.current,s,30)},[n]);return Mt.jsx(ZQ,{ref:t,graphData:e,onNodeClick:r=>i(r)})},xst=({cameraControlsRef:n})=>Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(JY,{radius:ry.radius,depth:ry.depth,count:ry.count,factor:ry.factor,saturation:ry.saturation,fade:!0,speed:ry.speed}),Mt.jsx(vst,{cameraControlsRef:n}),Mt.jsx("primitive",{object:new C4(300)}),Mt.jsx("primitive",{object:new w4(200,20)}),Mt.jsx("ambientLight",{intensity:8}),Mt.jsx("directionalLight",{position:[100,20,10],color:"purple"})]});var Kx=n=>n.type==="checkbox",vm=n=>n instanceof Date,ja=n=>n==null;const vk=n=>typeof n=="object";var Kr=n=>!ja(n)&&!Array.isArray(n)&&vk(n)&&!vm(n),xk=n=>Kr(n)&&n.target?Kx(n.target)?n.target.checked:n.target.value:n,bst=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,bk=(n,t)=>n.has(bst(t)),Sst=n=>{const t=n.constructor&&n.constructor.prototype;return Kr(t)&&t.hasOwnProperty("isPrototypeOf")},TD=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ao(n){let t;const e=Array.isArray(n),i=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)t=new Date(n);else if(n instanceof Set)t=new Set(n);else if(!(TD&&(n instanceof Blob||i))&&(e||Kr(n)))if(t=e?[]:{},!e&&!Sst(n))t=n;else for(const r in n)n.hasOwnProperty(r)&&(t[r]=Ao(n[r]));else return n;return t}var LM=n=>Array.isArray(n)?n.filter(Boolean):[],Yr=n=>n===void 0,Re=(n,t,e)=>{if(!t||!Kr(n))return e;const i=LM(t.split(/[,[\].]+?/)).reduce((r,s)=>ja(r)?r:r[s],n);return Yr(i)||i===n?Yr(n[t])?e:n[t]:i},Bl=n=>typeof n=="boolean",MD=n=>/^\w*$/.test(n),Sk=n=>LM(n.replace(/["|']|\]/g,"").split(/\.|\[/)),Bi=(n,t,e)=>{let i=-1;const r=MD(t)?[t]:Sk(t),s=r.length,a=s-1;for(;++i<s;){const l=r[i];let c=e;if(i!==a){const f=n[l];c=Kr(f)||Array.isArray(f)?f:isNaN(+r[i+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;n[l]=c,n=n[l]}return n};const TT={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Iu={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Kf={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Est=Rn.createContext(null),AD=()=>Rn.useContext(Est);var Ek=(n,t,e,i=!0)=>{const r={defaultValues:t._defaultValues};for(const s in n)Object.defineProperty(r,s,{get:()=>{const a=s;return t._proxyFormState[a]!==Iu.all&&(t._proxyFormState[a]=!i||Iu.all),e&&(e[a]=!0),n[a]}});return r},wo=n=>Kr(n)&&!Object.keys(n).length,Tk=(n,t,e,i)=>{e(n);const{name:r,...s}=n;return wo(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(a=>t[a]===(!i||Iu.all))},V0=n=>Array.isArray(n)?n:[n],Mk=(n,t,e)=>!n||!t||n===t||V0(n).some(i=>i&&(e?i===t:i.startsWith(t)||t.startsWith(i)));function wD(n){const t=Rn.useRef(n);t.current=n,Rn.useEffect(()=>{const e=!n.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{e&&e.unsubscribe()}},[n.disabled])}function Tst(n){const t=AD(),{control:e=t.control,disabled:i,name:r,exact:s}=n||{},[a,l]=Rn.useState(e._formState),c=Rn.useRef(!0),f=Rn.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),m=Rn.useRef(r);return m.current=r,wD({disabled:i,next:g=>c.current&&Mk(m.current,g.name,s)&&Tk(g,f.current,e._updateFormState)&&l({...e._formState,...g}),subject:e._subjects.state}),Rn.useEffect(()=>(c.current=!0,f.current.isValid&&e._updateValid(!0),()=>{c.current=!1}),[e]),Rn.useMemo(()=>Ek(a,e,f.current,!1),[a,e])}var jc=n=>typeof n=="string",Ak=(n,t,e,i,r)=>jc(n)?(i&&t.watch.add(n),Re(e,n,r)):Array.isArray(n)?n.map(s=>(i&&t.watch.add(s),Re(e,s))):(i&&(t.watchAll=!0),e);function Mst(n){const t=AD(),{control:e=t.control,name:i,defaultValue:r,disabled:s,exact:a}=n||{},l=Rn.useRef(i);l.current=i,wD({disabled:s,subject:e._subjects.values,next:m=>{Mk(l.current,m.name,a)&&f(Ao(Ak(l.current,e._names,m.values||e._formValues,!1,r)))}});const[c,f]=Rn.useState(e._getWatch(i,r));return Rn.useEffect(()=>e._removeUnmounted()),c}function Ast(n){const t=AD(),{name:e,disabled:i,control:r=t.control,shouldUnregister:s}=n,a=bk(r._names.array,e),l=Mst({control:r,name:e,defaultValue:Re(r._formValues,e,Re(r._defaultValues,e,n.defaultValue)),exact:!0}),c=Tst({control:r,name:e,exact:!0}),f=Rn.useRef(r.register(e,{...n.rules,value:l,...Bl(n.disabled)?{disabled:n.disabled}:{}})),m=Rn.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Re(c.errors,e)},isDirty:{enumerable:!0,get:()=>!!Re(c.dirtyFields,e)},isTouched:{enumerable:!0,get:()=>!!Re(c.touchedFields,e)},isValidating:{enumerable:!0,get:()=>!!Re(c.validatingFields,e)},error:{enumerable:!0,get:()=>Re(c.errors,e)}}),[c,e]),g=Rn.useMemo(()=>({name:e,value:l,...Bl(i)||c.disabled?{disabled:c.disabled||i}:{},onChange:y=>f.current.onChange({target:{value:xk(y),name:e},type:TT.CHANGE}),onBlur:()=>f.current.onBlur({target:{value:Re(r._formValues,e),name:e},type:TT.BLUR}),ref:y=>{const v=Re(r._fields,e);v&&y&&(v._f.ref={focus:()=>y.focus(),select:()=>y.select(),setCustomValidity:S=>y.setCustomValidity(S),reportValidity:()=>y.reportValidity()})}}),[e,r._formValues,i,c.disabled,l,r._fields]);return Rn.useEffect(()=>{const y=r._options.shouldUnregister||s,v=(S,E)=>{const T=Re(r._fields,S);T&&T._f&&(T._f.mount=E)};if(v(e,!0),y){const S=Ao(Re(r._options.defaultValues,e));Bi(r._defaultValues,e,S),Yr(Re(r._formValues,e))&&Bi(r._formValues,e,S)}return!a&&r.register(e),()=>{(a?y&&!r._state.action:y)?r.unregister(e):v(e,!1)}},[e,r,a,s]),Rn.useEffect(()=>{r._updateDisabledField({disabled:i,fields:r._fields,name:e})},[i,e,r]),Rn.useMemo(()=>({field:g,formState:c,fieldState:m}),[g,c,m])}const xU=n=>n.render(Ast(n));var wst=(n,t,e,i,r)=>t?{...e[n],types:{...e[n]&&e[n].types?e[n].types:{},[i]:r||!0}}:{},bU=n=>({isOnSubmit:!n||n===Iu.onSubmit,isOnBlur:n===Iu.onBlur,isOnChange:n===Iu.onChange,isOnAll:n===Iu.all,isOnTouch:n===Iu.onTouched}),SU=(n,t,e)=>!e&&(t.watchAll||t.watch.has(n)||[...t.watch].some(i=>n.startsWith(i)&&/^\.\w+/.test(n.slice(i.length))));const F0=(n,t,e,i)=>{for(const r of e||Object.keys(n)){const s=Re(n,r);if(s){const{_f:a,...l}=s;if(a){if(a.refs&&a.refs[0]&&t(a.refs[0],r)&&!i)return!0;if(a.ref&&t(a.ref,a.name)&&!i)return!0;if(F0(l,t))break}else if(Kr(l)&&F0(l,t))break}}};var Cst=(n,t,e)=>{const i=V0(Re(n,e));return Bi(i,"root",t[e]),Bi(n,e,i),n},CD=n=>n.type==="file",kc=n=>typeof n=="function",MT=n=>{if(!TD)return!1;const t=n?n.ownerDocument:0;return n instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},QE=n=>jc(n),RD=n=>n.type==="radio",AT=n=>n instanceof RegExp;const EU={value:!1,isValid:!1},TU={value:!0,isValid:!0};var wk=n=>{if(Array.isArray(n)){if(n.length>1){const t=n.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!Yr(n[0].attributes.value)?Yr(n[0].value)||n[0].value===""?TU:{value:n[0].value,isValid:!0}:TU:EU}return EU};const MU={isValid:!1,value:null};var Ck=n=>Array.isArray(n)?n.reduce((t,e)=>e&&e.checked&&!e.disabled?{isValid:!0,value:e.value}:t,MU):MU;function AU(n,t,e="validate"){if(QE(n)||Array.isArray(n)&&n.every(QE)||Bl(n)&&!n)return{type:e,message:QE(n)?n:"",ref:t}}var py=n=>Kr(n)&&!AT(n)?n:{value:n,message:""},wU=async(n,t,e,i,r,s)=>{const{ref:a,refs:l,required:c,maxLength:f,minLength:m,min:g,max:y,pattern:v,validate:S,name:E,valueAsNumber:T,mount:x}=n._f,R=Re(e,E);if(!x||t.has(E))return{};const D=l?l[0]:a,O=G=>{r&&D.reportValidity&&(D.setCustomValidity(Bl(G)?"":G||""),D.reportValidity())},N={},B=RD(a),L=Kx(a),U=B||L,I=(T||CD(a))&&Yr(a.value)&&Yr(R)||MT(a)&&a.value===""||R===""||Array.isArray(R)&&!R.length,w=wst.bind(null,E,i,N),V=(G,k,st,it=Kf.maxLength,Y=Kf.minLength)=>{const Z=G?k:st;N[E]={type:G?it:Y,message:Z,ref:a,...w(G?it:Y,Z)}};if(s?!Array.isArray(R)||!R.length:c&&(!U&&(I||ja(R))||Bl(R)&&!R||L&&!wk(l).isValid||B&&!Ck(l).isValid)){const{value:G,message:k}=QE(c)?{value:!!c,message:c}:py(c);if(G&&(N[E]={type:Kf.required,message:k,ref:D,...w(Kf.required,k)},!i))return O(k),N}if(!I&&(!ja(g)||!ja(y))){let G,k;const st=py(y),it=py(g);if(!ja(R)&&!isNaN(R)){const Y=a.valueAsNumber||R&&+R;ja(st.value)||(G=Y>st.value),ja(it.value)||(k=Y<it.value)}else{const Y=a.valueAsDate||new Date(R),Z=$=>new Date(new Date().toDateString()+" "+$),at=a.type=="time",ct=a.type=="week";jc(st.value)&&R&&(G=at?Z(R)>Z(st.value):ct?R>st.value:Y>new Date(st.value)),jc(it.value)&&R&&(k=at?Z(R)<Z(it.value):ct?R<it.value:Y<new Date(it.value))}if((G||k)&&(V(!!G,st.message,it.message,Kf.max,Kf.min),!i))return O(N[E].message),N}if((f||m)&&!I&&(jc(R)||s&&Array.isArray(R))){const G=py(f),k=py(m),st=!ja(G.value)&&R.length>+G.value,it=!ja(k.value)&&R.length<+k.value;if((st||it)&&(V(st,G.message,k.message),!i))return O(N[E].message),N}if(v&&!I&&jc(R)){const{value:G,message:k}=py(v);if(AT(G)&&!R.match(G)&&(N[E]={type:Kf.pattern,message:k,ref:a,...w(Kf.pattern,k)},!i))return O(k),N}if(S){if(kc(S)){const G=await S(R,e),k=AU(G,D);if(k&&(N[E]={...k,...w(Kf.validate,k.message)},!i))return O(k.message),N}else if(Kr(S)){let G={};for(const k in S){if(!wo(G)&&!i)break;const st=AU(await S[k](R,e),D,k);st&&(G={...st,...w(k,st.message)},O(st.message),i&&(N[E]=G))}if(!wo(G)&&(N[E]={ref:D,...G},!i))return N}}return O(!0),N};function Rst(n,t){const e=t.slice(0,-1).length;let i=0;for(;i<e;)n=Yr(n)?i++:n[t[i++]];return n}function Ost(n){for(const t in n)if(n.hasOwnProperty(t)&&!Yr(n[t]))return!1;return!0}function ds(n,t){const e=Array.isArray(t)?t:MD(t)?[t]:Sk(t),i=e.length===1?n:Rst(n,e),r=e.length-1,s=e[r];return i&&delete i[s],r!==0&&(Kr(i)&&wo(i)||Array.isArray(i)&&Ost(i))&&ds(n,e.slice(0,-1)),n}var CC=()=>{let n=[];return{get observers(){return n},next:r=>{for(const s of n)s.next&&s.next(r)},subscribe:r=>(n.push(r),{unsubscribe:()=>{n=n.filter(s=>s!==r)}}),unsubscribe:()=>{n=[]}}},l2=n=>ja(n)||!vk(n);function Ed(n,t){if(l2(n)||l2(t))return n===t;if(vm(n)&&vm(t))return n.getTime()===t.getTime();const e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(const r of e){const s=n[r];if(!i.includes(r))return!1;if(r!=="ref"){const a=t[r];if(vm(s)&&vm(a)||Kr(s)&&Kr(a)||Array.isArray(s)&&Array.isArray(a)?!Ed(s,a):s!==a)return!1}}return!0}var Rk=n=>n.type==="select-multiple",Dst=n=>RD(n)||Kx(n),RC=n=>MT(n)&&n.isConnected,Ok=n=>{for(const t in n)if(kc(n[t]))return!0;return!1};function wT(n,t={}){const e=Array.isArray(n);if(Kr(n)||e)for(const i in n)Array.isArray(n[i])||Kr(n[i])&&!Ok(n[i])?(t[i]=Array.isArray(n[i])?[]:{},wT(n[i],t[i])):ja(n[i])||(t[i]=!0);return t}function Dk(n,t,e){const i=Array.isArray(n);if(Kr(n)||i)for(const r in n)Array.isArray(n[r])||Kr(n[r])&&!Ok(n[r])?Yr(t)||l2(e[r])?e[r]=Array.isArray(n[r])?wT(n[r],[]):{...wT(n[r])}:Dk(n[r],ja(t)?{}:t[r],e[r]):e[r]=!Ed(n[r],t[r]);return e}var Qv=(n,t)=>Dk(n,t,wT(t)),Nk=(n,{valueAsNumber:t,valueAsDate:e,setValueAs:i})=>Yr(n)?n:t?n===""?NaN:n&&+n:e&&jc(n)?new Date(n):i?i(n):n;function OC(n){const t=n.ref;return CD(t)?t.files:RD(t)?Ck(n.refs).value:Rk(t)?[...t.selectedOptions].map(({value:e})=>e):Kx(t)?wk(n.refs).value:Nk(Yr(t.value)?n.ref.value:t.value,n)}var Nst=(n,t,e,i)=>{const r={};for(const s of n){const a=Re(t,s);a&&Bi(r,s,a._f)}return{criteriaMode:e,names:[...n],fields:r,shouldUseNativeValidation:i}},Jv=n=>Yr(n)?n:AT(n)?n.source:Kr(n)?AT(n.value)?n.value.source:n.value:n;const CU="AsyncFunction";var Ist=n=>!!n&&!!n.validate&&!!(kc(n.validate)&&n.validate.constructor.name===CU||Kr(n.validate)&&Object.values(n.validate).find(t=>t.constructor.name===CU)),Pst=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate);function RU(n,t,e){const i=Re(n,e);if(i||MD(e))return{error:i,name:e};const r=e.split(".");for(;r.length;){const s=r.join("."),a=Re(t,s),l=Re(n,s);if(a&&!Array.isArray(a)&&e!==s)return{name:e};if(l&&l.type)return{name:s,error:l};r.pop()}return{name:e}}var Lst=(n,t,e,i,r)=>r.isOnAll?!1:!e&&r.isOnTouch?!(t||n):(e?i.isOnBlur:r.isOnBlur)?!n:(e?i.isOnChange:r.isOnChange)?n:!0,Ust=(n,t)=>!LM(Re(n,t)).length&&ds(n,t);const zst={mode:Iu.onSubmit,reValidateMode:Iu.onChange,shouldFocusError:!0};function Bst(n={}){let t={...zst,...n},e={submitCount:0,isDirty:!1,isLoading:kc(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},i={},r=Kr(t.defaultValues)||Kr(t.values)?Ao(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:Ao(r),a={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,f=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},g={values:CC(),array:CC(),state:CC()},y=bU(t.mode),v=bU(t.reValidateMode),S=t.criteriaMode===Iu.all,E=rt=>_t=>{clearTimeout(f),f=setTimeout(rt,_t)},T=async rt=>{if(!t.disabled&&(m.isValid||rt)){const _t=t.resolver?wo((await U()).errors):await w(i,!0);_t!==e.isValid&&g.state.next({isValid:_t})}},x=(rt,_t)=>{!t.disabled&&(m.isValidating||m.validatingFields)&&((rt||Array.from(l.mount)).forEach(gt=>{gt&&(_t?Bi(e.validatingFields,gt,_t):ds(e.validatingFields,gt))}),g.state.next({validatingFields:e.validatingFields,isValidating:!wo(e.validatingFields)}))},R=(rt,_t=[],gt,W,q=!0,ht=!0)=>{if(W&&gt&&!t.disabled){if(a.action=!0,ht&&Array.isArray(Re(i,rt))){const xt=gt(Re(i,rt),W.argA,W.argB);q&&Bi(i,rt,xt)}if(ht&&Array.isArray(Re(e.errors,rt))){const xt=gt(Re(e.errors,rt),W.argA,W.argB);q&&Bi(e.errors,rt,xt),Ust(e.errors,rt)}if(m.touchedFields&&ht&&Array.isArray(Re(e.touchedFields,rt))){const xt=gt(Re(e.touchedFields,rt),W.argA,W.argB);q&&Bi(e.touchedFields,rt,xt)}m.dirtyFields&&(e.dirtyFields=Qv(r,s)),g.state.next({name:rt,isDirty:G(rt,_t),dirtyFields:e.dirtyFields,errors:e.errors,isValid:e.isValid})}else Bi(s,rt,_t)},D=(rt,_t)=>{Bi(e.errors,rt,_t),g.state.next({errors:e.errors})},O=rt=>{e.errors=rt,g.state.next({errors:e.errors,isValid:!1})},N=(rt,_t,gt,W)=>{const q=Re(i,rt);if(q){const ht=Re(s,rt,Yr(gt)?Re(r,rt):gt);Yr(ht)||W&&W.defaultChecked||_t?Bi(s,rt,_t?ht:OC(q._f)):it(rt,ht),a.mount&&T()}},B=(rt,_t,gt,W,q)=>{let ht=!1,xt=!1;const Vt={name:rt};if(!t.disabled){const Lt=!!(Re(i,rt)&&Re(i,rt)._f&&Re(i,rt)._f.disabled);if(!gt||W){m.isDirty&&(xt=e.isDirty,e.isDirty=Vt.isDirty=G(),ht=xt!==Vt.isDirty);const le=Lt||Ed(Re(r,rt),_t);xt=!!(!Lt&&Re(e.dirtyFields,rt)),le||Lt?ds(e.dirtyFields,rt):Bi(e.dirtyFields,rt,!0),Vt.dirtyFields=e.dirtyFields,ht=ht||m.dirtyFields&&xt!==!le}if(gt){const le=Re(e.touchedFields,rt);le||(Bi(e.touchedFields,rt,gt),Vt.touchedFields=e.touchedFields,ht=ht||m.touchedFields&&le!==gt)}ht&&q&&g.state.next(Vt)}return ht?Vt:{}},L=(rt,_t,gt,W)=>{const q=Re(e.errors,rt),ht=m.isValid&&Bl(_t)&&e.isValid!==_t;if(t.delayError&&gt?(c=E(()=>D(rt,gt)),c(t.delayError)):(clearTimeout(f),c=null,gt?Bi(e.errors,rt,gt):ds(e.errors,rt)),(gt?!Ed(q,gt):q)||!wo(W)||ht){const xt={...W,...ht&&Bl(_t)?{isValid:_t}:{},errors:e.errors,name:rt};e={...e,...xt},g.state.next(xt)}},U=async rt=>{x(rt,!0);const _t=await t.resolver(s,t.context,Nst(rt||l.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return x(rt),_t},I=async rt=>{const{errors:_t}=await U(rt);if(rt)for(const gt of rt){const W=Re(_t,gt);W?Bi(e.errors,gt,W):ds(e.errors,gt)}else e.errors=_t;return _t},w=async(rt,_t,gt={valid:!0})=>{for(const W in rt){const q=rt[W];if(q){const{_f:ht,...xt}=q;if(ht){const Vt=l.array.has(ht.name),Lt=q._f&&Ist(q._f);Lt&&m.validatingFields&&x([W],!0);const le=await wU(q,l.disabled,s,S,t.shouldUseNativeValidation&&!_t,Vt);if(Lt&&m.validatingFields&&x([W]),le[ht.name]&&(gt.valid=!1,_t))break;!_t&&(Re(le,ht.name)?Vt?Cst(e.errors,le,ht.name):Bi(e.errors,ht.name,le[ht.name]):ds(e.errors,ht.name))}!wo(xt)&&await w(xt,_t,gt)}}return gt.valid},V=()=>{for(const rt of l.unMount){const _t=Re(i,rt);_t&&(_t._f.refs?_t._f.refs.every(gt=>!RC(gt)):!RC(_t._f.ref))&&ft(rt)}l.unMount=new Set},G=(rt,_t)=>!t.disabled&&(rt&&_t&&Bi(s,rt,_t),!Ed(pt(),r)),k=(rt,_t,gt)=>Ak(rt,l,{...a.mount?s:Yr(_t)?r:jc(rt)?{[rt]:_t}:_t},gt,_t),st=rt=>LM(Re(a.mount?s:r,rt,t.shouldUnregister?Re(r,rt,[]):[])),it=(rt,_t,gt={})=>{const W=Re(i,rt);let q=_t;if(W){const ht=W._f;ht&&(!ht.disabled&&Bi(s,rt,Nk(_t,ht)),q=MT(ht.ref)&&ja(_t)?"":_t,Rk(ht.ref)?[...ht.ref.options].forEach(xt=>xt.selected=q.includes(xt.value)):ht.refs?Kx(ht.ref)?ht.refs.length>1?ht.refs.forEach(xt=>(!xt.defaultChecked||!xt.disabled)&&(xt.checked=Array.isArray(q)?!!q.find(Vt=>Vt===xt.value):q===xt.value)):ht.refs[0]&&(ht.refs[0].checked=!!q):ht.refs.forEach(xt=>xt.checked=xt.value===q):CD(ht.ref)?ht.ref.value="":(ht.ref.value=q,ht.ref.type||g.values.next({name:rt,values:{...s}})))}(gt.shouldDirty||gt.shouldTouch)&&B(rt,q,gt.shouldTouch,gt.shouldDirty,!0),gt.shouldValidate&&$(rt)},Y=(rt,_t,gt)=>{for(const W in _t){const q=_t[W],ht=`${rt}.${W}`,xt=Re(i,ht);(l.array.has(rt)||Kr(q)||xt&&!xt._f)&&!vm(q)?Y(ht,q,gt):it(ht,q,gt)}},Z=(rt,_t,gt={})=>{const W=Re(i,rt),q=l.array.has(rt),ht=Ao(_t);Bi(s,rt,ht),q?(g.array.next({name:rt,values:{...s}}),(m.isDirty||m.dirtyFields)&&gt.shouldDirty&&g.state.next({name:rt,dirtyFields:Qv(r,s),isDirty:G(rt,ht)})):W&&!W._f&&!ja(ht)?Y(rt,ht,gt):it(rt,ht,gt),SU(rt,l)&&g.state.next({...e}),g.values.next({name:a.mount?rt:void 0,values:{...s}})},at=async rt=>{a.mount=!0;const _t=rt.target;let gt=_t.name,W=!0;const q=Re(i,gt),ht=()=>_t.type?OC(q._f):xk(rt),xt=Vt=>{W=Number.isNaN(Vt)||vm(Vt)&&isNaN(Vt.getTime())||Ed(Vt,Re(s,gt,Vt))};if(q){let Vt,Lt;const le=ht(),fe=rt.type===TT.BLUR||rt.type===TT.FOCUS_OUT,Se=!Pst(q._f)&&!t.resolver&&!Re(e.errors,gt)&&!q._f.deps||Lst(fe,Re(e.touchedFields,gt),e.isSubmitted,v,y),He=SU(gt,l,fe);Bi(s,gt,le),fe?(q._f.onBlur&&q._f.onBlur(rt),c&&c(0)):q._f.onChange&&q._f.onChange(rt);const Kt=B(gt,le,fe,!1),xe=!wo(Kt)||He;if(!fe&&g.values.next({name:gt,type:rt.type,values:{...s}}),Se)return m.isValid&&(t.mode==="onBlur"&&fe?T():fe||T()),xe&&g.state.next({name:gt,...He?{}:Kt});if(!fe&&He&&g.state.next({...e}),t.resolver){const{errors:De}=await U([gt]);if(xt(le),W){const Ae=RU(e.errors,i,gt),Yt=RU(De,i,Ae.name||gt);Vt=Yt.error,gt=Yt.name,Lt=wo(De)}}else x([gt],!0),Vt=(await wU(q,l.disabled,s,S,t.shouldUseNativeValidation))[gt],x([gt]),xt(le),W&&(Vt?Lt=!1:m.isValid&&(Lt=await w(i,!0)));W&&(q._f.deps&&$(q._f.deps),L(gt,Lt,Vt,Kt))}},ct=(rt,_t)=>{if(Re(e.errors,_t)&&rt.focus)return rt.focus(),1},$=async(rt,_t={})=>{let gt,W;const q=V0(rt);if(t.resolver){const ht=await I(Yr(rt)?rt:q);gt=wo(ht),W=rt?!q.some(xt=>Re(ht,xt)):gt}else rt?(W=(await Promise.all(q.map(async ht=>{const xt=Re(i,ht);return await w(xt&&xt._f?{[ht]:xt}:xt)}))).every(Boolean),!(!W&&!e.isValid)&&T()):W=gt=await w(i);return g.state.next({...!jc(rt)||m.isValid&&gt!==e.isValid?{}:{name:rt},...t.resolver||!rt?{isValid:gt}:{},errors:e.errors}),_t.shouldFocus&&!W&&F0(i,ct,rt?q:l.mount),W},pt=rt=>{const _t={...a.mount?s:r};return Yr(rt)?_t:jc(rt)?Re(_t,rt):rt.map(gt=>Re(_t,gt))},wt=(rt,_t)=>({invalid:!!Re((_t||e).errors,rt),isDirty:!!Re((_t||e).dirtyFields,rt),error:Re((_t||e).errors,rt),isValidating:!!Re(e.validatingFields,rt),isTouched:!!Re((_t||e).touchedFields,rt)}),zt=rt=>{rt&&V0(rt).forEach(_t=>ds(e.errors,_t)),g.state.next({errors:rt?e.errors:{}})},nt=(rt,_t,gt)=>{const W=(Re(i,rt,{_f:{}})._f||{}).ref,q=Re(e.errors,rt)||{},{ref:ht,message:xt,type:Vt,...Lt}=q;Bi(e.errors,rt,{...Lt,..._t,ref:W}),g.state.next({name:rt,errors:e.errors,isValid:!1}),gt&&gt.shouldFocus&&W&&W.focus&&W.focus()},lt=(rt,_t)=>kc(rt)?g.values.subscribe({next:gt=>rt(k(void 0,_t),gt)}):k(rt,_t,!0),ft=(rt,_t={})=>{for(const gt of rt?V0(rt):l.mount)l.mount.delete(gt),l.array.delete(gt),_t.keepValue||(ds(i,gt),ds(s,gt)),!_t.keepError&&ds(e.errors,gt),!_t.keepDirty&&ds(e.dirtyFields,gt),!_t.keepTouched&&ds(e.touchedFields,gt),!_t.keepIsValidating&&ds(e.validatingFields,gt),!t.shouldUnregister&&!_t.keepDefaultValue&&ds(r,gt);g.values.next({values:{...s}}),g.state.next({...e,..._t.keepDirty?{isDirty:G()}:{}}),!_t.keepIsValid&&T()},mt=({disabled:rt,name:_t,field:gt,fields:W})=>{(Bl(rt)&&a.mount||rt||l.disabled.has(_t))&&(rt?l.disabled.add(_t):l.disabled.delete(_t),B(_t,OC(gt?gt._f:Re(W,_t)._f),!1,!1,!0))},Dt=(rt,_t={})=>{let gt=Re(i,rt);const W=Bl(_t.disabled)||Bl(t.disabled);return Bi(i,rt,{...gt||{},_f:{...gt&&gt._f?gt._f:{ref:{name:rt}},name:rt,mount:!0,..._t}}),l.mount.add(rt),gt?mt({field:gt,disabled:Bl(_t.disabled)?_t.disabled:t.disabled,name:rt}):N(rt,!0,_t.value),{...W?{disabled:_t.disabled||t.disabled}:{},...t.progressive?{required:!!_t.required,min:Jv(_t.min),max:Jv(_t.max),minLength:Jv(_t.minLength),maxLength:Jv(_t.maxLength),pattern:Jv(_t.pattern)}:{},name:rt,onChange:at,onBlur:at,ref:q=>{if(q){Dt(rt,_t),gt=Re(i,rt);const ht=Yr(q.value)&&q.querySelectorAll&&q.querySelectorAll("input,select,textarea")[0]||q,xt=Dst(ht),Vt=gt._f.refs||[];if(xt?Vt.find(Lt=>Lt===ht):ht===gt._f.ref)return;Bi(i,rt,{_f:{...gt._f,...xt?{refs:[...Vt.filter(RC),ht,...Array.isArray(Re(r,rt))?[{}]:[]],ref:{type:ht.type,name:rt}}:{ref:ht}}}),N(rt,!1,void 0,ht)}else gt=Re(i,rt,{}),gt._f&&(gt._f.mount=!1),(t.shouldUnregister||_t.shouldUnregister)&&!(bk(l.array,rt)&&a.action)&&l.unMount.add(rt)}}},Wt=()=>t.shouldFocusError&&F0(i,ct,l.mount),Nt=rt=>{Bl(rt)&&(g.state.next({disabled:rt}),F0(i,(_t,gt)=>{const W=Re(i,gt);W&&(_t.disabled=W._f.disabled||rt,Array.isArray(W._f.refs)&&W._f.refs.forEach(q=>{q.disabled=W._f.disabled||rt}))},0,!1))},Jt=(rt,_t)=>async gt=>{let W;gt&&(gt.preventDefault&&gt.preventDefault(),gt.persist&&gt.persist());let q=Ao(s);if(l.disabled.size)for(const ht of l.disabled)Bi(q,ht,void 0);if(g.state.next({isSubmitting:!0}),t.resolver){const{errors:ht,values:xt}=await U();e.errors=ht,q=xt}else await w(i);if(ds(e.errors,"root"),wo(e.errors)){g.state.next({errors:{}});try{await rt(q,gt)}catch(ht){W=ht}}else _t&&await _t({...e.errors},gt),Wt(),setTimeout(Wt);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:wo(e.errors)&&!W,submitCount:e.submitCount+1,errors:e.errors}),W)throw W},Pt=(rt,_t={})=>{Re(i,rt)&&(Yr(_t.defaultValue)?Z(rt,Ao(Re(r,rt))):(Z(rt,_t.defaultValue),Bi(r,rt,Ao(_t.defaultValue))),_t.keepTouched||ds(e.touchedFields,rt),_t.keepDirty||(ds(e.dirtyFields,rt),e.isDirty=_t.defaultValue?G(rt,Ao(Re(r,rt))):G()),_t.keepError||(ds(e.errors,rt),m.isValid&&T()),g.state.next({...e}))},kt=(rt,_t={})=>{const gt=rt?Ao(rt):r,W=Ao(gt),q=wo(rt),ht=q?r:W;if(_t.keepDefaultValues||(r=gt),!_t.keepValues){if(_t.keepDirtyValues){const xt=new Set([...l.mount,...Object.keys(Qv(r,s))]);for(const Vt of Array.from(xt))Re(e.dirtyFields,Vt)?Bi(ht,Vt,Re(s,Vt)):Z(Vt,Re(ht,Vt))}else{if(TD&&Yr(rt))for(const xt of l.mount){const Vt=Re(i,xt);if(Vt&&Vt._f){const Lt=Array.isArray(Vt._f.refs)?Vt._f.refs[0]:Vt._f.ref;if(MT(Lt)){const le=Lt.closest("form");if(le){le.reset();break}}}}i={}}s=t.shouldUnregister?_t.keepDefaultValues?Ao(r):{}:Ao(ht),g.array.next({values:{...ht}}),g.values.next({values:{...ht}})}l={mount:_t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!m.isValid||!!_t.keepIsValid||!!_t.keepDirtyValues,a.watch=!!t.shouldUnregister,g.state.next({submitCount:_t.keepSubmitCount?e.submitCount:0,isDirty:q?!1:_t.keepDirty?e.isDirty:!!(_t.keepDefaultValues&&!Ed(rt,r)),isSubmitted:_t.keepIsSubmitted?e.isSubmitted:!1,dirtyFields:q?{}:_t.keepDirtyValues?_t.keepDefaultValues&&s?Qv(r,s):e.dirtyFields:_t.keepDefaultValues&&rt?Qv(r,rt):_t.keepDirty?e.dirtyFields:{},touchedFields:_t.keepTouched?e.touchedFields:{},errors:_t.keepErrors?e.errors:{},isSubmitSuccessful:_t.keepIsSubmitSuccessful?e.isSubmitSuccessful:!1,isSubmitting:!1})},tt=(rt,_t)=>kt(kc(rt)?rt(s):rt,_t);return{control:{register:Dt,unregister:ft,getFieldState:wt,handleSubmit:Jt,setError:nt,_executeSchema:U,_getWatch:k,_getDirty:G,_updateValid:T,_removeUnmounted:V,_updateFieldArray:R,_updateDisabledField:mt,_getFieldArray:st,_reset:kt,_resetDefaultValues:()=>kc(t.defaultValues)&&t.defaultValues().then(rt=>{tt(rt,t.resetOptions),g.state.next({isLoading:!1})}),_updateFormState:rt=>{e={...e,...rt}},_disableForm:Nt,_subjects:g,_proxyFormState:m,_setErrors:O,get _fields(){return i},get _formValues(){return s},get _state(){return a},set _state(rt){a=rt},get _defaultValues(){return r},get _names(){return l},set _names(rt){l=rt},get _formState(){return e},set _formState(rt){e=rt},get _options(){return t},set _options(rt){t={...t,...rt}}},trigger:$,register:Dt,handleSubmit:Jt,watch:lt,setValue:Z,getValues:pt,reset:tt,resetField:Pt,clearErrors:zt,unregister:ft,setError:nt,setFocus:(rt,_t={})=>{const gt=Re(i,rt),W=gt&&gt._f;if(W){const q=W.refs?W.refs[0]:W.ref;q.focus&&(q.focus(),_t.shouldSelect&&kc(q.select)&&q.select())}},getFieldState:wt}}function Vst(n={}){const t=Rn.useRef(void 0),e=Rn.useRef(void 0),[i,r]=Rn.useState({isDirty:!1,isValidating:!1,isLoading:kc(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,defaultValues:kc(n.defaultValues)?void 0:n.defaultValues});t.current||(t.current={...Bst(n),formState:i});const s=t.current.control;return s._options=n,wD({subject:s._subjects.state,next:a=>{Tk(a,s._proxyFormState,s._updateFormState,!0)&&r({...s._formState})}}),Rn.useEffect(()=>s._disableForm(n.disabled),[s,n.disabled]),Rn.useEffect(()=>{if(s._proxyFormState.isDirty){const a=s._getDirty();a!==i.isDirty&&s._subjects.state.next({isDirty:a})}},[s,i.isDirty]),Rn.useEffect(()=>{n.values&&!Ed(n.values,e.current)?(s._reset(n.values,s._options.resetOptions),e.current=n.values,r(a=>({...a}))):s._resetDefaultValues()},[n.values,s]),Rn.useEffect(()=>{n.errors&&s._setErrors(n.errors)},[n.errors,s]),Rn.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),Rn.useEffect(()=>{n.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[n.shouldUnregister,s]),t.current.formState=Ek(i,s),t.current}function Ik(n){var t,e,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(t=0;t<r;t++)n[t]&&(e=Ik(n[t]))&&(i&&(i+=" "),i+=e)}else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function dn(){for(var n,t,e=0,i="",r=arguments.length;e<r;e++)(n=arguments[e])&&(t=Ik(n))&&(i&&(i+=" "),i+=t);return i}function Si(n,t,e=void 0){const i={};for(const r in n){const s=n[r];let a="",l=!0;for(let c=0;c<s.length;c+=1){const f=s[c];f&&(a+=(l===!0?"":" ")+t(f),l=!1,e&&e[f]&&(a+=" "+e[f]))}i[r]=a}return i}let OU=0;function Fst(n){const[t,e]=ot.useState(n),i=n||t;return ot.useEffect(()=>{t==null&&(OU+=1,e(`mui-${OU}`))},[t]),i}const kst={...sR},DU=kst.useId;function UM(n){if(DU!==void 0){const t=DU();return n??t}return Fst(n)}function xh(n,...t){const e=new URL(`https://mui.com/production-error/?code=${n}`);return t.forEach(i=>e.searchParams.append("args[]",i)),`Minified MUI error #${n}; visit ${e} for the full message.`}function cn(n){if(typeof n!="string")throw new Error(xh(7));return n.charAt(0).toUpperCase()+n.slice(1)}var DC={exports:{}},Ni={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NU;function Hst(){if(NU)return Ni;NU=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),v=Symbol.for("react.client.reference");function S(E){if(typeof E=="object"&&E!==null){var T=E.$$typeof;switch(T){case n:switch(E=E.type,E){case e:case r:case i:case c:case f:return E;default:switch(E=E&&E.$$typeof,E){case a:case l:case g:case m:return E;case s:return E;default:return T}}case t:return T}}}return Ni.ContextConsumer=s,Ni.ContextProvider=a,Ni.Element=n,Ni.ForwardRef=l,Ni.Fragment=e,Ni.Lazy=g,Ni.Memo=m,Ni.Portal=t,Ni.Profiler=r,Ni.StrictMode=i,Ni.Suspense=c,Ni.SuspenseList=f,Ni.isContextConsumer=function(E){return S(E)===s},Ni.isContextProvider=function(E){return S(E)===a},Ni.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===n},Ni.isForwardRef=function(E){return S(E)===l},Ni.isFragment=function(E){return S(E)===e},Ni.isLazy=function(E){return S(E)===g},Ni.isMemo=function(E){return S(E)===m},Ni.isPortal=function(E){return S(E)===t},Ni.isProfiler=function(E){return S(E)===r},Ni.isStrictMode=function(E){return S(E)===i},Ni.isSuspense=function(E){return S(E)===c},Ni.isSuspenseList=function(E){return S(E)===f},Ni.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===e||E===r||E===i||E===c||E===f||E===y||typeof E=="object"&&E!==null&&(E.$$typeof===g||E.$$typeof===m||E.$$typeof===a||E.$$typeof===s||E.$$typeof===l||E.$$typeof===v||E.getModuleId!==void 0)},Ni.typeOf=S,Ni}var IU;function Gst(){return IU||(IU=1,DC.exports=Hst()),DC.exports}var Pk=Gst();function Hc(n){if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function Lk(n){if(ot.isValidElement(n)||Pk.isValidElementType(n)||!Hc(n))return n;const t={};return Object.keys(n).forEach(e=>{t[e]=Lk(n[e])}),t}function wa(n,t,e={clone:!0}){const i=e.clone?{...n}:n;return Hc(n)&&Hc(t)&&Object.keys(t).forEach(r=>{ot.isValidElement(t[r])||Pk.isValidElementType(t[r])?i[r]=t[r]:Hc(t[r])&&Object.prototype.hasOwnProperty.call(n,r)&&Hc(n[r])?i[r]=wa(n[r],t[r],e):e.clone?i[r]=Hc(t[r])?Lk(t[r]):t[r]:i[r]=t[r]}),i}function k0(n,t){return t?wa(n,t,{clone:!1}):n}function qst(n,t){if(!n.containerQueries)return t;const e=Object.keys(t).filter(i=>i.startsWith("@container")).sort((i,r)=>{var a,l;const s=/min-width:\s*([0-9.]+)/;return+(((a=i.match(s))==null?void 0:a[1])||0)-+(((l=r.match(s))==null?void 0:l[1])||0)});return e.length?e.reduce((i,r)=>{const s=t[r];return delete i[r],i[r]=s,i},{...t}):t}function jst(n,t){return t==="@"||t.startsWith("@")&&(n.some(e=>t.startsWith(`@${e}`))||!!t.match(/^@\d/))}function Xst(n,t){const e=t.match(/^@([^/]+)?\/?(.+)?$/);if(!e)return null;const[,i,r]=e,s=Number.isNaN(+i)?i||0:+i;return n.containerQueries(r).up(s)}function Wst(n){const t=(s,a)=>s.replace("@media",a?`@container ${a}`:"@container");function e(s,a){s.up=(...l)=>t(n.breakpoints.up(...l),a),s.down=(...l)=>t(n.breakpoints.down(...l),a),s.between=(...l)=>t(n.breakpoints.between(...l),a),s.only=(...l)=>t(n.breakpoints.only(...l),a),s.not=(...l)=>{const c=t(n.breakpoints.not(...l),a);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const i={},r=s=>(e(i,s),i);return e(r),{...n,containerQueries:r}}const zM={xs:0,sm:600,md:900,lg:1200,xl:1536},PU={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${zM[n]}px)`},Yst={containerQueries:n=>({up:t=>{let e=typeof t=="number"?t:zM[t]||t;return typeof e=="number"&&(e=`${e}px`),n?`@container ${n} (min-width:${e})`:`@container (min-width:${e})`}})};function bh(n,t,e){const i=n.theme||{};if(Array.isArray(t)){const s=i.breakpoints||PU;return t.reduce((a,l,c)=>(a[s.up(s.keys[c])]=e(t[c]),a),{})}if(typeof t=="object"){const s=i.breakpoints||PU;return Object.keys(t).reduce((a,l)=>{if(jst(s.keys,l)){const c=Xst(i.containerQueries?i:Yst,l);c&&(a[c]=e(t[l],l))}else if(Object.keys(s.values||zM).includes(l)){const c=s.up(l);a[c]=e(t[l],l)}else{const c=l;a[c]=t[c]}return a},{})}return e(t)}function $st(n={}){var e;return((e=n.keys)==null?void 0:e.reduce((i,r)=>{const s=n.up(r);return i[s]={},i},{}))||{}}function Kst(n,t){return n.reduce((e,i)=>{const r=e[i];return(!r||Object.keys(r).length===0)&&delete e[i],e},t)}function BM(n,t,e=!0){if(!t||typeof t!="string")return null;if(n&&n.vars&&e){const i=`vars.${t}`.split(".").reduce((r,s)=>r&&r[s]?r[s]:null,n);if(i!=null)return i}return t.split(".").reduce((i,r)=>i&&i[r]!=null?i[r]:null,n)}function CT(n,t,e,i=e){let r;return typeof n=="function"?r=n(e):Array.isArray(n)?r=n[e]||i:r=BM(n,e)||i,t&&(r=t(r,i,n)),r}function Zr(n){const{prop:t,cssProperty:e=n.prop,themeKey:i,transform:r}=n,s=a=>{if(a[t]==null)return null;const l=a[t],c=a.theme,f=BM(c,i)||{};return bh(a,l,g=>{let y=CT(f,r,g);return g===y&&typeof g=="string"&&(y=CT(f,r,`${t}${g==="default"?"":cn(g)}`,g)),e===!1?y:{[e]:y}})};return s.propTypes={},s.filterProps=[t],s}function Zst(n){const t={};return e=>(t[e]===void 0&&(t[e]=n(e)),t[e])}const Qst={m:"margin",p:"padding"},Jst={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},LU={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},tat=Zst(n=>{if(n.length>2)if(LU[n])n=LU[n];else return[n];const[t,e]=n.split(""),i=Qst[t],r=Jst[e]||"";return Array.isArray(r)?r.map(s=>i+s):[i+r]}),OD=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],DD=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...OD,...DD];function Zx(n,t,e,i){const r=BM(n,t,!0)??e;return typeof r=="number"||typeof r=="string"?s=>typeof s=="string"?s:typeof r=="string"?`calc(${s} * ${r})`:r*s:Array.isArray(r)?s=>{if(typeof s=="string")return s;const a=Math.abs(s),l=r[a];return s>=0?l:typeof l=="number"?-l:`-${l}`}:typeof r=="function"?r:()=>{}}function ND(n){return Zx(n,"spacing",8)}function Qx(n,t){return typeof t=="string"||t==null?t:n(t)}function eat(n,t){return e=>n.reduce((i,r)=>(i[r]=Qx(t,e),i),{})}function nat(n,t,e,i){if(!t.includes(e))return null;const r=tat(e),s=eat(r,i),a=n[e];return bh(n,a,s)}function Uk(n,t){const e=ND(n.theme);return Object.keys(n).map(i=>nat(n,t,i,e)).reduce(k0,{})}function zr(n){return Uk(n,OD)}zr.propTypes={};zr.filterProps=OD;function Br(n){return Uk(n,DD)}Br.propTypes={};Br.filterProps=DD;function VM(...n){const t=n.reduce((i,r)=>(r.filterProps.forEach(s=>{i[s]=r}),i),{}),e=i=>Object.keys(i).reduce((r,s)=>t[s]?k0(r,t[s](i)):r,{});return e.propTypes={},e.filterProps=n.reduce((i,r)=>i.concat(r.filterProps),[]),e}function Fl(n){return typeof n!="number"?n:`${n}px solid`}function jl(n,t){return Zr({prop:n,themeKey:"borders",transform:t})}const iat=jl("border",Fl),rat=jl("borderTop",Fl),sat=jl("borderRight",Fl),aat=jl("borderBottom",Fl),oat=jl("borderLeft",Fl),lat=jl("borderColor"),uat=jl("borderTopColor"),cat=jl("borderRightColor"),fat=jl("borderBottomColor"),hat=jl("borderLeftColor"),dat=jl("outline",Fl),pat=jl("outlineColor"),FM=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const t=Zx(n.theme,"shape.borderRadius",4),e=i=>({borderRadius:Qx(t,i)});return bh(n,n.borderRadius,e)}return null};FM.propTypes={};FM.filterProps=["borderRadius"];VM(iat,rat,sat,aat,oat,lat,uat,cat,fat,hat,FM,dat,pat);const kM=n=>{if(n.gap!==void 0&&n.gap!==null){const t=Zx(n.theme,"spacing",8),e=i=>({gap:Qx(t,i)});return bh(n,n.gap,e)}return null};kM.propTypes={};kM.filterProps=["gap"];const HM=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const t=Zx(n.theme,"spacing",8),e=i=>({columnGap:Qx(t,i)});return bh(n,n.columnGap,e)}return null};HM.propTypes={};HM.filterProps=["columnGap"];const GM=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const t=Zx(n.theme,"spacing",8),e=i=>({rowGap:Qx(t,i)});return bh(n,n.rowGap,e)}return null};GM.propTypes={};GM.filterProps=["rowGap"];const mat=Zr({prop:"gridColumn"}),gat=Zr({prop:"gridRow"}),yat=Zr({prop:"gridAutoFlow"}),_at=Zr({prop:"gridAutoColumns"}),vat=Zr({prop:"gridAutoRows"}),xat=Zr({prop:"gridTemplateColumns"}),bat=Zr({prop:"gridTemplateRows"}),Sat=Zr({prop:"gridTemplateAreas"}),Eat=Zr({prop:"gridArea"});VM(kM,HM,GM,mat,gat,yat,_at,vat,xat,bat,Sat,Eat);function By(n,t){return t==="grey"?t:n}const Tat=Zr({prop:"color",themeKey:"palette",transform:By}),Mat=Zr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:By}),Aat=Zr({prop:"backgroundColor",themeKey:"palette",transform:By});VM(Tat,Mat,Aat);function ll(n){return n<=1&&n!==0?`${n*100}%`:n}const wat=Zr({prop:"width",transform:ll}),ID=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const t=e=>{var r,s,a,l,c;const i=((a=(s=(r=n.theme)==null?void 0:r.breakpoints)==null?void 0:s.values)==null?void 0:a[e])||zM[e];return i?((c=(l=n.theme)==null?void 0:l.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${i}${n.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:ll(e)}};return bh(n,n.maxWidth,t)}return null};ID.filterProps=["maxWidth"];const Cat=Zr({prop:"minWidth",transform:ll}),Rat=Zr({prop:"height",transform:ll}),Oat=Zr({prop:"maxHeight",transform:ll}),Dat=Zr({prop:"minHeight",transform:ll});Zr({prop:"size",cssProperty:"width",transform:ll});Zr({prop:"size",cssProperty:"height",transform:ll});const Nat=Zr({prop:"boxSizing"});VM(wat,ID,Cat,Rat,Oat,Dat,Nat);const Jx={border:{themeKey:"borders",transform:Fl},borderTop:{themeKey:"borders",transform:Fl},borderRight:{themeKey:"borders",transform:Fl},borderBottom:{themeKey:"borders",transform:Fl},borderLeft:{themeKey:"borders",transform:Fl},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Fl},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:FM},color:{themeKey:"palette",transform:By},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:By},backgroundColor:{themeKey:"palette",transform:By},p:{style:Br},pt:{style:Br},pr:{style:Br},pb:{style:Br},pl:{style:Br},px:{style:Br},py:{style:Br},padding:{style:Br},paddingTop:{style:Br},paddingRight:{style:Br},paddingBottom:{style:Br},paddingLeft:{style:Br},paddingX:{style:Br},paddingY:{style:Br},paddingInline:{style:Br},paddingInlineStart:{style:Br},paddingInlineEnd:{style:Br},paddingBlock:{style:Br},paddingBlockStart:{style:Br},paddingBlockEnd:{style:Br},m:{style:zr},mt:{style:zr},mr:{style:zr},mb:{style:zr},ml:{style:zr},mx:{style:zr},my:{style:zr},margin:{style:zr},marginTop:{style:zr},marginRight:{style:zr},marginBottom:{style:zr},marginLeft:{style:zr},marginX:{style:zr},marginY:{style:zr},marginInline:{style:zr},marginInlineStart:{style:zr},marginInlineEnd:{style:zr},marginBlock:{style:zr},marginBlockStart:{style:zr},marginBlockEnd:{style:zr},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:kM},rowGap:{style:GM},columnGap:{style:HM},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ll},maxWidth:{style:ID},minWidth:{transform:ll},height:{transform:ll},maxHeight:{transform:ll},minHeight:{transform:ll},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Iat(...n){const t=n.reduce((i,r)=>i.concat(Object.keys(r)),[]),e=new Set(t);return n.every(i=>e.size===Object.keys(i).length)}function Pat(n,t){return typeof n=="function"?n(t):n}function Lat(){function n(e,i,r,s){const a={[e]:i,theme:r},l=s[e];if(!l)return{[e]:i};const{cssProperty:c=e,themeKey:f,transform:m,style:g}=l;if(i==null)return null;if(f==="typography"&&i==="inherit")return{[e]:i};const y=BM(r,f)||{};return g?g(a):bh(a,i,S=>{let E=CT(y,m,S);return S===E&&typeof S=="string"&&(E=CT(y,m,`${e}${S==="default"?"":cn(S)}`,S)),c===!1?E:{[c]:E}})}function t(e){const{sx:i,theme:r={}}=e||{};if(!i)return null;const s=r.unstable_sxConfig??Jx;function a(l){let c=l;if(typeof l=="function")c=l(r);else if(typeof l!="object")return l;if(!c)return null;const f=$st(r.breakpoints),m=Object.keys(f);let g=f;return Object.keys(c).forEach(y=>{const v=Pat(c[y],r);if(v!=null)if(typeof v=="object")if(s[y])g=k0(g,n(y,v,r,s));else{const S=bh({theme:r},v,E=>({[y]:E}));Iat(S,v)?g[y]=t({sx:v,theme:r}):g=k0(g,S)}else g=k0(g,n(y,v,r,s))}),qst(r,Kst(m,g))}return Array.isArray(i)?i.map(a):a(i)}return t}const Fm=Lat();Fm.filterProps=["sx"];const Uat=n=>{var i;const t={systemProps:{},otherProps:{}},e=((i=n==null?void 0:n.theme)==null?void 0:i.unstable_sxConfig)??Jx;return Object.keys(n).forEach(r=>{e[r]?t.systemProps[r]=n[r]:t.otherProps[r]=n[r]}),t};function zk(n){const{sx:t,...e}=n,{systemProps:i,otherProps:r}=Uat(e);let s;return Array.isArray(t)?s=[i,...t]:typeof t=="function"?s=(...a)=>{const l=t(...a);return Hc(l)?{...i,...l}:i}:s={...i,...t},{...r,sx:s}}function zat(n){if(n.sheet)return n.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===n)return document.styleSheets[t]}function Bat(n){var t=document.createElement("style");return t.setAttribute("data-emotion",n.key),n.nonce!==void 0&&t.setAttribute("nonce",n.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Vat=function(){function n(e){var i=this;this._insertTag=function(r){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(r,s),i.tags.push(r)},this.isSpeedy=e.speedy===void 0?!0:e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=n.prototype;return t.hydrate=function(i){i.forEach(this._insertTag)},t.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Bat(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=zat(r);try{s.insertRule(i,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(i));this.ctr++},t.flush=function(){this.tags.forEach(function(i){var r;return(r=i.parentNode)==null?void 0:r.removeChild(i)}),this.tags=[],this.ctr=0},n}(),va="-ms-",RT="-moz-",di="-webkit-",Bk="comm",PD="rule",LD="decl",Fat="@import",Vk="@keyframes",kat="@layer",Hat=Math.abs,qM=String.fromCharCode,Gat=Object.assign;function qat(n,t){return Ws(n,0)^45?(((t<<2^Ws(n,0))<<2^Ws(n,1))<<2^Ws(n,2))<<2^Ws(n,3):0}function Fk(n){return n.trim()}function jat(n,t){return(n=t.exec(n))?n[0]:n}function pi(n,t,e){return n.replace(t,e)}function u2(n,t){return n.indexOf(t)}function Ws(n,t){return n.charCodeAt(t)|0}function wx(n,t,e){return n.slice(t,e)}function zc(n){return n.length}function UD(n){return n.length}function DE(n,t){return t.push(n),n}function Xat(n,t){return n.map(t).join("")}var jM=1,l_=1,kk=0,zo=0,us=0,M_="";function XM(n,t,e,i,r,s,a){return{value:n,root:t,parent:e,type:i,props:r,children:s,line:jM,column:l_,length:a,return:""}}function t0(n,t){return Gat(XM("",null,null,"",null,null,0),n,{length:-n.length},t)}function Wat(){return us}function Yat(){return us=zo>0?Ws(M_,--zo):0,l_--,us===10&&(l_=1,jM--),us}function hl(){return us=zo<kk?Ws(M_,zo++):0,l_++,us===10&&(l_=1,jM++),us}function Jc(){return Ws(M_,zo)}function JE(){return zo}function tb(n,t){return wx(M_,n,t)}function Cx(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Hk(n){return jM=l_=1,kk=zc(M_=n),zo=0,[]}function Gk(n){return M_="",n}function t1(n){return Fk(tb(zo-1,c2(n===91?n+2:n===40?n+1:n)))}function $at(n){for(;(us=Jc())&&us<33;)hl();return Cx(n)>2||Cx(us)>3?"":" "}function Kat(n,t){for(;--t&&hl()&&!(us<48||us>102||us>57&&us<65||us>70&&us<97););return tb(n,JE()+(t<6&&Jc()==32&&hl()==32))}function c2(n){for(;hl();)switch(us){case n:return zo;case 34:case 39:n!==34&&n!==39&&c2(us);break;case 40:n===41&&c2(n);break;case 92:hl();break}return zo}function Zat(n,t){for(;hl()&&n+us!==57;)if(n+us===84&&Jc()===47)break;return"/*"+tb(t,zo-1)+"*"+qM(n===47?n:hl())}function Qat(n){for(;!Cx(Jc());)hl();return tb(n,zo)}function Jat(n){return Gk(e1("",null,null,null,[""],n=Hk(n),0,[0],n))}function e1(n,t,e,i,r,s,a,l,c){for(var f=0,m=0,g=a,y=0,v=0,S=0,E=1,T=1,x=1,R=0,D="",O=r,N=s,B=i,L=D;T;)switch(S=R,R=hl()){case 40:if(S!=108&&Ws(L,g-1)==58){u2(L+=pi(t1(R),"&","&\f"),"&\f")!=-1&&(x=-1);break}case 34:case 39:case 91:L+=t1(R);break;case 9:case 10:case 13:case 32:L+=$at(S);break;case 92:L+=Kat(JE()-1,7);continue;case 47:switch(Jc()){case 42:case 47:DE(tot(Zat(hl(),JE()),t,e),c);break;default:L+="/"}break;case 123*E:l[f++]=zc(L)*x;case 125*E:case 59:case 0:switch(R){case 0:case 125:T=0;case 59+m:x==-1&&(L=pi(L,/\f/g,"")),v>0&&zc(L)-g&&DE(v>32?zU(L+";",i,e,g-1):zU(pi(L," ","")+";",i,e,g-2),c);break;case 59:L+=";";default:if(DE(B=UU(L,t,e,f,m,r,l,D,O=[],N=[],g),s),R===123)if(m===0)e1(L,t,B,B,O,s,g,l,N);else switch(y===99&&Ws(L,3)===110?100:y){case 100:case 108:case 109:case 115:e1(n,B,B,i&&DE(UU(n,B,B,0,0,r,l,D,r,O=[],g),N),r,N,g,l,i?O:N);break;default:e1(L,B,B,B,[""],N,0,l,N)}}f=m=v=0,E=x=1,D=L="",g=a;break;case 58:g=1+zc(L),v=S;default:if(E<1){if(R==123)--E;else if(R==125&&E++==0&&Yat()==125)continue}switch(L+=qM(R),R*E){case 38:x=m>0?1:(L+="\f",-1);break;case 44:l[f++]=(zc(L)-1)*x,x=1;break;case 64:Jc()===45&&(L+=t1(hl())),y=Jc(),m=g=zc(D=L+=Qat(JE())),R++;break;case 45:S===45&&zc(L)==2&&(E=0)}}return s}function UU(n,t,e,i,r,s,a,l,c,f,m){for(var g=r-1,y=r===0?s:[""],v=UD(y),S=0,E=0,T=0;S<i;++S)for(var x=0,R=wx(n,g+1,g=Hat(E=a[S])),D=n;x<v;++x)(D=Fk(E>0?y[x]+" "+R:pi(R,/&\f/g,y[x])))&&(c[T++]=D);return XM(n,t,e,r===0?PD:l,c,f,m)}function tot(n,t,e){return XM(n,t,e,Bk,qM(Wat()),wx(n,2,-2),0)}function zU(n,t,e,i){return XM(n,t,e,LD,wx(n,0,i),wx(n,i+1,-1),i)}function Vy(n,t){for(var e="",i=UD(n),r=0;r<i;r++)e+=t(n[r],r,n,t)||"";return e}function eot(n,t,e,i){switch(n.type){case kat:if(n.children.length)break;case Fat:case LD:return n.return=n.return||n.value;case Bk:return"";case Vk:return n.return=n.value+"{"+Vy(n.children,i)+"}";case PD:n.value=n.props.join(",")}return zc(e=Vy(n.children,i))?n.return=n.value+"{"+e+"}":""}function not(n){var t=UD(n);return function(e,i,r,s){for(var a="",l=0;l<t;l++)a+=n[l](e,i,r,s)||"";return a}}function iot(n){return function(t){t.root||(t=t.return)&&n(t)}}function qk(n){var t=Object.create(null);return function(e){return t[e]===void 0&&(t[e]=n(e)),t[e]}}var rot=function(t,e,i){for(var r=0,s=0;r=s,s=Jc(),r===38&&s===12&&(e[i]=1),!Cx(s);)hl();return tb(t,zo)},sot=function(t,e){var i=-1,r=44;do switch(Cx(r)){case 0:r===38&&Jc()===12&&(e[i]=1),t[i]+=rot(zo-1,e,i);break;case 2:t[i]+=t1(r);break;case 4:if(r===44){t[++i]=Jc()===58?"&\f":"",e[i]=t[i].length;break}default:t[i]+=qM(r)}while(r=hl());return t},aot=function(t,e){return Gk(sot(Hk(t),e))},BU=new WeakMap,oot=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var e=t.value,i=t.parent,r=t.column===i.column&&t.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(t.props.length===1&&e.charCodeAt(0)!==58&&!BU.get(i))&&!r){BU.set(t,!0);for(var s=[],a=aot(e,s),l=i.props,c=0,f=0;c<a.length;c++)for(var m=0;m<l.length;m++,f++)t.props[f]=s[c]?a[c].replace(/&\f/g,l[m]):l[m]+" "+a[c]}}},lot=function(t){if(t.type==="decl"){var e=t.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(t.return="",t.value="")}};function jk(n,t){switch(qat(n,t)){case 5103:return di+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return di+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return di+n+RT+n+va+n+n;case 6828:case 4268:return di+n+va+n+n;case 6165:return di+n+va+"flex-"+n+n;case 5187:return di+n+pi(n,/(\w+).+(:[^]+)/,di+"box-$1$2"+va+"flex-$1$2")+n;case 5443:return di+n+va+"flex-item-"+pi(n,/flex-|-self/,"")+n;case 4675:return di+n+va+"flex-line-pack"+pi(n,/align-content|flex-|-self/,"")+n;case 5548:return di+n+va+pi(n,"shrink","negative")+n;case 5292:return di+n+va+pi(n,"basis","preferred-size")+n;case 6060:return di+"box-"+pi(n,"-grow","")+di+n+va+pi(n,"grow","positive")+n;case 4554:return di+pi(n,/([^-])(transform)/g,"$1"+di+"$2")+n;case 6187:return pi(pi(pi(n,/(zoom-|grab)/,di+"$1"),/(image-set)/,di+"$1"),n,"")+n;case 5495:case 3959:return pi(n,/(image-set\([^]*)/,di+"$1$`$1");case 4968:return pi(pi(n,/(.+:)(flex-)?(.*)/,di+"box-pack:$3"+va+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+di+n+n;case 4095:case 3583:case 4068:case 2532:return pi(n,/(.+)-inline(.+)/,di+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(zc(n)-1-t>6)switch(Ws(n,t+1)){case 109:if(Ws(n,t+4)!==45)break;case 102:return pi(n,/(.+:)(.+)-([^]+)/,"$1"+di+"$2-$3$1"+RT+(Ws(n,t+3)==108?"$3":"$2-$3"))+n;case 115:return~u2(n,"stretch")?jk(pi(n,"stretch","fill-available"),t)+n:n}break;case 4949:if(Ws(n,t+1)!==115)break;case 6444:switch(Ws(n,zc(n)-3-(~u2(n,"!important")&&10))){case 107:return pi(n,":",":"+di)+n;case 101:return pi(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+di+(Ws(n,14)===45?"inline-":"")+"box$3$1"+di+"$2$3$1"+va+"$2box$3")+n}break;case 5936:switch(Ws(n,t+11)){case 114:return di+n+va+pi(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return di+n+va+pi(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return di+n+va+pi(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return di+n+va+n+n}return n}var uot=function(t,e,i,r){if(t.length>-1&&!t.return)switch(t.type){case LD:t.return=jk(t.value,t.length);break;case Vk:return Vy([t0(t,{value:pi(t.value,"@","@"+di)})],r);case PD:if(t.length)return Xat(t.props,function(s){switch(jat(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Vy([t0(t,{props:[pi(s,/:(read-\w+)/,":"+RT+"$1")]})],r);case"::placeholder":return Vy([t0(t,{props:[pi(s,/:(plac\w+)/,":"+di+"input-$1")]}),t0(t,{props:[pi(s,/:(plac\w+)/,":"+RT+"$1")]}),t0(t,{props:[pi(s,/:(plac\w+)/,va+"input-$1")]})],r)}return""})}},cot=[uot],fot=function(t){var e=t.key;if(e==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(E){var T=E.getAttribute("data-emotion");T.indexOf(" ")!==-1&&(document.head.appendChild(E),E.setAttribute("data-s",""))})}var r=t.stylisPlugins||cot,s={},a,l=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(E){for(var T=E.getAttribute("data-emotion").split(" "),x=1;x<T.length;x++)s[T[x]]=!0;l.push(E)});var c,f=[oot,lot];{var m,g=[eot,iot(function(E){m.insert(E)})],y=not(f.concat(r,g)),v=function(T){return Vy(Jat(T),y)};c=function(T,x,R,D){m=R,v(T?T+"{"+x.styles+"}":x.styles),D&&(S.inserted[x.name]=!0)}}var S={key:e,sheet:new Vat({key:e,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:c};return S.sheet.hydrate(l),S},NC={exports:{}},xi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VU;function hot(){if(VU)return xi;VU=1;var n=typeof Symbol=="function"&&Symbol.for,t=n?Symbol.for("react.element"):60103,e=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,r=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,a=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,m=n?Symbol.for("react.forward_ref"):60112,g=n?Symbol.for("react.suspense"):60113,y=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,S=n?Symbol.for("react.lazy"):60116,E=n?Symbol.for("react.block"):60121,T=n?Symbol.for("react.fundamental"):60117,x=n?Symbol.for("react.responder"):60118,R=n?Symbol.for("react.scope"):60119;function D(N){if(typeof N=="object"&&N!==null){var B=N.$$typeof;switch(B){case t:switch(N=N.type,N){case c:case f:case i:case s:case r:case g:return N;default:switch(N=N&&N.$$typeof,N){case l:case m:case S:case v:case a:return N;default:return B}}case e:return B}}}function O(N){return D(N)===f}return xi.AsyncMode=c,xi.ConcurrentMode=f,xi.ContextConsumer=l,xi.ContextProvider=a,xi.Element=t,xi.ForwardRef=m,xi.Fragment=i,xi.Lazy=S,xi.Memo=v,xi.Portal=e,xi.Profiler=s,xi.StrictMode=r,xi.Suspense=g,xi.isAsyncMode=function(N){return O(N)||D(N)===c},xi.isConcurrentMode=O,xi.isContextConsumer=function(N){return D(N)===l},xi.isContextProvider=function(N){return D(N)===a},xi.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===t},xi.isForwardRef=function(N){return D(N)===m},xi.isFragment=function(N){return D(N)===i},xi.isLazy=function(N){return D(N)===S},xi.isMemo=function(N){return D(N)===v},xi.isPortal=function(N){return D(N)===e},xi.isProfiler=function(N){return D(N)===s},xi.isStrictMode=function(N){return D(N)===r},xi.isSuspense=function(N){return D(N)===g},xi.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===i||N===f||N===s||N===r||N===g||N===y||typeof N=="object"&&N!==null&&(N.$$typeof===S||N.$$typeof===v||N.$$typeof===a||N.$$typeof===l||N.$$typeof===m||N.$$typeof===T||N.$$typeof===x||N.$$typeof===R||N.$$typeof===E)},xi.typeOf=D,xi}var FU;function dot(){return FU||(FU=1,NC.exports=hot()),NC.exports}var IC,kU;function pot(){if(kU)return IC;kU=1;var n=dot(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[n.ForwardRef]=i,s[n.Memo]=r;function a(S){return n.isMemo(S)?r:s[S.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,g=Object.getPrototypeOf,y=Object.prototype;function v(S,E,T){if(typeof E!="string"){if(y){var x=g(E);x&&x!==y&&v(S,x,T)}var R=c(E);f&&(R=R.concat(f(E)));for(var D=a(S),O=a(E),N=0;N<R.length;++N){var B=R[N];if(!e[B]&&!(T&&T[B])&&!(O&&O[B])&&!(D&&D[B])){var L=m(E,B);try{l(S,B,L)}catch{}}}}return S}return IC=v,IC}pot();var mot=!0;function Xk(n,t,e){var i="";return e.split(" ").forEach(function(r){n[r]!==void 0?t.push(n[r]+";"):r&&(i+=r+" ")}),i}var zD=function(t,e,i){var r=t.key+"-"+e.name;(i===!1||mot===!1)&&t.registered[r]===void 0&&(t.registered[r]=e.styles)},BD=function(t,e,i){zD(t,e,i);var r=t.key+"-"+e.name;if(t.inserted[e.name]===void 0){var s=e;do t.insert(e===s?"."+r:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function got(n){for(var t=0,e,i=0,r=n.length;r>=4;++i,r-=4)e=n.charCodeAt(i)&255|(n.charCodeAt(++i)&255)<<8|(n.charCodeAt(++i)&255)<<16|(n.charCodeAt(++i)&255)<<24,e=(e&65535)*1540483477+((e>>>16)*59797<<16),e^=e>>>24,t=(e&65535)*1540483477+((e>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(r){case 3:t^=(n.charCodeAt(i+2)&255)<<16;case 2:t^=(n.charCodeAt(i+1)&255)<<8;case 1:t^=n.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var yot={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},_ot=/[A-Z]|^ms/g,vot=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Wk=function(t){return t.charCodeAt(1)===45},HU=function(t){return t!=null&&typeof t!="boolean"},PC=qk(function(n){return Wk(n)?n:n.replace(_ot,"-$&").toLowerCase()}),GU=function(t,e){switch(t){case"animation":case"animationName":if(typeof e=="string")return e.replace(vot,function(i,r,s){return Bc={name:r,styles:s,next:Bc},r})}return yot[t]!==1&&!Wk(t)&&typeof e=="number"&&e!==0?e+"px":e};function Rx(n,t,e){if(e==null)return"";var i=e;if(i.__emotion_styles!==void 0)return i;switch(typeof e){case"boolean":return"";case"object":{var r=e;if(r.anim===1)return Bc={name:r.name,styles:r.styles,next:Bc},r.name;var s=e;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)Bc={name:a.name,styles:a.styles,next:Bc},a=a.next;var l=s.styles+";";return l}return xot(n,t,e)}case"function":{if(n!==void 0){var c=Bc,f=e(n);return Bc=c,Rx(n,t,f)}break}}var m=e;if(t==null)return m;var g=t[m];return g!==void 0?g:m}function xot(n,t,e){var i="";if(Array.isArray(e))for(var r=0;r<e.length;r++)i+=Rx(n,t,e[r])+";";else for(var s in e){var a=e[s];if(typeof a!="object"){var l=a;t!=null&&t[l]!==void 0?i+=s+"{"+t[l]+"}":HU(l)&&(i+=PC(s)+":"+GU(s,l)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var c=0;c<a.length;c++)HU(a[c])&&(i+=PC(s)+":"+GU(s,a[c])+";");else{var f=Rx(n,t,a);switch(s){case"animation":case"animationName":{i+=PC(s)+":"+f+";";break}default:i+=s+"{"+f+"}"}}}return i}var qU=/label:\s*([^\s;{]+)\s*(;|$)/g,Bc;function eb(n,t,e){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var i=!0,r="";Bc=void 0;var s=n[0];if(s==null||s.raw===void 0)i=!1,r+=Rx(e,t,s);else{var a=s;r+=a[0]}for(var l=1;l<n.length;l++)if(r+=Rx(e,t,n[l]),i){var c=s;r+=c[l]}qU.lastIndex=0;for(var f="",m;(m=qU.exec(r))!==null;)f+="-"+m[1];var g=got(r)+f;return{name:g,styles:r,next:Bc}}var bot=function(t){return t()},Yk=sR.useInsertionEffect?sR.useInsertionEffect:!1,$k=Yk||bot,jU=Yk||ot.useLayoutEffect,Kk=ot.createContext(typeof HTMLElement<"u"?fot({key:"css"}):null);Kk.Provider;var VD=function(t){return ot.forwardRef(function(e,i){var r=ot.useContext(Kk);return t(e,r,i)})},WM=ot.createContext({}),FD={}.hasOwnProperty,f2="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Sot=function(t,e){var i={};for(var r in e)FD.call(e,r)&&(i[r]=e[r]);return i[f2]=t,i},Eot=function(t){var e=t.cache,i=t.serialized,r=t.isStringTag;return zD(e,i,r),$k(function(){return BD(e,i,r)}),null},Tot=VD(function(n,t,e){var i=n.css;typeof i=="string"&&t.registered[i]!==void 0&&(i=t.registered[i]);var r=n[f2],s=[i],a="";typeof n.className=="string"?a=Xk(t.registered,s,n.className):n.className!=null&&(a=n.className+" ");var l=eb(s,void 0,ot.useContext(WM));a+=t.key+"-"+l.name;var c={};for(var f in n)FD.call(n,f)&&f!=="css"&&f!==f2&&(c[f]=n[f]);return c.className=a,e&&(c.ref=e),ot.createElement(ot.Fragment,null,ot.createElement(Eot,{cache:t,serialized:l,isStringTag:typeof r=="string"}),ot.createElement(r,c))}),Mot=Tot,XU=function(t,e){var i=arguments;if(e==null||!FD.call(e,"css"))return ot.createElement.apply(void 0,i);var r=i.length,s=new Array(r);s[0]=Mot,s[1]=Sot(t,e);for(var a=2;a<r;a++)s[a]=i[a];return ot.createElement.apply(null,s)};(function(n){var t;t||(t=n.JSX||(n.JSX={}))})(XU||(XU={}));var Aot=VD(function(n,t){var e=n.styles,i=eb([e],void 0,ot.useContext(WM)),r=ot.useRef();return jU(function(){var s=t.key+"-global",a=new t.sheet.constructor({key:s,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),l=!1,c=document.querySelector('style[data-emotion="'+s+" "+i.name+'"]');return t.sheet.tags.length&&(a.before=t.sheet.tags[0]),c!==null&&(l=!0,c.setAttribute("data-emotion",s),a.hydrate([c])),r.current=[a,l],function(){a.flush()}},[t]),jU(function(){var s=r.current,a=s[0],l=s[1];if(l){s[1]=!1;return}if(i.next!==void 0&&BD(t,i.next,!0),a.tags.length){var c=a.tags[a.tags.length-1].nextElementSibling;a.before=c,a.flush()}t.insert("",i,a,!1)},[t,i.name]),null});function kD(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return eb(t)}function nb(){var n=kD.apply(void 0,arguments),t="animation-"+n.name;return{name:t,styles:"@keyframes "+t+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var wot=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Cot=qk(function(n){return wot.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),Rot=Cot,Oot=function(t){return t!=="theme"},WU=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Rot:Oot},YU=function(t,e,i){var r;if(e){var s=e.shouldForwardProp;r=t.__emotion_forwardProp&&s?function(a){return t.__emotion_forwardProp(a)&&s(a)}:s}return typeof r!="function"&&i&&(r=t.__emotion_forwardProp),r},Dot=function(t){var e=t.cache,i=t.serialized,r=t.isStringTag;return zD(e,i,r),$k(function(){return BD(e,i,r)}),null},Not=function n(t,e){var i=t.__emotion_real===t,r=i&&t.__emotion_base||t,s,a;e!==void 0&&(s=e.label,a=e.target);var l=YU(t,e,i),c=l||WU(r),f=!c("as");return function(){var m=arguments,g=i&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(s!==void 0&&g.push("label:"+s+";"),m[0]==null||m[0].raw===void 0)g.push.apply(g,m);else{var y=m[0];g.push(y[0]);for(var v=m.length,S=1;S<v;S++)g.push(m[S],y[S])}var E=VD(function(T,x,R){var D=f&&T.as||r,O="",N=[],B=T;if(T.theme==null){B={};for(var L in T)B[L]=T[L];B.theme=ot.useContext(WM)}typeof T.className=="string"?O=Xk(x.registered,N,T.className):T.className!=null&&(O=T.className+" ");var U=eb(g.concat(N),x.registered,B);O+=x.key+"-"+U.name,a!==void 0&&(O+=" "+a);var I=f&&l===void 0?WU(D):c,w={};for(var V in T)f&&V==="as"||I(V)&&(w[V]=T[V]);return w.className=O,R&&(w.ref=R),ot.createElement(ot.Fragment,null,ot.createElement(Dot,{cache:x,serialized:U,isStringTag:typeof D=="string"}),ot.createElement(D,w))});return E.displayName=s!==void 0?s:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",E.defaultProps=t.defaultProps,E.__emotion_real=E,E.__emotion_base=r,E.__emotion_styles=g,E.__emotion_forwardProp=l,Object.defineProperty(E,"toString",{value:function(){return"."+a}}),E.withComponent=function(T,x){var R=n(T,ux({},e,x,{shouldForwardProp:YU(E,x,!0)}));return R.apply(void 0,g)},E}},Iot=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],h2=Not.bind(null);Iot.forEach(function(n){h2[n]=h2(n)});function Pot(n){return n==null||Object.keys(n).length===0}function Lot(n){const{styles:t,defaultTheme:e={}}=n,i=typeof t=="function"?r=>t(Pot(r)?e:r):t;return Mt.jsx(Aot,{styles:i})}/**
 * @mui/styled-engine v6.4.8
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Zk(n,t){return h2(n,t)}function Uot(n,t){Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=t(n.__emotion_styles))}const $U=[];function KU(n){return $U[0]=n,eb($U)}const zot=n=>{const t=Object.keys(n).map(e=>({key:e,val:n[e]}))||[];return t.sort((e,i)=>e.val-i.val),t.reduce((e,i)=>({...e,[i.key]:i.val}),{})};function Bot(n){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:e="px",step:i=5,...r}=n,s=zot(t),a=Object.keys(s);function l(y){return`@media (min-width:${typeof t[y]=="number"?t[y]:y}${e})`}function c(y){return`@media (max-width:${(typeof t[y]=="number"?t[y]:y)-i/100}${e})`}function f(y,v){const S=a.indexOf(v);return`@media (min-width:${typeof t[y]=="number"?t[y]:y}${e}) and (max-width:${(S!==-1&&typeof t[a[S]]=="number"?t[a[S]]:v)-i/100}${e})`}function m(y){return a.indexOf(y)+1<a.length?f(y,a[a.indexOf(y)+1]):l(y)}function g(y){const v=a.indexOf(y);return v===0?l(a[1]):v===a.length-1?c(a[v]):f(y,a[a.indexOf(y)+1]).replace("@media","@media not all and")}return{keys:a,values:s,up:l,down:c,between:f,only:m,not:g,unit:e,...r}}const Vot={borderRadius:4};function Qk(n=8,t=ND({spacing:n})){if(n.mui)return n;const e=(...i)=>(i.length===0?[1]:i).map(s=>{const a=t(s);return typeof a=="number"?`${a}px`:a}).join(" ");return e.mui=!0,e}function Fot(n,t){var i;const e=this;if(e.vars){if(!((i=e.colorSchemes)!=null&&i[n])||typeof e.getColorSchemeSelector!="function")return{};let r=e.getColorSchemeSelector(n);return r==="&"?t:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:t})}return e.palette.mode===n?t:{}}function HD(n={},...t){const{breakpoints:e={},palette:i={},spacing:r,shape:s={},...a}=n,l=Bot(e),c=Qk(r);let f=wa({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...i},spacing:c,shape:{...Vot,...s}},a);return f=Wst(f),f.applyStyles=Fot,f=t.reduce((m,g)=>wa(m,g),f),f.unstable_sxConfig={...Jx,...a==null?void 0:a.unstable_sxConfig},f.unstable_sx=function(g){return Fm({sx:g,theme:this})},f}function kot(n){return Object.keys(n).length===0}function Hot(n=null){const t=ot.useContext(WM);return!t||kot(t)?n:t}const Got=HD();function GD(n=Got){return Hot(n)}function qot({styles:n,themeId:t,defaultTheme:e={}}){const i=GD(e),r=typeof n=="function"?n(t&&i[t]||i):n;return Mt.jsx(Lot,{styles:r})}const ZU=n=>n,jot=()=>{let n=ZU;return{configure(t){n=t},generate(t){return n(t)},reset(){n=ZU}}},Jk=jot();function Xot(n={}){const{themeId:t,defaultTheme:e,defaultClassName:i="MuiBox-root",generateClassName:r}=n,s=Zk("div",{shouldForwardProp:l=>l!=="theme"&&l!=="sx"&&l!=="as"})(Fm);return ot.forwardRef(function(c,f){const m=GD(e),{className:g,component:y="div",...v}=zk(c);return Mt.jsx(s,{as:y,ref:f,className:dn(g,r?r(i):i),theme:t&&m[t]||m,...v})})}const Wot={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Ei(n,t,e="Mui"){const i=Wot[t];return i?`${e}-${i}`:`${Jk.generate(n)}-${t}`}function ri(n,t,e="Mui"){const i={};return t.forEach(r=>{i[r]=Ei(n,r,e)}),i}function t6(n){const{variants:t,...e}=n,i={variants:t,style:KU(e),isProcessed:!0};return i.style===e||t&&t.forEach(r=>{typeof r.style!="function"&&(r.style=KU(r.style))}),i}const Yot=HD();function LC(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}function $ot(n){return n?(t,e)=>e[n]:null}function Kot(n,t,e){n.theme=Jot(n.theme)?e:n.theme[t]||n.theme}function n1(n,t){const e=typeof t=="function"?t(n):t;if(Array.isArray(e))return e.flatMap(i=>n1(n,i));if(Array.isArray(e==null?void 0:e.variants)){let i;if(e.isProcessed)i=e.style;else{const{variants:r,...s}=e;i=s}return e6(n,e.variants,[i])}return e!=null&&e.isProcessed?e.style:e}function e6(n,t,e=[]){var r;let i;t:for(let s=0;s<t.length;s+=1){const a=t[s];if(typeof a.props=="function"){if(i??(i={...n,...n.ownerState,ownerState:n.ownerState}),!a.props(i))continue}else for(const l in a.props)if(n[l]!==a.props[l]&&((r=n.ownerState)==null?void 0:r[l])!==a.props[l])continue t;typeof a.style=="function"?(i??(i={...n,...n.ownerState,ownerState:n.ownerState}),e.push(a.style(i))):e.push(a.style)}return e}function Zot(n={}){const{themeId:t,defaultTheme:e=Yot,rootShouldForwardProp:i=LC,slotShouldForwardProp:r=LC}=n;function s(l){Kot(l,t,e)}return(l,c={})=>{Uot(l,N=>N.filter(B=>B!==Fm));const{name:f,slot:m,skipVariantsResolver:g,skipSx:y,overridesResolver:v=$ot(elt(m)),...S}=c,E=g!==void 0?g:m&&m!=="Root"&&m!=="root"||!1,T=y||!1;let x=LC;m==="Root"||m==="root"?x=i:m?x=r:tlt(l)&&(x=void 0);const R=Zk(l,{shouldForwardProp:x,label:Qot(),...S}),D=N=>{if(typeof N=="function"&&N.__emotion_real!==N)return function(L){return n1(L,N)};if(Hc(N)){const B=t6(N);return B.variants?function(U){return n1(U,B)}:B.style}return N},O=(...N)=>{const B=[],L=N.map(D),U=[];if(B.push(s),f&&v&&U.push(function(G){var Y,Z;const st=(Z=(Y=G.theme.components)==null?void 0:Y[f])==null?void 0:Z.styleOverrides;if(!st)return null;const it={};for(const at in st)it[at]=n1(G,st[at]);return v(G,it)}),f&&!E&&U.push(function(G){var it,Y;const k=G.theme,st=(Y=(it=k==null?void 0:k.components)==null?void 0:it[f])==null?void 0:Y.variants;return st?e6(G,st):null}),T||U.push(Fm),Array.isArray(L[0])){const V=L.shift(),G=new Array(B.length).fill(""),k=new Array(U.length).fill("");let st;st=[...G,...V,...k],st.raw=[...G,...V.raw,...k],B.unshift(st)}const I=[...B,...L,...U],w=R(...I);return l.muiName&&(w.muiName=l.muiName),w};return R.withConfig&&(O.withConfig=R.withConfig),O}}function Qot(n,t){return void 0}function Jot(n){for(const t in n)return!1;return!0}function tlt(n){return typeof n=="string"&&n.charCodeAt(0)>96}function elt(n){return n&&n.charAt(0).toLowerCase()+n.slice(1)}function OT(n,t){const e={...t};for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const r=i;if(r==="components"||r==="slots")e[r]={...n[r],...e[r]};else if(r==="componentsProps"||r==="slotProps"){const s=n[r],a=t[r];if(!a)e[r]=s||{};else if(!s)e[r]=a;else{e[r]={...a};for(const l in s)if(Object.prototype.hasOwnProperty.call(s,l)){const c=l;e[r][c]=OT(s[c],a[c])}}}else e[r]===void 0&&(e[r]=n[r])}return e}const Wd=typeof window<"u"?ot.useLayoutEffect:ot.useEffect;function nlt(n,t=Number.MIN_SAFE_INTEGER,e=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(n,e))}function qD(n,t=0,e=1){return nlt(n,t,e)}function ilt(n){n=n.slice(1);const t=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let e=n.match(t);return e&&e[0].length===1&&(e=e.map(i=>i+i)),e?`rgb${e.length===4?"a":""}(${e.map((i,r)=>r<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function Yd(n){if(n.type)return n;if(n.charAt(0)==="#")return Yd(ilt(n));const t=n.indexOf("("),e=n.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(e))throw new Error(xh(9,n));let i=n.substring(t+1,n.length-1),r;if(e==="color"){if(i=i.split(" "),r=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(xh(10,r))}else i=i.split(",");return i=i.map(s=>parseFloat(s)),{type:e,values:i,colorSpace:r}}const rlt=n=>{const t=Yd(n);return t.values.slice(0,3).map((e,i)=>t.type.includes("hsl")&&i!==0?`${e}%`:e).join(" ")},g0=(n,t)=>{try{return rlt(n)}catch{return n}};function YM(n){const{type:t,colorSpace:e}=n;let{values:i}=n;return t.includes("rgb")?i=i.map((r,s)=>s<3?parseInt(r,10):r):t.includes("hsl")&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),t.includes("color")?i=`${e} ${i.join(" ")}`:i=`${i.join(", ")}`,`${t}(${i})`}function n6(n){n=Yd(n);const{values:t}=n,e=t[0],i=t[1]/100,r=t[2]/100,s=i*Math.min(r,1-r),a=(f,m=(f+e/30)%12)=>r-s*Math.max(Math.min(m-3,9-m,1),-1);let l="rgb";const c=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return n.type==="hsla"&&(l+="a",c.push(t[3])),YM({type:l,values:c})}function d2(n){n=Yd(n);let t=n.type==="hsl"||n.type==="hsla"?Yd(n6(n)).values:n.values;return t=t.map(e=>(n.type!=="color"&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function slt(n,t){const e=d2(n),i=d2(t);return(Math.max(e,i)+.05)/(Math.min(e,i)+.05)}function $a(n,t){return n=Yd(n),t=qD(t),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${t}`:n.values[3]=t,YM(n)}function NE(n,t,e){try{return $a(n,t)}catch{return n}}function jD(n,t){if(n=Yd(n),t=qD(t),n.type.includes("hsl"))n.values[2]*=1-t;else if(n.type.includes("rgb")||n.type.includes("color"))for(let e=0;e<3;e+=1)n.values[e]*=1-t;return YM(n)}function Ui(n,t,e){try{return jD(n,t)}catch{return n}}function XD(n,t){if(n=Yd(n),t=qD(t),n.type.includes("hsl"))n.values[2]+=(100-n.values[2])*t;else if(n.type.includes("rgb"))for(let e=0;e<3;e+=1)n.values[e]+=(255-n.values[e])*t;else if(n.type.includes("color"))for(let e=0;e<3;e+=1)n.values[e]+=(1-n.values[e])*t;return YM(n)}function zi(n,t,e){try{return XD(n,t)}catch{return n}}function alt(n,t=.15){return d2(n)>.5?jD(n,t):XD(n,t)}function IE(n,t,e){try{return alt(n,t)}catch{return n}}function p2(...n){return n.reduce((t,e)=>e==null?t:function(...r){t.apply(this,r),e.apply(this,r)},()=>{})}function i6(n,t=166){let e;function i(...r){const s=()=>{n.apply(this,r)};clearTimeout(e),e=setTimeout(s,t)}return i.clear=()=>{clearTimeout(e)},i}function UC(n,t){var e,i,r;return ot.isValidElement(n)&&t.indexOf(n.type.muiName??((r=(i=(e=n.type)==null?void 0:e._payload)==null?void 0:i.value)==null?void 0:r.muiName))!==-1}function Vu(n){return n&&n.ownerDocument||document}function Sh(n){return Vu(n).defaultView||window}function m2(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function DT({controlled:n,default:t,name:e,state:i="value"}){const{current:r}=ot.useRef(n!==void 0),[s,a]=ot.useState(t),l=r?n:s,c=ot.useCallback(f=>{r||a(f)},[]);return[l,c]}function Rm(n){const t=ot.useRef(n);return Wd(()=>{t.current=n}),ot.useRef((...e)=>(0,t.current)(...e)).current}function Ca(...n){return ot.useMemo(()=>n.every(t=>t==null)?null:t=>{n.forEach(e=>{m2(e,t)})},n)}const QU={};function r6(n,t){const e=ot.useRef(QU);return e.current===QU&&(e.current=n(t)),e}const olt=[];function llt(n){ot.useEffect(n,olt)}class WD{constructor(){Mv(this,"currentId",null);Mv(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});Mv(this,"disposeEffect",()=>this.clear)}static create(){return new WD}start(t,e){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,e()},t)}}function s6(){const n=r6(WD.create).current;return llt(n.disposeEffect),n}function JU(n){try{return n.matches(":focus-visible")}catch{}return!1}function a6(n=window){const t=n.document.documentElement.clientWidth;return n.innerWidth-t}function ult(n){return typeof n=="string"}function o6(n,t,e){return n===void 0||ult(n)?t:{...t,ownerState:{...t.ownerState,...e}}}function l6(n,t=[]){if(n===void 0)return{};const e={};return Object.keys(n).filter(i=>i.match(/^on[A-Z]/)&&typeof n[i]=="function"&&!t.includes(i)).forEach(i=>{e[i]=n[i]}),e}function tz(n){if(n===void 0)return{};const t={};return Object.keys(n).filter(e=>!(e.match(/^on[A-Z]/)&&typeof n[e]=="function")).forEach(e=>{t[e]=n[e]}),t}function u6(n){const{getSlotProps:t,additionalProps:e,externalSlotProps:i,externalForwardedProps:r,className:s}=n;if(!t){const v=dn(e==null?void 0:e.className,s,r==null?void 0:r.className,i==null?void 0:i.className),S={...e==null?void 0:e.style,...r==null?void 0:r.style,...i==null?void 0:i.style},E={...e,...r,...i};return v.length>0&&(E.className=v),Object.keys(S).length>0&&(E.style=S),{props:E,internalRef:void 0}}const a=l6({...r,...i}),l=tz(i),c=tz(r),f=t(a),m=dn(f==null?void 0:f.className,e==null?void 0:e.className,s,r==null?void 0:r.className,i==null?void 0:i.className),g={...f==null?void 0:f.style,...e==null?void 0:e.style,...r==null?void 0:r.style,...i==null?void 0:i.style},y={...f,...e,...c,...l};return m.length>0&&(y.className=m),Object.keys(g).length>0&&(y.style=g),{props:y,internalRef:f.ref}}function c6(n,t,e){return typeof n=="function"?n(t,e):n}function clt(n){var g;const{elementType:t,externalSlotProps:e,ownerState:i,skipResolvingSlotProps:r=!1,...s}=n,a=r?{}:c6(e,i),{props:l,internalRef:c}=u6({...s,externalSlotProps:a}),f=Ca(c,a==null?void 0:a.ref,(g=n.additionalProps)==null?void 0:g.ref);return o6(t,{...l,ref:f},i)}function ib(n){var t;return parseInt(ot.version,10)>=19?((t=n==null?void 0:n.props)==null?void 0:t.ref)||null:(n==null?void 0:n.ref)||null}const flt=ot.createContext(),hlt=()=>ot.useContext(flt)??!1,dlt=ot.createContext(void 0);function plt(n){const{theme:t,name:e,props:i}=n;if(!t||!t.components||!t.components[e])return i;const r=t.components[e];return r.defaultProps?OT(r.defaultProps,i):!r.styleOverrides&&!r.variants?OT(r,i):i}function mlt({props:n,name:t}){const e=ot.useContext(dlt);return plt({props:n,name:t,theme:{components:e}})}const ez={theme:void 0};function glt(n){let t,e;return function(r){let s=t;return(s===void 0||r.theme!==e)&&(ez.theme=r.theme,s=t6(n(ez)),t=s,e=r.theme),s}}function ylt(n=""){function t(...i){if(!i.length)return"";const r=i[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${n?`${n}-`:""}${r}${t(...i.slice(1))})`:`, ${r}`}return(i,...r)=>`var(--${n?`${n}-`:""}${i}${t(...r)})`}const nz=(n,t,e,i=[])=>{let r=n;t.forEach((s,a)=>{a===t.length-1?Array.isArray(r)?r[Number(s)]=e:r&&typeof r=="object"&&(r[s]=e):r&&typeof r=="object"&&(r[s]||(r[s]=i.includes(s)?[]:{}),r=r[s])})},_lt=(n,t,e)=>{function i(r,s=[],a=[]){Object.entries(r).forEach(([l,c])=>{(!e||e&&!e([...s,l]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?i(c,[...s,l],Array.isArray(c)?[...a,l]:a):t([...s,l],c,a))})}i(n)},vlt=(n,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(i=>n.includes(i))||n[n.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function zC(n,t){const{prefix:e,shouldSkipGeneratingVar:i}=t||{},r={},s={},a={};return _lt(n,(l,c,f)=>{if((typeof c=="string"||typeof c=="number")&&(!i||!i(l,c))){const m=`--${e?`${e}-`:""}${l.join("-")}`,g=vlt(l,c);Object.assign(r,{[m]:g}),nz(s,l,`var(${m})`,f),nz(a,l,`var(${m}, ${g})`,f)}},l=>l[0]==="vars"),{css:r,vars:s,varsWithDefaults:a}}function xlt(n,t={}){const{getSelector:e=T,disableCssColorScheme:i,colorSchemeSelector:r}=t,{colorSchemes:s={},components:a,defaultColorScheme:l="light",...c}=n,{vars:f,css:m,varsWithDefaults:g}=zC(c,t);let y=g;const v={},{[l]:S,...E}=s;if(Object.entries(E||{}).forEach(([D,O])=>{const{vars:N,css:B,varsWithDefaults:L}=zC(O,t);y=wa(y,L),v[D]={css:B,vars:N}}),S){const{css:D,vars:O,varsWithDefaults:N}=zC(S,t);y=wa(y,N),v[l]={css:D,vars:O}}function T(D,O){var B,L;let N=r;if(r==="class"&&(N=".%s"),r==="data"&&(N="[data-%s]"),r!=null&&r.startsWith("data-")&&!r.includes("%s")&&(N=`[${r}="%s"]`),D){if(N==="media")return n.defaultColorScheme===D?":root":{[`@media (prefers-color-scheme: ${((L=(B=s[D])==null?void 0:B.palette)==null?void 0:L.mode)||D})`]:{":root":O}};if(N)return n.defaultColorScheme===D?`:root, ${N.replace("%s",String(D))}`:N.replace("%s",String(D))}return":root"}return{vars:y,generateThemeVars:()=>{let D={...f};return Object.entries(v).forEach(([,{vars:O}])=>{D=wa(D,O)}),D},generateStyleSheets:()=>{var U,I;const D=[],O=n.defaultColorScheme||"light";function N(w,V){Object.keys(V).length&&D.push(typeof w=="string"?{[w]:{...V}}:w)}N(e(void 0,{...m}),m);const{[O]:B,...L}=v;if(B){const{css:w}=B,V=(I=(U=s[O])==null?void 0:U.palette)==null?void 0:I.mode,G=!i&&V?{colorScheme:V,...w}:{...w};N(e(O,{...G}),G)}return Object.entries(L).forEach(([w,{css:V}])=>{var st,it;const G=(it=(st=s[w])==null?void 0:st.palette)==null?void 0:it.mode,k=!i&&G?{colorScheme:G,...V}:{...V};N(e(w,{...k}),k)}),D}}}function blt(n){return function(e){return n==="media"?`@media (prefers-color-scheme: ${e})`:n?n.startsWith("data-")&&!n.includes("%s")?`[${n}="${e}"] &`:n==="class"?`.${e} &`:n==="data"?`[data-${e}] &`:`${n.replace("%s",e)} &`:"&"}}const Ox={black:"#000",white:"#fff"},Slt={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},my={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},gy={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},e0={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},yy={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},_y={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},vy={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function f6(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Ox.white,default:Ox.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Elt=f6();function h6(){return{text:{primary:Ox.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Ox.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const iz=h6();function rz(n,t,e,i){const r=i.light||i,s=i.dark||i*1.5;n[t]||(n.hasOwnProperty(e)?n[t]=n[e]:t==="light"?n.light=XD(n.main,r):t==="dark"&&(n.dark=jD(n.main,s)))}function Tlt(n="light"){return n==="dark"?{main:yy[200],light:yy[50],dark:yy[400]}:{main:yy[700],light:yy[400],dark:yy[800]}}function Mlt(n="light"){return n==="dark"?{main:my[200],light:my[50],dark:my[400]}:{main:my[500],light:my[300],dark:my[700]}}function Alt(n="light"){return n==="dark"?{main:gy[500],light:gy[300],dark:gy[700]}:{main:gy[700],light:gy[400],dark:gy[800]}}function wlt(n="light"){return n==="dark"?{main:_y[400],light:_y[300],dark:_y[700]}:{main:_y[700],light:_y[500],dark:_y[900]}}function Clt(n="light"){return n==="dark"?{main:vy[400],light:vy[300],dark:vy[700]}:{main:vy[800],light:vy[500],dark:vy[900]}}function Rlt(n="light"){return n==="dark"?{main:e0[400],light:e0[300],dark:e0[700]}:{main:"#ed6c02",light:e0[500],dark:e0[900]}}function YD(n){const{mode:t="light",contrastThreshold:e=3,tonalOffset:i=.2,...r}=n,s=n.primary||Tlt(t),a=n.secondary||Mlt(t),l=n.error||Alt(t),c=n.info||wlt(t),f=n.success||Clt(t),m=n.warning||Rlt(t);function g(E){return slt(E,iz.text.primary)>=e?iz.text.primary:Elt.text.primary}const y=({color:E,name:T,mainShade:x=500,lightShade:R=300,darkShade:D=700})=>{if(E={...E},!E.main&&E[x]&&(E.main=E[x]),!E.hasOwnProperty("main"))throw new Error(xh(11,T?` (${T})`:"",x));if(typeof E.main!="string")throw new Error(xh(12,T?` (${T})`:"",JSON.stringify(E.main)));return rz(E,"light",R,i),rz(E,"dark",D,i),E.contrastText||(E.contrastText=g(E.main)),E};let v;return t==="light"?v=f6():t==="dark"&&(v=h6()),wa({common:{...Ox},mode:t,primary:y({color:s,name:"primary"}),secondary:y({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:y({color:l,name:"error"}),warning:y({color:m,name:"warning"}),info:y({color:c,name:"info"}),success:y({color:f,name:"success"}),grey:Slt,contrastThreshold:e,getContrastText:g,augmentColor:y,tonalOffset:i,...v},r)}function Olt(n){const t={};return Object.entries(n).forEach(i=>{const[r,s]=i;typeof s=="object"&&(t[r]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),t}function Dlt(n,t){return{toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}},...t}}function Nlt(n){return Math.round(n*1e5)/1e5}const sz={textTransform:"uppercase"},az='"Roboto", "Helvetica", "Arial", sans-serif';function Ilt(n,t){const{fontFamily:e=az,fontSize:i=14,fontWeightLight:r=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:f,pxToRem:m,...g}=typeof t=="function"?t(n):t,y=i/14,v=m||(T=>`${T/c*y}rem`),S=(T,x,R,D,O)=>({fontFamily:e,fontWeight:T,fontSize:v(x),lineHeight:R,...e===az?{letterSpacing:`${Nlt(D/x)}em`}:{},...O,...f}),E={h1:S(r,96,1.167,-1.5),h2:S(r,60,1.2,-.5),h3:S(s,48,1.167,0),h4:S(s,34,1.235,.25),h5:S(s,24,1.334,0),h6:S(a,20,1.6,.15),subtitle1:S(s,16,1.75,.15),subtitle2:S(a,14,1.57,.1),body1:S(s,16,1.5,.15),body2:S(s,14,1.43,.15),button:S(a,14,1.75,.4,sz),caption:S(s,12,1.66,.4),overline:S(s,12,2.66,1,sz),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return wa({htmlFontSize:c,pxToRem:v,fontFamily:e,fontSize:i,fontWeightLight:r,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:l,...E},g,{clone:!1})}const Plt=.2,Llt=.14,Ult=.12;function rr(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${Plt})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${Llt})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${Ult})`].join(",")}const zlt=["none",rr(0,2,1,-1,0,1,1,0,0,1,3,0),rr(0,3,1,-2,0,2,2,0,0,1,5,0),rr(0,3,3,-2,0,3,4,0,0,1,8,0),rr(0,2,4,-1,0,4,5,0,0,1,10,0),rr(0,3,5,-1,0,5,8,0,0,1,14,0),rr(0,3,5,-1,0,6,10,0,0,1,18,0),rr(0,4,5,-2,0,7,10,1,0,2,16,1),rr(0,5,5,-3,0,8,10,1,0,3,14,2),rr(0,5,6,-3,0,9,12,1,0,3,16,2),rr(0,6,6,-3,0,10,14,1,0,4,18,3),rr(0,6,7,-4,0,11,15,1,0,4,20,3),rr(0,7,8,-4,0,12,17,2,0,5,22,4),rr(0,7,8,-4,0,13,19,2,0,5,24,4),rr(0,7,9,-4,0,14,21,2,0,5,26,4),rr(0,8,9,-5,0,15,22,2,0,6,28,5),rr(0,8,10,-5,0,16,24,2,0,6,30,5),rr(0,8,11,-5,0,17,26,2,0,6,32,5),rr(0,9,11,-5,0,18,28,2,0,7,34,6),rr(0,9,12,-6,0,19,29,2,0,7,36,6),rr(0,10,13,-6,0,20,31,3,0,8,38,7),rr(0,10,13,-6,0,21,33,3,0,8,40,7),rr(0,10,14,-6,0,22,35,3,0,8,42,7),rr(0,11,14,-7,0,23,36,3,0,9,44,8),rr(0,11,15,-7,0,24,38,3,0,9,46,8)],Blt={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Vlt={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function oz(n){return`${Math.round(n)}ms`}function Flt(n){if(!n)return 0;const t=n/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function klt(n){const t={...Blt,...n.easing},e={...Vlt,...n.duration};return{getAutoHeightDuration:Flt,create:(r=["all"],s={})=>{const{duration:a=e.standard,easing:l=t.easeInOut,delay:c=0,...f}=s;return(Array.isArray(r)?r:[r]).map(m=>`${m} ${typeof a=="string"?a:oz(a)} ${l} ${typeof c=="string"?c:oz(c)}`).join(",")},...n,easing:t,duration:e}}const Hlt={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Glt(n){return Hc(n)||typeof n>"u"||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||Array.isArray(n)}function d6(n={}){const t={...n};function e(i){const r=Object.entries(i);for(let s=0;s<r.length;s++){const[a,l]=r[s];!Glt(l)||a.startsWith("unstable_")?delete i[a]:Hc(l)&&(i[a]={...l},e(i[a]))}}return e(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function g2(n={},...t){const{breakpoints:e,mixins:i={},spacing:r,palette:s={},transitions:a={},typography:l={},shape:c,...f}=n;if(n.vars&&n.generateThemeVars===void 0)throw new Error(xh(20));const m=YD(s),g=HD(n);let y=wa(g,{mixins:Dlt(g.breakpoints,i),palette:m,shadows:zlt.slice(),typography:Ilt(m,l),transitions:klt(a),zIndex:{...Hlt}});return y=wa(y,f),y=t.reduce((v,S)=>wa(v,S),y),y.unstable_sxConfig={...Jx,...f==null?void 0:f.unstable_sxConfig},y.unstable_sx=function(S){return Fm({sx:S,theme:this})},y.toRuntimeSource=d6,y}function y2(n){let t;return n<1?t=5.11916*n**2:t=4.5*Math.log(n+1)+2,Math.round(t*10)/1e3}const qlt=[...Array(25)].map((n,t)=>{if(t===0)return"none";const e=y2(t);return`linear-gradient(rgba(255 255 255 / ${e}), rgba(255 255 255 / ${e}))`});function p6(n){return{inputPlaceholder:n==="dark"?.5:.42,inputUnderline:n==="dark"?.7:.42,switchTrackDisabled:n==="dark"?.2:.12,switchTrack:n==="dark"?.3:.38}}function m6(n){return n==="dark"?qlt:[]}function jlt(n){const{palette:t={mode:"light"},opacity:e,overlays:i,...r}=n,s=YD(t);return{palette:s,opacity:{...p6(s.mode),...e},overlays:i||m6(s.mode),...r}}function Xlt(n){var t;return!!n[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!n[0].match(/sxConfig$/)||n[0]==="palette"&&!!((t=n[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const Wlt=n=>[...[...Array(25)].map((t,e)=>`--${n?`${n}-`:""}overlays-${e}`),`--${n?`${n}-`:""}palette-AppBar-darkBg`,`--${n?`${n}-`:""}palette-AppBar-darkColor`],Ylt=n=>(t,e)=>{const i=n.rootSelector||":root",r=n.colorSchemeSelector;let s=r;if(r==="class"&&(s=".%s"),r==="data"&&(s="[data-%s]"),r!=null&&r.startsWith("data-")&&!r.includes("%s")&&(s=`[${r}="%s"]`),n.defaultColorScheme===t){if(t==="dark"){const a={};return Wlt(n.cssVarPrefix).forEach(l=>{a[l]=e[l],delete e[l]}),s==="media"?{[i]:e,"@media (prefers-color-scheme: dark)":{[i]:a}}:s?{[s.replace("%s",t)]:a,[`${i}, ${s.replace("%s",t)}`]:e}:{[i]:{...e,...a}}}if(s&&s!=="media")return`${i}, ${s.replace("%s",String(t))}`}else if(t){if(s==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[i]:e}};if(s)return s.replace("%s",String(t))}return i};function $lt(n,t){t.forEach(e=>{n[e]||(n[e]={})})}function Zt(n,t,e){!n[t]&&e&&(n[t]=e)}function y0(n){return typeof n!="string"||!n.startsWith("hsl")?n:n6(n)}function Zf(n,t){`${t}Channel`in n||(n[`${t}Channel`]=g0(y0(n[t])))}function Klt(n){return typeof n=="number"?`${n}px`:typeof n=="string"||typeof n=="function"||Array.isArray(n)?n:"8px"}const Ic=n=>{try{return n()}catch{}},Zlt=(n="mui")=>ylt(n);function BC(n,t,e,i){if(!t)return;t=t===!0?{}:t;const r=i==="dark"?"dark":"light";if(!e){n[i]=jlt({...t,palette:{mode:r,...t==null?void 0:t.palette}});return}const{palette:s,...a}=g2({...e,palette:{mode:r,...t==null?void 0:t.palette}});return n[i]={...t,palette:s,opacity:{...p6(r),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||m6(r)},a}function Qlt(n={},...t){const{colorSchemes:e={light:!0},defaultColorScheme:i,disableCssColorScheme:r=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:a=Xlt,colorSchemeSelector:l=e.light&&e.dark?"media":void 0,rootSelector:c=":root",...f}=n,m=Object.keys(e)[0],g=i||(e.light&&m!=="light"?"light":m),y=Zlt(s),{[g]:v,light:S,dark:E,...T}=e,x={...T};let R=v;if((g==="dark"&&!("dark"in e)||g==="light"&&!("light"in e))&&(R=!0),!R)throw new Error(xh(21,g));const D=BC(x,R,f,g);S&&!x.light&&BC(x,S,void 0,"light"),E&&!x.dark&&BC(x,E,void 0,"dark");let O={defaultColorScheme:g,...D,cssVarPrefix:s,colorSchemeSelector:l,rootSelector:c,getCssVar:y,colorSchemes:x,font:{...Olt(D.typography),...D.font},spacing:Klt(f.spacing)};Object.keys(O.colorSchemes).forEach(I=>{const w=O.colorSchemes[I].palette,V=G=>{const k=G.split("-"),st=k[1],it=k[2];return y(G,w[st][it])};if(w.mode==="light"&&(Zt(w.common,"background","#fff"),Zt(w.common,"onBackground","#000")),w.mode==="dark"&&(Zt(w.common,"background","#000"),Zt(w.common,"onBackground","#fff")),$lt(w,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),w.mode==="light"){Zt(w.Alert,"errorColor",Ui(w.error.light,.6)),Zt(w.Alert,"infoColor",Ui(w.info.light,.6)),Zt(w.Alert,"successColor",Ui(w.success.light,.6)),Zt(w.Alert,"warningColor",Ui(w.warning.light,.6)),Zt(w.Alert,"errorFilledBg",V("palette-error-main")),Zt(w.Alert,"infoFilledBg",V("palette-info-main")),Zt(w.Alert,"successFilledBg",V("palette-success-main")),Zt(w.Alert,"warningFilledBg",V("palette-warning-main")),Zt(w.Alert,"errorFilledColor",Ic(()=>w.getContrastText(w.error.main))),Zt(w.Alert,"infoFilledColor",Ic(()=>w.getContrastText(w.info.main))),Zt(w.Alert,"successFilledColor",Ic(()=>w.getContrastText(w.success.main))),Zt(w.Alert,"warningFilledColor",Ic(()=>w.getContrastText(w.warning.main))),Zt(w.Alert,"errorStandardBg",zi(w.error.light,.9)),Zt(w.Alert,"infoStandardBg",zi(w.info.light,.9)),Zt(w.Alert,"successStandardBg",zi(w.success.light,.9)),Zt(w.Alert,"warningStandardBg",zi(w.warning.light,.9)),Zt(w.Alert,"errorIconColor",V("palette-error-main")),Zt(w.Alert,"infoIconColor",V("palette-info-main")),Zt(w.Alert,"successIconColor",V("palette-success-main")),Zt(w.Alert,"warningIconColor",V("palette-warning-main")),Zt(w.AppBar,"defaultBg",V("palette-grey-100")),Zt(w.Avatar,"defaultBg",V("palette-grey-400")),Zt(w.Button,"inheritContainedBg",V("palette-grey-300")),Zt(w.Button,"inheritContainedHoverBg",V("palette-grey-A100")),Zt(w.Chip,"defaultBorder",V("palette-grey-400")),Zt(w.Chip,"defaultAvatarColor",V("palette-grey-700")),Zt(w.Chip,"defaultIconColor",V("palette-grey-700")),Zt(w.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Zt(w.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Zt(w.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Zt(w.LinearProgress,"primaryBg",zi(w.primary.main,.62)),Zt(w.LinearProgress,"secondaryBg",zi(w.secondary.main,.62)),Zt(w.LinearProgress,"errorBg",zi(w.error.main,.62)),Zt(w.LinearProgress,"infoBg",zi(w.info.main,.62)),Zt(w.LinearProgress,"successBg",zi(w.success.main,.62)),Zt(w.LinearProgress,"warningBg",zi(w.warning.main,.62)),Zt(w.Skeleton,"bg",`rgba(${V("palette-text-primaryChannel")} / 0.11)`),Zt(w.Slider,"primaryTrack",zi(w.primary.main,.62)),Zt(w.Slider,"secondaryTrack",zi(w.secondary.main,.62)),Zt(w.Slider,"errorTrack",zi(w.error.main,.62)),Zt(w.Slider,"infoTrack",zi(w.info.main,.62)),Zt(w.Slider,"successTrack",zi(w.success.main,.62)),Zt(w.Slider,"warningTrack",zi(w.warning.main,.62));const G=IE(w.background.default,.8);Zt(w.SnackbarContent,"bg",G),Zt(w.SnackbarContent,"color",Ic(()=>w.getContrastText(G))),Zt(w.SpeedDialAction,"fabHoverBg",IE(w.background.paper,.15)),Zt(w.StepConnector,"border",V("palette-grey-400")),Zt(w.StepContent,"border",V("palette-grey-400")),Zt(w.Switch,"defaultColor",V("palette-common-white")),Zt(w.Switch,"defaultDisabledColor",V("palette-grey-100")),Zt(w.Switch,"primaryDisabledColor",zi(w.primary.main,.62)),Zt(w.Switch,"secondaryDisabledColor",zi(w.secondary.main,.62)),Zt(w.Switch,"errorDisabledColor",zi(w.error.main,.62)),Zt(w.Switch,"infoDisabledColor",zi(w.info.main,.62)),Zt(w.Switch,"successDisabledColor",zi(w.success.main,.62)),Zt(w.Switch,"warningDisabledColor",zi(w.warning.main,.62)),Zt(w.TableCell,"border",zi(NE(w.divider,1),.88)),Zt(w.Tooltip,"bg",NE(w.grey[700],.92))}if(w.mode==="dark"){Zt(w.Alert,"errorColor",zi(w.error.light,.6)),Zt(w.Alert,"infoColor",zi(w.info.light,.6)),Zt(w.Alert,"successColor",zi(w.success.light,.6)),Zt(w.Alert,"warningColor",zi(w.warning.light,.6)),Zt(w.Alert,"errorFilledBg",V("palette-error-dark")),Zt(w.Alert,"infoFilledBg",V("palette-info-dark")),Zt(w.Alert,"successFilledBg",V("palette-success-dark")),Zt(w.Alert,"warningFilledBg",V("palette-warning-dark")),Zt(w.Alert,"errorFilledColor",Ic(()=>w.getContrastText(w.error.dark))),Zt(w.Alert,"infoFilledColor",Ic(()=>w.getContrastText(w.info.dark))),Zt(w.Alert,"successFilledColor",Ic(()=>w.getContrastText(w.success.dark))),Zt(w.Alert,"warningFilledColor",Ic(()=>w.getContrastText(w.warning.dark))),Zt(w.Alert,"errorStandardBg",Ui(w.error.light,.9)),Zt(w.Alert,"infoStandardBg",Ui(w.info.light,.9)),Zt(w.Alert,"successStandardBg",Ui(w.success.light,.9)),Zt(w.Alert,"warningStandardBg",Ui(w.warning.light,.9)),Zt(w.Alert,"errorIconColor",V("palette-error-main")),Zt(w.Alert,"infoIconColor",V("palette-info-main")),Zt(w.Alert,"successIconColor",V("palette-success-main")),Zt(w.Alert,"warningIconColor",V("palette-warning-main")),Zt(w.AppBar,"defaultBg",V("palette-grey-900")),Zt(w.AppBar,"darkBg",V("palette-background-paper")),Zt(w.AppBar,"darkColor",V("palette-text-primary")),Zt(w.Avatar,"defaultBg",V("palette-grey-600")),Zt(w.Button,"inheritContainedBg",V("palette-grey-800")),Zt(w.Button,"inheritContainedHoverBg",V("palette-grey-700")),Zt(w.Chip,"defaultBorder",V("palette-grey-700")),Zt(w.Chip,"defaultAvatarColor",V("palette-grey-300")),Zt(w.Chip,"defaultIconColor",V("palette-grey-300")),Zt(w.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Zt(w.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Zt(w.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Zt(w.LinearProgress,"primaryBg",Ui(w.primary.main,.5)),Zt(w.LinearProgress,"secondaryBg",Ui(w.secondary.main,.5)),Zt(w.LinearProgress,"errorBg",Ui(w.error.main,.5)),Zt(w.LinearProgress,"infoBg",Ui(w.info.main,.5)),Zt(w.LinearProgress,"successBg",Ui(w.success.main,.5)),Zt(w.LinearProgress,"warningBg",Ui(w.warning.main,.5)),Zt(w.Skeleton,"bg",`rgba(${V("palette-text-primaryChannel")} / 0.13)`),Zt(w.Slider,"primaryTrack",Ui(w.primary.main,.5)),Zt(w.Slider,"secondaryTrack",Ui(w.secondary.main,.5)),Zt(w.Slider,"errorTrack",Ui(w.error.main,.5)),Zt(w.Slider,"infoTrack",Ui(w.info.main,.5)),Zt(w.Slider,"successTrack",Ui(w.success.main,.5)),Zt(w.Slider,"warningTrack",Ui(w.warning.main,.5));const G=IE(w.background.default,.98);Zt(w.SnackbarContent,"bg",G),Zt(w.SnackbarContent,"color",Ic(()=>w.getContrastText(G))),Zt(w.SpeedDialAction,"fabHoverBg",IE(w.background.paper,.15)),Zt(w.StepConnector,"border",V("palette-grey-600")),Zt(w.StepContent,"border",V("palette-grey-600")),Zt(w.Switch,"defaultColor",V("palette-grey-300")),Zt(w.Switch,"defaultDisabledColor",V("palette-grey-600")),Zt(w.Switch,"primaryDisabledColor",Ui(w.primary.main,.55)),Zt(w.Switch,"secondaryDisabledColor",Ui(w.secondary.main,.55)),Zt(w.Switch,"errorDisabledColor",Ui(w.error.main,.55)),Zt(w.Switch,"infoDisabledColor",Ui(w.info.main,.55)),Zt(w.Switch,"successDisabledColor",Ui(w.success.main,.55)),Zt(w.Switch,"warningDisabledColor",Ui(w.warning.main,.55)),Zt(w.TableCell,"border",Ui(NE(w.divider,1),.68)),Zt(w.Tooltip,"bg",NE(w.grey[700],.92))}Zf(w.background,"default"),Zf(w.background,"paper"),Zf(w.common,"background"),Zf(w.common,"onBackground"),Zf(w,"divider"),Object.keys(w).forEach(G=>{const k=w[G];G!=="tonalOffset"&&k&&typeof k=="object"&&(k.main&&Zt(w[G],"mainChannel",g0(y0(k.main))),k.light&&Zt(w[G],"lightChannel",g0(y0(k.light))),k.dark&&Zt(w[G],"darkChannel",g0(y0(k.dark))),k.contrastText&&Zt(w[G],"contrastTextChannel",g0(y0(k.contrastText))),G==="text"&&(Zf(w[G],"primary"),Zf(w[G],"secondary")),G==="action"&&(k.active&&Zf(w[G],"active"),k.selected&&Zf(w[G],"selected")))})}),O=t.reduce((I,w)=>wa(I,w),O);const N={prefix:s,disableCssColorScheme:r,shouldSkipGeneratingVar:a,getSelector:Ylt(O)},{vars:B,generateThemeVars:L,generateStyleSheets:U}=xlt(O,N);return O.vars=B,Object.entries(O.colorSchemes[O.defaultColorScheme]).forEach(([I,w])=>{O[I]=w}),O.generateThemeVars=L,O.generateStyleSheets=U,O.generateSpacing=function(){return Qk(f.spacing,ND(this))},O.getColorSchemeSelector=blt(l),O.spacing=O.generateSpacing(),O.shouldSkipGeneratingVar=a,O.unstable_sxConfig={...Jx,...f==null?void 0:f.unstable_sxConfig},O.unstable_sx=function(w){return Fm({sx:w,theme:this})},O.toRuntimeSource=d6,O}function lz(n,t,e){n.colorSchemes&&e&&(n.colorSchemes[t]={...e!==!0&&e,palette:YD({...e===!0?{}:e.palette,mode:t})})}function g6(n={},...t){const{palette:e,cssVariables:i=!1,colorSchemes:r=e?void 0:{light:!0},defaultColorScheme:s=e==null?void 0:e.mode,...a}=n,l=s||"light",c=r==null?void 0:r[l],f={...r,...e?{[l]:{...typeof c!="boolean"&&c,palette:e}}:void 0};if(i===!1){if(!("colorSchemes"in n))return g2(n,...t);let m=e;"palette"in n||f[l]&&(f[l]!==!0?m=f[l].palette:l==="dark"&&(m={mode:"dark"}));const g=g2({...n,palette:m},...t);return g.defaultColorScheme=l,g.colorSchemes=f,g.palette.mode==="light"&&(g.colorSchemes.light={...f.light!==!0&&f.light,palette:g.palette},lz(g,"dark",f.dark)),g.palette.mode==="dark"&&(g.colorSchemes.dark={...f.dark!==!0&&f.dark,palette:g.palette},lz(g,"light",f.light)),g}return!e&&!("light"in f)&&l==="light"&&(f.light=!0),Qlt({...a,colorSchemes:f,defaultColorScheme:l,...typeof i!="boolean"&&i},...t)}const $D=g6(),$M="$$material";function KD(){const n=GD($D);return n[$M]||n}function Jlt(n){return Mt.jsx(qot,{...n,defaultTheme:$D,themeId:$M})}function y6(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const Ja=n=>y6(n)&&n!=="classes",Le=Zot({themeId:$M,defaultTheme:$D,rootShouldForwardProp:Ja});function tut(n){return function(e){return Mt.jsx(Jlt,{styles:typeof n=="function"?i=>n({theme:i,...e}):n})}}function eut(){return zk}function ki(n){return mlt(n)}function PE(n){return parseInt(n,10)||0}const nut={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function iut(n){for(const t in n)return!1;return!0}function uz(n){return iut(n)||n.outerHeightStyle===0&&!n.overflowing}const rut=ot.forwardRef(function(t,e){const{onChange:i,maxRows:r,minRows:s=1,style:a,value:l,...c}=t,{current:f}=ot.useRef(l!=null),m=ot.useRef(null),g=Ca(e,m),y=ot.useRef(null),v=ot.useRef(null),S=ot.useCallback(()=>{const D=m.current,O=v.current;if(!D||!O)return;const B=Sh(D).getComputedStyle(D);if(B.width==="0px")return{outerHeightStyle:0,overflowing:!1};O.style.width=B.width,O.value=D.value||t.placeholder||"x",O.value.slice(-1)===`
`&&(O.value+=" ");const L=B.boxSizing,U=PE(B.paddingBottom)+PE(B.paddingTop),I=PE(B.borderBottomWidth)+PE(B.borderTopWidth),w=O.scrollHeight;O.value="x";const V=O.scrollHeight;let G=w;s&&(G=Math.max(Number(s)*V,G)),r&&(G=Math.min(Number(r)*V,G)),G=Math.max(G,V);const k=G+(L==="border-box"?U+I:0),st=Math.abs(G-w)<=1;return{outerHeightStyle:k,overflowing:st}},[r,s,t.placeholder]),E=Rm(()=>{const D=m.current,O=S();if(!D||!O||uz(O))return!1;const N=O.outerHeightStyle;return y.current!=null&&y.current!==N}),T=ot.useCallback(()=>{const D=m.current,O=S();if(!D||!O||uz(O))return;const N=O.outerHeightStyle;y.current!==N&&(y.current=N,D.style.height=`${N}px`),D.style.overflow=O.overflowing?"hidden":""},[S]),x=ot.useRef(-1);Wd(()=>{const D=i6(T),O=m==null?void 0:m.current;if(!O)return;const N=Sh(O);N.addEventListener("resize",D);let B;return typeof ResizeObserver<"u"&&(B=new ResizeObserver(()=>{E()&&(B.unobserve(O),cancelAnimationFrame(x.current),T(),x.current=requestAnimationFrame(()=>{B.observe(O)}))}),B.observe(O)),()=>{D.clear(),cancelAnimationFrame(x.current),N.removeEventListener("resize",D),B&&B.disconnect()}},[S,T,E]),Wd(()=>{T()});const R=D=>{f||T(),i&&i(D)};return Mt.jsxs(ot.Fragment,{children:[Mt.jsx("textarea",{value:l,onChange:R,ref:g,rows:s,style:a,...c}),Mt.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:v,tabIndex:-1,style:{...nut.shadow,...a,paddingTop:0,paddingBottom:0}})]})});function _2(n){return typeof n=="string"}function tp({props:n,states:t,muiFormControl:e}){return t.reduce((i,r)=>(i[r]=n[r],e&&typeof n[r]>"u"&&(i[r]=e[r]),i),{})}const ZD=ot.createContext(void 0);function of(){return ot.useContext(ZD)}const Hi=glt;function cz(n){return n!=null&&!(Array.isArray(n)&&n.length===0)}function NT(n,t=!1){return n&&(cz(n.value)&&n.value!==""||t&&cz(n.defaultValue)&&n.defaultValue!=="")}function sut(n){return n.startAdornment}function aut(n){return Ei("MuiInputBase",n)}const u_=ri("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var fz;const KM=(n,t)=>{const{ownerState:e}=n;return[t.root,e.formControl&&t.formControl,e.startAdornment&&t.adornedStart,e.endAdornment&&t.adornedEnd,e.error&&t.error,e.size==="small"&&t.sizeSmall,e.multiline&&t.multiline,e.color&&t[`color${cn(e.color)}`],e.fullWidth&&t.fullWidth,e.hiddenLabel&&t.hiddenLabel]},ZM=(n,t)=>{const{ownerState:e}=n;return[t.input,e.size==="small"&&t.inputSizeSmall,e.multiline&&t.inputMultiline,e.type==="search"&&t.inputTypeSearch,e.startAdornment&&t.inputAdornedStart,e.endAdornment&&t.inputAdornedEnd,e.hiddenLabel&&t.inputHiddenLabel]},out=n=>{const{classes:t,color:e,disabled:i,error:r,endAdornment:s,focused:a,formControl:l,fullWidth:c,hiddenLabel:f,multiline:m,readOnly:g,size:y,startAdornment:v,type:S}=n,E={root:["root",`color${cn(e)}`,i&&"disabled",r&&"error",c&&"fullWidth",a&&"focused",l&&"formControl",y&&y!=="medium"&&`size${cn(y)}`,m&&"multiline",v&&"adornedStart",s&&"adornedEnd",f&&"hiddenLabel",g&&"readOnly"],input:["input",i&&"disabled",S==="search"&&"inputTypeSearch",m&&"inputMultiline",y==="small"&&"inputSizeSmall",f&&"inputHiddenLabel",v&&"inputAdornedStart",s&&"inputAdornedEnd",g&&"readOnly"]};return Si(E,aut,t)},QM=Le("div",{name:"MuiInputBase",slot:"Root",overridesResolver:KM})(Hi(({theme:n})=>({...n.typography.body1,color:(n.vars||n).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${u_.disabled}`]:{color:(n.vars||n).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:e})=>t.multiline&&e==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),JM=Le("input",{name:"MuiInputBase",slot:"Input",overridesResolver:ZM})(Hi(({theme:n})=>{const t=n.palette.mode==="light",e={color:"currentColor",...n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})},i={opacity:"0 !important"},r=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":e,"&::-moz-placeholder":e,"&::-ms-input-placeholder":e,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${u_.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":r,"&:focus::-moz-placeholder":r,"&:focus::-ms-input-placeholder":r},[`&.${u_.disabled}`]:{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled},variants:[{props:({ownerState:s})=>!s.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:s})=>s.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),hz=tut({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),QD=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiInputBase"}),{"aria-describedby":r,autoComplete:s,autoFocus:a,className:l,color:c,components:f={},componentsProps:m={},defaultValue:g,disabled:y,disableInjectingGlobalStyles:v,endAdornment:S,error:E,fullWidth:T=!1,id:x,inputComponent:R="input",inputProps:D={},inputRef:O,margin:N,maxRows:B,minRows:L,multiline:U=!1,name:I,onBlur:w,onChange:V,onClick:G,onFocus:k,onKeyDown:st,onKeyUp:it,placeholder:Y,readOnly:Z,renderSuffix:at,rows:ct,size:$,slotProps:pt={},slots:wt={},startAdornment:zt,type:nt="text",value:lt,...ft}=i,mt=D.value!=null?D.value:lt,{current:Dt}=ot.useRef(mt!=null),Wt=ot.useRef(),Nt=ot.useCallback(Kt=>{},[]),Jt=Ca(Wt,O,D.ref,Nt),[Pt,kt]=ot.useState(!1),tt=of(),se=tp({props:i,muiFormControl:tt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});se.focused=tt?tt.focused:Pt,ot.useEffect(()=>{!tt&&y&&Pt&&(kt(!1),w&&w())},[tt,y,Pt,w]);const $t=tt&&tt.onFilled,ce=tt&&tt.onEmpty,rt=ot.useCallback(Kt=>{NT(Kt)?$t&&$t():ce&&ce()},[$t,ce]);Wd(()=>{Dt&&rt({value:mt})},[mt,rt,Dt]);const _t=Kt=>{k&&k(Kt),D.onFocus&&D.onFocus(Kt),tt&&tt.onFocus?tt.onFocus(Kt):kt(!0)},gt=Kt=>{w&&w(Kt),D.onBlur&&D.onBlur(Kt),tt&&tt.onBlur?tt.onBlur(Kt):kt(!1)},W=(Kt,...xe)=>{if(!Dt){const De=Kt.target||Wt.current;if(De==null)throw new Error(xh(1));rt({value:De.value})}D.onChange&&D.onChange(Kt,...xe),V&&V(Kt,...xe)};ot.useEffect(()=>{rt(Wt.current)},[]);const q=Kt=>{Wt.current&&Kt.currentTarget===Kt.target&&Wt.current.focus(),G&&G(Kt)};let ht=R,xt=D;U&&ht==="input"&&(ct?xt={type:void 0,minRows:ct,maxRows:ct,...xt}:xt={type:void 0,maxRows:B,minRows:L,...xt},ht=rut);const Vt=Kt=>{rt(Kt.animationName==="mui-auto-fill-cancel"?Wt.current:{value:"x"})};ot.useEffect(()=>{tt&&tt.setAdornedStart(!!zt)},[tt,zt]);const Lt={...i,color:se.color||"primary",disabled:se.disabled,endAdornment:S,error:se.error,focused:se.focused,formControl:tt,fullWidth:T,hiddenLabel:se.hiddenLabel,multiline:U,size:se.size,startAdornment:zt,type:nt},le=out(Lt),fe=wt.root||f.Root||QM,Se=pt.root||m.root||{},He=wt.input||f.Input||JM;return xt={...xt,...pt.input??m.input},Mt.jsxs(ot.Fragment,{children:[!v&&typeof hz=="function"&&(fz||(fz=Mt.jsx(hz,{}))),Mt.jsxs(fe,{...Se,ref:e,onClick:q,...ft,...!_2(fe)&&{ownerState:{...Lt,...Se.ownerState}},className:dn(le.root,Se.className,l,Z&&"MuiInputBase-readOnly"),children:[zt,Mt.jsx(ZD.Provider,{value:null,children:Mt.jsx(He,{"aria-invalid":se.error,"aria-describedby":r,autoComplete:s,autoFocus:a,defaultValue:g,disabled:se.disabled,id:x,onAnimationStart:Vt,name:I,placeholder:Y,readOnly:Z,required:se.required,rows:ct,value:mt,onKeyDown:st,onKeyUp:it,type:nt,...xt,...!_2(He)&&{as:ht,ownerState:{...Lt,...xt.ownerState}},ref:Jt,className:dn(le.input,xt.className,Z&&"MuiInputBase-readOnly"),onBlur:gt,onChange:W,onFocus:_t})}),S,at?at({...se,startAdornment:zt}):null]})]})});function lut(n){return typeof n.main=="string"}function uut(n,t=[]){if(!lut(n))return!1;for(const e of t)if(!n.hasOwnProperty(e)||typeof n[e]!="string")return!1;return!0}function Eh(n=[]){return([,t])=>t&&uut(t,n)}function cut(n){return Ei("MuiInput",n)}const n0={...u_,...ri("MuiInput",["root","underline","input"])},fut=n=>{const{classes:t,disableUnderline:e}=n,r=Si({root:["root",!e&&"underline"],input:["input"]},cut,t);return{...t,...r}},hut=Le(QM,{shouldForwardProp:n=>Ja(n)||n==="classes",name:"MuiInput",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[...KM(n,t),!e.disableUnderline&&t.underline]}})(Hi(({theme:n})=>{let e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(e=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:i})=>i.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:i})=>!i.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${n0.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${n0.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${e}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${n0.disabled}, .${n0.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${e}`}},[`&.${n0.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(Eh()).map(([i])=>({props:{color:i,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[i].main}`}}}))]}})),dut=Le(JM,{name:"MuiInput",slot:"Input",overridesResolver:ZM})({}),JD=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiInput"}),{disableUnderline:r=!1,components:s={},componentsProps:a,fullWidth:l=!1,inputComponent:c="input",multiline:f=!1,slotProps:m,slots:g={},type:y="text",...v}=i,S=fut(i),T={root:{ownerState:{disableUnderline:r}}},x=m??a?wa(m??a,T):T,R=g.root??s.Root??hut,D=g.input??s.Input??dut;return Mt.jsx(QD,{slots:{root:R,input:D},slotProps:x,fullWidth:l,inputComponent:c,multiline:f,ref:e,type:y,...v,classes:S})});JD.muiName="Input";function put(n){return Ei("MuiFilledInput",n)}const im={...u_,...ri("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])};function mut(n){return Ei("MuiSvgIcon",n)}ri("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const gut=n=>{const{color:t,fontSize:e,classes:i}=n,r={root:["root",t!=="inherit"&&`color${cn(t)}`,`fontSize${cn(e)}`]};return Si(r,mut,i)},yut=Le("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.root,e.color!=="inherit"&&t[`color${cn(e.color)}`],t[`fontSize${cn(e.fontSize)}`]]}})(Hi(({theme:n})=>{var t,e,i,r,s,a,l,c,f,m,g,y,v,S;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(r=(t=n.transitions)==null?void 0:t.create)==null?void 0:r.call(t,"fill",{duration:(i=(e=(n.vars??n).transitions)==null?void 0:e.duration)==null?void 0:i.shorter}),variants:[{props:E=>!E.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((a=(s=n.typography)==null?void 0:s.pxToRem)==null?void 0:a.call(s,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((c=(l=n.typography)==null?void 0:l.pxToRem)==null?void 0:c.call(l,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((m=(f=n.typography)==null?void 0:f.pxToRem)==null?void 0:m.call(f,35))||"2.1875rem"}},...Object.entries((n.vars??n).palette).filter(([,E])=>E&&E.main).map(([E])=>{var T,x;return{props:{color:E},style:{color:(x=(T=(n.vars??n).palette)==null?void 0:T[E])==null?void 0:x.main}}}),{props:{color:"action"},style:{color:(y=(g=(n.vars??n).palette)==null?void 0:g.action)==null?void 0:y.active}},{props:{color:"disabled"},style:{color:(S=(v=(n.vars??n).palette)==null?void 0:v.action)==null?void 0:S.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),v2=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiSvgIcon"}),{children:r,className:s,color:a="inherit",component:l="svg",fontSize:c="medium",htmlColor:f,inheritViewBox:m=!1,titleAccess:g,viewBox:y="0 0 24 24",...v}=i,S=ot.isValidElement(r)&&r.type==="svg",E={...i,color:a,component:l,fontSize:c,instanceFontSize:t.fontSize,inheritViewBox:m,viewBox:y,hasSvgAsChild:S},T={};m||(T.viewBox=y);const x=gut(E);return Mt.jsxs(yut,{as:l,className:dn(x.root,s),focusable:"false",color:f,"aria-hidden":g?void 0:!0,role:g?"img":void 0,ref:e,...T,...v,...S&&r.props,ownerState:E,children:[S?r.props.children:r,g?Mt.jsx("title",{children:g}):null]})});v2.muiName="SvgIcon";function rb(n,t){function e(i,r){return Mt.jsx(v2,{"data-testid":`${t}Icon`,ref:r,...i,children:n})}return e.muiName=v2.muiName,ot.memo(ot.forwardRef(e))}function _ut(n,t){if(!n)return t;if(typeof n=="function"||typeof t=="function")return r=>{const s=typeof t=="function"?t(r):t,a=typeof n=="function"?n({...r,...s}):n,l=dn(r==null?void 0:r.className,s==null?void 0:s.className,a==null?void 0:a.className);return{...s,...a,...!!l&&{className:l},...(s==null?void 0:s.style)&&(a==null?void 0:a.style)&&{style:{...s.style,...a.style}},...(s==null?void 0:s.sx)&&(a==null?void 0:a.sx)&&{sx:[...Array.isArray(s.sx)?s.sx:[s.sx],...Array.isArray(a.sx)?a.sx:[a.sx]]}}};const e=t,i=dn(e==null?void 0:e.className,n==null?void 0:n.className);return{...t,...n,...!!i&&{className:i},...(e==null?void 0:e.style)&&(n==null?void 0:n.style)&&{style:{...e.style,...n.style}},...(e==null?void 0:e.sx)&&(n==null?void 0:n.sx)&&{sx:[...Array.isArray(e.sx)?e.sx:[e.sx],...Array.isArray(n.sx)?n.sx:[n.sx]]}}}const vut=n=>{const{classes:t,disableUnderline:e,startAdornment:i,endAdornment:r,size:s,hiddenLabel:a,multiline:l}=n,c={root:["root",!e&&"underline",i&&"adornedStart",r&&"adornedEnd",s==="small"&&`size${cn(s)}`,a&&"hiddenLabel",l&&"multiline"],input:["input"]},f=Si(c,put,t);return{...t,...f}},xut=Le(QM,{shouldForwardProp:n=>Ja(n)||n==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[...KM(n,t),!e.disableUnderline&&t.underline]}})(Hi(({theme:n})=>{const t=n.palette.mode==="light",e=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",r=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",s=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:n.vars?n.vars.palette.FilledInput.bg:i,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:r,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:i}},[`&.${im.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:i},[`&.${im.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:s},variants:[{props:({ownerState:a})=>!a.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${im.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${im.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:e}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${im.disabled}, .${im.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${im.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(Eh()).map(([a])=>{var l;return{props:{disableUnderline:!1,color:a},style:{"&::after":{borderBottom:`2px solid ${(l=(n.vars||n).palette[a])==null?void 0:l.main}`}}}}),{props:({ownerState:a})=>a.startAdornment,style:{paddingLeft:12}},{props:({ownerState:a})=>a.endAdornment,style:{paddingRight:12}},{props:({ownerState:a})=>a.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:a,size:l})=>a.multiline&&l==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel&&a.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),but=Le(JM,{name:"MuiFilledInput",slot:"Input",overridesResolver:ZM})(Hi(({theme:n})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),tN=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiFilledInput"}),{disableUnderline:r=!1,components:s={},componentsProps:a,fullWidth:l=!1,hiddenLabel:c,inputComponent:f="input",multiline:m=!1,slotProps:g,slots:y={},type:v="text",...S}=i,E={...i,disableUnderline:r,fullWidth:l,inputComponent:f,multiline:m,type:v},T=vut(i),x={root:{ownerState:E},input:{ownerState:E}},R=g??a?wa(x,g??a):x,D=y.root??s.Root??xut,O=y.input??s.Input??but;return Mt.jsx(QD,{slots:{root:D,input:O},slotProps:R,fullWidth:l,inputComponent:f,multiline:m,ref:e,type:v,...S,classes:T})});tN.muiName="Input";var dz;const Sut=Le("fieldset",{shouldForwardProp:Ja})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Eut=Le("legend",{shouldForwardProp:Ja})(Hi(({theme:n})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}}]})));function Tut(n){const{children:t,classes:e,className:i,label:r,notched:s,...a}=n,l=r!=null&&r!=="",c={...n,notched:s,withLabel:l};return Mt.jsx(Sut,{"aria-hidden":!0,className:i,ownerState:c,...a,children:Mt.jsx(Eut,{ownerState:c,children:l?Mt.jsx("span",{children:r}):dz||(dz=Mt.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"}))})})}function Mut(n){return Ei("MuiOutlinedInput",n)}const Pc={...u_,...ri("MuiOutlinedInput",["root","notchedOutline","input"])},Aut=n=>{const{classes:t}=n,i=Si({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Mut,t);return{...t,...i}},wut=Le(QM,{shouldForwardProp:n=>Ja(n)||n==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:KM})(Hi(({theme:n})=>{const t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${Pc.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${Pc.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${Pc.focused} .${Pc.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(n.palette).filter(Eh()).map(([e])=>({props:{color:e},style:{[`&.${Pc.focused} .${Pc.notchedOutline}`]:{borderColor:(n.vars||n).palette[e].main}}})),{props:{},style:{[`&.${Pc.error} .${Pc.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},[`&.${Pc.disabled} .${Pc.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled}}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:14}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:14}},{props:({ownerState:e})=>e.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:e,size:i})=>e.multiline&&i==="small",style:{padding:"8.5px 14px"}}]}})),Cut=Le(Tut,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(n,t)=>t.notchedOutline})(Hi(({theme:n})=>{const t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:t}})),Rut=Le(JM,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:ZM})(Hi(({theme:n})=>({padding:"16.5px 14px",...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),eN=ot.forwardRef(function(t,e){var i;const r=ki({props:t,name:"MuiOutlinedInput"}),{components:s={},fullWidth:a=!1,inputComponent:l="input",label:c,multiline:f=!1,notched:m,slots:g={},type:y="text",...v}=r,S=Aut(r),E=of(),T=tp({props:r,muiFormControl:E,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),x={...r,color:T.color||"primary",disabled:T.disabled,error:T.error,focused:T.focused,formControl:E,fullWidth:a,hiddenLabel:T.hiddenLabel,multiline:f,size:T.size,type:y},R=g.root??s.Root??wut,D=g.input??s.Input??Rut;return Mt.jsx(QD,{slots:{root:R,input:D},renderSuffix:O=>Mt.jsx(Cut,{ownerState:x,className:S.notchedOutline,label:c!=null&&c!==""&&T.required?i||(i=Mt.jsxs(ot.Fragment,{children:[c," ","*"]})):c,notched:typeof m<"u"?m:!!(O.startAdornment||O.filled||O.focused)}),fullWidth:a,inputComponent:l,multiline:f,ref:e,type:y,...v,classes:{...S,notchedOutline:null}})});eN.muiName="Input";function Out(n){return Ei("MuiFormLabel",n)}const H0=ri("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Dut=n=>{const{classes:t,color:e,focused:i,disabled:r,error:s,filled:a,required:l}=n,c={root:["root",`color${cn(e)}`,r&&"disabled",s&&"error",a&&"filled",i&&"focused",l&&"required"],asterisk:["asterisk",s&&"error"]};return Si(c,Out,t)},Nut=Le("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled]}})(Hi(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(n.palette).filter(Eh()).map(([t])=>({props:{color:t},style:{[`&.${H0.focused}`]:{color:(n.vars||n).palette[t].main}}})),{props:{},style:{[`&.${H0.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${H0.error}`]:{color:(n.vars||n).palette.error.main}}}]}))),Iut=Le("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(n,t)=>t.asterisk})(Hi(({theme:n})=>({[`&.${H0.error}`]:{color:(n.vars||n).palette.error.main}}))),Put=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiFormLabel"}),{children:r,className:s,color:a,component:l="label",disabled:c,error:f,filled:m,focused:g,required:y,...v}=i,S=of(),E=tp({props:i,muiFormControl:S,states:["color","required","focused","disabled","error","filled"]}),T={...i,color:E.color||"primary",component:l,disabled:E.disabled,error:E.error,filled:E.filled,focused:E.focused,required:E.required},x=Dut(T);return Mt.jsxs(Nut,{as:l,ownerState:T,className:dn(x.root,s),ref:e,...v,children:[r,E.required&&Mt.jsxs(Iut,{ownerState:T,"aria-hidden":!0,className:x.asterisk,children:[" ","*"]})]})});function Lut(n){return Ei("MuiInputLabel",n)}ri("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Uut=n=>{const{classes:t,formControl:e,size:i,shrink:r,disableAnimation:s,variant:a,required:l}=n,c={root:["root",e&&"formControl",!s&&"animated",r&&"shrink",i&&i!=="normal"&&`size${cn(i)}`,a],asterisk:[l&&"asterisk"]},f=Si(c,Lut,t);return{...t,...f}},zut=Le(Put,{shouldForwardProp:n=>Ja(n)||n==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[{[`& .${H0.asterisk}`]:t.asterisk},t.root,e.formControl&&t.formControl,e.size==="small"&&t.sizeSmall,e.shrink&&t.shrink,!e.disableAnimation&&t.animated,e.focused&&t.focused,t[e.variant]]}})(Hi(({theme:n})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:n.transitions.create(["color","transform","max-width"],{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:e})=>t==="filled"&&e.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:e,size:i})=>t==="filled"&&e.shrink&&i==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:e})=>t==="outlined"&&e.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),_6=ot.forwardRef(function(t,e){const i=ki({name:"MuiInputLabel",props:t}),{disableAnimation:r=!1,margin:s,shrink:a,variant:l,className:c,...f}=i,m=of();let g=a;typeof g>"u"&&m&&(g=m.filled||m.focused||m.adornedStart);const y=tp({props:i,muiFormControl:m,states:["size","variant","required","focused"]}),v={...i,disableAnimation:r,formControl:m,shrink:g,size:y.size,variant:y.variant,required:y.required,focused:y.focused},S=Uut(v);return Mt.jsx(zut,{"data-shrink":g,ref:e,className:dn(S.root,c),...f,ownerState:v,classes:S})});function But(n){return Ei("MuiFormControl",n)}ri("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Vut=n=>{const{classes:t,margin:e,fullWidth:i}=n,r={root:["root",e!=="none"&&`margin${cn(e)}`,i&&"fullWidth"]};return Si(r,But,t)},Fut=Le("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.root,t[`margin${cn(e.margin)}`],e.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),kut=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiFormControl"}),{children:r,className:s,color:a="primary",component:l="div",disabled:c=!1,error:f=!1,focused:m,fullWidth:g=!1,hiddenLabel:y=!1,margin:v="none",required:S=!1,size:E="medium",variant:T="outlined",...x}=i,R={...i,color:a,component:l,disabled:c,error:f,fullWidth:g,hiddenLabel:y,margin:v,required:S,size:E,variant:T},D=Vut(R),[O,N]=ot.useState(()=>{let it=!1;return r&&ot.Children.forEach(r,Y=>{if(!UC(Y,["Input","Select"]))return;const Z=UC(Y,["Select"])?Y.props.input:Y;Z&&sut(Z.props)&&(it=!0)}),it}),[B,L]=ot.useState(()=>{let it=!1;return r&&ot.Children.forEach(r,Y=>{UC(Y,["Input","Select"])&&(NT(Y.props,!0)||NT(Y.props.inputProps,!0))&&(it=!0)}),it}),[U,I]=ot.useState(!1);c&&U&&I(!1);const w=m!==void 0&&!c?m:U;let V;ot.useRef(!1);const G=ot.useCallback(()=>{L(!0)},[]),k=ot.useCallback(()=>{L(!1)},[]),st=ot.useMemo(()=>({adornedStart:O,setAdornedStart:N,color:a,disabled:c,error:f,filled:B,focused:w,fullWidth:g,hiddenLabel:y,size:E,onBlur:()=>{I(!1)},onFocus:()=>{I(!0)},onEmpty:k,onFilled:G,registerEffect:V,required:S,variant:T}),[O,a,c,f,B,w,g,y,V,k,G,S,E,T]);return Mt.jsx(ZD.Provider,{value:st,children:Mt.jsx(Fut,{as:l,ownerState:R,className:dn(D.root,s),ref:e,...x,children:r})})});function Hut(n){return Ei("MuiFormHelperText",n)}const pz=ri("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var mz;const Gut=n=>{const{classes:t,contained:e,size:i,disabled:r,error:s,filled:a,focused:l,required:c}=n,f={root:["root",r&&"disabled",s&&"error",i&&`size${cn(i)}`,e&&"contained",l&&"focused",a&&"filled",c&&"required"]};return Si(f,Hut,t)},qut=Le("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.root,e.size&&t[`size${cn(e.size)}`],e.contained&&t.contained,e.filled&&t.filled]}})(Hi(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${pz.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${pz.error}`]:{color:(n.vars||n).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),jut=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiFormHelperText"}),{children:r,className:s,component:a="p",disabled:l,error:c,filled:f,focused:m,margin:g,required:y,variant:v,...S}=i,E=of(),T=tp({props:i,muiFormControl:E,states:["variant","size","disabled","error","filled","focused","required"]}),x={...i,component:a,contained:T.variant==="filled"||T.variant==="outlined",variant:T.variant,size:T.size,disabled:T.disabled,error:T.error,filled:T.filled,focused:T.focused,required:T.required};delete x.ownerState;const R=Gut(x);return Mt.jsx(qut,{as:a,className:dn(R.root,s),ref:e,...S,ownerState:x,children:r===" "?mz||(mz=Mt.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):r})}),x2=ot.createContext({});function Xut(n){return Ei("MuiList",n)}ri("MuiList",["root","padding","dense","subheader"]);const Wut=n=>{const{classes:t,disablePadding:e,dense:i,subheader:r}=n;return Si({root:["root",!e&&"padding",i&&"dense",r&&"subheader"]},Xut,t)},Yut=Le("ul",{name:"MuiList",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.root,!e.disablePadding&&t.padding,e.dense&&t.dense,e.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:n})=>!n.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:n})=>n.subheader,style:{paddingTop:0}}]}),$ut=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiList"}),{children:r,className:s,component:a="ul",dense:l=!1,disablePadding:c=!1,subheader:f,...m}=i,g=ot.useMemo(()=>({dense:l}),[l]),y={...i,component:a,dense:l,disablePadding:c},v=Wut(y);return Mt.jsx(x2.Provider,{value:g,children:Mt.jsxs(Yut,{as:a,className:dn(v.root,s),ref:e,ownerState:y,...m,children:[f,r]})})});function VC(n,t,e){return n===t?n.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e?null:n.firstChild}function gz(n,t,e){return n===t?e?n.firstChild:n.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e?null:n.lastChild}function v6(n,t){if(t===void 0)return!0;let e=n.innerText;return e===void 0&&(e=n.textContent),e=e.trim().toLowerCase(),e.length===0?!1:t.repeating?e[0]===t.keys[0]:e.startsWith(t.keys.join(""))}function i0(n,t,e,i,r,s){let a=!1,l=r(n,t,t?e:!1);for(;l;){if(l===n.firstChild){if(a)return!1;a=!0}const c=i?!1:l.disabled||l.getAttribute("aria-disabled")==="true";if(!l.hasAttribute("tabindex")||!v6(l,s)||c)l=r(n,l,e);else return l.focus(),!0}return!1}const Kut=ot.forwardRef(function(t,e){const{actions:i,autoFocus:r=!1,autoFocusItem:s=!1,children:a,className:l,disabledItemsFocusable:c=!1,disableListWrap:f=!1,onKeyDown:m,variant:g="selectedMenu",...y}=t,v=ot.useRef(null),S=ot.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Wd(()=>{r&&v.current.focus()},[r]),ot.useImperativeHandle(i,()=>({adjustStyleForScrollbar:(D,{direction:O})=>{const N=!v.current.style.width;if(D.clientHeight<v.current.clientHeight&&N){const B=`${a6(Sh(D))}px`;v.current.style[O==="rtl"?"paddingLeft":"paddingRight"]=B,v.current.style.width=`calc(100% + ${B})`}return v.current}}),[]);const E=D=>{const O=v.current,N=D.key;if(D.ctrlKey||D.metaKey||D.altKey){m&&m(D);return}const L=Vu(O).activeElement;if(N==="ArrowDown")D.preventDefault(),i0(O,L,f,c,VC);else if(N==="ArrowUp")D.preventDefault(),i0(O,L,f,c,gz);else if(N==="Home")D.preventDefault(),i0(O,null,f,c,VC);else if(N==="End")D.preventDefault(),i0(O,null,f,c,gz);else if(N.length===1){const U=S.current,I=N.toLowerCase(),w=performance.now();U.keys.length>0&&(w-U.lastTime>500?(U.keys=[],U.repeating=!0,U.previousKeyMatched=!0):U.repeating&&I!==U.keys[0]&&(U.repeating=!1)),U.lastTime=w,U.keys.push(I);const V=L&&!U.repeating&&v6(L,U);U.previousKeyMatched&&(V||i0(O,L,!1,c,VC,U))?D.preventDefault():U.previousKeyMatched=!1}m&&m(D)},T=Ca(v,e);let x=-1;ot.Children.forEach(a,(D,O)=>{if(!ot.isValidElement(D)){x===O&&(x+=1,x>=a.length&&(x=-1));return}D.props.disabled||(g==="selectedMenu"&&D.props.selected||x===-1)&&(x=O),x===O&&(D.props.disabled||D.props.muiSkipListHighlight||D.type.muiSkipListHighlight)&&(x+=1,x>=a.length&&(x=-1))});const R=ot.Children.map(a,(D,O)=>{if(O===x){const N={};return s&&(N.autoFocus=!0),D.props.tabIndex===void 0&&g==="selectedMenu"&&(N.tabIndex=0),ot.cloneElement(D,N)}return D});return Mt.jsx($ut,{role:"menu",ref:T,className:l,onKeyDown:E,tabIndex:r?0:-1,...y,children:R})});function x6(n,t){if(n==null)return{};var e={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(t.indexOf(i)!==-1)continue;e[i]=n[i]}return e}function b2(n,t){return b2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},b2(n,t)}function b6(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,b2(n,t)}var S6=Lz();const LE=c_(S6),yz={disabled:!1},IT=Rn.createContext(null);var Zut=function(t){return t.scrollTop},_0="unmounted",fm="exited",hm="entering",My="entered",S2="exiting",lf=function(n){b6(t,n);function t(i,r){var s;s=n.call(this,i,r)||this;var a=r,l=a&&!a.isMounting?i.enter:i.appear,c;return s.appearStatus=null,i.in?l?(c=fm,s.appearStatus=hm):c=My:i.unmountOnExit||i.mountOnEnter?c=_0:c=fm,s.state={status:c},s.nextCallback=null,s}t.getDerivedStateFromProps=function(r,s){var a=r.in;return a&&s.status===_0?{status:fm}:null};var e=t.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(r){var s=null;if(r!==this.props){var a=this.state.status;this.props.in?a!==hm&&a!==My&&(s=hm):(a===hm||a===My)&&(s=S2)}this.updateStatus(!1,s)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var r=this.props.timeout,s,a,l;return s=a=l=r,r!=null&&typeof r!="number"&&(s=r.exit,a=r.enter,l=r.appear!==void 0?r.appear:a),{exit:s,enter:a,appear:l}},e.updateStatus=function(r,s){if(r===void 0&&(r=!1),s!==null)if(this.cancelNextCallback(),s===hm){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:LE.findDOMNode(this);a&&Zut(a)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===fm&&this.setState({status:_0})},e.performEnter=function(r){var s=this,a=this.props.enter,l=this.context?this.context.isMounting:r,c=this.props.nodeRef?[l]:[LE.findDOMNode(this),l],f=c[0],m=c[1],g=this.getTimeouts(),y=l?g.appear:g.enter;if(!r&&!a||yz.disabled){this.safeSetState({status:My},function(){s.props.onEntered(f)});return}this.props.onEnter(f,m),this.safeSetState({status:hm},function(){s.props.onEntering(f,m),s.onTransitionEnd(y,function(){s.safeSetState({status:My},function(){s.props.onEntered(f,m)})})})},e.performExit=function(){var r=this,s=this.props.exit,a=this.getTimeouts(),l=this.props.nodeRef?void 0:LE.findDOMNode(this);if(!s||yz.disabled){this.safeSetState({status:fm},function(){r.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:S2},function(){r.props.onExiting(l),r.onTransitionEnd(a.exit,function(){r.safeSetState({status:fm},function(){r.props.onExited(l)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(r,s){s=this.setNextCallback(s),this.setState(r,s)},e.setNextCallback=function(r){var s=this,a=!0;return this.nextCallback=function(l){a&&(a=!1,s.nextCallback=null,r(l))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},e.onTransitionEnd=function(r,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:LE.findDOMNode(this),l=r==null&&!this.props.addEndListener;if(!a||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],f=c[0],m=c[1];this.props.addEndListener(f,m)}r!=null&&setTimeout(this.nextCallback,r)},e.render=function(){var r=this.state.status;if(r===_0)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var l=x6(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Rn.createElement(IT.Provider,{value:null},typeof a=="function"?a(r,l):Rn.cloneElement(Rn.Children.only(a),l))},t}(Rn.Component);lf.contextType=IT;lf.propTypes={};function xy(){}lf.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:xy,onEntering:xy,onEntered:xy,onExit:xy,onExiting:xy,onExited:xy};lf.UNMOUNTED=_0;lf.EXITED=fm;lf.ENTERING=hm;lf.ENTERED=My;lf.EXITING=S2;function Qut(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function nN(n,t){var e=function(s){return t&&ot.isValidElement(s)?t(s):s},i=Object.create(null);return n&&ot.Children.map(n,function(r){return r}).forEach(function(r){i[r.key]=e(r)}),i}function Jut(n,t){n=n||{},t=t||{};function e(m){return m in t?t[m]:n[m]}var i=Object.create(null),r=[];for(var s in n)s in t?r.length&&(i[s]=r,r=[]):r.push(s);var a,l={};for(var c in t){if(i[c])for(a=0;a<i[c].length;a++){var f=i[c][a];l[i[c][a]]=e(f)}l[c]=e(c)}for(a=0;a<r.length;a++)l[r[a]]=e(r[a]);return l}function xm(n,t,e){return e[t]!=null?e[t]:n.props[t]}function tct(n,t){return nN(n.children,function(e){return ot.cloneElement(e,{onExited:t.bind(null,e),in:!0,appear:xm(e,"appear",n),enter:xm(e,"enter",n),exit:xm(e,"exit",n)})})}function ect(n,t,e){var i=nN(n.children),r=Jut(t,i);return Object.keys(r).forEach(function(s){var a=r[s];if(ot.isValidElement(a)){var l=s in t,c=s in i,f=t[s],m=ot.isValidElement(f)&&!f.props.in;c&&(!l||m)?r[s]=ot.cloneElement(a,{onExited:e.bind(null,a),in:!0,exit:xm(a,"exit",n),enter:xm(a,"enter",n)}):!c&&l&&!m?r[s]=ot.cloneElement(a,{in:!1}):c&&l&&ot.isValidElement(f)&&(r[s]=ot.cloneElement(a,{onExited:e.bind(null,a),in:f.props.in,exit:xm(a,"exit",n),enter:xm(a,"enter",n)}))}}),r}var nct=Object.values||function(n){return Object.keys(n).map(function(t){return n[t]})},ict={component:"div",childFactory:function(t){return t}},iN=function(n){b6(t,n);function t(i,r){var s;s=n.call(this,i,r)||this;var a=s.handleExited.bind(Qut(s));return s.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},s}var e=t.prototype;return e.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},e.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(r,s){var a=s.children,l=s.handleExited,c=s.firstRender;return{children:c?tct(r,l):ect(r,a,l),firstRender:!1}},e.handleExited=function(r,s){var a=nN(this.props.children);r.key in a||(r.props.onExited&&r.props.onExited(s),this.mounted&&this.setState(function(l){var c=ux({},l.children);return delete c[r.key],{children:c}}))},e.render=function(){var r=this.props,s=r.component,a=r.childFactory,l=x6(r,["component","childFactory"]),c=this.state.contextValue,f=nct(this.state.children).map(a);return delete l.appear,delete l.enter,delete l.exit,s===null?Rn.createElement(IT.Provider,{value:c},f):Rn.createElement(IT.Provider,{value:c},Rn.createElement(s,l,f))},t}(Rn.Component);iN.propTypes={};iN.defaultProps=ict;const E6=n=>n.scrollTop;function PT(n,t){const{timeout:e,easing:i,style:r={}}=n;return{duration:r.transitionDuration??(typeof e=="number"?e:e[t.mode]||0),easing:r.transitionTimingFunction??(typeof i=="object"?i[t.mode]:i),delay:r.transitionDelay}}function E2(n){return`scale(${n}, ${n**2})`}const rct={entering:{opacity:1,transform:E2(1)},entered:{opacity:1,transform:"none"}},FC=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),T2=ot.forwardRef(function(t,e){const{addEndListener:i,appear:r=!0,children:s,easing:a,in:l,onEnter:c,onEntered:f,onEntering:m,onExit:g,onExited:y,onExiting:v,style:S,timeout:E="auto",TransitionComponent:T=lf,...x}=t,R=s6(),D=ot.useRef(),O=KD(),N=ot.useRef(null),B=Ca(N,ib(s),e),L=it=>Y=>{if(it){const Z=N.current;Y===void 0?it(Z):it(Z,Y)}},U=L(m),I=L((it,Y)=>{E6(it);const{duration:Z,delay:at,easing:ct}=PT({style:S,timeout:E,easing:a},{mode:"enter"});let $;E==="auto"?($=O.transitions.getAutoHeightDuration(it.clientHeight),D.current=$):$=Z,it.style.transition=[O.transitions.create("opacity",{duration:$,delay:at}),O.transitions.create("transform",{duration:FC?$:$*.666,delay:at,easing:ct})].join(","),c&&c(it,Y)}),w=L(f),V=L(v),G=L(it=>{const{duration:Y,delay:Z,easing:at}=PT({style:S,timeout:E,easing:a},{mode:"exit"});let ct;E==="auto"?(ct=O.transitions.getAutoHeightDuration(it.clientHeight),D.current=ct):ct=Y,it.style.transition=[O.transitions.create("opacity",{duration:ct,delay:Z}),O.transitions.create("transform",{duration:FC?ct:ct*.666,delay:FC?Z:Z||ct*.333,easing:at})].join(","),it.style.opacity=0,it.style.transform=E2(.75),g&&g(it)}),k=L(y),st=it=>{E==="auto"&&R.start(D.current||0,it),i&&i(N.current,it)};return Mt.jsx(T,{appear:r,in:l,nodeRef:N,onEnter:I,onEntered:w,onEntering:U,onExit:G,onExited:k,onExiting:V,addEndListener:st,timeout:E==="auto"?null:E,...x,children:(it,{ownerState:Y,...Z})=>ot.cloneElement(s,{style:{opacity:0,transform:E2(.75),visibility:it==="exited"&&!l?"hidden":void 0,...rct[it],...S,...s.props.style},ref:B,...Z})})});T2&&(T2.muiSupportAuto=!0);function sct(n){const t=Vu(n);return t.body===n?Sh(n).innerWidth>t.documentElement.clientWidth:n.scrollHeight>n.clientHeight}function G0(n,t){t?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden")}function _z(n){return parseInt(Sh(n).getComputedStyle(n).paddingRight,10)||0}function act(n){const e=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(n.tagName),i=n.tagName==="INPUT"&&n.getAttribute("type")==="hidden";return e||i}function vz(n,t,e,i,r){const s=[t,e,...i];[].forEach.call(n.children,a=>{const l=!s.includes(a),c=!act(a);l&&c&&G0(a,r)})}function kC(n,t){let e=-1;return n.some((i,r)=>t(i)?(e=r,!0):!1),e}function oct(n,t){const e=[],i=n.container;if(!t.disableScrollLock){if(sct(i)){const a=a6(Sh(i));e.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${_z(i)+a}px`;const l=Vu(i).querySelectorAll(".mui-fixed");[].forEach.call(l,c=>{e.push({value:c.style.paddingRight,property:"padding-right",el:c}),c.style.paddingRight=`${_z(c)+a}px`})}let s;if(i.parentNode instanceof DocumentFragment)s=Vu(i).body;else{const a=i.parentElement,l=Sh(i);s=(a==null?void 0:a.nodeName)==="HTML"&&l.getComputedStyle(a).overflowY==="scroll"?a:i}e.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{e.forEach(({value:s,el:a,property:l})=>{s?a.style.setProperty(l,s):a.style.removeProperty(l)})}}function lct(n){const t=[];return[].forEach.call(n.children,e=>{e.getAttribute("aria-hidden")==="true"&&t.push(e)}),t}class uct{constructor(){this.modals=[],this.containers=[]}add(t,e){let i=this.modals.indexOf(t);if(i!==-1)return i;i=this.modals.length,this.modals.push(t),t.modalRef&&G0(t.modalRef,!1);const r=lct(e);vz(e,t.mount,t.modalRef,r,!0);const s=kC(this.containers,a=>a.container===e);return s!==-1?(this.containers[s].modals.push(t),i):(this.containers.push({modals:[t],container:e,restore:null,hiddenSiblings:r}),i)}mount(t,e){const i=kC(this.containers,s=>s.modals.includes(t)),r=this.containers[i];r.restore||(r.restore=oct(r,e))}remove(t,e=!0){const i=this.modals.indexOf(t);if(i===-1)return i;const r=kC(this.containers,a=>a.modals.includes(t)),s=this.containers[r];if(s.modals.splice(s.modals.indexOf(t),1),this.modals.splice(i,1),s.modals.length===0)s.restore&&s.restore(),t.modalRef&&G0(t.modalRef,e),vz(s.container,t.mount,t.modalRef,s.hiddenSiblings,!1),this.containers.splice(r,1);else{const a=s.modals[s.modals.length-1];a.modalRef&&G0(a.modalRef,!1)}return i}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const cct=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function fct(n){const t=parseInt(n.getAttribute("tabindex")||"",10);return Number.isNaN(t)?n.contentEditable==="true"||(n.nodeName==="AUDIO"||n.nodeName==="VIDEO"||n.nodeName==="DETAILS")&&n.getAttribute("tabindex")===null?0:n.tabIndex:t}function hct(n){if(n.tagName!=="INPUT"||n.type!=="radio"||!n.name)return!1;const t=i=>n.ownerDocument.querySelector(`input[type="radio"]${i}`);let e=t(`[name="${n.name}"]:checked`);return e||(e=t(`[name="${n.name}"]`)),e!==n}function dct(n){return!(n.disabled||n.tagName==="INPUT"&&n.type==="hidden"||hct(n))}function pct(n){const t=[],e=[];return Array.from(n.querySelectorAll(cct)).forEach((i,r)=>{const s=fct(i);s===-1||!dct(i)||(s===0?t.push(i):e.push({documentOrder:r,tabIndex:s,node:i}))}),e.sort((i,r)=>i.tabIndex===r.tabIndex?i.documentOrder-r.documentOrder:i.tabIndex-r.tabIndex).map(i=>i.node).concat(t)}function mct(){return!0}function gct(n){const{children:t,disableAutoFocus:e=!1,disableEnforceFocus:i=!1,disableRestoreFocus:r=!1,getTabbable:s=pct,isEnabled:a=mct,open:l}=n,c=ot.useRef(!1),f=ot.useRef(null),m=ot.useRef(null),g=ot.useRef(null),y=ot.useRef(null),v=ot.useRef(!1),S=ot.useRef(null),E=Ca(ib(t),S),T=ot.useRef(null);ot.useEffect(()=>{!l||!S.current||(v.current=!e)},[e,l]),ot.useEffect(()=>{if(!l||!S.current)return;const D=Vu(S.current);return S.current.contains(D.activeElement)||(S.current.hasAttribute("tabIndex")||S.current.setAttribute("tabIndex","-1"),v.current&&S.current.focus()),()=>{r||(g.current&&g.current.focus&&(c.current=!0,g.current.focus()),g.current=null)}},[l]),ot.useEffect(()=>{if(!l||!S.current)return;const D=Vu(S.current),O=L=>{T.current=L,!(i||!a()||L.key!=="Tab")&&D.activeElement===S.current&&L.shiftKey&&(c.current=!0,m.current&&m.current.focus())},N=()=>{var I,w;const L=S.current;if(L===null)return;if(!D.hasFocus()||!a()||c.current){c.current=!1;return}if(L.contains(D.activeElement)||i&&D.activeElement!==f.current&&D.activeElement!==m.current)return;if(D.activeElement!==y.current)y.current=null;else if(y.current!==null)return;if(!v.current)return;let U=[];if((D.activeElement===f.current||D.activeElement===m.current)&&(U=s(S.current)),U.length>0){const V=!!((I=T.current)!=null&&I.shiftKey&&((w=T.current)==null?void 0:w.key)==="Tab"),G=U[0],k=U[U.length-1];typeof G!="string"&&typeof k!="string"&&(V?k.focus():G.focus())}else L.focus()};D.addEventListener("focusin",N),D.addEventListener("keydown",O,!0);const B=setInterval(()=>{D.activeElement&&D.activeElement.tagName==="BODY"&&N()},50);return()=>{clearInterval(B),D.removeEventListener("focusin",N),D.removeEventListener("keydown",O,!0)}},[e,i,r,a,l,s]);const x=D=>{g.current===null&&(g.current=D.relatedTarget),v.current=!0,y.current=D.target;const O=t.props.onFocus;O&&O(D)},R=D=>{g.current===null&&(g.current=D.relatedTarget),v.current=!0};return Mt.jsxs(ot.Fragment,{children:[Mt.jsx("div",{tabIndex:l?0:-1,onFocus:R,ref:f,"data-testid":"sentinelStart"}),ot.cloneElement(t,{ref:E,onFocus:x}),Mt.jsx("div",{tabIndex:l?0:-1,onFocus:R,ref:m,"data-testid":"sentinelEnd"})]})}function yct(n){return typeof n=="function"?n():n}const _ct=ot.forwardRef(function(t,e){const{children:i,container:r,disablePortal:s=!1}=t,[a,l]=ot.useState(null),c=Ca(ot.isValidElement(i)?ib(i):null,e);if(Wd(()=>{s||l(yct(r)||document.body)},[r,s]),Wd(()=>{if(a&&!s)return m2(e,a),()=>{m2(e,null)}},[e,a,s]),s){if(ot.isValidElement(i)){const f={ref:c};return ot.cloneElement(i,f)}return i}return a&&S6.createPortal(i,a)});function Is(n,t){const{className:e,elementType:i,ownerState:r,externalForwardedProps:s,internalForwardedProps:a,shouldForwardComponentProp:l=!1,...c}=t,{component:f,slots:m={[n]:void 0},slotProps:g={[n]:void 0},...y}=s,v=m[n]||i,S=c6(g[n],r),{props:{component:E,...T},internalRef:x}=u6({className:e,...c,externalForwardedProps:n==="root"?y:void 0,externalSlotProps:S}),R=Ca(x,S==null?void 0:S.ref,t.ref),D=n==="root"?E||f:E,O=o6(v,{...n==="root"&&!f&&!m[n]&&a,...n!=="root"&&!m[n]&&a,...T,...D&&!l&&{as:D},...D&&l&&{component:D},ref:R},r);return[v,O]}const vct={entering:{opacity:1},entered:{opacity:1}},xct=ot.forwardRef(function(t,e){const i=KD(),r={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:s,appear:a=!0,children:l,easing:c,in:f,onEnter:m,onEntered:g,onEntering:y,onExit:v,onExited:S,onExiting:E,style:T,timeout:x=r,TransitionComponent:R=lf,...D}=t,O=ot.useRef(null),N=Ca(O,ib(l),e),B=st=>it=>{if(st){const Y=O.current;it===void 0?st(Y):st(Y,it)}},L=B(y),U=B((st,it)=>{E6(st);const Y=PT({style:T,timeout:x,easing:c},{mode:"enter"});st.style.webkitTransition=i.transitions.create("opacity",Y),st.style.transition=i.transitions.create("opacity",Y),m&&m(st,it)}),I=B(g),w=B(E),V=B(st=>{const it=PT({style:T,timeout:x,easing:c},{mode:"exit"});st.style.webkitTransition=i.transitions.create("opacity",it),st.style.transition=i.transitions.create("opacity",it),v&&v(st)}),G=B(S),k=st=>{s&&s(O.current,st)};return Mt.jsx(R,{appear:a,in:f,nodeRef:O,onEnter:U,onEntered:I,onEntering:L,onExit:V,onExited:G,onExiting:w,addEndListener:k,timeout:x,...D,children:(st,{ownerState:it,...Y})=>ot.cloneElement(l,{style:{opacity:0,visibility:st==="exited"&&!f?"hidden":void 0,...vct[st],...T,...l.props.style},ref:N,...Y})})});function bct(n){return Ei("MuiBackdrop",n)}ri("MuiBackdrop",["root","invisible"]);const Sct=n=>{const{classes:t,invisible:e}=n;return Si({root:["root",e&&"invisible"]},bct,t)},Ect=Le("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.root,e.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Tct=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiBackdrop"}),{children:r,className:s,component:a="div",invisible:l=!1,open:c,components:f={},componentsProps:m={},slotProps:g={},slots:y={},TransitionComponent:v,transitionDuration:S,...E}=i,T={...i,component:a,invisible:l},x=Sct(T),R={transition:v,root:f.Root,...y},D={...m,...g},O={slots:R,slotProps:D},[N,B]=Is("root",{elementType:Ect,externalForwardedProps:O,className:dn(x.root,s),ownerState:T}),[L,U]=Is("transition",{elementType:xct,externalForwardedProps:O,ownerState:T});return Mt.jsx(L,{in:c,timeout:S,...E,...U,children:Mt.jsx(N,{"aria-hidden":!0,...B,classes:x,ref:e,children:r})})});function Mct(n){return typeof n=="function"?n():n}function Act(n){return n?n.props.hasOwnProperty("in"):!1}const xz=()=>{},UE=new uct;function wct(n){const{container:t,disableEscapeKeyDown:e=!1,disableScrollLock:i=!1,closeAfterTransition:r=!1,onTransitionEnter:s,onTransitionExited:a,children:l,onClose:c,open:f,rootRef:m}=n,g=ot.useRef({}),y=ot.useRef(null),v=ot.useRef(null),S=Ca(v,m),[E,T]=ot.useState(!f),x=Act(l);let R=!0;(n["aria-hidden"]==="false"||n["aria-hidden"]===!1)&&(R=!1);const D=()=>Vu(y.current),O=()=>(g.current.modalRef=v.current,g.current.mount=y.current,g.current),N=()=>{UE.mount(O(),{disableScrollLock:i}),v.current&&(v.current.scrollTop=0)},B=Rm(()=>{const it=Mct(t)||D().body;UE.add(O(),it),v.current&&N()}),L=()=>UE.isTopModal(O()),U=Rm(it=>{y.current=it,it&&(f&&L()?N():v.current&&G0(v.current,R))}),I=ot.useCallback(()=>{UE.remove(O(),R)},[R]);ot.useEffect(()=>()=>{I()},[I]),ot.useEffect(()=>{f?B():(!x||!r)&&I()},[f,I,x,r,B]);const w=it=>Y=>{var Z;(Z=it.onKeyDown)==null||Z.call(it,Y),!(Y.key!=="Escape"||Y.which===229||!L())&&(e||(Y.stopPropagation(),c&&c(Y,"escapeKeyDown")))},V=it=>Y=>{var Z;(Z=it.onClick)==null||Z.call(it,Y),Y.target===Y.currentTarget&&c&&c(Y,"backdropClick")};return{getRootProps:(it={})=>{const Y=l6(n);delete Y.onTransitionEnter,delete Y.onTransitionExited;const Z={...Y,...it};return{role:"presentation",...Z,onKeyDown:w(Z),ref:S}},getBackdropProps:(it={})=>{const Y=it;return{"aria-hidden":!0,...Y,onClick:V(Y),open:f}},getTransitionProps:()=>{const it=()=>{T(!1),s&&s()},Y=()=>{T(!0),a&&a(),r&&I()};return{onEnter:p2(it,(l==null?void 0:l.props.onEnter)??xz),onExited:p2(Y,(l==null?void 0:l.props.onExited)??xz)}},rootRef:S,portalRef:U,isTopModal:L,exited:E,hasTransition:x}}function Cct(n){return Ei("MuiModal",n)}ri("MuiModal",["root","hidden","backdrop"]);const Rct=n=>{const{open:t,exited:e,classes:i}=n;return Si({root:["root",!t&&e&&"hidden"],backdrop:["backdrop"]},Cct,i)},Oct=Le("div",{name:"MuiModal",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.root,!e.open&&e.exited&&t.hidden]}})(Hi(({theme:n})=>({position:"fixed",zIndex:(n.vars||n).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),Dct=Le(Tct,{name:"MuiModal",slot:"Backdrop",overridesResolver:(n,t)=>t.backdrop})({zIndex:-1}),Nct=ot.forwardRef(function(t,e){const i=ki({name:"MuiModal",props:t}),{BackdropComponent:r=Dct,BackdropProps:s,classes:a,className:l,closeAfterTransition:c=!1,children:f,container:m,component:g,components:y={},componentsProps:v={},disableAutoFocus:S=!1,disableEnforceFocus:E=!1,disableEscapeKeyDown:T=!1,disablePortal:x=!1,disableRestoreFocus:R=!1,disableScrollLock:D=!1,hideBackdrop:O=!1,keepMounted:N=!1,onBackdropClick:B,onClose:L,onTransitionEnter:U,onTransitionExited:I,open:w,slotProps:V={},slots:G={},theme:k,...st}=i,it={...i,closeAfterTransition:c,disableAutoFocus:S,disableEnforceFocus:E,disableEscapeKeyDown:T,disablePortal:x,disableRestoreFocus:R,disableScrollLock:D,hideBackdrop:O,keepMounted:N},{getRootProps:Y,getBackdropProps:Z,getTransitionProps:at,portalRef:ct,isTopModal:$,exited:pt,hasTransition:wt}=wct({...it,rootRef:e}),zt={...it,exited:pt},nt=Rct(zt),lt={};if(f.props.tabIndex===void 0&&(lt.tabIndex="-1"),wt){const{onEnter:Jt,onExited:Pt}=at();lt.onEnter=Jt,lt.onExited=Pt}const ft={slots:{root:y.Root,backdrop:y.Backdrop,...G},slotProps:{...v,...V}},[mt,Dt]=Is("root",{ref:e,elementType:Oct,externalForwardedProps:{...ft,...st,component:g},getSlotProps:Y,ownerState:zt,className:dn(l,nt==null?void 0:nt.root,!zt.open&&zt.exited&&(nt==null?void 0:nt.hidden))}),[Wt,Nt]=Is("backdrop",{ref:s==null?void 0:s.ref,elementType:r,externalForwardedProps:ft,shouldForwardComponentProp:!0,additionalProps:s,getSlotProps:Jt=>Z({...Jt,onClick:Pt=>{B&&B(Pt),Jt!=null&&Jt.onClick&&Jt.onClick(Pt)}}),className:dn(s==null?void 0:s.className,nt==null?void 0:nt.backdrop),ownerState:zt});return!N&&!w&&(!wt||pt)?null:Mt.jsx(_ct,{ref:ct,container:m,disablePortal:x,children:Mt.jsxs(mt,{...Dt,children:[!O&&r?Mt.jsx(Wt,{...Nt}):null,Mt.jsx(gct,{disableEnforceFocus:E,disableAutoFocus:S,disableRestoreFocus:R,isEnabled:$,open:w,children:ot.cloneElement(f,lt)})]})})});function Ict(n){return Ei("MuiPaper",n)}ri("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Pct=n=>{const{square:t,elevation:e,variant:i,classes:r}=n,s={root:["root",i,!t&&"rounded",i==="elevation"&&`elevation${e}`]};return Si(s,Ict,r)},Lct=Le("div",{name:"MuiPaper",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.root,t[e.variant],!e.square&&t.rounded,e.variant==="elevation"&&t[`elevation${e.elevation}`]]}})(Hi(({theme:n})=>({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:n.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(n.vars||n).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Uct=ot.forwardRef(function(t,e){var v;const i=ki({props:t,name:"MuiPaper"}),r=KD(),{className:s,component:a="div",elevation:l=1,square:c=!1,variant:f="elevation",...m}=i,g={...i,component:a,elevation:l,square:c,variant:f},y=Pct(g);return Mt.jsx(Lct,{as:a,ownerState:g,className:dn(y.root,s),ref:e,...m,style:{...f==="elevation"&&{"--Paper-shadow":(r.vars||r).shadows[l],...r.vars&&{"--Paper-overlay":(v=r.vars.overlays)==null?void 0:v[l]},...!r.vars&&r.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${$a("#fff",y2(l))}, ${$a("#fff",y2(l))})`}},...m.style}})});function zct(n){return Ei("MuiPopover",n)}ri("MuiPopover",["root","paper"]);function bz(n,t){let e=0;return typeof t=="number"?e=t:t==="center"?e=n.height/2:t==="bottom"&&(e=n.height),e}function Sz(n,t){let e=0;return typeof t=="number"?e=t:t==="center"?e=n.width/2:t==="right"&&(e=n.width),e}function Ez(n){return[n.horizontal,n.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function HC(n){return typeof n=="function"?n():n}const Bct=n=>{const{classes:t}=n;return Si({root:["root"],paper:["paper"]},zct,t)},Vct=Le(Nct,{name:"MuiPopover",slot:"Root",overridesResolver:(n,t)=>t.root})({}),T6=Le(Uct,{name:"MuiPopover",slot:"Paper",overridesResolver:(n,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Fct=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiPopover"}),{action:r,anchorEl:s,anchorOrigin:a={vertical:"top",horizontal:"left"},anchorPosition:l,anchorReference:c="anchorEl",children:f,className:m,container:g,elevation:y=8,marginThreshold:v=16,open:S,PaperProps:E={},slots:T={},slotProps:x={},transformOrigin:R={vertical:"top",horizontal:"left"},TransitionComponent:D,transitionDuration:O="auto",TransitionProps:N={},disableScrollLock:B=!1,...L}=i,U=ot.useRef(),I={...i,anchorOrigin:a,anchorReference:c,elevation:y,marginThreshold:v,transformOrigin:R,TransitionComponent:D,transitionDuration:O,TransitionProps:N},w=Bct(I),V=ot.useCallback(()=>{if(c==="anchorPosition")return l;const Nt=HC(s),Pt=(Nt&&Nt.nodeType===1?Nt:Vu(U.current).body).getBoundingClientRect();return{top:Pt.top+bz(Pt,a.vertical),left:Pt.left+Sz(Pt,a.horizontal)}},[s,a.horizontal,a.vertical,l,c]),G=ot.useCallback(Nt=>({vertical:bz(Nt,R.vertical),horizontal:Sz(Nt,R.horizontal)}),[R.horizontal,R.vertical]),k=ot.useCallback(Nt=>{const Jt={width:Nt.offsetWidth,height:Nt.offsetHeight},Pt=G(Jt);if(c==="none")return{top:null,left:null,transformOrigin:Ez(Pt)};const kt=V();let tt=kt.top-Pt.vertical,se=kt.left-Pt.horizontal;const $t=tt+Jt.height,ce=se+Jt.width,rt=Sh(HC(s)),_t=rt.innerHeight-v,gt=rt.innerWidth-v;if(v!==null&&tt<v){const W=tt-v;tt-=W,Pt.vertical+=W}else if(v!==null&&$t>_t){const W=$t-_t;tt-=W,Pt.vertical+=W}if(v!==null&&se<v){const W=se-v;se-=W,Pt.horizontal+=W}else if(ce>gt){const W=ce-gt;se-=W,Pt.horizontal+=W}return{top:`${Math.round(tt)}px`,left:`${Math.round(se)}px`,transformOrigin:Ez(Pt)}},[s,c,V,G,v]),[st,it]=ot.useState(S),Y=ot.useCallback(()=>{const Nt=U.current;if(!Nt)return;const Jt=k(Nt);Jt.top!==null&&Nt.style.setProperty("top",Jt.top),Jt.left!==null&&(Nt.style.left=Jt.left),Nt.style.transformOrigin=Jt.transformOrigin,it(!0)},[k]);ot.useEffect(()=>(B&&window.addEventListener("scroll",Y),()=>window.removeEventListener("scroll",Y)),[s,B,Y]);const Z=()=>{Y()},at=()=>{it(!1)};ot.useEffect(()=>{S&&Y()}),ot.useImperativeHandle(r,()=>S?{updatePosition:()=>{Y()}}:null,[S,Y]),ot.useEffect(()=>{if(!S)return;const Nt=i6(()=>{Y()}),Jt=Sh(s);return Jt.addEventListener("resize",Nt),()=>{Nt.clear(),Jt.removeEventListener("resize",Nt)}},[s,S,Y]);let ct=O;const $={slots:{transition:D,...T},slotProps:{transition:N,paper:E,...x}},[pt,wt]=Is("transition",{elementType:T2,externalForwardedProps:$,ownerState:I,getSlotProps:Nt=>({...Nt,onEntering:(Jt,Pt)=>{var kt;(kt=Nt.onEntering)==null||kt.call(Nt,Jt,Pt),Z()},onExited:Jt=>{var Pt;(Pt=Nt.onExited)==null||Pt.call(Nt,Jt),at()}}),additionalProps:{appear:!0,in:S}});O==="auto"&&!pt.muiSupportAuto&&(ct=void 0);const zt=g||(s?Vu(HC(s)).body:void 0),[nt,{slots:lt,slotProps:ft,...mt}]=Is("root",{ref:e,elementType:Vct,externalForwardedProps:{...$,...L},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:T.backdrop},slotProps:{backdrop:_ut(typeof x.backdrop=="function"?x.backdrop(I):x.backdrop,{invisible:!0})},container:zt,open:S},ownerState:I,className:dn(w.root,m)}),[Dt,Wt]=Is("paper",{ref:U,className:w.paper,elementType:T6,externalForwardedProps:$,shouldForwardComponentProp:!0,additionalProps:{elevation:y,style:st?void 0:{opacity:0}},ownerState:I});return Mt.jsx(nt,{...mt,...!_2(nt)&&{slots:lt,slotProps:ft,disableScrollLock:B},children:Mt.jsx(pt,{...wt,timeout:ct,children:Mt.jsx(Dt,{...Wt,children:f})})})});function kct(n){return Ei("MuiMenu",n)}ri("MuiMenu",["root","paper","list"]);const Hct={vertical:"top",horizontal:"right"},Gct={vertical:"top",horizontal:"left"},qct=n=>{const{classes:t}=n;return Si({root:["root"],paper:["paper"],list:["list"]},kct,t)},jct=Le(Fct,{shouldForwardProp:n=>Ja(n)||n==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(n,t)=>t.root})({}),Xct=Le(T6,{name:"MuiMenu",slot:"Paper",overridesResolver:(n,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Wct=Le(Kut,{name:"MuiMenu",slot:"List",overridesResolver:(n,t)=>t.list})({outline:0}),Yct=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiMenu"}),{autoFocus:r=!0,children:s,className:a,disableAutoFocusItem:l=!1,MenuListProps:c={},onClose:f,open:m,PaperProps:g={},PopoverClasses:y,transitionDuration:v="auto",TransitionProps:{onEntering:S,...E}={},variant:T="selectedMenu",slots:x={},slotProps:R={},...D}=i,O=hlt(),N={...i,autoFocus:r,disableAutoFocusItem:l,MenuListProps:c,onEntering:S,PaperProps:g,transitionDuration:v,TransitionProps:E,variant:T},B=qct(N),L=r&&!l&&m,U=ot.useRef(null),I=(ct,$)=>{U.current&&U.current.adjustStyleForScrollbar(ct,{direction:O?"rtl":"ltr"}),S&&S(ct,$)},w=ct=>{ct.key==="Tab"&&(ct.preventDefault(),f&&f(ct,"tabKeyDown"))};let V=-1;ot.Children.map(s,(ct,$)=>{ot.isValidElement(ct)&&(ct.props.disabled||(T==="selectedMenu"&&ct.props.selected||V===-1)&&(V=$))});const G={slots:x,slotProps:{list:c,transition:E,paper:g,...R}},k=clt({elementType:x.root,externalSlotProps:R.root,ownerState:N,className:[B.root,a]}),[st,it]=Is("paper",{className:B.paper,elementType:Xct,externalForwardedProps:G,shouldForwardComponentProp:!0,ownerState:N}),[Y,Z]=Is("list",{className:dn(B.list,c.className),elementType:Wct,shouldForwardComponentProp:!0,externalForwardedProps:G,getSlotProps:ct=>({...ct,onKeyDown:$=>{var pt;w($),(pt=ct.onKeyDown)==null||pt.call(ct,$)}}),ownerState:N}),at=typeof G.slotProps.transition=="function"?G.slotProps.transition(N):G.slotProps.transition;return Mt.jsx(jct,{onClose:f,anchorOrigin:{vertical:"bottom",horizontal:O?"right":"left"},transformOrigin:O?Hct:Gct,slots:{root:x.root,paper:st,backdrop:x.backdrop,...x.transition&&{transition:x.transition}},slotProps:{root:k,paper:it,backdrop:typeof R.backdrop=="function"?R.backdrop(N):R.backdrop,transition:{...at,onEntering:(...ct)=>{var $;I(...ct),($=at==null?void 0:at.onEntering)==null||$.call(at,...ct)}}},open:m,ref:e,transitionDuration:v,ownerState:N,...D,classes:y,children:Mt.jsx(Y,{actions:U,autoFocus:r&&(V===-1||l),autoFocusItem:L,variant:T,...Z,children:s})})});function $ct(n){return Ei("MuiNativeSelect",n)}const rN=ri("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Kct=n=>{const{classes:t,variant:e,disabled:i,multiple:r,open:s,error:a}=n,l={select:["select",e,i&&"disabled",r&&"multiple",a&&"error"],icon:["icon",`icon${cn(e)}`,s&&"iconOpen",i&&"disabled"]};return Si(l,$ct,t)},M6=Le("select")(({theme:n})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${rN.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}}}]})),Zct=Le(M6,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Ja,overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.select,t[e.variant],e.error&&t.error,{[`&.${rN.multiple}`]:t.multiple}]}})({}),A6=Le("svg")(({theme:n})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,[`&.${rN.disabled}`]:{color:(n.vars||n).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),Qct=Le(A6,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.icon,e.variant&&t[`icon${cn(e.variant)}`],e.open&&t.iconOpen]}})({}),Jct=ot.forwardRef(function(t,e){const{className:i,disabled:r,error:s,IconComponent:a,inputRef:l,variant:c="standard",...f}=t,m={...t,disabled:r,variant:c,error:s},g=Kct(m);return Mt.jsxs(ot.Fragment,{children:[Mt.jsx(Zct,{ownerState:m,className:dn(g.select,i),disabled:r,ref:l||e,...f}),t.multiple?null:Mt.jsx(Qct,{as:a,ownerState:m,className:g.icon})]})});function w6(n){return Ei("MuiSelect",n)}const r0=ri("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var Tz;const tft=Le(M6,{name:"MuiSelect",slot:"Select",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[{[`&.${r0.select}`]:t.select},{[`&.${r0.select}`]:t[e.variant]},{[`&.${r0.error}`]:t.error},{[`&.${r0.multiple}`]:t.multiple}]}})({[`&.${r0.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),eft=Le(A6,{name:"MuiSelect",slot:"Icon",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.icon,e.variant&&t[`icon${cn(e.variant)}`],e.open&&t.iconOpen]}})({}),nft=Le("input",{shouldForwardProp:n=>y6(n)&&n!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(n,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Mz(n,t){return typeof t=="object"&&t!==null?n===t:String(n)===String(t)}function ift(n){return n==null||typeof n=="string"&&!n.trim()}const rft=n=>{const{classes:t,variant:e,disabled:i,multiple:r,open:s,error:a}=n,l={select:["select",e,i&&"disabled",r&&"multiple",a&&"error"],icon:["icon",`icon${cn(e)}`,s&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]};return Si(l,w6,t)},sft=ot.forwardRef(function(t,e){var Ae;const{"aria-describedby":i,"aria-label":r,autoFocus:s,autoWidth:a,children:l,className:c,defaultOpen:f,defaultValue:m,disabled:g,displayEmpty:y,error:v=!1,IconComponent:S,inputRef:E,labelId:T,MenuProps:x={},multiple:R,name:D,onBlur:O,onChange:N,onClose:B,onFocus:L,onOpen:U,open:I,readOnly:w,renderValue:V,required:G,SelectDisplayProps:k={},tabIndex:st,type:it,value:Y,variant:Z="standard",...at}=t,[ct,$]=DT({controlled:Y,default:m,name:"Select"}),[pt,wt]=DT({controlled:I,default:f,name:"Select"}),zt=ot.useRef(null),nt=ot.useRef(null),[lt,ft]=ot.useState(null),{current:mt}=ot.useRef(I!=null),[Dt,Wt]=ot.useState(),Nt=Ca(e,E),Jt=ot.useCallback(Yt=>{nt.current=Yt,Yt&&ft(Yt)},[]),Pt=lt==null?void 0:lt.parentNode;ot.useImperativeHandle(Nt,()=>({focus:()=>{nt.current.focus()},node:zt.current,value:ct}),[ct]),ot.useEffect(()=>{f&&pt&&lt&&!mt&&(Wt(a?null:Pt.clientWidth),nt.current.focus())},[lt,a]),ot.useEffect(()=>{s&&nt.current.focus()},[s]),ot.useEffect(()=>{if(!T)return;const Yt=Vu(nt.current).getElementById(T);if(Yt){const Oe=()=>{getSelection().isCollapsed&&nt.current.focus()};return Yt.addEventListener("click",Oe),()=>{Yt.removeEventListener("click",Oe)}}},[T]);const kt=(Yt,Oe)=>{Yt?U&&U(Oe):B&&B(Oe),mt||(Wt(a?null:Pt.clientWidth),wt(Yt))},tt=Yt=>{Yt.button===0&&(Yt.preventDefault(),nt.current.focus(),kt(!0,Yt))},se=Yt=>{kt(!1,Yt)},$t=ot.Children.toArray(l),ce=Yt=>{const Oe=$t.find(Te=>Te.props.value===Yt.target.value);Oe!==void 0&&($(Oe.props.value),N&&N(Yt,Oe))},rt=Yt=>Oe=>{let Te;if(Oe.currentTarget.hasAttribute("tabindex")){if(R){Te=Array.isArray(ct)?ct.slice():[];const fn=ct.indexOf(Yt.props.value);fn===-1?Te.push(Yt.props.value):Te.splice(fn,1)}else Te=Yt.props.value;if(Yt.props.onClick&&Yt.props.onClick(Oe),ct!==Te&&($(Te),N)){const fn=Oe.nativeEvent||Oe,bt=new fn.constructor(fn.type,fn);Object.defineProperty(bt,"target",{writable:!0,value:{value:Te,name:D}}),N(bt,Yt)}R||kt(!1,Oe)}},_t=Yt=>{w||[" ","ArrowUp","ArrowDown","Enter"].includes(Yt.key)&&(Yt.preventDefault(),kt(!0,Yt))},gt=lt!==null&&pt,W=Yt=>{!gt&&O&&(Object.defineProperty(Yt,"target",{writable:!0,value:{value:ct,name:D}}),O(Yt))};delete at["aria-invalid"];let q,ht;const xt=[];let Vt=!1;(NT({value:ct})||y)&&(V?q=V(ct):Vt=!0);const Lt=$t.map(Yt=>{if(!ot.isValidElement(Yt))return null;let Oe;if(R){if(!Array.isArray(ct))throw new Error(xh(2));Oe=ct.some(Te=>Mz(Te,Yt.props.value)),Oe&&Vt&&xt.push(Yt.props.children)}else Oe=Mz(ct,Yt.props.value),Oe&&Vt&&(ht=Yt.props.children);return ot.cloneElement(Yt,{"aria-selected":Oe?"true":"false",onClick:rt(Yt),onKeyUp:Te=>{Te.key===" "&&Te.preventDefault(),Yt.props.onKeyUp&&Yt.props.onKeyUp(Te)},role:"option",selected:Oe,value:void 0,"data-value":Yt.props.value})});Vt&&(R?xt.length===0?q=null:q=xt.reduce((Yt,Oe,Te)=>(Yt.push(Oe),Te<xt.length-1&&Yt.push(", "),Yt),[]):q=ht);let le=Dt;!a&&mt&&lt&&(le=Pt.clientWidth);let fe;typeof st<"u"?fe=st:fe=g?null:0;const Se=k.id||(D?`mui-component-select-${D}`:void 0),He={...t,variant:Z,value:ct,open:gt,error:v},Kt=rft(He),xe={...x.PaperProps,...(Ae=x.slotProps)==null?void 0:Ae.paper},De=UM();return Mt.jsxs(ot.Fragment,{children:[Mt.jsx(tft,{as:"div",ref:Jt,tabIndex:fe,role:"combobox","aria-controls":gt?De:void 0,"aria-disabled":g?"true":void 0,"aria-expanded":gt?"true":"false","aria-haspopup":"listbox","aria-label":r,"aria-labelledby":[T,Se].filter(Boolean).join(" ")||void 0,"aria-describedby":i,"aria-required":G?"true":void 0,"aria-invalid":v?"true":void 0,onKeyDown:_t,onMouseDown:g||w?null:tt,onBlur:W,onFocus:L,...k,ownerState:He,className:dn(k.className,Kt.select,c),id:Se,children:ift(q)?Tz||(Tz=Mt.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):q}),Mt.jsx(nft,{"aria-invalid":v,value:Array.isArray(ct)?ct.join(","):ct,name:D,ref:zt,"aria-hidden":!0,onChange:ce,tabIndex:-1,disabled:g,className:Kt.nativeInput,autoFocus:s,required:G,...at,ownerState:He}),Mt.jsx(eft,{as:S,className:Kt.icon,ownerState:He}),Mt.jsx(Yct,{id:`menu-${D||""}`,anchorEl:Pt,open:gt,onClose:se,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...x,slotProps:{...x.slotProps,list:{"aria-labelledby":T,role:"listbox","aria-multiselectable":R?"true":void 0,disableListWrap:!0,id:De,...x.MenuListProps},paper:{...xe,style:{minWidth:le,...xe!=null?xe.style:null}}},children:Lt})]})}),aft=rb(Mt.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),oft=n=>{const{classes:t}=n,i=Si({root:["root"]},w6,t);return{...t,...i}},sN={name:"MuiSelect",overridesResolver:(n,t)=>t.root,shouldForwardProp:n=>Ja(n)&&n!=="variant",slot:"Root"},lft=Le(JD,sN)(""),uft=Le(eN,sN)(""),cft=Le(tN,sN)(""),aN=ot.forwardRef(function(t,e){const i=ki({name:"MuiSelect",props:t}),{autoWidth:r=!1,children:s,classes:a={},className:l,defaultOpen:c=!1,displayEmpty:f=!1,IconComponent:m=aft,id:g,input:y,inputProps:v,label:S,labelId:E,MenuProps:T,multiple:x=!1,native:R=!1,onClose:D,onOpen:O,open:N,renderValue:B,SelectDisplayProps:L,variant:U="outlined",...I}=i,w=R?Jct:sft,V=of(),G=tp({props:i,muiFormControl:V,states:["variant","error"]}),k=G.variant||U,st={...i,variant:k,classes:a},it=oft(st),{root:Y,...Z}=it,at=y||{standard:Mt.jsx(lft,{ownerState:st}),outlined:Mt.jsx(uft,{label:S,ownerState:st}),filled:Mt.jsx(cft,{ownerState:st})}[k],ct=Ca(e,ib(at));return Mt.jsx(ot.Fragment,{children:ot.cloneElement(at,{inputComponent:w,inputProps:{children:s,error:G.error,IconComponent:m,variant:k,type:void 0,multiple:x,...R?{id:g}:{autoWidth:r,defaultOpen:c,displayEmpty:f,labelId:E,MenuProps:T,onClose:D,onOpen:O,open:N,renderValue:B,SelectDisplayProps:{id:g,...L}},...v,classes:v?wa(Z,v.classes):Z,...y?y.props.inputProps:{}},...(x&&R||f)&&k==="outlined"?{notched:!0}:{},ref:ct,className:dn(at.props.className,l,it.root),...!y&&{variant:k},...I})})});aN.muiName="Select";function fft(n){return Ei("MuiTextField",n)}ri("MuiTextField",["root"]);const hft={standard:JD,filled:tN,outlined:eN},dft=n=>{const{classes:t}=n;return Si({root:["root"]},fft,t)},pft=Le(kut,{name:"MuiTextField",slot:"Root",overridesResolver:(n,t)=>t.root})({}),GC=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiTextField"}),{autoComplete:r,autoFocus:s=!1,children:a,className:l,color:c="primary",defaultValue:f,disabled:m=!1,error:g=!1,FormHelperTextProps:y,fullWidth:v=!1,helperText:S,id:E,InputLabelProps:T,inputProps:x,InputProps:R,inputRef:D,label:O,maxRows:N,minRows:B,multiline:L=!1,name:U,onBlur:I,onChange:w,onFocus:V,placeholder:G,required:k=!1,rows:st,select:it=!1,SelectProps:Y,slots:Z={},slotProps:at={},type:ct,value:$,variant:pt="outlined",...wt}=i,zt={...i,autoFocus:s,color:c,disabled:m,error:g,fullWidth:v,multiline:L,required:k,select:it,variant:pt},nt=dft(zt),lt=UM(E),ft=S&&lt?`${lt}-helper-text`:void 0,mt=O&&lt?`${lt}-label`:void 0,Dt=hft[pt],Wt={slots:Z,slotProps:{input:R,inputLabel:T,htmlInput:x,formHelperText:y,select:Y,...at}},Nt={},Jt=Wt.slotProps.inputLabel;pt==="outlined"&&(Jt&&typeof Jt.shrink<"u"&&(Nt.notched=Jt.shrink),Nt.label=O),it&&((!Y||!Y.native)&&(Nt.id=void 0),Nt["aria-describedby"]=void 0);const[Pt,kt]=Is("input",{elementType:Dt,externalForwardedProps:Wt,additionalProps:Nt,ownerState:zt}),[tt,se]=Is("inputLabel",{elementType:_6,externalForwardedProps:Wt,ownerState:zt}),[$t,ce]=Is("htmlInput",{elementType:"input",externalForwardedProps:Wt,ownerState:zt}),[rt,_t]=Is("formHelperText",{elementType:jut,externalForwardedProps:Wt,ownerState:zt}),[gt,W]=Is("select",{elementType:aN,externalForwardedProps:Wt,ownerState:zt}),q=Mt.jsx(Pt,{"aria-describedby":ft,autoComplete:r,autoFocus:s,defaultValue:f,fullWidth:v,multiline:L,name:U,rows:st,maxRows:N,minRows:B,type:ct,value:$,id:lt,inputRef:D,onBlur:I,onChange:w,onFocus:V,placeholder:G,inputProps:ce,slots:{input:Z.htmlInput?$t:void 0},...kt});return Mt.jsxs(pft,{className:dn(nt.root,l),disabled:m,error:g,fullWidth:v,ref:e,required:k,color:c,variant:pt,ownerState:zt,...wt,children:[O!=null&&O!==""&&Mt.jsx(tt,{htmlFor:lt,id:mt,...se,children:O}),it?Mt.jsx(gt,{"aria-describedby":ft,id:lt,labelId:mt,value:$,input:q,...W,children:a}):q,S&&Mt.jsx(rt,{id:ft,..._t,children:S})]})});class LT{constructor(){Mv(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new LT}static use(){const t=r6(LT.create).current,[e,i]=ot.useState(!1);return t.shouldMount=e,t.setShouldMount=i,ot.useEffect(t.mountEffect,[e]),t}mount(){return this.mounted||(this.mounted=gft(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var e;return(e=this.ref.current)==null?void 0:e.start(...t)})}stop(...t){this.mount().then(()=>{var e;return(e=this.ref.current)==null?void 0:e.stop(...t)})}pulsate(...t){this.mount().then(()=>{var e;return(e=this.ref.current)==null?void 0:e.pulsate(...t)})}}function mft(){return LT.use()}function gft(){let n,t;const e=new Promise((i,r)=>{n=i,t=r});return e.resolve=n,e.reject=t,e}function yft(n){const{className:t,classes:e,pulsate:i=!1,rippleX:r,rippleY:s,rippleSize:a,in:l,onExited:c,timeout:f}=n,[m,g]=ot.useState(!1),y=dn(t,e.ripple,e.rippleVisible,i&&e.ripplePulsate),v={width:a,height:a,top:-(a/2)+s,left:-(a/2)+r},S=dn(e.child,m&&e.childLeaving,i&&e.childPulsate);return!l&&!m&&g(!0),ot.useEffect(()=>{if(!l&&c!=null){const E=setTimeout(c,f);return()=>{clearTimeout(E)}}},[c,l,f]),Mt.jsx("span",{className:y,style:v,children:Mt.jsx("span",{className:S})})}const Vl=ri("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),M2=550,_ft=80,vft=nb`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,xft=nb`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,bft=nb`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Sft=Le("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Eft=Le(yft,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Vl.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${vft};
    animation-duration: ${M2}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  &.${Vl.ripplePulsate} {
    animation-duration: ${({theme:n})=>n.transitions.duration.shorter}ms;
  }

  & .${Vl.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Vl.childLeaving} {
    opacity: 0;
    animation-name: ${xft};
    animation-duration: ${M2}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  & .${Vl.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${bft};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Tft=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiTouchRipple"}),{center:r=!1,classes:s={},className:a,...l}=i,[c,f]=ot.useState([]),m=ot.useRef(0),g=ot.useRef(null);ot.useEffect(()=>{g.current&&(g.current(),g.current=null)},[c]);const y=ot.useRef(!1),v=s6(),S=ot.useRef(null),E=ot.useRef(null),T=ot.useCallback(O=>{const{pulsate:N,rippleX:B,rippleY:L,rippleSize:U,cb:I}=O;f(w=>[...w,Mt.jsx(Eft,{classes:{ripple:dn(s.ripple,Vl.ripple),rippleVisible:dn(s.rippleVisible,Vl.rippleVisible),ripplePulsate:dn(s.ripplePulsate,Vl.ripplePulsate),child:dn(s.child,Vl.child),childLeaving:dn(s.childLeaving,Vl.childLeaving),childPulsate:dn(s.childPulsate,Vl.childPulsate)},timeout:M2,pulsate:N,rippleX:B,rippleY:L,rippleSize:U},m.current)]),m.current+=1,g.current=I},[s]),x=ot.useCallback((O={},N={},B=()=>{})=>{const{pulsate:L=!1,center:U=r||N.pulsate,fakeElement:I=!1}=N;if((O==null?void 0:O.type)==="mousedown"&&y.current){y.current=!1;return}(O==null?void 0:O.type)==="touchstart"&&(y.current=!0);const w=I?null:E.current,V=w?w.getBoundingClientRect():{width:0,height:0,left:0,top:0};let G,k,st;if(U||O===void 0||O.clientX===0&&O.clientY===0||!O.clientX&&!O.touches)G=Math.round(V.width/2),k=Math.round(V.height/2);else{const{clientX:it,clientY:Y}=O.touches&&O.touches.length>0?O.touches[0]:O;G=Math.round(it-V.left),k=Math.round(Y-V.top)}if(U)st=Math.sqrt((2*V.width**2+V.height**2)/3),st%2===0&&(st+=1);else{const it=Math.max(Math.abs((w?w.clientWidth:0)-G),G)*2+2,Y=Math.max(Math.abs((w?w.clientHeight:0)-k),k)*2+2;st=Math.sqrt(it**2+Y**2)}O!=null&&O.touches?S.current===null&&(S.current=()=>{T({pulsate:L,rippleX:G,rippleY:k,rippleSize:st,cb:B})},v.start(_ft,()=>{S.current&&(S.current(),S.current=null)})):T({pulsate:L,rippleX:G,rippleY:k,rippleSize:st,cb:B})},[r,T,v]),R=ot.useCallback(()=>{x({},{pulsate:!0})},[x]),D=ot.useCallback((O,N)=>{if(v.clear(),(O==null?void 0:O.type)==="touchend"&&S.current){S.current(),S.current=null,v.start(0,()=>{D(O,N)});return}S.current=null,f(B=>B.length>0?B.slice(1):B),g.current=N},[v]);return ot.useImperativeHandle(e,()=>({pulsate:R,start:x,stop:D}),[R,x,D]),Mt.jsx(Sft,{className:dn(Vl.root,s.root,a),ref:E,...l,children:Mt.jsx(iN,{component:null,exit:!0,children:c})})});function Mft(n){return Ei("MuiButtonBase",n)}const Aft=ri("MuiButtonBase",["root","disabled","focusVisible"]),wft=n=>{const{disabled:t,focusVisible:e,focusVisibleClassName:i,classes:r}=n,a=Si({root:["root",t&&"disabled",e&&"focusVisible"]},Mft,r);return e&&i&&(a.root+=` ${i}`),a},Cft=Le("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(n,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Aft.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),oN=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiButtonBase"}),{action:r,centerRipple:s=!1,children:a,className:l,component:c="button",disabled:f=!1,disableRipple:m=!1,disableTouchRipple:g=!1,focusRipple:y=!1,focusVisibleClassName:v,LinkComponent:S="a",onBlur:E,onClick:T,onContextMenu:x,onDragLeave:R,onFocus:D,onFocusVisible:O,onKeyDown:N,onKeyUp:B,onMouseDown:L,onMouseLeave:U,onMouseUp:I,onTouchEnd:w,onTouchMove:V,onTouchStart:G,tabIndex:k=0,TouchRippleProps:st,touchRippleRef:it,type:Y,...Z}=i,at=ot.useRef(null),ct=mft(),$=Ca(ct.ref,it),[pt,wt]=ot.useState(!1);f&&pt&&wt(!1),ot.useImperativeHandle(r,()=>({focusVisible:()=>{wt(!0),at.current.focus()}}),[]);const zt=ct.shouldMount&&!m&&!f;ot.useEffect(()=>{pt&&y&&!m&&ct.pulsate()},[m,y,pt,ct]);const nt=Qf(ct,"start",L,g),lt=Qf(ct,"stop",x,g),ft=Qf(ct,"stop",R,g),mt=Qf(ct,"stop",I,g),Dt=Qf(ct,"stop",q=>{pt&&q.preventDefault(),U&&U(q)},g),Wt=Qf(ct,"start",G,g),Nt=Qf(ct,"stop",w,g),Jt=Qf(ct,"stop",V,g),Pt=Qf(ct,"stop",q=>{JU(q.target)||wt(!1),E&&E(q)},!1),kt=Rm(q=>{at.current||(at.current=q.currentTarget),JU(q.target)&&(wt(!0),O&&O(q)),D&&D(q)}),tt=()=>{const q=at.current;return c&&c!=="button"&&!(q.tagName==="A"&&q.href)},se=Rm(q=>{y&&!q.repeat&&pt&&q.key===" "&&ct.stop(q,()=>{ct.start(q)}),q.target===q.currentTarget&&tt()&&q.key===" "&&q.preventDefault(),N&&N(q),q.target===q.currentTarget&&tt()&&q.key==="Enter"&&!f&&(q.preventDefault(),T&&T(q))}),$t=Rm(q=>{y&&q.key===" "&&pt&&!q.defaultPrevented&&ct.stop(q,()=>{ct.pulsate(q)}),B&&B(q),T&&q.target===q.currentTarget&&tt()&&q.key===" "&&!q.defaultPrevented&&T(q)});let ce=c;ce==="button"&&(Z.href||Z.to)&&(ce=S);const rt={};ce==="button"?(rt.type=Y===void 0?"button":Y,rt.disabled=f):(!Z.href&&!Z.to&&(rt.role="button"),f&&(rt["aria-disabled"]=f));const _t=Ca(e,at),gt={...i,centerRipple:s,component:c,disabled:f,disableRipple:m,disableTouchRipple:g,focusRipple:y,tabIndex:k,focusVisible:pt},W=wft(gt);return Mt.jsxs(Cft,{as:ce,className:dn(W.root,l),ownerState:gt,onBlur:Pt,onClick:T,onContextMenu:lt,onFocus:kt,onKeyDown:se,onKeyUp:$t,onMouseDown:nt,onMouseLeave:Dt,onMouseUp:mt,onDragLeave:ft,onTouchEnd:Nt,onTouchMove:Jt,onTouchStart:Wt,ref:_t,tabIndex:f?-1:k,type:Y,...rt,...Z,children:[a,zt?Mt.jsx(Tft,{ref:$,center:s,...st}):null]})});function Qf(n,t,e,i=!1){return Rm(r=>(e&&e(r),i||n[t](r),!0))}function Rft(n){return Ei("MuiCircularProgress",n)}ri("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const _d=44,A2=nb`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,w2=nb`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Oft=typeof A2!="string"?kD`
        animation: ${A2} 1.4s linear infinite;
      `:null,Dft=typeof w2!="string"?kD`
        animation: ${w2} 1.4s ease-in-out infinite;
      `:null,Nft=n=>{const{classes:t,variant:e,color:i,disableShrink:r}=n,s={root:["root",e,`color${cn(i)}`],svg:["svg"],circle:["circle",`circle${cn(e)}`,r&&"circleDisableShrink"]};return Si(s,Rft,t)},Ift=Le("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.root,t[e.variant],t[`color${cn(e.color)}`]]}})(Hi(({theme:n})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:n.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Oft||{animation:`${A2} 1.4s linear infinite`}},...Object.entries(n.palette).filter(Eh()).map(([t])=>({props:{color:t},style:{color:(n.vars||n).palette[t].main}}))]}))),Pft=Le("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(n,t)=>t.svg})({display:"block"}),Lft=Le("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.circle,t[`circle${cn(e.variant)}`],e.disableShrink&&t.circleDisableShrink]}})(Hi(({theme:n})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:n.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:Dft||{animation:`${w2} 1.4s ease-in-out infinite`}}]}))),Uft=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiCircularProgress"}),{className:r,color:s="primary",disableShrink:a=!1,size:l=40,style:c,thickness:f=3.6,value:m=0,variant:g="indeterminate",...y}=i,v={...i,color:s,disableShrink:a,size:l,thickness:f,value:m,variant:g},S=Nft(v),E={},T={},x={};if(g==="determinate"){const R=2*Math.PI*((_d-f)/2);E.strokeDasharray=R.toFixed(3),x["aria-valuenow"]=Math.round(m),E.strokeDashoffset=`${((100-m)/100*R).toFixed(3)}px`,T.transform="rotate(-90deg)"}return Mt.jsx(Ift,{className:dn(S.root,r),style:{width:l,height:l,...T,...c},ownerState:v,ref:e,role:"progressbar",...x,...y,children:Mt.jsx(Pft,{className:S.svg,ownerState:v,viewBox:`${_d/2} ${_d/2} ${_d} ${_d}`,children:Mt.jsx(Lft,{className:S.circle,style:E,ownerState:v,cx:_d,cy:_d,r:(_d-f)/2,fill:"none",strokeWidth:f})})})});function zft(n){return Ei("MuiButton",n)}const rm=ri("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),Bft=ot.createContext({}),Vft=ot.createContext(void 0),Fft=n=>{const{color:t,disableElevation:e,fullWidth:i,size:r,variant:s,loading:a,loadingPosition:l,classes:c}=n,f={root:["root",a&&"loading",s,`${s}${cn(t)}`,`size${cn(r)}`,`${s}Size${cn(r)}`,`color${cn(t)}`,e&&"disableElevation",i&&"fullWidth",a&&`loadingPosition${cn(l)}`],startIcon:["icon","startIcon",`iconSize${cn(r)}`],endIcon:["icon","endIcon",`iconSize${cn(r)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},m=Si(f,zft,c);return{...c,...m}},C6=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],kft=Le(oN,{shouldForwardProp:n=>Ja(n)||n==="classes",name:"MuiButton",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.root,t[e.variant],t[`${e.variant}${cn(e.color)}`],t[`size${cn(e.size)}`],t[`${e.variant}Size${cn(e.size)}`],e.color==="inherit"&&t.colorInherit,e.disableElevation&&t.disableElevation,e.fullWidth&&t.fullWidth,e.loading&&t.loading]}})(Hi(({theme:n})=>{const t=n.palette.mode==="light"?n.palette.grey[300]:n.palette.grey[800],e=n.palette.mode==="light"?n.palette.grey.A100:n.palette.grey[700];return{...n.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${rm.disabled}`]:{color:(n.vars||n).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(n.vars||n).shadows[2],"&:hover":{boxShadow:(n.vars||n).shadows[4],"@media (hover: none)":{boxShadow:(n.vars||n).shadows[2]}},"&:active":{boxShadow:(n.vars||n).shadows[8]},[`&.${rm.focusVisible}`]:{boxShadow:(n.vars||n).shadows[6]},[`&.${rm.disabled}`]:{color:(n.vars||n).palette.action.disabled,boxShadow:(n.vars||n).shadows[0],backgroundColor:(n.vars||n).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${rm.disabled}`]:{border:`1px solid ${(n.vars||n).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(n.palette).filter(Eh()).map(([i])=>({props:{color:i},style:{"--variant-textColor":(n.vars||n).palette[i].main,"--variant-outlinedColor":(n.vars||n).palette[i].main,"--variant-outlinedBorder":n.vars?`rgba(${n.vars.palette[i].mainChannel} / 0.5)`:$a(n.palette[i].main,.5),"--variant-containedColor":(n.vars||n).palette[i].contrastText,"--variant-containedBg":(n.vars||n).palette[i].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(n.vars||n).palette[i].dark,"--variant-textBg":n.vars?`rgba(${n.vars.palette[i].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:$a(n.palette[i].main,n.palette.action.hoverOpacity),"--variant-outlinedBorder":(n.vars||n).palette[i].main,"--variant-outlinedBg":n.vars?`rgba(${n.vars.palette[i].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:$a(n.palette[i].main,n.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":n.vars?n.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":n.vars?n.vars.palette.Button.inheritContainedHoverBg:e,"--variant-textBg":n.vars?`rgba(${n.vars.palette.text.primaryChannel} / ${n.vars.palette.action.hoverOpacity})`:$a(n.palette.text.primary,n.palette.action.hoverOpacity),"--variant-outlinedBg":n.vars?`rgba(${n.vars.palette.text.primaryChannel} / ${n.vars.palette.action.hoverOpacity})`:$a(n.palette.text.primary,n.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:n.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:n.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:n.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:n.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:n.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:n.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${rm.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${rm.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:n.transitions.create(["background-color","box-shadow","border-color"],{duration:n.transitions.duration.short}),[`&.${rm.loading}`]:{color:"transparent"}}}]}})),Hft=Le("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.startIcon,e.loading&&t.startIconLoadingStart,t[`iconSize${cn(e.size)}`]]}})(({theme:n})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:n.transitions.create(["opacity"],{duration:n.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...C6]})),Gft=Le("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.endIcon,e.loading&&t.endIconLoadingEnd,t[`iconSize${cn(e.size)}`]]}})(({theme:n})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:n.transitions.create(["opacity"],{duration:n.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...C6]})),qft=Le("span",{name:"MuiButton",slot:"LoadingIndicator",overridesResolver:(n,t)=>t.loadingIndicator})(({theme:n})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(n.vars||n).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),Az=Le("span",{name:"MuiButton",slot:"LoadingIconPlaceholder",overridesResolver:(n,t)=>t.loadingIconPlaceholder})({display:"inline-block",width:"1em",height:"1em"}),lN=ot.forwardRef(function(t,e){const i=ot.useContext(Bft),r=ot.useContext(Vft),s=OT(i,t),a=ki({props:s,name:"MuiButton"}),{children:l,color:c="primary",component:f="button",className:m,disabled:g=!1,disableElevation:y=!1,disableFocusRipple:v=!1,endIcon:S,focusVisibleClassName:E,fullWidth:T=!1,id:x,loading:R=null,loadingIndicator:D,loadingPosition:O="center",size:N="medium",startIcon:B,type:L,variant:U="text",...I}=a,w=UM(x),V=D??Mt.jsx(Uft,{"aria-labelledby":w,color:"inherit",size:16}),G={...a,color:c,component:f,disabled:g,disableElevation:y,disableFocusRipple:v,fullWidth:T,loading:R,loadingIndicator:V,loadingPosition:O,size:N,type:L,variant:U},k=Fft(G),st=(B||R&&O==="start")&&Mt.jsx(Hft,{className:k.startIcon,ownerState:G,children:B||Mt.jsx(Az,{className:k.loadingIconPlaceholder,ownerState:G})}),it=(S||R&&O==="end")&&Mt.jsx(Gft,{className:k.endIcon,ownerState:G,children:S||Mt.jsx(Az,{className:k.loadingIconPlaceholder,ownerState:G})}),Y=r||"",Z=typeof R=="boolean"?Mt.jsx("span",{className:k.loadingWrapper,style:{display:"contents"},children:R&&Mt.jsx(qft,{className:k.loadingIndicator,ownerState:G,children:V})}):null;return Mt.jsxs(kft,{ownerState:G,className:dn(i.className,k.root,m,Y),component:f,disabled:g||R,focusRipple:!v,focusVisibleClassName:dn(k.focusVisible,E),ref:e,type:L,id:R?w:x,...I,classes:k,children:[st,O!=="end"&&Z,l,O==="end"&&Z,it]})}),jft=ri("MuiBox",["root"]),Xft=g6(),Wft=Xot({themeId:$M,defaultTheme:Xft,defaultClassName:jft.root,generateClassName:Jk.generate}),Yft=rb(Mt.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"CloseOutlined"),$ft=()=>{o_.setState({isAddNodeActive:!1})},Kft=({description:n})=>Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(lN,{size:"medium",onClick:$ft,children:Mt.jsx(Yft,{sx:{color:"red"}})}),Mt.jsx("h1",{className:"h1",children:"Agregar nodo"}),Mt.jsx("p",{style:{fontSize:14,lineHeight:1.3},children:n})]});function Zft(n){return Ei("MuiDivider",n)}const wz=ri("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Qft=n=>{const{absolute:t,children:e,classes:i,flexItem:r,light:s,orientation:a,textAlign:l,variant:c}=n;return Si({root:["root",t&&"absolute",c,s&&"light",a==="vertical"&&"vertical",r&&"flexItem",e&&"withChildren",e&&a==="vertical"&&"withChildrenVertical",l==="right"&&a!=="vertical"&&"textAlignRight",l==="left"&&a!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",a==="vertical"&&"wrapperVertical"]},Zft,i)},Jft=Le("div",{name:"MuiDivider",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.root,e.absolute&&t.absolute,t[e.variant],e.light&&t.light,e.orientation==="vertical"&&t.vertical,e.flexItem&&t.flexItem,e.children&&t.withChildren,e.children&&e.orientation==="vertical"&&t.withChildrenVertical,e.textAlign==="right"&&e.orientation!=="vertical"&&t.textAlignRight,e.textAlign==="left"&&e.orientation!=="vertical"&&t.textAlignLeft]}})(Hi(({theme:n})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(n.vars||n).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:n.vars?`rgba(${n.vars.palette.dividerChannel} / 0.08)`:$a(n.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:n.spacing(2),marginRight:n.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:n.spacing(1),marginBottom:n.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(n.vars||n).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(n.vars||n).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),tht=Le("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.wrapper,e.orientation==="vertical"&&t.wrapperVertical]}})(Hi(({theme:n})=>({display:"inline-block",paddingLeft:`calc(${n.spacing(1)} * 1.2)`,paddingRight:`calc(${n.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${n.spacing(1)} * 1.2)`,paddingBottom:`calc(${n.spacing(1)} * 1.2)`}}]}))),C2=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiDivider"}),{absolute:r=!1,children:s,className:a,orientation:l="horizontal",component:c=s||l==="vertical"?"div":"hr",flexItem:f=!1,light:m=!1,role:g=c!=="hr"?"separator":void 0,textAlign:y="center",variant:v="fullWidth",...S}=i,E={...i,absolute:r,component:c,flexItem:f,light:m,orientation:l,role:g,textAlign:y,variant:v},T=Qft(E);return Mt.jsx(Jft,{as:c,className:dn(T.root,a),role:g,ref:e,ownerState:E,"aria-orientation":g==="separator"&&(c!=="hr"||l==="vertical")?l:void 0,...S,children:s?Mt.jsx(tht,{className:T.wrapper,ownerState:E,children:s}):null})});C2&&(C2.muiSkipListHighlight=!0);const Cz=ri("MuiListItemIcon",["root","alignItemsFlexStart"]);function eht(n){return Ei("MuiTypography",n)}ri("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const nht={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},iht=eut(),rht=n=>{const{align:t,gutterBottom:e,noWrap:i,paragraph:r,variant:s,classes:a}=n,l={root:["root",s,n.align!=="inherit"&&`align${cn(t)}`,e&&"gutterBottom",i&&"noWrap",r&&"paragraph"]};return Si(l,eht,a)},sht=Le("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.root,e.variant&&t[e.variant],e.align!=="inherit"&&t[`align${cn(e.align)}`],e.noWrap&&t.noWrap,e.gutterBottom&&t.gutterBottom,e.paragraph&&t.paragraph]}})(Hi(({theme:n})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(n.typography).filter(([e,i])=>e!=="inherit"&&i&&typeof i=="object").map(([e,i])=>({props:{variant:e},style:i})),...Object.entries(n.palette).filter(Eh()).map(([e])=>({props:{color:e},style:{color:(n.vars||n).palette[e].main}})),...Object.entries(((t=n.palette)==null?void 0:t.text)||{}).filter(([,e])=>typeof e=="string").map(([e])=>({props:{color:`text${cn(e)}`},style:{color:(n.vars||n).palette.text[e]}})),{props:({ownerState:e})=>e.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:e})=>e.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:e})=>e.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:e})=>e.paragraph,style:{marginBottom:16}}]}})),Rz={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Oz=ot.forwardRef(function(t,e){const{color:i,...r}=ki({props:t,name:"MuiTypography"}),s=!nht[i],a=iht({...r,...s&&{color:i}}),{align:l="inherit",className:c,component:f,gutterBottom:m=!1,noWrap:g=!1,paragraph:y=!1,variant:v="body1",variantMapping:S=Rz,...E}=a,T={...a,align:l,color:i,className:c,component:f,gutterBottom:m,noWrap:g,paragraph:y,variant:v,variantMapping:S},x=f||(y?"p":S[v]||Rz[v])||"span",R=rht(T);return Mt.jsx(sht,{as:x,ref:e,className:dn(R.root,c),...E,ownerState:T,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...E.style}})}),Dz=ri("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function aht(n){return Ei("MuiMenuItem",n)}const s0=ri("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),oht=(n,t)=>{const{ownerState:e}=n;return[t.root,e.dense&&t.dense,e.divider&&t.divider,!e.disableGutters&&t.gutters]},lht=n=>{const{disabled:t,dense:e,divider:i,disableGutters:r,selected:s,classes:a}=n,c=Si({root:["root",e&&"dense",t&&"disabled",!r&&"gutters",i&&"divider",s&&"selected"]},aht,a);return{...a,...c}},uht=Le(oN,{shouldForwardProp:n=>Ja(n)||n==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:oht})(Hi(({theme:n})=>({...n.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${s0.selected}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.selectedOpacity})`:$a(n.palette.primary.main,n.palette.action.selectedOpacity),[`&.${s0.focusVisible}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.focusOpacity}))`:$a(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}},[`&.${s0.selected}:hover`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.hoverOpacity}))`:$a(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.selectedOpacity})`:$a(n.palette.primary.main,n.palette.action.selectedOpacity)}},[`&.${s0.focusVisible}`]:{backgroundColor:(n.vars||n).palette.action.focus},[`&.${s0.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity},[`& + .${wz.root}`]:{marginTop:n.spacing(1),marginBottom:n.spacing(1)},[`& + .${wz.inset}`]:{marginLeft:52},[`& .${Dz.root}`]:{marginTop:0,marginBottom:0},[`& .${Dz.inset}`]:{paddingLeft:36},[`& .${Cz.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(n.vars||n).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[n.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...n.typography.body2,[`& .${Cz.root} svg`]:{fontSize:"1.25rem"}}}]}))),sm=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiMenuItem"}),{autoFocus:r=!1,component:s="li",dense:a=!1,divider:l=!1,disableGutters:c=!1,focusVisibleClassName:f,role:m="menuitem",tabIndex:g,className:y,...v}=i,S=ot.useContext(x2),E=ot.useMemo(()=>({dense:a||S.dense||!1,disableGutters:c}),[S.dense,a,c]),T=ot.useRef(null);Wd(()=>{r&&T.current&&T.current.focus()},[r]);const x={...i,dense:E.dense,divider:l,disableGutters:c},R=lht(i),D=Ca(T,e);let O;return i.disabled||(O=g!==void 0?g:-1),Mt.jsx(x2.Provider,{value:E,children:Mt.jsx(uht,{ref:D,role:m,tabIndex:O,component:s,focusVisibleClassName:dn(R.focusVisible,f),className:dn(R.root,y),...v,ownerState:x,classes:R})})});function cht(n){return Ei("MuiFormGroup",n)}ri("MuiFormGroup",["root","row","error"]);const fht=n=>{const{classes:t,row:e,error:i}=n;return Si({root:["root",e&&"row",i&&"error"]},cht,t)},hht=Le("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.root,e.row&&t.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),dht=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiFormGroup"}),{className:r,row:s=!1,...a}=i,l=of(),c=tp({props:i,muiFormControl:l,states:["error"]}),f={...i,row:s,error:c.error},m=fht(f);return Mt.jsx(hht,{className:dn(m.root,r),ownerState:f,ref:e,...a})});function pht(n){return Ei("MuiRadioGroup",n)}ri("MuiRadioGroup",["root","row","error"]);const R6=ot.createContext(void 0),mht=n=>{const{classes:t,row:e,error:i}=n;return Si({root:["root",e&&"row",i&&"error"]},pht,t)},ght=ot.forwardRef(function(t,e){const{actions:i,children:r,className:s,defaultValue:a,name:l,onChange:c,value:f,...m}=t,g=ot.useRef(null),y=mht(t),[v,S]=DT({controlled:f,default:a,name:"RadioGroup"});ot.useImperativeHandle(i,()=>({focus:()=>{let R=g.current.querySelector("input:not(:disabled):checked");R||(R=g.current.querySelector("input:not(:disabled)")),R&&R.focus()}}),[]);const E=Ca(e,g),T=UM(l),x=ot.useMemo(()=>({name:T,onChange(R){S(R.target.value),c&&c(R,R.target.value)},value:v}),[T,c,S,v]);return Mt.jsx(R6.Provider,{value:x,children:Mt.jsx(dht,{role:"radiogroup",ref:E,className:dn(y.root,s),...m,children:r})})});function yht(){return ot.useContext(R6)}function _ht(n){return Ei("PrivateSwitchBase",n)}ri("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const vht=n=>{const{classes:t,checked:e,disabled:i,edge:r}=n,s={root:["root",e&&"checked",i&&"disabled",r&&`edge${cn(r)}`],input:["input"]};return Si(s,_ht,t)},xht=Le(oN)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:n,ownerState:t})=>n==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:n,ownerState:t})=>n==="end"&&t.size!=="small",style:{marginRight:-12}}]}),bht=Le("input",{shouldForwardProp:Ja})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Sht=ot.forwardRef(function(t,e){const{autoFocus:i,checked:r,checkedIcon:s,defaultChecked:a,disabled:l,disableFocusRipple:c=!1,edge:f=!1,icon:m,id:g,inputProps:y,inputRef:v,name:S,onBlur:E,onChange:T,onFocus:x,readOnly:R,required:D=!1,tabIndex:O,type:N,value:B,slots:L={},slotProps:U={},...I}=t,[w,V]=DT({controlled:r,default:!!a,name:"SwitchBase",state:"checked"}),G=of(),k=lt=>{x&&x(lt),G&&G.onFocus&&G.onFocus(lt)},st=lt=>{E&&E(lt),G&&G.onBlur&&G.onBlur(lt)},it=lt=>{if(lt.nativeEvent.defaultPrevented)return;const ft=lt.target.checked;V(ft),T&&T(lt,ft)};let Y=l;G&&typeof Y>"u"&&(Y=G.disabled);const Z=N==="checkbox"||N==="radio",at={...t,checked:w,disabled:Y,disableFocusRipple:c,edge:f},ct=vht(at),$={slots:L,slotProps:{input:y,...U}},[pt,wt]=Is("root",{ref:e,elementType:xht,className:ct.root,shouldForwardComponentProp:!0,externalForwardedProps:{...$,component:"span",...I},getSlotProps:lt=>({...lt,onFocus:ft=>{var mt;(mt=lt.onFocus)==null||mt.call(lt,ft),k(ft)},onBlur:ft=>{var mt;(mt=lt.onBlur)==null||mt.call(lt,ft),st(ft)}}),ownerState:at,additionalProps:{centerRipple:!0,focusRipple:!c,disabled:Y,role:void 0,tabIndex:null}}),[zt,nt]=Is("input",{ref:v,elementType:bht,className:ct.input,externalForwardedProps:$,getSlotProps:lt=>({onChange:ft=>{var mt;(mt=lt.onChange)==null||mt.call(lt,ft),it(ft)}}),ownerState:at,additionalProps:{autoFocus:i,checked:r,defaultChecked:a,disabled:Y,id:Z?g:void 0,name:S,readOnly:R,required:D,tabIndex:O,type:N,...N==="checkbox"&&B===void 0?{}:{value:B}}});return Mt.jsxs(pt,{...wt,children:[Mt.jsx(zt,{...nt}),w?s:m]})}),Eht=rb(Mt.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),Tht=rb(Mt.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),Mht=Le("span",{shouldForwardProp:Ja})({position:"relative",display:"flex"}),Aht=Le(Eht)({transform:"scale(1)"}),wht=Le(Tht)(Hi(({theme:n})=>({left:0,position:"absolute",transform:"scale(0)",transition:n.transitions.create("transform",{easing:n.transitions.easing.easeIn,duration:n.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:n.transitions.create("transform",{easing:n.transitions.easing.easeOut,duration:n.transitions.duration.shortest})}}]})));function O6(n){const{checked:t=!1,classes:e={},fontSize:i}=n,r={...n,checked:t};return Mt.jsxs(Mht,{className:e.root,ownerState:r,children:[Mt.jsx(Aht,{fontSize:i,className:e.background,ownerState:r}),Mt.jsx(wht,{fontSize:i,className:e.dot,ownerState:r})]})}function Cht(n){return Ei("MuiRadio",n)}const Nz=ri("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),Rht=n=>{const{classes:t,color:e,size:i}=n,r={root:["root",`color${cn(e)}`,i!=="medium"&&`size${cn(i)}`]};return{...t,...Si(r,Cht,t)}},Oht=Le(Sht,{shouldForwardProp:n=>Ja(n)||n==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.root,e.size!=="medium"&&t[`size${cn(e.size)}`],t[`color${cn(e.color)}`]]}})(Hi(({theme:n})=>({color:(n.vars||n).palette.text.secondary,[`&.${Nz.disabled}`]:{color:(n.vars||n).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:$a(n.palette.action.active,n.palette.action.hoverOpacity)}}},...Object.entries(n.palette).filter(Eh()).map(([t])=>({props:{color:t,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette[t].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:$a(n.palette[t].main,n.palette.action.hoverOpacity)}}})),...Object.entries(n.palette).filter(Eh()).map(([t])=>({props:{color:t,disabled:!1},style:{[`&.${Nz.checked}`]:{color:(n.vars||n).palette[t].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function Dht(n,t){return typeof t=="object"&&t!==null?n===t:String(n)===String(t)}const Nht=Mt.jsx(O6,{checked:!0}),Iht=Mt.jsx(O6,{}),Iz=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiRadio"}),{checked:r,checkedIcon:s=Nht,color:a="primary",icon:l=Iht,name:c,onChange:f,size:m="medium",className:g,disabled:y,disableRipple:v=!1,slots:S={},slotProps:E={},inputProps:T,...x}=i,R=of();let D=y;R&&typeof D>"u"&&(D=R.disabled),D??(D=!1);const O={...i,disabled:D,disableRipple:v,color:a,size:m},N=Rht(O),B=yht();let L=r;const U=p2(f,B&&B.onChange);let I=c;B&&(typeof L>"u"&&(L=Dht(B.value,i.value)),typeof I>"u"&&(I=B.name));const w=E.input??T,[V,G]=Is("root",{ref:e,elementType:Oht,className:dn(N.root,g),shouldForwardComponentProp:!0,externalForwardedProps:{slots:S,slotProps:E,...x},getSlotProps:k=>({...k,onChange:(st,...it)=>{var Y;(Y=k.onChange)==null||Y.call(k,st,...it),U(st,...it)}}),ownerState:O,additionalProps:{type:"radio",icon:ot.cloneElement(l,{fontSize:l.props.fontSize??m}),checkedIcon:ot.cloneElement(s,{fontSize:s.props.fontSize??m}),disabled:D,name:I,checked:L,slots:S,slotProps:{input:typeof w=="function"?w(O):w}}});return Mt.jsx(V,{...G,classes:N})});function Pht(n){return Ei("MuiFormControlLabel",n)}const v0=ri("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Lht=n=>{const{classes:t,disabled:e,labelPlacement:i,error:r,required:s}=n,a={root:["root",e&&"disabled",`labelPlacement${cn(i)}`,r&&"error",s&&"required"],label:["label",e&&"disabled"],asterisk:["asterisk",r&&"error"]};return Si(a,Pht,t)},Uht=Le("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[{[`& .${v0.label}`]:t.label},t.root,t[`labelPlacement${cn(e.labelPlacement)}`]]}})(Hi(({theme:n})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${v0.disabled}`]:{cursor:"default"},[`& .${v0.label}`]:{[`&.${v0.disabled}`]:{color:(n.vars||n).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:t})=>t==="start"||t==="top"||t==="bottom",style:{marginLeft:16}}]}))),zht=Le("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(n,t)=>t.asterisk})(Hi(({theme:n})=>({[`&.${v0.error}`]:{color:(n.vars||n).palette.error.main}}))),Pz=ot.forwardRef(function(t,e){const i=ki({props:t,name:"MuiFormControlLabel"}),{checked:r,className:s,componentsProps:a={},control:l,disabled:c,disableTypography:f,inputRef:m,label:g,labelPlacement:y="end",name:v,onChange:S,required:E,slots:T={},slotProps:x={},value:R,...D}=i,O=of(),N=c??l.props.disabled??(O==null?void 0:O.disabled),B=E??l.props.required,L={disabled:N,required:B};["checked","name","onChange","value","inputRef"].forEach(it=>{typeof l.props[it]>"u"&&typeof i[it]<"u"&&(L[it]=i[it])});const U=tp({props:i,muiFormControl:O,states:["error"]}),I={...i,disabled:N,labelPlacement:y,required:B,error:U.error},w=Lht(I),V={slots:T,slotProps:{...a,...x}},[G,k]=Is("typography",{elementType:Oz,externalForwardedProps:V,ownerState:I});let st=g;return st!=null&&st.type!==Oz&&!f&&(st=Mt.jsx(G,{component:"span",...k,className:dn(w.label,k==null?void 0:k.className),children:st})),Mt.jsxs(Uht,{className:dn(w.root,s),ownerState:I,ref:e,...D,children:[ot.cloneElement(l,L),B?Mt.jsxs("div",{children:[st,Mt.jsxs(zht,{ownerState:I,"aria-hidden":!0,className:w.asterisk,children:[" ","*"]})]}):st]})}),Bht="_formContainer_tsvgm_1",Vht={formContainer:Bht},Fht=async n=>{try{const e=(await o2(bT(ET,n))).docs.map(r=>r.data().index);return Math.max(...e.filter(r=>typeof r=="number"))}catch(t){return console.error("Error obteniendo el valor index: ",t),0}},kht=async(n,t,e,i,r,s,a,l,c,f)=>{console.log("Agregando datos...");try{const m=await pst(bT(ET,n),{nombre:e,index:t,posicion:i,uniforme:r,descripcion:s||"null",autor:a||"null",linkVideo:l||"google.com",fechaSubida:c||"null",subidoPor:f||"null",likes:0,disLikes:0});console.log("Documento agregado con ID:",t," - ",m.firestore)}catch(m){console.error("Error al agregar documento:",m)}},Hht=()=>{const{register:n,handleSubmit:t,control:e}=Vst(),i=async r=>{const s=await Fht($P.nodes)+1,a=new Date,l=new Date(a);kht($P.nodes,r.index=s,r.name,r.select||"",r.useGi==="true",r.description||"null",r.autor||"null",r.linkVideo||"null",r.uploadedDate=l.toLocaleDateString(),r.uploadedBy||"null")};return Mt.jsx("div",{className:Vht.formContainer,children:Mt.jsxs(Wft,{component:"form",onSubmit:t(i),sx:{display:"flex",flexDirection:"column",gap:2,p:2,Width:"90vw",Height:"100vh",color:"#333",backgroundColor:"#f2f2f2",border:"1px solid #ccc",boxShadow:"0 0 17px rgb(106, 38, 166)"},children:[Mt.jsx(Kft,{description:"Agrega un nuevo nodo al grafo"}),Mt.jsx(C2,{}),Mt.jsx(GC,{label:"Nombre de la posición",variant:"outlined",...n("name",{required:!0})}),Mt.jsx(GC,{label:"Link del video",variant:"outlined",...n("linkVideo",{required:!0})}),Mt.jsx(xU,{name:"select",control:e,rules:{required:!0},render:({field:r})=>Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(_6,{id:"position-select-label",children:"Posición BJJ"}),Mt.jsxs(aN,{labelId:"position-select-label",id:"position-select",label:"Posición BJJ",defaultValue:"Guardia",...r,children:[Mt.jsx(sm,{value:"guardia",children:"Guardia"}),Mt.jsx(sm,{value:"monta",children:"Montura"}),Mt.jsx(sm,{value:"espalda",children:"Espalda"}),Mt.jsx(sm,{value:"mariposa",children:"Mariposa"}),Mt.jsx(sm,{value:"media_guardia",children:"Media Guardia"}),Mt.jsx(sm,{value:"guardia_abierda",children:"Guardia Abierta"}),Mt.jsx(sm,{value:"guardia_cerrada",children:"Guardia Cerrada"})]})]})}),Mt.jsxs("section",{children:[Mt.jsx("label",{children:"Uniforme"}),Mt.jsx(xU,{name:"useGi",control:e,defaultValue:"",rules:{required:"Selecciona un uniforme"},render:({field:r,fieldState:{error:s}})=>Mt.jsxs(Mt.Fragment,{children:[Mt.jsxs(ght,{"aria-label":"Uniforme",...r,children:[Mt.jsx(Pz,{value:"true",control:Mt.jsx(Iz,{}),label:"Gi"}),Mt.jsx(Pz,{value:"false",control:Mt.jsx(Iz,{}),label:"No Gi"})]}),s&&Mt.jsx("span",{style:{color:"red",fontSize:"0.8rem"},children:s.message})]})})]}),Mt.jsx(GC,{label:"Descripción",variant:"outlined",multiline:!0,rows:3,...n("description")}),Mt.jsx(lN,{type:"submit",variant:"contained",color:"primary",children:"Agregar Nodo"})]})})},Ght=rb(Mt.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m5 11h-4v4h-2v-4H7v-2h4V7h2v4h4z"}),"AddCircleOutlined"),qht=()=>{o_.setState({isAddNodeActive:!0})},jht=()=>Mt.jsx(lN,{onClick:qht,style:{position:"absolute",top:30,left:30,zIndex:10,display:"flex",color:"azure",borderColor:"azure",width:150,height:60},variant:"outlined",color:"primary",startIcon:Mt.jsx(Ght,{}),children:"Agregar nodo"});function Xht(){const n=o_(i=>i.isAddNodeActive),t=o_(i=>i.isLoadingFirestore);ot.useEffect(()=>{},[n]),ot.useEffect(()=>{console.log("cargando datos firestore... ",t)},[t]);const e=ot.useRef(null);return Mt.jsxs("div",{className:"appContainer",children:[n?Mt.jsx("div",{className:"formContainer",children:Mt.jsx(Hht,{})}):Mt.jsx(jht,{}),Mt.jsx("div",{className:"canvasContainer",children:Mt.jsxs(FY,{frameloop:n?"never":"always",camera:{fov:Qp.fov,near:Qp.near,far:Qp.far,position:Qp.position},style:{backgroundColor:kY.canvasBackgraundColor},children:[Mt.jsx(xst,{cameraControlsRef:e}),Mt.jsx(KY,{ref:e,dollySpeed:Qp.dollySpeed,maxDistance:Qp.maxDistance,minDistance:Qp.minDistance})]})})]})}TH.createRoot(document.getElementById("root")).render(Mt.jsx(Xht,{}));
